!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("mux.js"),require("tippy.js"),require("popper.js")):"function"==typeof define&&define.amd?define(["react","mux.js","tippy.js","popper.js"],t):"object"==typeof exports?exports.shakaplayer=t(require("react"),require("mux.js"),require("tippy.js"),require("popper.js")):e.shakaplayer=t(e.react,e["mux.js"],e["tippy.js"],e["popper.js"])}(this,function(__WEBPACK_EXTERNAL_MODULE__1__,__WEBPACK_EXTERNAL_MODULE__2__,__WEBPACK_EXTERNAL_MODULE__6__,__WEBPACK_EXTERNAL_MODULE__14__){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=22)}([function(e,t,n){(function(e){!function(){var n="undefined"!=typeof window?window:e,r={};for(var i in function(e,t){var n,r="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},i=void 0!==e&&e===this?this:void 0!==t&&null!=t?t:this;function a(){a=function(){},i.Symbol||(i.Symbol=o)}var s,o=(s=0,function(e){return"jscomp_symbol_"+(e||"")+s++});function u(){a();var e=i.Symbol.iterator;e||(e=i.Symbol.iterator=i.Symbol("iterator")),"function"!=typeof Array.prototype[e]&&r(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return l(this)}}),u=function(){}}function l(e){var t=0;return c(function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}})}function c(e){return u(),(e={next:e})[i.Symbol.iterator]=function(){return this},e}function d(e){u();var t=e[Symbol.iterator];return t?t.call(e):l(e)}function h(e,t){if(t){for(var n=i,a=e.split("."),s=0;s<a.length-1;s++){var o=a[s];o in n||(n[o]={}),n=n[o]}(o=t(s=n[a=a[a.length-1]]))!=s&&null!=o&&r(n,a,{configurable:!0,writable:!0,value:o})}}function f(e){return function(e){function t(t){return e.next(t)}function n(t){return e.throw(t)}return new Promise(function(r,i){!function e(a){a.done?r(a.value):Promise.resolve(a.value).then(t,n).then(e,i)}(e.next())})}(e())}h("Promise",function(e){function t(e){this.b=0,this.g=void 0,this.a=[];var t=this.c();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function n(){this.a=null}function r(e){return e instanceof t?e:new t(function(t){t(e)})}if(e)return e;n.prototype.b=function(e){null==this.a&&(this.a=[],this.f()),this.a.push(e)},n.prototype.f=function(){var e=this;this.c(function(){e.h()})};var a=i.setTimeout;n.prototype.c=function(e){a(e,0)},n.prototype.h=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.g(e)}}}this.a=null},n.prototype.g=function(e){this.c(function(){throw e})},t.prototype.c=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.s),reject:e(this.f)}},t.prototype.s=function(e){if(e===this)this.f(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.v(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.m(e):this.h(e)}},t.prototype.m=function(e){var t=void 0;try{t=e.then}catch(e){return void this.f(e)}"function"==typeof t?this.C(t,e):this.h(e)},t.prototype.f=function(e){this.i(2,e)},t.prototype.h=function(e){this.i(1,e)},t.prototype.i=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.b);this.b=e,this.g=t,this.l()},t.prototype.l=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)s.b(this.a[e]);this.a=null}};var s=new n;return t.prototype.v=function(e){var t=this.c();e.Yb(t.resolve,t.reject)},t.prototype.C=function(e,t){var n=this.c();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(e){a(e)}}:t}var i,a,s=new t(function(e,t){i=e,a=t});return this.Yb(r(e,i),r(n,a)),s},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.Yb=function(e,t){function n(){switch(r.b){case 1:e(r.g);break;case 2:t(r.g);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},t.resolve=r,t.reject=function(e){return new t(function(t,n){n(e)})},t.race=function(e){return new t(function(t,n){for(var i=d(e),a=i.next();!a.done;a=i.next())r(a.value).Yb(t,n)})},t.all=function(e){var n=d(e),i=n.next();return i.done?r([]):new t(function(e,t){function a(t){return function(n){s[t]=n,0==--o&&e(s)}}var s=[],o=0;do{s.push(void 0),o++,r(i.value).Yb(a(s.length-1),t),i=n.next()}while(!i.done)})},t}),h("Promise.prototype.finally",function(e){return e||function(e){return this.then(function(t){return Promise.resolve(e()).then(function(){return t})},function(t){return Promise.resolve(e()).then(function(){throw t})})}});var p,m="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)p=Object.setPrototypeOf;else{var v;e:{var y={};try{y.__proto__={ne:!0},v=y.ne;break e}catch(s){}v=!1}p=v?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var g=p;function _(){this.g=!1,this.c=null,this.o=void 0,this.j=1,this.b=this.f=0,this.i=this.a=null}function b(e){if(e.g)throw new TypeError("Generator is already running");e.g=!0}function w(e,t){e.a={yd:t,Gd:!0},e.j=e.f||e.b}function E(e,t,n){return e.j=n,{value:t}}function S(e){e.j=0}function T(e,t,n){e.f=t,null!=n&&(e.b=n)}function C(e,t){e.f=0,e.b=t||0}function k(e,t){e.j=t,e.f=0}function I(e){e.f=0;var t=e.a.yd;return e.a=null,t}function A(e){e.i=[e.a],e.f=0,e.b=0}function L(e,t){var n=e.i.splice(0)[0];(n=e.a=e.a||n)?n.Gd?e.j=e.f||e.b:null!=n.A&&e.b<n.A?(e.j=n.A,e.a=null):e.j=e.b:e.j=t}function x(e){this.a=new _,this.b=e}function R(e,t,n,r){try{var i=t.call(e.a.c,n);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return e.a.g=!1,i;var a=i.value}catch(t){return e.a.c=null,w(e.a,t),N(e)}return e.a.c=null,r.call(e.a,a),N(e)}function N(e){for(;e.a.j;)try{var t=e.b(e.a);if(t)return e.a.g=!1,{value:t.value,done:!1}}catch(t){e.a.o=void 0,w(e.a,t)}if(e.a.g=!1,e.a.a){if(t=e.a.a,e.a.a=null,t.Gd)throw t.yd;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function M(e){this.next=function(t){return b(e.a),e.a.c?t=R(e,e.a.c.next,t,e.a.h):(e.a.h(t),t=N(e)),t},this.throw=function(t){return b(e.a),e.a.c?t=R(e,e.a.c.throw,t,e.a.h):(w(e.a,t),t=N(e)),t},this.return=function(t){return function(e,t){b(e.a);var n=e.a.c;return n?R(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.a.return):(e.a.return(t),N(e))}(e,t)},u(),this[Symbol.iterator]=function(){return this}}function P(e,t){return M.prototype=e.prototype,new M(new x(t))}function O(e){if(!(e instanceof Array)){e=d(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}function D(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function U(e,t,n){e instanceof String&&(e=String(e));for(var r=e.length,i=0;i<r;i++){var a=e[i];if(t.call(n,a,i,e))return{Cd:i,ie:a}}return{Cd:-1,ie:void 0}}function F(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}_.prototype.h=function(e){this.o=e},_.prototype.return=function(e){this.a={return:e},this.j=this.b},_.prototype.A=function(e){this.j=e},h("WeakMap",function(e){function t(e){if(this.a=(o+=Math.random()+1).toString(),e){a(),u(),e=d(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}function n(e){D(e,s)||r(e,s,{value:{}})}function i(e){var t=Object[e];t&&(Object[e]=function(e){return n(e),t(e)})}if(function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),r=new e([[t,2],[n,3]]);return 2==r.get(t)&&3==r.get(n)&&(r.delete(t),r.set(n,4),!r.has(t)&&4==r.get(n))}catch(e){return!1}}())return e;var s="$jscomp_hidden_"+Math.random();i("freeze"),i("preventExtensions"),i("seal");var o=0;return t.prototype.set=function(e,t){if(n(e),!D(e,s))throw Error("WeakMap key fail: "+e);return e[s][this.a]=t,this},t.prototype.get=function(e){return D(e,s)?e[s][this.a]:void 0},t.prototype.has=function(e){return D(e,s)&&D(e[s],this.a)},t.prototype.delete=function(e){return!(!D(e,s)||!D(e[s],this.a))&&delete e[s][this.a]},t}),h("Map",function(e){function t(){var e={};return e.Ca=e.next=e.head=e}function n(e,t){var n=e.a;return c(function(){if(n){for(;n.head!=e.a;)n=n.Ca;for(;n.next!=n.head;)return n=n.next,{done:!1,value:t(n)};n=null}return{done:!0,value:void 0}})}function r(e,t){var n=t&&typeof t;"object"==n||"function"==n?s.has(t)?n=s.get(t):(n=""+ ++o,s.set(t,n)):n="p_"+t;var r=e.b[n];if(r&&D(e.b,n))for(var i=0;i<r.length;i++){var a=r[i];if(t!=t&&a.key!=a.key||t===a.key)return{id:n,list:r,index:i,X:a}}return{id:n,list:r,index:-1,X:void 0}}function i(e){if(this.b={},this.a=t(),this.size=0,e){e=d(e);for(var n;!(n=e.next()).done;)n=n.value,this.set(n[0],n[1])}}if(function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(d([[t,"s"]]));if("s"!=n.get(t)||1!=n.size||n.get({x:4})||n.set({x:4},"t")!=n||2!=n.size)return!1;var r=n.entries(),i=r.next();return!i.done&&i.value[0]==t&&"s"==i.value[1]&&!((i=r.next()).done||4!=i.value[0].x||"t"!=i.value[1]||!r.next().done)}catch(e){return!1}}())return e;a(),u();var s=new WeakMap;i.prototype.set=function(e,t){var n=r(this,e);return n.list||(n.list=this.b[n.id]=[]),n.X?n.X.value=t:(n.X={next:this.a,Ca:this.a.Ca,head:this.a,key:e,value:t},n.list.push(n.X),this.a.Ca.next=n.X,this.a.Ca=n.X,this.size++),this},i.prototype.delete=function(e){return!(!(e=r(this,e)).X||!e.list)&&(e.list.splice(e.index,1),e.list.length||delete this.b[e.id],e.X.Ca.next=e.X.next,e.X.next.Ca=e.X.Ca,e.X.head=null,this.size--,!0)},i.prototype.clear=function(){this.b={},this.a=this.a.Ca=t(),this.size=0},i.prototype.has=function(e){return!!r(this,e).X},i.prototype.get=function(e){return(e=r(this,e).X)&&e.value},i.prototype.entries=function(){return n(this,function(e){return[e.key,e.value]})},i.prototype.keys=function(){return n(this,function(e){return e.key})},i.prototype.values=function(){return n(this,function(e){return e.value})},i.prototype.forEach=function(e,t){for(var n,r=this.entries();!(n=r.next()).done;)n=n.value,e.call(t,n[1],n[0],this)},i.prototype[Symbol.iterator]=i.prototype.entries;var o=0;return i}),h("Set",function(e){function t(e){if(this.a=new Map,e){e=d(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.a.size}return function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(d([t]));if(!n.has(t)||1!=n.size||n.add(t)!=n||1!=n.size||n.add({x:4})!=n||2!=n.size)return!1;var r=n.entries(),i=r.next();return!i.done&&i.value[0]==t&&i.value[1]==t&&(!(i=r.next()).done&&i.value[0]!=t&&4==i.value[0].x&&i.value[1]==i.value[0]&&r.next().done)}catch(e){return!1}}()?e:(a(),u(),t.prototype.add=function(e){return this.a.set(e,e),this.size=this.a.size,this},t.prototype.delete=function(e){return e=this.a.delete(e),this.size=this.a.size,e},t.prototype.clear=function(){this.a.clear(),this.size=0},t.prototype.has=function(e){return this.a.has(e)},t.prototype.entries=function(){return this.a.entries()},t.prototype.values=function(){return this.a.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(e,t){var n=this;this.a.forEach(function(r){return e.call(t,r,r,n)})},t)}),h("Array.prototype.findIndex",function(e){return e||function(e,t){return U(this,e,t).Cd}}),h("Array.prototype.keys",function(e){return e||function(){return function(e,t){u(),e instanceof String&&(e+="");var n=0,r={next:function(){if(n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r.next=function(){return{done:!0,value:void 0}},r.next()}};return r[Symbol.iterator]=function(){return r},r}(this,function(e){return e})}}),h("Object.is",function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}}),h("Array.prototype.includes",function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var r=n.length,i=t||0;for(0>i&&(i=Math.max(i+r,0));i<r;i++){var a=n[i];if(a===e||Object.is(a,e))return!0}return!1}}),h("String.prototype.includes",function(e){return e||function(e,t){return-1!==F(this,e,"includes").indexOf(e,t||0)}}),h("Array.from",function(e){return e||function(e,t,n){u(),t=null!=t?t:function(e){return e};var r=[],i=e[Symbol.iterator];if("function"==typeof i)for(e=i.call(e);!(i=e.next()).done;)r.push(t.call(n,i.value));else{i=e.length;for(var a=0;a<i;a++)r.push(t.call(n,e[a]))}return r}}),h("String.prototype.startsWith",function(e){return e||function(e,t){for(var n=F(this,e,"startsWith"),r=n.length,i=e.length,a=Math.max(0,Math.min(0|t,n.length)),s=0;s<i&&a<r;)if(n[a++]!=e[s++])return!1;return s>=i}}),h("Array.prototype.find",function(e){return e||function(e,t){return U(this,e,t).ie}});var B=this;function V(e,t){var n,r=e.split("."),i=B;r[0]in i||!i.execScript||i.execScript("var "+r[0]);for(;r.length&&(n=r.shift());)r.length||void 0===t?i=i[n]?i[n]:i[n]={}:i[n]=t}function j(e,t){function n(){}n.prototype=t.prototype,e.ag=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.og=function(e,n,r){return t.prototype[n].apply(e,Array.prototype.slice.call(arguments,2))}}function H(e){this.c=Math.exp(Math.log(.5)/e),this.b=this.a=0}function K(e,t,n){var r=Math.pow(e.c,t);n=n*(1-r)+r*e.a,isNaN(n)||(e.a=n,e.b+=t)}function G(e){return e.a/(1-Math.pow(e.c,e.b))}function q(){this.b=new H(2),this.c=new H(5),this.a=0}function W(){}function z(){}function Y(){}B.a=!0,q.prototype.getBandwidthEstimate=function(e){return 128e3>this.a?e:Math.min(G(this.b),G(this.c))},e.console&&e.console.log.bind&&(z=console.warn.bind(console),W=console.error.bind(console));var X=/^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function $(e){var t;e instanceof $?(Z(this,e.va),this.$a=e.$a,this.ra=e.ra,Q(this,e.xb),this.ia=e.ia,J(this,e.a.clone()),this.Qa=e.Qa):e&&(t=String(e).match(X))?(Z(this,t[1]||"",!0),this.$a=ee(t[2]||""),this.ra=ee(t[3]||"",!0),Q(this,t[4]),this.ia=ee(t[5]||"",!0),J(this,t[6]||"",!0),this.Qa=ee(t[7]||"")):this.a=new ue(null)}function Z(e,t,n){e.va=n?ee(t,!0):t,e.va&&(e.va=e.va.replace(/:$/,""))}function Q(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.xb=t}else e.xb=null}function J(e,t,n){t instanceof ue?e.a=t:(n||(t=te(t,se)),e.a=new ue(t))}function ee(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function te(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,ne),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ne(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}(n=$.prototype).va="",n.$a="",n.ra="",n.xb=null,n.ia="",n.Qa="",n.toString=function(){var e=[],t=this.va;if(t&&e.push(te(t,re,!0),":"),t=this.ra){e.push("//");var n=this.$a;n&&e.push(te(n,re,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.xb)&&e.push(":",String(t))}return(t=this.ia)&&(this.ra&&"/"!=t.charAt(0)&&e.push("/"),e.push(te(t,"/"==t.charAt(0)?ae:ie,!0))),(t=this.a.toString())&&e.push("?",t),(t=this.Qa)&&e.push("#",te(t,oe)),e.join("")},n.resolve=function(e){var t=this.clone();"data"===t.va&&(t=new $);var n=!!e.va;n?Z(t,e.va):n=!!e.$a,n?t.$a=e.$a:n=!!e.ra,n?t.ra=e.ra:n=null!=e.xb;var r=e.ia;if(n)Q(t,e.xb);else if(n=!!e.ia){if("/"!=r.charAt(0))if(this.ra&&!this.ia)r="/"+r;else{var i=t.ia.lastIndexOf("/");-1!=i&&(r=t.ia.substr(0,i+1)+r)}if(".."==r||"."==r)r="";else if(-1!=r.indexOf("./")||-1!=r.indexOf("/.")){i=0==r.lastIndexOf("/",0),r=r.split("/");for(var a=[],s=0;s<r.length;){var o=r[s++];"."==o?i&&s==r.length&&a.push(""):".."==o?((1<a.length||1==a.length&&""!=a[0])&&a.pop(),i&&s==r.length&&a.push("")):(a.push(o),i=!0)}r=a.join("/")}}return n?t.ia=r:n=""!==e.a.toString(),n?J(t,e.a.clone()):n=!!e.Qa,n&&(t.Qa=e.Qa),t},n.clone=function(){return new $(this)};var re=/[#\/\?@]/g,ie=/[#\?:]/g,ae=/[#\?]/g,se=/[#\?@]/g,oe=/#/g;function ue(e){this.a=e||null}function le(e){this.b=e,this.a=null}function ce(e){this.b=e,this.a=null}function de(e,t){var n={maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0};this.i=null==e.maxAttempts?n.maxAttempts:e.maxAttempts,this.f=null==e.baseDelay?n.baseDelay:e.baseDelay,this.h=null==e.fuzzFactor?n.fuzzFactor:e.fuzzFactor,this.g=null==e.backoffFactor?n.backoffFactor:e.backoffFactor,this.a=0,this.b=this.f,(this.c=void 0!==t&&t)&&(this.a=1)}function he(e){return f(function t(){var n,r;return P(t,function(t){switch(t.j){case 1:if(e.a>=e.i){if(!e.c)return t.return(Promise.reject());e.a=1,e.b=e.f}return n=e.a,e.a++,0==n?t.return():(r=e.b*(1+(2*Math.random()-1)*e.h),E(t,new Promise(function(e){new ce(e).O(r/1e3)}),2));case 2:e.b*=e.g,S(t)}})})}function fe(e,t,n,r){for(var i=[],a=3;a<arguments.length;++a)i[a-3]=arguments[a];this.severity=e,this.category=t,this.code=n,this.data=i,this.handled=!1}function pe(){var e,t,n=new Promise(function(n,r){e=n,t=r});return n.resolve=e,n.reject=t,n}function me(e,t){this.promise=e,this.Jd=t,this.a=!1}function ve(e){return new me(Promise.reject(e),function(){return Promise.resolve()})}function ye(){var e=Promise.reject(new fe(2,7,7001));return e.catch(function(){}),new me(e,function(){return Promise.resolve()})}function ge(e){return new me(Promise.resolve(e),function(){return Promise.resolve()})}function _e(e){return new me(e,function(){return e.catch(function(){})})}function be(e){return new me(Promise.all(e.map(function(e){return e.promise})),function(){return Promise.all(e.map(function(e){return e.abort()}))})}function we(e,t,n){try{var r=e(t);return r&&r.promise&&r.abort?(n.resolve(r.promise),function(){return r.abort()}):(n.resolve(r),function(){return Promise.resolve(r).then(function(){}).catch(function(){})})}catch(e){return n.reject(e),function(){return Promise.resolve()}}}function Ee(t,n){for(var r in n=void 0===n?{}:n)this[r]=n[r];this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=e.performance&&e.performance.now?e.performance.now():Date.now(),this.type=t,this.isTrusted=!1,this.target=this.currentTarget=null,this.a=!1}function Se(){this.a={}}function Te(){this.Bc=new Se,this.Vb=this}function Ce(e){var t=new Set;return function e(n){switch(typeof n){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return n;default:if(!n||n.buffer&&n.buffer.constructor==ArrayBuffer)return n;if(t.has(n))return null;var r=n.constructor==Array;if(n.constructor!=Object&&!r)return null;t.add(n);var i,a=r?[]:{};for(i in n)a[i]=e(n[i]);return r&&(a.length=n.length),a}}(e)}function ke(e,t){return!("number"!=typeof e||"number"!=typeof t||!isNaN(e)||!isNaN(t))||e===t}function Ie(e,t){var n=e.indexOf(t);-1<n&&e.splice(n,1)}function Ae(e,t,n){if(n||(n=ke),e.length!=t.length)return!1;t=t.slice();for(var r={},i=(e=d(e)).next();!i.done;r={item:r.item},i=e.next()){if(r.item=i.value,-1==(i=t.findIndex(function(e){return function(t){return n(e.item,t)}}(r))))return!1;t[i]=t[t.length-1],t.pop()}return 0==t.length}function Le(){this.a=[]}function xe(e,t){e.a.push(t.finally(function(){Ie(e.a,t)}))}function Re(e){Te.call(this),this.f=!1,this.g=new Le,this.a=new Set,this.b=new Set,this.c=e||null}(n=ue.prototype).ha=null,n.$b=null,n.add=function(e,t){if(!this.ha&&(this.ha={},this.$b=0,this.a))for(var n=this.a.split("&"),r=0;r<n.length;r++){var i=n[r].indexOf("="),a=null;if(0<=i){var s=n[r].substring(0,i);a=n[r].substring(i+1)}else s=n[r];s=decodeURIComponent(s.replace(/\+/g," ")),a=a||"",this.add(s,decodeURIComponent(a.replace(/\+/g," ")))}return this.a=null,(n=this.ha.hasOwnProperty(e)&&this.ha[e])||(this.ha[e]=n=[]),n.push(t),this.$b++,this},n.toString=function(){if(this.a)return this.a;if(!this.ha)return"";var e,t=[];for(e in this.ha)for(var n=encodeURIComponent(e),r=this.ha[e],i=0;i<r.length;i++){var a=n;""!==r[i]&&(a+="="+encodeURIComponent(r[i])),t.push(a)}return this.a=t.join("&")},n.clone=function(){var e=new ue;if(e.a=this.a,this.ha){var t,n={};for(t in this.ha)n[t]=this.ha[t].concat();e.ha=n,e.$b=this.$b}return e},le.prototype.O=function(t){var n=this;this.stop();var r=!0,i=null;return this.a=function(){e.clearTimeout(i),r=!1},i=e.setTimeout(function(){r&&n.b()},1e3*t),this},le.prototype.stop=function(){this.a&&(this.a(),this.a=null)},V("shaka.util.Timer",ce),ce.prototype.sc=function(){return this.stop(),this.b(),this},ce.prototype.tickNow=ce.prototype.sc,ce.prototype.O=function(e){var t=this;return this.stop(),this.a=new le(function(){t.b()}).O(e),this},ce.prototype.tickAfter=ce.prototype.O,ce.prototype.La=function(e){var t=this;return this.stop(),this.a=new le(function(){t.a.O(e),t.b()}).O(e),this},ce.prototype.tickEvery=ce.prototype.La,ce.prototype.stop=function(){this.a&&(this.a.stop(),this.a=null)},ce.prototype.stop=ce.prototype.stop,V("shaka.util.Error",fe),fe.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},fe.Severity={RECOVERABLE:1,CRITICAL:2},fe.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9},fe.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,UNKNOWN_DATA_URI_ENCODING:1005,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,UNPLAYABLE_PERIOD:4011,RESTRICTIONS_CANNOT_BE_MET:4012,NO_PERIODS:4014,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_COULD_NOT_GUESS_MIME_TYPE:4021,HLS_MASTER_PLAYLIST_NOT_PROVIDED:4022,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,HLS_COULD_NOT_PARSE_SEGMENT_START_TIME:4030,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,HLS_AES_128_ENCRYPTION_NOT_SUPPORTED:4034,INVALID_STREAMS_CHOSEN:5005,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,CAST_RECEIVER_APP_ID_MISSING:8007,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,STORE_ALREADY_IN_PROGRESS:9006,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013},pe.prototype.resolve=function(){},pe.prototype.reject=function(){},V("shaka.util.AbortableOperation",me),me.failed=ve,me.aborted=ye,me.completed=ge,me.notAbortable=_e,me.prototype.abort=function(){return this.a=!0,this.Jd()},me.prototype.abort=me.prototype.abort,me.all=be,me.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},me.prototype.finally=me.prototype.finally,me.prototype.U=function(e,t){function n(){return i.reject(new fe(2,7,7001)),r.abort()}var r=this,i=new pe;return this.promise.then(function(t){r.a?i.reject(new fe(2,7,7001)):e?n=we(e,t,i):i.resolve(t)},function(e){t?n=we(t,e,i):i.reject(e)}),new me(i,function(){return n()})},me.prototype.chain=me.prototype.U,Ee.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},Ee.prototype.stopImmediatePropagation=function(){this.a=!0},Ee.prototype.stopPropagation=function(){},(n=Se.prototype).push=function(e,t){this.a.hasOwnProperty(e)?this.a[e].push(t):this.a[e]=[t]},n.get=function(e){return(e=this.a[e])?e.slice():null},n.getAll=function(){var e,t=[];for(e in this.a)t.push.apply(t,this.a[e]);return t},n.remove=function(e,t){var n=this.a[e];if(n)for(var r=0;r<n.length;++r)n[r]==t&&(n.splice(r,1),--r)},n.forEach=function(e){for(var t in this.a)e(t,this.a[t])},Te.prototype.addEventListener=function(e,t){this.Bc.push(e,t)},Te.prototype.removeEventListener=function(e,t){this.Bc.remove(e,t)},Te.prototype.dispatchEvent=function(e){for(var t=this.Bc.get(e.type)||[],n=0;n<t.length;++n){e.target=this.Vb,e.currentTarget=this.Vb;var r=t[n];try{r.handleEvent?r.handleEvent(e):r.call(this,e)}catch(e){}if(e.a)break}return e.defaultPrevented},Le.prototype.destroy=function(){var e=[];return this.a.forEach(function(t){t.promise.catch(function(){}),e.push(t.abort())}),this.a=[],Promise.all(e)},j(Re,Te),V("shaka.net.NetworkingEngine",Re);var Ne={MANIFEST:0,SEGMENT:1,LICENSE:2,APP:3,TIMING:4};Re.RequestType=Ne,Re.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:3};var Me={};function Pe(e,t,n){n=n||3;var r=Me[e];(!r||n>=r.priority)&&(Me[e]={priority:n,zf:t})}function Oe(e,t){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null}}function De(){this.a=0}function Ue(e,t,n){me.call(this,e,t),this.b=n}Re.registerScheme=Pe,Re.unregisterScheme=function(e){delete Me[e]},Re.prototype.Bf=function(e){this.a.add(e)},Re.prototype.registerRequestFilter=Re.prototype.Bf,Re.prototype.cg=function(e){this.a.delete(e)},Re.prototype.unregisterRequestFilter=Re.prototype.cg,Re.prototype.we=function(){this.a.clear()},Re.prototype.clearAllRequestFilters=Re.prototype.we,Re.prototype.Cf=function(e){this.b.add(e)},Re.prototype.registerResponseFilter=Re.prototype.Cf,Re.prototype.dg=function(e){this.b.delete(e)},Re.prototype.unregisterResponseFilter=Re.prototype.dg,Re.prototype.xe=function(){this.b.clear()},Re.prototype.clearAllResponseFilters=Re.prototype.xe,Re.prototype.destroy=function(){return this.f=!0,this.a.clear(),this.b.clear(),this.g.destroy()},Re.prototype.destroy=Re.prototype.destroy,Re.prototype.request=function(e,t){var n=this,r=new De;if(this.f){var i=Promise.reject(new fe(2,7,7001));return i.catch(function(){}),new Ue(i,function(){return Promise.resolve()},r)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?Ce(t.retryParameters):{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},t.uris=Ce(t.uris);var a=(i=function(e,t,n){for(var r=ge(void 0),i={},a=(e=d(e.a)).next();!a.done;i={fd:i.fd},a=e.next())i.fd=a.value,r=r.U(function(e){return function(){return e.fd(t,n)}}(i));return r.U(void 0,function(e){if(e&&7001==e.code)throw e;throw new fe(2,1,1006,e)})}(this,e,t)).U(function(){return function e(t,n,r,i,a,s,o){var u=new $(r.uris[a]),l=u.va,c=!1;l||(l=location.protocol,l=l.slice(0,-1),Z(u,l),r.uris[a]=u.toString());var d=(l=Me[l])?l.zf:null;if(!d)return ve(new fe(2,1,1e3,u));var h;return _e(he(i)).U(function(){return t.f?ye():(h=Date.now(),d(r.uris[a],r,n,function(e,r,i){t.c&&1==n&&(t.c(e,r),c=!0,o.a=i)}))}).U(function(e){return null==e.timeMs&&(e.timeMs=Date.now()-h),{response:e,Ze:c}},function(u){if(u&&7001==u.code)throw u;if(t.f)return ye();if(u&&1==u.severity)return t.dispatchEvent(new Ee("retry",{error:u instanceof fe?u:null})),a=(a+1)%r.uris.length,e(t,n,r,i,a,u,o);throw u||s})}(n,e,t,new de(t.retryParameters,!1),0,null,r)}),s=a.U(function(t){return function(e,t,n){for(var r=ge(void 0),i=(e=d(e.b)).next();!i.done;i=e.next())r=r.U(i.value.bind(null,t,n.response));return r.U(function(){return n},function(e){if(e&&7001==e.code)throw e;var t=2;throw e instanceof fe&&(t=e.severity),new fe(t,1,1007,e)})}(n,e,t)}),o=Date.now(),u=0;i.promise.then(function(){u=Date.now()-o},function(){});var l=0;return a.promise.then(function(){l=Date.now()},function(){}),i=new Ue((i=s.U(function(t){var r=Date.now()-l,i=t.response;return i.timeMs+=u,i.timeMs+=r,t.Ze||!n.c||i.fromCache||1!=e||n.c(i.timeMs,i.data.byteLength),i},function(e){throw e&&(e.severity=2),e})).promise,i.Jd,r),xe(this.g,i),i},Re.prototype.request=Re.prototype.request,Re.NumBytesRemainingClass=De;var Fe=Ue;if(Fe.prototype=m(me.prototype),Fe.prototype.constructor=Fe,g)g(Fe,me);else for(var Be in me)if("prototype"!=Be)if(Object.defineProperties){var Ve=Object.getOwnPropertyDescriptor(me,Be);Ve&&Object.defineProperty(Fe,Be,Ve)}else Fe[Be]=me[Be];function je(){}function He(){this.a=new Se}function Ke(e,t,n,r){this.target=e,this.type=t,this.listener=n,this.a=function(e,t){if(null==t)return!1;if("boolean"==typeof t)return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter(function(e){return!n.has(e)}),function(e){var t=Ge;if(null==t){t=!1;try{var n={},r={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",r),Object.defineProperty(n,"capture",r),r=function(){},e.addEventListener("test",r,n),e.removeEventListener("test",r,n)}catch(e){t=!1}Ge=t}return t||!1}(e)?t:t.capture||!1}(e,r),this.target.addEventListener(t,n,this.a)}Fe.ag=me.prototype,Re.PendingRequest=Ue,Ue.all=be,Ue.notAbortable=_e,Ue.completed=ge,Ue.aborted=ye,Ue.failed=ve,V("shaka.util.IReleasable",je),je.prototype.release=function(){},V("shaka.util.EventManager",He),He.prototype.release=function(){this.Ya(),this.a=null},He.prototype.release=He.prototype.release,He.prototype.w=function(e,t,n,r){this.a&&(e=new Ke(e,t,n,r),this.a.push(t,e))},He.prototype.listen=He.prototype.w,He.prototype.da=function(e,t,n,r){var i=this;this.w(e,t,function r(a){i.ea(e,t,r),n(a)},r)},He.prototype.listenOnce=He.prototype.da,He.prototype.ea=function(e,t,n){if(this.a)for(var r=this.a.get(t)||[],i=(r=d(r)).next();!i.done;i=r.next())(i=i.value).target!=e||n!=i.listener&&n||(i.ea(),this.a.remove(t,i))},He.prototype.unlisten=He.prototype.ea,He.prototype.Ya=function(){if(this.a){for(var e=this.a.getAll(),t=(e=d(e)).next();!t.done;t=e.next())t.value.ea();this.a.a={}}},He.prototype.removeAll=He.prototype.Ya,Ke.prototype.ea=function(){this.target.removeEventListener(this.type,this.listener,this.a),this.listener=this.target=null,this.a=!1},Ke.prototype.unlisten=Ke.prototype.ea;var Ge=void 0;function qe(e){if(e=new Uint8Array(e),new DataView(e.buffer,e.byteOffset,e.byteLength).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");return new $(e=at(e.subarray(4),!0)).ra}function We(e,t,n){function r(e){new DataView(a.buffer).setUint32(s,e.byteLength,!0),s+=4,i(e)}function i(e){a.set(e,s),s+=e.byteLength}if(!n||!n.byteLength)throw new fe(2,6,6015);t="string"==typeof t?new Uint8Array(ut(t,!0)):new Uint8Array(t);var a=new Uint8Array(8+e.byteLength+t.byteLength+n.byteLength),s=0;return i(new Uint8Array(e)),r(t),r(new Uint8Array(n)),a}function ze(e,t){for(var n=d(e),r=n.next();!r.done;r=n.next())if(!t(r.value))return!1;return!0}function Ye(e){var t=new Map;return Object.keys(e).forEach(function(n){t.set(n,e[n])}),t}function Xe(e){var t={};return e.forEach(function(e,n){t[n]=e}),t}function $e(e,t){var n=e;return t&&(n+='; codecs="'+t+'"'),n}function Ze(e){var t=(e=e.split("."))[0];return e.pop(),[t,e.join(".")]}V("shaka.util.FairPlayUtils.defaultGetContentId",qe),V("shaka.util.FairPlayUtils.initDataTransform",We);var Qe=(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");function Je(){return!(!e.MediaSource||!MediaSource.isTypeSupported)}function et(e){return""!=(rt||(nt||(nt=new ce(function(){rt=null})),(rt=document.querySelector("video")||document.querySelector("audio"))||(rt=document.createElement("video")),nt.O(1),rt)).canPlayType(e)}function tt(e){return(navigator.userAgent||"").includes(e)}var nt=null,rt=null;function it(e){if(!e)return"";239==(e=new Uint8Array(e))[0]&&187==e[1]&&191==e[2]&&(e=e.subarray(3)),e=lt(e),e=escape(e);try{return decodeURIComponent(e)}catch(e){throw new fe(2,2,2004)}}function at(e,t,n){if(!e)return"";if(!n&&0!=e.byteLength%2)throw new fe(2,2,2004);if(e instanceof ArrayBuffer)var r=e;else(n=new Uint8Array(e.byteLength)).set(new Uint8Array(e)),r=n.buffer;e=Math.floor(e.byteLength/2),n=new Uint16Array(e),r=new DataView(r);for(var i=0;i<e;i++)n[i]=r.getUint16(2*i,t);return lt(n)}function st(e){var t=new Uint8Array(e);if(239==t[0]&&187==t[1]&&191==t[2])return it(t);if(254==t[0]&&255==t[1])return at(t.subarray(2),!1);if(255==t[0]&&254==t[1])return at(t.subarray(2),!0);var n=function(e,t){return e.byteLength<=t||32<=e[t]&&126>=e[t]}.bind(null,t);if(0==t[0]&&0==t[2])return at(e,!1);if(0==t[1]&&0==t[3])return at(e,!0);if(n(0)&&n(1)&&n(2)&&n(3))return it(e);throw new fe(2,2,2003)}function ot(e){e=encodeURIComponent(e),e=unescape(e);for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t.buffer}function ut(e,t){for(var n=new Uint8Array(2*e.length),r=new DataView(n.buffer),i=0;i<e.length;++i)r.setUint16(2*i,e.charCodeAt(i),t);return n.buffer}function lt(e){if(!ct)for(var t=function(e){try{return O(new Uint8Array(e)),!0}catch(e){return!1}},n={size:65536};0<n.size;(n={size:n.size}).size/=2)if(t(n.size)){ct=function(e){return function(t){for(var n="",r=0;r<t.length;r+=e.size)n+=String.fromCharCode.apply(String,O(t.subarray(r,r+e.size)));return n}}(n);break}return ct(e)}V("shaka.util.StringUtils.fromUTF8",it),V("shaka.util.StringUtils.fromUTF16",at),V("shaka.util.StringUtils.fromBytesAutoDetect",st),V("shaka.util.StringUtils.toUTF8",ot),V("shaka.util.StringUtils.toUTF16",ut);var ct=null;function dt(t,n){var r=lt(t);return n=null==n||n,r=e.btoa(r).replace(/\+/g,"-").replace(/\//g,"_"),n?r:r.replace(/=*$/,"")}function ht(t){t=e.atob(t.replace(/-/g,"+").replace(/_/g,"/"));for(var n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}function ft(t){for(var n=new Uint8Array(t.length/2),r=0;r<t.length;r+=2)n[r/2]=e.parseInt(t.substr(r,2),16);return n}function pt(e){for(var t="",n=0;n<e.length;++n){var r=e[n].toString(16);1==r.length&&(r="0"+r),t+=r}return t}function mt(e,t){if(!e&&!t)return!0;if(!e||!t||e.length!=t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!=t[n])return!1;return!0}function vt(e){for(var t=[],n=0;n<arguments.length;++n)t[n]=arguments[n];for(var r=n=0;r<t.length;++r)n+=t[r].length;n=new Uint8Array(n);for(var i=r=0;i<t.length;++i)n.set(t[i],r),r+=t[i].length;return n}function yt(e){var t=this;this.C=e,this.v=new Set,this.m=this.h=null,this.P=!1,this.a=null,this.i=new He,this.b=new Map,this.s=[],this.l=new pe,this.c=null,this.g=function(n){t.l.reject(n),e.onError(n)},this.na=new Map,this.T=new Map,this.M=new ce(function(){return function(e){var t=e.na,n=e.T;n.clear(),t.forEach(function(e,t){return n.set(t,e)}),(t=Array.from(n.values())).length&&t.every(function(e){return"expired"==e})&&e.g(new fe(2,6,6014)),e.C.kc(Xe(n))}(t)}),this.f=!1,this.$=new pe,this.D=!1,this.G=[],this.ma=!1,this.W=new ce(function(){!function(e){e.b.forEach(function(t,n){var r=t.Yc,i=n.expiration;isNaN(i)&&(i=1/0),i!=r&&(e.C.onExpirationUpdated(n.sessionId,i),t.Yc=i)})}(t)}).La(1),this.l.catch(function(){})}function gt(e,t,n){return e.s=n,e.D=0<n.length,_t(e,t)}function _t(t,n){var r=n.some(function(e){return 0<e.drmInfos.length});if(!r){var i=Ye(t.c.servers);!function(e,t){var n=[];t.forEach(function(e,t){n.push({keySystem:t,licenseServerUri:e,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:[],keyIds:[]})});for(var r=d(e),i=r.next();!i.done;i=r.next())i.value.drmInfos=n}(n,i)}var a=function(t){if(0==(t=Ye(t.c.clearKeys)).size)return null;var n=[],r=[];t.forEach(function(e,t){var i=ft(t),a=ft(e);i={kty:"oct",kid:dt(i,!1),k:dt(a,!1)},n.push(i),r.push(i.kid)}),t=JSON.stringify({keys:n});var i=JSON.stringify({kids:r});return i=[{initData:new Uint8Array(ot(i)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+e.btoa(t),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:i,keyIds:[]}}(t);if(a){var s=d(n);for(i=s.next();!i.done;i=s.next())i.value.drmInfos=[a]}for(i=(a=d(n)).next();!i.done;i=a.next())for(s=(i=d(i.value.drmInfos)).next();!s.done;s=i.next())Mt(s.value,Ye(t.c.servers),Ye(t.c.advanced||{}));return(i=function(e,t){for(var n=new Set,r=d(t),i=r.next();!i.done;i=r.next()){var a=d(i.value.drmInfos);for(i=a.next();!i.done;i=a.next())n.add(i.value)}for(r=d(n),i=r.next();!i.done;i=r.next())Mt(i.value,Ye(e.c.servers),Ye(e.c.advanced||{}));a=e.D?"required":"optional";var s=e.D?["persistent-license"]:["temporary"];for(r=new Map,n=d(n),i=n.next();!i.done;i=n.next())i=i.value,r.set(i.keySystem,{audioCapabilities:[],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:a,sessionTypes:s,label:i.keySystem,drmInfos:[]});for(n=d(t),i=n.next();!i.done;i=n.next()){i=i.value,a=i.audio,s=i.video;var o=a?$e(a.mimeType,a.codecs):"",u=s?$e(s.mimeType,s.codecs):"",l=d(i.drmInfos);for(i=l.next();!i.done;i=l.next()){i=i.value;var c=r.get(i.keySystem);c.drmInfos.push(i),i.distinctiveIdentifierRequired&&(c.distinctiveIdentifier="required"),i.persistentStateRequired&&(c.persistentState="required"),a&&c.audioCapabilities.push({robustness:i.audioRobustness||"",contentType:o}),s&&c.videoCapabilities.push({robustness:i.videoRobustness||"",contentType:u})}}return r}(t,n)).size?(i=Ct(t,i),r?i:i.catch(function(){})):(t.P=!0,Promise.resolve())}function bt(e){return f(function t(){var n;return P(t,function(t){switch(t.j){case 1:if(!(e.h&&e.a&&e.a.serverCertificate&&e.a.serverCertificate.length)){t.A(0);break}return T(t,3),E(t,e.h.setServerCertificate(e.a.serverCertificate),5);case 5:k(t,0);break;case 3:return n=I(t),t.return(Promise.reject(new fe(2,6,6004,n.message)))}})})}function wt(e){var t=e.a?e.a.initData:[];return t.forEach(function(t){return It(e,t.initDataType,t.initData)}),e.s.forEach(function(t){return kt(e,t)}),t.length||e.s.length||e.l.resolve(),e.l}function Et(e,t,n){for(var r=e.b.values(),i=(r=d(r)).next();!i.done;i=r.next())if(mt(n,i.value.initData))return;It(e,t,n)}function St(e,t){return!!tt("Edge/")||e.v.has(t)}function Tt(e){return e=function(e,t){for(var n=[],r=d(e),i=r.next();!i.done;i=r.next())n.push(t(i.value));return n}(e=e.b.keys(),function(e){return e.sessionId}),Array.from(e)}function Ct(e,t){if(1==t.size&&t.has(""))return Promise.reject(new fe(2,6,6e3));for(var n=d(t.values()),r=n.next();!r.done;r=n.next())0==(r=r.value).audioCapabilities.length&&delete r.audioCapabilities,0==r.videoCapabilities.length&&delete r.videoCapabilities;var i=n=new pe;return[!0,!1].forEach(function(e){var n=this;t.forEach(function(t,r){t.drmInfos.some(function(e){return!!e.licenseServerUri})==e&&(i=i.catch(function(){if(!this.f)return navigator.requestMediaKeySystemAccess(r,[t])}.bind(n)))})}.bind(e)),i=(i=i.catch(function(){return Promise.reject(new fe(2,6,6001))})).then(function(e){if(this.f)return Promise.reject();this.v.clear();var n=e.getConfiguration(),r=n.videoCapabilities||[],i=d(n.audioCapabilities||[]);for(n=i.next();!n.done;n=i.next())this.v.add(n.value.contentType);for(n=(r=d(r)).next();!n.done;n=r.next())this.v.add(n.value.contentType);r=e.keySystem,i=[];var a=[],s=[],o=[];return function(e,t,n,r,i){e.forEach(function(e){if(t.includes(e.licenseServerUri)||t.push(e.licenseServerUri),e.serverCertificate&&(n.some(function(t){return mt(t,e.serverCertificate)})||n.push(e.serverCertificate)),e.initData&&e.initData.forEach(function(e){r.some(function(t){return!(!t.keyId||t.keyId!=e.keyId)||t.initDataType==e.initDataType&&mt(t.initData,e.initData)})||r.push(e)}),e.keyIds)for(var a=0;a<e.keyIds.length;++a)i.includes(e.keyIds[a])||i.push(e.keyIds[a])})}((n=t.get(e.keySystem)).drmInfos,i,a,s,o),this.a={keySystem:r,licenseServerUri:i[0],distinctiveIdentifierRequired:"required"==n.distinctiveIdentifier,persistentStateRequired:"required"==n.persistentState,audioRobustness:n.audioCapabilities?n.audioCapabilities[0].robustness:"",videoRobustness:n.videoCapabilities?n.videoCapabilities[0].robustness:"",serverCertificate:a[0],initData:s,keyIds:o},this.a.licenseServerUri?e.createMediaKeys():Promise.reject(new fe(2,6,6012,this.a.keySystem))}.bind(e)).then(function(e){if(this.f)return Promise.reject();this.h=e,this.P=!0}.bind(e)).catch(function(e){if(!this.f)return this.a=null,this.v.clear(),e instanceof fe?Promise.reject(e):Promise.reject(new fe(2,6,6002,e.message))}.bind(e)),n.reject(),i}function kt(e,t){try{var n=e.h.createSession("persistent-license")}catch(t){var r=new fe(2,6,6005,t.message);return e.g(r),Promise.reject(r)}e.i.w(n,"message",e.Rd.bind(e)),e.i.w(n,"keystatuseschange",e.Pd.bind(e));var i={initData:null,loaded:!1,Yc:1/0,xa:null};return e.b.set(n,i),n.load(t).then(function(e){return this.f?Promise.reject():e?(i.loaded=!0,Nt(this)&&this.l.resolve(),n):(this.b.delete(n),void this.g(new fe(2,6,6013)))}.bind(e),function(e){this.f||(this.b.delete(n),this.g(new fe(2,6,6005,e.message)))}.bind(e))}function It(e,t,n){try{var r=e.D?e.h.createSession("persistent-license"):e.h.createSession()}catch(t){return void e.g(new fe(2,6,6005,t.message))}e.i.w(r,"message",e.Rd.bind(e)),e.i.w(r,"keystatuseschange",e.Pd.bind(e)),e.b.set(r,{initData:n,loaded:!1,Yc:1/0,xa:null});try{if(e.c.initDataTransform)n=e.c.initDataTransform(n);else if(e.keySystem().startsWith("com.apple.fps")){var i=e.a.serverCertificate;n=We(n,qe(n),i)}}catch(n){return t=n,n instanceof fe||(t=new fe(2,6,6016,n)),void e.g(t)}r.generateRequest(t,n.buffer).catch(function(t){if(!e.f){if(e.b.delete(r),t.errorCode&&t.errorCode.systemCode){var n=t.errorCode.systemCode;0>n&&(n+=Math.pow(2,32)),n="0x"+n.toString(16)}e.g(new fe(2,6,6006,t.message,t,n))}})}function At(e,t){var n=t.target,r=e.b.get(n),i=e.a.licenseServerUri,a=e.c.advanced[e.a.keySystem];"individualization-request"==t.messageType&&a&&a.individualizationServer&&(i=a.individualizationServer),(i=Oe([i],e.c.retryParameters)).body=t.message,i.method="POST",i.licenseRequestType=t.messageType,i.sessionId=n.sessionId,"com.microsoft.playready"!=e.a.keySystem&&"com.chromecast.playready"!=e.a.keySystem||function(e){var t=at(e.body,!0,!0);if(t.includes("PlayReadyKeyMessage")){for(var n=(t=(new DOMParser).parseFromString(t,"application/xml")).getElementsByTagName("HttpHeader"),r=0;r<n.length;++r)e.headers[n[r].querySelector("name").textContent]=n[r].querySelector("value").textContent;e.body=ht(t.querySelector("Challenge").textContent).buffer}else e.headers["Content-Type"]="text/xml; charset=utf-8"}(i),e.a.keySystem.startsWith("com.apple.fps")&&e.c.fairPlayTransform&&function(e){var t=new Uint8Array(e.body);t="spc="+dt(t),e.headers["Content-Type"]="application/x-www-form-urlencoded",e.body=ot(t)}(i),e.C.rb.request(2,i).promise.then(function(e){return this.f?Promise.reject():(this.a.keySystem.startsWith("com.apple.fps")&&this.c.fairPlayTransform&&function(e){try{var t=it(e.data)}catch(e){return}"<ckc>"===(t=t.trim()).substr(0,5)&&"</ckc>"===t.substr(-6)&&(t=t.slice(5,-6));try{t=JSON.parse(t).ckc}catch(e){}e.data=ht(t).buffer}(e),n.update(e.data).then(function(){var e=this;this.C.onEvent(new Ee("drmsessionupdate")),r&&(r.xa&&r.xa.resolve(),new ce(function(){r.loaded=!0,Nt(e)&&e.l.resolve()}).O(Ot))}.bind(this)))}.bind(e),function(e){this.f||(e=new fe(2,6,6007,e),this.g(e),r&&r.xa&&r.xa.reject(e))}.bind(e)).catch(function(e){this.f||(e=new fe(2,6,6008,e.message),this.g(e),r&&r.xa&&r.xa.reject(e))}.bind(e))}function Lt(){var e=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],t=[{videoCapabilities:e,persistentState:"required",sessionTypes:["persistent-license"]},{videoCapabilities:e}],n=new Map;return e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.apple.fps.3_0 com.apple.fps.2_0 com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" ").map(function(e){return function(e){return f(function r(){var i,a,s;return P(r,function(r){switch(r.j){case 1:return T(r,2),E(r,navigator.requestMediaKeySystemAccess(e,t),4);case 4:return i=r.o,s=!!(a=i.getConfiguration().sessionTypes)&&a.includes("persistent-license"),tt("Tizen 3")&&(s=!1),n.set(e,{persistentState:s}),E(r,i.createMediaKeys(),5);case 5:k(r,0);break;case 2:I(r),n.set(e,null),S(r)}})})}(e)}),Promise.all(e).then(function(){return Xe(n)})}function xt(e,t){var n=t.audio,r=t.video;if(n&&n.encrypted&&!St(e,$e(n.mimeType,n.codecs))||r&&r.encrypted&&!St(e,$e(r.mimeType,r.codecs)))return!1;var i=e.keySystem();return 0==t.drmInfos.length||t.drmInfos.some(function(e){return e.keySystem==i})}function Rt(e,t){if(!e.length)return t;if(!t.length)return e;for(var n=[],r=0;r<e.length;r++)for(var i=0;i<t.length;i++)if(e[r].keySystem==t[i].keySystem){var a=e[r];i=t[i];var s=[];s=(s=s.concat(a.initData||[])).concat(i.initData||[]);var o=[];o=(o=o.concat(a.keyIds)).concat(i.keyIds),n.push({keySystem:a.keySystem,licenseServerUri:a.licenseServerUri||i.licenseServerUri,distinctiveIdentifierRequired:a.distinctiveIdentifierRequired||i.distinctiveIdentifierRequired,persistentStateRequired:a.persistentStateRequired||i.persistentStateRequired,videoRobustness:a.videoRobustness||i.videoRobustness,audioRobustness:a.audioRobustness||i.audioRobustness,serverCertificate:a.serverCertificate||i.serverCertificate,initData:s,keyIds:o});break}return n}function Nt(e){return ze(e=e.b.values(),function(e){return e.loaded})}function Mt(t,n,r){!t.keySystem||"org.w3.clearkey"==t.keySystem&&t.licenseServerUri||(n.size&&(n=n.get(t.keySystem)||"",t.licenseServerUri=n),t.keyIds||(t.keyIds=[]),(r=r.get(t.keySystem))&&(t.distinctiveIdentifierRequired||(t.distinctiveIdentifierRequired=r.distinctiveIdentifierRequired),t.persistentStateRequired||(t.persistentStateRequired=r.persistentStateRequired),t.videoRobustness||(t.videoRobustness=r.videoRobustness),t.audioRobustness||(t.audioRobustness=r.audioRobustness),t.serverCertificate||(t.serverCertificate=r.serverCertificate)),e.cast&&e.cast.__platform__&&"com.microsoft.playready"==t.keySystem&&(t.keySystem="com.chromecast.playready"))}V("shaka.util.Uint8ArrayUtils.toBase64",dt),V("shaka.util.Uint8ArrayUtils.fromBase64",ht),V("shaka.util.Uint8ArrayUtils.fromHex",ft),V("shaka.util.Uint8ArrayUtils.toHex",pt),V("shaka.util.Uint8ArrayUtils.equal",mt),V("shaka.util.Uint8ArrayUtils.concat",vt),(n=yt.prototype).destroy=function(){var e=this;return f(function t(){return P(t,function(t){switch(t.j){case 1:return e.f?E(t,e.$,0):(e.f=!0,E(t,function(e){return f(function t(){var n;return P(t,function(t){switch(t.j){case 1:return e.i.release(),e.i=null,e.l.reject(),e.W.stop(),e.W=null,e.M.stop(),e.M=null,n=Array.from(e.b.keys()),e.b.clear(),E(t,Promise.all(n.map(function(e){return Promise.resolve().then(function(){return f(function t(){return P(t,function(t){switch(t.j){case 1:return T(t,2),E(t,function(e){return f(function t(){var n;return P(t,function(t){switch(t.j){case 1:return n=new Promise(function(e){new ce(e).O(Pt)}),E(t,Promise.race([e.close().then(function(){return!0}),n.then(function(){return!1})]),2);case 2:S(t)}})})}(e),4);case 4:k(t,0);break;case 2:I(t),S(t)}})})})})),2);case 2:if(!e.m){t.A(3);break}return T(t,4),E(t,e.m.setMediaKeys(null),6);case 6:k(t,5);break;case 4:I(t);case 5:e.m=null;case 3:e.a=null,e.v.clear(),e.h=null,e.s=[],e.c=null,e.g=null,e.C=null,S(t)}})})}(e),4));case 4:e.$.resolve(),t.A(0)}})})},n.configure=function(e){this.c=e},n.Cb=function(e){var t=this;if(!this.h)return this.i.da(e,"encrypted",function(){t.g(new fe(2,6,6010))}),Promise.resolve();this.m=e,this.i.da(this.m,"play",function(){for(var e=0;e<t.G.length;e++)At(t,t.G[e]);t.ma=!0,t.G=[]}),e=(e=this.m.setMediaKeys(this.h)).catch(function(e){return Promise.reject(new fe(2,6,6003,e.message))});var n=bt(this);return Promise.all([e,n]).then(function(){if(t.f)return Promise.reject();wt(t),t.a.initData.length||t.s.length||t.i.w(t.m,"encrypted",function(e){return Et(t,e.initDataType,new Uint8Array(e.initData))})}).catch(function(e){if(!t.f)return Promise.reject(e)})},n.keySystem=function(){return this.a?this.a.keySystem:""},n.dc=function(){for(var e=1/0,t=this.b.keys(),n=(t=d(t)).next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},n.Rd=function(e){this.c.delayLicenseRequestUntilPlayed&&this.m.paused&&!this.ma?this.G.push(e):At(this,e)},n.Pd=function(e){e=e.target;var t=this.b.get(e),n=!1;e.keyStatuses.forEach(function(e,r){if("string"==typeof r){var i=r;r=e,e=i}if("com.microsoft.playready"==this.a.keySystem&&16==r.byteLength&&!tt("Tizen")){var a=(i=new DataView(r)).getUint32(0,!0),s=i.getUint16(4,!0),o=i.getUint16(6,!0);i.setUint32(0,a,!1),i.setUint16(4,s,!1),i.setUint16(6,o,!1)}"com.microsoft.playready"==this.a.keySystem&&"status-pending"==e&&(e="usable"),"status-pending"!=e&&(t.loaded=!0),"expired"==e&&(n=!0),i=pt(new Uint8Array(r)),this.na.set(i,e)}.bind(this));var r=e.expiration-Date.now();(0>r||n&&1e3>r)&&t&&!t.xa&&(this.b.delete(e),e.close().catch(function(){})),Nt(this)&&(this.l.resolve(),this.M.O(Dt))};var Pt=1,Ot=5,Dt=.5;function Ut(){this.a=new muxjs.mp4.CaptionParser,this.g=[],this.f={}}function Ft(){}function Bt(e){return!e||1==e.length&&1e-6>e.end(0)-e.start(0)?null:e.length?e.end(e.length-1):null}function Vt(e,t,n){return n=void 0===n?0:n,!(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0)||t>e.end(e.length-1))&&t+n>=e.start(0)}function jt(e,t){if(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0))return 0;for(var n=0,r=e.length-1;0<=r&&e.end(r)>t;--r)n+=e.end(r)-Math.max(e.start(r),t);return n}function Ht(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}Ut.prototype.init=function(e){var t=muxjs.mp4.probe;e=new Uint8Array(e),this.g=t.videoTrackIds(e),this.f=t.timescale(e),this.a.init()},Ut.prototype.b=function(e,t){var n=new Uint8Array(e);(n=this.a.parse(n,this.g,this.f))&&n.captions&&t(n.captions),this.a.clearParsedCaptions()},Ut.prototype.c=function(){this.a.resetCaptionStream()},Ft.prototype.init=function(){},Ft.prototype.b=function(){},Ft.prototype.c=function(){};var Kt={ye:function(e,t){return e.reduce(function(e,t,n){return t.catch(e.bind(null,n))}.bind(null,t),Promise.reject())},yc:function(e,t){return e.concat(t)},ic:function(){},Ga:function(e){return null!=e}};function Gt(e,t){if(0==t.length)return e;var n=t.map(function(e){return new $(e)});return e.map(function(e){return new $(e)}).map(function(e){return n.map(e.resolve.bind(e))}).reduce(Kt.yc,[]).map(function(e){return e.toString()})}function qt(e,t){return{keySystem:e,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:t||[],keyIds:[]}}var Wt={Na:"video",Ab:"audio",qa:"text",kg:"application"},zt=1/15;function Yt(){this.a=new muxjs.mp4.Transmuxer({keepOriginalTimestamps:!0}),this.b=null,this.g=[],this.c=[],this.f=!1,this.a.on("data",this.i.bind(this)),this.a.on("done",this.h.bind(this))}function Xt(t,n){return!(!e.muxjs||"mp2t"!=t.toLowerCase().split(";")[0].split("/")[1])&&(n?MediaSource.isTypeSupported($t(n,t)):MediaSource.isTypeSupported($t("audio",t))||MediaSource.isTypeSupported($t("video",t)))}function $t(e,t){var n=t.replace(/mp2t/i,"mp4");"audio"==e&&(n=n.replace("video","audio"));var r=/avc1\.(66|77|100)\.(\d+)/.exec(n);if(r){var i="avc1.",a=r[1],s=Number(r[2]);i=("66"==a?i+"4200":"77"==a?i+"4d00":i+"6400")+(s>>4).toString(16),i+=(15&s).toString(16),n=n.replace(r[0],i)}return n}function Zt(e,t,n){this.startTime=e,this.direction=rn,this.endTime=t,this.payload=n,this.region=new hn,this.position=null,this.positionAlign=Qt,this.size=100,this.textAlign=Jt,this.writingMode=an,this.lineInterpretation=sn,this.line=null,this.lineHeight="",this.lineAlign=on,this.displayAlign=tn,this.fontSize=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=ln,this.fontStyle=cn,this.fontFamily="",this.textDecoration=[],this.wrapLine=!0,this.id=""}Yt.prototype.destroy=function(){return this.a.dispose(),this.a=null,Promise.resolve()},Yt.prototype.i=function(e){this.c=e.captions;var t=new Uint8Array(e.data.byteLength+e.initSegment.byteLength);t.set(e.initSegment,0),t.set(e.data,e.initSegment.byteLength),this.g.push(t)},Yt.prototype.h=function(){var e={data:vt.apply(null,this.g),captions:this.c};this.b.resolve(e),this.f=!1},V("shaka.text.Cue",Zt);var Qt="auto";Zt.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:Qt};var Jt="center",en={LEFT:"left",RIGHT:"right",CENTER:Jt,START:"start",END:"end"};Zt.textAlign=en;var tn="after",nn={BEFORE:"before",CENTER:"center",AFTER:tn};Zt.displayAlign=nn;var rn="ltr";Zt.direction={HORIZONTAL_LEFT_TO_RIGHT:rn,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var an="horizontal-tb";Zt.writingMode={HORIZONTAL_TOP_TO_BOTTOM:an,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var sn=0;Zt.lineInterpretation={LINE_NUMBER:sn,PERCENTAGE:1};var on="start",un={CENTER:"center",START:on,END:"end"};Zt.lineAlign=un;var ln=400;Zt.fontWeight={NORMAL:ln,BOLD:700};var cn="normal",dn={NORMAL:cn,ITALIC:"italic",OBLIQUE:"oblique"};function hn(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=fn,this.scroll=pn}Zt.fontStyle=dn,Zt.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"},V("shaka.text.CueRegion",hn);var fn=1;hn.units={PX:0,PERCENTAGE:fn,LINES:2};var pn="";function mn(e){this.g=null,this.c=e,this.f=this.m=0,this.h=1/0,this.b=this.a=null,this.l="",this.i=new Map}hn.scrollMode={NONE:pn,UP:"up"};var vn={};function yn(t){return!!(vn[t]||e.muxjs&&"application/cea-608"==t)}function gn(e,t){"application/cea-608"!=t&&(e.g=new vn[t])}function _n(e,t,n,r,i){for(var a=n+" "+r,s=new Map,o=(t=d(t)).next();!o.done;o=t.next()){var u=o.value;o=u.stream,s.has(o)||s.set(o,new Map),s.get(o).has(a)||s.get(o).set(a,[]),u.startTime+=i,u.endTime+=i,u.startTime>=e.f&&u.startTime<e.h&&(u=new Zt(u.startTime,u.endTime,u.text),s.get(o).get(a).push(u),o==e.l&&e.c.append([u]))}for(a=(i=d(s.keys())).next();!a.done;a=i.next())for(a=a.value,e.i.has(a)||e.i.set(a,new Map),o=(t=d(s.get(a).keys())).next();!o.done;o=t.next())o=o.value,u=s.get(a).get(o),e.i.get(a).set(o,u);e.a=null==e.a?Math.max(n,e.f):Math.min(e.a,Math.max(n,e.f)),e.b=Math.max(e.b,Math.min(r,e.h))}function bn(e,t,n){this.f=e,this.g=n,this.b={},this.a=null,this.c={},this.i=new He,this.v=!1,this.l={},this.m=t,e=this.s=new pe,t=new MediaSource,this.i.da(t,"sourceopen",e.resolve),this.f.src=wn(t),this.h=t}V("shaka.text.TextEngine.registerParser",function(e,t){vn[e]=t}),V("shaka.text.TextEngine.unregisterParser",function(e){delete vn[e]}),mn.prototype.destroy=function(){return this.c=this.g=null,this.i.clear(),Promise.resolve()},mn.prototype.Mc=function(e){try{return this.g.parseMedia(new Uint8Array(e),{periodStart:0,segmentStart:null,segmentEnd:0})[0].startTime}catch(e){throw new fe(2,2,2009,e)}},mn.prototype.remove=function(e,t){return Promise.resolve().then(function(){!this.c||!this.c.remove(e,t)||null==this.a||t<=this.a||e>=this.b||(e<=this.a&&t>=this.b?this.a=this.b=null:e<=this.a&&t<this.b?this.a=t:e>this.a&&t>=this.b&&(this.b=e))}.bind(this))},mn.prototype.qe=function(e){this.c.append(e)},mn.prototype.appendCues=mn.prototype.qe,mn.prototype.rc=function(e,t){this.l=e;var n=this.i.get(e);if(n)for(var r=d(n.keys()),i=r.next();!i.done;i=r.next())(i=n.get(i.value))&&(i=i.filter(function(e){return e.endTime<=t}),this.c.append(i))},mn.prototype.setSelectedClosedCaptionId=mn.prototype.rc;var wn=e.URL.createObjectURL;function En(e){var t=$e(e.mimeType,e.codecs),n=function(e){var t=[e.mimeType];return Qe.forEach(function(n,r){var i=e[r];i&&t.push(n+'="'+i+'"')}),t.join(";")}(e);return yn(t)||MediaSource.isTypeSupported(n)||Xt(t,e.type)}function Sn(e,t){e.a||(e.a=new mn(e.g)),gn(e.a,t)}function Tn(e){return!e.h||"ended"==e.h.readyState}function Cn(e,t){if("text"==t)var n=e.a.a;else n=!(n=In(e,t))||1==n.length&&1e-6>n.end(0)-n.start(0)?null:1==n.length&&0>n.start(0)?0:n.length?n.start(0):null;return n}function kn(e,t){return"text"==t?e.a.b:Bt(In(e,t))}function In(e,t){try{return e.b[t].buffered}catch(e){return null}}function An(t,n,r,i,a,s){return"text"==n?function(e,t,n,r){return Promise.resolve().then(function(){if(this.g&&this.c)if(null==n||null==r)this.g.parseInit(new Uint8Array(t));else{var e={periodStart:this.m,segmentStart:n,segmentEnd:r};e=this.g.parseMedia(new Uint8Array(t),e).filter(function(e){return e.startTime>=this.f&&e.startTime<this.h}.bind(this)),this.c.append(e),null==this.a&&(this.a=Math.max(n,this.f)),this.b=Math.min(r,this.h)}}.bind(e))}(t.a,r,i,a):t.l[n]?function(e,t){e.f=!0,e.b=new pe,e.g=[],e.c=[];var n=new Uint8Array(t);return e.a.push(n),e.a.flush(),e.f&&e.b.reject(new fe(2,3,3018)),e.b}(t.l[n],r).then(function(e){return this.a||Sn(this,"text/vtt"),e.captions&&_n(this.a,e.captions,i,a,this.b.video.timestampOffset),xn(this,n,this.ee.bind(this,n,e.data.buffer))}.bind(t)):(s&&e.muxjs&&(t.a||Sn(t,"text/vtt"),null==i&&null==a?t.m.init(r):t.m.b(r,function(e){e.length&&_n(t.a,e,i,a,t.b.video.timestampOffset)})),xn(t,n,t.ee.bind(t,n,r)))}function Ln(e,t){return"text"==t?e.a?(e.m.c(),e.a.remove(0,1/0)):Promise.resolve():xn(e,t,e.fe.bind(e,t,0,e.h.duration))}function xn(e,t,n){if(e.v)return Promise.reject();if(n={start:n,p:new pe},e.c[t].push(n),1==e.c[t].length)try{n.start()}catch(r){"QuotaExceededError"==r.name?n.p.reject(new fe(2,3,3017,t)):n.p.reject(new fe(2,3,3015,r)),Nn(e,t)}return n.p}function Rn(e,t){if(e.v)return Promise.reject();var n,r=[];for(n in e.b){var i=new pe,a={start:function(e){e.resolve()}.bind(null,i),p:i};e.c[n].push(a),r.push(i),1==e.c[n].length&&a.start()}return Promise.all(r).then(function(){try{t()}catch(t){var e=Promise.reject(new fe(2,3,3015,t))}for(var n in this.b)Nn(this,n);return e}.bind(e),function(e){throw e}.bind(e))}function Nn(e,t){e.c[t].shift();var n=e.c[t][0];if(n)try{n.start()}catch(r){n.p.reject(new fe(2,3,3015,r)),Nn(e,t)}}function Mn(e,t){return e=On(e),t=On(t),e.split("-")[0]==t.split("-")[0]}function Pn(e,t){e=On(e),t=On(t);var n=e.split("-"),r=t.split("-");return n[0]==r[0]&&1==n.length&&2==r.length}function On(e){var t=e.split("-");return e=t[0]||"",t=t[1]||"",e=e.toLowerCase(),e=Fn.get(e)||e,(t=t.toUpperCase())?e+"-"+t:e}function Dn(e){return e.language?On(e.language):e.audio&&e.audio.language?On(e.audio.language):e.video&&e.video.language?On(e.video.language):"und"}function Un(e,t){for(var n=On(e),r=new Set,i=d(t),a=i.next();!a.done;a=i.next())r.add(On(a.value));for(a=(i=d(r)).next();!a.done;a=i.next())if((a=a.value)==n)return a;for(a=(i=d(r)).next();!a.done;a=i.next())if(Pn(a=a.value,n))return a;for(a=(i=d(r)).next();!a.done;a=i.next()){var s=a=a.value,o=n;if(s=On(s),o=On(o),s=s.split("-"),o=o.split("-"),2==s.length&&2==o.length&&s[0]==o[0])return a}for(a=(r=d(r)).next();!a.done;a=r.next())if(Pn(n,i=a.value))return i;return null}(n=bn.prototype).destroy=function(){var e=this;this.v=!0;var t,n=[];for(t in this.c){var r=this.c[t],i=r[0];for(this.c[t]=r.slice(0,1),i&&n.push(i.p.catch(Kt.ic)),i=1;i<r.length;++i)r[i].p.reject()}for(var a in this.a&&n.push(this.a.destroy()),this.g&&n.push(this.g.destroy()),this.l)n.push(this.l[a].destroy());return Promise.all(n).then(function(){e.i&&(e.i.release(),e.i=null),e.f&&(e.f.removeAttribute("src"),e.f.load(),e.f=null),e.h=null,e.a=null,e.g=null,e.b={},e.l={},e.m=null,e.c={}})},n.init=function(e,t){var n=this;return f(function r(){var i;return P(r,function(r){switch(r.j){case 1:return i=Wt,E(r,n.s,2);case 2:e.forEach(function(e,r){var a=$e(e.mimeType,e.codecs);r==i.qa?Sn(n,a):(!t&&MediaSource.isTypeSupported(a)||!Xt(a,r)||(n.l[r]=new Yt,a=$t(r,a)),a=n.h.addSourceBuffer(a),n.i.w(a,"error",n.Tf.bind(n,r)),n.i.w(a,"updateend",n.ub.bind(n,r)),n.b[r]=a,n.c[r]=[])}),S(r)}})})},n.Jc=function(e){if(e.total=Ht(this.f.buffered),e.audio=Ht(In(this,"audio")),e.video=Ht(In(this,"video")),e.text=[],this.a){var t=this.a.a,n=this.a.b;null!=t&&null!=n&&e.text.push({start:t,end:n})}},n.rc=function(e){var t=kn(this,"video")||0;this.a.rc(e,t)},n.remove=function(e,t,n){return"text"==e?this.a.remove(t,n):xn(this,e,this.fe.bind(this,e,t,n))},n.flush=function(e){return"text"==e?Promise.resolve():xn(this,e,this.Ce.bind(this,e))},n.endOfStream=function(e){return Rn(this,function(){Tn(this)||(e?this.h.endOfStream(e):this.h.endOfStream())}.bind(this))},n.wa=function(e){return Rn(this,function(){this.h.duration=e}.bind(this))},n.Y=function(){return this.h.duration},n.ee=function(e,t){this.b[e].appendBuffer(t)},n.fe=function(e,t,n){n<=t?this.ub(e):this.b[e].remove(t,n)},n.oe=function(e){var t=this.b[e].appendWindowStart,n=this.b[e].appendWindowEnd;this.b[e].abort(),this.b[e].appendWindowStart=t,this.b[e].appendWindowEnd=n,this.ub(e)},n.Ce=function(e){this.f.currentTime-=.001,this.ub(e)},n.Sf=function(e,t){0>t&&(t+=.001),this.b[e].timestampOffset=t,this.ub(e)},n.Pf=function(e,t,n){this.b[e].appendWindowStart=0,this.b[e].appendWindowEnd=n,this.b[e].appendWindowStart=t,this.ub(e)},n.Tf=function(e){this.c[e][0].p.reject(new fe(2,3,3014,this.f.error?this.f.error.code:0))},n.ub=function(e){var t=this.c[e][0];t&&(t.p.resolve(),Nn(this,e))};var Fn=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function Bn(e,t,n){function r(e,t,n){return e>=t&&e<=n}var i=e.video;return!(i&&i.width&&i.height&&!(r(i.width,t.minWidth,Math.min(t.maxWidth,n.width))&&r(i.height,t.minHeight,Math.min(t.maxHeight,n.height))&&r(i.width*i.height,t.minPixels,t.maxPixels))||!r(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function Vn(e,t,n){var r=!1;return e.forEach(function(e){var i=e.allowedByApplication;e.allowedByApplication=Bn(e,t,n),i!=e.allowedByApplication&&(r=!0)}),r}function jn(e,t,n,r){r.variants=r.variants.filter(function(r){if(e&&e.P&&!xt(e,r))return!1;var i=r.audio;return r=r.video,!(i&&!En(i)||r&&!En(r)||i&&t&&!Hn(i,t)||r&&n&&!Hn(r,n))}),r.textStreams=r.textStreams.filter(function(e){return yn($e(e.mimeType,e.codecs))})}function Hn(e,t){return e.mimeType==t.mimeType&&e.codecs.split(".")[0]==t.codecs.split(".")[0]}function Kn(e){var t=e.audio,n=e.video,r=t?t.codecs:null,i=n?n.codecs:null,a=[];i&&a.push(i),r&&a.push(r);var s=[];n&&s.push(n.mimeType),t&&s.push(t.mimeType),s=s[0]||null;var o=[];t&&o.push(t.kind),n&&o.push(n.kind),o=o[0]||null;var u=new Set;return t&&t.roles.forEach(function(e){return u.add(e)}),n&&n.roles.forEach(function(e){return u.add(e)}),e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:o,width:null,height:null,frameRate:null,mimeType:s,codecs:a.join(", "),audioCodec:r,videoCodec:i,primary:e.primary,roles:Array.from(u),audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.videoBandwidth=n.bandwidth||null),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioBandwidth=t.bandwidth||null,e.label=t.label,e.audioRoles=t.roles),e}function Gn(e){return{id:e.id,active:!1,type:"text",bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,mimeType:e.mimeType,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId}}function qn(e){return e.__shaka_id||(e.__shaka_id=Wn++),e.__shaka_id}var Wn=0;function zn(e){return{id:qn(e),active:!1,type:"",bandwidth:0,language:On(e.language),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,mimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null}}function Yn(e){return e.allowedByApplication&&e.allowedByKeySystem}function Xn(e,t){for(var n=e.filter(function(e){return e.audio&&e.audio.channelsCount}),r=new Map,i=(n=d(n)).next();!i.done;i=n.next()){var a=(i=i.value).audio.channelsCount;r.has(a)||r.set(a,[]),r.get(a).push(i)}return 0==(n=Array.from(r.keys())).length?e:(i=n.filter(function(e){return e<=t})).length?r.get(Math.max.apply(null,i)):r.get(Math.min.apply(null,n))}function $n(e,t,n){var r=e,i=e.filter(function(e){return e.primary});i.length&&(r=i);var a=r.length?r[0].language:"";if(r=r.filter(function(e){return e.language==a}),t){var s=Un(On(t),e.map(function(e){return e.language}));s&&(r=e.filter(function(e){return On(e.language)==s}))}if(n){if((e=Zn(r,n)).length)return e}else if((e=r.filter(function(e){return 0==e.roles.length})).length)return e;return(e=r.map(function(e){return e.roles}).reduce(Kt.yc,[])).length?Zn(r,e[0]):r}function Zn(e,t){return e.filter(function(e){return e.roles.includes(t)})}function Qn(e,t,n){for(var r=0;r<n.length;r++)if(n[r].audio==e&&n[r].video==t)return n[r];return null}function Jn(){this.h=null,this.f=!1,this.b=new q,this.c=[],this.i=!1,this.a=this.g=null}function er(e,t){return e&&(t=t.filter(function(t){return Bn(t,e,{width:1/0,height:1/0})})),t.sort(function(e,t){return e.bandwidth-t.bandwidth})}function tr(e,t){this.a=e,this.b=t}function nr(e,t){var n=new tr(2,6),r=ar,i=r.a,a=n.b-i.b;(0<(n.a-i.a||a)?r.c:r.b)(r.a,n,e,t)}function rr(e,t,n,r){z([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",r].join(" "))}function ir(e,t,n,r){W([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",r].join(""))}V("shaka.abr.SimpleAbrManager",Jn),Jn.prototype.stop=function(){this.h=null,this.f=!1,this.c=[],this.g=null},Jn.prototype.stop=Jn.prototype.stop,Jn.prototype.init=function(e){this.h=e},Jn.prototype.init=Jn.prototype.init,Jn.prototype.chooseVariant=function(){var e=er(this.a.restrictions,this.c),t=this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate);this.c.length&&!e.length&&(e=[(e=er(null,this.c))[0]]);for(var n=e[0]||null,r=0;r<e.length;++r){var i=e[r],a=(e[r+1]||{bandwidth:1/0}).bandwidth/this.a.bandwidthUpgradeTarget;t>=i.bandwidth/this.a.bandwidthDowngradeTarget&&t<=a&&(n=i)}return this.g=Date.now(),n},Jn.prototype.chooseVariant=Jn.prototype.chooseVariant,Jn.prototype.enable=function(){this.f=!0},Jn.prototype.enable=Jn.prototype.enable,Jn.prototype.disable=function(){this.f=!1},Jn.prototype.disable=Jn.prototype.disable,Jn.prototype.segmentDownloaded=function(e,t){var n=this.b;if(!(16e3>t)){var r=8e3*t/e,i=e/1e3;n.a+=t,K(n.b,i,r),K(n.c,i,r)}if(null!=this.g&&this.f)e:{if(this.i){if(Date.now()-this.g<1e3*this.a.switchInterval)break e}else{if(!(128e3<=this.b.a))break e;this.i=!0}n=this.chooseVariant(),this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate),this.h(n)}},Jn.prototype.segmentDownloaded=Jn.prototype.segmentDownloaded,Jn.prototype.getBandwidthEstimate=function(){return this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate)},Jn.prototype.getBandwidthEstimate=Jn.prototype.getBandwidthEstimate,Jn.prototype.setVariants=function(e){this.c=e},Jn.prototype.setVariants=Jn.prototype.setVariants,Jn.prototype.configure=function(e){this.a=e},Jn.prototype.configure=Jn.prototype.configure,tr.prototype.toString=function(){return"v"+this.a+"."+this.b};var ar=null,sr="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),or="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),ur=["loop","playbackRate"],lr=["pause","play"],cr="abrstatuschanged adaptation buffering emsg error loading streaming texttrackvisibility timelineregionadded timelineregionenter timelineregionexit trackschanged unloading variantchanged textchanged".split(" "),dr={getAssetUri:2,getAudioLanguages:2,getAudioLanguagesAndRoles:2,getBufferedInfo:2,getConfiguration:2,getExpiration:2,getPlaybackRate:2,getTextLanguages:2,getTextLanguagesAndRoles:2,getTextTracks:2,getStats:5,getVariantTracks:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,usingEmbeddedTextTrack:2,getLoadMode:10},hr={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},fr=[["getConfiguration","configure"]],pr=[["isTextTrackVisible","setTextTrackVisibility"]],mr="addTextTrack cancelTrickPlay configure resetConfiguration retryStreaming selectAudioLanguage selectEmbeddedTextTrack selectTextLanguage selectTextTrack selectVariantTrack setTextTrackVisibility trickPlay".split(" "),vr=["attach","detach","load","unload"];function yr(e){return JSON.stringify(e,function(e,t){if("function"!=typeof t){if(t instanceof Event||t instanceof Ee){var n,r={};for(n in t){var i=t[n];i&&"object"==typeof i?"detail"==n&&(r[n]=i):n in Event||(r[n]=i)}return r}if(t instanceof TimeRanges)for(r={__type__:"TimeRanges",length:t.length,start:[],end:[]},n=0;n<t.length;++n)r.start.push(t.start(n)),r.end.push(t.end(n));else r=t instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(t)}:"number"==typeof t?isNaN(t)?"NaN":isFinite(t)?t:0>t?"-Infinity":"Infinity":t;return r}})}function gr(e){return JSON.parse(e,function(e,t){return"NaN"==t?NaN:"-Infinity"==t?-1/0:"Infinity"==t?1/0:t&&"object"==typeof t&&"TimeRanges"==t.__type__?function(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}(t):t&&"object"==typeof t&&"Uint8Array"==t.__type__?new Uint8Array(t.entries):t})}function _r(e,t,n,r,i,a){this.T=e,this.f=new ce(t),this.P=n,this.l=!1,this.G=r,this.M=i,this.C=a,this.b=this.h=!1,this.D="",this.i=null,this.m=this.Nd.bind(this),this.s=this.kf.bind(this),this.a={video:{},player:{}},this.v=0,this.c={},this.g=null}var br=!1,wr=null;function Er(e){var t=wr;t.removeUpdateListener(e.m),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.s)}function Sr(e){for(var t in e.c){var n=e.c[t];delete e.c[t],n.reject(new fe(1,7,7e3))}}function Tr(e){e=yr(e),wr.sendMessage("urn:x-cast:com.google.shaka.v2",e,function(){},Y)}function Cr(e,t,n){var r=this;Te.call(this),this.c=e,this.b=t,this.i=this.g=this.f=this.l=this.h=null,(this.m=n)&&(this.a=new _r(n,function(){return Ir(r)},function(){return Ar(r)},function(e,t){return xr(r,e,t)},function(){return Lr(r)},function(){return kr(r)})),function(e){for(var t in e.a&&e.a.init(),e.i=new He,sr.forEach(function(e){this.i.w(this.c,e,this.ig.bind(this))}.bind(e)),cr.forEach(function(e){this.i.w(this.b,e,this.yf.bind(this))}.bind(e)),e.h={},e.c)Object.defineProperty(e.h,t,{configurable:!1,enumerable:!0,get:e.hg.bind(e,t),set:e.jg.bind(e,t)});for(var n in e.l={},e.b)Object.defineProperty(e.l,n,{configurable:!1,enumerable:!0,get:e.Ud.bind(e,n)});e.f=new Te,e.f.Vb=e.h,e.g=new Te,e.g.Vb=e.l}(this)}function kr(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.b.bc(),startTime:null};return e.c.pause(),ur.forEach(function(e){t.video[e]=this.c[e]}.bind(e)),e.c.ended||(t.startTime=e.c.currentTime),fr.forEach(function(e){var n=e[1];e=this.b[e[0]](),t.player[n]=e}.bind(e)),pr.forEach(function(e){var n=e[1];e=this.b[e[0]](),t.playerAfterLoad[n]=e}.bind(e)),t}function Ir(e){e.dispatchEvent(new Ee("caststatuschanged"))}function Ar(e){e.f.dispatchEvent(new Ee(e.h.paused?"pause":"play"))}function Lr(e){fr.forEach(function(e){var t=e[1];e=this.a.get("player",e[0])(),this.b[t](e)}.bind(e));var t=e.a.get("player","getAssetUri")(),n=e.a.get("video","ended"),r=Promise.resolve(),i=e.c.autoplay,a=null;n||(a=e.a.get("video","currentTime")),t&&(e.c.autoplay=!1,r=e.b.load(t,a));var s={};ur.forEach(function(e){s[e]=this.a.get("video",e)}.bind(e)),r.then(function(){e.c&&(ur.forEach(function(e){this.c[e]=s[e]}.bind(e)),pr.forEach(function(e){var t=e[1];e=this.a.get("player",e[0])(),this.b[t](e)}.bind(e)),e.c.autoplay=i,t&&e.c.play())},function(t){e.b.dispatchEvent(new Ee("error",{detail:t}))})}function xr(e,t,n){e.a.ga()&&("video"==t?e.f.dispatchEvent(n):"player"==t&&e.g.dispatchEvent(n))}function Rr(e,t,n,r){var i=this;Te.call(this),this.a=e,this.b=t,this.c=new He,this.D={video:e,player:t},this.s=n||function(){},this.G=r||function(e){return e},this.v=!1,this.h=!0,this.g=0,this.m=!1,this.l=!0,this.i=this.f=null,this.C=new ce(function(){Mr(i)}),function(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=e.Qd.bind(e),t.onSenderDisconnected=e.Qd.bind(e),t.onSystemVolumeChanged=e.Be.bind(e),e.i=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.i.onMessage=e.ef.bind(e),e.f=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.f.onMessage=e.rf.bind(e),t.start(),sr.forEach(function(e){this.c.w(this.a,e,this.Wd.bind(this,"video"))}.bind(e)),cr.forEach(function(e){this.c.w(this.b,e,this.Wd.bind(this,"player"))}.bind(e)),cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?e.b.kd(3840,2160):e.b.kd(1920,1080),e.c.w(e.a,"loadeddata",function(){this.m=!0}.bind(e)),e.c.w(e.b,"loading",function(){this.h=!1,Nr(this)}.bind(e)),e.c.w(e.a,"playing",function(){this.h=!1,Nr(this)}.bind(e)),e.c.w(e.a,"pause",function(){Nr(this)}.bind(e)),e.c.w(e.b,"unloading",function(){this.h=!0,Nr(this)}.bind(e)),e.c.w(e.a,"ended",function(){var e=this;new ce(function(){e.a&&e.a.ended&&(e.h=!0,Nr(e))}).O(5)}.bind(e))}(this)}function Nr(e){Promise.resolve().then(function(){this.b&&(this.dispatchEvent(new Ee("caststatuschanged")),Pr(this)||Ur(this,0))}.bind(e))}function Mr(e){e.C.O(.5);var t={video:{},player:{}};if(or.forEach(function(e){t.video[e]=this.a[e]}.bind(e)),e.b.V())for(var n in hr)0==e.g%hr[n]&&(t.player[n]=e.b[n]());for(var r in dr)0==e.g%dr[r]&&(t.player[r]=e.b[r]());(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),e.m&&(e.g+=1),Dr(e,{type:"update",update:t},e.f),Pr(e)}function Pr(e){return!(!e.l||!e.a.duration&&!e.b.V())&&(Or(e),e.l=!1,!0)}function Or(e){var t={contentId:e.b.bc(),streamType:e.b.V()?"LIVE":"BUFFERED",duration:e.a.duration,contentType:""};Ur(e,0,t)}function Dr(e,t,n,r){e.v&&(e=yr(t),r?n.getCastChannel(r).send(e):n.broadcast(e))}function Ur(e,t,n){var r=e.a.playbackRate,i=Fr;r={mediaSessionId:0,playbackRate:r,playerState:i=e.h?i.IDLE:e.b.Oc()?i.je:e.a.paused?i.le:i.me,currentTime:e.a.currentTime,supportedMediaCommands:15,volume:{level:e.a.volume,muted:e.a.muted}},n&&(r.media=n),Dr(e,{requestId:t,type:"MEDIA_STATUS",status:[r]},e.i)}(n=_r.prototype).destroy=function(){return Sr(this),wr&&Er(this),this.f&&(this.f.stop(),this.f=null),this.M=this.G=null,this.b=this.h=!1,this.s=this.m=this.g=this.c=this.a=this.i=null,Promise.resolve()},n.ga=function(){return this.b},n.cd=function(){return this.D},n.init=function(){if(e.chrome&&chrome.cast&&chrome.cast.isAvailable){delete e.__onGCastApiAvailable,this.h=!0,this.f.sc();var t=new chrome.cast.SessionRequest(this.T);t=new chrome.cast.ApiConfig(t,this.Od.bind(this),this.pf.bind(this),"origin_scoped"),chrome.cast.initialize(t,function(){},function(){}),br&&this.f.O(.02),(t=wr)&&t.status!=chrome.cast.SessionStatus.STOPPED?this.Od(t):wr=null}else e.__onGCastApiAvailable=function(e){e&&this.init()}.bind(this)},n.jd=function(e){this.i=e,this.b&&Tr({type:"appData",appData:this.i})},n.cast=function(e){return this.h?br?this.b?Promise.reject(new fe(1,8,8002)):(this.g=new pe,chrome.cast.requestSession(this.$c.bind(this,e),this.Md.bind(this)),this.g):Promise.reject(new fe(1,8,8001)):Promise.reject(new fe(1,8,8e3))},n.Eb=function(){this.b&&(Sr(this),wr&&(Er(this),wr.stop(function(){},function(){}),wr=null))},n.get=function(e,t){if("video"==e){if(lr.includes(t))return this.Yd.bind(this,e,t)}else if("player"==e){if(hr[t]&&!this.get("player","isLive")())return function(){};if(mr.includes(t))return this.Yd.bind(this,e,t);if(vr.includes(t))return this.Ef.bind(this,e,t);if(dr[t])return this.Vd.bind(this,e,t)}return this.Vd(e,t)},n.set=function(e,t,n){this.a[e][t]=n,Tr({type:"set",targetName:e,property:t,value:n})},n.$c=function(e,t){wr=t,t.addUpdateListener(this.m),t.addMessageListener("urn:x-cast:com.google.shaka.v2",this.s),this.Nd(),Tr({type:"init",initState:e,appData:this.i}),this.g.resolve()},n.Md=function(e){var t=8003;switch(e.code){case"cancel":t=8004;break;case"timeout":t=8005;break;case"receiver_unavailable":t=8006}this.g.reject(new fe(2,8,t,e))},n.Vd=function(e,t){return this.a[e][t]},n.Yd=function(e,t,n){for(var r=[],i=2;i<arguments.length;++i)r[i-2]=arguments[i];Tr({type:"call",targetName:e,methodName:t,args:r})},n.Ef=function(e,t,n){for(var r=[],i=2;i<arguments.length;++i)r[i-2]=arguments[i];i=new pe;var a=this.v.toString();return this.v++,this.c[a]=i,Tr({type:"asyncCall",targetName:e,methodName:t,args:r,id:a}),i},n.Od=function(e){var t=this.C();this.g=new pe,this.l=!0,this.$c(t,e)},n.pf=function(e){br="available"==e,this.f.sc()},n.Nd=function(){var e=!!wr&&"connected"==wr.status;if(this.b&&!e){for(var t in this.M(),this.a)this.a[t]={};Sr(this)}this.D=(this.b=e)?wr.receiver.friendlyName:"",this.f.sc()},n.kf=function(e,t){var n=gr(t);switch(n.type){case"event":var r=n.event;this.G(n.targetName,new Ee(r.type,r));break;case"update":for(var i in r=n.update)for(var a in n=this.a[i]||{},r[i])n[a]=r[i][a];this.l&&(this.P(),this.l=!1);break;case"asyncComplete":if(i=n.id,n=n.error,a=this.c[i],delete this.c[i],a)if(n){for(r in i=new fe(n.severity,n.category,n.code),n)i[r]=n[r];a.reject(i)}else a.resolve()}},j(Cr,Te),V("shaka.cast.CastProxy",Cr),Cr.prototype.destroy=function(e){return e&&this.a&&this.a.Eb(),this.i&&(this.i.release(),this.i=null),e=[],this.b&&(e.push(this.b.destroy()),this.b=null),this.a&&(e.push(this.a.destroy()),this.a=null),this.l=this.h=this.c=null,Promise.all(e)},Cr.prototype.destroy=Cr.prototype.destroy,Cr.prototype.Ye=function(){return this.h},Cr.prototype.getVideo=Cr.prototype.Ye,Cr.prototype.Re=function(){return this.l},Cr.prototype.getPlayer=Cr.prototype.Re,Cr.prototype.se=function(){return!!this.a&&(this.a.h&&br)},Cr.prototype.canCast=Cr.prototype.se,Cr.prototype.ga=function(){return!!this.a&&this.a.ga()},Cr.prototype.isCasting=Cr.prototype.ga,Cr.prototype.cd=function(){return this.a?this.a.cd():""},Cr.prototype.receiverName=Cr.prototype.cd,Cr.prototype.cast=function(){if(!this.a)throw new fe(1,8,8007);var e=kr(this);return this.a.cast(e).then(function(){if(this.b)return this.b.rd()}.bind(this))},Cr.prototype.cast=Cr.prototype.cast,Cr.prototype.jd=function(e){this.a&&this.a.jd(e)},Cr.prototype.setAppData=Cr.prototype.jd,Cr.prototype.$f=function(){if(this.a){var e=this.a;if(e.b){var t=e.C();chrome.cast.requestSession(e.$c.bind(e,t),e.Md.bind(e))}}},Cr.prototype.suggestDisconnect=Cr.prototype.$f,Cr.prototype.ve=function(e){var t=this;return f(function n(){return P(n,function(n){switch(n.j){case 1:if(e==t.m)return n.return();if(t.m=e,!t.a){n.A(2);break}return t.a.Eb(),E(n,t.a.destroy(),3);case 3:t.a=null;case 2:t.a=new _r(e,function(){return Ir(t)},function(){return Ar(t)},function(e,n){return xr(t,e,n)},function(){return Lr(t)},function(){return kr(t)}),t.a.init(),S(n)}})})},Cr.prototype.changeReceiverId=Cr.prototype.ve,Cr.prototype.Eb=function(){this.a&&this.a.Eb()},Cr.prototype.forceDisconnect=Cr.prototype.Eb,(n=Cr.prototype).hg=function(e){if("addEventListener"==e)return this.f.addEventListener.bind(this.f);if("removeEventListener"==e)return this.f.removeEventListener.bind(this.f);if(this.a&&this.a.ga()&&0==Object.keys(this.a.a.video).length){var t=this.c[e];if("function"!=typeof t)return t}return this.a&&this.a.ga()?this.a.get("video",e):("function"==typeof(e=this.c[e])&&(e=e.bind(this.c)),e)},n.jg=function(e,t){this.a&&this.a.ga()?this.a.set("video",e,t):this.c[e]=t},n.ig=function(e){this.a&&this.a.ga()||this.f.dispatchEvent(new Ee(e.type,e))},n.Ud=function(e){if("addEventListener"==e)return this.g.addEventListener.bind(this.g);if("removeEventListener"==e)return this.g.removeEventListener.bind(this.g);if("getMediaElement"==e)return function(){return this.h}.bind(this);if("getSharedConfiguration"==e)return this.a?this.a.get("player","getConfiguration"):this.b.getConfiguration();if("getNetworkingEngine"==e)return this.b.Fb.bind(this.b);if(this.a&&this.a.ga()){if("getManifest"==e||"drmInfo"==e)return function(){return z(e+"() does not work while casting!"),null};if("getManifestUri"==e)return nr("getManifestUri",'Please use "getAssetUri" instead.'),this.Ud("getAssetUri");if("attach"==e||"detach"==e)return function(){return z(e+"() does not work while casting!"),Promise.resolve()}}return this.a&&this.a.ga()&&0==Object.keys(this.a.a.video).length&&dr[e]||!this.a||!this.a.ga()?this.b[e].bind(this.b):this.a.get("player",e)},n.yf=function(e){this.a&&this.a.ga()||this.g.dispatchEvent(e)},j(Rr,Te),V("shaka.cast.CastReceiver",Rr),Rr.prototype.isConnected=function(){return this.v},Rr.prototype.isConnected=Rr.prototype.isConnected,Rr.prototype.bf=function(){return this.h},Rr.prototype.isIdle=Rr.prototype.bf,Rr.prototype.destroy=function(){var e=this;return f(function t(){var n;return P(t,function(t){switch(t.j){case 1:return e.c&&(e.c.release(),e.c=null),n=[],e.b&&(n.push(e.b.destroy()),e.b=null),e.C&&(e.C.stop(),e.C=null),e.a=null,e.D=null,e.s=null,e.v=!1,e.h=!0,e.f=null,e.i=null,E(t,Promise.all(n),2);case 2:cast.receiver.CastReceiverManager.getInstance().stop(),S(t)}})})},Rr.prototype.destroy=Rr.prototype.destroy,(n=Rr.prototype).Qd=function(){this.g=0,this.l=!0,this.v=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length,Nr(this)},n.Wd=function(e,t){this.b&&(Mr(this),Dr(this,{type:"event",targetName:e,event:t},this.f))},n.Be=function(){var e=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();e&&Dr(this,{type:"update",update:{video:{volume:e.level,muted:e.muted}}},this.f),Dr(this,{type:"event",targetName:"video",event:{type:"volumechange"}},this.f)},n.rf=function(e){var t=gr(e.data);switch(t.type){case"init":this.g=0,this.m=!1,this.l=!0,function(e,t,n){for(var r in t.player)e.b[r](t.player[r]);e.s(n),n=Promise.resolve();var i=e.a.autoplay;t.manifest&&(e.a.autoplay=!1,n=e.b.load(t.manifest,t.startTime)),n.then(function(){if(e.b){for(var n in t.video)e.a[n]=t.video[n];for(var r in t.playerAfterLoad)e.b[r](t.playerAfterLoad[r]);e.a.autoplay=i,t.manifest&&(e.a.play(),Ur(e,0))}},function(t){e.b.dispatchEvent(new Ee("error",{detail:t}))})}(this,t.initState,t.appData),Mr(this);break;case"appData":this.s(t.appData);break;case"set":var n=t.targetName,r=t.property;if(t=t.value,"video"==n){var i=cast.receiver.CastReceiverManager.getInstance();if("volume"==r){i.setSystemVolumeLevel(t);break}if("muted"==r){i.setSystemVolumeMuted(t);break}}this.D[n][r]=t;break;case"call":(n=this.D[t.targetName])[t.methodName].apply(n,t.args);break;case"asyncCall":n=t.targetName,r=t.methodName,"player"==n&&"load"==r&&(this.g=0,this.m=!1),i=t.id,e=e.senderId;var a=this.D[n];t=a[r].apply(a,t.args),"player"==n&&"load"==r&&(t=t.then(function(){this.l=!0}.bind(this))),t.then(this.be.bind(this,e,i,null),this.be.bind(this,e,i))}},n.ef=function(e){var t=gr(e.data);switch(t.type){case"PLAY":this.a.play(),Ur(this,0);break;case"PAUSE":this.a.pause(),Ur(this,0);break;case"SEEK":e=t.currentTime;var n=t.resumeState;null!=e&&(this.a.currentTime=Number(e)),n&&"PLAYBACK_START"==n?(this.a.play(),Ur(this,0)):n&&"PLAYBACK_PAUSE"==n&&(this.a.pause(),Ur(this,0));break;case"STOP":this.b.rd().then(function(){this.b&&Ur(this,0)}.bind(this));break;case"GET_STATUS":Ur(this,Number(t.requestId));break;case"VOLUME":e=(n=t.volume).level,n=n.muted;var r=this.a.volume,i=this.a.muted;null!=e&&(this.a.volume=Number(e)),null!=n&&(this.a.muted=n),r==this.a.volume&&i==this.a.muted||Ur(this,0);break;case"LOAD":this.g=0,this.l=this.m=!1,e=t.media,n=t.currentTime,r=this.G(e.contentId),i=t.autoplay||!0,this.s(e.customData),i&&(this.a.autoplay=!0),this.b.load(r,n).then(function(){this.b&&Or(this)}.bind(this)).catch(function(e){var n="LOAD_FAILED";7==e.category&&7e3==e.code&&(n="LOAD_CANCELLED"),Dr(this,{requestId:Number(t.requestId),type:n},this.i)}.bind(this));break;default:Dr(this,{requestId:Number(t.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},this.i)}},n.be=function(e,t,n){this.b&&Dr(this,{type:"asyncComplete",id:t,error:n},this.f,e)};var Fr={IDLE:"IDLE",me:"PLAYING",je:"BUFFERING",le:"PAUSED"};function Br(e,t){this.K=e,this.b=t==Vr,this.a=0}V("shaka.util.DataViewReader",Br);var Vr=1;function jr(){throw new fe(2,3,3e3)}function Hr(){this.c=[],this.b=[],this.a=!1}function Kr(e){for(;e.reader.sa()&&!e.parser.a;)e.parser.mc(e.start,e.reader,e.partialOkay)}function Gr(e){for(var t=e.reader.F();0<t&&!e.parser.a;--t)e.parser.mc(e.start,e.reader,e.partialOkay)}function qr(e){return function(t){e(t.reader.Xa(t.reader.K.byteLength-t.reader.ba()))}}function Wr(e){for(var t=0,n=0;n<e.length;n++)t=t<<8|e.charCodeAt(n);return t}function zr(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}function Yr(e){this.f=[],this.b=[],this.a=[],(new Hr).fa("pssh",this.c.bind(this)).parse(e.buffer)}Br.Endianness={lg:0,mg:Vr},Br.prototype.sa=function(){return this.a<this.K.byteLength},Br.prototype.hasMoreData=Br.prototype.sa,Br.prototype.ba=function(){return this.a},Br.prototype.getPosition=Br.prototype.ba,Br.prototype.Ie=function(){return this.K.byteLength},Br.prototype.getLength=Br.prototype.Ie,Br.prototype.ka=function(){try{var e=this.K.getUint8(this.a);return this.a+=1,e}catch(e){jr()}},Br.prototype.readUint8=Br.prototype.ka,Br.prototype.Mb=function(){try{var e=this.K.getUint16(this.a,this.b);return this.a+=2,e}catch(e){jr()}},Br.prototype.readUint16=Br.prototype.Mb,Br.prototype.F=function(){try{var e=this.K.getUint32(this.a,this.b);return this.a+=4,e}catch(e){jr()}},Br.prototype.readUint32=Br.prototype.F,Br.prototype.Xd=function(){try{var e=this.K.getInt32(this.a,this.b);return this.a+=4,e}catch(e){jr()}},Br.prototype.readInt32=Br.prototype.Xd,Br.prototype.yb=function(){try{if(this.b)var e=this.K.getUint32(this.a,!0),t=this.K.getUint32(this.a+4,!0);else t=this.K.getUint32(this.a,!1),e=this.K.getUint32(this.a+4,!1)}catch(e){jr()}if(2097151<t)throw new fe(2,3,3001);return this.a+=8,t*Math.pow(2,32)+e},Br.prototype.readUint64=Br.prototype.yb,Br.prototype.Xa=function(e){this.a+e>this.K.byteLength&&jr();var t=new Uint8Array(this.K.buffer,this.K.byteOffset+this.a,e);return this.a+=e,new Uint8Array(t)},Br.prototype.readBytes=Br.prototype.Xa,Br.prototype.L=function(e){this.a+e>this.K.byteLength&&jr(),this.a+=e},Br.prototype.skip=Br.prototype.L,Br.prototype.$d=function(e){this.a<e&&jr(),this.a-=e},Br.prototype.rewind=Br.prototype.$d,Br.prototype.seek=function(e){(0>e||e>this.K.byteLength)&&jr(),this.a=e},Br.prototype.seek=Br.prototype.seek,Br.prototype.bd=function(){for(var e=this.a;this.sa()&&0!=this.K.getUint8(this.a);)this.a+=1;return e=new Uint8Array(this.K.buffer,this.K.byteOffset+e,this.a-e),this.a+=1,it(e)},Br.prototype.readTerminatedString=Br.prototype.bd,V("shaka.util.Mp4Parser",Hr),Hr.prototype.H=function(e,t){var n=Wr(e);return this.c[n]=0,this.b[n]=t,this},Hr.prototype.box=Hr.prototype.H,Hr.prototype.fa=function(e,t){var n=Wr(e);return this.c[n]=1,this.b[n]=t,this},Hr.prototype.fullBox=Hr.prototype.fa,Hr.prototype.stop=function(){this.a=!0},Hr.prototype.stop=Hr.prototype.stop,Hr.prototype.parse=function(e,t){var n=new Uint8Array(e);for(n=new Br(new DataView(n.buffer,n.byteOffset,n.byteLength),0),this.a=!1;n.sa()&&!this.a;)this.mc(0,n,t)},Hr.prototype.parse=Hr.prototype.parse,Hr.prototype.mc=function(e,t,n){var r=t.ba(),i=t.F(),a=t.F();switch(i){case 0:i=t.K.byteLength-r;break;case 1:i=t.yb()}var s=this.b[a];if(s){var o=null,u=null;1==this.c[a]&&(o=(u=t.F())>>>24,u&=16777215),a=r+i,n&&a>t.K.byteLength&&(a=t.K.byteLength),a-=t.ba(),t=0<a?t.Xa(a):new Uint8Array(0),s({parser:this,partialOkay:n||!1,version:o,flags:u,reader:t=new Br(new DataView(t.buffer,t.byteOffset,t.byteLength),0),size:i,start:r+e})}else t.L(Math.min(r+i-t.ba(),t.K.byteLength-t.ba()))},Hr.prototype.parseNext=Hr.prototype.mc,Hr.children=Kr,Hr.sampleDescription=Gr,Hr.allData=qr,Hr.typeToString=zr,Yr.prototype.c=function(e){if(!(1<e.version)){var t=pt(e.reader.Xa(16)),n=[];if(0<e.version)for(var r=e.reader.F(),i=0;i<r;++i){var a=pt(e.reader.Xa(16));n.push(a)}r=e.reader.F(),e.reader.L(r),this.b.push.apply(this.b,n),this.f.push(t),this.a.push({start:e.start,end:e.start+e.size-1})}};var Xr={ac:function(e,t){var n=Xr.R(e,t);return 1!=n.length?null:n[0]},Gc:function(e,t,n){return 1!=(e=Xr.zd(e,t,n)).length?null:e[0]},R:function(e,t){return Array.prototype.filter.call(e.childNodes,function(e){return e instanceof Element&&e.tagName==t})},zd:function(e,t,n){return Array.prototype.filter.call(e.childNodes,function(e){return e instanceof Element&&e.localName==n&&e.namespaceURI==t})},getAttributeNS:function(e,t,n){return e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null},cc:function(e){return Array.prototype.every.call(e.childNodes,function(e){return e.nodeType==Node.TEXT_NODE||e.nodeType==Node.CDATA_SECTION_NODE})?e.textContent.trim():null},J:function(e,t,n,r){r=void 0===r?null:r;var i=null;return null!=(e=e.getAttribute(t))&&(i=n(e)),null==i?r:i},vf:function(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:Math.floor(e/1e3)):null},Ba:function(e){return e&&(e=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(e))?(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null):null},oc:function(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return t?(e=Number(t[1]),isFinite(e)?(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null):null):null},parseInt:function(e){return 0==(e=Number(e))%1?e:null},nc:function(e){return 0==(e=Number(e))%1&&0<e?e:null},vb:function(e){return 0==(e=Number(e))%1&&0<=e?e:null},parseFloat:function(e){return e=Number(e),isNaN(e)?null:e},Ae:function(e){var t;return e=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e),isNaN(e)?null:e},Td:function(e,t){var n=new DOMParser;try{var r=n.parseFromString(e,"text/xml")}catch(e){}if(r&&r.documentElement.tagName==t)var i=r.documentElement;return i&&0<i.getElementsByTagName("parsererror").length?null:i},Sd:function(e,t){try{var n=it(e);return Xr.Td(n,t)}catch(e){}}},$r=(new Map).set("urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b","org.w3.clearkey").set("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine.alpha").set("urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95","com.microsoft.playready").set("urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb","com.adobe.primetime");function Zr(e,t,n){var r=function(e){for(var t=[],n=(e=d(e)).next();!n.done;n=e.next())(n=ei(n.value))&&t.push(n);return t}(e),i=null;e=[];var a=[],s=new Set(r.map(function(e){return e.keyId}));if(s.delete(null),1<s.size)throw new fe(2,4,4010);if(n||(a=r.filter(function(e){return"urn:mpeg:dash:mp4protection:2011"!=e.ae||(i=e.init||i,!1)})).length&&(0==(e=function(e,t,n){for(var r=[],i=(n=d(n)).next();!i.done;i=n.next()){i=i.value;var a=$r.get(i.ae);if(a){var s;if(s=Xr.Gc(i.node,"urn:microsoft:playready","pro")){s=ht(s.textContent);var o=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),u=s.length,l=o.length+16+u,c=new ArrayBuffer(l),h=new Uint8Array(c);c=new DataView(c);var f=0;c.setUint32(f,l),f+=4,c.setUint32(f,1886614376),f+=4,c.setUint32(f,0),f+=4,h.set(o,f),f+=o.length,c.setUint32(f,u),f+=4,h.set(s,f),s=[{initData:h,initDataType:"cenc",keyId:i.keyId}]}else s=null;s=qt(a,i.init||e||s),(a=Jr.get(a))&&(s.licenseServerUri=a(i)),r.push(s)}else for(i=d(i=t(i.node)||[]),a=i.next();!a.done;a=i.next())r.push(a.value)}return r}(i,t,a)).length&&(e=[qt("",i)])),r.length&&(n||!a.length))for(e=[],n=(t=d($r.values())).next();!n.done;n=t.next())"org.w3.clearkey"!=(n=n.value)&&e.push(qt(n,i));if(s=Array.from(s)[0]||null)for(n=(t=d(e)).next();!n.done;n=t.next())for(r=(n=d(n.value.initData)).next();!r.done;r=n.next())r.value.keyId=s;return{wd:s,pg:i,drmInfos:e,Ad:!0}}var Qr,Jr=(new Map).set("com.widevine.alpha",function(e){return(e=Xr.Gc(e.node,"urn:microsoft","laurl"))&&e.getAttribute("licenseUrl")||""}).set("com.microsoft.playready",function(e){return(e=Xr.Gc(e.node,"urn:microsoft:playready","pro"))&&(e=function(e){var t=0,n=new DataView(e).getUint32(t,!0);if(n!==e.byteLength)return[];t+=6,n=[];for(var r=new DataView(e);t<e.byteLength-1;){var i=r.getUint16(t,!0);t+=2;var a=r.getUint16(t,!0);t+=2;var s=new Uint8Array(e,t,a);n.push({type:i,value:s}),t+=a}return n}((e=ht(e.textContent)).buffer).filter(function(e){return 1===e.type})[0])?(e=at(e.value,!0),(e=Xr.Td(e,"WRMHEADER"))?function(e){return(e=e.querySelector("DATA > LA_URL"))?e.textContent:""}(e):""):""});function ei(e){var t=e.getAttribute("schemeIdUri"),n=Xr.getAttributeNS(e,"urn:mpeg:cenc:2013","default_KID"),r=Xr.zd(e,"urn:mpeg:cenc:2013","pssh").map(Xr.cc);if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase()).includes(" "))throw new fe(2,4,4009);var i=[];try{i=r.map(function(e){return{initDataType:"cenc",initData:ht(e),keyId:null}})}catch(e){throw new fe(2,4,4007)}return{node:e,ae:t,keyId:n,init:0<i.length?i:null}}function ti(t,n,r,i,a){var s={RepresentationID:n,Number:r,Bandwidth:i,Time:a};return t.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(t,n,r,i){if("$$"==t)return"$";var a=s[n];if(null==a)return t;switch("RepresentationID"==n&&r&&(r=void 0),"Time"==n&&(a=Math.round(a)),i){case void 0:case"d":case"i":case"u":t=a.toString();break;case"o":t=a.toString(8);break;case"x":t=a.toString(16);break;case"X":t=a.toString(16).toUpperCase();break;default:t=a.toString()}return r=e.parseInt(r,10)||1,Array(Math.max(0,r-t.length)+1).join("0")+t})}function ni(e,t){var n=ri(e,t,"timescale"),r=1;n&&(r=Xr.nc(n)||1),n=ri(e,t,"duration"),(n=Xr.nc(n||""))&&(n/=r);var i=ri(e,t,"startNumber"),a=Number(ri(e,t,"presentationTimeOffset"))||0,s=Xr.vb(i||"");null!=i&&null!=s||(s=1);var o=ii(e,t,"SegmentTimeline");if(i=null,o){i=r;var u=e.S.duration||1/0;o=Xr.R(o,"S");for(var l=[],c=0,d=0;d<o.length;++d){var h=o[d],f=Xr.J(h,"t",Xr.vb),p=Xr.J(h,"d",Xr.vb);if(h=Xr.J(h,"r",Xr.parseInt),null!=f&&(f-=a),!p)break;if(f=null!=f?f:c,0>(h=h||0))if(d+1<o.length){if(null==(h=Xr.J(o[d+1],"t",Xr.vb)))break;if(f>=h)break;h=Math.ceil((h-f)/p)-1}else{if(1/0==u)break;if(f/i>=u)break;h=Math.ceil((u*i-f)/p)-1}0<l.length&&f!=c&&(l[l.length-1].end=f/i);for(var m=0;m<=h;++m)c=f+p,l.push({start:f/i,end:c/i,eg:f}),f=c}i=l}return{timescale:r,Z:n,Za:s,la:a/r||0,sd:a,N:i}}function ri(e,t,n){return[t(e.B),t(e.ca),t(e.ja)].filter(Kt.Ga).map(function(e){return e.getAttribute(n)}).reduce(function(e,t){return e||t})}function ii(e,t,n){return[t(e.B),t(e.ca),t(e.ja)].filter(Kt.Ga).map(function(e){return Xr.ac(e,n)}).reduce(function(e,t){return e||t})}function ai(e,t,n,r,i,a){if(a=void 0===a?0:a,Xr.getAttributeNS(e,"http://www.w3.org/1999/xlink","href")){var s=function(e,t,n,r,i,a){for(var s=Xr.getAttributeNS(e,"http://www.w3.org/1999/xlink","href"),o=Xr.getAttributeNS(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",u=0;u<e.attributes.length;u++){var l=e.attributes[u];"http://www.w3.org/1999/xlink"==l.namespaceURI&&(e.removeAttributeNS(l.namespaceURI,l.localName),--u)}if(5<=a)return ve(new fe(2,4,4028));if("onLoad"!=o)return ve(new fe(2,4,4027));var c=Gt([r],[s]);return i.request(0,Oe(c,t)).U(function(r){if(!(r=Xr.Sd(r.data,e.tagName)))return ve(new fe(2,4,4001,s));for(;e.childNodes.length;)e.removeChild(e.childNodes[0]);for(;r.childNodes.length;){var o=r.childNodes[0];r.removeChild(o),e.appendChild(o)}for(o=0;o<r.attributes.length;o++){var u=r.attributes[o].nodeName,l=r.getAttribute(u);e.setAttribute(u,l)}return ai(e,t,n,c[0],i,a+1)})}(e,t,n,r,i,a);return n&&(s=s.U(void 0,function(){return ai(e,t,n,r,i,a)})),s}s=[];for(var o=0;o<e.childNodes.length;o++){var u=e.childNodes[o];u instanceof Element&&("urn:mpeg:dash:resolve-to-zero:2013"==Xr.getAttributeNS(u,"http://www.w3.org/1999/xlink","href")?(e.removeChild(u),--o):"SegmentTimeline"!=u.tagName&&s.push(ai(u,t,n,r,i,a)))}return be(s).U(function(){return e})}function si(e,t,n){this.c=e,this.b=t,this.a=n}function oi(e,t,n,r,i,a){this.position=e,this.startTime=t,this.endTime=n,this.c=r,this.b=i,this.a=a}function ui(e,t,n,r){var i,a=(new Hr).fa("sidx",function(e){i=function(e,t,n,r){var i=[];r.reader.L(4);var a=r.reader.F();if(0==a)throw new fe(2,3,3005);if(0==r.version)var s=r.reader.F(),o=r.reader.F();else s=r.reader.yb(),o=r.reader.yb();r.reader.L(2);var u=r.reader.Mb();for(e=e+r.size+o,o=0;o<u;o++){var l=r.reader.F(),c=(2147483648&l)>>>31;l&=2147483647;var d=r.reader.F();if(r.reader.L(4),1==c)throw new fe(2,3,3006);i.push(new oi(i.length,s/a-t,(s+d)/a-t,function(){return n},e,e+l-1)),s+=d,e+=l}return r.parser.stop(),i}(t,r,n,e)});if(e&&a.parse(e),i)return i;throw new fe(2,3,3004)}function li(e){this.a=e}function ci(e,t){for(;e.a.length&&e.a[e.a.length-1].startTime>=t;)e.a.pop();for(;e.a.length&&0>=e.a[0].endTime;)e.a.shift();if(0!=e.a.length){var n=e.a[e.a.length-1];e.a[e.a.length-1]=new oi(n.position,n.startTime,t,n.c,n.b,n.a)}}function di(e){this.b=e,this.a=new Br(e,0),Qr||(Qr=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])])}function hi(e){var t=fi(e);if(7<t.length)throw new fe(2,3,3002);for(var n=0,r=0;r<t.length;r++)n=256*n+t[r];t=n,n=fi(e);e:{for(r=0;r<Qr.length;r++)if(mt(n,Qr[r])){r=!0;break e}r=!1}if(r)n=e.b.byteLength-e.a.ba();else{if(8==n.length&&224&n[1])throw new fe(2,3,3001);r=n[0]&(1<<8-n.length)-1;for(var i=1;i<n.length;i++)r=256*r+n[i];n=r}return n=e.a.ba()+n<=e.b.byteLength?n:e.b.byteLength-e.a.ba(),r=new DataView(e.b.buffer,e.b.byteOffset+e.a.ba(),n),e.a.L(n),new pi(t,r)}function fi(e){var t,n=e.a.ka();for(t=1;8>=t&&!(n&1<<8-t);t++);if(8<t)throw new fe(2,3,3002);var r=new Uint8Array(t);for(r[0]=n,n=1;n<t;n++)r[n]=e.a.ka();return r}function pi(e,t){this.id=e,this.a=t}function mi(e){if(8<e.a.byteLength)throw new fe(2,3,3002);if(8==e.a.byteLength&&224&e.a.getUint8(0))throw new fe(2,3,3001);for(var t=0,n=0;n<e.a.byteLength;n++){t=256*t+e.a.getUint8(n)}return t}function vi(){}function yi(e){var t=new di(e.a);if(179!=(e=hi(t)).id)throw new fe(2,3,3013);if(e=mi(e),183!=(t=hi(t)).id)throw new fe(2,3,3012);t=new di(t.a);for(var n=0;t.sa();){var r=hi(t);if(241==r.id){n=mi(r);break}}return{fg:e,Df:n}}function gi(e,t){var n=ii(e,t,"Initialization");if(!n)return null;var r=e.B.oa,i=n.getAttribute("sourceURL");i&&(r=Gt(e.B.oa,[i])),i=0;var a=null;return(n=Xr.J(n,"range",Xr.oc))&&(i=n.start,a=n.end),new si(function(){return r},i,a)}function _i(e,t,n,r,i,a,s,o){var u=e.presentationTimeline,l=!e.kb||!e.S.Qc,c=e.S.start,d=e.S.duration,h=t,f=null;return{createSegmentIndex:function(){var e=[h(r,i,a),"webm"==s?h(n.c(),n.b,n.a):null];return h=null,Promise.all(e).then(function(e){var t=e[0];e=e[1]||null,t="mp4"==s?ui(t,i,r,o):(new vi).parse(t,e,r,o),u.sb(t,c),f=new li(t),l&&ci(f,d)})},findSegmentPosition:function(e){return f.find(e)},getSegmentReference:function(e){return f.get(e)}}}function bi(e){return e.Ob}function wi(e,t){var n=gi(e,Ei),r=function(e){return[e.B.Ja,e.ca.Ja,e.ja.Ja].filter(Kt.Ga).map(function(e){return Xr.R(e,"SegmentURL")}).reduce(function(e,t){return 0<e.length?e:t}).map(function(t){return t.getAttribute("indexRange")&&!e.Fd&&(e.Fd=!0),{cf:t.getAttribute("media"),start:(t=Xr.J(t,"mediaRange",Xr.oc,{start:0,end:null})).start,end:t.end}})}(e),i=ni(e,Ei),a=i.Za;0==a&&(a=1);var s=0;if(i.Z?s=i.Z*(a-1):i.N&&0<i.N.length&&(s=i.N[0].start),!(r={Z:i.Z,startTime:s,Za:a,la:i.la,N:i.N,qb:r}).Z&&!r.N&&1<r.qb.length)throw new fe(2,4,4002);if(!r.Z&&!e.S.duration&&!r.N&&1==r.qb.length)throw new fe(2,4,4002);if(r.N&&0==r.N.length)throw new fe(2,4,4002);return a=i=null,e.ja.id&&e.B.id&&(i=t[a=e.ja.id+","+e.B.id]),s=function(e,t,n,r){var i=r.qb.length;r.N&&r.N.length!=r.qb.length&&(i=Math.min(r.N.length,r.qb.length));for(var a=[],s=r.startTime,o=0;o<i;o++){var u,l=r.qb[o],c=Gt(n,[l.cf]);u=null!=r.Z?s+r.Z:r.N?r.N[o].end:s+e,a.push(new oi(o+t,s,u,function(e){return e}.bind(null,c),l.start,l.end)),s=u}return a}(e.S.duration,r.Za,e.B.oa,r),i?(i.Tc(s),a=e.presentationTimeline.Hb(),i.Dc(a-e.S.start)):(e.presentationTimeline.sb(s,e.S.start),i=new li(s),a&&e.kb&&(t[a]=i)),e.kb&&e.S.Qc||ci(i,e.S.duration),{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:i.find.bind(i),getSegmentReference:i.get.bind(i),initSegmentReference:n,la:r.la}}function Ei(e){return e.Ja}function Si(e,t,n,r){var i=function(e){var t=ri(e,Ti,"initialization");if(!t)return null;var n=e.B.id,r=e.bandwidth||null,i=e.B.oa;return new si(function(){var e=ti(t,n,null,r,null);return Gt(i,[e])},0,null)}(e),a=ni(e,Ti),s=ri(e,Ti,"media"),o=ri(e,Ti,"index");if(s=(a={Z:a.Z,timescale:a.timescale,Za:a.Za,la:a.la,sd:a.sd,N:a.N,Sc:s,Jb:o}).Jb?1:0,s+=a.N?1:0,0==(s+=a.Z?1:0))throw new fe(2,4,4002);if(1!=s&&(a.Jb&&(a.N=null),a.Z=null),!a.Jb&&!a.Sc)throw new fe(2,4,4002);if(a.Jb){if("mp4"!=(n=e.B.mimeType.split("/")[1])&&"webm"!=n)throw new fe(2,4,4006);if("webm"==n&&!i)throw new fe(2,4,4005);r=ti(a.Jb,e.B.id,null,e.bandwidth||null,null),e=_i(e,t,i,r=Gt(e.B.oa,[r]),0,null,n,a.la)}else a.Z?(r||(e.presentationTimeline.Vc(a.Z),e.presentationTimeline.Wc(e.S.start)),e=function(e,t){var n=e.S.duration,r=t.Z,i=t.Za,a=t.timescale,s=t.Sc,o=e.bandwidth||null,u=e.B.id,l=e.B.oa;return{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(e){return 0>e||n&&e>=n?null:Math.floor(e/r)},getSegmentReference:function(e){var t=e*r,c=t+r;return n&&(c=Math.min(c,n)),0>c||n&&t>=n?null:new oi(e,t,c,function(){var n=ti(s,u,e+i,o,t*a);return Gt(l,[n])},0,null)}}}(e,a)):(s=t=null,e.ja.id&&e.B.id&&(t=n[s=e.ja.id+","+e.B.id]),o=function(e,t){for(var n=[],r=0;r<t.N.length;r++){var i=r+t.Za;n.push(new oi(i,t.N[r].start,t.N[r].end,function(e,t,n,r,i,a){return Gt(r,[e=ti(e,t,i,n,a)]).map(function(e){return e.toString()})}.bind(null,t.Sc,e.B.id,e.bandwidth||null,e.B.oa,i,t.N[r].eg+t.sd),0,null))}return n}(e,a),r=!e.kb||!e.S.Qc,t?(r&&ci(new li(o),e.S.duration),t.Tc(o),n=e.presentationTimeline.Hb(),t.Dc(n-e.S.start)):(e.presentationTimeline.sb(o,e.S.start),t=new li(o),s&&e.kb&&(n[s]=t)),r&&ci(t,e.S.duration),e={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:t.find.bind(t),getSegmentReference:t.get.bind(t)});return{createSegmentIndex:e.createSegmentIndex,findSegmentPosition:e.findSegmentPosition,getSegmentReference:e.getSegmentReference,initSegmentReference:i,la:a.la}}function Ti(e){return e.Qb}V("shaka.media.InitSegmentReference",si),si.prototype.Ac=function(){return this.c()},si.prototype.createUris=si.prototype.Ac,si.prototype.Lc=function(){return this.b},si.prototype.getStartByte=si.prototype.Lc,si.prototype.Kc=function(){return this.a},si.prototype.getEndByte=si.prototype.Kc,V("shaka.media.SegmentReference",oi),oi.prototype.ba=function(){return this.position},oi.prototype.getPosition=oi.prototype.ba,oi.prototype.Mc=function(){return this.startTime},oi.prototype.getStartTime=oi.prototype.Mc,oi.prototype.Ge=function(){return this.endTime},oi.prototype.getEndTime=oi.prototype.Ge,oi.prototype.Ac=function(){return this.c()},oi.prototype.createUris=oi.prototype.Ac,oi.prototype.Lc=function(){return this.b},oi.prototype.getStartByte=oi.prototype.Lc,oi.prototype.Kc=function(){return this.a},oi.prototype.getEndByte=oi.prototype.Kc,V("shaka.media.SegmentIndex",li),li.prototype.destroy=function(){return this.a=null,Promise.resolve()},li.prototype.destroy=li.prototype.destroy,li.prototype.find=function(e){for(var t=this.a.length-1;0<=t;--t){var n=this.a[t];if(e>=n.startTime&&e<n.endTime)return n.position}return this.a.length&&e<this.a[0].startTime?this.a[0].position:null},li.prototype.find=li.prototype.find,li.prototype.get=function(e){return 0==this.a.length?null:0>(e-=this.a[0].position)||e>=this.a.length?null:this.a[e]},li.prototype.get=li.prototype.get,li.prototype.offset=function(e){for(var t=0;t<this.a.length;++t)this.a[t].startTime+=e,this.a[t].endTime+=e},li.prototype.offset=li.prototype.offset,li.prototype.Tc=function(e){for(var t=[],n=0,r=0;n<this.a.length&&r<e.length;){var i=this.a[n],a=e[r];i.startTime<a.startTime?(t.push(i),n++):(i.startTime>a.startTime?0==n&&t.push(a):(.1<Math.abs(i.endTime-a.endTime)?t.push(new oi(i.position,a.startTime,a.endTime,a.c,a.b,a.a)):t.push(i),n++),r++)}for(;n<this.a.length;)t.push(this.a[n++]);if(t.length)for(n=t[t.length-1].position+1;r<e.length;)i=new oi(n++,(i=e[r++]).startTime,i.endTime,i.c,i.b,i.a),t.push(i);else t=e;this.a=t},li.prototype.merge=li.prototype.Tc,li.prototype.Dc=function(e){for(var t=0;t<this.a.length;++t)if(this.a[t].endTime>e)return void this.a.splice(0,t);this.a=[]},li.prototype.evict=li.prototype.Dc,di.prototype.sa=function(){return this.a.sa()},vi.prototype.parse=function(e,t,n,r){var i;if(440786851!=hi(t=new di(new DataView(t))).id)throw new fe(2,3,3008);var a=hi(t);if(408125543!=a.id)throw new fe(2,3,3009);for(t=a.a.byteOffset,a=new di(a.a),i=null;a.sa();){var s=hi(a);if(357149030==s.id){i=s;break}}if(!i)throw new fe(2,3,3010);for(a=new di(i.a),i=1e6,s=null;a.sa();){var o=hi(a);if(2807729==o.id)i=mi(o);else if(17545==o.id)if(4==(s=o).a.byteLength)s=s.a.getFloat32(0);else{if(8!=s.a.byteLength)throw new fe(2,3,3003);s=s.a.getFloat64(0)}}if(null==s)throw new fe(2,3,3011);if(i=s*(a=i/1e9),475249515!=(e=hi(new di(new DataView(e)))).id)throw new fe(2,3,3007);return function(e,t,n,r,i,a){function s(){return i}var o=[];e=new di(e.a);for(var u=null,l=null;e.sa();){var c=hi(e);if(187==c.id){var d=yi(c);d&&(c=n*d.fg,d=t+d.Df,null!=u&&o.push(new oi(o.length,u-a,c-a,s,l,d-1)),u=c,l=d)}}return null!=u&&o.push(new oi(o.length,u-a,r-a,s,l,null)),o}(e,t,a,i,n,r)};var Ci={wb:{},Lb:{},ed:function(e,t){Ci.Lb[e]=t}};function ki(e,t,n){this.f=e,this.pc=t,this.h=this.g=1/0,this.a=1,this.b=this.c=null,this.l=0,this.m=!0,this.i=0,this.s=void 0===n||n}function Ii(e,t,n,r){return e=Oe(e,r),0==t&&null==n||(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function Ai(){var e=this;this.a=this.b=null,this.f=[],this.c=null,this.l=[],this.h=1,this.m={},this.s=0,this.v=new H(5),this.i=new ce(function(){!function(e){f(function t(){var n,r;return P(t,function(t){switch(t.j){case 1:return n=0,T(t,2),E(t,Li(e),4);case 4:n=t.o,k(t,3);break;case 2:r=I(t),e.a&&(r.severity=1,e.a.onError(r));case 3:if(!e.a)return t.return();Mi(e,n),S(t)}})})}(e)}),this.g=new Le}function Li(e){var t=Date.now(),n=e.a.networkingEngine.request(0,Oe(e.f,e.b.retryParameters));return xe(e.g,n),n.promise.then(function(t){if(e.a)return t.uri&&!e.f.includes(t.uri)&&e.f.unshift(t.uri),function(e,t,n){if(!(t=Xr.Sd(t,"MPD")))throw new fe(2,4,4001,n);return t=ai(t,e.b.retryParameters,e.b.dash.xlinkFailGracefully,n,e.a.networkingEngine),xe(e.g,t),t.promise.then(function(t){return function(e,t,n){return f(function r(){var i,a,s,o,u,l,c,d,h,f,p,m,v,y,g,_,b,w,T,C,k,I,A;return P(r,function(r){switch(r.j){case 1:o=Kt,l=[n],0<(c=(u=Xr).R(t,"Location").map(u.cc).filter(o.Ga)).length&&(d=Gt(l,c),l=e.f=d),h=u.R(t,"BaseURL").map(u.cc),f=Gt(l,h),p=e.b.dash.ignoreMinBufferTime,m=0,p||(m=u.J(t,"minBufferTime",u.Ba)),e.s=u.J(t,"minimumUpdatePeriod",u.Ba,-1),v=u.J(t,"availabilityStartTime",u.vf),y=u.J(t,"timeShiftBufferDepth",u.Ba),g=u.J(t,"suggestedPresentationDelay",u.Ba),_=u.J(t,"maxSegmentDuration",u.Ba),b=t.getAttribute("type")||"static",e.c?w=e.c.presentationTimeline:(T=Math.max(e.b.dash.defaultPresentationDelay,1.5*m),w=new ki(v,null!=g?g:T,e.b.dash.autoCorrectDrift));for(var L={kb:"static"!=b,presentationTimeline:w,ja:null,S:null,ca:null,B:null,bandwidth:0,Fd:!1},x=f,R=Xr.J(t,"mediaPresentationDuration",Xr.Ba),N=[],M=0,P=Xr.R(t,"Period"),O=0;O<P.length;O++){var D=P[O];M=Xr.J(D,"start",Xr.Ba,M);var U=Xr.J(D,"duration",Xr.Ba),F=null;if(O!=P.length-1){var B=Xr.J(P[O+1],"start",Xr.Ba);null!=B&&(F=B-M)}else null!=R&&(F=R-M);if(null==F&&(F=U),D=xi(e,L,x,{start:M,duration:F,node:D,Qc:null==F||O==P.length-1}),N.push(D),U=L.ja.id,e.l.includes(U)||(e.l.push(U),e.c&&(e.a.filterNewPeriod(D),e.c.periods.push(D))),null==F){M=null;break}M+=F}if(null==e.c&&e.a.filterAllPeriods(N),null!=R?(i=N,a=R,s=!1):(i=N,a=M,s=!0),C=a,k=i,w.Rb("static"==b),"static"!=b&&s||w.wa(C||1/0),w.V()&&!isNaN(e.b.availabilityWindowOverride)&&(y=e.b.availabilityWindowOverride),null==y&&(y=1/0),w.md(y),w.Vc(_||1),e.c){r.A(0);break}if(e.c={presentationTimeline:w,periods:k,offlineSessionIds:[],minBufferTime:m||0},!w.he()){r.A(0);break}return I=u.R(t,"UTCTiming"),E(r,function(e,t,n){n=n.map(function(e){return{scheme:e.getAttribute("schemeIdUri"),value:e.getAttribute("value")}});var r=e.b.dash.clockSyncUri;return!n.length&&r&&n.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:r}),Kt.ye(n,function(e){var n=e.scheme;switch(e=e.value,n){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return Oi(this,t,e,"HEAD");case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return Oi(this,t,e,"GET");case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return n=Date.parse(e),isNaN(n)?0:n-Date.now();case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":return z("NTP UTCTiming scheme is not supported"),Promise.reject();default:return z("Unrecognized scheme in UTCTiming element",n),Promise.reject()}}.bind(e)).catch(function(){return z("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),0})}(e,f,I),4);case 4:if(A=r.o,!e.a)return r.return();w.ce(A),S(r)}})})}(e,t,n)})}(e,t.data,t.uri)}).then(function(){var n=(Date.now()-t)/1e3;return K(e.v,1,n),n})}function xi(e,t,n,r){if(t.ja=Pi(r.node,null,n),t.S=r,t.ja.id||(t.ja.id="__shaka_period_"+r.start),Xr.R(r.node,"EventStream").forEach(e.wf.bind(e,r.start,r.duration)),n=Xr.R(r.node,"AdaptationSet").map(e.uf.bind(e,t)).filter(Kt.Ga),t.kb){t=[];for(var i=d(n),a=i.next();!a.done;a=i.next())for(var s=(a=d(a.value.Gf)).next();!s.done;s=a.next())t.push(s.value);if(t.length!=new Set(t).size)throw new fe(2,4,4018)}var o=n.filter(function(e){return!e.qd});if(n.filter(function(e){return e.qd}).forEach(function(e){var t=e.streams[0],n=e.qd;o.forEach(function(e){e.id==n&&e.streams.forEach(function(e){e.trickModeVideo=t})})}),t=Ri(o,"video"),i=Ri(o,"audio"),!t.length&&!i.length)throw new fe(2,4,4004);for(i.length||(i=[null]),t.length||(t=[null]),n=[],a=0;a<i.length;a++)for(s=0;s<t.length;s++)Ni(e,i[a],t[s],n);for(e=Ri(o,"text"),t=[],i=0;i<e.length;i++)t.push.apply(t,e[i].streams);return{startTime:r.start,textStreams:t,variants:n}}function Ri(e,t){return e.filter(function(e){return e.contentType==t})}function Ni(e,t,n,r){if(t||n)if(t&&n){var i=t.drmInfos,a=n.drmInfos;if(!i.length||!a.length||0<Rt(i,a).length){a=Rt(t.drmInfos,n.drmInfos);for(var s=0;s<t.streams.length;s++)for(var o=0;o<n.streams.length;o++)i=(n.streams[o].bandwidth||0)+(t.streams[s].bandwidth||0),i={id:e.h++,language:t.language,primary:t.Rc||n.Rc,audio:t.streams[s],video:n.streams[o],bandwidth:i,drmInfos:a,allowedByApplication:!0,allowedByKeySystem:!0},r.push(i)}}else for(a=t||n,s=0;s<a.streams.length;s++)i=a.streams[s].bandwidth||0,i={id:e.h++,language:a.language||"und",primary:a.Rc,audio:t?a.streams[s]:null,video:n?a.streams[s]:null,bandwidth:i,drmInfos:a.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0},r.push(i)}function Mi(e,t){0>e.s||e.i.O(Math.max(3,e.s-t,G(e.v)))}function Pi(e,t,n){t=t||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,Xc:null},n=n||t.oa;var r=Xr.vb,i=Xr.Ae,a=Xr.R(e,"BaseURL").map(Xr.cc),s=e.getAttribute("contentType")||t.contentType,o=e.getAttribute("mimeType")||t.mimeType,u=e.getAttribute("codecs")||t.codecs;i=Xr.J(e,"frameRate",i)||t.frameRate;for(var l=Xr.R(e,"InbandEventStream"),c=t.emsgSchemeIdUris.slice(),h=(l=d(l)).next();!h.done;h=l.next())h=h.value.getAttribute("schemeIdUri"),c.includes(h)||c.push(h);return l=function(e){for(var t=0;t<e.length;++t){var n=e[t],r=n.getAttribute("schemeIdUri");if(r&&(n=n.getAttribute("value")))switch(r){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(!(r=parseInt(n,10)))continue;return r;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(r=parseInt(n,16)){for(e=0;r;)1&r&&++e,r>>=1;return e}}}return null}(l=Xr.R(e,"AudioChannelConfiguration"))||t.Xc,s||(s=Di(o,u)),{oa:Gt(n,a),Ob:Xr.ac(e,"SegmentBase")||t.Ob,Ja:Xr.ac(e,"SegmentList")||t.Ja,Qb:Xr.ac(e,"SegmentTemplate")||t.Qb,width:Xr.J(e,"width",r)||t.width,height:Xr.J(e,"height",r)||t.height,contentType:s,mimeType:o,codecs:u,frameRate:i,emsgSchemeIdUris:c,id:e.getAttribute("id"),Xc:l}}function Oi(e,t,n,r){return(t=Oe(t=Gt(t,[n]),e.b.retryParameters)).method=r,t=e.a.networkingEngine.request(4,t),xe(e.g,t),t.promise.then(function(e){if("HEAD"==r){if(!e.headers||!e.headers.date)return 0;e=e.headers.date}else e=it(e.data);return e=Date.parse(e),isNaN(e)?0:e-Date.now()})}function Di(e,t){return yn($e(e,t))?"text":e.split("/")[0]}function Ui(e,t,n,r){this.b=e,this.type=t,this.a=n,this.segments=r||null}function Fi(e,t,n,r){this.id=e,this.name=t,this.a=n,this.value=void 0===r?null:r}function Bi(e,t){this.name=e,this.value=t}function Vi(e,t,n){return(e=e.getAttribute(t))?e.value:n||null}function ji(e,t){this.b=t,this.a=e}V("shaka.media.ManifestParser.registerParserByExtension",Ci.ed),Ci.Nb=function(e,t){Ci.wb[e]=t},V("shaka.media.ManifestParser.registerParserByMime",Ci.Nb),Ci.Af=function(){var e={};if(Je()){for(var t in Ci.wb)e[t]=!0;for(var n in Ci.Lb)e[n]=!0}t={mpd:"application/dash+xml",m3u8:"application/x-mpegurl",ism:"application/vnd.ms-sstr+xml"};for(var r=(n=d(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"])).next();!r.done;r=n.next())e[r=r.value]=Je()?!!Ci.wb[r]:et(r);for(var i in t)e[i]=Je()?!!Ci.Lb[i]:et(t[i]);return e},Ci.create=function(e,t,n,r){return f(function i(){var a,s;return P(i,function(i){switch(i.j){case 1:return T(i,2),E(i,Ci.He(e,t,n,r),4);case 4:return a=i.o,i.return(new a);case 2:throw(s=I(i)).severity=2,s}})})},Ci.He=function(e,t,n,r){return f(function i(){var a,s,o,u,l;return P(i,function(i){switch(i.j){case 1:if(a=Ci,r&&(s=a.wb[r.toLowerCase()]))return i.return(s);if((o=a.getExtension(e))&&(u=a.Lb[o]))return i.return(u);if(r){i.A(2);break}return E(i,a.Oe(e,t,n),3);case 3:if((r=i.o)&&(l=Ci.wb[r]))return i.return(l);case 2:throw new fe(2,4,4e3,e)}})})},Ci.Oe=function(e,t,n){return f(function r(){var i,a,s;return P(r,function(r){switch(r.j){case 1:return(i=Oe([e],n)).method="HEAD",E(r,t.request(0,i).promise,2);case 2:return a=r.o,s=a.headers["content-type"],r.return(s?s.toLowerCase():"")}})})},Ci.getExtension=function(e){return 1==(e=new $(e).ia.split("/").pop().split(".")).length?"":e.pop().toLowerCase()},Ci.isSupported=function(e,t){return!!Je()&&(t in Ci.wb||Ci.getExtension(e)in Ci.Lb)},V("shaka.media.PresentationTimeline",ki),ki.prototype.Y=function(){return this.g},ki.prototype.getDuration=ki.prototype.Y,ki.prototype.wa=function(e){this.g=e},ki.prototype.setDuration=ki.prototype.wa,ki.prototype.Te=function(){return this.f},ki.prototype.getPresentationStartTime=ki.prototype.Te,ki.prototype.ce=function(e){this.l=e},ki.prototype.setClockOffset=ki.prototype.ce,ki.prototype.Rb=function(e){this.m=e},ki.prototype.setStatic=ki.prototype.Rb,ki.prototype.md=function(e){this.h=e},ki.prototype.setSegmentAvailabilityDuration=ki.prototype.md,ki.prototype.Qf=function(e){this.pc=e},ki.prototype.setDelay=ki.prototype.Qf,ki.prototype.Fe=function(){return this.pc},ki.prototype.getDelay=ki.prototype.Fe,ki.prototype.sb=function(e,t){if(0!=e.length){var n=e[e.length-1].endTime+t;this.Wc(e[0].startTime+t),this.a=e.reduce(function(e,t){return Math.max(e,t.endTime-t.startTime)},this.a),this.b=Math.max(this.b,n),null!=this.f&&this.s&&(this.f=(Date.now()+this.l)/1e3-this.b-this.a)}},ki.prototype.notifySegments=ki.prototype.sb,ki.prototype.Wc=function(e){this.c=null==this.c?e:Math.min(this.c,e)},ki.prototype.notifyMinSegmentStartTime=ki.prototype.Wc,ki.prototype.Vc=function(e){this.a=Math.max(this.a,e)},ki.prototype.notifyMaxSegmentDuration=ki.prototype.Vc,ki.prototype.offset=function(e){null!=this.c&&(this.c+=e),null!=this.b&&(this.b+=e)},ki.prototype.offset=ki.prototype.offset,ki.prototype.V=function(){return 1/0==this.g&&!this.m},ki.prototype.isLive=ki.prototype.V,ki.prototype.Va=function(){return 1/0!=this.g&&!this.m},ki.prototype.isInProgress=ki.prototype.Va,ki.prototype.Hb=function(){if(1/0==this.h)return this.i;var e=this.nb()-this.h;return Math.max(this.i,e)},ki.prototype.getSegmentAvailabilityStart=ki.prototype.Hb,ki.prototype.de=function(e){this.i=e},ki.prototype.setUserSeekStart=ki.prototype.de,ki.prototype.nb=function(){return this.V()||this.Va()?Math.min(Math.max(0,(Date.now()+this.l)/1e3-this.a-this.f),this.g):this.g},ki.prototype.getSegmentAvailabilityEnd=ki.prototype.nb,ki.prototype.Gb=function(e){var t=Math.max(this.c,this.i);if(1/0==this.h)return t;var n=this.nb()-this.h;return e=Math.min(n+e,this.za()),Math.max(t,e)},ki.prototype.getSafeSeekRangeStart=ki.prototype.Gb,ki.prototype.mb=function(){return this.Gb(0)},ki.prototype.getSeekRangeStart=ki.prototype.mb,ki.prototype.za=function(){var e=this.V()||this.Va()?this.pc:0;return Math.max(0,this.nb()-e)},ki.prototype.getSeekRangeEnd=ki.prototype.za,ki.prototype.he=function(){return null!=this.f&&null==this.b},ki.prototype.usingPresentationStartTime=ki.prototype.he,V("shaka.dash.DashParser",Ai),(n=Ai.prototype).configure=function(e){this.b=e},n.start=function(e,t){var n=this;return f(function r(){var i;return P(r,function(r){switch(r.j){case 1:return n.f=[e],n.a=t,E(r,Li(n),2);case 2:if(i=r.o,n.a&&Mi(n,i),!n.a)throw new fe(2,7,7001);return r.return(n.c)}})})},n.stop=function(){return this.b=this.a=null,this.f=[],this.c=null,this.l=[],this.m={},null!=this.i&&(this.i.stop(),this.i=null),this.g.destroy()},n.update=function(){Li(this).catch(function(e){this.a&&this.a.onError(e)}.bind(this))},n.onExpirationUpdated=function(){},n.uf=function(e,t){e.ca=Pi(t,e.ja,null);var n=!1,r=Xr.R(t,"Role"),i=r.map(function(e){return e.getAttribute("value")}).filter(Kt.Ga),a=void 0,s="text"==e.ca.contentType;s&&(a="subtitle");for(var o=0;o<r.length;o++){var u=r[o].getAttribute("schemeIdUri");if(null==u||"urn:mpeg:dash:role:2011"==u)switch(u=r[o].getAttribute("value"),u){case"main":n=!0;break;case"caption":case"subtitle":a=u}}var l=null,c=!1;Xr.R(t,"EssentialProperty").forEach(function(e){"http://dashif.org/guidelines/trickmode"==e.getAttribute("schemeIdUri")?l=e.getAttribute("value"):c=!0}),o=Xr.R(t,"Accessibility");var h=new Map;for(r={},u=(o=d(o)).next();!u.done;r={Db:r.Db},u=o.next()){var f=u.value;u=f.getAttribute("schemeIdUri"),f=f.getAttribute("value"),"urn:scte:dash:cc:cea-608:2015"==u||"urn:scte:dash:cc:cea-708:2015"==u?(r.Db=1,null!=f?f.split(";").forEach(function(e){return function(t){if(t.includes("=")){var n=(t=t.split("="))[0].startsWith("CC")?t[0]:"CC"+t[0];t=t[1].split(",")[0].split(":").pop()}else n="CC"+e.Db,e.Db+=2;h.set(n,On(t))}}(r)):h.set("CC1","und")):"urn:mpeg:dash:role:2011"==u&&null!=f&&(i.push(f),"captions"==f&&(a="caption"))}if(c)return null;var p=Zr(r=Xr.R(t,"ContentProtection"),this.b.dash.customScheme,this.b.dash.ignoreDrmInfo);if(r=On(t.getAttribute("lang")||"und"),u=t.getAttribute("label"),0==(i=(o=Xr.R(t,"Representation")).map(this.xf.bind(this,e,p,a,r,u,n,i,h)).filter(function(e){return!!e})).length){if(s)return null;throw new fe(2,4,4003)}return e.ca.contentType&&"application"!=e.ca.contentType||(e.ca.contentType=Di(i[0].mimeType,i[0].codecs),i.forEach(function(t){t.type=e.ca.contentType})),i.forEach(function(e){p.drmInfos.forEach(function(t){e.keyId&&t.keyIds.push(e.keyId)})}),s=o.map(function(e){return e.getAttribute("id")}).filter(Kt.Ga),{id:e.ca.id||"__fake__"+this.h++,contentType:e.ca.contentType,language:r,Rc:n,streams:i,drmInfos:p.drmInfos,qd:l,Gf:s}},n.xf=function(e,t,n,r,i,a,s,o,u){if(e.B=Pi(u,e.ca,null),!function(e){var t=e.Ob?1:0;return t+=e.Ja?1:0,0==(t+=e.Qb?1:0)?"text"==e.contentType||"application"==e.contentType:(1!=t&&(e.Ob&&(e.Ja=null),e.Qb=null),!0)}(e.B))return null;e.bandwidth=Xr.J(u,"bandwidth",Xr.nc)||0;var l=e.B.contentType;l="text"==l||"application"==l;try{var c=this.Hf.bind(this);if(e.B.Ob)var d=function(e,t){var n=Number(ri(e,bi,"presentationTimeOffset"))||0,r=ri(e,bi,"timescale"),i=1;r&&(i=Xr.nc(r)||1),n=n/i||0,r=gi(e,bi);var a=e.B.contentType;if(i=e.B.mimeType.split("/")[1],"text"!=a&&"mp4"!=i&&"webm"!=i)throw new fe(2,4,4006);if("webm"==i&&!r)throw new fe(2,4,4005);a=ii(e,bi,"RepresentationIndex");var s=ri(e,bi,"indexRange"),o=e.B.oa;if(s=Xr.oc(s||""),a){var u=a.getAttribute("sourceURL");u&&(o=Gt(e.B.oa,[u])),s=Xr.J(a,"range",Xr.oc,s)}if(!s)throw new fe(2,4,4002);return{createSegmentIndex:(i=_i(e,t,r,o,s.start,s.end,i,n)).createSegmentIndex,findSegmentPosition:i.findSegmentPosition,getSegmentReference:i.getSegmentReference,initSegmentReference:r,la:n}}(e,c);else if(e.B.Ja)d=wi(e,this.m);else if(e.B.Qb)d=Si(e,c,this.m,!!this.c);else{var h=e.B.oa,f=e.S.duration||0;d={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(e){return 0<=e&&e<f?1:null},getSegmentReference:function(e){return 1!=e?null:new oi(1,0,f,function(){return h},0,null)},initSegmentReference:null,la:0}}}catch(e){if(l&&4002==e.code)return null;throw e}return u=function(e,t,n,r){var i=Zr(e,t,r);if(n.Ad)e=1==n.drmInfos.length&&!n.drmInfos[0].keySystem,t=0==i.drmInfos.length,(0==n.drmInfos.length||e&&!t)&&(n.drmInfos=i.drmInfos),n.Ad=!1;else if(0<i.drmInfos.length&&(n.drmInfos=n.drmInfos.filter(function(e){return i.drmInfos.some(function(t){return t.keySystem==e.keySystem})}),0==n.drmInfos.length))throw new fe(2,4,4008);return i.wd||n.wd}(u=Xr.R(u,"ContentProtection"),this.b.dash.customScheme,t,this.b.dash.ignoreDrmInfo),{id:this.h++,originalId:e.B.id,createSegmentIndex:d.createSegmentIndex,findSegmentPosition:d.findSegmentPosition,getSegmentReference:d.getSegmentReference,initSegmentReference:d.initSegmentReference,presentationTimeOffset:d.la,mimeType:e.B.mimeType,codecs:e.B.codecs,frameRate:e.B.frameRate,bandwidth:e.bandwidth,width:e.B.width,height:e.B.height,kind:n,encrypted:0<t.drmInfos.length,keyId:u,language:r,label:i,type:e.ca.contentType,primary:a,trickModeVideo:null,emsgSchemeIdUris:e.B.emsgSchemeIdUris,roles:s,channelsCount:e.B.Xc,closedCaptions:o}},n.wf=function(e,t,n){var r=Xr.vb,i=n.getAttribute("schemeIdUri")||"",a=n.getAttribute("value")||"",s=Xr.J(n,"timescale",r)||1;Xr.R(n,"Event").forEach(function(n){var o=Xr.J(n,"presentationTime",r)||0,u=Xr.J(n,"duration",r)||0;u=(o=o/s+e)+u/s,null!=t&&(o=Math.min(o,e+t),u=Math.min(u,e+t)),n={schemeIdUri:i,value:a,startTime:o,endTime:u,id:n.getAttribute("id")||"",eventElement:n},this.a.onTimelineRegionAdded(n)}.bind(this))},n.Hf=function(e,t,n){return e=Ii(e,t,n,this.b.retryParameters),e=this.a.networkingEngine.request(1,e),xe(this.g,e),e.promise.then(function(e){return e.data})},Ci.ed("mpd",Ai),Ci.Nb("application/dash+xml",Ai),Fi.prototype.toString=function(){var e="#"+this.name,t=this.a?this.a.map(function(e){return e.name+"="+(isNaN(Number(e.value))?'"'+e.value+'"':e.value)}):[];return this.value&&t.unshift(this.value),0<t.length&&(e+=":"+t.join(",")),e},Fi.prototype.getAttribute=function(e){var t=this.a.filter(function(t){return t.name==e});return t.length?t[0]:null};var Hi={lb:function(e,t){return e.filter(function(e){return e.name==t})},Ra:function(e,t){var n=Hi.lb(e,t);return n.length?n[0]:null},Hc:function(e,t,n){return e.filter(function(e){var r=e.getAttribute("TYPE");return e=e.getAttribute("GROUP-ID"),r.value==t&&e.value==n})},zc:function(e,t){return Gt([e],[t])[0]},Pc:function(e){return/^#(?!EXT)/m.test(e)}};function Ki(e){this.b=e,this.a=0}function Gi(e){qi(e,/[ \t]+/gm)}function qi(e,t){t.lastIndex=e.a;var n=t.exec(e.b);return n=null==n?null:{position:n.index,length:n[0].length,Jf:n},e.a==e.b.length||null==n||n.position!=e.a?null:(e.a+=n.length,n.Jf)}function Wi(e){return e.a==e.b.length?null:(e=qi(e,/[^ \t\n]*/gm))?e[0]:null}function zi(){this.a=0}function Yi(e,t,n){var r=(t=(t=it(t)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim()).split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(r[0]))throw new fe(2,4,4015);t=0;for(var i=1;i<r.length;i++)if(!Hi.Pc(r[i])){var a=$i(e,r[i]);if(--e.a,Zi.includes(a.name)){t=1;break}"EXT-X-STREAM-INF"==a.name&&(i+=1)}for(i=[],a=1;a<r.length;)if(Hi.Pc(r[a]))a+=1;else{var s=$i(e,r[a]);if(Qi.includes(s.name)){if(1!=t)throw new fe(2,4,4017);return new Ui(n,t,i,e=Xi(e,n,r=r.splice(a,r.length-a),i))}i.push(s),a+=1,"EXT-X-STREAM-INF"==s.name&&(s.a.push(new Bi("URI",r[a])),a+=1)}return new Ui(n,t,i)}function Xi(e,t,n,r){var i=[],a=[];return n.forEach(function(n){if(/^(#EXT)/.test(n))n=$i(e,n),Zi.includes(n.name)?r.push(n):a.push(n);else{if(Hi.Pc(n))return[];n=Hi.zc(t,n.trim()),i.push(new ji(n,a)),a=[]}}),i}function $i(e,t){var n=e.a++,r=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!r)throw new fe(2,4,4016,t);var i,a=r[1],s=r[2];if(r=[],s){var o;(o=qi(s=new Ki(s),/^([^,=]+)(?:,|$)/g))&&(i=o[1]);for(var u=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;o=qi(s,u);)r.push(new Bi(o[1],o[2]||o[3]))}return new Fi(n,a,r,i)}var Zi="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-MAP EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST".split(" "),Qi="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE".split(" ");function Ji(e){try{var t=Ji.parse(e);return ge({uri:e,ad:e,data:t.data,headers:{"content-type":t.contentType}})}catch(e){return ve(e)}}function ea(){var e=this;this.c=this.g=null,this.$=1,this.D=new Map,this.T=new Set,this.a=new Map,this.b=null,this.v="",this.s=new zi,this.P=0,this.h=new ce(function(){!function(e){f(function t(){var n,r;return P(t,function(t){switch(t.j){case 1:return e.g?(T(t,2),E(t,e.update(),4)):t.return();case 4:n=e.P,e.h.O(n),k(t,0);break;case 2:(r=I(t)).severity=1,e.g.onError(r),e.h.O(.1),S(t)}})})}(e)}),this.f=ba,this.m=null,this.C=0,this.G=1/0,this.i=new Le,this.M=[],this.l=new Map,this.W=!1}function ta(e,t){return f(function n(){var r,i,a,s,o,u,l,c,d,h;return P(n,function(n){switch(n.j){case 1:return r=Hi,i=wa,a=t.pe,E(n,pa(e,a),2);case 2:if(s=n.o,1!=(o=Yi(e.s,s.data,s.uri)).type)throw new fe(2,4,4017);return l=(u=r.Ra(o.a,"EXT-X-MEDIA-SEQUENCE"))?Number(u.value):0,c=t.stream,E(n,la(e,t.tc,o,l,c.mimeType,c.codecs),3);case 3:d=n.o,t.Pb.a=d,h=d[d.length-1],r.Ra(o.a,"EXT-X-ENDLIST")&&(ya(e,i.Oa),e.b.wa(h.endTime)),S(n)}})})}function na(e){e.forEach(function(e){var t=e.stream.codecs.split(",");t=t.filter(function(e){return"mp4a.40.34"!=e}),e.stream.codecs=t.join(",")})}function ra(e,t,n,r,i){return{id:e.$++,language:t?t.language:"und",primary:!!t&&t.primary||!!n&&n.primary,audio:t,video:n,bandwidth:r,drmInfos:i,allowedByApplication:!0,allowedByKeySystem:!0}}function ia(e,t,n){return f(function r(){var i,a,s,o,u,l,c,d,h;return P(r,function(r){switch(r.j){case 1:if(i=ha(t,"URI"),e.a.has(i))return r.return(e.a.get(i));if(a=ha(t,"TYPE").toLowerCase(),s=Wt,"subtitles"==a&&(a=s.qa),o=On(Vi(t,"LANGUAGE","und")),u=Vi(t,"NAME"),l=t.getAttribute("DEFAULT"),c=t.getAttribute("AUTOSELECT"),d=Vi(t,"CHANNELS"),"audio"==a)if(d){var f=d.split("/")[0];f=parseInt(f,10)}else f=null;else f=null;return E(r,aa(e,i,n,a,o,!!l||!!c,u,f,null),2);case 2:return null==(h=r.o)?r.return(null):e.a.has(i)?r.return(e.a.get(i)):(e.D.set(t.id,h),e.a.set(i,h),r.return(h))}})})}function aa(e,t,n,r,i,a,s,o,u){return f(function l(){var c,h,p,m,v,y,g,_,b,w,S,T,C,k,I,A,L,x,R,N,M,O,D,U,F;return P(l,function(l){switch(l.j){case 1:return h=(c=Hi).zc(e.v,t),m="",E(l,pa(e,h),2);case 2:if(y=l.o,h=y.uri,1!=(p=Yi(e.s,y.data,h)).type)throw new fe(2,4,4017);g=[],p.segments.forEach(function(e){e=c.lb(e.b,"EXT-X-KEY"),g.push.apply(g,e)}),_=!1,b=[],w=null;for(var B=d(g),V=B.next();!V.done;V=B.next())if(S=V.value,"NONE"!=(T=ha(S,"METHOD"))){if(_=!0,"AES-128"==T)return e.W=!0,l.return(null);C=ha(S,"KEYFORMAT"),(I=(k=_a[C])?k(S):null)&&(I.keyIds.length&&(w=I.keyIds[0]),b.push(I))}if(_&&!b.length)throw new fe(2,4,4026);return function(e,t){var n=wa,r=Hi.Ra(t.a,"EXT-X-PLAYLIST-TYPE"),i=Hi.Ra(t.a,"EXT-X-ENDLIST");i=r&&"VOD"==r.value||i,r=r&&"EVENT"==r.value&&!i,r=!i&&!r,i?ya(e,n.Oa):(ya(e,r?n.td:n.ke),n=fa(t.a,"EXT-X-TARGETDURATION"),n=Number(n.value),e.C=Math.max(n,e.C),e.G=Math.min(n,e.G))}(e,p),m=function(e,t){if(1==t.length)return t[0];var n=da(e,t);if(null!=n)return n;throw new fe(2,4,4025,t)}(r,n),E(l,function(e,t,n,r){return f(function i(){var a,s,o,u,l,c,d,h,f,p;return P(i,function(i){switch(i.j){case 1:return a=Wt,s=Ne,o=r.segments[0].a,u=new $(o),l=u.ia.split(".").pop(),c=va[t],(d=c[l])?i.return(d):t==a.qa?n&&"vtt"!=n?i.return("application/mp4"):i.return("text/vtt"):((h=Oe([o],e.c.retryParameters)).method="HEAD",E(i,ga(e,h,s.ud),2));case 2:if(f=i.o,!(p=f.headers["content-type"]))throw new fe(2,4,4021,l);return i.return(p.split(";")[0])}})})}(e,r,m,p),3);case 3:return v=l.o,L=(A=c.Ra(p.a,"EXT-X-MEDIA-SEQUENCE"))?Number(A.value):0,E(l,la(e,t,p,L,v,m),4);case 4:return x=l.o,R=x[0].startTime,N=x[x.length-1].endTime,M=N-R,O=new li(x),D=sa(p),U=void 0,"text"==r&&(U="subtitle"),F={id:e.$++,originalId:s,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:O.find.bind(O),getSegmentReference:O.get.bind(O),initSegmentReference:D,presentationTimeOffset:0,mimeType:v,codecs:m,kind:U,encrypted:_,keyId:w,language:i,label:s,type:r,primary:a,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:[],channelsCount:o,closedCaptions:u},l.return({stream:F,Pb:O,drmInfos:b,tc:t,pe:h,Uc:R,qg:N,duration:M})}})})}function sa(e){var t=Hi.lb(e.a,"EXT-X-MAP");if(!t.length)return null;if(1<t.length)throw new fe(2,4,4020);var n=ha(t=t[0],"URI"),r=Hi.zc(e.b,n);return e=0,n=null,(t=Vi(t,"BYTERANGE"))&&(e=t.split("@"),t=Number(e[0]),n=(e=Number(e[1]))+t-1),new si(function(){return[r]},e,n)}function oa(e,t,n,r){var i=t.b,a=t.a;t=fa(i,"EXTINF").value.split(","),t=r+Number(t[0]);var s=0,o=null;return(i=Hi.Ra(i,"EXT-X-BYTERANGE"))&&(s=i.value.split("@"),i=Number(s[0]),o=(s=s[1]?Number(s[1]):e.a+1)+i-1),new oi(n,r,t,function(){return[a]},s,o)}function ua(e){e.b&&(e.M.forEach(function(t){e.b.sb(t,0)}),e.M=[])}function la(e,t,n,r,i,a){return f(function s(){var o,u,l,c,d,h,p,m,v,y;return P(s,function(s){switch(s.j){case 1:return o=n.segments,u=[],l=o[0].a,c=oa(null,o[0],r,0),d=sa(n),E(s,function(e,t,n,r,i,a){return f(function s(){var o,u,l,c,d,h,f,p,m;return P(s,function(s){switch(s.j){case 1:if(e.m&&(o=e.a.get(t),u=o.Pb,l=u.get(r.position)))return s.return(l.startTime);if("audio/mpeg"==i)return s.return(0);if("video/mp4"!=i&&"audio/mp4"!=i){s.A(2);break}return c=[ca(e,r)],n&&c.push(ca(e,n)),E(s,Promise.all(c),3);case 3:return d=s.o,h=d[0],f=d[1]||d[0],s.return(function(e,t){var n=0;if((new Hr).H("moov",Kr).H("trak",Kr).H("mdia",Kr).fa("mdhd",function(e){e.reader.L(0==e.version?8:16),n=e.reader.F(),e.parser.stop()}).parse(t,!0),!n)throw new fe(2,4,4030);var r=0,i=!1;if((new Hr).H("moof",Kr).H("traf",Kr).fa("tfdt",function(e){r=(0==e.version?e.reader.F():e.reader.yb())/n,i=!0,e.parser.stop()}).parse(e,!0),!i)throw new fe(2,4,4030);return r}(h.data,f.data));case 2:if("video/mp2t"!=i){s.A(4);break}return E(s,ca(e,r),5);case 5:return p=s.o,s.return(function(e){function t(){throw new fe(2,4,4030)}e=new Br(new DataView(e),0);for(var n=0,r=0;;){if(n=e.ba(),71!=(r=e.ka())&&t(),16384&e.Mb()||t(),0!=(r=(48&e.ka())>>4)&&2!=r||t(),3==r&&(r=e.ka(),e.L(r)),1==e.F()>>8)return e.L(3),0!=(n=e.ka()>>6)&&1!=n||t(),0==e.ka()&&t(),n=e.ka(),r=e.Mb(),e=e.Mb(),(1073741824*((14&n)>>1)+((65534&r)<<14|(65534&e)>>1))/9e4;e.seek(n+188),71!=(r=e.ka())&&(e.seek(n+192),r=e.ka()),71!=r&&(e.seek(n+204),r=e.ka()),71!=r&&t(),e.$d(1)}}(p.data));case 4:if("application/mp4"!=i&&!i.startsWith("text/")){s.A(6);break}return E(s,ca(e,r),7);case 7:return m=s.o,s.return(function(e,t,n){return yn(e=$e(e,t))?(gn(t=new mn(null),e),t.Mc(n)):0}(i,a,m.data));case 6:if("video/webm"==i)return s.return(null);throw new fe(2,4,4030)}})})}(e,t,d,c,i,a),2);case 2:h=s.o,l.split("/").pop();for(var g=0;g<o.length;++g)p=o[g],m=u[u.length-1],v=0==g?h:m.endTime,y=oa(m,p,r+g,v),u.push(y);return e.M.push(u),ua(e),s.return(u)}})})}function ca(e,t){return f(function n(){var r,i,a,s,o,u;return P(n,function(n){switch(n.j){case 1:return r=Ne,i=Ii(t.c(),t.b,t.b+2048-1,e.c.retryParameters),a=Ii(t.c(),t.b,t.a,e.c.retryParameters),T(n,2),E(n,ga(e,i,r.ud),4);case 4:return s=n.o,n.return(s);case 2:if(7001==(o=I(n)).code)throw o;return z("Unable to fetch a partial HLS segment! Falling back to a full segment request, which is expensive!  Your server should support Range requests and CORS preflights.",i.uris[0]),E(n,ga(e,a,r.ud),5);case 5:return u=n.o,n.return(u)}})})}function da(e,t){for(var n=ma[e],r=0;r<n.length;r++)for(var i=0;i<t.length;i++)if(n[r].test(t[i].trim()))return t[i].trim();return"text"==e?"":null}function ha(e,t){var n=e.getAttribute(t);if(!n)throw new fe(2,4,4023,t);return n.value}function fa(e,t){var n=Hi.Ra(e,t);if(!n)throw new fe(2,4,4024,t);return n}function pa(e,t){return ga(e,Oe([t],e.c.retryParameters),Ne.ng)}V("shaka.net.DataUriPlugin",Ji),Ji.parse=function(t){var n=t.split(":");if(2>n.length||"data"!=n[0])throw new fe(2,1,1004,t);if(2>(n=n.slice(1).join(":").split(",")).length)throw new fe(2,1,1004,t);var r=n[0];n=e.decodeURIComponent(n.slice(1).join(","));var i=null;if(1<(r=r.split(";")).length&&(i=r[1]),"base64"==i)t=ht(n).buffer;else{if(i)throw new fe(2,1,1005,t);t=ot(n)}return{data:t,contentType:r[0]}},Pe("data",Ji),V("shaka.hls.HlsParser",ea),(n=ea.prototype).configure=function(e){this.c=e},n.start=function(e,t){var n=this;return f(function r(){var i,a;return P(r,function(r){switch(r.j){case 1:return n.g=t,E(r,pa(n,e),2);case 2:return i=r.o,n.v=i.uri,E(r,function(e,t){return f(function n(){var r,i,a,s,o,u,l,c,h,p,m;return P(n,function(n){switch(n.j){case 1:if(0!=(r=Yi(e.s,t,e.v)).type)throw new fe(2,4,4022);return E(n,function(e,t){return f(function n(){var r,i,a,s,o,u,l,c,h,p,m,v;return P(n,function(n){switch(n.j){case 1:return r=Hi,i=Kt,a=t.a,s=r.lb(t.a,"EXT-X-MEDIA"),o=s.filter(function(e){return"SUBTITLES"==ha(e,"TYPE")}.bind(e)),u=o.map(function(e){var t=this;return f(function n(){var r;return P(n,function(n){switch(n.j){case 1:return T(n,2),E(n,function(e,t){return f(function n(){var r;return P(n,function(n){switch(n.j){case 1:return ha(t,"TYPE"),E(n,ia(e,t,[]),2);case 2:return r=n.o,n.return(r.stream)}})})}(t,e),4);case 4:return n.return(n.o);case 2:if(r=I(n),t.c.hls.ignoreTextStreamFailures)return n.return(null);throw r}})})}.bind(e)),l=s.filter(function(e){return"CLOSED-CAPTIONS"==ha(e,"TYPE")}),function(e,t){for(var n=d(t),r=n.next();!r.done;r=n.next()){ha(r=r.value,"TYPE");var i=Vi(r,"LANGUAGE")||"und";i=On(i);var a=ha(r,"GROUP-ID");r=ha(r,"INSTREAM-ID"),e.l.get(a)||e.l.set(a,new Map),e.l.get(a).set(r,i)}}(e,l),E(n,Promise.all(u),2);case 2:return c=n.o,h=r.lb(a,"EXT-X-STREAM-INF"),p=h.map(function(e){return function(e,t,n){return f(function r(){var i,a,s,o,u,l,c,h,p,m,v,y,g,_,b,w,S,T,C,k,I,A,L,x,R,N,M;return P(r,function(r){switch(r.j){case 1:return i=Wt,a=Hi,s=Vi(t,"CODECS","avc1.42E01E,mp4a.40.2"),o=function(e){for(var t=new Set,n=[],r=(e=d(e)).next();!r.done;r=e.next()){var i=Ze(r=r.value)[0];t.has(i)||(n.push(r),t.add(i))}return n}(s.split(/\s*,\s*/)),u=t.getAttribute("RESOLUTION"),c=l=null,h=Vi(t,"FRAME-RATE"),p=Number(ha(t,"BANDWIDTH")),u&&(m=u.value.split("x"),l=m[0],c=m[1]),v=(v=(v=a.lb(n.a,"EXT-X-MEDIA")).filter(function(e){return"CLOSED-CAPTIONS"!=ha(e,"TYPE")})).filter(function(e){var t=Vi(e,"URI")||"";return"SUBTITLES"==(Vi(e,"TYPE")||"")||""!=t}),y=Vi(t,"AUDIO"),g=Vi(t,"VIDEO"),y?v=a.Hc(v,"AUDIO",y):g&&(v=a.Hc(v,"VIDEO",g)),(_=da(i.qa,o))&&((b=Vi(t,"SUBTITLES"))&&((w=a.Hc(v,"SUBTITLES",b)).length&&(S=e.D.get(w[0].id))&&(S.stream.codecs=_)),Ie(o,_)),T=v.map(function(e){return ia(this,e,o)}.bind(e)),C=[],k=[],E(r,Promise.all(T),2);case 2:if(A=(A=r.o).filter(function(e){return null!=e}),y?C=A:g&&(k=A),x=!1,C.length||k.length?C.length?(N=ha(t,"URI"),M=C[0].tc,N==M?(L=i.Ab,x=!0):L=i.Na):L=i.Ab:1==o.length?(R=da(i.Na,o),L=u||h||R?i.Na:i.Ab):(L=i.Na,o=[o.join(",")]),x){r.A(3);break}return E(r,function(e,t,n,r){return f(function i(){var a,s,o,u,l;return P(i,function(i){switch(i.j){case 1:return a=Wt,s=ha(t,"URI"),e.a.has(s)?i.return(e.a.get(s)):(o=Vi(t,"CLOSED-CAPTIONS"),u=null,r==a.Na&&o&&"NONE"!=o&&(u=e.l.get(o)),E(i,aa(e,s,n,r,"und",!1,null,null,u),2));case 2:return null==(l=i.o)?i.return(null):e.a.has(s)?i.return(e.a.get(s)):(e.a.set(s,l),i.return(l))}})})}(e,t,o,L),4);case 4:I=r.o;case 3:if(I)I.stream.type==i.Ab?C=[I]:k=[I];else if(null===I)return r.return([]);return k&&na(k),C&&na(C),r.return(function(e,t,n,r,i,a,s){n.forEach(function(e){(e=e.stream)&&(e.width=Number(i)||void 0,e.height=Number(a)||void 0,e.frameRate=Number(s)||void 0)}.bind(e)),t.length||(t=[null]),n.length||(n=[null]);for(var o=[],u=(t=d(t)).next();!u.done;u=t.next()){u=u.value;for(var l=d(n),c=l.next();!c.done;c=l.next()){var h=c.value;c=u?u.stream:null;var f=h?h.stream:null,p=u?u.drmInfos:null,m=h?h.drmInfos:null;h=(h?h.tc:"")+" - "+(u?u.tc:"");var v=void 0;if(c&&f){if(p.length&&m.length&&!(0<Rt(p,m).length))continue;v=Rt(p,m)}else c?v=p:f&&(v=m);e.T.has(h)||(c=ra(e,c,f,r,v),o.push(c),e.T.add(h))}}return o}(e,C,k,p,l,c,h))}})})}(this,e,t)}.bind(e)),E(n,Promise.all(p),3);case 3:return m=n.o,v=(v=m.reduce(i.yc,[])).filter(function(e){return null!=e}),n.return({startTime:0,variants:v,textStreams:c.filter(function(e){return null!=e})})}})})}(e,r),2);case 2:if(i=n.o,!e.g)throw new fe(2,7,7001);if(e.W&&0==i.variants.length)throw new fe(2,4,4034);e.g.filterAllPeriods([i]),a=1/0,s=0,o=1/0;for(var v=d(e.a.values()),y=v.next();!y.done;y=v.next())u=y.value,a=Math.min(a,u.Uc),s=Math.max(s,u.Uc),"text"!=u.stream.type&&(o=Math.min(o,u.duration));if(e.f!=wa.Oa?(e.b=new ki(0,3*e.C),e.b.Rb(!1)):(e.b=new ki(null,0),e.b.Rb(!0)),ua(e),e.f!=wa.Oa){for(e.P=e.G,l=wa,e.f==l.td&&(c=e.b.pc,isNaN(e.c.availabilityWindowOverride)||(c=e.c.availabilityWindowOverride),e.b.md(c)),h=0;95443.7176888889<=s;)h+=95443.7176888889,s-=95443.7176888889;if(h)for(y=(v=d(e.a.values())).next();!y.done;y=v.next())95443.7176888889>(p=y.value).Uc&&(p.stream.presentationTimeOffset=-h,p.Pb.offset(h))}else for(e.b.wa(o),e.b.offset(-a),y=(v=d(e.a.values())).next();!y.done;y=v.next())(m=y.value).stream.presentationTimeOffset=a,m.Pb.offset(-a),ci(m.Pb,o);e.m={presentationTimeline:e.b,periods:[i],offlineSessionIds:[],minBufferTime:0},S(n)}})})}(n,i.data),3);case 3:return 0<(a=n.P)&&n.h.O(a),r.return(n.m)}})})},n.stop=function(){this.h&&(this.h.stop(),this.h=null);var e=[];return this.i&&(e.push(this.i.destroy()),this.i=null),this.c=this.g=null,this.D.clear(),this.T.clear(),this.a.clear(),this.m=null,Promise.all(e)},n.update=function(){if(this.f!=wa.Oa){for(var e=[],t=d(this.a.values()),n=t.next();!n.done;n=t.next())e.push(ta(this,n.value));return Promise.all(e)}},n.onExpirationUpdated=function(){};var ma={audio:[/^vorbis$/,/^opus$/,/^flac$/,/^mp4a/,/^[ae]c-3$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av1$/],text:[/^vtt$/,/^wvtt/,/^stpp/]},va={audio:{mp4:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",ts:"video/mp2t"},video:{mp4:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",ts:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",vtt:"text/vtt",ttml:"application/ttml+xml"}};function ya(e,t){e.f=t,e.b&&e.b.Rb(e.f==wa.Oa),e.f!=wa.Oa||e.h.stop()}function ga(e,t,n){if(!e.i)throw new fe(2,7,7001);return t=e.g.networkingEngine.request(n,t),xe(e.i,t),t.promise}var _a={"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=ha(e,"METHOD");return nr("HLS SAMPLE-AES-CENC","SAMPLE-AES-CENC will no longer be supported, see Issue #1227"),["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].includes(t)?(t=ha(e,"URI"),t=Ji.parse(t),t=qt("com.widevine.alpha",[{initDataType:"cenc",initData:t=new Uint8Array(t.data)}]),(e=Vi(e,"KEYID"))&&(t.keyIds=[e.substr(2).toLowerCase()]),t):null}},ba="VOD",wa={Oa:ba,ke:"EVENT",td:"LIVE"};function Ea(){this.a=new Map}function Sa(e,t,n){Ta(e,t).text=n}function Ta(e,t){return e.a.has(t)||e.a.set(t,new Ca),e.a.get(t)}function Ca(){this.text=this.variant=null}function ka(e,t){this.a=e,this.b=new Set([e]);for(var n=d(t=t||[]),r=n.next();!r.done;r=n.next())this.add(r.value)}function Ia(e,t){var n;if(!(n=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(n=e.audio&&t.audio)){n=e.audio;var r=t.audio;n=!(n.channelsCount==r.channelsCount&&Aa(n,r)&&La(n.roles,r.roles))}return!n&&(n=e.video&&t.video)&&(n=!(Aa(n=e.video,r=t.video)&&La(n.roles,r.roles))),!n}function Aa(e,t){if(e.mimeType!=t.mimeType)return!1;var n=e.codecs.split(",").map(function(e){return Ze(e)[0]}),r=t.codecs.split(",").map(function(e){return Ze(e)[0]});if(n.length!=r.length)return!1;n.sort(),r.sort();for(var i=0;i<n.length;i++)if(n[i]!=r[i])return!1;return!0}function La(e,t){var n=new Set(e),r=new Set(t);if(n.delete("main"),r.delete("main"),n.size!=r.size)return!1;for(var i=(n=d(n)).next();!i.done;i=n.next())if(!r.has(i.value))return!1;return!0}function xa(e){this.a=e,this.b=new Ra(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0)}function Ra(e,t,n){this.c=e,this.b=t,this.a=n}function Na(e,t){this.a=Pa,this.b=(new Map).set(Pa,t).set(Ma,e)}Ci.ed("m3u8",ea),Ci.Nb("application/x-mpegurl",ea),Ci.Nb("application/vnd.apple.mpegurl",ea),ka.prototype.add=function(e){return!!Ia(this.a,e)&&(this.b.add(e),!0)},ka.prototype.values=function(){return this.b.values()},xa.prototype.create=function(e){var t=this,n=e.filter(function(e){return Ia(t.a,e)});return n.length?new ka(n[0],n):this.b.create(e)},Ra.prototype.create=function(e){var t=[];t=function(e,t){var n=Un(On(t),e.map(function(e){return Dn(e)}));return n?e.filter(function(e){return n==Dn(e)}):[]}(e,this.c);var n=e.filter(function(e){return e.primary});for(t=t.length?t:n.length?n:e,this.b&&((e=function(e,t){return e.filter(function(e){var n=e.audio;return e=e.video,n&&0<=n.roles.indexOf(t)||e&&0<=e.roles.indexOf(t)})}(t,this.b)).length&&(t=e)),this.a&&((e=Xn(t,this.a)).length&&(t=e)),e=new ka(t[0]),n=(t=d(t)).next();!n.done;n=t.next())n=n.value,Ia(e.a,n)&&e.add(n);return e};var Ma=0,Pa=1;function Oa(e,t){this.f=e,this.g=Ua(e),this.b=e.a.currentTime,this.c=Date.now()/1e3,this.h=t,this.a=function(){}}function Da(e){this.a=e}function Ua(e){if(e.a.paused||0==e.a.playbackRate||null==e.a.buffered)var t=!1;else e:{t=e.a.buffered,e=e.a.currentTime;for(var n=0;n<t.length;n++){var r=t.start(n),i=t.end(n);if(!(e<r||e>i-.5)){t=!0;break e}}t=!1}return t}function Fa(e,t,n,r,i){var a=this;this.a=e,this.v=t,this.s=n,this.l=i,this.f=new He,this.i=!1,this.m=e.readyState,this.c=!1,this.b=r,this.h=!1,this.f.w(e,"waiting",function(){return Ba(a)}),this.g=new ce(function(){Ba(a)}).La(.25)}function Ba(e){if(0!=e.a.readyState){if(e.a.seeking){if(!e.i)return}else e.i=!1;if(!e.a.paused){e.a.readyState!=e.m&&(e.c=!1,e.m=e.a.readyState);var t=e.s.smallGapLimit,n=e.a.currentTime,r=e.a.buffered;e:{if(r&&r.length&&!(1==r.length&&1e-6>r.end(0)-r.start(0)))for(var i=tt("Edge/")||tt("Trident/")||tt("Tizen")||tt("CrKey")?.5:.1,a=0;a<r.length;a++)if(r.start(a)>n&&(0==a||r.end(a-1)-n<=i)){i=a;break e}i=null}if(null==i)e.b&&(r=Ua(n=(e=e.b).f),n=n.a.currentTime,i=Date.now()/1e3,e.b==n&&e.g==r||(e.c=i,e.b=n,e.g=r),(n=i-e.c)>=e.h&&r&&e.a(e.b,n));else if(0!=i||e.h){a=r.start(i);var s=e.v.za();if(!(a>=s)){t=(s=a-n)<=t;var o=!1;.001>s||(t||e.c||(e.c=!0,(n=new Ee("largegap",{currentTime:n,gapSize:s})).cancelable=!0,e.l(n),e.s.jumpLargeGaps&&!n.defaultPrevented&&(o=!0)),!t&&!o)||(0!=i&&r.end(i-1),e.a.currentTime=a)}}}}}function Va(e){var t=this;this.c=e,this.a=new Set,this.b=new ce(function(){ja(t,!1)}).La(.25)}function ja(e,t){for(var n=d(e.a),r=n.next();!r.done;r=n.next())r.value.g(e.c.currentTime,t)}function Ha(e){for(var t=[],n=(e=d(e)).next();!n.done;n=e.next())for(var r=(n=d(n.value.variants)).next();!r.done;r=n.next())t.push(r.value);return t}function Ka(e,t){for(var n=null,r=d(e),i=r.next();!i.done;i=r.next())t>=(i=i.value).startTime&&(n=i);return n}function Ga(e){this.c=e,this.a=null,this.b=function(){}}function qa(e){var t=this;this.a=e,this.f=!1,this.c=this.a.ec(),this.b=new ce(function(){t.a.Id(.25*t.c)})}function Wa(e){e.b.stop();var t=e.f?0:e.c;if(0<=t)try{return void(e.a.ec()!=t&&e.a.ld(t))}catch(e){}e.b.La(.25),0!=e.a.ec()&&e.a.ld(0)}function za(e,t,n){this.a=e,this.f=t,this.g=n,this.h=!1,this.b=new He,this.c=new Qa(e),0<e.readyState?$a(this,n):Xa(this,n)}function Ya(e){return e.h?e.a.currentTime:e.g}function Xa(e,t){e.g=t,e.b.ea(e.a,"loadedmetadata"),e.b.da(e.a,"loadedmetadata",function(){$a(e,t)})}function $a(e,t){.001>Math.abs(e.a.currentTime-t)?Za(e):(e.b.da(e.a,"seeking",function(){Za(e)}),Ja(e.c,0==e.a.currentTime?t:e.a.currentTime))}function Za(e){e.h=!0,e.b.w(e.a,"seeking",function(){return e.f()})}function Qa(e){var t=this;this.b=e,this.h=10,this.g=this.f=this.c=0,this.a=new ce(function(){0>=t.c?t.a.stop():t.b.currentTime!=t.f?t.a.stop():(t.b.currentTime=t.g,t.c--)})}function Ja(e,t){e.f=e.b.currentTime,e.g=t,e.c=e.h,e.b.currentTime=t,e.a.La(.1)}function es(e){function t(){null==n.c?n.f=!0:(n.b.da(n.a,"seeking",function(){n.f=!0}),n.a.currentTime=n.c)}var n=this;this.a=e,this.f=!1,this.c=null,this.b=new He,0==this.a.readyState?this.b.da(this.a,"loadedmetadata",t):t()}function ts(e,t,n,r,i,a){var s=this;this.b=e,this.a=t.presentationTimeline,this.C=t.minBufferTime||0,this.g=n,this.v=i,this.l=null,this.f=new Fa(e,t.presentationTimeline,n,function(e,t){if(!t.stallEnabled)return null;var n=t.stallSkip,r=new Oa(new Da(e),t.stallThreshold);return function(e,t){e.a=t}(r,function(){e.currentTime+=n}),r}(e,n),a),this.c=new za(e,function(){var e=s.f;e.i=!0,e.h=!1,e.c=!1;var t=Ya(s.c);return e=rs(s,t),.001<Math.abs(e-t)&&(t=(new Date).getTime()/1e3,!s.l||s.l<t-1)?(s.l=t,0<(t=s.c).a.readyState?Ja(t.c,e):Xa(t,e),e=void 0):(s.v(),e=void 0),e},function(e,t){return null==t?t=1/0>e.a.Y()?e.a.mb():e.a.za():0>t&&(t=e.a.za()+t),ns(e,is(e,t))}(this,r)),this.i=new ce(function(){if(0!=s.b.readyState&&!s.b.paused){var e=s.b.currentTime,t=s.a.mb(),n=s.a.za();3>n-t&&(t=n-3),e<t&&(e=rs(s,e),s.b.currentTime=e)}}).La(.25)}function ns(e,t){var n=e.a.Y();return t>=n?n-e.g.durationBackoff:t}function rs(e,t){var n=Vt.bind(null,e.b.buffered),r=Math.max(e.C,e.g.rebufferingGoal),i=e.g.safeSeekOffset,a=e.a.mb(),s=e.a.za(),o=e.a.Y();3>s-a&&(a=s-3);var u=e.a.Gb(r),l=e.a.Gb(i);return r=e.a.Gb(r+i),t>=o?ns(e,t):t>s?s:t<a?n(l)?l:r:t>=u||n(t)?t:r}function is(e,t){var n=e.a.mb();return t<n?n:t>(n=e.a.za())?n:t}function as(){this.b=function(){},this.a=new Set}function ss(e){var t=this;this.h=e,this.f=new Map,this.a=function(){},this.b=function(){},this.c=function(){},this.i=[{bb:null,ab:us,Ua:function(e,n){return t.a(e,n)}},{bb:os,ab:us,Ua:function(e,n){return t.a(e,n)}},{bb:ls,ab:us,Ua:function(e,n){return t.a(e,n)}},{bb:us,ab:os,Ua:function(e,n){return t.b(e,n)}},{bb:us,ab:ls,Ua:function(e,n){return t.b(e,n)}},{bb:os,ab:ls,Ua:function(e,n){return t.c(e,n)}},{bb:ls,ab:os,Ua:function(e,n){return t.c(e,n)}}]}Oa.prototype.release=function(){this.f=null,this.a=function(){}},Fa.prototype.release=function(){this.f&&(this.f.release(),this.f=null),null!=this.g&&(this.g.stop(),this.g=null),this.b&&(this.b.release(),this.b=null),this.a=this.v=this.l=null},Fa.prototype.Zc=function(){this.h=!0,Ba(this)},Va.prototype.release=function(){this.b.stop();for(var e=d(this.a),t=e.next();!t.done;t=e.next())t.value.release();this.a.clear()},Ga.prototype.release=function(){this.a=this.c=null,this.b=function(){}},Ga.prototype.g=function(e){var t=this.a,n=this.c.periods;t!=(e=Ka(n,e)||n[0])&&this.b(e),this.a=e},qa.prototype.release=function(){this.b&&(this.b.stop(),this.b=null),this.a=null},qa.prototype.set=function(e){this.c=e,Wa(this)},za.prototype.release=function(){this.b&&(this.b.release(),this.b=null),null!=this.c&&(this.c.release(),this.c=null),this.f=function(){},this.a=null},Qa.prototype.release=function(){this.a&&(this.a.stop(),this.a=null),this.b=null},es.prototype.release=function(){this.b&&(this.b.release(),this.b=null),this.a=null},es.prototype.m=function(e){this.c=this.f?this.c:e},es.prototype.h=function(){return(this.f?this.a.currentTime:this.c)||0},es.prototype.s=function(){},ts.prototype.release=function(){this.c&&(this.c.release(),this.c=null),this.f&&(this.f.release(),this.f=null),this.i&&(this.i.stop(),this.i=null),this.b=this.c=this.a=this.g=null,this.v=function(){}},ts.prototype.m=function(e){var t=this.c;0<t.a.readyState?Ja(t.c,e):Xa(t,e)},ts.prototype.h=function(){var e=Ya(this.c);return 0<this.b.readyState&&!this.b.paused?is(this,e):e},ts.prototype.s=function(){this.f.Zc()},as.prototype.release=function(){this.b=function(){},this.a.clear()},ss.prototype.release=function(){this.h=null,this.f.clear(),this.a=function(){},this.b=function(){},this.c=function(){}},ss.prototype.g=function(e,t){for(var n=d(this.h.a),r=n.next();!r.done;r=n.next()){r=r.value;var i=this.f.get(r),a=e<r.startTime?os:e>r.endTime?ls:us;this.f.set(r,a);for(var s=d(this.i),o=s.next();!o.done;o=s.next())(o=o.value).bb==i&&o.ab==a&&o.Ua(r,t)}};var os=1,us=2,ls=3;function cs(e,t){this.a=t,this.c=e,this.g=null,this.l=1,this.v=Promise.resolve(),this.h=[],this.i=new Map,this.b=new Map,this.s=!1,this.G=null,this.D=this.f=this.m=!1,this.C=0}function ds(e){return fs(e,"audio")}function hs(e){return fs(e,"video")}function fs(e,t){var n=e.b.get(t);return n?n.Ia||n.stream:null}function ps(e,t){return f(function n(){var r,i,a,s,o,u,l,c,d;return P(n,function(n){switch(n.j){case 1:return r=Wt,E(n,Ln(e.a.I,r.qa),2);case 2:return e.C++,e.D=!1,i=e.C,a=e.a.I,s=new Map,o=new Set,s.set(r.qa,t),o.add(t),E(n,a.init(s,!1),3);case 3:return e.f?n.return():E(n,Es(e,o),4);case 4:if(e.f)return n.return();u=e.a.I.g.isTextVisible()||e.g.alwaysStreamText,e.C!=i||e.b.has(r.qa)||e.D||!u||(l=e.a.Sa(),c=Ls(e,l),d=bs(t,c,0),e.b.set(r.qa,d),Ms(e,d,0)),S(n)}})})}function ms(e,t){var n=e.b.get("video");if(n){var r=n.stream;if(r)if(t){var i=r.trickModeVideo;i&&!n.Ia&&(ys(e,i,!1,0,!1),n.Ia=r)}else(r=n.Ia)&&(n.Ia=null,ys(e,r,!0,0,!1))}}function vs(e,t,n,r){t.video&&ys(e,t.video,n,r,!1),t.audio&&ys(e,t.audio,n,r,!1)}function ys(e,t,n,r,i){var a=e.b.get(t.type);if(!a&&"text"==t.type&&e.g.ignoreTextStreamFailures)ps(e,t);else if(a){var s=xs(e,t),o=Array.from(e.b.values()).every(function(e){return e.pa==a.pa});n&&s!=a.pa&&o?e.b.forEach(function(t){gs(e,t)}):(a.Ia&&(t.trickModeVideo?(a.Ia=t,t=t.trickModeVideo):a.Ia=null),(o=e.h[s])&&o.zb&&(o=e.i.get(t.id))&&o.zb&&(a.stream!=t||i)&&("text"==t.type&&Sn(e.a.I,$e(t.mimeType,t.codecs)),a.stream=t,a.hc=!0,function(e,t,n){if(!t.Kb)return!1;var r=e.a.Sa(),i=kn(e.a.I,t.type);if(null==(n=(n=Cs(e,t,r,i,n))&&n.a?n.a-n.b:null))return!1;var a=t.stream.initSegmentReference;return a&&(n+=(a.a?a.a-a.b:null)||0),a=e.a.getBandwidthEstimate(),8*n/a<i-r-Math.max(e.c.minBufferTime||0,e.g.rebufferingGoal)||t.Kb.b.a>n}(e,a,s)&&a.Kb.abort(),n&&(a.Pa?a.uc=!0:a.Ha?(a.Ma=!0,a.Zb=r,a.uc=!0):(Ps(a),Ns(e,a,!0,r).catch(function(t){e.a&&e.a.onError(t)})))))}}function gs(e,t){t.Pa||t.Ma||(t.Ha?(t.Ma=!0,t.Zb=0):null==Cn(e.a.I,t.type)?null==t.Da&&Ms(e,t,0):(Ps(t),Ns(e,t,!1,0).catch(function(t){e.a&&e.a.onError(t)})))}function _s(e,t,n,r,i){return f(function a(){var s,o,u,l,c,d,h;return P(a,function(a){switch(a.j){case 1:return s=e.a.Sa(),o=Ls(e,s),u=Wt,l=new Map,c=new Set,t&&(l.set(u.Ab,t),c.add(t)),n&&(l.set(u.Na,n),c.add(n)),r&&(l.set(u.qa,r),c.add(r)),d=e.a.I,h=e.g.forceTransmuxTS,E(a,d.init(l,h),2);case 2:return e.f?a.return():(function(e){var t=e.c.presentationTimeline.Y();1/0>t?e.a.I.wa(t):e.a.I.wa(Math.pow(2,32))}(e),E(a,Es(e,c),3));case 3:if(e.f)return a.return();l.forEach(function(t,n){if(!e.b.has(n)){var r=bs(t,o,i);e.b.set(n,r),Ms(e,r,0)}}),S(a)}})})}function bs(e,t,n){return{stream:e,type:e.type,pb:null,Aa:null,Ia:null,hc:!0,pa:t,endOfStream:!1,Ha:!1,Da:null,Ma:!1,Zb:0,uc:!1,Pa:!1,dd:!1,Ib:!1,Zd:n||0,Kb:null}}function ws(e,t){var n=e.h[t];if(n)return n.promise;n={promise:new pe,zb:!1},e.h[t]=n;for(var r=new Set,i=d(e.c.periods[t].variants),a=i.next();!a.done;a=i.next())(a=a.value).video&&r.add(a.video),a.video&&a.video.trickModeVideo&&r.add(a.video.trickModeVideo),a.audio&&r.add(a.audio);for(a=(i=d(e.c.periods[t].textStreams)).next();!a.done;a=i.next())r.add(a.value);return e.v=e.v.then(function(){if(!this.f)return Es(this,r)}.bind(e)).then(function(){this.f||(this.h[t].promise.resolve(),this.h[t].zb=!0)}.bind(e)).catch(function(e){this.f||(this.h[t].promise.catch(function(){}),this.h[t].promise.reject(),delete this.h[t],this.a.onError(e))}.bind(e)),n.promise}function Es(e,t){return f(function n(){var r,i,a,s,o,u,l;return P(n,function(n){switch(n.j){case 1:r=[];for(var c=d(t),h=c.next();!h.done;h=c.next())i=h.value,(a=e.i.get(i.id))?r.push(a.promise):(e.i.set(i.id,{promise:new pe,zb:!1}),r.push(i.createSegmentIndex()));return T(n,2),E(n,Promise.all(r),4);case 4:if(e.f)return n.return();k(n,3);break;case 2:if(s=I(n),e.f)return n.return();for(h=(n=d(t)).next();!h.done;h=n.next())o=h.value,e.i.get(o.id).promise.catch(function(){}),e.i.get(o.id).promise.reject(),e.i.delete(o.id);throw s;case 3:for(h=(c=d(t)).next();!h.done;h=c.next())u=h.value,(l=e.i.get(u.id)).zb||(l.promise.resolve(),l.zb=!0);S(n)}})})}function Ss(e,t){if(!e.f&&!t.Ha&&null!=t.Da&&!t.Pa)if(t.Da=null,t.Ma)Ns(e,t,t.uc,t.Zb);else{try{var n=function(e,t){if(Is(t))return e.a.I.rc(t.stream.originalId||""),null;var n=e.a.Sa(),r=Ts(e,t,n),i=xs(e,t.stream),a=Ls(e,r),s=function(e,t,n){return"text"==t?null==(e=e.a).b||e.b<n?0:e.b-Math.max(n,e.a):jt(e=In(e,t),n)}(e.a.I,t.type,n),o=Math.max(e.c.minBufferTime||0,e.g.rebufferingGoal,e.g.bufferingGoal)*e.l;if(r>=e.c.presentationTimeline.Y())return t.endOfStream=!0,"video"==t.type&&(r=e.b.get("text"))&&"application/cea-608"==r.stream.mimeType&&(r.endOfStream=!0),null;if(t.endOfStream=!1,t.pa=a,a!=i)return null;if(s>=o)return.5;if(a=kn(e.a.I,t.type),!(a=Cs(e,t,n,a,i)))return 1;var u=1/0;return Array.from(e.b.values()).forEach(function(t){Is(t)||(t=Ts(e,t,n),u=Math.min(u,t))}),r>=u+e.c.presentationTimeline.a?1:(t.Zd=0,function(e,t,n,r,i){var a=e.c.periods[r],s=t.stream,o=e.c.presentationTimeline.Y(),u=e.c.periods[r+1];r=function(e,t,n,r,i){return t.hc?(n=function(e,t,n,r,i){return"text"==t?(e.a.m=n,(e=e.a).f=r,e.h=i,Promise.resolve()):Promise.all([xn(e,t,e.oe.bind(e,t)),xn(e,t,e.Sf.bind(e,t,n)),xn(e,t,e.Pf.bind(e,t,r,i))])}(e.a.I,t.type,e.c.periods[n].startTime-t.stream.presentationTimeOffset,r,i),t.stream.initSegmentReference?(e=Rs(e,t,t.stream.initSegmentReference).then(function(e){if(!this.f)return An(this.a.I,t.type,e,null,null,t.stream.closedCaptions&&0<t.stream.closedCaptions.size)}.bind(e)).catch(function(e){return t.hc=!0,Promise.reject(e)}),Promise.all([n,e])):n):Promise.resolve()}(e,t,r,Math.max(0,a.startTime-.1),u?u.startTime+.01:o),t.Ha=!0,t.hc=!1,o=Rs(e,t,i),Promise.all([r,o]).then(function(e){if(!this.f&&!this.m)return function(e,t,n,r,i,a,s){var o=i.closedCaptions&&0<i.closedCaptions.size;return null!=i.emsgSchemeIdUris&&0<i.emsgSchemeIdUris.length&&(new Hr).fa("emsg",e.M.bind(e,r,a,i.emsgSchemeIdUris)).parse(s),function(e,t,n){var r=Math.max(e.g.bufferBehind,e.c.presentationTimeline.a),i=Cn(e.a.I,t.type);return null==i?Promise.resolve():0>=(n=n-i-r)?Promise.resolve():e.a.I.remove(t.type,i,i+n).then(function(){}.bind(e))}(e,t,n).then(function(){if(!this.f)return An(this.a.I,t.type,s,a.startTime+r.startTime,a.endTime+r.startTime,o)}.bind(e)).then(function(){if(!this.f)return t.pb=i,t.Aa=a,Promise.resolve()}.bind(e))}(this,t,n,a,s,i,e[1])}.bind(e)).then(function(){this.f||this.m||(t.Ha=!1,t.dd=!1,t.Ma||this.a.Zc(),Ms(this,t,0),function(e,t){if(!e.s){var n=Array.from(e.b.values());if(1==n.length&&"text"==n[0].type||(e.s=n.every(function(e){return"text"==e.type||!e.Ma&&!e.Pa&&e.Aa})),e.s){for(n=xs(e,t),e.h[n]||ws(e,n).then(function(){this.f||this.a.Kd()}.bind(e)).catch(Kt.ic),n=0;n<e.c.periods.length;++n)ws(e,n).catch(Kt.ic);e.a.sf&&e.a.sf()}}}(this,s))}.bind(e)).catch(function(e){this.f||this.m||(t.Ha=!1,"text"==t.type&&this.g.ignoreTextStreamFailures?this.b.delete("text"):7001==e.code?(t.Ha=!1,t.Da=null,Ms(this,t,0)):3017==e.code?function(e,t,n){if(!Array.from(e.b.values()).some(function(e){return e!=t&&e.dd})){var r=Math.round(100*e.l);if(20<r)e.l-=.2;else{if(!(4<r))return t.Ib=!0,e.m=!0,void e.a.onError(n);e.l-=.04}t.dd=!0}Ms(e,t,4)}(this,t,e):(t.Ib=!0,e.severity=2,Os(this,e)))}.bind(e))}(e,t,n,i,a),null)}(e,t);null!=n&&(Ms(e,t,n),t.Ib=!1)}catch(t){return void Os(e,t)}n=Array.from(e.b.values()),function(e,t){var n=xs(e,t.stream);if(t.pa!=n){var r=t.pa,i=Array.from(e.b.values());i.every(function(e){return e.pa==r||Is(e)})&&i.every(As)&&ws(e,r).then(function(){if(!this.f&&i.every(function(e){var t=As(e),n=xs(this,e.stream);return!!Is(e)||t&&e.pa==r&&n!=r}.bind(this))){var e=this.c.periods[r],t=this.a.Ld(e),n=new Map;t.variant&&t.variant.video&&n.set("video",t.variant.video),t.variant&&t.variant.audio&&n.set("audio",t.variant.audio),t.text&&n.set("text",t.text);var a=d(this.b.keys());for(t=a.next();!t.done;t=a.next())if(t=t.value,!n.has(t)&&"text"!=t)return void this.a.onError(new fe(2,5,5005));for(t=(a=d(Array.from(n.keys()))).next();!t.done;t=a.next())if(t=t.value,!this.b.has(t)){if("text"!=t)return void this.a.onError(new fe(2,5,5005));_s(this,null,null,n.get("text"),e.startTime),n.delete(t)}for(t=(e=d(Array.from(this.b.keys()))).next();!t.done;t=e.next())t=t.value,(a=n.get(t))?(ys(this,a,!1,0,!1),Ms(this,this.b.get(t),0)):this.b.delete(t);this.a.Kd()}}.bind(e)).catch(Kt.ic)}}(e,t),e.s&&n.every(function(e){return e.endOfStream})&&e.a.I.endOfStream().then(function(){if(!this.f){var e=this.a.I.Y();0!=e&&e<this.c.presentationTimeline.Y()&&this.c.presentationTimeline.wa(e)}}.bind(e))}}function Ts(e,t,n){return t.pb&&t.Aa?(n=xs(e,t.pb),e.c.periods[n].startTime+t.Aa.endTime):Math.max(n,t.Zd)}function Cs(e,t,n,r,i){if(t.Aa&&t.stream==t.pb)return ks(e,t,i,t.Aa.position+1);if(t.Aa?(n=xs(e,t.pb),n=t.stream.findSegmentPosition(Math.max(0,e.c.periods[n].startTime+t.Aa.endTime-e.c.periods[i].startTime))):n=t.stream.findSegmentPosition(Math.max(0,(r||n)-e.c.periods[i].startTime)),null==n)return null;var a=null;return null==r&&(a=ks(e,t,i,Math.max(0,n-1))),a||ks(e,t,i,n)}function ks(e,t,n,r){return n=e.c.periods[n],(t=t.stream.getSegmentReference(r))?(e=(r=e.c.presentationTimeline).Hb(),r=r.nb(),n.startTime+t.endTime<e||n.startTime+t.startTime>r?null:t):null}function Is(e){return"text"==e.type&&"application/cea-608"==e.stream.mimeType}function As(e){return!e.Ha&&null==e.Da&&!e.Ma&&!e.Pa}function Ls(e,t){var n=Ka(e.c.periods,t+zt);return n?e.c.periods.indexOf(n):0}function xs(e,t){for(var n=e.c.periods,r=0;r<n.length;r++){for(var i=n[r],a=new Set,s=d(i.variants),o=s.next();!o.done;o=s.next())(o=o.value).audio&&a.add(o.audio),o.video&&a.add(o.video),o.video&&o.video.trickModeVideo&&a.add(o.video.trickModeVideo);for(s=(i=d(i.textStreams)).next();!s.done;s=i.next())a.add(s.value);if(a.has(t))return r}return-1}function Rs(e,t,n){return n=Ii(n.c(),n.b,n.a,e.g.retryParameters),e=e.a.rb.request(1,n),t.Kb=e,e.promise.then(function(e){return t.Kb=null,e.data})}function Ns(e,t,n,r){return f(function i(){var a,s,o;return P(i,function(i){switch(i.j){case 1:return t.Ma=!1,t.uc=!1,t.Zb=0,t.Pa=!0,r?(s=e.a.Sa(),o=e.a.I.Y(),a=e.a.I.remove(t.type,s+r,o)):a=Ln(e.a.I,t.type).then(function(){if(!this.f&&n)return this.a.I.flush(t.type)}.bind(e)),E(i,a,2);case 2:if(e.f)return i.return();t.pb=null,t.Aa=null,t.Pa=!1,t.endOfStream=!1,Ms(e,t,0),S(i)}})})}function Ms(e,t,n){t.Da=new le(function(){return f(function n(){var r;return P(n,function(n){switch(n.j){case 1:return T(n,2),E(n,Ss(e,t),4);case 4:k(n,0);break;case 2:r=I(n),e.a&&e.a.onError(r),S(n)}})})}).O(n)}function Ps(e){null!=e.Da&&(e.Da.stop(),e.Da=null)}function Os(e,t){he(e.G).then(function(){this.f||(this.a.onError(t),t.handled||this.g.failureCallback(t))}.bind(e))}function Ds(e,t,n,r,i,a){if(200<=n&&299>=n&&202!=n)return{uri:i||r,ad:r,data:t,headers:e,fromCache:!!e["x-shaka-from-cache"]};i=null;try{i=st(t)}catch(e){}throw new fe(401==n||403==n?2:1,1,1001,r,n,i,e,a)}function Us(e,t,n,r){var i=new Us.b;Ye(t.headers).forEach(function(e,t){i.append(t,e)});var a=new Us.a,s={vd:!1,ge:!1};if(e=new me(e=Us.l(e,n,{body:t.body||void 0,headers:i,method:t.method,signal:a.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},s,r),function(){return s.vd=!0,a.abort(),Promise.resolve()}),t=t.retryParameters.timeout){var o=new ce(function(){s.ge=!0,a.abort()});o.O(t/1e3),e.finally(function(){o.stop()})}return e}function Fs(e,t,n,r){var i=new Fs.f,a=Date.now(),s=0;return new me(new Promise(function(o,u){for(var l in i.open(t.method,e,!0),i.responseType="arraybuffer",i.timeout=t.retryParameters.timeout,i.withCredentials=t.allowCrossSiteCredentials,i.onabort=function(){u(new fe(1,1,7001,e,n))},i.onload=function(t){for(var r=(t=t.target).getAllResponseHeaders().trim().split("\r\n"),i={},a=(r=d(r)).next();!a.done;a=r.next())i[(a=a.value.split(": "))[0].toLowerCase()]=a.slice(1).join(": ");try{var s=Ds(i,t.response,t.status,e,t.responseURL,n);o(s)}catch(e){u(e)}},i.onerror=function(t){u(new fe(1,1,1002,e,t,n))},i.ontimeout=function(){u(new fe(1,1,1003,e,n))},i.onprogress=function(e){var t=Date.now();(100<t-a||e.lengthComputable&&e.loaded==e.total)&&(r(t-a,e.loaded-s,e.total-e.loaded),s=e.loaded,a=t)},t.headers)i.setRequestHeader(l.toLowerCase(),t.headers[l]);i.send(t.body)}),function(){return i.abort(),Promise.resolve()})}function Bs(){this.a=this.f=this.b=0,this.c=new Map,this.g=0}function Vs(e,t){this.g=e,this.b=new Map,this.c=!1,this.f=t,this.a=new Bs}function js(e,t,n,r,i){var a=function(e,t){e.b+=t;var n=e.g;return e.g++,e.c.set(n,t),n}(e.a,r);r=e.b.get(t)||Promise.resolve(),e.b.set(t,r.then(function(){return f(function t(){var r;return P(t,function(t){switch(t.j){case 1:return E(t,function(e,t){return f(function n(){var r;return P(n,function(n){switch(n.j){case 1:return E(n,e.g.request(1,t).promise,2);case 2:return r=n.o,n.return(r.data)}})})}(e,n),2);case 2:if(r=t.o,e.c)throw new fe(2,9,7001);e.a.close(a,r.byteLength);var s=e.a;return e.f(0==s.b?0:s.f/s.b,e.a.a),t.return(i(r))}})})}))}function Hs(e,t){var n=this;this.c=e,this.b=e.objectStore(t),this.a=new pe,e.onabort=function(e){e.preventDefault(),n.a.reject()},e.onerror=function(e){e.preventDefault(),n.a.reject()},e.oncomplete=function(){n.a.resolve()}}function Ks(e,t){return new Promise(function(n,r){var i=e.b.openCursor();i.onerror=r,i.onsuccess=function(e){if(!(e=e.target.result))return n();t(e.key,e.value,e),e.continue()}})}function Gs(e){this.b=e,this.a=[]}function qs(e,t){return zs(e,t,"readonly")}function Ws(e,t){return zs(e,t,"readwrite")}function zs(e,t,n){var r=new Hs(n=e.b.transaction([t],n),t);return e.a.push(r),r.promise().then(function(){Ie(e.a,r)},function(){Ie(e.a,r)}),r}function Ys(e){this.a=new Gs(e)}function Xs(){this.a=new Map}function $s(e,t,n){if(!(e=e.a.get(t)))throw new fe(2,9,9013,"Could not find mechanism with name "+t);if(!(t=e.getCells().get(n)))throw new fe(2,9,9013,"Could not find cell with name "+n);return t}function Zs(e,t){Qs.set(e,t)}cs.prototype.destroy=function(){for(var e=d(this.b.values()),t=e.next();!t.done;t=e.next())Ps(t.value);return this.b.clear(),this.i.clear(),this.g=this.h=this.v=this.c=this.a=null,this.f=!0,Promise.resolve()},cs.prototype.configure=function(e){this.g=e,this.G=new de({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0},!0)},cs.prototype.start=function(){var e=this;return f(function t(){var n,r,i;return P(t,function(t){switch(t.j){case 1:return n=e.a.Sa(),r=Ls(e,n),(i=e.a.Ld(e.c.periods[r])).variant||i.text?E(t,_s(e,i.variant?i.variant.audio:null,i.variant?i.variant.video:null,i.text,n),2):t.return(new fe(2,5,5005));case 2:if(e.f)return t.return();e.a&&e.a.gf&&e.a.gf(),S(t)}})})},cs.prototype.M=function(e,t,n,r){var i=r.reader.bd(),a=r.reader.bd(),s=r.reader.F(),o=r.reader.F(),u=r.reader.F(),l=r.reader.F();r=r.reader.Xa(r.reader.K.byteLength-r.reader.ba()),e=e.startTime+t.startTime+o/s,n.includes(i)&&("urn:mpeg:dash:event:2012"==i?this.a.hf():this.a.onEvent(new Ee("emsg",{detail:{startTime:e,endTime:e+u/s,schemeIdUri:i,value:a,timescale:s,presentationTimeDelta:o,eventDuration:u,id:l,messageData:r}})))},V("shaka.net.HttpFetchPlugin",Us),Us.l=function(e,t,n,r,i){return f(function a(){var s,o,u,l,c,d,h,p,m,v,y,g;return P(a,function(a){switch(a.j){case 1:return s=Us.g,o=Us.c,d=c=0,h=Date.now(),T(a,2),E(a,s(e,n),4);case 4:return u=a.o,p=u.clone().body.getReader(),v=(m=u.headers.get("Content-Length"))?parseInt(m,10):0,new o({start:function(e){!function t(){return f(function n(){var r,a;return P(n,function(n){switch(n.j){case 1:return T(n,2),E(n,p.read(),4);case 4:r=n.o,k(n,3);break;case 2:return I(n),n.return();case 3:r.done||(c+=r.value.byteLength),(100<(a=Date.now())-h||r.done)&&(i(a-h,c-d,v-c),d=c,h=a),r.done?e.close():(e.enqueue(r.value),t()),S(n)}})})}()}}),E(a,u.arrayBuffer(),5);case 5:l=a.o,k(a,3);break;case 2:if(y=I(a),r.vd)throw new fe(1,1,7001,e,t);if(r.ge)throw new fe(1,1,1003,e,t);throw new fe(1,1,1002,e,y,t);case 3:return g={},u.headers.forEach(function(e,t){g[t.trim()]=e}),a.return(Ds(g,l,u.status,e,u.url,t))}})})},Us.isSupported=function(){if(!e.ReadableStream)return!1;try{new ReadableStream({})}catch(e){return!1}return!(!e.fetch||!e.AbortController)},Us.isSupported=Us.isSupported,Us.g=e.fetch,Us.a=e.AbortController,Us.c=e.ReadableStream,Us.b=e.Headers,Us.isSupported()&&(Pe("http",Us,2),Pe("https",Us,2)),V("shaka.net.HttpXHRPlugin",Fs),Fs.f=e.XMLHttpRequest,Pe("http",Fs,1),Pe("https",Fs,1),Bs.prototype.close=function(e,t){if(this.c.has(e)){var n=this.c.get(e);this.c.delete(e),this.f+=n,this.a+=t}},Vs.prototype.destroy=function(){return this.c=!0,Promise.all(this.b.values()).then(function(){},function(){})},Hs.prototype.abort=function(){try{this.c.abort()}catch(e){}return this.a.catch(function(){})},Hs.prototype.store=function(){return this.b},Hs.prototype.promise=function(){return this.a},Gs.prototype.destroy=function(){return Promise.all(this.a.map(function(e){return e.abort()}))},Ys.prototype.destroy=function(){return this.a.destroy()},Ys.prototype.getAll=function(){var e=this;return f(function t(){var n,r;return P(t,function(t){switch(t.j){case 1:return n=qs(e.a,"session-ids"),r=[],E(t,Ks(n,function(e,t){r.push(t)}),2);case 2:return E(t,n.promise(),3);case 3:return t.return(r)}})})},Ys.prototype.add=function(e){for(var t=Ws(this.a,"session-ids"),n=t.store(),r=(e=d(e)).next();!r.done;r=e.next())n.add(r.value);return t.promise()},Ys.prototype.remove=function(e){var t=this;return f(function n(){var r;return P(n,function(n){switch(n.j){case 1:return E(n,Ks(r=Ws(t.a,"session-ids"),function(t,n,r){0<=e.indexOf(n.sessionId)&&r.delete()}),2);case 2:return E(n,r.promise(),0)}})})},Xs.prototype.destroy=function(){for(var e=[],t=d(this.a.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.a.clear(),Promise.all(e)},Xs.prototype.init=function(){var e=this;Qs.forEach(function(t,n){var r=t();r&&e.a.set(n,r)});for(var t=[],n=d(this.a.values()),r=n.next();!r.done;r=n.next())t.push(r.value.init());return Promise.all(t)},Xs.prototype.erase=function(){var e=this;return f(function t(){var n,r;return P(t,function(t){switch(t.j){case 1:return n=Array.from(e.a.values()),(r=0<n.length)||Qs.forEach(function(e){(e=e())&&n.push(e)}),E(t,Promise.all(n.map(function(e){return e.erase()})),2);case 2:if(!r)return E(t,Promise.all(n.map(function(e){return e.destroy()})),0);t.A(0)}})})},V("shaka.offline.StorageMuxer.register",Zs),V("shaka.offline.StorageMuxer.unregister",function(e){Qs.delete(e)});var Qs=new Map;function Js(e){this.a=new Gs(e)}function eo(e){return Promise.reject(new fe(2,9,9011,"Cannot add new value to "+e))}function to(e,t,n,r){var i=(e=Ws(e.a,t)).store();return n.forEach(function(e){i.delete(e).onsuccess=function(){return r(e)}}),e.promise()}function no(e,t,n){var r=(e=qs(e.a,t)).store(),i={},a=[];return n.forEach(function(e){r.get(e).onsuccess=function(t){null==(t=t.target.result)&&a.push(e),i[e]=t}}),e.promise().then(function(){return a.length?Promise.reject(new fe(2,9,9012,"Could not find values for "+a)):n.map(function(e){return i[e]})})}function ro(e){return{originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:null==e.expiration?1/0:e.expiration,periods:e.periods.map(io),sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata}}function io(e){return function(e){var t=e.streams.filter(function(e){return"audio"==e.contentType}),n=e.streams.filter(function(e){return"video"==e.contentType});if(!t.every(function(e){return e.variantIds})||!n.every(function(e){return e.variantIds})){t.forEach(function(e){e.variantIds=[]}),n.forEach(function(e){e.variantIds=[]});var r=0;if(n.length&&!t.length){var i=r++;n.forEach(function(e){e.variantIds.push(i)})}if(!n.length&&t.length){var a=r++;t.forEach(function(e){e.variantIds.push(a)})}n.length&&t.length&&t.forEach(function(e){n.forEach(function(t){var n=r++;e.variantIds.push(n),t.variantIds.push(n)})})}}(e),e.streams.forEach(function(){}),{startTime:e.startTime,streams:e.streams.map(ao)}}function ao(e){var t=e.$e?uo(e.$e):null;return{id:e.id,originalId:null,primary:e.primary,presentationTimeOffset:e.presentationTimeOffset,contentType:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,kind:e.kind,language:e.language,label:e.label,width:e.width,height:e.height,initSegmentKey:t,encrypted:e.encrypted,keyId:e.keyId,segments:e.segments.map(so),variantIds:e.variantIds}}function so(e){var t=uo(e.uri);return{startTime:e.startTime,endTime:e.endTime,dataKey:t}}function oo(e){return{data:e.data}}function uo(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new fe(2,9,9004,"Could not parse uri "+e)}function lo(e,t,n,r){this.a=new Gs(e),this.c=t,this.b=n,this.f=r}function co(e,t,n){if(e.f)return Promise.reject(new fe(1,9,9011,"Cannot add new value to "+t));var r=(e=Ws(e.a,t)).store(),i=[];return n.forEach(function(e){r.add(e).onsuccess=function(e){i.push(e.target.result)}}),e.promise().then(function(){return i})}function ho(e,t,n,r){var i=(e=Ws(e.a,t)).store();return n.forEach(function(e){i.delete(e).onsuccess=function(){return r(e)}}),e.promise()}function fo(e,t,n){var r=(e=qs(e.a,t)).store(),i={},a=[];return n.forEach(function(e){var t=r.get(e);t.onsuccess=function(){null==t.result&&a.push(e),i[e]=t.result}}),e.promise().then(function(){return a.length?Promise.reject(new fe(1,9,9012,"Could not find values for "+a)):n.map(function(e){return i[e]})})}function po(){this.g=this.c=this.b=this.a=this.f=null}function mo(e,t,n,r){this.a=e,this.g=t,this.f=n,this.c=r,this.b=["offline:",e,"/",t,"/",n,"/",r].join("")}function vo(e){if(null==(e=/^offline:([a-z]+)\/([^\/]+)\/([^\/]+)\/([0-9]+)$/.exec(e)))return null;var t=e[1];if("manifest"!=t&&"segment"!=t)return null;var n=e[2];if(!n)return null;var r=e[3];return r&&null!=t?new mo(t,n,r,Number(e[4])):null}function yo(e,t){this.b=e,this.a=t}function go(e,t,n){var r=t.streams.filter(function(e){return"audio"==e.contentType}),i=t.streams.filter(function(e){return"video"==e.contentType});return r=function(e,t,n){for(var r=new Set,i=d(t),a=i.next();!a.done;a=i.next()){var s=d(a.value.variantIds);for(a=s.next();!a.done;a=s.next())r.add(a.value)}for(i=d(n),a=i.next();!a.done;a=i.next())for(s=d(a.value.variantIds),a=s.next();!a.done;a=s.next())r.add(a.value);for(i=new Map,r=d(r),a=r.next();!a.done;a=r.next())a=a.value,i.set(a,{id:a,language:"",primary:!1,audio:null,video:null,bandwidth:0,drmInfos:[],allowedByApplication:!0,allowedByKeySystem:!0});for(t=d(t),r=t.next();!r.done;r=t.next())for(r=r.value,a=_o(e,r),s=d(r.variantIds),r=s.next();!r.done;r=s.next())(r=i.get(r.value)).language=a.language,r.primary=r.primary||a.primary,r.audio=a;for(n=d(n),t=n.next();!t.done;t=n.next())for(r=t.value,t=_o(e,r),a=d(r.variantIds),r=a.next();!r.done;r=a.next())(r=i.get(r.value)).primary=r.primary||t.primary,r.video=t;return i}(e,r,i),i=t.streams.filter(function(e){return"text"==e.contentType}).map(function(t){return _o(e,t)}),t.streams.forEach(function(r){r=r.segments.map(function(t,n){return bo(e,n,t)}),n.sb(r,t.startTime)}),{startTime:t.startTime,variants:Array.from(r.values()),textStreams:i}}function _o(e,t){var n=t.segments.map(function(t,n){return bo(e,n,t)}),r=new li(n);return n={id:t.id,originalId:t.originalId,createSegmentIndex:function(){return Promise.resolve()},findSegmentPosition:function(e){return r.find(e)},getSegmentReference:function(e){return r.get(e)},initSegmentReference:null,presentationTimeOffset:t.presentationTimeOffset,mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate||void 0,kind:t.kind,encrypted:t.encrypted,keyId:t.keyId,language:t.language,label:t.label||null,type:t.contentType,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,closedCaptions:null},null!=t.initSegmentKey&&(n.initSegmentReference=function(e,t){var n=new mo("segment",e.b,e.a,t);return new si(function(){return[n.toString()]},0,null)}(e,t.initSegmentKey)),n}function bo(e,t,n){var r=new mo("segment",e.b,e.a,n.dataKey);return new oi(t,n.startTime,n.endTime,function(){return[r.toString()]},0,null)}function wo(){this.a=null}function Eo(e){var t=vo(e);return t&&"manifest"==t.a?Eo.h(e):t&&"segment"==t.a?Eo.i(t.key(),t):ve(new fe(2,1,9004,e))}function So(e,t,n){return f(function r(){var i,a,s,o,u,l;return P(r,function(r){switch(r.j){case 1:i=[];for(var c=[],h=d(n),p=h.next();!p.done;p=h.next()){p=p.value;for(var m=!1,v=d(c),y=v.next();!y.done;y=v.next())if(To((y=y.value).info,p)){y.sessionIds.push(p.sessionId),m=!0;break}m||c.push({info:p,sessionIds:[p.sessionId]})}a=d(c),s=a.next();case 2:if(s.done){r.A(4);break}return o=s.value,u=function(e,t,n){return f(function r(){var i,a;return P(r,function(r){switch(r.j){case 1:return i=new yt({rb:t,onError:function(){},kc:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),T(r,2),i.configure(e),E(r,function(e,t,n,r,i,a){var s=new Map;return s.set(t,{audioCapabilities:i,videoCapabilities:a,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t,drmInfos:[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:r,initData:null,keyIds:null}]}),Ct(e,s)}(i,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:k(r,3);break;case 2:return I(r),E(r,i.destroy(),5);case 5:return r.return([]);case 3:return T(r,6),E(r,bt(i),8);case 8:k(r,7);break;case 6:return I(r),E(r,i.destroy(),9);case 9:return r.return([]);case 7:return a=[],E(r,Promise.all(n.sessionIds.map(function(e){return f(function t(){return P(t,function(t){switch(t.j){case 1:return T(t,2),E(t,function(e,t){return f(function n(){var r,i,a;return P(n,function(n){switch(n.j){case 1:return E(n,kt(e,t),2);case 2:return(r=n.o)?(i=[],(a=e.b.get(r))&&(a.xa=new pe,i.push(a.xa)),i.push(r.remove()),E(n,Promise.all(i),0)):n.return()}})})}(i,e),4);case 4:a.push(e),k(t,0);break;case 2:I(t),S(t)}})})})),10);case 10:return E(r,i.destroy(),11);case 11:return r.return(a)}})})}(e,t,o),E(r,u,5);case 5:l=r.o,i=i.concat(l),s=a.next(),r.A(2);break;case 4:return r.return(i)}})})}function To(e,t){function n(e,t){return e.robustness==t.robustness&&e.contentType==t.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&Ae(e.audioCapabilities,t.audioCapabilities,n)&&Ae(e.videoCapabilities,t.videoCapabilities,n)}function Co(e,t){var n={ya:null,u:null,mimeType:null,startTime:null,od:null,uri:null},r=this;this.g=t,this.c=e,this.i=n,this.h=null,this.f=[],this.b=this.a=null,this.l=!0,this.m=Promise.resolve().then(function(){return function(e){return f(function t(){return P(t,function(t){switch(t.j){case 1:if(e.l){if(0==e.f.length||e.a&&!e.a.Ta)var n=!1;else{e.a&&(e.a.ta.Wa(),e.a=null);var r=(n=e.f.shift()).create(e.i);r?(n.ta.tb(),e.a={node:r.node,payload:r.payload,Ta:r.Ta,ta:n.ta}):n.ta.lc(),n=!0}return n?n=Promise.resolve():e.a?n=function(e){return f(function t(){var n,r;return P(t,function(t){switch(t.j){case 1:return e.c=e.g.Pe(e.c,e.i,e.a.node,e.a.payload),T(t,2),e.b=e.g.ze(e.c,e.i,e.a.payload),E(t,e.b.promise,4);case 4:e.b=null,e.c==e.a.node&&(e.a.ta.jc(),e.a=null),k(t,0);break;case 2:return 7001==(n=I(t)).code?e.a.ta.Wa():e.a.ta.onError(n),e.a=null,e.b=null,r=e,E(t,e.g.handleError(e.i,n),5);case 5:r.c=t.o,S(t)}})})}(e):(e.g.ff(e.c),e.h=new pe,n=e.h),E(t,n,1)}t.A(0)}})})}(r)})}function ko(e,t){var n={tb:function(){},jc:function(){},Wa:function(){},onError:function(){},lc:function(){},sg:function(){}};return e.f.push({create:t,ta:n}),e.b&&e.b.abort(),Io(e),n}function Io(e){e.h&&(e.h.resolve(),e.h=null)}function Ao(e){this.a=null;for(var t=0;t<e.textTracks.length;++t){var n=e.textTracks[t];n.mode="disabled","Shaka Player TextTrack"==n.label&&(this.a=n)}this.a||(this.a=e.addTextTrack("subtitles","Shaka Player TextTrack")),this.a.mode="hidden"}function Lo(e){if(e.startTime>=e.endTime)return null;var t=new VTTCue(e.startTime,e.endTime,e.payload);t.lineAlign=e.lineAlign,t.positionAlign=e.positionAlign,t.size=e.size;try{t.align=e.textAlign}catch(e){}return"center"==e.textAlign&&"center"!=t.align&&(t.align="middle"),"vertical-lr"==e.writingMode?t.vertical="lr":"vertical-rl"==e.writingMode&&(t.vertical="rl"),1==e.lineInterpretation&&(t.snapToLines=!1),null!=e.line&&(t.line=e.line),null!=e.position&&(t.position=e.position),t}function xo(e,t){var n=e.mode;e.mode="showing"==n?"showing":"hidden";for(var r=e.cues,i=r.length-1;0<=i;i--){var a=r[i];a&&t(a)&&e.removeCue(a)}e.mode=n}function Ro(e,t,n,r,i){var a,s=i in r,o=!0;for(a in t){var u=i+"."+a,l=s?r[i]:n[a];s||a in n?void 0===t[a]?void 0===l||s?delete e[a]:e[a]=Ce(l):l.constructor==Object&&t[a]&&t[a].constructor==Object?(e[a]||(e[a]=Ce(l)),u=Ro(e[a],t[a],l,r,u),o=o&&u):typeof t[a]!=typeof l||null==t[a]||t[a].constructor!=l.constructor?o=!1:e[a]=t[a]:o=!1}return o}function No(e,t){for(var n={},r=n,i=0,a=0;!(0>(i=e.indexOf(".",i)));)0!=i&&"\\"==e[i-1]||(r[a=e.substring(a,i).replace(/\\\./g,".")]={},r=r[a],a=i+1),i+=1;return r[e.substring(a).replace(/\\\./g,".")]=t,n}function Mo(){}function Po(){var e=5e5,t=1/0;navigator.connection&&(e=1e6*navigator.connection.downlink,navigator.connection.saveData&&(t=360));var n={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,initDataTransform:function(e){return e},fairPlayTransform:!0},r={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},availabilityWindowOverride:NaN,dash:{customScheme:function(e){if(e)return null},clockSyncUri:"",ignoreDrmInfo:!1,xlinkFailGracefully:!1,defaultPresentationDelay:10,ignoreMinBufferTime:!1,autoCorrectDrift:!0},hls:{ignoreTextStreamFailures:!1}},i={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},failureCallback:function(){},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,smallGapLimit:.5,jumpLargeGaps:!1,durationBackoff:1,forceTransmuxTS:!1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1};tt("Web0S")&&(i.stallEnabled=!1);var a={trackSelectionCallback:function(e){return e},progressCallback:function(){},usePersistentLicense:!0},s={drm:n,manifest:r,streaming:i,offline:a,abrFactory:Jn,abr:{enabled:!0,defaultBandwidthEstimate:e,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:t,minPixels:0,maxPixels:1/0,minBandwidth:0,maxBandwidth:1/0}},preferredAudioLanguage:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayFactory:function(){return null}};return a.trackSelectionCallback=function(e){return function(e,t){var n=e.filter(function(e){return"variant"==e.type}),r=[],i=Un(t,n.map(function(e){return e.language}));i&&(r=n.filter(function(e){return On(e.language)==i})),0==r.length&&(r=n.filter(function(e){return e.primary})),0==r.length&&(n.map(function(e){return e.language}),r=n);var a=r.filter(function(e){return e.height&&480>=e.height});if(a.length&&(a.sort(function(e,t){return t.height-e.height}),r=a.filter(function(e){return e.height==a[0].height})),n=[],r.length){var s=Math.floor(r.length/2);r.sort(function(e,t){return e.bandwidth-t.bandwidth}),n.push(r[s])}for(r=d(e),s=r.next();!s.done;s=r.next())"text"==(s=s.value).type&&n.push(s);return n}(e,s.preferredAudioLanguage)},s}function Oo(e,t,n){var r={".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",serverCertificate:new Uint8Array(0),individualizationServer:""}};return Ro(e,t,n||Po(),r,"")}function Do(){this.a=null,this.b=[]}function Uo(e,t){if(null==e.a)e.a={timestamp:Date.now()/1e3,state:t,duration:0};else{var n=Date.now()/1e3;e.a.duration=n-e.a.timestamp,e.a.state!=t&&(e.b.push(e.a),e.a={timestamp:n,state:t,duration:0})}}function Fo(e,t){var n=0;e.a&&e.a.state==t&&(n+=e.a.duration);for(var r=d(e.b),i=r.next();!i.done;i=r.next())n+=(i=i.value).state==t?i.duration:0;return n}function Bo(){this.b=this.c=null,this.a=[]}function Vo(){this.f=this.l=this.b=this.h=this.i=this.g=this.m=NaN,this.a=new Do,this.c=new Bo}function jo(t,n){var r=this;Te.call(this),this.h=Tu,this.a=null,this.eb=!1,this.i=new He,this.vc=this.l=this.Bb=this.c=this.m=this.f=this.Sb=this.P=this.Tb=this.W=this.gb=this.s=this.D=this.g=this.G=null,this.Hd=1e9,this.Wb=new Set,this.ib=!0,this.Ea=null,this.Dd=!1,this.Bd=0,this.na=null,this.$=new Ea,this.b=$o(this),this.Xb={width:1/0,height:1/0},this.v=null,this.Ub=new Ra(this.b.preferredAudioLanguage,this.b.preferredVariantRole,this.b.preferredAudioChannelCount),this.ma=this.b.preferredTextLanguage,this.cb=this.b.preferredTextRole,n&&n(this),this.G=function(e){return new Re(function(t,n){e.l&&e.l.segmentDownloaded(t,n)})}(this),this.i.w(e,"online",function(){r.gd()}),this.C={name:"detach"},this.M={name:"attach"},this.Fa={name:"unload"},this.Ec={name:"manifest-parser"},this.Cc={name:"manifest"},this.fb={name:"media-source"},this.wc={name:"drm-engine"},this.T={name:"load"},this.Ic={name:"src-equals-drm-engine"},this.hb={name:"src-equals"};var i=new Map;i.set(this.M,function(e,t){return _e(function(e,t,n){return null==t.u&&(t.u=n.u,e.i.w(t.u,"error",function(){var t=du(e);t&&e.Ka(t)})),e.a=t.u,Promise.resolve()}(r,e,t))}),i.set(this.C,function(e){return e.u&&(r.i.ea(e.u,"error"),e.u=null),r.a=null,_e(e=Promise.resolve())}),i.set(this.Fa,function(e){return _e(qo(r,e))}),i.set(this.fb,function(t){return _e(t=function(t,n){return f(function r(){var i,a,s,o;return P(r,function(r){switch(r.j){case 1:return i=e.muxjs?new Ut:new Ft,a=t.b.textDisplayFactory,s=new a,t.xc=a,E(r,(o=new bn(n.u,i,s)).s,2);case 2:t.D=o,S(r)}})})}(r,t))}),i.set(this.Ec,function(e,t){return _e(function(e,t,n){return f(function r(){var i,a,s;return P(r,function(r){switch(r.j){case 1:if(t.ya=n.ya,t.mimeType=n.mimeType,t.uri=n.uri,i=t.uri,a=e.G,e.Bb=i,t.ya){e.m=t.ya(),r.A(2);break}return s=e,E(r,Ci.create(i,a,e.b.manifest.retryParameters,t.mimeType),3);case 3:s.m=r.o;case 2:e.m.configure(e.b.manifest),S(r)}})})}(r,e,t))}),i.set(this.Cc,function(e){return function(e,t){var n=t.uri,r=e.G;e.Sb=new as,function(e,t){e.b=t}(e.Sb,function(t){cu(e,"timelineregionadded",t)});var i={networkingEngine:r,filterNewPeriod:function(t){return e.Fc(t)},filterAllPeriods:function(t){return Zo(e,t)},onTimelineRegionAdded:function(t){var n=e.Sb;e:{for(var r=d(n.a),i=r.next();!i.done;i=r.next())if((i=i.value).schemeIdUri==t.schemeIdUri&&i.startTime==t.startTime&&i.endTime==t.endTime){r=i;break e}r=null}null==r&&(n.a.add(t),n.b(t))},onEvent:function(t){return e.dispatchEvent(t)},onError:function(t){return e.Ka(t)}};return new me(Promise.resolve().then(function(){return f(function t(){var r;return P(t,function(t){switch(t.j){case 1:return r=e,E(t,e.m.start(n,i),2);case 2:if(r.c=t.o,e.dispatchEvent(new Ee("manifestparsed")),0==e.c.periods.length)throw new fe(2,4,4014);!function(e){function t(e){return e.video&&e.audio||e.video&&e.video.codecs.includes(",")}e.some(function(e){return e.variants.some(t)})&&e.forEach(function(e){e.variants=e.variants.filter(t)})}(e.c.periods),S(t)}})})}),function(){return e.m.stop()})}(r,e)}),i.set(this.wc,function(){return _e(function(e){return f(function t(){return P(t,function(t){switch(t.j){case 1:return e.g=new yt({rb:e.G,onError:function(t){e.Ka(t)},kc:function(t){hu(e,t)},onExpirationUpdated:function(t,n){fu(e,t,n)},onEvent:function(t){e.dispatchEvent(t)}}),e.g.configure(e.b.drm),E(t,gt(e.g,Ha(e.c.periods),e.c.offlineSessionIds),2);case 2:Zo(e,e.c.periods),S(t)}})})}(r))}),i.set(this.T,function(e,t){return _e(function(e,t,n){return f(function r(){var i,a,s,o,u,l,c,h,f;return P(r,function(r){switch(r.j){case 1:return t.startTime=n.startTime,i=t.u,a=t.uri,e.Bb=a,e.v=new Vo,s=function(){return tu(e)},o=function(){var t=e.a.playbackRate;0!=t&&e.W.set(t)},e.i.w(i,"playing",s),e.i.w(i,"pause",s),e.i.w(i,"ended",s),e.i.w(i,"ratechange",o),u=e.b.abrFactory,e.l&&e.vc==u||(e.vc=u,e.l=new u,e.l.configure(e.b.abr)),function(e,t){for(var n=0;n<t.length;n++){for(var r=t[n],i=new Map,a=d(r.variants),s=a.next();!s.done;s=a.next())if((s=s.value).video&&s.video.closedCaptions)for(var o=d((s=s.video).closedCaptions.keys()),u=o.next();!u.done;u=o.next())if(u=u.value,!i.has(u)){var l={id:e.Hd++,originalId:u,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return null},getSegmentReference:function(){return null},initSegmentReference:null,presentationTimeOffset:0,mimeType:"application/cea-608",codecs:"",kind:"caption",encrypted:!1,keyId:null,language:s.closedCaptions.get(u),label:null,type:"text",primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:s.roles,channelsCount:null,closedCaptions:null};i.set(u,l)}for(i=d(i.values()),a=i.next();!a.done;a=i.next())r.textStreams.push(a.value)}}(e,e.c.periods),e.Ub=new Ra(e.b.preferredAudioLanguage,e.b.preferredVariantRole,e.b.preferredAudioChannelCount),e.ma=e.b.preferredTextLanguage,function(e,t,n){0<t&&(e.V()||e.de(t)),n<e.Y()&&(e.V()||e.wa(n))}(e.c.presentationTimeline,e.b.playRangeStart,e.b.playRangeEnd),E(r,e.g.Cb(i),2);case 2:return e.l.init(function(t,n,r){n=void 0!==n&&n,r=void 0===r?0:r;e:{for(var i=d(e.c.periods),a=i.next();!a.done;a=i.next())if((a=a.value).variants.includes(t)){i=a;break e}i=null}Yo(e,i,t,!0),e.f&&(vs(e.f,t,n,r),iu(e))}),e.s=function(e,t){return new ts(e.a,e.c,e.b.streaming,t,function(){e.gb&&ja(e.gb,!0),e.f&&function(e){function t(t){var i=e.a.I;return"text"==t?t=null!=(t=i.a).a&&null!=t.b&&(n>=t.a&&n<t.b):t=Vt(t=In(i,t),n,r),t}var n=e.a.Sa(),r=e.g.smallGapLimit,i=Ls(e,n);if(ze(e.b.values(),function(e){return e.pa==i}))for(var a=d(e.b.keys()),s=a.next();!s.done;s=a.next())t(s=s.value)||gs(e,e.b.get(s));else ze(e.b.keys(),t)||e.b.forEach(function(t){gs(e,t)})}(e.f)},function(t){return e.dispatchEvent(t)})}(e,t.startTime),e.gb=function(e){var t=new Ga(e.c);!function(e,t){e.b=t}(t,function(){au(e)});var n=new ss(e.Sb);!function(e,t,n,r){e.a=t,e.b=n,e.c=r}(n,function(t){cu(e,"timelineregionenter",t)},function(t){cu(e,"timelineregionexit",t)},function(t,n){n||(cu(e,"timelineregionenter",t),cu(e,"timelineregionexit",t))});var r=new Va(e.a);return r.a.add(t),r.a.add(n),r}(e),e.W=new qa({ec:function(){return t.u.playbackRate},ld:function(e){t.u.playbackRate=e},Id:function(e){t.u.currentTime+=e}}),l=Math.max(e.c.minBufferTime,e.b.streaming.rebufferingGoal),Wo(e,l),e.f=function(e){return new cs(e.c,{Sa:function(){return e.s.h()},getBandwidthEstimate:function(){return e.l.getBandwidthEstimate()},I:e.D,rb:e.G,Ld:e.df.bind(e),Kd:e.te.bind(e),onError:e.Ka.bind(e),onEvent:function(t){return e.dispatchEvent(t)},hf:e.jf.bind(e),Zc:e.qf.bind(e)})}(e),e.f.configure(e.b.streaming),function(e){function t(e){var t="";e.video&&(t=Ze(e.video.codecs)[0]);var n="";return e.audio&&(n=Ze(e.audio.codecs)[0]),t+"-"+n}var n=e.c.periods.reduce(function(e,t){return e.concat(t.variants)},[]);n=Xn(n,e.b.preferredAudioChannelCount);var r=new Se;n.forEach(function(e){var n=t(e);r.push(n,e)});var i=null,a=1/0;r.forEach(function(e,t){var n=0,r=0;t.forEach(function(e){n+=e.bandwidth||0,++r});var s=n/r;s<a&&(i=e,a=s)}),e.c.periods.forEach(function(e){e.variants=e.variants.filter(function(e){return t(e)==i})})}(e),e.h=Cu,e.dispatchEvent(new Ee("streaming")),E(r,e.f.start(),3);case 3:e.b.streaming.startAtSegmentBoundary&&(c=e.s.h(),h=function(e,t){function n(e,t){if(!e)return null;var n=e.findSegmentPosition(t-a.startTime);return null==n?null:(n=e.getSegmentReference(n))?n.startTime+a.startTime:null}var r=ds(e.f),i=hs(e.f),a=gu(e);return r=n(r,t),null!=(i=n(i,t))&&null!=r?Math.max(i,r):null!=i?i:null!=r?r:t}(e,c),e.s.m(h)),e.c.periods.forEach(e.Fc.bind(e)),au(e),iu(e),(f=gu(e)||e.c.periods[0]).variants.some(function(e){return e.primary}),nu(e,f.variants),e.i.da(i,"loadeddata",function(){e.v.b=Date.now()/1e3-n.od}),S(r)}})})}(r,e,t))}),i.set(this.Ic,function(e){return _e(e=function(e,t){return f(function n(){var r,i;return P(n,function(n){switch(n.j){case 1:return r=Wt,e.g=new yt({rb:e.G,onError:function(t){e.Ka(t)},kc:function(t){hu(e,t)},onExpirationUpdated:function(t,n){fu(e,t,n)},onEvent:function(t){e.dispatchEvent(t)}}),e.g.configure(e.b.drm),i={id:0,language:"und",primary:!1,audio:null,video:{id:0,originalId:null,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return null},getSegmentReference:function(){return null},initSegmentReference:null,presentationTimeOffset:0,mimeType:"video/mp4",codecs:"",encrypted:!0,keyId:null,language:"und",label:null,type:r.Na,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,closedCaptions:null},bandwidth:100,drmInfos:[],allowedByApplication:!0,allowedByKeySystem:!0},E(n,gt(e.g,[i],[]),2);case 2:return E(n,e.g.Cb(t.u),0)}})})}(r,e))}),i.set(this.hb,function(e,t){return function(e,t,n){function r(){return tu(e)}if(t.uri=n.uri,t.startTime=n.startTime,e.Bb=t.uri,e.v=new Vo,e.s=new es(t.u),null!=t.startTime&&e.s.m(t.startTime),e.W=new qa({ec:function(){return t.u.playbackRate},ld:function(e){t.u.playbackRate=e},Id:function(e){t.u.currentTime+=e}}),Wo(e,e.b.streaming.rebufferingGoal),e.i.w(t.u,"playing",r),e.i.w(t.u,"pause",r),e.i.w(t.u,"ended",r),e.i.da(t.u,"loadeddata",function(){e.v.b=Date.now()/1e3-n.od}),e.a.audioTracks&&(e.i.w(e.a.audioTracks,"addtrack",function(){return au(e)}),e.i.w(e.a.audioTracks,"removetrack",function(){return au(e)})),e.a.textTracks){var i=e.a.textTracks;e.i.w(i,"addtrack",function(){return au(e)}),e.i.w(i,"removetrack",function(){return au(e)})}t.u.src=t.uri,e.h=ku,e.dispatchEvent(new Ee("streaming"));var a=new pe;return e.a.readyState>=HTMLMediaElement.HAVE_CURRENT_DATA?a.resolve():e.a.error?a.reject(du(e)):(e.i.da(e.a,"loadeddata",function(){a.resolve()}),e.i.da(e.a,"error",function(){a.reject(du(e))})),new me(a,function(){return a.reject(new fe(2,7,7001)),Promise.resolve()})}(r,e,t)}),this.jb=new Co(this.C,{Pe:function(e,t,n,i){var a=null;return e==r.C&&(a=n==r.C?r.C:r.M),e==r.M&&(a=n==r.C||t.u!=i.u?r.C:n==r.M?r.M:n==r.fb||n==r.T?r.fb:n==r.hb?r.Ic:null),e==r.fb&&(a=n==r.T&&t.u==i.u?r.Ec:r.Fa),e==r.Ec&&(a=wu(r.T,r.Cc,r.Fa,n,t,i)),e==r.Cc&&(a=wu(r.T,r.wc,r.Fa,n,t,i)),e==r.wc&&(a=wu(r.T,r.T,r.Fa,n,t,i)),e==r.Ic&&(a=n==r.hb&&t.u==i.u?r.hb:r.Fa),e!=r.T&&e!=r.hb||(a=r.Fa),e==r.Fa&&(a=i.u&&t.u==i.u?r.M:r.C),a},ze:function(e,t,n){return r.dispatchEvent(new Ee("onstatechange",{state:e.name})),i.get(e)(t,n)},handleError:function(e){return f(function t(){return P(t,function(t){switch(t.j){case 1:return E(t,qo(r,e),2);case 2:return t.return(e.u?r.M:r.C)}})})},ff:function(e){r.dispatchEvent(new Ee("onstateidle",{state:e.name}))}}),t&&this.Cb(t,!0)}(n=Js.prototype).destroy=function(){return this.a.destroy()},n.hasFixedKeySpace=function(){return!0},n.addSegments=function(){return eo("segment")},n.removeSegments=function(e,t){return to(this,"segment",e,t)},n.getSegments=function(e){return no(this,"segment",e).then(function(e){return e.map(oo)})},n.addManifests=function(){return eo("manifest")},n.updateManifestExpiration=function(e,t){var n=Ws(this.a,"manifest"),r=n.store(),i=new pe;return r.get(e).onsuccess=function(n){(n=n.target.result)?(n.expiration=t,r.put(n),i.resolve()):i.reject(new fe(2,9,9012,"Could not find values for "+e))},n.promise().then(function(){return i})},n.removeManifests=function(e,t){return to(this,"manifest",e,t)},n.getManifests=function(e){return no(this,"manifest",e).then(function(e){return e.map(ro)})},n.getAllManifests=function(){var e=this;return f(function t(){var n,r;return P(t,function(t){switch(t.j){case 1:return n=qs(e.a,"manifest"),r=new Map,E(t,Ks(n,function(e,t){r.set(e,ro(t))}),2);case 2:return E(t,n.promise(),3);case 3:return t.return(r)}})})},(n=lo.prototype).destroy=function(){return this.a.destroy()},n.hasFixedKeySpace=function(){return this.f},n.addSegments=function(e){return co(this,this.c,e)},n.removeSegments=function(e,t){return ho(this,this.c,e,t)},n.getSegments=function(e){return fo(this,this.c,e)},n.addManifests=function(e){return co(this,this.b,e)},n.updateManifestExpiration=function(e,t){var n=Ws(this.a,this.b),r=n.store();return r.get(e).onsuccess=function(n){(n=n.target.result)&&(n.expiration=t,r.put(n,e))},n.promise()},n.removeManifests=function(e,t){return ho(this,this.b,e,t)},n.getManifests=function(e){return fo(this,this.b,e)},n.getAllManifests=function(){var e=this;return f(function t(){var n,r;return P(t,function(t){switch(t.j){case 1:return n=qs(e.a,e.b),r=new Map,E(t,Ks(n,function(e,t){r.set(e,t)}),2);case 2:return E(t,n.promise(),3);case 3:return t.return(r)}})})},(n=po.prototype).init=function(){var t=this,n=new pe,r=e.indexedDB.open("shaka_offline_db",4);return r.onsuccess=function(e){e=e.target.result,t.f=e;var r=e.objectStoreNames;r=r.contains("manifest")&&r.contains("segment")?new Js(e):null,t.a=r,r=(r=e.objectStoreNames).contains("manifest-v2")&&r.contains("segment-v2")?new lo(e,"segment-v2","manifest-v2",!0):null,t.b=r,r=(r=e.objectStoreNames).contains("manifest-v3")&&r.contains("segment-v3")?new lo(e,"segment-v3","manifest-v3",!1):null,t.c=r,e=e.objectStoreNames.contains("session-ids")?new Ys(e):null,t.g=e,n.resolve()},r.onupgradeneeded=function(e){e=e.target.result;for(var t=d(["segment-v3","manifest-v3","session-ids"]),n=t.next();!n.done;n=t.next())n=n.value,e.objectStoreNames.contains(n)||e.createObjectStore(n,{autoIncrement:!0})},r.onerror=function(e){n.reject(new fe(2,9,9001,r.error)),e.preventDefault()},n},n.destroy=function(){var e=this;return f(function t(){return P(t,function(t){switch(t.j){case 1:if(!e.a){t.A(2);break}return E(t,e.a.destroy(),2);case 2:if(!e.b){t.A(4);break}return E(t,e.b.destroy(),4);case 4:if(!e.c){t.A(6);break}return E(t,e.c.destroy(),6);case 6:if(!e.g){t.A(8);break}return E(t,e.g.destroy(),8);case 8:e.f&&e.f.close(),S(t)}})})},n.getCells=function(){var e=new Map;return this.a&&e.set("v1",this.a),this.b&&e.set("v2",this.b),this.c&&e.set("v3",this.c),e},n.getEmeSessionCell=function(){return this.g},n.erase=function(){var t=this;return f(function n(){return P(n,function(n){switch(n.j){case 1:if(!t.a){n.A(2);break}return E(n,t.a.destroy(),2);case 2:if(!t.b){n.A(4);break}return E(n,t.b.destroy(),4);case 4:if(!t.c){n.A(6);break}return E(n,t.c.destroy(),6);case 6:return t.f&&t.f.close(),E(n,function(){var t=new pe,n=e.indexedDB.deleteDatabase("shaka_offline_db");return n.onblocked=function(){},n.onsuccess=function(){t.resolve()},n.onerror=function(e){t.reject(new fe(2,9,9001,n.error)),e.preventDefault()},t}(),8);case 8:return t.f=null,t.a=null,t.b=null,t.c=null,E(n,t.init(),0)}})})},Zs("idb",function(){return e.indexedDB?new po:null}),mo.prototype.ua=function(){return this.g},mo.prototype.aa=function(){return this.f},mo.prototype.key=function(){return this.c},mo.prototype.toString=function(){return this.b},(n=wo.prototype).configure=function(){},n.start=function(e){var t=this;return f(function n(){var r,i,a,s,o;return P(n,function(n){switch(n.j){case 1:return r=vo(e),t.a=r,null==r||"manifest"!=r.a?n.return(Promise.reject(new fe(2,1,9004,r))):(i=new Xs,C(n,2),E(n,i.init(),4));case 4:return E(n,$s(i,r.ua(),r.aa()),5);case 5:return E(n,n.o.getManifests([r.key()]),6);case 6:return a=n.o,s=a[0],o=new yo(r.ua(),r.aa()),n.return(function(e,t){var n=new ki(null,0);n.wa(t.duration);var r=t.periods.map(function(t){return go(e,t,n)}),i=t.drmInfo?[t.drmInfo]:[];return t.drmInfo&&r.forEach(function(e){e.variants.forEach(function(e){e.drmInfos=i})}),{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,periods:r}}(o,s));case 2:return A(n),E(n,i.destroy(),7);case 7:L(n,0)}})})},n.stop=function(){return Promise.resolve()},n.update=function(){},n.onExpirationUpdated=function(e,t){var n=this;return f(function r(){var i,a,s,o,u,l,c;return P(r,function(r){switch(r.j){case 1:return i=n.a,a=new Xs,T(r,2,3),E(r,a.init(),5);case 5:return E(r,$s(a,i.ua(),i.aa()),6);case 6:return E(r,(s=r.o).getManifests([i.key()]),7);case 7:if(o=r.o,u=o[0],l=u.sessionIds.includes(e),c=null==u.expiration||u.expiration>t,!l||!c){r.A(3);break}return E(r,s.updateManifestExpiration(i.key(),t),3);case 3:return A(r),E(r,a.destroy(),10);case 10:L(r,0);break;case 2:I(r),r.A(3)}})})},Ci.Nb("application/x-offline-manifest",wo),V("shaka.offline.OfflineScheme",Eo),Eo.h=function(e){return ge(e={uri:e,ad:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}})},Eo.i=function(e,t){var n=new Xs;return ge(void 0).U(function(){return n.init()}).U(function(){return $s(n,t.ua(),t.aa())}).U(function(e){return e.getSegments([t.key()])}).U(function(e){return{uri:t,ad:t,data:e[0].data,headers:{}}}).finally(function(){return n.destroy()})},Pe("offline",Eo),Co.prototype.destroy=function(){var e=this;return f(function t(){return P(t,function(t){switch(t.j){case 1:return e.l=!1,e.b&&e.b.abort(),Io(e),E(t,e.m,2);case 2:e.a&&e.a.ta.Wa();for(var n=d(e.f),r=n.next();!r.done;r=n.next())r.value.ta.Wa();e.a=null,e.f=[],e.g=null,S(t)}})})},V("shaka.text.SimpleTextDisplayer",Ao),Ao.prototype.remove=function(e,t){return!!this.a&&(xo(this.a,function(n){return n.startTime<t&&n.endTime>e}),!0)},Ao.prototype.remove=Ao.prototype.remove,Ao.prototype.append=function(e){for(var t=Lo,n=[],r=0;r<e.length;r++){var i=t(e[r]);i&&n.push(i)}n.slice().sort(function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime!=t.endTime?e.endTime-t.startTime:n.indexOf(t)-n.indexOf(e)}).forEach(function(e){this.a.addCue(e)}.bind(this))},Ao.prototype.append=Ao.prototype.append,Ao.prototype.destroy=function(){return this.a&&xo(this.a,function(){return!0}),this.a=null,Promise.resolve()},Ao.prototype.destroy=Ao.prototype.destroy,Ao.prototype.isTextVisible=function(){return"showing"==this.a.mode},Ao.prototype.isTextVisible=Ao.prototype.isTextVisible,Ao.prototype.setTextVisibility=function(e){this.a.mode=e?"showing":"hidden"},Ao.prototype.setTextVisibility=Ao.prototype.setTextVisibility,V("shaka.util.ConfigUtils.mergeConfigObjects",Ro),V("shaka.util.ConfigUtils.convertToConfigObject",No),V("shaka.util.PlayerConfiguration",Mo),Mo.mergeConfigObjects=Oo,j(jo,Te),V("shaka.Player",jo),jo.prototype.destroy=function(){var e=this;return f(function t(){var n;return P(t,function(t){switch(t.j){case 1:return e.h==Su?t.return():(e.h=Su,n=ko(e.jb,function(){return{node:e.C,payload:{ya:null,u:null,mimeType:null,startTime:null,od:null,uri:null},Ta:!1}}),E(t,new Promise(function(e){n.tb=function(){},n.jc=function(){e()},n.Wa=function(){e()},n.onError=function(){e()},n.lc=function(){e()}}),2));case 2:return E(t,e.jb.destroy(),3);case 3:if(e.i&&(e.i.release(),e.i=null),e.vc=null,e.l=null,e.b=null,!e.G){t.A(0);break}return E(t,e.G.destroy(),5);case 5:e.G=null,S(t)}})})},jo.prototype.destroy=jo.prototype.destroy,jo.version="v2.5.5";var Ho=["2","5"];ar=new function(e){this.a=e,this.c=rr,this.b=ir}(new tr(Number(Ho[0]),Number(Ho[1])));var Ko=["output-restricted","internal-error"],Go={};function qo(e,t){return f(function n(){return P(n,function(n){switch(n.j){case 1:if(e.h!=Su&&(e.h=Tu),e.dispatchEvent(new Ee("unloading")),t.ya=null,t.mimeType=null,t.startTime=null,t.uri=null,t.u&&(e.i.ea(t.u,"loadeddata"),e.i.ea(t.u,"playing"),e.i.ea(t.u,"pause"),e.i.ea(t.u,"ended"),e.i.ea(t.u,"ratechange")),e.gb&&(e.gb.release(),e.gb=null),e.Tb&&(e.Tb.stop(),e.Tb=null),!e.m){n.A(2);break}return E(n,e.m.stop(),3);case 3:e.m=null;case 2:if(!e.l){n.A(4);break}return E(n,e.l.stop(),4);case 4:if(!e.f){n.A(6);break}return E(n,e.f.destroy(),7);case 7:e.f=null;case 6:if(e.s&&(e.s.release(),e.s=null),!e.D){n.A(8);break}return E(n,e.D.destroy(),9);case 9:e.D=null;case 8:if(t.u&&t.u.src&&(t.u.removeAttribute("src"),t.u.load()),!e.g){n.A(10);break}return E(n,e.g.destroy(),11);case 11:e.g=null;case 10:e.$.a.clear(),e.Bb=null,e.P=null,e.Wb.clear(),e.c=null,e.v=null,e.xc=null,e.ib=!0,eu(e),S(n)}})})}function Wo(e,t){e.P=new Na(t,Math.min(.5,t/2)),e.P.a=Ma,eu(e),e.Tb=new ce(function(){switch(e.h){case ku:var t=!!e.a.ended||Bt(e.a.buffered)>=e.a.duration-.1;break;case Cu:e:if(e.a.ended||Tn(e.D))t=!0;else{if(e.c.presentationTimeline.V()){var n=e.c.presentationTimeline.nb();if(Bt(e.a.buffered)>=n){t=!0;break e}}t=!1}break;default:t=!1}var r=jt(e.a.buffered,e.a.currentTime),i=t,a=(n=e.P).b.get(n.a);t=n.a,r=i||r>=a?Pa:Ma,n.a=r,t!=r&&eu(e)}).La(.25)}function zo(e){if(e.m&&e.m.configure(e.b.manifest),e.g&&e.g.configure(e.b.drm),e.f){e.f.configure(e.b.streaming);try{e.c.periods.forEach(e.Fc.bind(e))}catch(t){e.Ka(t)}var t=ds(e.f),n=hs(e.f),r=gu(e);t=Qn(t,n,r.variants),e.l&&t&&t.allowedByApplication&&t.allowedByKeySystem?nu(e,r.variants):ru(e,r)}if(e.D&&(r=e.b.textDisplayFactory,e.xc!=r)){t=new r;var i=(n=e.D).g;n.g=t,i&&(t.setTextVisibility(i.isTextVisible()),i.destroy()),n.a&&(n.a.c=t),e.xc=r,e.f&&((t=(r=e.f).b.get("text"))&&ys(r,t.stream,!0,0,!0))}e.l&&(e.l.configure(e.b.abr),e.b.abr.enabled&&!e.ib?e.l.enable():e.l.disable(),lu(e))}function Yo(e,t,n,r){Ta(e.$,t).variant=n,(e=e.v.c).c!=n&&(e.c=n,e.a.push({timestamp:Date.now()/1e3,id:n.id,type:"variant",fromAdaptation:r,bandwidth:n.bandwidth}))}function Xo(e,t,n,r){Sa(e.$,t,n),(e=e.v.c).b!=n&&(e.b=n,e.a.push({timestamp:Date.now()/1e3,id:n.id,type:"text",fromAdaptation:r,bandwidth:null}))}function $o(e){var t=Po();return t.streaming.failureCallback=function(t){e.V()&&[1001,1002,1003].includes(t.code)&&(t.severity=1,e.gd())},t.textDisplayFactory=function(){return new Ao(e.a)},t}function Zo(e,t){var n=e.f?ds(e.f):null,r=e.f?hs(e.f):null;if(t.forEach(jn.bind(null,e.g,n,r)),0==(n=function(e,t){var n=0;return e.forEach(function(e){n+=t(e)?1:0}),n}(t,function(e){return e.variants.some(Yn)})))throw new fe(2,4,4032);if(n<t.length)throw new fe(2,4,4011);t.forEach(function(e){Vn(e.variants,this.b.restrictions,this.Xb)&&this.f&&gu(this)==e&&au(this),pu(this,e.variants)}.bind(e))}function Qo(e,t,n,r){n=void 0!==n&&n,r=void 0===r?0:r,e.ib?(e.Ea=t,e.Dd=n,e.Bd=r):(vs(e.f,t,n,r),su(e))}function Jo(e,t){e.ib?e.na=t:(ys(e.f,t,!0,0,!1),ou(e))}function eu(e){var t=e.Oc();if(e.v&&e.P&&e.s){var n=e.W;n.f=t,Wa(n),tu(e)}e.dispatchEvent(new Ee("buffering",{buffering:t}))}function tu(e){if(e.v&&e.P){var t=e.v.a;e.P.a==Ma?Uo(t,"buffering"):e.a.paused?Uo(t,"paused"):e.a.ended?Uo(t,"ended"):Uo(t,"playing")}}function nu(e,t){try{pu(e,t)}catch(t){return e.Ka(t),null}var n=t.filter(function(e){return Yn(e)});return n=e.Ub.create(n),e.l.setVariants(Array.from(n.values())),e.l.chooseVariant()}function ru(e,t){var n=nu(e,t.variants);n&&(Yo(e,t,n,!0),Qo(e,n,!0)),(n=$n(t.textStreams,e.ma,e.cb)[0]||null)&&(e.b.streaming.alwaysStreamText||e.gc())&&(Xo(e,t,n,!0),Jo(e,n)),iu(e)}function iu(e){mu(e,new Ee("adaptation"))}function au(e){mu(e,new Ee("trackschanged"))}function su(e){mu(e,new Ee("variantchanged"))}function ou(e){mu(e,new Ee("textchanged"))}function uu(e){mu(e,new Ee("texttrackvisibility"))}function lu(e){mu(e,new Ee("abrstatuschanged",{rg:e.b.abr.enabled}))}function cu(e,t,n){e.dispatchEvent(new Ee(t,{detail:{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement}}))}function du(e){if(!e.a.error)return null;var t=e.a.error.code;if(1==t)return null;var n=e.a.error.msExtendedCode;return n&&(0>n&&(n+=Math.pow(2,32)),n=n.toString(16)),new fe(2,3,3016,t,n,e.a.error.message)}function hu(e,t){if(e.f){var n=gu(e),r=!1,i=Object.keys(t),a=1==i.length&&"00"==i[0];i.length&&n.variants.forEach(function(e){(function(e){var t=[];return e.audio&&t.push(e.audio),e.video&&t.push(e.video),t})(e).forEach(function(n){var i=e.allowedByKeySystem;n.keyId&&(n=t[a?"00":n.keyId],e.allowedByKeySystem=!!n&&!Ko.includes(n)),i!=e.allowedByKeySystem&&(r=!0)})}),(i=Qn(i=ds(e.f),hs(e.f),n.variants))&&!i.allowedByKeySystem&&ru(e,n),r&&(au(e),nu(e,n.variants))}}function fu(e,t,n){e.m&&e.m.onExpirationUpdated&&e.m.onExpirationUpdated(t,n),e.dispatchEvent(new Ee("expirationupdated"))}function pu(e,t){var n=e.g?Xe(e.g.T):{},r=Object.keys(n);r=r.length&&"00"==r[0];for(var i=!1,a=!1,s=[],o=[],u=d(t),l=u.next();!l.done;l=u.next()){var c=[];(l=l.value).audio&&c.push(l.audio),l.video&&c.push(l.video);for(var h=(c=d(c)).next();!h.done;h=c.next())if((h=h.value).keyId){var f=n[r?"00":h.keyId];f?Ko.includes(f)&&(o.includes(f)||o.push(f)):s.includes(h.keyId)||s.push(h.keyId)}l.allowedByApplication?l.allowedByKeySystem&&(i=!0):a=!0}if(!i)throw new fe(2,4,4012,{hasAppRestrictions:a,missingKeys:s,restrictedKeyStatuses:o})}function mu(e,t){f(function n(){return P(n,function(n){switch(n.j){case 1:return E(n,Promise.resolve(),2);case 2:e.h!=Su&&e.dispatchEvent(t),S(n)}})})}function vu(e){for(var t=new Set,n=(e=d(e)).next();!n.done;n=e.next())(n=n.value).language?t.add(On(n.language)):t.add("und");return t}function yu(e){for(var t=new Map,n=(e=d(e)).next();!n.done;n=e.next()){var r=n.value;n="und";var i=[];for(r.language&&(n=On(r.language)),(i="variant"==r.type?r.audioRoles:r.roles)&&i.length||(i=[""]),t.has(n)||t.set(n,new Set),i=(r=d(i)).next();!i.done;i=r.next())i=i.value,t.get(n).add(i)}var a=[];return t.forEach(function(e,t){for(var n=d(e),r=n.next();!r.done;r=n.next())a.push({language:t,role:r.value})}),a}function gu(e){for(var t=e.s.h(),n=null,r=(e=d(e.c.periods)).next();!r.done;r=e.next())(r=r.value).startTime<=t&&(n=r);return n}function _u(e){var t=gu(e);return Ta(e.$,t).variant}function bu(){return new fe(2,7,7e3)}function wu(e,t,n,r,i,a){return r==e&&i.u==a.u&&i.uri==a.uri&&i.mimeType==a.mimeType&&i.ya==a.ya?t:n}function Eu(e){return new Promise(function(t,n){e.Wa=function(){return n(bu())},e.jc=function(){return t()},e.onError=function(e){return n(e)},e.lc=function(){return n(bu())}})}jo.registerSupportPlugin=function(e,t){Go[e]=t},jo.isBrowserSupported=function(){return!!(e.Promise&&e.Uint8Array&&Array.prototype.forEach&&e.MediaKeys&&e.navigator&&e.navigator.requestMediaKeySystemAccess&&e.MediaKeySystemAccess&&e.MediaKeySystemAccess.prototype.getConfiguration)&&(!!Je()||et("application/x-mpegurl"))},jo.probeSupport=function(){return Lt().then(function(e){for(var t=Ci.Af(),n={},r=d('video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",")),i=r.next();!i.done;i=r.next()){n[i=i.value]=Je()?!!yn(i)||(MediaSource.isTypeSupported(i)||Xt(i)):et(i);var a=i.split(";")[0];n[a]=n[a]||n[i]}for(var s in e={manifest:t,media:n,drm:e},Go)e[s]=Go[s]();return e})},jo.prototype.Cb=function(e,t){if(t=void 0===t||t,this.h==Su)return Promise.reject(bu());var n={ya:null,u:null,mimeType:null,startTime:null,od:null,uri:null};n.u=e,Je()||(t=!1);var r=t?this.fb:this.M,i=ko(this.jb,function(){return{node:r,payload:n,Ta:!1}});return i.tb=function(){},Eu(i)},jo.prototype.attach=jo.prototype.Cb,jo.prototype.detach=function(){var e=this;if(this.h==Su)return Promise.reject(bu());var t=ko(this.jb,function(){return{node:e.C,payload:{ya:null,u:null,mimeType:null,startTime:null,od:null,uri:null},Ta:!1}});return t.tb=function(){},Eu(t)},jo.prototype.detach=jo.prototype.detach,jo.prototype.rd=function(e){var t=this;if(e=void 0===e||e,this.h==Su)return Promise.reject(bu());Je()||(e=!1);var n={ya:null,u:null,mimeType:null,startTime:null,od:null,uri:null},r=ko(this.jb,function(r){var i=r.u&&e?t.fb:r.u?t.M:t.C;return n.u=r.u,{node:i,payload:n,Ta:!1}});return r.tb=function(){},Eu(r)},jo.prototype.unload=jo.prototype.rd,jo.prototype.load=function(e,t,n){if(this.h==Su)return Promise.reject(bu());this.dispatchEvent(new Ee("loading"));var r={ya:null,u:null,mimeType:null,startTime:null,od:null,uri:null};r.uri=e,r.od=Date.now()/1e3,n&&"string"!=typeof n&&(nr("Loading with a manifest parser factory","Please register a manifest parser and for the mime-type."),r.ya=function(){return new n}),n&&"string"==typeof n&&(r.mimeType=n),void 0!==t&&(r.startTime=t);var i=function(e){if(e.ya)return!1;if(!Je())return!0;var t=e.mimeType;return e=e.uri||"",t||(t={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",ts:"video/mp2t",m3u8:"application/x-mpegurl",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac"}[Ci.getExtension(e)]),!!t&&(!!et(t)&&(!Ci.isSupported(e,t)||!!navigator.vendor&&navigator.vendor.includes("Apple")))}(r)?this.hb:this.T,a=ko(this.jb,function(e){return null==e.u?null:(r.u=e.u,{node:i,payload:r,Ta:!0})});return a.tb=function(){},new Promise(function(e,t){a.lc=function(){return t(new fe(2,7,7002))},a.jc=function(){return e()},a.Wa=function(){return t(bu())},a.onError=function(e){return t(e)}})},jo.prototype.load=jo.prototype.load,jo.prototype.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=No(e,t));var n=Oo(this.b,e,$o(this));return zo(this),n},jo.prototype.configure=jo.prototype.configure,jo.prototype.getConfiguration=function(){var e=$o(this);return Oo(e,this.b,$o(this)),e},jo.prototype.getConfiguration=jo.prototype.getConfiguration,jo.prototype.If=function(){for(var e in this.b)delete this.b[e];Oo(this.b,$o(this),$o(this)),zo(this)},jo.prototype.resetConfiguration=jo.prototype.If,jo.prototype.Je=function(){return this.h},jo.prototype.getLoadMode=jo.prototype.Je,jo.prototype.Ne=function(){return this.a},jo.prototype.getMediaElement=jo.prototype.Ne,jo.prototype.Fb=function(){return this.G},jo.prototype.getNetworkingEngine=jo.prototype.Fb,jo.prototype.bc=function(){return this.Bb},jo.prototype.getAssetUri=jo.prototype.bc,jo.prototype.Me=function(){return nr("getManifestUri",'Please use "getAssetUri" instead.'),this.bc()},jo.prototype.getManifestUri=jo.prototype.Me,jo.prototype.V=function(){return this.c?this.c.presentationTimeline.V():!(!this.a||!this.a.src)&&1/0==this.a.duration},jo.prototype.isLive=jo.prototype.V,jo.prototype.Va=function(){return!!this.c&&this.c.presentationTimeline.Va()},jo.prototype.isInProgress=jo.prototype.Va,jo.prototype.af=function(){if(this.c){if(!this.c.periods.length)return!1;var e=this.c.periods[0].variants;return!!e.length&&!e[0].video}return!(!this.a||!this.a.src)&&(this.a.videoTracks?0==this.a.videoTracks.length:0==this.a.videoHeight)},jo.prototype.isAudioOnly=jo.prototype.af,jo.prototype.Kf=function(){if(this.c){var e=this.c.presentationTimeline;return{start:e.mb(),end:e.za()}}return this.a&&this.a.src&&(e=this.a.seekable).length?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},jo.prototype.seekRange=jo.prototype.Kf,jo.prototype.keySystem=function(){return this.g?this.g.keySystem():""},jo.prototype.keySystem=jo.prototype.keySystem,jo.prototype.drmInfo=function(){return this.g?this.g.a:null},jo.prototype.drmInfo=jo.prototype.drmInfo,jo.prototype.dc=function(){return this.g?this.g.dc():1/0},jo.prototype.getExpiration=jo.prototype.dc,jo.prototype.Oc=function(){return!!this.P&&this.P.a==Ma},jo.prototype.isBuffering=jo.prototype.Oc,jo.prototype.Qe=function(){if(this.W){var e=this.W;e=e.f?0:e.c}else e=0;return e},jo.prototype.getPlaybackRate=jo.prototype.Qe,jo.prototype.bg=function(e){0==e?z("A trick play rate of 0 is unsupported!"):(this.a.paused&&this.a.play(),this.W.set(e),this.h==Cu&&ms(this.f,1<Math.abs(e)))},jo.prototype.trickPlay=jo.prototype.bg,jo.prototype.ue=function(){this.h==ku&&this.W.set(1),this.h==Cu&&(this.W.set(1),ms(this.f,!1))},jo.prototype.cancelTrickPlay=jo.prototype.ue,jo.prototype.Nc=function(){if(this.c&&this.s){for(var e=_u(this),t=[],n=d(function(e){return null==(e=gu(e))?[]:e.variants.filter(function(e){return Yn(e)})}(this)),r=n.next();!r.done;r=n.next()){var i=Kn(r=r.value);i.active=r==e,t.push(i)}return t}return this.a&&this.a.audioTracks?Array.from(this.a.audioTracks).map(function(e){var t=zn(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,"main"==e.kind?(t.primary=!0,t.roles=["main"],t.audioRoles=["main"]):t.audioRoles=[],t}):[]},jo.prototype.getVariantTracks=jo.prototype.Nc,jo.prototype.ob=function(){if(this.c&&this.s){for(var e=function(e){var t=gu(e);if(null==t)return null;if(!Ta(e.$,t).text){var n=$n(t.textStreams,e.ma,e.cb);n.length&&Sa(e.$,t,n[0])}return Ta(e.$,t).text}(this),t=[],n=d(function(e){var t=gu(e);return null==t?[]:t.textStreams.filter(function(t){return!e.Wb.has(t)})}(this)),r=n.next();!r.done;r=n.next()){var i=Gn(r=r.value);i.active=r==e,t.push(i)}return t}return this.a&&this.a.src&&this.a.textTracks?Array.from(this.a.textTracks).map(function(e){var t=zn(e);return t.active="disabled"!=e.mode,t.type="text",t.originalTextId=e.id,"captions"==e.kind&&(t.mimeType="application/cea-608"),t}):[]},jo.prototype.getTextTracks=jo.prototype.ob,jo.prototype.hd=function(e){if(this.c&&this.f){var t=gu(this),n=t.textStreams.find(function(t){return t.id==e.id});n&&(Xo(this,t,n,!1),Jo(this,n),this.ma=n.language)}else if(this.a&&this.a.src&&this.a.textTracks){for(n=(t=d(t=Array.from(this.a.textTracks))).next();!n.done;n=t.next())qn(n=n.value)==e.id?n.mode=this.eb?"showing":"hidden":n.mode="disabled";ou(this)}},jo.prototype.selectTextTrack=jo.prototype.hd,jo.prototype.Mf=function(){nr("selectEmbeddedTextTrack","If closed captions are signaled in the manifest, a text stream will be created to represent them. Please use SelectTextTrack.");var e=this.ob().filter(function(e){return"application/cea-608"==e.mimeType});0<e.length&&this.hd(e[0])},jo.prototype.selectEmbeddedTextTrack=jo.prototype.Mf,jo.prototype.gg=function(){nr("usingEmbeddedTextTrack","If closed captions are signaled in the manifest, a text stream will be created to represent them. There should be no reason to know if the player is playing embedded text.");var e=this.ob().filter(function(e){return e.active})[0];return!!e&&"application/cea-608"==e.mimeType},jo.prototype.usingEmbeddedTextTrack=jo.prototype.gg,jo.prototype.Of=function(e,t,n){if(n=void 0===n?0:n,this.c&&this.f){var r=gu(this);this.b.abr.enabled&&z("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var i=r.variants.find(function(t){return t.id==e.id});i&&Yn(i)&&(Yo(this,r,i,!1),Qo(this,i,t,n),this.Ub=new xa(i),nu(this,r.variants))}else if(this.a&&this.a.audioTracks){for(n=(t=d(t=Array.from(this.a.audioTracks))).next();!n.done;n=t.next())qn(n=n.value)==e.id&&(n.enabled=!0);su(this)}},jo.prototype.selectVariantTrack=jo.prototype.Of,jo.prototype.Ee=function(){return yu(this.Nc())},jo.prototype.getAudioLanguagesAndRoles=jo.prototype.Ee,jo.prototype.Xe=function(){return yu(this.ob())},jo.prototype.getTextLanguagesAndRoles=jo.prototype.Xe,jo.prototype.De=function(){return Array.from(vu(this.Nc()))},jo.prototype.getAudioLanguages=jo.prototype.De,jo.prototype.We=function(){return Array.from(vu(this.ob()))},jo.prototype.getTextLanguages=jo.prototype.We,jo.prototype.Lf=function(e,t){if(this.c&&this.s){var n=gu(this);this.Ub=new Ra(e,t||"",0),ru(this,n)}else if(this.a&&this.a.audioTracks){for(var r=(n=d(n=Array.from(this.a.audioTracks))).next();!r.done;r=n.next())(r=r.value).language==e&&(r.enabled=!0);su(this)}},jo.prototype.selectAudioLanguage=jo.prototype.Lf,jo.prototype.Nf=function(e,t){if(this.c&&this.s){var n=gu(this);this.ma=e,this.cb=t||"";var r=$n(n.textStreams,this.ma,this.cb)[0]||null;r&&(Xo(this,n,r,!1),(this.b.streaming.alwaysStreamText||this.gc())&&Jo(this,r))}else(n=this.ob().filter(function(t){return t.language==e})[0])&&this.hd(n)},jo.prototype.selectTextLanguage=jo.prototype.Nf,jo.prototype.gc=function(){var e=this.eb;return this.c?this.D.g.isTextVisible():this.a&&this.a.src&&this.a.textTracks?Array.from(this.a.textTracks).some(function(e){return"showing"==e.mode}):e},jo.prototype.isTextTrackVisible=jo.prototype.gc,jo.prototype.Rf=function(e){var t=this;return f(function n(){var r,i,a,s;return P(n,function(n){switch(n.j){case 1:if(t.eb==(r=e))return n.return();if(t.eb=r,t.h!=Cu){if(t.a&&t.a.src&&t.a.textTracks)for(var o=d(Array.from(t.a.textTracks)),u=o.next();!u.done;u=o.next())"disabled"!=(i=u.value).mode&&(i.mode=e?"showing":"hidden");n.A(2);break}if(t.D.g.setTextVisibility(e),t.b.streaming.alwaysStreamText){n.A(2);break}if(!e){(o=t.f).D=!0,(u=o.b.get("text"))&&(Ps(u),o.b.delete("text")),n.A(2);break}if(a=gu(t),!(0<(s=$n(a.textStreams,t.ma,t.cb)).length)){n.A(2);break}return E(n,ps(t.f,s[0]),2);case 2:uu(t),S(n)}})})},jo.prototype.setTextTrackVisibility=jo.prototype.Rf,jo.prototype.Se=function(){if(!this.V())return null;if(this.c)return new Date(1e3*(this.c.presentationTimeline.f+this.a.currentTime));if(this.a&&this.a.getStartDate){var e=this.a.getStartDate();return isNaN(e.getTime())?null:new Date(e.getTime()+1e3*this.a.currentTime)}return null},jo.prototype.getPlayheadTimeAsDate=jo.prototype.Se,jo.prototype.Ue=function(){if(!this.V())return null;if(this.c)return new Date(1e3*this.c.presentationTimeline.f);if(this.a&&this.a.getStartDate){var e=this.a.getStartDate();return isNaN(e.getTime())?null:e}return null},jo.prototype.getPresentationStartTimeAsDate=jo.prototype.Ue,jo.prototype.Jc=function(){var e={total:[],audio:[],video:[],text:[]};return this.h==ku&&(e.total=Ht(this.a.buffered)),this.h==Cu&&this.D.Jc(e),e},jo.prototype.getBufferedInfo=jo.prototype.Jc,jo.prototype.getStats=function(){if(this.h!=Cu&&this.h!=ku)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,estimatedBandwidth:NaN,loadLatency:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,switchHistory:[],stateHistory:[]};tu(this);var e=this.a;if(e.getVideoPlaybackQuality){e=e.getVideoPlaybackQuality();var t=this.v,n=Number(e.totalVideoFrames);t.i=Number(e.droppedVideoFrames),t.h=n}this.h==Cu&&((e=_u(this))&&(this.v.l=e.bandwidth),e&&e.video&&(t=this.v,n=e.video.height||NaN,t.m=e.video.width||NaN,t.g=n),e=this.l.getBandwidthEstimate(),this.v.f=e);var r=this.v;e=r.m,t=r.g,n=r.l;for(var i=r.h,a=r.i,s=r.f,o=r.b,u=Fo(r.a,"playing"),l=Fo(r.a,"paused"),c=Fo(r.a,"buffering"),h=function(e){function t(e){return{timestamp:e.timestamp,state:e.state,duration:e.duration}}for(var n=[],r=d(e.b),i=r.next();!i.done;i=r.next())n.push(t(i.value));return e.a&&n.push(t(e.a)),n}(r.a),f=[],p=(r=d(r.c.a)).next();!p.done;p=r.next())p=p.value,f.push({timestamp:p.timestamp,id:p.id,type:p.type,fromAdaptation:p.fromAdaptation,bandwidth:p.bandwidth});return{width:e,height:t,streamBandwidth:n,decodedFrames:i,droppedFrames:a,estimatedBandwidth:s,loadLatency:o,playTime:u,pauseTime:l,bufferingTime:c,stateHistory:h,switchHistory:f}},jo.prototype.getStats=jo.prototype.getStats,jo.prototype.addTextTrack=function(e,t,n,r,i,a){var s=this;return f(function o(){var u,l,c,d,h,f,p,m,v;return P(o,function(o){switch(o.j){case 1:if(s.h==ku)throw Error("State error!");if(s.h!=Cu)throw Error("State error!");if(u=gu(s),l=Wt,c=s.c.periods.indexOf(u),h=(d=c+1)>=s.c.periods.length?s.c.presentationTimeline.Y():s.c.periods[d].startTime,1/0==(f=h-u.startTime))throw new fe(1,4,4033);return p=new oi(1,0,f,function(){return[e]},0,null),m={id:s.Hd++,originalId:null,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return 1},getSegmentReference:function(e){return 1==e?p:null},initSegmentReference:null,presentationTimeOffset:0,mimeType:r,codecs:i||"",kind:n,encrypted:!1,keyId:null,language:t,label:a||null,type:l.qa,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,closedCaptions:null},s.Wb.add(m),u.textStreams.push(m),E(o,ps(s.f,m),2);case 2:return(v=fs(s.f,"text"))&&Sa(s.$,u,v),s.Wb.delete(m),ru(s,u),au(s),o.return(Gn(m))}})})},jo.prototype.addTextTrack=jo.prototype.addTextTrack,jo.prototype.kd=function(e,t){this.Xb.width=e,this.Xb.height=t},jo.prototype.setMaxHardwareResolution=jo.prototype.kd,jo.prototype.gd=function(){if(this.h==Cu){var e=this.f;if(e.f)e=!1;else if(e.m)e=!1;else{for(var t=d(e.b.values()),n=t.next();!n.done;n=t.next())(n=n.value).Ib&&(n.Ib=!1,Ms(e,n,.1));e=!0}}else e=!1;return e},jo.prototype.retryStreaming=jo.prototype.gd,jo.prototype.Ke=function(){return this.c},jo.prototype.getManifest=jo.prototype.Ke,jo.prototype.Le=function(){return this.m?this.m.constructor:null},jo.prototype.getManifestParserFactory=jo.prototype.Le,(n=jo.prototype).Fc=function(e){var t=this.f?ds(this.f):null,n=this.f?hs(this.f):null;if(jn(this.g,t,n,e),!(t=e.variants).some(Yn))throw new fe(2,4,4011);if(pu(this,e.variants),Vn(t,this.b.restrictions,this.Xb)&&this.f&&gu(this)==e&&au(this),e=this.g?this.g.a:null)for(n=(t=d(t)).next();!n.done;n=t.next())for(var r=(n=d(n.value.drmInfos)).next();!r.done;r=n.next())if((r=r.value).keySystem==e.keySystem)for(var i=(r=d(r.initData||[])).next();!i.done;i=r.next())i=i.value,Et(this.g,i.initDataType,i.initData)},n.df=function(e){try{this.ib=!0,this.l.disable(),lu(this);var t=nu(this,e.variants),n=$n(e.textStreams,this.ma,this.cb)[0]||null;this.Ea&&(e.variants.includes(this.Ea)&&(t=this.Ea),this.Ea=null),this.na&&(e.textStreams.includes(this.na)&&(n=this.na),this.na=null),t&&Yo(this,e,t,!0),n&&Xo(this,e,n,!0);var r=this.f,i=r.b.get("video");if(i)var a=r.c.periods[i.pa];else{var s=r.b.get("audio");a=s?r.c.periods[s.pa]:null}var o=t?t.audio:null;if(!a&&n){var u;if(u=o){e=n;var l=On(this.b.preferredTextLanguage),c=On(o.language),d=On(e.language);u=Mn(d,l)&&!Mn(c,d)}u&&(this.eb=!0),this.eb&&this.D.g.setTextVisibility(!0),uu(this)}return this.b.streaming.alwaysStreamText||this.gc()?{variant:t,text:n}:{variant:t,text:null}}catch(e){return this.Ka(e),{variant:null,text:null}}},n.te=function(){this.ib=!1,this.b.abr.enabled&&(this.l.enable(),lu(this)),this.Ea&&(vs(this.f,this.Ea,this.Dd,this.Bd),su(this),this.Ea=null),this.na&&(ys(this.f,this.na,!0,0,!1),ou(this),this.na=null)},n.jf=function(){this.m&&this.m.update&&this.m.update()},n.qf=function(){this.s&&this.s.s()},n.Ka=function(e){if(this.h!=Su){var t=new Ee("error",{detail:e});this.dispatchEvent(t),t.defaultPrevented&&(e.handled=!0)}};var Su=0,Tu=1,Cu=2,ku=3;function Iu(e,t){var n=go(new yo(e.ua(),e.aa()),t.periods[0],new ki(null,0)),r=t.appMetadata||{};return n=Au(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:r}}function Au(e){for(var t=[],n=function(e){return e.filter(function(e){return Yn(e)})}(e.variants),r=(n=d(n)).next();!r.done;r=n.next())t.push(Kn(r.value));for(n=(e=d(e.textStreams)).next();!n.done;n=e.next())t.push(Gn(n.value));return t}function Lu(){this.a={}}function xu(e,t){var n=e.a[t];return null==n&&(n=0),n}function Ru(e){this.a=!1,this.b=new pe,this.c=e}function Nu(e){var t=new Pu;e.periods.forEach(function(e,n){var r=Du(e.variants);if(0==n)for(var i=(r=d(r.a)).next();!i.done;i=r.next())t.add(i.value);else!function(e,t){e.a=e.a.filter(function(e){return Ou(t,e)})}(t,r)});for(var n=(e=d(e.periods)).next();!n.done;n=e.next())(n=n.value).variants=n.variants.filter(function(e){return Ou(t,new Mu(e))})}function Mu(e){var t=e.audio;e=e.video,this.b=t?t.mimeType:null,this.a=t?t.codecs.split(".")[0]:null,this.f=e?e.mimeType:null,this.c=e?e.codecs.split(".")[0]:null}function Pu(){this.a=[]}function Ou(e,t){return e.a.some(function(e){return t.b==e.b&&t.a==e.a&&t.f==e.f&&t.c==e.c})}function Du(e){for(var t=new Pu,n=(e=d(e)).next();!n.done;n=e.next())t.add(new Mu(n.value));return t}function Uu(e){var t=this;if(e&&e.constructor!=jo)throw new fe(2,9,9008);this.b=this.a=null,e?(this.a=e.b,this.b=e.Fb()):(this.a=Po(),this.b=new Re),this.f=!1,this.c=[],this.g=[];var n=!e;this.h=new Ru(function(){return f(function e(){var r;return P(e,function(e){switch(e.j){case 1:return r=function(){},E(e,Promise.all(t.g.map(function(e){return e.then(r,r)})),2);case 2:if(!n){e.A(3);break}return E(e,t.b.destroy(),3);case 3:t.a=null,t.b=null,S(e)}})})})}function Fu(){if(Je())e:{for(var e=d(Qs.values()),t=e.next();!t.done;t=e.next())if(t=(t=t.value)()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}function Bu(e,t){for(var n=[],r=d(e.periods),i=r.next();!i.done;i=r.next())for(var a=(i=d(i.value.streams)).next();!a.done;a=i.next())a=a.value,t&&"video"==a.contentType?n.push({contentType:$e(a.mimeType,a.codecs),robustness:e.drmInfo.videoRobustness}):t||"audio"!=a.contentType||n.push({contentType:$e(a.mimeType,a.codecs),robustness:e.drmInfo.audioRobustness});return n}function Vu(e,t,n){return f(function r(){return P(r,function(r){switch(r.j){case 1:return E(r,function(e,t,n,r){return f(function i(){var a,s,o;return P(i,function(i){switch(i.j){case 1:return r.drmInfo?(a=function(e){var t=Array.from(e.a.keys());if(!t.length)throw new fe(2,9,9e3,"No supported storage mechanisms found");return e.a.get(t[0]).getEmeSessionCell()}(n),s=r.sessionIds.map(function(e){return{sessionId:e,keySystem:r.drmInfo.keySystem,licenseUri:r.drmInfo.licenseServerUri,serverCertificate:r.drmInfo.serverCertificate,audioCapabilities:Bu(r,!1),videoCapabilities:Bu(r,!0)}}),E(i,So(t,e,s),2)):i.return();case 2:return o=i.o,E(i,a.remove(o),3);case 3:return E(i,a.add(s.filter(function(e){return-1==o.indexOf(e.sessionId)})),0)}})})}(e.b,e.a.drm,n,t),0)}})})}function ju(e,t,n,r){function i(){o+=1,e.a.offline.progressCallback(u,o/s)}var a=function(e){var t=[];return e.periods.forEach(function(e){e.streams.forEach(function(e){null!=e.initSegmentKey&&t.push(e.initSegmentKey),e.segments.forEach(function(e){t.push(e.dataKey)})})}),t}(r),s=a.length+1,o=0,u=Iu(n,r);return Promise.all([t.removeSegments(a,i),t.removeManifests([n.key()],i)])}function Hu(e,t,n,r,i,a){var s={id:a.id,originalId:a.originalId,primary:a.primary,presentationTimeOffset:a.presentationTimeOffset||0,contentType:a.type,mimeType:a.mimeType,codecs:a.codecs,frameRate:a.frameRate,kind:a.kind,language:a.language,label:a.label,width:a.width||null,height:a.height||null,initSegmentKey:null,encrypted:a.encrypted,keyId:a.keyId,segments:[],variantIds:[]};i=i.presentationTimeline.Hb();var o=a.id;return function(e,t,n){for(var r=null==(t=e.findSegmentPosition(t))?null:e.getSegmentReference(t);r;)n(r),r=e.getSegmentReference(++t)}(a,i,function(i){var u=Ii(i.c(),i.b,i.a,e.a.streaming.retryParameters);js(t,o,u,function(e,t,n){return n=n.endTime-n.startTime,xu(e,t)*n}(r,a.id,i),function(t){return n.addSegments([{data:t}]).then(function(t){e.c.push(t[0]),s.segments.push({startTime:i.startTime,endTime:i.endTime,dataKey:t[0]})})})}),(i=a.initSegmentReference)&&(i=Ii(i.c(),i.b,i.a,e.a.streaming.retryParameters),js(t,o,i,.5*xu(r,a.id),function(t){return n.addSegments([{data:t}]).then(function(t){e.c.push(t[0]),s.initSegmentKey=t[0]})})),s}function Ku(e){if(e.h.a)throw new fe(2,9,7001)}function Gu(){if(!Fu())throw new fe(2,9,9e3)}function qu(e,t){return f(function n(){return P(n,function(n){switch(n.j){case 1:return e.g.push(t),C(n,2),E(n,t,4);case 4:return n.return(n.o);case 2:A(n),Ie(e.g,t),L(n,0)}})})}function Wu(e){for(var t=new Set,n=(e=d(e.periods)).next();!n.done;n=e.next()){for(var r=d((n=n.value).textStreams),i=r.next();!i.done;i=r.next())t.add(i.value);for(r=(n=d(n.variants)).next();!r.done;r=n.next())(r=r.value).audio&&t.add(r.audio),r.video&&t.add(r.video)}return t}function zu(e){e.variants.map(function(e){return e.video});var t=new Set(e.variants.map(function(e){return e.audio}));e=e.textStreams;for(var n=d(t),r=n.next();!r.done;r=n.next())for(var i=(r=d(t)).next();!i.done;i=r.next());for(n=(t=d(e)).next();!n.done;n=t.next())for(r=(n=d(e)).next();!r.done;r=n.next());}jo.LoadMode={DESTROYED:Su,NOT_LOADED:Tu,MEDIA_SOURCE:Cu,SRC_EQUALS:ku},Ru.prototype.destroy=function(){var e=this;return this.a?this.b:(this.a=!0,this.c().then(function(){e.b.resolve()},function(){e.b.resolve()}))},Pu.prototype.add=function(e){Ou(this,e)||this.a.push(e)},V("shaka.offline.Storage",Uu),Uu.support=Fu,Uu.prototype.destroy=function(){return this.h.destroy()},Uu.prototype.destroy=Uu.prototype.destroy,Uu.prototype.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=No(e,t));var n=e,r=!1;return null!=n.trackSelectionCallback&&(r=!0,n.offline=n.offline||{},n.offline.trackSelectionCallback=n.trackSelectionCallback,delete n.trackSelectionCallback),null!=n.progressCallback&&(r=!0,n.offline=n.offline||{},n.offline.progressCallback=n.progressCallback,delete n.progressCallback),null!=n.usePersistentLicense&&(r=!0,n.offline=n.offline||{},n.offline.usePersistentLicense=n.usePersistentLicense,delete n.usePersistentLicense),r&&nr("Storage.configure with OfflineConfig","Please configure storage with a player configuration."),Oo(this.a,e)},Uu.prototype.configure=Uu.prototype.configure,Uu.prototype.getConfiguration=function(){var e=Po();return Oo(e,this.a,Po()),e},Uu.prototype.getConfiguration=Uu.prototype.getConfiguration,Uu.prototype.Fb=function(){return this.b},Uu.prototype.getNetworkingEngine=Uu.prototype.Fb,Uu.prototype.store=function(e,t,n){var r=this;return qu(this,function(e,t,n,r){return f(function i(){var a,s,o,u,l,c,h,p,m;return P(i,function(i){switch(i.j){case 1:return Gu(),e.f?i.return(Promise.reject(new fe(2,9,9006))):(e.f=!0,E(i,function(e,t,n){return f(function r(){var i,a,s,o,u,l;return P(r,function(r){switch(r.j){case 1:return i=null,a=e.b,s={networkingEngine:a,filterAllPeriods:function(){},filterNewPeriod:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(e){i=e}},E(r,n(),2);case 2:return(o=r.o).configure(e.a.manifest),Ku(e),C(r,3),E(r,o.start(t,s),5);case 5:return u=r.o,Ku(e),l=Wu(u),E(r,Promise.all(Array.from(l).map(function(e){return e.createSegmentIndex()})),6);case 6:if(Ku(e),i)throw i;return r.return(u);case 3:return A(r),E(r,o.stop(),7);case 7:L(r,0)}})})}(e,t,r),2));case 2:if(a=i.o,Ku(e),!(!a.presentationTimeline.V()&&!a.presentationTimeline.Va()))throw new fe(2,9,9005,t);return s=null,o=new Xs,l=u=null,T(i,3,4),E(i,function(e,t,n){return f(function r(){var i,a,s;return P(r,function(r){switch(r.j){case 1:return i=new yt({rb:e.b,onError:n,kc:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),a=Ha(t.periods),s=e.a,i.configure(s.drm),E(r,function(e,t,n){return e.s=[],e.D=n,_t(e,t)}(i,a,s.offline.usePersistentLicense),2);case 2:return E(r,bt(i),3);case 3:return E(r,wt(i),4);case 4:return r.return(i)}})})}(e,a,function(e){l=l||e}),6);case 6:if(s=i.o,Ku(e),l)throw l;return function(e,t,n){(function(e,t){for(var n={width:1/0,height:1/0},r=d(e.periods),i=r.next();!i.done;i=r.next())(i=i.value).variants=i.variants.filter(function(e){return Bn(e,t,n)})})(t,e.a.restrictions),function(e){for(var t=(e=d(e.periods)).next();!t.done;t=e.next())(t=t.value).variants=t.variants.filter(function(e){var t=!0;return e.audio&&(t=t&&En(e.audio)),e.video&&(t=t&&En(e.video)),t})}(t),function(e,t){for(var n=d(e.periods),r=n.next();!r.done;r=n.next())(r=r.value).variants=r.variants.filter(function(e){return xt(t,e)})}(t,n),Nu(t),function(e,t){var n=new Pu;e.periods.forEach(function(e,r){0<r&&(e.variants=e.variants.filter(function(e){return Ou(n,new Mu(e))})),t(e),n=Du(e.variants)})}(t,function(t){for(var n=[],r=d(t.variants),i=r.next();!i.done;i=r.next())n.push(Kn(i.value));for(i=(r=d(t.textStreams)).next();!i.done;i=r.next())n.push(Gn(i.value));n=e.a.offline.trackSelectionCallback(n);var a=new Set,s=new Set;for(r=(n=d(n)).next();!r.done;r=n.next())"variant"==(r=r.value).type&&a.add(r.id),"text"==r.type&&s.add(r.id);t.variants=t.variants.filter(function(e){return a.has(e.id)}),t.textStreams=t.textStreams.filter(function(e){return s.has(e.id)})}),function(e){if(0==e.periods.length)throw new fe(2,4,4014);for(var t=(e=d(e.periods)).next();!t.done;t=e.next())zu(t.value)}(t)}(e,a,s),E(i,o.init(),7);case 7:return Ku(e),E(i,function(e){var t=null;if(e.a.forEach(function(e,n){e.getCells().forEach(function(e,r){e.hasFixedKeySpace()||t||(t={path:{ua:n,aa:r},aa:e})})}),t)return t;throw new fe(2,9,9013,"Could not find a cell that supports add-operations")}(o),8);case 8:return u=i.o,Ku(e),E(i,function(e,t,n,r,i,a){return f(function s(){var o,u,l,c;return P(s,function(s){switch(s.j){case 1:return o=function(e,t,n){var r=null==t.expiration?1/0:t.expiration;return{offlineUri:null,originalManifestUri:e,duration:t.presentationTimeline.Y(),size:0,expiration:r,tracks:t=Au(t.periods[0]),appMetadata:n}}(i,r,a),u=new Vs(e.b,function(t,n){o.size=n,e.a.offline.progressCallback(o,t)}),C(s,2),c=l=function(e,t,n,r,i,a,s){var o=new Lu,u=i.periods.map(function(r){return function(e,t,n,r,i,a){i.periods.forEach(function(e){e.variants.forEach(function(e){var t=e.audio,n=e.video;if(t&&!n&&(r.a[t.id]=t.bandwidth||e.bandwidth),!t&&n&&(r.a[n.id]=n.bandwidth||e.bandwidth),t&&n){var i=t.bandwidth||393216,a=n.bandwidth||e.bandwidth-i;0>=a&&(a=e.bandwidth),r.a[t.id]=i,r.a[n.id]=a}}),e.textStreams.forEach(function(e){r.a[e.id]=52})});for(var s=Wu(i),o=new Map,u=(s=d(s)).next();!u.done;u=s.next()){u=u.value;var l=Hu(e,t,n,r,i,u);o.set(u.id,l)}return a.variants.forEach(function(e){e.audio&&o.get(e.audio.id).variantIds.push(e.id),e.video&&o.get(e.video.id).variantIds.push(e.id)}),{startTime:a.startTime,streams:Array.from(o.values())}}(e,t,n,o,i,r)}),l=r.a,c=Tt(r);if(l&&e.a.offline.usePersistentLicense){if(!c.length)throw new fe(2,9,9007,a);l.initData=[]}return{originalManifestUri:a,duration:i.presentationTimeline.Y(),size:0,expiration:r.dc(),periods:u,sessionIds:e.a.offline.usePersistentLicense?c:[],drmInfo:l,appMetadata:s}}(e,u,t,n,r,i,a),E(s,function(e){return f(function t(){return P(t,function(t){switch(t.j){case 1:return E(t,Promise.all(e.b.values()),2);case 2:return t.return(e.a.a)}})})}(u),4);case 4:return c.size=s.o,s.return(l);case 2:return A(s),E(s,u.destroy(),5);case 5:L(s,0)}})})}(e,u.aa,s,a,t,n),9);case 9:if(c=i.o,Ku(e),l)throw l;return E(i,u.aa.addManifests([c]),10);case 10:return h=i.o,Ku(e),p=new mo("manifest",u.path.ua,u.path.aa,h[0]),i.return(Iu(p,c));case 4:return A(i),e.f=!1,e.c=[],E(i,o.destroy(),11);case 11:if(!s){i.A(12);break}return E(i,s.destroy(),12);case 12:L(i,0);break;case 3:if(m=I(i),!u){i.A(14);break}return E(i,u.aa.removeSegments(e.c,function(){}),14);case 14:throw l||m}})})}(this,e,t||{},function(){return f(function t(){var i,a;return P(t,function(t){switch(t.j){case 1:return n&&"string"!=typeof n?(nr("Storing with a manifest parser factory","Please register a manifest parser and for the mime-type."),i=n,t.return(new i)):E(t,Ci.create(e,r.b,r.a.manifest.retryParameters,n),2);case 2:return a=t.o,t.return(a)}})})}))},Uu.prototype.store=Uu.prototype.store,Uu.prototype.Ve=function(){return this.f},Uu.prototype.getStoreInProgress=Uu.prototype.Ve,Uu.prototype.remove=function(e){return qu(this,function(e,t){return f(function n(){var r,i,a,s,o,u;return P(n,function(n){switch(n.j){case 1:return Gu(),null==(r=vo(t))||"manifest"!=r.a?n.return(Promise.reject(new fe(2,9,9004,t))):(i=r,a=new Xs,C(n,2),E(n,a.init(),4));case 4:return E(n,$s(a,i.ua(),i.aa()),5);case 5:return E(n,(s=n.o).getManifests([i.key()]),6);case 6:return o=n.o,u=o[0],E(n,Promise.all([Vu(e,u,a),ju(e,s,i,u)]),2);case 2:return A(n),E(n,a.destroy(),8);case 8:L(n,0)}})})}(this,e))},Uu.prototype.remove=Uu.prototype.remove,Uu.prototype.Ff=function(){return qu(this,function(e){return f(function t(){var n,r,i,a,s,o,u,l,c;return P(t,function(t){switch(t.j){case 1:return Gu(),n=e.b,r=e.a.drm,i=new Xs,a=!1,C(t,2),E(t,i.init(),4);case 4:for(s=[],function(e,t){e.a.forEach(function(e){t(e.getEmeSessionCell())})}(i,function(e){return s.push(e)}),o=Promise.resolve(),u={},l=d(s),c=l.next();!c.done;u={qc:u.qc},c=l.next())u.qc=c.value,o=o.then(function(e){return function(){return f(function t(){var i,s;return P(t,function(t){switch(t.j){case 1:return E(t,e.qc.getAll(),2);case 2:return i=t.o,E(t,So(r,n,i),3);case 3:return s=t.o,E(t,e.qc.remove(s),4);case 4:s.length!=i.length&&(a=!0),S(t)}})})}}(u));return E(t,o,2);case 2:return A(t),E(t,i.destroy(),6);case 6:L(t,3);break;case 3:return t.return(!a)}})})}(this))},Uu.prototype.removeEmeSessions=Uu.prototype.Ff,Uu.prototype.list=function(){return qu(this,f(function e(){var t,n,r;return P(e,function(e){switch(e.j){case 1:return Gu(),t=[],n=new Xs,C(e,2),E(e,n.init(),4);case 4:return r=Promise.resolve(),function(e,t){e.a.forEach(function(e,n){e.getCells().forEach(function(e,r){t({ua:n,aa:r},e)})})}(n,function(e,n){r=r.then(function(){return f(function r(){return P(r,function(r){switch(r.j){case 1:return E(r,n.getAllManifests(),2);case 2:r.o.forEach(function(n,r){var i=Iu(new mo("manifest",e.ua,e.aa,r),n);t.push(i)}),S(r)}})})})}),E(e,r,2);case 2:return A(e),E(e,n.destroy(),6);case 6:L(e,3);break;case 3:return e.return(t)}})}))},Uu.prototype.list=Uu.prototype.list,Uu.deleteAll=function(){return f(function e(){var t;return P(e,function(e){switch(e.j){case 1:return t=new Xs,C(e,2),E(e,t.erase(),2);case 2:return A(e),E(e,t.destroy(),5);case 5:L(e,0)}})})},Go.offline=Fu,V("shaka.polyfill.installAll",function(){for(var e=0;e<$u.length;++e)$u[e].re()});var Yu,Xu,$u=[];function Zu(e,t){for(var n={priority:t=t||0,re:e},r=0;r<$u.length;r++)if($u[r].priority<t)return void $u.splice(r,0,n);$u.push(n)}function Qu(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase();if("function"==typeof Event)var n=new Event(t,e);else(n=document.createEvent("Event")).initEvent(t,e.bubbles,e.cancelable);e.target.dispatchEvent(n)}function Ju(e,t,n){if("input"==e)switch(this.type){case"range":e="change"}HTMLInputElement.prototype.originalAddEventListener.call(this,e,t,n)}function el(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(t){for(var n=[],r=0;r<arguments.length;++r)n[r]=arguments[r];return(n=e.apply(this,n)).abort=function(){},n}}function tl(e){var t=e.target,n=t.mediaSource_;if(n.Ed){for(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),t.xd=!0,e=0;e<n.sourceBuffers.length;++e)if(0==n.sourceBuffers[e].xd)return;n.Ed=!1}}function nl(e){e=e.target;for(var t=0;t<e.sourceBuffers.length;++t)e.sourceBuffers[t].removeEventListener("updateend",tl,!1);e.removeEventListener("sourceclose",nl,!1)}function rl(e,t){try{var n=new il(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function il(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(var n=d(t),r=n.next();!r.done;r=n.next()){var i=r.value;if("required"==i.persistentState)r=null;else{r={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:i.initDataTypes,sessionTypes:["temporary"],label:i.label};var a=!1,s=!1;if(i.audioCapabilities)for(var o=d(i.audioCapabilities),u=o.next();!u.done;u=o.next())if((u=u.value).contentType){a=!0;var l=u.contentType.split(";")[0];WebKitMediaKeys.isTypeSupported(this.keySystem,l)&&(r.audioCapabilities.push(u),s=!0)}if(i.videoCapabilities)for(u=(i=d(i.videoCapabilities)).next();!u.done;u=i.next())(o=u.value).contentType&&(a=!0,u=o.contentType.split(";")[0],WebKitMediaKeys.isTypeSupported(this.keySystem,u)&&(r.videoCapabilities.push(o),s=!0));a||(s=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),r=s?r:null}if(r)return void(this.a=r)}throw(n=Error("Unsupported keySystem")).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function al(e){var t=this.mediaKeys;return t&&t!=e&&ol(t,null),delete this.mediaKeys,(this.mediaKeys=e)?ol(e,this):Promise.resolve()}function sl(e){this.b=new WebKitMediaKeys(e),this.a=new He}function ol(e,t){if(e.a.Ya(),!t)return Promise.resolve();e.a.w(t,"webkitneedkey",ll);try{return 1<=t.readyState?t.webkitSetMediaKeys(e.b):e.a.da(t,"loadedmetadata",function(){t.webkitSetMediaKeys(e.b)}),Promise.resolve()}catch(e){return Promise.reject(e)}}function ul(e){Te.call(this),this.b=null,this.g=e,this.c=this.a=null,this.f=new He,this.sessionId="",this.expiration=NaN,this.closed=new pe,this.keyStatuses=new dl}function ll(e){var t=new Event("encrypted");t.initDataType="cenc",t.initData=e.initData,this.dispatchEvent(t)}function cl(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.a=t,e.dispatchEvent(new Ee("keystatuseschange"))}function dl(){this.size=0,this.a=void 0}function hl(e,t){try{var n=new fl(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function fl(e,t){this.keySystem=e;for(var n=!1,r=0;r<t.length;++r){var i=t[r],a={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:i.initDataTypes,sessionTypes:["temporary"],label:i.label},s=!1;if(i.audioCapabilities)for(var o=0;o<i.audioCapabilities.length;++o){var u=i.audioCapabilities[o];if(u.contentType){s=!0;var l=u.contentType.split(";")[0];MSMediaKeys.isTypeSupported(this.keySystem,l)&&(a.audioCapabilities.push(u),n=!0)}}if(i.videoCapabilities)for(o=0;o<i.videoCapabilities.length;++o)(u=i.videoCapabilities[o]).contentType&&(s=!0,l=u.contentType.split(";")[0],MSMediaKeys.isTypeSupported(this.keySystem,l)&&(a.videoCapabilities.push(u),n=!0));if(s||(n=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),"required"==i.persistentState&&(n=!1),n)return void(this.a=a)}throw(n=Error("Unsupported keySystem")).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function pl(e){var t=this.mediaKeys;return t&&t!=e&&vl(t,null),delete this.mediaKeys,(this.mediaKeys=e)?vl(e,this):Promise.resolve()}function ml(e){this.a=new MSMediaKeys(e),this.b=new He}function vl(e,t){if(e.b.Ya(),!t)return Promise.resolve();e.b.w(t,"msneedkey",gl);var n=e;try{return 1<=t.readyState?t.msSetMediaKeys(e.a):t.addEventListener("loadedmetadata",function e(){t.msSetMediaKeys(n.a),t.removeEventListener("loadedmetadata",e)}),Promise.resolve()}catch(e){return Promise.reject(e)}}function yl(e){Te.call(this),this.c=null,this.g=e,this.b=this.a=null,this.f=new He,this.sessionId="",this.expiration=NaN,this.closed=new pe,this.keyStatuses=new bl}function gl(e){if(e.initData){var t=document.createEvent("CustomEvent");t.initCustomEvent("encrypted",!1,!1,null),t.initDataType="cenc",t.initData=function(e){if(!e)return e;var t=new Yr(e);if(1>=t.a.length)return e;for(var n=[],r=0;r<t.a.length;r++)n.push(e.subarray(t.a[r].start,t.a[r].end+1));for(e=[],t={},r=d(n),n=r.next();!n.done;t={fc:t.fc},n=r.next())t.fc=n.value,e.some(function(e){return function(t){return mt(t,e.fc)}}(t))||e.push(t.fc);for(t=0,r=d(e),n=r.next();!n.done;n=r.next())t+=n.value.length;for(t=new Uint8Array(t),r=0,e=d(e),n=e.next();!n.done;n=e.next())n=n.value,t.set(n,r),r+=n.length;return t}(e.initData),this.dispatchEvent(t)}}function _l(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.a=t,e.dispatchEvent(new Ee("keystatuseschange"))}function bl(){this.size=0,this.a=void 0}function wl(){return Promise.reject(Error("The key system specified is not supported."))}function El(e){return null==e?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function Sl(){throw new TypeError("Illegal constructor.")}function Tl(){throw new TypeError("Illegal constructor.")}V("shaka.polyfill.register",Zu),Zu(function(){if(e.Document){var t=Element.prototype;t.requestFullscreen=t.requestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||t.webkitRequestFullscreen,(t=Document.prototype).exitFullscreen=t.exitFullscreen||t.mozCancelFullScreen||t.msExitFullscreen||t.webkitExitFullscreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitSupportsFullscreen||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",Qu),document.addEventListener("webkitfullscreenerror",Qu),document.addEventListener("mozfullscreenchange",Qu),document.addEventListener("mozfullscreenerror",Qu),document.addEventListener("MSFullscreenChange",Qu),document.addEventListener("MSFullscreenError",Qu)}}),Zu(function(){tt("CrKey")&&delete e.indexedDB}),Zu(function(){tt("Trident/")&&!HTMLInputElement.prototype.originalAddEventListener&&(HTMLInputElement.prototype.originalAddEventListener=HTMLInputElement.prototype.addEventListener,HTMLInputElement.prototype.addEventListener=Ju)}),Zu(function(){navigator.languages||Object.defineProperty(navigator,"languages",{get:function(){return navigator.language?[navigator.language]:["en"]}})}),Zu(function(){}),Zu(function(){if(e.MediaSource)if(e.cast&&cast.__platform__&&cast.__platform__.canDisplayType)!function(){var e=MediaSource.isTypeSupported,t=/^dv(?:h[e1]|a[v1])\./;MediaSource.isTypeSupported=function(n){for(var r=n.split(/ *; */),i=r[0],a={},s=1;s<r.length;++s){var o=r[s].split("="),u=o[0];o=o[1].replace(/"(.*)"/,"$1"),a[u]=o}if(!(r=a.codecs))return e(n);var l=!1,c=!1;for(var d in n=r.split(",").filter(function(e){return t.test(e)&&(c=!0),/^(hev|hvc)1\.2/.test(e)&&(l=!0),!0}),c&&(l=!1),a.codecs=n.join(","),l&&(a.eotf="smpte2084"),a)i+="; "+d+'="'+a[d]+'"';return cast.__platform__.canDisplayType(i)}}();else if(navigator.vendor&&navigator.vendor.includes("Apple")){var t=navigator.appVersion;!function(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"mp2t"!=t.split(/ *; */)[0].split("/")[1].toLowerCase()&&e(t)}}(),t.includes("Version/8")?e.MediaSource=null:t.includes("Version/9")?el():t.includes("Version/10")?(el(),function(){var e=MediaSource.prototype.endOfStream;MediaSource.prototype.endOfStream=function(t){for(var n=[],r=0;r<arguments.length;++r)n[r]=arguments[r];for(var i=r=0;i<this.sourceBuffers.length;++i){var a=this.sourceBuffers[i];a=a.buffered.end(a.buffered.length-1),r=Math.max(r,a)}if(!isNaN(this.duration)&&r<this.duration)for(this.Ed=!0,r=0;r<this.sourceBuffers.length;++r)this.sourceBuffers[r].xd=!1;return e.apply(this,n)};var t=!1,n=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(e){for(var r=[],i=0;i<arguments.length;++i)r[i]=arguments[i];return(r=n.apply(this,r)).mediaSource_=this,r.addEventListener("updateend",tl,!1),t||(this.addEventListener("sourceclose",nl,!1),t=!0),r}}()):(t.includes("Version/11")||t.includes("Version/12"))&&(el(),function(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}())}else tt("Tizen")&&function(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"opus"!=Ze(t)[0]&&e(t)}}()}),il.prototype.createMediaKeys=function(){var e=new sl(this.keySystem);return Promise.resolve(e)},il.prototype.getConfiguration=function(){return this.a},sl.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new ul(this.b,e)},sl.prototype.setServerCertificate=function(e){return e&&new Uint8Array(e),Promise.resolve(!0)},j(ul,Te),(n=ul.prototype).generateRequest=function(e,t){this.a=new pe;try{this.b=this.g.createSession("video/mp4",new Uint8Array(t)),this.sessionId=this.b.sessionId||"",this.f.w(this.b,"webkitkeymessage",this.Wf.bind(this)),this.f.w(this.b,"webkitkeyadded",this.Uf.bind(this)),this.f.w(this.b,"webkitkeyerror",this.Vf.bind(this)),cl(this,"status-pending")}catch(e){this.a.reject(e)}return this.a},n.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},n.update=function(e){this.c=new pe;try{this.b.update(new Uint8Array(e))}catch(e){this.c.reject(e)}return this.c},n.close=function(){try{this.b.close(),this.closed.resolve(),this.f.Ya()}catch(e){this.closed.reject(e)}return this.closed},n.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},n.Wf=function(e){this.a&&(this.a.resolve(),this.a=null),this.dispatchEvent(new Ee("message",{messageType:null==this.keyStatuses.a?"license-request":"license-renewal",message:e.message.buffer}))},n.Uf=function(){this.c&&(cl(this,"usable"),this.c.resolve(),this.c=null)},n.Vf=function(){var e=Error("EME PatchedMediaKeysApple key error");if(e.errorCode=this.b.error,null!=this.a)this.a.reject(e),this.a=null;else if(null!=this.c)this.c.reject(e),this.c=null;else switch(this.b.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:cl(this,"output-not-allowed");break;default:cl(this,"internal-error")}},(n=dl.prototype).forEach=function(e){this.a&&e(this.a,Yu)},n.get=function(e){if(this.has(e))return this.a},n.has=function(e){var t=Yu;return!(!this.a||!mt(new Uint8Array(e),new Uint8Array(t)))},n.entries=function(){},n.keys=function(){},n.values=function(){},Zu(function(){e.HTMLVideoElement&&e.WebKitMediaKeys&&(Yu=new Uint8Array([0]).buffer,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=al,e.MediaKeys=sl,e.MediaKeySystemAccess=il,navigator.requestMediaKeySystemAccess=rl)}),fl.prototype.createMediaKeys=function(){var e=new ml(this.keySystem);return Promise.resolve(e)},fl.prototype.getConfiguration=function(){return this.a},ml.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new yl(this.a,e)},ml.prototype.setServerCertificate=function(){return Promise.resolve(!1)},j(yl,Te),(n=yl.prototype).generateRequest=function(e,t){this.a=new pe;try{this.c=this.g.createSession("video/mp4",new Uint8Array(t),null),this.f.w(this.c,"mskeymessage",this.nf.bind(this)),this.f.w(this.c,"mskeyadded",this.lf.bind(this)),this.f.w(this.c,"mskeyerror",this.mf.bind(this)),_l(this,"status-pending")}catch(e){this.a.reject(e)}return this.a},n.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},n.update=function(e){this.b=new pe;try{this.c.update(new Uint8Array(e))}catch(e){this.b.reject(e)}return this.b},n.close=function(){try{this.c.close(),this.closed.resolve(),this.f.Ya()}catch(e){this.closed.reject(e)}return this.closed},n.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},n.nf=function(e){this.a&&(this.a.resolve(),this.a=null),this.dispatchEvent(new Ee("message",{messageType:null==this.keyStatuses.a?"license-request":"license-renewal",message:e.message.buffer}))},n.lf=function(){this.a?(_l(this,"usable"),this.a.resolve(),this.a=null):this.b&&(_l(this,"usable"),this.b.resolve(),this.b=null)},n.mf=function(){var e=Error("EME PatchedMediaKeysMs key error");if(e.errorCode=this.c.error,null!=this.a)this.a.reject(e),this.a=null;else if(null!=this.b)this.b.reject(e),this.b=null;else switch(this.c.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:_l(this,"output-not-allowed");break;default:_l(this,"internal-error")}},(n=bl.prototype).forEach=function(e){this.a&&e(this.a,Xu)},n.get=function(e){if(this.has(e))return this.a},n.has=function(e){var t=Xu;return!(!this.a||!mt(new Uint8Array(e),new Uint8Array(t)))},n.entries=function(){},n.keys=function(){},n.values=function(){},Zu(function(){!e.HTMLVideoElement||!e.MSMediaKeys||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(Xu=new Uint8Array([0]).buffer,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=pl,e.MediaKeys=ml,e.MediaKeySystemAccess=fl,navigator.requestMediaKeySystemAccess=hl)}),Sl.prototype.createSession=function(){},Sl.prototype.setServerCertificate=function(){},Tl.prototype.getConfiguration=function(){},Tl.prototype.createMediaKeys=function(){},Zu(function(){!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=wl,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=El,e.MediaKeys=Sl,e.MediaKeySystemAccess=Tl)},-10);var Cl,kl="";function Il(e){return kl?kl+e.charAt(0).toUpperCase()+e.slice(1):e}function Al(e,t){try{var n=new xl(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function Ll(e){var t=this.mediaKeys;return t&&t!=e&&Nl(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&Nl(e,this),Promise.resolve()}function xl(e,t){this.a=this.keySystem=e;var n=!1;"org.w3.clearkey"==e&&(this.a="webkit-org.w3.clearkey",n=!1);var r=!1,i=document.getElementsByTagName("video");i=i.length?i[0]:document.createElement("video");for(var a=0;a<t.length;++a){var s=t[a],o={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:s.initDataTypes,sessionTypes:["temporary"],label:s.label},u=!1;if(s.audioCapabilities)for(var l=0;l<s.audioCapabilities.length;++l){var c=s.audioCapabilities[l];if(c.contentType){u=!0;var d=c.contentType.split(";")[0];i.canPlayType(d,this.a)&&(o.audioCapabilities.push(c),r=!0)}}if(s.videoCapabilities)for(l=0;l<s.videoCapabilities.length;++l)(c=s.videoCapabilities[l]).contentType&&(u=!0,i.canPlayType(c.contentType,this.a)&&(o.videoCapabilities.push(c),r=!0));if(u||(r=i.canPlayType("video/mp4",this.a)||i.canPlayType("video/webm",this.a)),"required"==s.persistentState&&(n?(o.persistentState="required",o.sessionTypes=["persistent-license"]):r=!1),r)return void(this.b=o)}throw n="Unsupported keySystem","org.w3.clearkey"!=e&&"com.widevine.alpha"!=e||(n="None of the requested configurations were supported."),(n=Error(n)).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function Rl(e){this.g=e,this.b=null,this.a=new He,this.c=[],this.f={}}function Nl(e,t){e.b=t,e.a.Ya();var n=kl;t&&(e.a.w(t,n+"needkey",e.tf.bind(e)),e.a.w(t,n+"keymessage",e.Zf.bind(e)),e.a.w(t,n+"keyadded",e.Xf.bind(e)),e.a.w(t,n+"keyerror",e.Yf.bind(e)))}function Ml(e,t){var n=e.f[t];return n||((n=e.c.shift())?(n.sessionId=t,e.f[t]=n):null)}function Pl(e,t,n){Te.call(this),this.f=e,this.h=!1,this.a=this.b=null,this.c=t,this.g=n,this.sessionId="",this.expiration=NaN,this.closed=new pe,this.keyStatuses=new Ul}function Ol(e,t,n){if(e.h)return Promise.reject(Error("The session is already initialized."));e.h=!0;try{if("persistent-license"==e.g)if(n)var r=new Uint8Array(ot("LOAD_SESSION|"+n));else{var i=ot("PERSISTENT|"),a=new Uint8Array(i.byteLength+t.byteLength);a.set(new Uint8Array(i),0),a.set(new Uint8Array(t),i.byteLength),r=a}else r=new Uint8Array(t)}catch(e){return Promise.reject(e)}e.b=new pe;var s=Il("generateKeyRequest");try{e.f[s](e.c,r)}catch(t){if("InvalidStateError"!=t.name)return e.b=null,Promise.reject(t);new ce(function(){try{e.f[s](e.c,r)}catch(t){e.b.reject(t),e.b=null}}).O(.01)}return e.b}function Dl(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.a=t,e.dispatchEvent(new Ee("keystatuseschange"))}function Ul(){this.size=0,this.a=void 0}function Fl(e){if("picture-in-picture"==(e=e.target).webkitPresentationMode){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function Bl(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function Vl(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function jl(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function Hl(t,n,r){return new e.TextTrackCue(t,n,r)}function Kl(t,n,r){return new e.TextTrackCue(t+"-"+n+"-"+r,t,n,r)}function Gl(){}xl.prototype.createMediaKeys=function(){var e=new Rl(this.a);return Promise.resolve(e)},xl.prototype.getConfiguration=function(){return this.b},(n=Rl.prototype).createSession=function(e){if("temporary"!=(e=e||"temporary")&&"persistent-license"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.b||document.createElement("video");return t.src||(t.src="about:blank"),e=new Pl(t,this.g,e),this.c.push(e),e},n.setServerCertificate=function(){return Promise.resolve(!1)},n.tf=function(e){var t=document.createEvent("CustomEvent");t.initCustomEvent("encrypted",!1,!1,null),t.initDataType="webm",t.initData=e.initData,this.b.dispatchEvent(t)},n.Zf=function(e){var t=Ml(this,e.sessionId);t&&(e=new Ee("message",{messageType:null==t.keyStatuses.a?"licenserequest":"licenserenewal",message:e.message}),t.b&&(t.b.resolve(),t.b=null),t.dispatchEvent(e))},n.Xf=function(e){(e=Ml(this,e.sessionId))&&(Dl(e,"usable"),e.a&&e.a.resolve(),e.a=null)},n.Yf=function(e){var t=Ml(this,e.sessionId);t&&t.handleError(e)},j(Pl,Te),(n=Pl.prototype).handleError=function(e){var t=Error("EME v0.1b key error");t.errorCode=e.errorCode,t.errorCode.systemCode=e.systemCode,!e.sessionId&&this.b?(t.method="generateRequest",45==e.systemCode&&(t.message="Unsupported session type."),this.b.reject(t),this.b=null):e.sessionId&&this.a?(t.method="update",this.a.reject(t),this.a=null):(t=e.systemCode,e.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?Dl(this,"output-restricted"):Dl(this,1==t?"expired":"internal-error"))},n.nd=function(e,t){if(this.a)this.a.then(this.nd.bind(this,e,t)).catch(this.nd.bind(this,e,t));else{if(this.a=e,"webkit-org.w3.clearkey"==this.c){var n=it(t),r=JSON.parse(n);"oct"!=r.keys[0].kty&&(this.a.reject(Error("Response is not a valid JSON Web Key Set.")),this.a=null),n=ht(r.keys[0].k),r=ht(r.keys[0].kid)}else n=new Uint8Array(t),r=null;var i=Il("addKey");try{this.f[i](this.c,n,r,this.sessionId)}catch(e){this.a.reject(e),this.a=null}}},n.generateRequest=function(e,t){return Ol(this,t,null)},n.load=function(e){return"persistent-license"==this.g?Ol(this,null,e):Promise.reject(Error("Not a persistent session."))},n.update=function(e){var t=new pe;return this.nd(t,e),t},n.close=function(){if("persistent-license"!=this.g){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=Il("cancelKeyRequest");try{this.f[e](this.c,this.sessionId)}catch(e){}}return this.closed.resolve(),this.closed},n.remove=function(){return"persistent-license"!=this.g?Promise.reject(Error("Not a persistent session.")):this.close()},(n=Ul.prototype).forEach=function(e){this.a&&e(this.a,Cl)},n.get=function(e){if(this.has(e))return this.a},n.has=function(e){var t=Cl;return!(!this.a||!mt(new Uint8Array(e),new Uint8Array(t)))},n.entries=function(){},n.keys=function(){},n.values=function(){},Zu(function(){if(!(!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)kl="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;Cl=new Uint8Array([0]).buffer,navigator.requestMediaKeySystemAccess=Al,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Ll,e.MediaKeys=Rl,e.MediaKeySystemAccess=xl}}),Zu(function(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;t.requestPictureInPicture&&document.exitPictureInPicture||!t.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,t.requestPictureInPicture=Bl,document.exitPictureInPicture=Vl,document.addEventListener("webkitpresentationmodechanged",Fl,!0))}}),Zu(function(){if(e.HTMLMediaElement){var t=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var e=t.apply(this);return e&&e.catch(function(){}),e}}}),Zu(function(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;!t.getVideoPlaybackQuality&&"webkitDroppedFrameCount"in t&&(t.getVideoPlaybackQuality=jl)}}),Zu(function(){if(!e.VTTCue&&e.TextTrackCue){var t=TextTrackCue.length;if(3==t)e.VTTCue=Hl;else if(6==t)e.VTTCue=Kl;else{try{var n=!!Hl(1,2,"")}catch(e){n=!1}n&&(e.VTTCue=Hl)}}}),Gl.prototype.parseInit=function(){},Gl.prototype.parseMedia=function(e,t){var n=it(e),r=[],i=new DOMParser,a=null;try{a=i.parseFromString(n,"text/xml")}catch(e){throw new fe(2,2,2005)}if(a){if(!(a=a.getElementsByTagName("tt")[0]))throw new fe(2,2,2005);var s=Xr.getAttributeNS(a,"http://www.w3.org/ns/ttml#parameter","frameRate"),o=Xr.getAttributeNS(a,"http://www.w3.org/ns/ttml#parameter","subFrameRate"),u=Xr.getAttributeNS(a,"http://www.w3.org/ns/ttml#parameter","frameRateMultiplier"),l=Xr.getAttributeNS(a,"http://www.w3.org/ns/ttml#parameter","tickRate");if(n=a.getAttribute("xml:space")||"default",i=a.getAttribute("tts:extent"),"default"!=n&&"preserve"!=n)throw new fe(2,2,2005);n="default"==n,s=new dc(s,o,u,l),o=nc(a.getElementsByTagName("metadata")[0]),u=nc(a.getElementsByTagName("styling")[0]),l=nc(a.getElementsByTagName("layout")[0]);for(var c=[],d=0;d<l.length;d++){var h,f,p=l[d],m=u,v=i,y=new hn,g=p.getAttribute("xml:id");if(g)y.id=g,g=null,v&&(g=ql.exec(v)||zl.exec(v)),v=g?Number(g[1]):null,g=g?Number(g[2]):null,(h=sc(p,m,"extent"))&&(null!=(h=(f=ql.exec(h))||zl.exec(h))&&(y.width=null!=v?100*Number(h[1])/v:Number(h[1]),y.height=null!=g?100*Number(h[2])/g:Number(h[2]),y.widthUnits=f||null!=v?fn:0,y.heightUnits=f||null!=g?fn:0)),(p=sc(p,m,"origin"))&&(null!=(h=(f=ql.exec(p))||zl.exec(p))&&(y.viewportAnchorX=null!=g?100*Number(h[1])/g:Number(h[1]),y.viewportAnchorY=null!=v?100*Number(h[2])/v:Number(h[2]),y.viewportAnchorUnits=f||null!=v?fn:0));else y=null;y&&c.push(y)}for(i=nc(a.getElementsByTagName("body")[0]),a=0;a<i.length;a++)(d=rc(i[a],t.periodStart,s,o,u,l,c,n))&&r.push(d)}return r};var ql=/^(\d{1,2}|100)% (\d{1,2}|100)%$/,Wl=/^(\d+px|\d+em)$/,zl=/^(\d+)px (\d+)px$/,Yl=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Xl=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,$l=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,Zl=/^(\d*(?:\.\d*)?)f$/,Ql=/^(\d*(?:\.\d*)?)t$/,Jl=/^(?:(\d*(?:\.\d*)?)h)?(?:(\d*(?:\.\d*)?)m)?(?:(\d*(?:\.\d*)?)s)?(?:(\d*(?:\.\d*)?)ms)?$/,ec={left:on,center:"center",right:"end",start:on,end:"end"},tc={left:"line-left",center:"center",right:"line-right"};function nc(e){var t=[];if(!e)return t;for(var n=e.childNodes,r=0;r<n.length;r++){var i="span"==n[r].nodeName&&"p"==e.nodeName;n[r].nodeType!=Node.ELEMENT_NODE||"br"==n[r].nodeName||i||(i=nc(n[r]),t=t.concat(i))}return t.length||t.push(e),t}function rc(e,t,n,r,i,a,s,o){if(!e.hasAttribute("begin")&&!e.hasAttribute("end")&&/^\s*$/.test(e.textContent))return null;!function e(t,n){for(var r=t.childNodes,i=0;i<r.length;i++)if("br"==r[i].nodeName&&0<i)r[i-1].textContent+="\n";else if(0<r[i].childNodes.length)e(r[i],n);else if(n){var a=r[i].textContent.trim();a=a.replace(/\s+/g," "),r[i].textContent=a}}(e,o),o=lc(e.getAttribute("begin"),n);var u=lc(e.getAttribute("end"),n);n=lc(e.getAttribute("dur"),n);var l=e.textContent;if(null==u&&null!=n&&(u=o+n),null==o||null==u)throw new fe(2,2,2001);if(t=new Zt(o+t,u+t,l),(a=uc(e,"region",a,""))&&a.getAttribute("xml:id")){var c=a.getAttribute("xml:id");s=s.filter(function(e){return e.id==c}),t.region=s[0]}return function(e,t,n,r,i){"rtl"==ac(t,n,i,"direction")&&(e.direction="rtl");var a=ac(t,n,i,"writingMode");"tb"==a||"tblr"==a?e.writingMode="vertical-lr":"tbrl"==a?e.writingMode="vertical-rl":"rltb"==a||"rl"==a?e.direction="rtl":a&&(e.direction=rn),(a=ac(t,n,i,"textAlign"))&&(e.positionAlign=tc[a],e.lineAlign=ec[a],e.textAlign=en[a.toUpperCase()]);(a=ac(t,n,i,"displayAlign"))&&(e.displayAlign=nn[a.toUpperCase()]);(a=ac(t,n,i,"color"))&&(e.color=a);(a=ac(t,n,i,"backgroundColor"))&&(e.backgroundColor=a);(a=ac(t,n,i,"fontFamily"))&&(e.fontFamily=a);(a=ac(t,n,i,"fontWeight"))&&"bold"==a&&(e.fontWeight=700),(a=ac(t,n,i,"wrapOption"))&&"noWrap"==a&&(e.wrapLine=!1),(a=ac(t,n,i,"lineHeight"))&&a.match(Wl)&&(e.lineHeight=a),(a=ac(t,n,i,"fontSize"))&&a.match(Wl)&&(e.fontSize=a),(a=ac(t,n,i,"fontStyle"))&&(e.fontStyle=dn[a.toUpperCase()]);if(r){a=r.getAttribute("imagetype");var s=r.getAttribute("encoding");r=r.textContent.trim(),"PNG"==a&&"Base64"==s&&r&&(e.backgroundImage="data:image/png;base64,"+r)}(n=sc(n,i,"textDecoration"))&&ic(e,n),(t=oc(t,i,"textDecoration"))&&ic(e,t)}(t,e,a,r=uc(e,"smpte:backgroundImage",r,"#"),i),t}function ic(e,t){for(var n=t.split(" "),r=0;r<n.length;r++)switch(n[r]){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&Ie(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&Ie(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&Ie(e.textDecoration,"overline")}}function ac(e,t,n,r){return(e=oc(e,n,r))?e:sc(t,n,r)}function sc(e,t,n){for(var r=nc(e),i=0;i<r.length;i++){var a=Xr.getAttributeNS(r[i],"http://www.w3.org/ns/ttml#styling",n);if(a)return a}return(e=uc(e,"style",t,""))?Xr.getAttributeNS(e,"http://www.w3.org/ns/ttml#styling",n):null}function oc(e,t,n){return(e=uc(e,"style",t,""))?Xr.getAttributeNS(e,"http://www.w3.org/ns/ttml#styling",n):null}function uc(e,t,n,r){if(!e||1>n.length)return null;var i=null,a=e;for(e=null;a&&!(e=a.getAttribute(t))&&(a=a.parentNode)instanceof Element;);if(t=e)for(e=0;e<n.length;e++)if(r+n[e].getAttribute("xml:id")==t){i=n[e];break}return i}function lc(e,t){var n=null;if(Yl.test(e)){n=Yl.exec(e);var r=Number(n[1]),i=Number(n[2]),a=Number(n[3]),s=Number(n[4]);n=(a+=(s+=(Number(n[5])||0)/t.b)/t.frameRate)+60*i+3600*r}else Xl.test(e)?n=cc(Xl,e):$l.test(e)?n=cc($l,e):Zl.test(e)?(n=Zl.exec(e),n=Number(n[1])/t.frameRate):Ql.test(e)?(n=Ql.exec(e),n=Number(n[1])/t.a):Jl.test(e)&&(n=cc(Jl,e));return n}function cc(e,t){var n=e.exec(t);return null==n||""==n[0]?null:(Number(n[4])||0)/1e3+(Number(n[3])||0)+60*(Number(n[2])||0)+3600*(Number(n[1])||0)}function dc(e,t,n,r){this.frameRate=Number(e)||30,this.b=Number(t)||1,this.a=Number(r),0==this.a&&(this.a=e?this.frameRate*this.b:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}function hc(){this.a=new Gl}function fc(){}function pc(e,t,n){var r;(r=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=r[1],e.textAlign="middle"==t?Jt:en[t.toUpperCase()]):(r=/^vertical:(lr|rl)$/.exec(t))?e.writingMode="lr"==r[1]?"vertical-lr":"vertical-rl":(r=/^size:([\d.]+)%$/.exec(t))?e.size=Number(r[1]):(r=/^position:([\d.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(t))?(e.position=Number(r[1]),r[2]&&(t=r[2],e.positionAlign="line-left"==t||"start"==t?"line-left":"line-right"==t||"end"==t?"line-right":"center")):(r=/^region:(.*)$/.exec(t))?(t=function(e,t){var n=e.filter(function(e){return e.id==t});return n.length?n[0]:null}(n,r[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=un[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=sn,e.line=Number(n[1]),n[2]&&(e.lineAlign=un[n[2].toUpperCase()]))}function mc(e){if(null==(e=qi(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3})/g)))return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}function vc(){this.a=null}function yc(e,t,n){var r,i,a;return(new Hr).H("payl",qr(function(e){r=it(e)})).H("iden",qr(function(e){i=it(e)})).H("sttg",qr(function(e){a=it(e)})).parse(e),r?function(e,t,n,r,i){if(e=new Zt(r,i,e),t&&(e.id=t),n)for(t=new Ki(n),n=Wi(t);n;)pc(e,n,[]),Gi(t),n=Wi(t);return e}(r,i,a,t,n):null}vn["application/ttml+xml"]=Gl,hc.prototype.parseInit=function(e){var t=!1;if((new Hr).H("moov",Kr).H("trak",Kr).H("mdia",Kr).H("minf",Kr).H("stbl",Kr).fa("stsd",Gr).H("stpp",function(e){t=!0,e.parser.stop()}).parse(e),!t)throw new fe(2,2,2007)},hc.prototype.parseMedia=function(e,t){var n=!1,r=[];if((new Hr).H("mdat",qr(function(e){n=!0,r=r.concat(this.a.parseMedia(e,t))}.bind(this))).parse(e),!n)throw new fe(2,2,2007);return r},vn['application/mp4; codecs="stpp"']=hc,vn['application/mp4; codecs="stpp.TTML.im1t"']=hc,fc.prototype.parseInit=function(){},fc.prototype.parseMedia=function(e,t){var n=it(e);if(n=(n=n.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n")).split(/\n{2,}/m),!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new fe(2,2,2e3);var r=t.segmentStart;if(null==r&&(r=0,n[0].includes("X-TIMESTAMP-MAP"))){var i=n[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),a=n[0].match(/MPEGTS:(\d+)/m);if(i&&a){if(null==(r=mc(new Ki(i[1]))))throw new fe(2,2,2e3);r=t.periodStart+(Number(a[1])/9e4-r)}}a=[];var s=n[0].split("\n");for(i=1;i<s.length;i++)if(/^Region:/.test(s[i])){var o=new Ki(s[i]),u=new hn;Wi(o),Gi(o);for(var l=Wi(o);l;){var c=u,d=l;(l=/^id=(.*)$/.exec(d))?c.id=l[1]:(l=/^width=(\d{1,2}|100)%$/.exec(d))?c.width=Number(l[1]):(l=/^lines=(\d+)$/.exec(d))?(c.height=Number(l[1]),c.heightUnits=2):(l=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(d))?(c.regionAnchorX=Number(l[1]),c.regionAnchorY=Number(l[2])):(l=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(d))?(c.viewportAnchorX=Number(l[1]),c.viewportAnchorY=Number(l[2])):/^scroll=up$/.exec(d)&&(c.scroll="up"),Gi(o),l=Wi(o)}a.push(u)}for(i=[],o=1;o<n.length;o++){if(l=s=n[o].split("\n"),d=r,s=a,1==l.length&&!l[0]||/^NOTE($|[ \t])/.test(l[0])||"STYLE"==l[0])s=null;else{u=null,l[0].includes("--\x3e")||(u=l[0],l.splice(0,1));var h=mc(c=new Ki(l[0])),f=qi(c,/[ \t]+--\x3e[ \t]+/g),p=mc(c);if(null==h||null==f||null==p)throw new fe(2,2,2001);for(l=new Zt(h+d,p+d,l.slice(1).join("\n").trim()),Gi(c),d=Wi(c);d;)pc(l,d,s),Gi(c),d=Wi(c);null!=u&&(l.id=u),s=l}s&&i.push(s)}return i},vn["text/vtt"]=fc,vn['text/vtt; codecs="vtt"']=fc,vc.prototype.parseInit=function(e){var t=!1;if((new Hr).H("moov",Kr).H("trak",Kr).H("mdia",Kr).fa("mdhd",function(e){0==e.version?(e.reader.L(4),e.reader.L(4),this.a=e.reader.F(),e.reader.L(4)):(e.reader.L(8),e.reader.L(8),this.a=e.reader.F(),e.reader.L(8)),e.reader.L(4)}.bind(this)).H("minf",Kr).H("stbl",Kr).fa("stsd",Gr).H("wvtt",function(){t=!0}).parse(e),!this.a)throw new fe(2,2,2008);if(!t)throw new fe(2,2,2008)},vc.prototype.parseMedia=function(e,t){var n=this;if(!this.a)throw new fe(2,2,2008);var r,i=0,a=[],s=[],o=!1,u=!1,l=!1,c=null;if((new Hr).H("moof",Kr).H("traf",Kr).fa("tfdt",function(e){o=!0,i=0==e.version?e.reader.F():e.reader.yb()}).fa("tfhd",function(e){var t=e.flags;(e=e.reader).L(4),1&t&&e.L(8),2&t&&e.L(4),c=8&t?e.F():null}).fa("trun",function(e){u=!0;var t=e.version,n=e.flags,r=(e=e.reader).F();1&n&&e.L(4),4&n&&e.L(4);for(var i=[],s=0;s<r;s++){var o={duration:null,sampleSize:null,pd:null};256&n&&(o.duration=e.F()),512&n&&(o.sampleSize=e.F()),1024&n&&e.L(4),2048&n&&(o.pd=0==t?e.F():e.Xd()),i.push(o)}a=i}).H("mdat",qr(function(e){l=!0,r=e})).parse(e),!l&&!o&&!u)throw new fe(2,2,2008);var d=i,h=new Br(new DataView(r.buffer,r.byteOffset,r.byteLength),0);return a.forEach(function(e){var r=e.duration||c,a=e.pd?i+e.pd:d;d=a+(r||0);var o=0;do{var u=h.F();o+=u;var l=null;"vttc"==zr(h.F())?8<u&&(l=h.Xa(u-8)):h.L(u-8),r&&l&&s.push(yc(l,t.periodStart+a/n.a,t.periodStart+d/n.a))}while(e.sampleSize&&o<e.sampleSize)}),s.filter(Kt.Ga)},vn['application/mp4; codecs="wvtt"']=vc,V("shaka.util.Dom.createHTMLElement",function(e){return document.createElement(e)}),V("shaka.util.Dom.createVideoElement",function(){var e=document.createElement("video");return e.muted=!0,e.width=600,e.height=400,e}),V("shaka.util.Dom.asHTMLElement",function(e){return e}),V("shaka.util.Dom.asHTMLMediaElement",function(e){return e}),V("shaka.util.Dom.removeAllChildren",function(e){for(;e.firstChild;)e.removeChild(e.firstChild)})}.call(r,n,n),r.shaka)t[i]=r.shaka[i]}()}).call(this,n(5))},function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE__1__},function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE__2__},function(module,__webpack_exports__,__webpack_require__){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */__webpack_require__.d(__webpack_exports__,"a",function(){return ShakaDemoUtils});var ShakaDemoUtils=function(){function ShakaDemoUtils(){_classCallCheck(this,ShakaDemoUtils)}return _createClass(ShakaDemoUtils,null,[{key:"runThroughHashParams",value:function(e,t){var n=[],r=function(t,r){n.push(r),e(t,r)};r("audiolang","preferredAudioLanguage"),r("textlang","preferredTextLanguage"),r("channels","preferredAudioChannelCount"),n.push("abr.enabled"),n.push("streaming.jumpLargeGaps"),n.push("drm.advanced"),n.push("drm.servers");var i=[],a=[];!function e(t){for(var n in t){i.includes(n)&&!a.includes(n)&&a.push(n),i.push(n);var r=t[n];"number"!=typeof r&&"string"!=typeof r&&"boolean"!=typeof r&&e(r)}}(t);!function t(r,i){for(var s in r){var o=s,u=i+s;if(!n.includes(u)){a.includes(s)&&(o=u);var l=r[s];"number"==typeof l||"string"==typeof l||"boolean"==typeof l?e(o,u):t(l,u+".")}}}(t,"")}},{key:"browserSupportsUncompiledMode",value:function browserSupportsUncompiledMode(){try{return eval("async ()=>{}"),!0}catch(e){return!1}}}]),ShakaDemoUtils}()},function(e,t,n){!function(){function t(e){var t=Array.isArray(e)?{label:e[0],value:e[1]}:"object"==typeof e&&"label"in e&&"value"in e?e:{label:e,value:e};this.label=t.label||t.value,this.value=t.value}function n(e,t){return"string"==typeof e?(t||document).querySelector(e):e||null}function r(e,t){return s.call((t||document).querySelectorAll(e))}function i(){r("input.awesomplete").forEach(function(e){new a(e)})}var a=function(e,t){var r=this;a.count=(a.count||0)+1,this.count=a.count,this.isOpened=!1,this.input=n(e),this.input.setAttribute("autocomplete","off"),this.input.setAttribute("aria-expanded","false"),this.input.setAttribute("aria-owns","awesomplete_list_"+this.count),this.input.setAttribute("role","combobox"),this.options=t=t||{},function(e,t,n){for(var r in t){var i=t[r],a=e.input.getAttribute("data-"+r.toLowerCase());"number"==typeof i?e[r]=parseInt(a):!1===i?e[r]=null!==a:i instanceof Function?e[r]=null:e[r]=a,e[r]||0===e[r]||(e[r]=r in n?n[r]:i)}}(this,{minChars:2,maxItems:10,autoFirst:!1,data:a.DATA,filter:a.FILTER_CONTAINS,sort:!1!==t.sort&&a.SORT_BYLENGTH,container:a.CONTAINER,item:a.ITEM,replace:a.REPLACE,tabSelect:!1},t),this.index=-1,this.container=this.container(e),this.ul=n.create("ul",{hidden:"hidden",role:"listbox",id:"awesomplete_list_"+this.count,inside:this.container}),this.status=n.create("span",{className:"visually-hidden",role:"status","aria-live":"assertive","aria-atomic":!0,inside:this.container,textContent:0!=this.minChars?"Type "+this.minChars+" or more characters for results.":"Begin typing for results."}),this._events={input:{input:this.evaluate.bind(this),blur:this.close.bind(this,{reason:"blur"}),keydown:function(e){var t=e.keyCode;r.opened&&(13===t&&r.selected?(e.preventDefault(),r.select()):9===t&&r.selected&&r.tabSelect?r.select():27===t?r.close({reason:"esc"}):38!==t&&40!==t||(e.preventDefault(),r[38===t?"previous":"next"]()))}},form:{submit:this.close.bind(this,{reason:"submit"})},ul:{mousedown:function(e){e.preventDefault()},click:function(e){var t=e.target;if(t!==this){for(;t&&!/li/i.test(t.nodeName);)t=t.parentNode;t&&0===e.button&&(e.preventDefault(),r.select(t,e.target))}}}},n.bind(this.input,this._events.input),n.bind(this.input.form,this._events.form),n.bind(this.ul,this._events.ul),this.input.hasAttribute("list")?(this.list="#"+this.input.getAttribute("list"),this.input.removeAttribute("list")):this.list=this.input.getAttribute("data-list")||t.list||[],a.all.push(this)};a.prototype={set list(e){if(Array.isArray(e))this._list=e;else if("string"==typeof e&&e.indexOf(",")>-1)this._list=e.split(/\s*,\s*/);else if((e=n(e))&&e.children){var t=[];s.apply(e.children).forEach(function(e){if(!e.disabled){var n=e.textContent.trim(),r=e.value||n,i=e.label||n;""!==r&&t.push({label:i,value:r})}}),this._list=t}document.activeElement===this.input&&this.evaluate()},get selected(){return this.index>-1},get opened(){return this.isOpened},close:function(e){this.opened&&(this.input.setAttribute("aria-expanded","false"),this.ul.setAttribute("hidden",""),this.isOpened=!1,this.index=-1,this.status.setAttribute("hidden",""),n.fire(this.input,"awesomplete-close",e||{}))},open:function(){this.input.setAttribute("aria-expanded","true"),this.ul.removeAttribute("hidden"),this.isOpened=!0,this.status.removeAttribute("hidden"),this.autoFirst&&-1===this.index&&this.goto(0),n.fire(this.input,"awesomplete-open")},destroy:function(){if(n.unbind(this.input,this._events.input),n.unbind(this.input.form,this._events.form),!this.options.container){var e=this.container.parentNode;e.insertBefore(this.input,this.container),e.removeChild(this.container)}this.input.removeAttribute("autocomplete"),this.input.removeAttribute("aria-autocomplete");var t=a.all.indexOf(this);-1!==t&&a.all.splice(t,1)},next:function(){var e=this.ul.children.length;this.goto(this.index<e-1?this.index+1:e?0:-1)},previous:function(){var e=this.ul.children.length,t=this.index-1;this.goto(this.selected&&-1!==t?t:e-1)},goto:function(e){var t=this.ul.children;this.selected&&t[this.index].setAttribute("aria-selected","false"),this.index=e,e>-1&&t.length>0&&(t[e].setAttribute("aria-selected","true"),this.status.textContent=t[e].textContent+", list item "+(e+1)+" of "+t.length,this.input.setAttribute("aria-activedescendant",this.ul.id+"_item_"+this.index),this.ul.scrollTop=t[e].offsetTop-this.ul.clientHeight+t[e].clientHeight,n.fire(this.input,"awesomplete-highlight",{text:this.suggestions[this.index]}))},select:function(e,t){if(e?this.index=n.siblingIndex(e):e=this.ul.children[this.index],e){var r=this.suggestions[this.index];n.fire(this.input,"awesomplete-select",{text:r,origin:t||e})&&(this.replace(r),this.close({reason:"select"}),n.fire(this.input,"awesomplete-selectcomplete",{text:r}))}},evaluate:function(){var e=this,n=this.input.value;n.length>=this.minChars&&this._list&&this._list.length>0?(this.index=-1,this.ul.innerHTML="",this.suggestions=this._list.map(function(r){return new t(e.data(r,n))}).filter(function(t){return e.filter(t,n)}),!1!==this.sort&&(this.suggestions=this.suggestions.sort(this.sort)),this.suggestions=this.suggestions.slice(0,this.maxItems),this.suggestions.forEach(function(t,r){e.ul.appendChild(e.item(t,n,r))}),0===this.ul.children.length?(this.status.textContent="No results found",this.close({reason:"nomatches"})):(this.open(),this.status.textContent=this.ul.children.length+" results found")):(this.close({reason:"nomatches"}),this.status.textContent="No results found")}},a.all=[],a.FILTER_CONTAINS=function(e,t){return RegExp(n.regExpEscape(t.trim()),"i").test(e)},a.FILTER_STARTSWITH=function(e,t){return RegExp("^"+n.regExpEscape(t.trim()),"i").test(e)},a.SORT_BYLENGTH=function(e,t){return e.length!==t.length?e.length-t.length:e<t?-1:1},a.CONTAINER=function(e){return n.create("div",{className:"awesomplete",around:e})},a.ITEM=function(e,t,r){return n.create("li",{innerHTML:""===t.trim()?e:e.replace(RegExp(n.regExpEscape(t.trim()),"gi"),"<mark>$&</mark>"),role:"option","aria-selected":"false",id:"awesomplete_list_"+this.count+"_item_"+r})},a.REPLACE=function(e){this.input.value=e.value},a.DATA=function(e){return e},Object.defineProperty(t.prototype=Object.create(String.prototype),"length",{get:function(){return this.label.length}}),t.prototype.toString=t.prototype.valueOf=function(){return""+this.label};var s=Array.prototype.slice;n.create=function(e,t){var r=document.createElement(e);for(var i in t){var a=t[i];if("inside"===i)n(a).appendChild(r);else if("around"===i){var s=n(a);s.parentNode.insertBefore(r,s),r.appendChild(s),null!=s.getAttribute("autofocus")&&s.focus()}else i in r?r[i]=a:r.setAttribute(i,a)}return r},n.bind=function(e,t){if(e)for(var n in t){var r=t[n];n.split(/\s+/).forEach(function(t){e.addEventListener(t,r)})}},n.unbind=function(e,t){if(e)for(var n in t){var r=t[n];n.split(/\s+/).forEach(function(t){e.removeEventListener(t,r)})}},n.fire=function(e,t,n){var r=document.createEvent("HTMLEvents");for(var i in r.initEvent(t,!0,!0),n)r[i]=n[i];return e.dispatchEvent(r)},n.regExpEscape=function(e){return e.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")},n.siblingIndex=function(e){for(var t=0;e=e.previousElementSibling;t++);return t},"undefined"!=typeof self&&(self.Awesomplete=a),"undefined"!=typeof Document&&("loading"!==document.readyState?i():document.addEventListener("DOMContentLoaded",i)),a.$=n,a.$$=r,e.exports&&(e.exports=a)}()},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE__6__},function(e){e.exports=JSON.parse('{"FULL_SCREEN":"Full screen","EXIT_FULL_SCREEN":"Exit full screen","FAST_FORWARD":"Fast-forward","REWIND":"Rewind","MUTE":"Mute","UNMUTE":"Unmute","PAUSE":"Pause","PLAY":"Play","SEEK":"Seek","VOLUME":"Volume","SKIP_TO_LIVE":"Skip ahead to live","LIVE":"Live","MORE_SETTINGS":"More settings","BACK":"Back","CAPTIONS":"Captions","RESOLUTION":"Resolution","AUTO_QUALITY":"Auto","CAST":"Cast...","LANGUAGE":"Language","UNRECOGNIZED_LANGUAGE":"Unrecognized","UNDETERMINED_LANGUAGE":"Undetermined","MULTIPLE_LANGUAGES":"Multiple languages","NOT_APPLICABLE":"Not applicable","ENTER_PICTURE_IN_PICTURE":"Enter Picture-in-Picture","EXIT_PICTURE_IN_PICTURE":"Exit Picture-in-Picture","PICTURE_IN_PICTURE":"Picture-in-Picture","ON":"On","OFF":"Off"}')},function(e,t,n){},function(e,t,n){},function(e,t){
/**
 * material-design-lite - Material Design Components in CSS, JS and HTML
 * @version v1.3.0
 * @license Apache-2.0
 * @copyright 2015 Google, Inc.
 * @link https://github.com/google/material-design-lite
 */
!function(){"use strict";function e(e,t){if(e){if(t.element_.classList.contains(t.CssClasses_.MDL_JS_RIPPLE_EFFECT)){var n=document.createElement("span");n.classList.add(t.CssClasses_.MDL_RIPPLE_CONTAINER),n.classList.add(t.CssClasses_.MDL_JS_RIPPLE_EFFECT);var r=document.createElement("span");r.classList.add(t.CssClasses_.MDL_RIPPLE),n.appendChild(r),e.appendChild(n)}e.addEventListener("click",function(n){if("#"===e.getAttribute("href").charAt(0)){n.preventDefault();var r=e.href.split("#")[1],i=t.element_.querySelector("#"+r);t.resetTabState_(),t.resetPanelState_(),e.classList.add(t.CssClasses_.ACTIVE_CLASS),i.classList.add(t.CssClasses_.ACTIVE_CLASS)}})}}function t(e,t,n,r){function i(){var i=e.href.split("#")[1],a=r.content_.querySelector("#"+i);r.resetTabState_(t),r.resetPanelState_(n),e.classList.add(r.CssClasses_.IS_ACTIVE),a.classList.add(r.CssClasses_.IS_ACTIVE)}if(r.tabBar_.classList.contains(r.CssClasses_.JS_RIPPLE_EFFECT)){var a=document.createElement("span");a.classList.add(r.CssClasses_.RIPPLE_CONTAINER),a.classList.add(r.CssClasses_.JS_RIPPLE_EFFECT);var s=document.createElement("span");s.classList.add(r.CssClasses_.RIPPLE),a.appendChild(s),e.appendChild(a)}r.tabBar_.classList.contains(r.CssClasses_.TAB_MANUAL_SWITCH)||e.addEventListener("click",function(t){"#"===e.getAttribute("href").charAt(0)&&(t.preventDefault(),i())}),e.show=i}var n={upgradeDom:function(e,t){},upgradeElement:function(e,t){},upgradeElements:function(e){},upgradeAllRegistered:function(){},registerUpgradedCallback:function(e,t){},register:function(e){},downgradeElements:function(e){}};(n=function(){function e(e,t){for(var n=0;n<o.length;n++)if(o[n].className===e)return void 0!==t&&(o[n]=t),o[n];return!1}function t(e){var t=e.getAttribute("data-upgraded");return null===t?[""]:t.split(",")}function n(e,n){return-1!==t(e).indexOf(n)}function r(e,t,n){if("CustomEvent"in window&&"function"==typeof window.CustomEvent)return new CustomEvent(e,{bubbles:t,cancelable:n});var r=document.createEvent("Events");return r.initEvent(e,t,n),r}function i(t,n){if(void 0===t&&void 0===n)for(var r=0;r<o.length;r++)i(o[r].className,o[r].cssClass);else{var s=t;if(void 0===n){var u=e(s);u&&(n=u.cssClass)}for(var l=document.querySelectorAll("."+n),c=0;c<l.length;c++)a(l[c],s)}}function a(i,a){if(!("object"==typeof i&&i instanceof Element))throw new Error("Invalid argument provided to upgrade MDL element.");var s=r("mdl-componentupgrading",!0,!0);if(i.dispatchEvent(s),!s.defaultPrevented){var c=t(i),d=[];if(a)n(i,a)||d.push(e(a));else{var h=i.classList;o.forEach(function(e){h.contains(e.cssClass)&&-1===d.indexOf(e)&&!n(i,e.className)&&d.push(e)})}for(var f,p=0,m=d.length;p<m;p++){if(!(f=d[p]))throw new Error("Unable to find a registered component for the given class.");c.push(f.className),i.setAttribute("data-upgraded",c.join(","));var v=new f.classConstructor(i);v[l]=f,u.push(v);for(var y=0,g=f.callbacks.length;y<g;y++)f.callbacks[y](i);f.widget&&(i[f.className]=v);var _=r("mdl-componentupgraded",!0,!1);i.dispatchEvent(_)}}}function s(e){if(e){var t=u.indexOf(e);u.splice(t,1);var n=e.element_.getAttribute("data-upgraded").split(","),i=n.indexOf(e[l].classAsString);n.splice(i,1),e.element_.setAttribute("data-upgraded",n.join(","));var a=r("mdl-componentdowngraded",!0,!1);e.element_.dispatchEvent(a)}}var o=[],u=[],l="mdlComponentConfigInternal_";return{upgradeDom:i,upgradeElement:a,upgradeElements:function e(t){Array.isArray(t)||(t=t instanceof Element?[t]:Array.prototype.slice.call(t));for(var n,r=0,i=t.length;r<i;r++)(n=t[r])instanceof HTMLElement&&(a(n),n.children.length>0&&e(n.children))},upgradeAllRegistered:function(){for(var e=0;e<o.length;e++)i(o[e].className)},registerUpgradedCallback:function(t,n){var r=e(t);r&&r.callbacks.push(n)},register:function(t){var n=!0;void 0===t.widget&&void 0===t.widget||(n=t.widget||t.widget);var r={classConstructor:t.constructor||t.constructor,className:t.classAsString||t.classAsString,cssClass:t.cssClass||t.cssClass,widget:n,callbacks:[]};if(o.forEach(function(e){if(e.cssClass===r.cssClass)throw new Error("The provided cssClass has already been registered: "+e.cssClass);if(e.className===r.className)throw new Error("The provided className has already been registered")}),t.constructor.prototype.hasOwnProperty(l))throw new Error("MDL component classes must not have "+l+" defined as a property.");e(t.classAsString,r)||o.push(r)},downgradeElements:function(e){var t=function(e){u.filter(function(t){return t.element_===e}).forEach(s)};if(e instanceof Array||e instanceof NodeList)for(var n=0;n<e.length;n++)t(e[n]);else{if(!(e instanceof Node))throw new Error("Invalid argument provided to downgrade MDL nodes.");t(e)}}}}()).ComponentConfigPublic,n.ComponentConfig,n.Component,n.upgradeDom=n.upgradeDom,n.upgradeElement=n.upgradeElement,n.upgradeElements=n.upgradeElements,n.upgradeAllRegistered=n.upgradeAllRegistered,n.registerUpgradedCallback=n.registerUpgradedCallback,n.register=n.register,n.downgradeElements=n.downgradeElements,window.componentHandler=n,window.componentHandler=n,window.addEventListener("load",function(){"classList"in document.createElement("div")&&"querySelector"in document&&"addEventListener"in window&&Array.prototype.forEach?(document.documentElement.classList.add("mdl-js"),n.upgradeAllRegistered()):(n.upgradeElement=function(){},n.register=function(){})}),Date.now||(Date.now=function(){return(new Date).getTime()},Date.now=Date.now);for(var r=["webkit","moz"],i=0;i<r.length&&!window.requestAnimationFrame;++i){var a=r[i];window.requestAnimationFrame=window[a+"RequestAnimationFrame"],window.cancelAnimationFrame=window[a+"CancelAnimationFrame"]||window[a+"CancelRequestAnimationFrame"],window.requestAnimationFrame=window.requestAnimationFrame,window.cancelAnimationFrame=window.cancelAnimationFrame}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var s=0;window.requestAnimationFrame=function(e){var t=Date.now(),n=Math.max(s+16,t);return setTimeout(function(){e(s=n)},n-t)},window.cancelAnimationFrame=clearTimeout,window.requestAnimationFrame=window.requestAnimationFrame,window.cancelAnimationFrame=window.cancelAnimationFrame}var o=function(e){this.element_=e,this.init()};window.MaterialButton=o,o.prototype.Constant_={},o.prototype.CssClasses_={RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_CONTAINER:"mdl-button__ripple-container",RIPPLE:"mdl-ripple"},o.prototype.blurHandler_=function(e){e&&this.element_.blur()},o.prototype.disable=function(){this.element_.disabled=!0},o.prototype.disable=o.prototype.disable,o.prototype.enable=function(){this.element_.disabled=!1},o.prototype.enable=o.prototype.enable,o.prototype.init=function(){if(this.element_){if(this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){var e=document.createElement("span");e.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleElement_=document.createElement("span"),this.rippleElement_.classList.add(this.CssClasses_.RIPPLE),e.appendChild(this.rippleElement_),this.boundRippleBlurHandler=this.blurHandler_.bind(this),this.rippleElement_.addEventListener("mouseup",this.boundRippleBlurHandler),this.element_.appendChild(e)}this.boundButtonBlurHandler=this.blurHandler_.bind(this),this.element_.addEventListener("mouseup",this.boundButtonBlurHandler),this.element_.addEventListener("mouseleave",this.boundButtonBlurHandler)}},n.register({constructor:o,classAsString:"MaterialButton",cssClass:"mdl-js-button",widget:!0});var u=function(e){this.element_=e,this.init()};window.MaterialCheckbox=u,u.prototype.Constant_={TINY_TIMEOUT:.001},u.prototype.CssClasses_={INPUT:"mdl-checkbox__input",BOX_OUTLINE:"mdl-checkbox__box-outline",FOCUS_HELPER:"mdl-checkbox__focus-helper",TICK_OUTLINE:"mdl-checkbox__tick-outline",RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",RIPPLE_CONTAINER:"mdl-checkbox__ripple-container",RIPPLE_CENTER:"mdl-ripple--center",RIPPLE:"mdl-ripple",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_CHECKED:"is-checked",IS_UPGRADED:"is-upgraded"},u.prototype.onChange_=function(e){this.updateClasses_()},u.prototype.onFocus_=function(e){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},u.prototype.onBlur_=function(e){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},u.prototype.onMouseUp_=function(e){this.blur_()},u.prototype.updateClasses_=function(){this.checkDisabled(),this.checkToggleState()},u.prototype.blur_=function(){window.setTimeout(function(){this.inputElement_.blur()}.bind(this),this.Constant_.TINY_TIMEOUT)},u.prototype.checkToggleState=function(){this.inputElement_.checked?this.element_.classList.add(this.CssClasses_.IS_CHECKED):this.element_.classList.remove(this.CssClasses_.IS_CHECKED)},u.prototype.checkToggleState=u.prototype.checkToggleState,u.prototype.checkDisabled=function(){this.inputElement_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},u.prototype.checkDisabled=u.prototype.checkDisabled,u.prototype.disable=function(){this.inputElement_.disabled=!0,this.updateClasses_()},u.prototype.disable=u.prototype.disable,u.prototype.enable=function(){this.inputElement_.disabled=!1,this.updateClasses_()},u.prototype.enable=u.prototype.enable,u.prototype.check=function(){this.inputElement_.checked=!0,this.updateClasses_()},u.prototype.check=u.prototype.check,u.prototype.uncheck=function(){this.inputElement_.checked=!1,this.updateClasses_()},u.prototype.uncheck=u.prototype.uncheck,u.prototype.init=function(){if(this.element_){this.inputElement_=this.element_.querySelector("."+this.CssClasses_.INPUT);var e=document.createElement("span");e.classList.add(this.CssClasses_.BOX_OUTLINE);var t=document.createElement("span");t.classList.add(this.CssClasses_.FOCUS_HELPER);var n=document.createElement("span");if(n.classList.add(this.CssClasses_.TICK_OUTLINE),e.appendChild(n),this.element_.appendChild(t),this.element_.appendChild(e),this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){this.element_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS),this.rippleContainerElement_=document.createElement("span"),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_EFFECT),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CENTER),this.boundRippleMouseUp=this.onMouseUp_.bind(this),this.rippleContainerElement_.addEventListener("mouseup",this.boundRippleMouseUp);var r=document.createElement("span");r.classList.add(this.CssClasses_.RIPPLE),this.rippleContainerElement_.appendChild(r),this.element_.appendChild(this.rippleContainerElement_)}this.boundInputOnChange=this.onChange_.bind(this),this.boundInputOnFocus=this.onFocus_.bind(this),this.boundInputOnBlur=this.onBlur_.bind(this),this.boundElementMouseUp=this.onMouseUp_.bind(this),this.inputElement_.addEventListener("change",this.boundInputOnChange),this.inputElement_.addEventListener("focus",this.boundInputOnFocus),this.inputElement_.addEventListener("blur",this.boundInputOnBlur),this.element_.addEventListener("mouseup",this.boundElementMouseUp),this.updateClasses_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED)}},n.register({constructor:u,classAsString:"MaterialCheckbox",cssClass:"mdl-js-checkbox",widget:!0});var l=function(e){this.element_=e,this.init()};window.MaterialIconToggle=l,l.prototype.Constant_={TINY_TIMEOUT:.001},l.prototype.CssClasses_={INPUT:"mdl-icon-toggle__input",JS_RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",RIPPLE_CONTAINER:"mdl-icon-toggle__ripple-container",RIPPLE_CENTER:"mdl-ripple--center",RIPPLE:"mdl-ripple",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_CHECKED:"is-checked"},l.prototype.onChange_=function(e){this.updateClasses_()},l.prototype.onFocus_=function(e){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},l.prototype.onBlur_=function(e){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},l.prototype.onMouseUp_=function(e){this.blur_()},l.prototype.updateClasses_=function(){this.checkDisabled(),this.checkToggleState()},l.prototype.blur_=function(){window.setTimeout(function(){this.inputElement_.blur()}.bind(this),this.Constant_.TINY_TIMEOUT)},l.prototype.checkToggleState=function(){this.inputElement_.checked?this.element_.classList.add(this.CssClasses_.IS_CHECKED):this.element_.classList.remove(this.CssClasses_.IS_CHECKED)},l.prototype.checkToggleState=l.prototype.checkToggleState,l.prototype.checkDisabled=function(){this.inputElement_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},l.prototype.checkDisabled=l.prototype.checkDisabled,l.prototype.disable=function(){this.inputElement_.disabled=!0,this.updateClasses_()},l.prototype.disable=l.prototype.disable,l.prototype.enable=function(){this.inputElement_.disabled=!1,this.updateClasses_()},l.prototype.enable=l.prototype.enable,l.prototype.check=function(){this.inputElement_.checked=!0,this.updateClasses_()},l.prototype.check=l.prototype.check,l.prototype.uncheck=function(){this.inputElement_.checked=!1,this.updateClasses_()},l.prototype.uncheck=l.prototype.uncheck,l.prototype.init=function(){if(this.element_){if(this.inputElement_=this.element_.querySelector("."+this.CssClasses_.INPUT),this.element_.classList.contains(this.CssClasses_.JS_RIPPLE_EFFECT)){this.element_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS),this.rippleContainerElement_=document.createElement("span"),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleContainerElement_.classList.add(this.CssClasses_.JS_RIPPLE_EFFECT),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CENTER),this.boundRippleMouseUp=this.onMouseUp_.bind(this),this.rippleContainerElement_.addEventListener("mouseup",this.boundRippleMouseUp);var e=document.createElement("span");e.classList.add(this.CssClasses_.RIPPLE),this.rippleContainerElement_.appendChild(e),this.element_.appendChild(this.rippleContainerElement_)}this.boundInputOnChange=this.onChange_.bind(this),this.boundInputOnFocus=this.onFocus_.bind(this),this.boundInputOnBlur=this.onBlur_.bind(this),this.boundElementOnMouseUp=this.onMouseUp_.bind(this),this.inputElement_.addEventListener("change",this.boundInputOnChange),this.inputElement_.addEventListener("focus",this.boundInputOnFocus),this.inputElement_.addEventListener("blur",this.boundInputOnBlur),this.element_.addEventListener("mouseup",this.boundElementOnMouseUp),this.updateClasses_(),this.element_.classList.add("is-upgraded")}},n.register({constructor:l,classAsString:"MaterialIconToggle",cssClass:"mdl-js-icon-toggle",widget:!0});var c=function(e){this.element_=e,this.init()};window.MaterialMenu=c,c.prototype.Constant_={TRANSITION_DURATION_SECONDS:.3,TRANSITION_DURATION_FRACTION:.8,CLOSE_TIMEOUT:150},c.prototype.Keycodes_={ENTER:13,ESCAPE:27,SPACE:32,UP_ARROW:38,DOWN_ARROW:40},c.prototype.CssClasses_={CONTAINER:"mdl-menu__container",OUTLINE:"mdl-menu__outline",ITEM:"mdl-menu__item",ITEM_RIPPLE_CONTAINER:"mdl-menu__item-ripple-container",RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",RIPPLE:"mdl-ripple",IS_UPGRADED:"is-upgraded",IS_VISIBLE:"is-visible",IS_ANIMATING:"is-animating",BOTTOM_LEFT:"mdl-menu--bottom-left",BOTTOM_RIGHT:"mdl-menu--bottom-right",TOP_LEFT:"mdl-menu--top-left",TOP_RIGHT:"mdl-menu--top-right",UNALIGNED:"mdl-menu--unaligned"},c.prototype.init=function(){if(this.element_){var e=document.createElement("div");e.classList.add(this.CssClasses_.CONTAINER),this.element_.parentElement.insertBefore(e,this.element_),this.element_.parentElement.removeChild(this.element_),e.appendChild(this.element_),this.container_=e;var t=document.createElement("div");t.classList.add(this.CssClasses_.OUTLINE),this.outline_=t,e.insertBefore(t,this.element_);var n=this.element_.getAttribute("for")||this.element_.getAttribute("data-mdl-for"),r=null;n&&((r=document.getElementById(n))&&(this.forElement_=r,r.addEventListener("click",this.handleForClick_.bind(this)),r.addEventListener("keydown",this.handleForKeyboardEvent_.bind(this))));var i=this.element_.querySelectorAll("."+this.CssClasses_.ITEM);this.boundItemKeydown_=this.handleItemKeyboardEvent_.bind(this),this.boundItemClick_=this.handleItemClick_.bind(this);for(var a=0;a<i.length;a++)i[a].addEventListener("click",this.boundItemClick_),i[a].tabIndex="-1",i[a].addEventListener("keydown",this.boundItemKeydown_);if(this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT))for(this.element_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS),a=0;a<i.length;a++){var s=i[a],o=document.createElement("span");o.classList.add(this.CssClasses_.ITEM_RIPPLE_CONTAINER);var u=document.createElement("span");u.classList.add(this.CssClasses_.RIPPLE),o.appendChild(u),s.appendChild(o),s.classList.add(this.CssClasses_.RIPPLE_EFFECT)}this.element_.classList.contains(this.CssClasses_.BOTTOM_LEFT)&&this.outline_.classList.add(this.CssClasses_.BOTTOM_LEFT),this.element_.classList.contains(this.CssClasses_.BOTTOM_RIGHT)&&this.outline_.classList.add(this.CssClasses_.BOTTOM_RIGHT),this.element_.classList.contains(this.CssClasses_.TOP_LEFT)&&this.outline_.classList.add(this.CssClasses_.TOP_LEFT),this.element_.classList.contains(this.CssClasses_.TOP_RIGHT)&&this.outline_.classList.add(this.CssClasses_.TOP_RIGHT),this.element_.classList.contains(this.CssClasses_.UNALIGNED)&&this.outline_.classList.add(this.CssClasses_.UNALIGNED),e.classList.add(this.CssClasses_.IS_UPGRADED)}},c.prototype.handleForClick_=function(e){if(this.element_&&this.forElement_){var t=this.forElement_.getBoundingClientRect(),n=this.forElement_.parentElement.getBoundingClientRect();this.element_.classList.contains(this.CssClasses_.UNALIGNED)||(this.element_.classList.contains(this.CssClasses_.BOTTOM_RIGHT)?(this.container_.style.right=n.right-t.right+"px",this.container_.style.top=this.forElement_.offsetTop+this.forElement_.offsetHeight+"px"):this.element_.classList.contains(this.CssClasses_.TOP_LEFT)?(this.container_.style.left=this.forElement_.offsetLeft+"px",this.container_.style.bottom=n.bottom-t.top+"px"):this.element_.classList.contains(this.CssClasses_.TOP_RIGHT)?(this.container_.style.right=n.right-t.right+"px",this.container_.style.bottom=n.bottom-t.top+"px"):(this.container_.style.left=this.forElement_.offsetLeft+"px",this.container_.style.top=this.forElement_.offsetTop+this.forElement_.offsetHeight+"px"))}this.toggle(e)},c.prototype.handleForKeyboardEvent_=function(e){if(this.element_&&this.container_&&this.forElement_){var t=this.element_.querySelectorAll("."+this.CssClasses_.ITEM+":not([disabled])");t&&t.length>0&&this.container_.classList.contains(this.CssClasses_.IS_VISIBLE)&&(e.keyCode===this.Keycodes_.UP_ARROW?(e.preventDefault(),t[t.length-1].focus()):e.keyCode===this.Keycodes_.DOWN_ARROW&&(e.preventDefault(),t[0].focus()))}},c.prototype.handleItemKeyboardEvent_=function(e){if(this.element_&&this.container_){var t=this.element_.querySelectorAll("."+this.CssClasses_.ITEM+":not([disabled])");if(t&&t.length>0&&this.container_.classList.contains(this.CssClasses_.IS_VISIBLE)){var n=Array.prototype.slice.call(t).indexOf(e.target);if(e.keyCode===this.Keycodes_.UP_ARROW)e.preventDefault(),n>0?t[n-1].focus():t[t.length-1].focus();else if(e.keyCode===this.Keycodes_.DOWN_ARROW)e.preventDefault(),t.length>n+1?t[n+1].focus():t[0].focus();else if(e.keyCode===this.Keycodes_.SPACE||e.keyCode===this.Keycodes_.ENTER){e.preventDefault();var r=new MouseEvent("mousedown");e.target.dispatchEvent(r),r=new MouseEvent("mouseup"),e.target.dispatchEvent(r),e.target.click()}else e.keyCode===this.Keycodes_.ESCAPE&&(e.preventDefault(),this.hide())}}},c.prototype.handleItemClick_=function(e){e.target.hasAttribute("disabled")?e.stopPropagation():(this.closing_=!0,window.setTimeout(function(e){this.hide(),this.closing_=!1}.bind(this),this.Constant_.CLOSE_TIMEOUT))},c.prototype.applyClip_=function(e,t){this.element_.classList.contains(this.CssClasses_.UNALIGNED)?this.element_.style.clip="":this.element_.classList.contains(this.CssClasses_.BOTTOM_RIGHT)?this.element_.style.clip="rect(0 "+t+"px 0 "+t+"px)":this.element_.classList.contains(this.CssClasses_.TOP_LEFT)?this.element_.style.clip="rect("+e+"px 0 "+e+"px 0)":this.element_.classList.contains(this.CssClasses_.TOP_RIGHT)?this.element_.style.clip="rect("+e+"px "+t+"px "+e+"px "+t+"px)":this.element_.style.clip=""},c.prototype.removeAnimationEndListener_=function(e){e.target.classList.remove(c.prototype.CssClasses_.IS_ANIMATING)},c.prototype.addAnimationEndListener_=function(){this.element_.addEventListener("transitionend",this.removeAnimationEndListener_),this.element_.addEventListener("webkitTransitionEnd",this.removeAnimationEndListener_)},c.prototype.show=function(e){if(this.element_&&this.container_&&this.outline_){var t=this.element_.getBoundingClientRect().height,n=this.element_.getBoundingClientRect().width;this.container_.style.width=n+"px",this.container_.style.height=t+"px",this.outline_.style.width=n+"px",this.outline_.style.height=t+"px";for(var r=this.Constant_.TRANSITION_DURATION_SECONDS*this.Constant_.TRANSITION_DURATION_FRACTION,i=this.element_.querySelectorAll("."+this.CssClasses_.ITEM),a=0;a<i.length;a++){var s;s=this.element_.classList.contains(this.CssClasses_.TOP_LEFT)||this.element_.classList.contains(this.CssClasses_.TOP_RIGHT)?(t-i[a].offsetTop-i[a].offsetHeight)/t*r+"s":i[a].offsetTop/t*r+"s",i[a].style.transitionDelay=s}this.applyClip_(t,n),window.requestAnimationFrame(function(){this.element_.classList.add(this.CssClasses_.IS_ANIMATING),this.element_.style.clip="rect(0 "+n+"px "+t+"px 0)",this.container_.classList.add(this.CssClasses_.IS_VISIBLE)}.bind(this)),this.addAnimationEndListener_();var o=function(t){t===e||this.closing_||t.target.parentNode===this.element_||(document.removeEventListener("click",o),this.hide())}.bind(this);document.addEventListener("click",o)}},c.prototype.show=c.prototype.show,c.prototype.hide=function(){if(this.element_&&this.container_&&this.outline_){for(var e=this.element_.querySelectorAll("."+this.CssClasses_.ITEM),t=0;t<e.length;t++)e[t].style.removeProperty("transition-delay");var n=this.element_.getBoundingClientRect(),r=n.height,i=n.width;this.element_.classList.add(this.CssClasses_.IS_ANIMATING),this.applyClip_(r,i),this.container_.classList.remove(this.CssClasses_.IS_VISIBLE),this.addAnimationEndListener_()}},c.prototype.hide=c.prototype.hide,c.prototype.toggle=function(e){this.container_.classList.contains(this.CssClasses_.IS_VISIBLE)?this.hide():this.show(e)},c.prototype.toggle=c.prototype.toggle,n.register({constructor:c,classAsString:"MaterialMenu",cssClass:"mdl-js-menu",widget:!0});var d=function(e){this.element_=e,this.init()};window.MaterialProgress=d,d.prototype.Constant_={},d.prototype.CssClasses_={INDETERMINATE_CLASS:"mdl-progress__indeterminate"},d.prototype.setProgress=function(e){this.element_.classList.contains(this.CssClasses_.INDETERMINATE_CLASS)||(this.progressbar_.style.width=e+"%")},d.prototype.setProgress=d.prototype.setProgress,d.prototype.setBuffer=function(e){this.bufferbar_.style.width=e+"%",this.auxbar_.style.width=100-e+"%"},d.prototype.setBuffer=d.prototype.setBuffer,d.prototype.init=function(){if(this.element_){var e=document.createElement("div");e.className="progressbar bar bar1",this.element_.appendChild(e),this.progressbar_=e,(e=document.createElement("div")).className="bufferbar bar bar2",this.element_.appendChild(e),this.bufferbar_=e,(e=document.createElement("div")).className="auxbar bar bar3",this.element_.appendChild(e),this.auxbar_=e,this.progressbar_.style.width="0%",this.bufferbar_.style.width="100%",this.auxbar_.style.width="0%",this.element_.classList.add("is-upgraded")}},n.register({constructor:d,classAsString:"MaterialProgress",cssClass:"mdl-js-progress",widget:!0});var h=function(e){this.element_=e,this.init()};window.MaterialRadio=h,h.prototype.Constant_={TINY_TIMEOUT:.001},h.prototype.CssClasses_={IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_CHECKED:"is-checked",IS_UPGRADED:"is-upgraded",JS_RADIO:"mdl-js-radio",RADIO_BTN:"mdl-radio__button",RADIO_OUTER_CIRCLE:"mdl-radio__outer-circle",RADIO_INNER_CIRCLE:"mdl-radio__inner-circle",RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",RIPPLE_CONTAINER:"mdl-radio__ripple-container",RIPPLE_CENTER:"mdl-ripple--center",RIPPLE:"mdl-ripple"},h.prototype.onChange_=function(e){for(var t=document.getElementsByClassName(this.CssClasses_.JS_RADIO),n=0;n<t.length;n++){t[n].querySelector("."+this.CssClasses_.RADIO_BTN).getAttribute("name")===this.btnElement_.getAttribute("name")&&void 0!==t[n].MaterialRadio&&t[n].MaterialRadio.updateClasses_()}},h.prototype.onFocus_=function(e){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},h.prototype.onBlur_=function(e){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},h.prototype.onMouseup_=function(e){this.blur_()},h.prototype.updateClasses_=function(){this.checkDisabled(),this.checkToggleState()},h.prototype.blur_=function(){window.setTimeout(function(){this.btnElement_.blur()}.bind(this),this.Constant_.TINY_TIMEOUT)},h.prototype.checkDisabled=function(){this.btnElement_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},h.prototype.checkDisabled=h.prototype.checkDisabled,h.prototype.checkToggleState=function(){this.btnElement_.checked?this.element_.classList.add(this.CssClasses_.IS_CHECKED):this.element_.classList.remove(this.CssClasses_.IS_CHECKED)},h.prototype.checkToggleState=h.prototype.checkToggleState,h.prototype.disable=function(){this.btnElement_.disabled=!0,this.updateClasses_()},h.prototype.disable=h.prototype.disable,h.prototype.enable=function(){this.btnElement_.disabled=!1,this.updateClasses_()},h.prototype.enable=h.prototype.enable,h.prototype.check=function(){this.btnElement_.checked=!0,this.onChange_(null)},h.prototype.check=h.prototype.check,h.prototype.uncheck=function(){this.btnElement_.checked=!1,this.onChange_(null)},h.prototype.uncheck=h.prototype.uncheck,h.prototype.init=function(){if(this.element_){this.btnElement_=this.element_.querySelector("."+this.CssClasses_.RADIO_BTN),this.boundChangeHandler_=this.onChange_.bind(this),this.boundFocusHandler_=this.onChange_.bind(this),this.boundBlurHandler_=this.onBlur_.bind(this),this.boundMouseUpHandler_=this.onMouseup_.bind(this);var e=document.createElement("span");e.classList.add(this.CssClasses_.RADIO_OUTER_CIRCLE);var t,n=document.createElement("span");if(n.classList.add(this.CssClasses_.RADIO_INNER_CIRCLE),this.element_.appendChild(e),this.element_.appendChild(n),this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){this.element_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS),(t=document.createElement("span")).classList.add(this.CssClasses_.RIPPLE_CONTAINER),t.classList.add(this.CssClasses_.RIPPLE_EFFECT),t.classList.add(this.CssClasses_.RIPPLE_CENTER),t.addEventListener("mouseup",this.boundMouseUpHandler_);var r=document.createElement("span");r.classList.add(this.CssClasses_.RIPPLE),t.appendChild(r),this.element_.appendChild(t)}this.btnElement_.addEventListener("change",this.boundChangeHandler_),this.btnElement_.addEventListener("focus",this.boundFocusHandler_),this.btnElement_.addEventListener("blur",this.boundBlurHandler_),this.element_.addEventListener("mouseup",this.boundMouseUpHandler_),this.updateClasses_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED)}},n.register({constructor:h,classAsString:"MaterialRadio",cssClass:"mdl-js-radio",widget:!0});var f=function(e){this.element_=e,this.isIE_=window.navigator.msPointerEnabled,this.init()};window.MaterialSlider=f,f.prototype.Constant_={},f.prototype.CssClasses_={IE_CONTAINER:"mdl-slider__ie-container",SLIDER_CONTAINER:"mdl-slider__container",BACKGROUND_FLEX:"mdl-slider__background-flex",BACKGROUND_LOWER:"mdl-slider__background-lower",BACKGROUND_UPPER:"mdl-slider__background-upper",IS_LOWEST_VALUE:"is-lowest-value",IS_UPGRADED:"is-upgraded"},f.prototype.onInput_=function(e){this.updateValueStyles_()},f.prototype.onChange_=function(e){this.updateValueStyles_()},f.prototype.onMouseUp_=function(e){e.target.blur()},f.prototype.onContainerMouseDown_=function(e){if(e.target===this.element_.parentElement){e.preventDefault();var t=new MouseEvent("mousedown",{target:e.target,buttons:e.buttons,clientX:e.clientX,clientY:this.element_.getBoundingClientRect().y});this.element_.dispatchEvent(t)}},f.prototype.updateValueStyles_=function(){var e=(this.element_.value-this.element_.min)/(this.element_.max-this.element_.min);0===e?this.element_.classList.add(this.CssClasses_.IS_LOWEST_VALUE):this.element_.classList.remove(this.CssClasses_.IS_LOWEST_VALUE),this.isIE_||(this.backgroundLower_.style.flex=e,this.backgroundLower_.style.webkitFlex=e,this.backgroundUpper_.style.flex=1-e,this.backgroundUpper_.style.webkitFlex=1-e)},f.prototype.disable=function(){this.element_.disabled=!0},f.prototype.disable=f.prototype.disable,f.prototype.enable=function(){this.element_.disabled=!1},f.prototype.enable=f.prototype.enable,f.prototype.change=function(e){void 0!==e&&(this.element_.value=e),this.updateValueStyles_()},f.prototype.change=f.prototype.change,f.prototype.init=function(){if(this.element_){if(this.isIE_){var e=document.createElement("div");e.classList.add(this.CssClasses_.IE_CONTAINER),this.element_.parentElement.insertBefore(e,this.element_),this.element_.parentElement.removeChild(this.element_),e.appendChild(this.element_)}else{var t=document.createElement("div");t.classList.add(this.CssClasses_.SLIDER_CONTAINER),this.element_.parentElement.insertBefore(t,this.element_),this.element_.parentElement.removeChild(this.element_),t.appendChild(this.element_);var n=document.createElement("div");n.classList.add(this.CssClasses_.BACKGROUND_FLEX),t.appendChild(n),this.backgroundLower_=document.createElement("div"),this.backgroundLower_.classList.add(this.CssClasses_.BACKGROUND_LOWER),n.appendChild(this.backgroundLower_),this.backgroundUpper_=document.createElement("div"),this.backgroundUpper_.classList.add(this.CssClasses_.BACKGROUND_UPPER),n.appendChild(this.backgroundUpper_)}this.boundInputHandler=this.onInput_.bind(this),this.boundChangeHandler=this.onChange_.bind(this),this.boundMouseUpHandler=this.onMouseUp_.bind(this),this.boundContainerMouseDownHandler=this.onContainerMouseDown_.bind(this),this.element_.addEventListener("input",this.boundInputHandler),this.element_.addEventListener("change",this.boundChangeHandler),this.element_.addEventListener("mouseup",this.boundMouseUpHandler),this.element_.parentElement.addEventListener("mousedown",this.boundContainerMouseDownHandler),this.updateValueStyles_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED)}},n.register({constructor:f,classAsString:"MaterialSlider",cssClass:"mdl-js-slider",widget:!0});var p=function(e){if(this.element_=e,this.textElement_=this.element_.querySelector("."+this.cssClasses_.MESSAGE),this.actionElement_=this.element_.querySelector("."+this.cssClasses_.ACTION),!this.textElement_)throw new Error("There must be a message element for a snackbar.");if(!this.actionElement_)throw new Error("There must be an action element for a snackbar.");this.active=!1,this.actionHandler_=void 0,this.message_=void 0,this.actionText_=void 0,this.queuedNotifications_=[],this.setActionHidden_(!0)};window.MaterialSnackbar=p,p.prototype.Constant_={ANIMATION_LENGTH:250},p.prototype.cssClasses_={SNACKBAR:"mdl-snackbar",MESSAGE:"mdl-snackbar__text",ACTION:"mdl-snackbar__action",ACTIVE:"mdl-snackbar--active"},p.prototype.displaySnackbar_=function(){this.element_.setAttribute("aria-hidden","true"),this.actionHandler_&&(this.actionElement_.textContent=this.actionText_,this.actionElement_.addEventListener("click",this.actionHandler_),this.setActionHidden_(!1)),this.textElement_.textContent=this.message_,this.element_.classList.add(this.cssClasses_.ACTIVE),this.element_.setAttribute("aria-hidden","false"),setTimeout(this.cleanup_.bind(this),this.timeout_)},p.prototype.showSnackbar=function(e){if(void 0===e)throw new Error("Please provide a data object with at least a message to display.");if(void 0===e.message)throw new Error("Please provide a message to be displayed.");if(e.actionHandler&&!e.actionText)throw new Error("Please provide action text with the handler.");this.active?this.queuedNotifications_.push(e):(this.active=!0,this.message_=e.message,e.timeout?this.timeout_=e.timeout:this.timeout_=2750,e.actionHandler&&(this.actionHandler_=e.actionHandler),e.actionText&&(this.actionText_=e.actionText),this.displaySnackbar_())},p.prototype.showSnackbar=p.prototype.showSnackbar,p.prototype.checkQueue_=function(){this.queuedNotifications_.length>0&&this.showSnackbar(this.queuedNotifications_.shift())},p.prototype.cleanup_=function(){this.element_.classList.remove(this.cssClasses_.ACTIVE),setTimeout(function(){this.element_.setAttribute("aria-hidden","true"),this.textElement_.textContent="",Boolean(this.actionElement_.getAttribute("aria-hidden"))||(this.setActionHidden_(!0),this.actionElement_.textContent="",this.actionElement_.removeEventListener("click",this.actionHandler_)),this.actionHandler_=void 0,this.message_=void 0,this.actionText_=void 0,this.active=!1,this.checkQueue_()}.bind(this),this.Constant_.ANIMATION_LENGTH)},p.prototype.setActionHidden_=function(e){e?this.actionElement_.setAttribute("aria-hidden","true"):this.actionElement_.removeAttribute("aria-hidden")},n.register({constructor:p,classAsString:"MaterialSnackbar",cssClass:"mdl-js-snackbar",widget:!0});var m=function(e){this.element_=e,this.init()};window.MaterialSpinner=m,m.prototype.Constant_={MDL_SPINNER_LAYER_COUNT:4},m.prototype.CssClasses_={MDL_SPINNER_LAYER:"mdl-spinner__layer",MDL_SPINNER_CIRCLE_CLIPPER:"mdl-spinner__circle-clipper",MDL_SPINNER_CIRCLE:"mdl-spinner__circle",MDL_SPINNER_GAP_PATCH:"mdl-spinner__gap-patch",MDL_SPINNER_LEFT:"mdl-spinner__left",MDL_SPINNER_RIGHT:"mdl-spinner__right"},m.prototype.createLayer=function(e){var t=document.createElement("div");t.classList.add(this.CssClasses_.MDL_SPINNER_LAYER),t.classList.add(this.CssClasses_.MDL_SPINNER_LAYER+"-"+e);var n=document.createElement("div");n.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),n.classList.add(this.CssClasses_.MDL_SPINNER_LEFT);var r=document.createElement("div");r.classList.add(this.CssClasses_.MDL_SPINNER_GAP_PATCH);var i=document.createElement("div");i.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),i.classList.add(this.CssClasses_.MDL_SPINNER_RIGHT);for(var a=[n,r,i],s=0;s<a.length;s++){var o=document.createElement("div");o.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE),a[s].appendChild(o)}t.appendChild(n),t.appendChild(r),t.appendChild(i),this.element_.appendChild(t)},m.prototype.createLayer=m.prototype.createLayer,m.prototype.stop=function(){this.element_.classList.remove("is-active")},m.prototype.stop=m.prototype.stop,m.prototype.start=function(){this.element_.classList.add("is-active")},m.prototype.start=m.prototype.start,m.prototype.init=function(){if(this.element_){for(var e=1;e<=this.Constant_.MDL_SPINNER_LAYER_COUNT;e++)this.createLayer(e);this.element_.classList.add("is-upgraded")}},n.register({constructor:m,classAsString:"MaterialSpinner",cssClass:"mdl-js-spinner",widget:!0});var v=function(e){this.element_=e,this.init()};window.MaterialSwitch=v,v.prototype.Constant_={TINY_TIMEOUT:.001},v.prototype.CssClasses_={INPUT:"mdl-switch__input",TRACK:"mdl-switch__track",THUMB:"mdl-switch__thumb",FOCUS_HELPER:"mdl-switch__focus-helper",RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",RIPPLE_CONTAINER:"mdl-switch__ripple-container",RIPPLE_CENTER:"mdl-ripple--center",RIPPLE:"mdl-ripple",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_CHECKED:"is-checked"},v.prototype.onChange_=function(e){this.updateClasses_()},v.prototype.onFocus_=function(e){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},v.prototype.onBlur_=function(e){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},v.prototype.onMouseUp_=function(e){this.blur_()},v.prototype.updateClasses_=function(){this.checkDisabled(),this.checkToggleState()},v.prototype.blur_=function(){window.setTimeout(function(){this.inputElement_.blur()}.bind(this),this.Constant_.TINY_TIMEOUT)},v.prototype.checkDisabled=function(){this.inputElement_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},v.prototype.checkDisabled=v.prototype.checkDisabled,v.prototype.checkToggleState=function(){this.inputElement_.checked?this.element_.classList.add(this.CssClasses_.IS_CHECKED):this.element_.classList.remove(this.CssClasses_.IS_CHECKED)},v.prototype.checkToggleState=v.prototype.checkToggleState,v.prototype.disable=function(){this.inputElement_.disabled=!0,this.updateClasses_()},v.prototype.disable=v.prototype.disable,v.prototype.enable=function(){this.inputElement_.disabled=!1,this.updateClasses_()},v.prototype.enable=v.prototype.enable,v.prototype.on=function(){this.inputElement_.checked=!0,this.updateClasses_()},v.prototype.on=v.prototype.on,v.prototype.off=function(){this.inputElement_.checked=!1,this.updateClasses_()},v.prototype.off=v.prototype.off,v.prototype.init=function(){if(this.element_){this.inputElement_=this.element_.querySelector("."+this.CssClasses_.INPUT);var e=document.createElement("div");e.classList.add(this.CssClasses_.TRACK);var t=document.createElement("div");t.classList.add(this.CssClasses_.THUMB);var n=document.createElement("span");if(n.classList.add(this.CssClasses_.FOCUS_HELPER),t.appendChild(n),this.element_.appendChild(e),this.element_.appendChild(t),this.boundMouseUpHandler=this.onMouseUp_.bind(this),this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){this.element_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS),this.rippleContainerElement_=document.createElement("span"),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_EFFECT),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CENTER),this.rippleContainerElement_.addEventListener("mouseup",this.boundMouseUpHandler);var r=document.createElement("span");r.classList.add(this.CssClasses_.RIPPLE),this.rippleContainerElement_.appendChild(r),this.element_.appendChild(this.rippleContainerElement_)}this.boundChangeHandler=this.onChange_.bind(this),this.boundFocusHandler=this.onFocus_.bind(this),this.boundBlurHandler=this.onBlur_.bind(this),this.inputElement_.addEventListener("change",this.boundChangeHandler),this.inputElement_.addEventListener("focus",this.boundFocusHandler),this.inputElement_.addEventListener("blur",this.boundBlurHandler),this.element_.addEventListener("mouseup",this.boundMouseUpHandler),this.updateClasses_(),this.element_.classList.add("is-upgraded")}},n.register({constructor:v,classAsString:"MaterialSwitch",cssClass:"mdl-js-switch",widget:!0});var y=function(e){this.element_=e,this.init()};window.MaterialTabs=y,y.prototype.Constant_={},y.prototype.CssClasses_={TAB_CLASS:"mdl-tabs__tab",PANEL_CLASS:"mdl-tabs__panel",ACTIVE_CLASS:"is-active",UPGRADED_CLASS:"is-upgraded",MDL_JS_RIPPLE_EFFECT:"mdl-js-ripple-effect",MDL_RIPPLE_CONTAINER:"mdl-tabs__ripple-container",MDL_RIPPLE:"mdl-ripple",MDL_JS_RIPPLE_EFFECT_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events"},y.prototype.initTabs_=function(){this.element_.classList.contains(this.CssClasses_.MDL_JS_RIPPLE_EFFECT)&&this.element_.classList.add(this.CssClasses_.MDL_JS_RIPPLE_EFFECT_IGNORE_EVENTS),this.tabs_=this.element_.querySelectorAll("."+this.CssClasses_.TAB_CLASS),this.panels_=this.element_.querySelectorAll("."+this.CssClasses_.PANEL_CLASS);for(var t=0;t<this.tabs_.length;t++)new e(this.tabs_[t],this);this.element_.classList.add(this.CssClasses_.UPGRADED_CLASS)},y.prototype.resetTabState_=function(){for(var e=0;e<this.tabs_.length;e++)this.tabs_[e].classList.remove(this.CssClasses_.ACTIVE_CLASS)},y.prototype.resetPanelState_=function(){for(var e=0;e<this.panels_.length;e++)this.panels_[e].classList.remove(this.CssClasses_.ACTIVE_CLASS)},y.prototype.init=function(){this.element_&&this.initTabs_()},n.register({constructor:y,classAsString:"MaterialTabs",cssClass:"mdl-js-tabs"});var g=function(e){this.element_=e,this.maxRows=this.Constant_.NO_MAX_ROWS,this.init()};window.MaterialTextfield=g,g.prototype.Constant_={NO_MAX_ROWS:-1,MAX_ROWS_ATTRIBUTE:"maxrows"},g.prototype.CssClasses_={LABEL:"mdl-textfield__label",INPUT:"mdl-textfield__input",IS_DIRTY:"is-dirty",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_INVALID:"is-invalid",IS_UPGRADED:"is-upgraded",HAS_PLACEHOLDER:"has-placeholder"},g.prototype.onKeyDown_=function(e){var t=e.target.value.split("\n").length;13===e.keyCode&&t>=this.maxRows&&e.preventDefault()},g.prototype.onFocus_=function(e){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},g.prototype.onBlur_=function(e){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},g.prototype.onReset_=function(e){this.updateClasses_()},g.prototype.updateClasses_=function(){this.checkDisabled(),this.checkValidity(),this.checkDirty(),this.checkFocus()},g.prototype.checkDisabled=function(){this.input_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},g.prototype.checkDisabled=g.prototype.checkDisabled,g.prototype.checkFocus=function(){Boolean(this.element_.querySelector(":focus"))?this.element_.classList.add(this.CssClasses_.IS_FOCUSED):this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},g.prototype.checkFocus=g.prototype.checkFocus,g.prototype.checkValidity=function(){this.input_.validity&&(this.input_.validity.valid?this.element_.classList.remove(this.CssClasses_.IS_INVALID):this.element_.classList.add(this.CssClasses_.IS_INVALID))},g.prototype.checkValidity=g.prototype.checkValidity,g.prototype.checkDirty=function(){this.input_.value&&this.input_.value.length>0?this.element_.classList.add(this.CssClasses_.IS_DIRTY):this.element_.classList.remove(this.CssClasses_.IS_DIRTY)},g.prototype.checkDirty=g.prototype.checkDirty,g.prototype.disable=function(){this.input_.disabled=!0,this.updateClasses_()},g.prototype.disable=g.prototype.disable,g.prototype.enable=function(){this.input_.disabled=!1,this.updateClasses_()},g.prototype.enable=g.prototype.enable,g.prototype.change=function(e){this.input_.value=e||"",this.updateClasses_()},g.prototype.change=g.prototype.change,g.prototype.init=function(){if(this.element_&&(this.label_=this.element_.querySelector("."+this.CssClasses_.LABEL),this.input_=this.element_.querySelector("."+this.CssClasses_.INPUT),this.input_)){this.input_.hasAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE)&&(this.maxRows=parseInt(this.input_.getAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE),10),isNaN(this.maxRows)&&(this.maxRows=this.Constant_.NO_MAX_ROWS)),this.input_.hasAttribute("placeholder")&&this.element_.classList.add(this.CssClasses_.HAS_PLACEHOLDER),this.boundUpdateClassesHandler=this.updateClasses_.bind(this),this.boundFocusHandler=this.onFocus_.bind(this),this.boundBlurHandler=this.onBlur_.bind(this),this.boundResetHandler=this.onReset_.bind(this),this.input_.addEventListener("input",this.boundUpdateClassesHandler),this.input_.addEventListener("focus",this.boundFocusHandler),this.input_.addEventListener("blur",this.boundBlurHandler),this.input_.addEventListener("reset",this.boundResetHandler),this.maxRows!==this.Constant_.NO_MAX_ROWS&&(this.boundKeyDownHandler=this.onKeyDown_.bind(this),this.input_.addEventListener("keydown",this.boundKeyDownHandler));var e=this.element_.classList.contains(this.CssClasses_.IS_INVALID);this.updateClasses_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED),e&&this.element_.classList.add(this.CssClasses_.IS_INVALID),this.input_.hasAttribute("autofocus")&&(this.element_.focus(),this.checkFocus())}},n.register({constructor:g,classAsString:"MaterialTextfield",cssClass:"mdl-js-textfield",widget:!0});var _=function(e){this.element_=e,this.init()};window.MaterialTooltip=_,_.prototype.Constant_={},_.prototype.CssClasses_={IS_ACTIVE:"is-active",BOTTOM:"mdl-tooltip--bottom",LEFT:"mdl-tooltip--left",RIGHT:"mdl-tooltip--right",TOP:"mdl-tooltip--top"},_.prototype.handleMouseEnter_=function(e){var t=e.target.getBoundingClientRect(),n=t.left+t.width/2,r=t.top+t.height/2,i=this.element_.offsetWidth/2*-1,a=this.element_.offsetHeight/2*-1;this.element_.classList.contains(this.CssClasses_.LEFT)||this.element_.classList.contains(this.CssClasses_.RIGHT)?(n=t.width/2,r+a<0?(this.element_.style.top="0",this.element_.style.marginTop="0"):(this.element_.style.top=r+"px",this.element_.style.marginTop=a+"px")):n+i<0?(this.element_.style.left="0",this.element_.style.marginLeft="0"):(this.element_.style.left=n+"px",this.element_.style.marginLeft=i+"px"),this.element_.classList.contains(this.CssClasses_.TOP)?this.element_.style.top=t.top-this.element_.offsetHeight-10+"px":this.element_.classList.contains(this.CssClasses_.RIGHT)?this.element_.style.left=t.left+t.width+10+"px":this.element_.classList.contains(this.CssClasses_.LEFT)?this.element_.style.left=t.left-this.element_.offsetWidth-10+"px":this.element_.style.top=t.top+t.height+10+"px",this.element_.classList.add(this.CssClasses_.IS_ACTIVE)},_.prototype.hideTooltip_=function(){this.element_.classList.remove(this.CssClasses_.IS_ACTIVE)},_.prototype.init=function(){if(this.element_){var e=this.element_.getAttribute("for")||this.element_.getAttribute("data-mdl-for");e&&(this.forElement_=document.getElementById(e)),this.forElement_&&(this.forElement_.hasAttribute("tabindex")||this.forElement_.setAttribute("tabindex","0"),this.boundMouseEnterHandler=this.handleMouseEnter_.bind(this),this.boundMouseLeaveAndScrollHandler=this.hideTooltip_.bind(this),this.forElement_.addEventListener("mouseenter",this.boundMouseEnterHandler,!1),this.forElement_.addEventListener("touchend",this.boundMouseEnterHandler,!1),this.forElement_.addEventListener("mouseleave",this.boundMouseLeaveAndScrollHandler,!1),window.addEventListener("scroll",this.boundMouseLeaveAndScrollHandler,!0),window.addEventListener("touchstart",this.boundMouseLeaveAndScrollHandler))}},n.register({constructor:_,classAsString:"MaterialTooltip",cssClass:"mdl-tooltip"});var b=function(e){this.element_=e,this.init()};window.MaterialLayout=b,b.prototype.Constant_={MAX_WIDTH:"(max-width: 1024px)",TAB_SCROLL_PIXELS:100,RESIZE_TIMEOUT:100,MENU_ICON:"&#xE5D2;",CHEVRON_LEFT:"chevron_left",CHEVRON_RIGHT:"chevron_right"},b.prototype.Keycodes_={ENTER:13,ESCAPE:27,SPACE:32},b.prototype.Mode_={STANDARD:0,SEAMED:1,WATERFALL:2,SCROLL:3},b.prototype.CssClasses_={CONTAINER:"mdl-layout__container",HEADER:"mdl-layout__header",DRAWER:"mdl-layout__drawer",CONTENT:"mdl-layout__content",DRAWER_BTN:"mdl-layout__drawer-button",ICON:"material-icons",JS_RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_CONTAINER:"mdl-layout__tab-ripple-container",RIPPLE:"mdl-ripple",RIPPLE_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",HEADER_SEAMED:"mdl-layout__header--seamed",HEADER_WATERFALL:"mdl-layout__header--waterfall",HEADER_SCROLL:"mdl-layout__header--scroll",FIXED_HEADER:"mdl-layout--fixed-header",OBFUSCATOR:"mdl-layout__obfuscator",TAB_BAR:"mdl-layout__tab-bar",TAB_CONTAINER:"mdl-layout__tab-bar-container",TAB:"mdl-layout__tab",TAB_BAR_BUTTON:"mdl-layout__tab-bar-button",TAB_BAR_LEFT_BUTTON:"mdl-layout__tab-bar-left-button",TAB_BAR_RIGHT_BUTTON:"mdl-layout__tab-bar-right-button",TAB_MANUAL_SWITCH:"mdl-layout__tab-manual-switch",PANEL:"mdl-layout__tab-panel",HAS_DRAWER:"has-drawer",HAS_TABS:"has-tabs",HAS_SCROLLING_HEADER:"has-scrolling-header",CASTING_SHADOW:"is-casting-shadow",IS_COMPACT:"is-compact",IS_SMALL_SCREEN:"is-small-screen",IS_DRAWER_OPEN:"is-visible",IS_ACTIVE:"is-active",IS_UPGRADED:"is-upgraded",IS_ANIMATING:"is-animating",ON_LARGE_SCREEN:"mdl-layout--large-screen-only",ON_SMALL_SCREEN:"mdl-layout--small-screen-only"},b.prototype.contentScrollHandler_=function(){if(!this.header_.classList.contains(this.CssClasses_.IS_ANIMATING)){var e=!this.element_.classList.contains(this.CssClasses_.IS_SMALL_SCREEN)||this.element_.classList.contains(this.CssClasses_.FIXED_HEADER);this.content_.scrollTop>0&&!this.header_.classList.contains(this.CssClasses_.IS_COMPACT)?(this.header_.classList.add(this.CssClasses_.CASTING_SHADOW),this.header_.classList.add(this.CssClasses_.IS_COMPACT),e&&this.header_.classList.add(this.CssClasses_.IS_ANIMATING)):this.content_.scrollTop<=0&&this.header_.classList.contains(this.CssClasses_.IS_COMPACT)&&(this.header_.classList.remove(this.CssClasses_.CASTING_SHADOW),this.header_.classList.remove(this.CssClasses_.IS_COMPACT),e&&this.header_.classList.add(this.CssClasses_.IS_ANIMATING))}},b.prototype.keyboardEventHandler_=function(e){e.keyCode===this.Keycodes_.ESCAPE&&this.drawer_.classList.contains(this.CssClasses_.IS_DRAWER_OPEN)&&this.toggleDrawer()},b.prototype.screenSizeHandler_=function(){this.screenSizeMediaQuery_.matches?this.element_.classList.add(this.CssClasses_.IS_SMALL_SCREEN):(this.element_.classList.remove(this.CssClasses_.IS_SMALL_SCREEN),this.drawer_&&(this.drawer_.classList.remove(this.CssClasses_.IS_DRAWER_OPEN),this.obfuscator_.classList.remove(this.CssClasses_.IS_DRAWER_OPEN)))},b.prototype.drawerToggleHandler_=function(e){if(e&&"keydown"===e.type){if(e.keyCode!==this.Keycodes_.SPACE&&e.keyCode!==this.Keycodes_.ENTER)return;e.preventDefault()}this.toggleDrawer()},b.prototype.headerTransitionEndHandler_=function(){this.header_.classList.remove(this.CssClasses_.IS_ANIMATING)},b.prototype.headerClickHandler_=function(){this.header_.classList.contains(this.CssClasses_.IS_COMPACT)&&(this.header_.classList.remove(this.CssClasses_.IS_COMPACT),this.header_.classList.add(this.CssClasses_.IS_ANIMATING))},b.prototype.resetTabState_=function(e){for(var t=0;t<e.length;t++)e[t].classList.remove(this.CssClasses_.IS_ACTIVE)},b.prototype.resetPanelState_=function(e){for(var t=0;t<e.length;t++)e[t].classList.remove(this.CssClasses_.IS_ACTIVE)},b.prototype.toggleDrawer=function(){var e=this.element_.querySelector("."+this.CssClasses_.DRAWER_BTN);this.drawer_.classList.toggle(this.CssClasses_.IS_DRAWER_OPEN),this.obfuscator_.classList.toggle(this.CssClasses_.IS_DRAWER_OPEN),this.drawer_.classList.contains(this.CssClasses_.IS_DRAWER_OPEN)?(this.drawer_.setAttribute("aria-hidden","false"),e.setAttribute("aria-expanded","true")):(this.drawer_.setAttribute("aria-hidden","true"),e.setAttribute("aria-expanded","false"))},b.prototype.toggleDrawer=b.prototype.toggleDrawer,b.prototype.init=function(){if(this.element_){var e=document.createElement("div");e.classList.add(this.CssClasses_.CONTAINER);var n=this.element_.querySelector(":focus");this.element_.parentElement.insertBefore(e,this.element_),this.element_.parentElement.removeChild(this.element_),e.appendChild(this.element_),n&&n.focus();for(var r=this.element_.childNodes,i=r.length,a=0;a<i;a++){var s=r[a];s.classList&&s.classList.contains(this.CssClasses_.HEADER)&&(this.header_=s),s.classList&&s.classList.contains(this.CssClasses_.DRAWER)&&(this.drawer_=s),s.classList&&s.classList.contains(this.CssClasses_.CONTENT)&&(this.content_=s)}window.addEventListener("pageshow",function(e){e.persisted&&(this.element_.style.overflowY="hidden",requestAnimationFrame(function(){this.element_.style.overflowY=""}.bind(this)))}.bind(this),!1),this.header_&&(this.tabBar_=this.header_.querySelector("."+this.CssClasses_.TAB_BAR));var o=this.Mode_.STANDARD;if(this.header_&&(this.header_.classList.contains(this.CssClasses_.HEADER_SEAMED)?o=this.Mode_.SEAMED:this.header_.classList.contains(this.CssClasses_.HEADER_WATERFALL)?(o=this.Mode_.WATERFALL,this.header_.addEventListener("transitionend",this.headerTransitionEndHandler_.bind(this)),this.header_.addEventListener("click",this.headerClickHandler_.bind(this))):this.header_.classList.contains(this.CssClasses_.HEADER_SCROLL)&&(o=this.Mode_.SCROLL,e.classList.add(this.CssClasses_.HAS_SCROLLING_HEADER)),o===this.Mode_.STANDARD?(this.header_.classList.add(this.CssClasses_.CASTING_SHADOW),this.tabBar_&&this.tabBar_.classList.add(this.CssClasses_.CASTING_SHADOW)):o===this.Mode_.SEAMED||o===this.Mode_.SCROLL?(this.header_.classList.remove(this.CssClasses_.CASTING_SHADOW),this.tabBar_&&this.tabBar_.classList.remove(this.CssClasses_.CASTING_SHADOW)):o===this.Mode_.WATERFALL&&(this.content_.addEventListener("scroll",this.contentScrollHandler_.bind(this)),this.contentScrollHandler_())),this.drawer_){var u=this.element_.querySelector("."+this.CssClasses_.DRAWER_BTN);if(!u){(u=document.createElement("div")).setAttribute("aria-expanded","false"),u.setAttribute("role","button"),u.setAttribute("tabindex","0"),u.classList.add(this.CssClasses_.DRAWER_BTN);var l=document.createElement("i");l.classList.add(this.CssClasses_.ICON),l.innerHTML=this.Constant_.MENU_ICON,u.appendChild(l)}this.drawer_.classList.contains(this.CssClasses_.ON_LARGE_SCREEN)?u.classList.add(this.CssClasses_.ON_LARGE_SCREEN):this.drawer_.classList.contains(this.CssClasses_.ON_SMALL_SCREEN)&&u.classList.add(this.CssClasses_.ON_SMALL_SCREEN),u.addEventListener("click",this.drawerToggleHandler_.bind(this)),u.addEventListener("keydown",this.drawerToggleHandler_.bind(this)),this.element_.classList.add(this.CssClasses_.HAS_DRAWER),this.element_.classList.contains(this.CssClasses_.FIXED_HEADER)?this.header_.insertBefore(u,this.header_.firstChild):this.element_.insertBefore(u,this.content_);var c=document.createElement("div");c.classList.add(this.CssClasses_.OBFUSCATOR),this.element_.appendChild(c),c.addEventListener("click",this.drawerToggleHandler_.bind(this)),this.obfuscator_=c,this.drawer_.addEventListener("keydown",this.keyboardEventHandler_.bind(this)),this.drawer_.setAttribute("aria-hidden","true")}if(this.screenSizeMediaQuery_=window.matchMedia(this.Constant_.MAX_WIDTH),this.screenSizeMediaQuery_.addListener(this.screenSizeHandler_.bind(this)),this.screenSizeHandler_(),this.header_&&this.tabBar_){this.element_.classList.add(this.CssClasses_.HAS_TABS);var d=document.createElement("div");d.classList.add(this.CssClasses_.TAB_CONTAINER),this.header_.insertBefore(d,this.tabBar_),this.header_.removeChild(this.tabBar_);var h=document.createElement("div");h.classList.add(this.CssClasses_.TAB_BAR_BUTTON),h.classList.add(this.CssClasses_.TAB_BAR_LEFT_BUTTON);var f=document.createElement("i");f.classList.add(this.CssClasses_.ICON),f.textContent=this.Constant_.CHEVRON_LEFT,h.appendChild(f),h.addEventListener("click",function(){this.tabBar_.scrollLeft-=this.Constant_.TAB_SCROLL_PIXELS}.bind(this));var p=document.createElement("div");p.classList.add(this.CssClasses_.TAB_BAR_BUTTON),p.classList.add(this.CssClasses_.TAB_BAR_RIGHT_BUTTON);var m=document.createElement("i");m.classList.add(this.CssClasses_.ICON),m.textContent=this.Constant_.CHEVRON_RIGHT,p.appendChild(m),p.addEventListener("click",function(){this.tabBar_.scrollLeft+=this.Constant_.TAB_SCROLL_PIXELS}.bind(this)),d.appendChild(h),d.appendChild(this.tabBar_),d.appendChild(p);var v=function(){this.tabBar_.scrollLeft>0?h.classList.add(this.CssClasses_.IS_ACTIVE):h.classList.remove(this.CssClasses_.IS_ACTIVE),this.tabBar_.scrollLeft<this.tabBar_.scrollWidth-this.tabBar_.offsetWidth?p.classList.add(this.CssClasses_.IS_ACTIVE):p.classList.remove(this.CssClasses_.IS_ACTIVE)}.bind(this);this.tabBar_.addEventListener("scroll",v),v();var y=function(){this.resizeTimeoutId_&&clearTimeout(this.resizeTimeoutId_),this.resizeTimeoutId_=setTimeout(function(){v(),this.resizeTimeoutId_=null}.bind(this),this.Constant_.RESIZE_TIMEOUT)}.bind(this);window.addEventListener("resize",y),this.tabBar_.classList.contains(this.CssClasses_.JS_RIPPLE_EFFECT)&&this.tabBar_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS);for(var g=this.tabBar_.querySelectorAll("."+this.CssClasses_.TAB),_=this.content_.querySelectorAll("."+this.CssClasses_.PANEL),b=0;b<g.length;b++)new t(g[b],g,_,this)}this.element_.classList.add(this.CssClasses_.IS_UPGRADED)}},window.MaterialLayoutTab=t,n.register({constructor:b,classAsString:"MaterialLayout",cssClass:"mdl-js-layout"});var w=function(e){this.element_=e,this.init()};window.MaterialDataTable=w,w.prototype.Constant_={},w.prototype.CssClasses_={DATA_TABLE:"mdl-data-table",SELECTABLE:"mdl-data-table--selectable",SELECT_ELEMENT:"mdl-data-table__select",IS_SELECTED:"is-selected",IS_UPGRADED:"is-upgraded"},w.prototype.selectRow_=function(e,t,n){return t?function(){e.checked?t.classList.add(this.CssClasses_.IS_SELECTED):t.classList.remove(this.CssClasses_.IS_SELECTED)}.bind(this):n?function(){var t;if(e.checked)for(t=0;t<n.length;t++)n[t].querySelector("td").querySelector(".mdl-checkbox").MaterialCheckbox.check(),n[t].classList.add(this.CssClasses_.IS_SELECTED);else for(t=0;t<n.length;t++)n[t].querySelector("td").querySelector(".mdl-checkbox").MaterialCheckbox.uncheck(),n[t].classList.remove(this.CssClasses_.IS_SELECTED)}.bind(this):void 0},w.prototype.createCheckbox_=function(e,t){var r=document.createElement("label"),i=["mdl-checkbox","mdl-js-checkbox","mdl-js-ripple-effect",this.CssClasses_.SELECT_ELEMENT];r.className=i.join(" ");var a=document.createElement("input");return a.type="checkbox",a.classList.add("mdl-checkbox__input"),e?(a.checked=e.classList.contains(this.CssClasses_.IS_SELECTED),a.addEventListener("change",this.selectRow_(a,e))):t&&a.addEventListener("change",this.selectRow_(a,null,t)),r.appendChild(a),n.upgradeElement(r,"MaterialCheckbox"),r},w.prototype.init=function(){if(this.element_){var e=this.element_.querySelector("th"),t=Array.prototype.slice.call(this.element_.querySelectorAll("tbody tr")),n=Array.prototype.slice.call(this.element_.querySelectorAll("tfoot tr")),r=t.concat(n);if(this.element_.classList.contains(this.CssClasses_.SELECTABLE)){var i=document.createElement("th"),a=this.createCheckbox_(null,r);i.appendChild(a),e.parentElement.insertBefore(i,e);for(var s=0;s<r.length;s++){var o=r[s].querySelector("td");if(o){var u=document.createElement("td");if("TBODY"===r[s].parentNode.nodeName.toUpperCase()){var l=this.createCheckbox_(r[s]);u.appendChild(l)}r[s].insertBefore(u,o)}}this.element_.classList.add(this.CssClasses_.IS_UPGRADED)}}},n.register({constructor:w,classAsString:"MaterialDataTable",cssClass:"mdl-js-data-table"});var E=function(e){this.element_=e,this.init()};window.MaterialRipple=E,E.prototype.Constant_={INITIAL_SCALE:"scale(0.0001, 0.0001)",INITIAL_SIZE:"1px",INITIAL_OPACITY:"0.4",FINAL_OPACITY:"0",FINAL_SCALE:""},E.prototype.CssClasses_={RIPPLE_CENTER:"mdl-ripple--center",RIPPLE_EFFECT_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",RIPPLE:"mdl-ripple",IS_ANIMATING:"is-animating",IS_VISIBLE:"is-visible"},E.prototype.downHandler_=function(e){if(!this.rippleElement_.style.width&&!this.rippleElement_.style.height){var t=this.element_.getBoundingClientRect();this.boundHeight=t.height,this.boundWidth=t.width,this.rippleSize_=2*Math.sqrt(t.width*t.width+t.height*t.height)+2,this.rippleElement_.style.width=this.rippleSize_+"px",this.rippleElement_.style.height=this.rippleSize_+"px"}if(this.rippleElement_.classList.add(this.CssClasses_.IS_VISIBLE),"mousedown"===e.type&&this.ignoringMouseDown_)this.ignoringMouseDown_=!1;else{if("touchstart"===e.type&&(this.ignoringMouseDown_=!0),this.getFrameCount()>0)return;this.setFrameCount(1);var n,r,i=e.currentTarget.getBoundingClientRect();if(0===e.clientX&&0===e.clientY)n=Math.round(i.width/2),r=Math.round(i.height/2);else{var a=void 0!==e.clientX?e.clientX:e.touches[0].clientX,s=void 0!==e.clientY?e.clientY:e.touches[0].clientY;n=Math.round(a-i.left),r=Math.round(s-i.top)}this.setRippleXY(n,r),this.setRippleStyles(!0),window.requestAnimationFrame(this.animFrameHandler.bind(this))}},E.prototype.upHandler_=function(e){e&&2!==e.detail&&window.setTimeout(function(){this.rippleElement_.classList.remove(this.CssClasses_.IS_VISIBLE)}.bind(this),0)},E.prototype.init=function(){if(this.element_){var e=this.element_.classList.contains(this.CssClasses_.RIPPLE_CENTER);this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT_IGNORE_EVENTS)||(this.rippleElement_=this.element_.querySelector("."+this.CssClasses_.RIPPLE),this.frameCount_=0,this.rippleSize_=0,this.x_=0,this.y_=0,this.ignoringMouseDown_=!1,this.boundDownHandler=this.downHandler_.bind(this),this.element_.addEventListener("mousedown",this.boundDownHandler),this.element_.addEventListener("touchstart",this.boundDownHandler),this.boundUpHandler=this.upHandler_.bind(this),this.element_.addEventListener("mouseup",this.boundUpHandler),this.element_.addEventListener("mouseleave",this.boundUpHandler),this.element_.addEventListener("touchend",this.boundUpHandler),this.element_.addEventListener("blur",this.boundUpHandler),this.getFrameCount=function(){return this.frameCount_},this.setFrameCount=function(e){this.frameCount_=e},this.getRippleElement=function(){return this.rippleElement_},this.setRippleXY=function(e,t){this.x_=e,this.y_=t},this.setRippleStyles=function(t){if(null!==this.rippleElement_){var n,r,i="translate("+this.x_+"px, "+this.y_+"px)";t?(r=this.Constant_.INITIAL_SCALE,this.Constant_.INITIAL_SIZE):(r=this.Constant_.FINAL_SCALE,this.rippleSize_+"px",e&&(i="translate("+this.boundWidth/2+"px, "+this.boundHeight/2+"px)")),n="translate(-50%, -50%) "+i+r,this.rippleElement_.style.webkitTransform=n,this.rippleElement_.style.msTransform=n,this.rippleElement_.style.transform=n,t?this.rippleElement_.classList.remove(this.CssClasses_.IS_ANIMATING):this.rippleElement_.classList.add(this.CssClasses_.IS_ANIMATING)}},this.animFrameHandler=function(){this.frameCount_-- >0?window.requestAnimationFrame(this.animFrameHandler.bind(this)):this.setRippleStyles(!1)})}},n.register({constructor:E,classAsString:"MaterialRipple",cssClass:"mdl-js-ripple-effect",widget:!1})}()},function(e,t,n){e.exports=function(){"use strict";var e=window.CustomEvent;function t(e){for(;e;){if("dialog"===e.localName)return e;e=e.parentElement}return null}function n(e){e&&e.blur&&e!==document.body&&e.blur()}function r(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1}function i(e){return!(!e||!e.hasAttribute("method"))&&"dialog"===e.getAttribute("method").toLowerCase()}function a(e){if(this.dialog_=e,this.replacedStyleTop_=!1,this.openAsModal_=!1,e.hasAttribute("role")||e.setAttribute("role","dialog"),e.show=this.show.bind(this),e.showModal=this.showModal.bind(this),e.close=this.close.bind(this),"returnValue"in e||(e.returnValue=""),"MutationObserver"in window)new MutationObserver(this.maybeHideModal.bind(this)).observe(e,{attributes:!0,attributeFilter:["open"]});else{var t,n=!1,r=function(){n?this.downgradeModal():this.maybeHideModal(),n=!1}.bind(this),i=function(i){if(i.target===e){var a="DOMNodeRemoved";n|=i.type.substr(0,a.length)===a,window.clearTimeout(t),t=window.setTimeout(r,0)}};["DOMAttrModified","DOMNodeRemoved","DOMNodeRemovedFromDocument"].forEach(function(t){e.addEventListener(t,i)})}Object.defineProperty(e,"open",{set:this.setOpen.bind(this),get:e.hasAttribute.bind(e,"open")}),this.backdrop_=document.createElement("div"),this.backdrop_.className="backdrop",this.backdrop_.addEventListener("click",this.backdropClick_.bind(this))}e&&"object"!=typeof e||((e=function(e,t){t=t||{};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!!t.bubbles,!!t.cancelable,t.detail||null),n}).prototype=window.Event.prototype),a.prototype={get dialog(){return this.dialog_},maybeHideModal:function(){this.dialog_.hasAttribute("open")&&document.body.contains(this.dialog_)||this.downgradeModal()},downgradeModal:function(){this.openAsModal_&&(this.openAsModal_=!1,this.dialog_.style.zIndex="",this.replacedStyleTop_&&(this.dialog_.style.top="",this.replacedStyleTop_=!1),this.backdrop_.parentNode&&this.backdrop_.parentNode.removeChild(this.backdrop_),s.dm.removeDialog(this))},setOpen:function(e){e?this.dialog_.hasAttribute("open")||this.dialog_.setAttribute("open",""):(this.dialog_.removeAttribute("open"),this.maybeHideModal())},backdropClick_:function(e){if(this.dialog_.hasAttribute("tabindex"))this.dialog_.focus();else{var t=document.createElement("div");this.dialog_.insertBefore(t,this.dialog_.firstChild),t.tabIndex=-1,t.focus(),this.dialog_.removeChild(t)}var n=document.createEvent("MouseEvents");n.initMouseEvent(e.type,e.bubbles,e.cancelable,window,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget),this.dialog_.dispatchEvent(n),e.stopPropagation()},focus_:function(){var e=this.dialog_.querySelector("[autofocus]:not([disabled])");if(!e&&this.dialog_.tabIndex>=0&&(e=this.dialog_),!e){var t=["button","input","keygen","select","textarea"].map(function(e){return e+":not([disabled])"});t.push('[tabindex]:not([disabled]):not([tabindex=""])'),e=this.dialog_.querySelector(t.join(", "))}n(document.activeElement),e&&e.focus()},updateZIndex:function(e,t){if(e<t)throw new Error("dialogZ should never be < backdropZ");this.dialog_.style.zIndex=e,this.backdrop_.style.zIndex=t},show:function(){this.dialog_.open||(this.setOpen(!0),this.focus_())},showModal:function(){if(this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'showModal' on dialog: The element is already open, and therefore cannot be opened modally.");if(!document.body.contains(this.dialog_))throw new Error("Failed to execute 'showModal' on dialog: The element is not in a Document.");if(!s.dm.pushDialog(this))throw new Error("Failed to execute 'showModal' on dialog: There are too many open modal dialogs.");(function(e){for(;e&&e!==document.body;){var t=window.getComputedStyle(e),n=function(e,n){return!(void 0===t[e]||t[e]===n)};if(t.opacity<1||n("zIndex","auto")||n("transform","none")||n("mixBlendMode","normal")||n("filter","none")||n("perspective","none")||"isolate"===t.isolation||"fixed"===t.position||"touch"===t.webkitOverflowScrolling)return!0;e=e.parentElement}return!1})(this.dialog_.parentElement)&&console.warn("A dialog is being shown inside a stacking context. This may cause it to be unusable. For more information, see this link: https://github.com/GoogleChrome/dialog-polyfill/#stacking-context"),this.setOpen(!0),this.openAsModal_=!0,s.needsCentering(this.dialog_)?(s.reposition(this.dialog_),this.replacedStyleTop_=!0):this.replacedStyleTop_=!1,this.dialog_.parentNode.insertBefore(this.backdrop_,this.dialog_.nextSibling),this.focus_()},close:function(t){if(!this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'close' on dialog: The element does not have an 'open' attribute, and therefore cannot be closed.");this.setOpen(!1),void 0!==t&&(this.dialog_.returnValue=t);var n=new e("close",{bubbles:!1,cancelable:!1});this.dialog_.dispatchEvent(n)}};var s={reposition:function(e){var t=document.body.scrollTop||document.documentElement.scrollTop,n=t+(window.innerHeight-e.offsetHeight)/2;e.style.top=Math.max(t,n)+"px"},isInlinePositionSetByStylesheet:function(e){for(var t=0;t<document.styleSheets.length;++t){var n=document.styleSheets[t],i=null;try{i=n.cssRules}catch(e){}if(i)for(var a=0;a<i.length;++a){var s=i[a],o=null;try{o=document.querySelectorAll(s.selectorText)}catch(e){}if(o&&r(o,e)){var u=s.style.getPropertyValue("top"),l=s.style.getPropertyValue("bottom");if(u&&"auto"!==u||l&&"auto"!==l)return!0}}}return!1},needsCentering:function(e){return!("absolute"!==window.getComputedStyle(e).position||"auto"!==e.style.top&&""!==e.style.top||"auto"!==e.style.bottom&&""!==e.style.bottom||s.isInlinePositionSetByStylesheet(e))},forceRegisterDialog:function(e){if((window.HTMLDialogElement||e.showModal)&&console.warn("This browser already supports <dialog>, the polyfill may not work correctly",e),"dialog"!==e.localName)throw new Error("Failed to register dialog: The element is not a dialog.");new a(e)},registerDialog:function(e){e.showModal||s.forceRegisterDialog(e)},DialogManager:function(){this.pendingDialogStack=[];var e=this.checkDOM_.bind(this);this.overlay=document.createElement("div"),this.overlay.className="_dialog_overlay",this.overlay.addEventListener("click",function(t){this.forwardTab_=void 0,t.stopPropagation(),e([])}.bind(this)),this.handleKey_=this.handleKey_.bind(this),this.handleFocus_=this.handleFocus_.bind(this),this.zIndexLow_=1e5,this.zIndexHigh_=100150,this.forwardTab_=void 0,"MutationObserver"in window&&(this.mo_=new MutationObserver(function(t){var n=[];t.forEach(function(e){for(var t,r=0;t=e.removedNodes[r];++r)t instanceof Element&&("dialog"===t.localName&&n.push(t),n=n.concat(t.querySelectorAll("dialog")))}),n.length&&e(n)}))}};if(s.DialogManager.prototype.blockDocument=function(){document.documentElement.addEventListener("focus",this.handleFocus_,!0),document.addEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.observe(document,{childList:!0,subtree:!0})},s.DialogManager.prototype.unblockDocument=function(){document.documentElement.removeEventListener("focus",this.handleFocus_,!0),document.removeEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.disconnect()},s.DialogManager.prototype.updateStacking=function(){for(var e,t=this.zIndexHigh_,n=0;e=this.pendingDialogStack[n];++n)e.updateZIndex(--t,--t),0===n&&(this.overlay.style.zIndex=--t);var r=this.pendingDialogStack[0];r?(r.dialog.parentNode||document.body).appendChild(this.overlay):this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay)},s.DialogManager.prototype.containedByTopDialog_=function(e){for(;e=t(e);){for(var n,r=0;n=this.pendingDialogStack[r];++r)if(n.dialog===e)return 0===r;e=e.parentElement}return!1},s.DialogManager.prototype.handleFocus_=function(e){if(!this.containedByTopDialog_(e.target)&&document.activeElement!==document.documentElement&&(e.preventDefault(),e.stopPropagation(),n(e.target),void 0!==this.forwardTab_)){var t=this.pendingDialogStack[0];return t.dialog.compareDocumentPosition(e.target)&Node.DOCUMENT_POSITION_PRECEDING&&(this.forwardTab_?t.focus_():e.target!==document.documentElement&&document.documentElement.focus()),!1}},s.DialogManager.prototype.handleKey_=function(t){if(this.forwardTab_=void 0,27===t.keyCode){t.preventDefault(),t.stopPropagation();var n=new e("cancel",{bubbles:!1,cancelable:!0}),r=this.pendingDialogStack[0];r&&r.dialog.dispatchEvent(n)&&r.dialog.close()}else 9===t.keyCode&&(this.forwardTab_=!t.shiftKey)},s.DialogManager.prototype.checkDOM_=function(e){this.pendingDialogStack.slice().forEach(function(t){-1!==e.indexOf(t.dialog)?t.downgradeModal():t.maybeHideModal()})},s.DialogManager.prototype.pushDialog=function(e){var t=(this.zIndexHigh_-this.zIndexLow_)/2-1;return!(this.pendingDialogStack.length>=t||(1===this.pendingDialogStack.unshift(e)&&this.blockDocument(),this.updateStacking(),0))},s.DialogManager.prototype.removeDialog=function(e){var t=this.pendingDialogStack.indexOf(e);-1!==t&&(this.pendingDialogStack.splice(t,1),0===this.pendingDialogStack.length&&this.unblockDocument(),this.updateStacking())},s.dm=new s.DialogManager,s.formSubmitter=null,s.useValue=null,void 0===window.HTMLDialogElement){var o=document.createElement("form");if(o.setAttribute("method","dialog"),"dialog"!==o.method){var u=Object.getOwnPropertyDescriptor(HTMLFormElement.prototype,"method");if(u){var l=u.get;u.get=function(){return i(this)?"dialog":l.call(this)};var c=u.set;u.set=function(e){return"string"==typeof e&&"dialog"===e.toLowerCase()?this.setAttribute("method",e):c.call(this,e)},Object.defineProperty(HTMLFormElement.prototype,"method",u)}}document.addEventListener("click",function(e){if(s.formSubmitter=null,s.useValue=null,!e.defaultPrevented){var n=e.target;if(n&&i(n.form)){if(!("submit"===n.type&&["button","input"].indexOf(n.localName)>-1)){if("input"!==n.localName||"image"!==n.type)return;s.useValue=e.offsetX+","+e.offsetY}t(n)&&(s.formSubmitter=n)}}},!1);var d=HTMLFormElement.prototype.submit;HTMLFormElement.prototype.submit=function(){if(!i(this))return d.call(this);var e=t(this);e&&e.close()},document.addEventListener("submit",function(e){var n=e.target;if(i(n)){e.preventDefault();var r=t(n);if(r){var a=s.formSubmitter;a&&a.form===n?r.close(s.useValue||a.value):r.close(),s.formSubmitter=null}}},!0)}return s}()},function(e,t,n){(function(t){e.exports=function(){"use strict";function e(e){return e&&"[object Function]"==={}.toString.call(e)}function n(e,t){if(1!==e.nodeType)return[];var n=e.ownerDocument.defaultView.getComputedStyle(e,null);return t?n[t]:n}function r(e){return"HTML"===e.nodeName?e:e.parentNode||e.host}function i(e){if(!e)return document.body;switch(e.nodeName){case"HTML":case"BODY":return e.ownerDocument.body;case"#document":return e.body}var t=n(e),a=t.overflow,s=t.overflowX,o=t.overflowY;return/(auto|scroll|overlay)/.test(a+o+s)?e:i(r(e))}function a(e){return 11===e?Z:10===e?Q:Z||Q}function s(e){if(!e)return document.documentElement;for(var t=a(10)?document.body:null,r=e.offsetParent||null;r===t&&e.nextElementSibling;)r=(e=e.nextElementSibling).offsetParent;var i=r&&r.nodeName;return i&&"BODY"!==i&&"HTML"!==i?-1!==["TH","TD","TABLE"].indexOf(r.nodeName)&&"static"===n(r,"position")?s(r):r:e?e.ownerDocument.documentElement:document.documentElement}function o(e){return null===e.parentNode?e:o(e.parentNode)}function u(e,t){if(!(e&&e.nodeType&&t&&t.nodeType))return document.documentElement;var n=e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING,r=n?e:t,i=n?t:e,a=document.createRange();a.setStart(r,0),a.setEnd(i,0);var l=a.commonAncestorContainer;if(e!==l&&t!==l||r.contains(i))return function(e){var t=e.nodeName;return"BODY"!==t&&("HTML"===t||s(e.firstElementChild)===e)}(l)?l:s(l);var c=o(e);return c.host?u(c.host,t):u(e,o(t).host)}function l(e){var t="top"===(1<arguments.length&&void 0!==arguments[1]?arguments[1]:"top")?"scrollTop":"scrollLeft",n=e.nodeName;if("BODY"===n||"HTML"===n){var r=e.ownerDocument.documentElement;return(e.ownerDocument.scrollingElement||r)[t]}return e[t]}function c(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=l(t,"top"),i=l(t,"left"),a=n?-1:1;return e.top+=r*a,e.bottom+=r*a,e.left+=i*a,e.right+=i*a,e}function d(e,t){var n="x"===t?"Left":"Top",r="Left"==n?"Right":"Bottom";return parseFloat(e["border"+n+"Width"],10)+parseFloat(e["border"+r+"Width"],10)}function h(e,t,n,r){return q(t["offset"+e],t["scroll"+e],n["client"+e],n["offset"+e],n["scroll"+e],a(10)?parseInt(n["offset"+e])+parseInt(r["margin"+("Height"===e?"Top":"Left")])+parseInt(r["margin"+("Height"===e?"Bottom":"Right")]):0)}function f(e){var t=e.body,n=e.documentElement,r=a(10)&&getComputedStyle(n);return{height:h("Height",t,n,r),width:h("Width",t,n,r)}}function p(e){return ne({},e,{right:e.left+e.width,bottom:e.top+e.height})}function m(e){var t={};try{if(a(10)){t=e.getBoundingClientRect();var r=l(e,"top"),i=l(e,"left");t.top+=r,t.left+=i,t.bottom+=r,t.right+=i}else t=e.getBoundingClientRect()}catch(e){}var s={left:t.left,top:t.top,width:t.right-t.left,height:t.bottom-t.top},o="HTML"===e.nodeName?f(e.ownerDocument):{},u=o.width||e.clientWidth||s.right-s.left,c=o.height||e.clientHeight||s.bottom-s.top,h=e.offsetWidth-u,m=e.offsetHeight-c;if(h||m){var v=n(e);h-=d(v,"x"),m-=d(v,"y"),s.width-=h,s.height-=m}return p(s)}function v(e,t){var r=2<arguments.length&&void 0!==arguments[2]&&arguments[2],s=a(10),o="HTML"===t.nodeName,u=m(e),l=m(t),d=i(e),h=n(t),f=parseFloat(h.borderTopWidth,10),v=parseFloat(h.borderLeftWidth,10);r&&o&&(l.top=q(l.top,0),l.left=q(l.left,0));var y=p({top:u.top-l.top-f,left:u.left-l.left-v,width:u.width,height:u.height});if(y.marginTop=0,y.marginLeft=0,!s&&o){var g=parseFloat(h.marginTop,10),_=parseFloat(h.marginLeft,10);y.top-=f-g,y.bottom-=f-g,y.left-=v-_,y.right-=v-_,y.marginTop=g,y.marginLeft=_}return(s&&!r?t.contains(d):t===d&&"BODY"!==d.nodeName)&&(y=c(y,t)),y}function y(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=e.ownerDocument.documentElement,r=v(e,n),i=q(n.clientWidth,window.innerWidth||0),a=q(n.clientHeight,window.innerHeight||0),s=t?0:l(n),o=t?0:l(n,"left");return p({top:s-r.top+r.marginTop,left:o-r.left+r.marginLeft,width:i,height:a})}function g(e){var t=e.nodeName;if("BODY"===t||"HTML"===t)return!1;if("fixed"===n(e,"position"))return!0;var i=r(e);return!!i&&g(i)}function _(e){if(!e||!e.parentElement||a())return document.documentElement;for(var t=e.parentElement;t&&"none"===n(t,"transform");)t=t.parentElement;return t||document.documentElement}function b(e,t,n,a){var s=4<arguments.length&&void 0!==arguments[4]&&arguments[4],o={top:0,left:0},l=s?_(e):u(e,t);if("viewport"===a)o=y(l,s);else{var c;"scrollParent"===a?"BODY"===(c=i(r(t))).nodeName&&(c=e.ownerDocument.documentElement):c="window"===a?e.ownerDocument.documentElement:a;var d=v(c,l,s);if("HTML"!==c.nodeName||g(l))o=d;else{var h=f(e.ownerDocument),p=h.height,m=h.width;o.top+=d.top-d.marginTop,o.bottom=p+d.top,o.left+=d.left-d.marginLeft,o.right=m+d.left}}var b="number"==typeof(n=n||0);return o.left+=b?n:n.left||0,o.top+=b?n:n.top||0,o.right-=b?n:n.right||0,o.bottom-=b?n:n.bottom||0,o}function w(e){return e.width*e.height}function E(e,t,n,r,i){var a=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;if(-1===e.indexOf("auto"))return e;var s=b(n,r,a,i),o={top:{width:s.width,height:t.top-s.top},right:{width:s.right-t.right,height:s.height},bottom:{width:s.width,height:s.bottom-t.bottom},left:{width:t.left-s.left,height:s.height}},u=Object.keys(o).map(function(e){return ne({key:e},o[e],{area:w(o[e])})}).sort(function(e,t){return t.area-e.area}),l=u.filter(function(e){var t=e.width,r=e.height;return t>=n.clientWidth&&r>=n.clientHeight}),c=0<l.length?l[0].key:u[0].key,d=e.split("-")[1];return c+(d?"-"+d:"")}function S(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return v(n,r?_(t):u(t,n),r)}function T(e){var t=e.ownerDocument.defaultView.getComputedStyle(e),n=parseFloat(t.marginTop||0)+parseFloat(t.marginBottom||0),r=parseFloat(t.marginLeft||0)+parseFloat(t.marginRight||0);return{width:e.offsetWidth+r,height:e.offsetHeight+n}}function C(e){var t={left:"right",right:"left",bottom:"top",top:"bottom"};return e.replace(/left|right|bottom|top/g,function(e){return t[e]})}function k(e,t,n){n=n.split("-")[0];var r=T(e),i={width:r.width,height:r.height},a=-1!==["right","left"].indexOf(n),s=a?"top":"left",o=a?"left":"top",u=a?"height":"width",l=a?"width":"height";return i[s]=t[s]+t[u]/2-r[u]/2,i[o]=n===o?t[o]-r[l]:t[C(o)],i}function I(e,t){return Array.prototype.find?e.find(t):e.filter(t)[0]}function A(t,n,r){return(void 0===r?t:t.slice(0,function(e,t,n){if(Array.prototype.findIndex)return e.findIndex(function(e){return e[t]===n});var r=I(e,function(e){return e[t]===n});return e.indexOf(r)}(t,"name",r))).forEach(function(t){t.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var r=t.function||t.fn;t.enabled&&e(r)&&(n.offsets.popper=p(n.offsets.popper),n.offsets.reference=p(n.offsets.reference),n=r(n,t))}),n}function L(){if(!this.state.isDestroyed){var e={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};e.offsets.reference=S(this.state,this.popper,this.reference,this.options.positionFixed),e.placement=E(this.options.placement,e.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),e.originalPlacement=e.placement,e.positionFixed=this.options.positionFixed,e.offsets.popper=k(this.popper,e.offsets.reference,e.placement),e.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",e=A(this.modifiers,e),this.state.isCreated?this.options.onUpdate(e):(this.state.isCreated=!0,this.options.onCreate(e))}}function x(e,t){return e.some(function(e){var n=e.name;return e.enabled&&n===t})}function R(e){for(var t=[!1,"ms","Webkit","Moz","O"],n=e.charAt(0).toUpperCase()+e.slice(1),r=0;r<t.length;r++){var i=t[r],a=i?""+i+n:e;if(void 0!==document.body.style[a])return a}return null}function N(){return this.state.isDestroyed=!0,x(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[R("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function M(e){var t=e.ownerDocument;return t?t.defaultView:window}function P(e,t,n,r){n.updateBound=r,M(e).addEventListener("resize",n.updateBound,{passive:!0});var a=i(e);return function e(t,n,r,a){var s="BODY"===t.nodeName,o=s?t.ownerDocument.defaultView:t;o.addEventListener(n,r,{passive:!0}),s||e(i(o.parentNode),n,r,a),a.push(o)}(a,"scroll",n.updateBound,n.scrollParents),n.scrollElement=a,n.eventsEnabled=!0,n}function O(){this.state.eventsEnabled||(this.state=P(this.reference,this.options,this.state,this.scheduleUpdate))}function D(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=function(e,t){return M(e).removeEventListener("resize",t.updateBound),t.scrollParents.forEach(function(e){e.removeEventListener("scroll",t.updateBound)}),t.updateBound=null,t.scrollParents=[],t.scrollElement=null,t.eventsEnabled=!1,t}(this.reference,this.state))}function U(e){return""!==e&&!isNaN(parseFloat(e))&&isFinite(e)}function F(e,t){Object.keys(t).forEach(function(n){var r="";-1!==["width","height","top","right","bottom","left"].indexOf(n)&&U(t[n])&&(r="px"),e.style[n]=t[n]+r})}function B(e,t,n){var r=I(e,function(e){return e.name===t}),i=!!r&&e.some(function(e){return e.name===n&&e.enabled&&e.order<r.order});if(!i){var a="`"+t+"`";console.warn("`"+n+"` modifier is required by "+a+" modifier in order to work, be sure to include it before "+a+"!")}return i}function V(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=ae.indexOf(e),r=ae.slice(n+1).concat(ae.slice(0,n));return t?r.reverse():r}function j(e,t,n,r){var i=[0,0],a=-1!==["right","left"].indexOf(r),s=e.split(/(\+|\-)/).map(function(e){return e.trim()}),o=s.indexOf(I(s,function(e){return-1!==e.search(/,|\s/)}));s[o]&&-1===s[o].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var u=/\s*,\s*|\s+/,l=-1===o?[s]:[s.slice(0,o).concat([s[o].split(u)[0]]),[s[o].split(u)[1]].concat(s.slice(o+1))];return(l=l.map(function(e,r){var i=(1===r?!a:a)?"height":"width",s=!1;return e.reduce(function(e,t){return""===e[e.length-1]&&-1!==["+","-"].indexOf(t)?(e[e.length-1]=t,s=!0,e):s?(e[e.length-1]+=t,s=!1,e):e.concat(t)},[]).map(function(e){return function(e,t,n,r){var i=e.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),a=+i[1],s=i[2];if(!a)return e;if(0===s.indexOf("%")){var o;switch(s){case"%p":o=n;break;case"%":case"%r":default:o=r}return p(o)[t]/100*a}return"vh"===s||"vw"===s?("vh"===s?q(document.documentElement.clientHeight,window.innerHeight||0):q(document.documentElement.clientWidth,window.innerWidth||0))/100*a:a}(e,i,t,n)})})).forEach(function(e,t){e.forEach(function(n,r){U(n)&&(i[t]+=n*("-"===e[r-1]?-1:1))})}),i}for(var H=Math.min,K=Math.floor,G=Math.round,q=Math.max,W="undefined"!=typeof window&&"undefined"!=typeof document,z=["Edge","Trident","Firefox"],Y=0,X=0;X<z.length;X+=1)if(W&&0<=navigator.userAgent.indexOf(z[X])){Y=1;break}var $=W&&window.Promise?function(e){var t=!1;return function(){t||(t=!0,window.Promise.resolve().then(function(){t=!1,e()}))}}:function(e){var t=!1;return function(){t||(t=!0,setTimeout(function(){t=!1,e()},Y))}},Z=W&&!(!window.MSInputMethodContext||!document.documentMode),Q=W&&/MSIE 10/.test(navigator.userAgent),J=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},ee=function(){function e(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),te=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},ne=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},re=W&&/Firefox/i.test(navigator.userAgent),ie=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],ae=ie.slice(3),se="flip",oe="clockwise",ue="counterclockwise",le=function(){function t(n,r){var i=this,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};J(this,t),this.scheduleUpdate=function(){return requestAnimationFrame(i.update)},this.update=$(this.update.bind(this)),this.options=ne({},t.Defaults,a),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=n&&n.jquery?n[0]:n,this.popper=r&&r.jquery?r[0]:r,this.options.modifiers={},Object.keys(ne({},t.Defaults.modifiers,a.modifiers)).forEach(function(e){i.options.modifiers[e]=ne({},t.Defaults.modifiers[e]||{},a.modifiers?a.modifiers[e]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(e){return ne({name:e},i.options.modifiers[e])}).sort(function(e,t){return e.order-t.order}),this.modifiers.forEach(function(t){t.enabled&&e(t.onLoad)&&t.onLoad(i.reference,i.popper,i.options,t,i.state)}),this.update();var s=this.options.eventsEnabled;s&&this.enableEventListeners(),this.state.eventsEnabled=s}return ee(t,[{key:"update",value:function(){return L.call(this)}},{key:"destroy",value:function(){return N.call(this)}},{key:"enableEventListeners",value:function(){return O.call(this)}},{key:"disableEventListeners",value:function(){return D.call(this)}}]),t}();return le.Utils=("undefined"==typeof window?t:window).PopperUtils,le.placements=ie,le.Defaults={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(e){var t=e.placement,n=t.split("-")[0],r=t.split("-")[1];if(r){var i=e.offsets,a=i.reference,s=i.popper,o=-1!==["bottom","top"].indexOf(n),u=o?"left":"top",l=o?"width":"height",c={start:te({},u,a[u]),end:te({},u,a[u]+a[l]-s[l])};e.offsets.popper=ne({},s,c[r])}return e}},offset:{order:200,enabled:!0,fn:function(e,t){var n,r=t.offset,i=e.placement,a=e.offsets,s=a.popper,o=a.reference,u=i.split("-")[0];return n=U(+r)?[+r,0]:j(r,s,o,u),"left"===u?(s.top+=n[0],s.left-=n[1]):"right"===u?(s.top+=n[0],s.left+=n[1]):"top"===u?(s.left+=n[0],s.top-=n[1]):"bottom"===u&&(s.left+=n[0],s.top+=n[1]),e.popper=s,e},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(e,t){var n=t.boundariesElement||s(e.instance.popper);e.instance.reference===n&&(n=s(n));var r=R("transform"),i=e.instance.popper.style,a=i.top,o=i.left,u=i[r];i.top="",i.left="",i[r]="";var l=b(e.instance.popper,e.instance.reference,t.padding,n,e.positionFixed);i.top=a,i.left=o,i[r]=u,t.boundaries=l;var c=t.priority,d=e.offsets.popper,h={primary:function(e){var n=d[e];return d[e]<l[e]&&!t.escapeWithReference&&(n=q(d[e],l[e])),te({},e,n)},secondary:function(e){var n="right"===e?"left":"top",r=d[n];return d[e]>l[e]&&!t.escapeWithReference&&(r=H(d[n],l[e]-("right"===e?d.width:d.height))),te({},n,r)}};return c.forEach(function(e){var t=-1===["left","top"].indexOf(e)?"secondary":"primary";d=ne({},d,h[t](e))}),e.offsets.popper=d,e},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(e){var t=e.offsets,n=t.popper,r=t.reference,i=e.placement.split("-")[0],a=K,s=-1!==["top","bottom"].indexOf(i),o=s?"right":"bottom",u=s?"left":"top",l=s?"width":"height";return n[o]<a(r[u])&&(e.offsets.popper[u]=a(r[u])-n[l]),n[u]>a(r[o])&&(e.offsets.popper[u]=a(r[o])),e}},arrow:{order:500,enabled:!0,fn:function(e,t){var r;if(!B(e.instance.modifiers,"arrow","keepTogether"))return e;var i=t.element;if("string"==typeof i){if(!(i=e.instance.popper.querySelector(i)))return e}else if(!e.instance.popper.contains(i))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),e;var a=e.placement.split("-")[0],s=e.offsets,o=s.popper,u=s.reference,l=-1!==["left","right"].indexOf(a),c=l?"height":"width",d=l?"Top":"Left",h=d.toLowerCase(),f=l?"left":"top",m=l?"bottom":"right",v=T(i)[c];u[m]-v<o[h]&&(e.offsets.popper[h]-=o[h]-(u[m]-v)),u[h]+v>o[m]&&(e.offsets.popper[h]+=u[h]+v-o[m]),e.offsets.popper=p(e.offsets.popper);var y=u[h]+u[c]/2-v/2,g=n(e.instance.popper),_=parseFloat(g["margin"+d],10),b=parseFloat(g["border"+d+"Width"],10),w=y-e.offsets.popper[h]-_-b;return w=q(H(o[c]-v,w),0),e.arrowElement=i,e.offsets.arrow=(te(r={},h,G(w)),te(r,f,""),r),e},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(e,t){if(x(e.instance.modifiers,"inner"))return e;if(e.flipped&&e.placement===e.originalPlacement)return e;var n=b(e.instance.popper,e.instance.reference,t.padding,t.boundariesElement,e.positionFixed),r=e.placement.split("-")[0],i=C(r),a=e.placement.split("-")[1]||"",s=[];switch(t.behavior){case se:s=[r,i];break;case oe:s=V(r);break;case ue:s=V(r,!0);break;default:s=t.behavior}return s.forEach(function(o,u){if(r!==o||s.length===u+1)return e;r=e.placement.split("-")[0],i=C(r);var l=e.offsets.popper,c=e.offsets.reference,d=K,h="left"===r&&d(l.right)>d(c.left)||"right"===r&&d(l.left)<d(c.right)||"top"===r&&d(l.bottom)>d(c.top)||"bottom"===r&&d(l.top)<d(c.bottom),f=d(l.left)<d(n.left),p=d(l.right)>d(n.right),m=d(l.top)<d(n.top),v=d(l.bottom)>d(n.bottom),y="left"===r&&f||"right"===r&&p||"top"===r&&m||"bottom"===r&&v,g=-1!==["top","bottom"].indexOf(r),_=!!t.flipVariations&&(g&&"start"===a&&f||g&&"end"===a&&p||!g&&"start"===a&&m||!g&&"end"===a&&v),b=!!t.flipVariationsByContent&&(g&&"start"===a&&p||g&&"end"===a&&f||!g&&"start"===a&&v||!g&&"end"===a&&m),w=_||b;(h||y||w)&&(e.flipped=!0,(h||y)&&(r=s[u+1]),w&&(a=function(e){return"end"===e?"start":"start"===e?"end":e}(a)),e.placement=r+(a?"-"+a:""),e.offsets.popper=ne({},e.offsets.popper,k(e.instance.popper,e.offsets.reference,e.placement)),e=A(e.instance.modifiers,e,"flip"))}),e},behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:function(e){var t=e.placement,n=t.split("-")[0],r=e.offsets,i=r.popper,a=r.reference,s=-1!==["left","right"].indexOf(n),o=-1===["top","left"].indexOf(n);return i[s?"left":"top"]=a[n]-(o?i[s?"width":"height"]:0),e.placement=C(t),e.offsets.popper=p(i),e}},hide:{order:800,enabled:!0,fn:function(e){if(!B(e.instance.modifiers,"hide","preventOverflow"))return e;var t=e.offsets.reference,n=I(e.instance.modifiers,function(e){return"preventOverflow"===e.name}).boundaries;if(t.bottom<n.top||t.left>n.right||t.top>n.bottom||t.right<n.left){if(!0===e.hide)return e;e.hide=!0,e.attributes["x-out-of-boundaries"]=""}else{if(!1===e.hide)return e;e.hide=!1,e.attributes["x-out-of-boundaries"]=!1}return e}},computeStyle:{order:850,enabled:!0,fn:function(e,t){var n=t.x,r=t.y,i=e.offsets.popper,a=I(e.instance.modifiers,function(e){return"applyStyle"===e.name}).gpuAcceleration;void 0!==a&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var o,u,l=void 0===a?t.gpuAcceleration:a,c=s(e.instance.popper),d=m(c),h={position:i.position},f=function(e,t){var n=e.offsets,r=n.popper,i=n.reference,a=G,s=function(e){return e},o=a(i.width),u=a(r.width),l=-1!==["left","right"].indexOf(e.placement),c=-1!==e.placement.indexOf("-"),d=t?l||c||o%2==u%2?a:K:s,h=t?a:s;return{left:d(1==o%2&&1==u%2&&!c&&t?r.left-1:r.left),top:h(r.top),bottom:h(r.bottom),right:d(r.right)}}(e,2>window.devicePixelRatio||!re),p="bottom"===n?"top":"bottom",v="right"===r?"left":"right",y=R("transform");if(u="bottom"==p?"HTML"===c.nodeName?-c.clientHeight+f.bottom:-d.height+f.bottom:f.top,o="right"==v?"HTML"===c.nodeName?-c.clientWidth+f.right:-d.width+f.right:f.left,l&&y)h[y]="translate3d("+o+"px, "+u+"px, 0)",h[p]=0,h[v]=0,h.willChange="transform";else{var g="bottom"==p?-1:1,_="right"==v?-1:1;h[p]=u*g,h[v]=o*_,h.willChange=p+", "+v}var b={"x-placement":e.placement};return e.attributes=ne({},b,e.attributes),e.styles=ne({},h,e.styles),e.arrowStyles=ne({},e.offsets.arrow,e.arrowStyles),e},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(e){return F(e.instance.popper,e.styles),function(e,t){Object.keys(t).forEach(function(n){!1===t[n]?e.removeAttribute(n):e.setAttribute(n,t[n])})}(e.instance.popper,e.attributes),e.arrowElement&&Object.keys(e.arrowStyles).length&&F(e.arrowElement,e.arrowStyles),e},onLoad:function(e,t,n,r,i){var a=S(i,t,e,n.positionFixed),s=E(n.placement,a,t,e,n.modifiers.flip.boundariesElement,n.modifiers.flip.padding);return t.setAttribute("x-placement",s),F(t,{position:n.positionFixed?"fixed":"absolute"}),n},gpuAcceleration:void 0}}},le}()}).call(this,n(5))},function(e,t,n){e.exports=function(e){"use strict";function t(){return(t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}e=e&&e.hasOwnProperty("default")?e.default:e;var n="undefined"!=typeof window&&"undefined"!=typeof document,r=n?navigator.userAgent:"",i=/MSIE |Trident\//.test(r),a=/UCBrowser\//.test(r),s=n&&/iPhone|iPad|iPod/.test(navigator.platform)&&!window.MSStream,o={a11y:!0,allowHTML:!0,animateFill:!0,animation:"shift-away",appendTo:function(){return document.body},aria:"describedby",arrow:!1,arrowType:"sharp",boundary:"scrollParent",content:"",delay:0,distance:10,duration:[325,275],flip:!0,flipBehavior:"flip",flipOnUpdate:!1,followCursor:!1,hideOnClick:!0,ignoreAttributes:!1,inertia:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,lazy:!0,maxWidth:350,multiple:!1,offset:0,onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},placement:"top",popperOptions:{},role:"tooltip",showOnInit:!1,size:"regular",sticky:!1,target:"",theme:"dark",touch:!0,touchHold:!1,trigger:"mouseenter focus",triggerTarget:null,updateDuration:0,wait:null,zIndex:9999},u=["arrow","arrowType","boundary","distance","flip","flipBehavior","flipOnUpdate","offset","placement","popperOptions"],l=n?Element.prototype:{},c=l.matches||l.matchesSelector||l.webkitMatchesSelector||l.mozMatchesSelector||l.msMatchesSelector;function d(e){return[].slice.call(e)}function h(e,t){return f(e,function(e){return c.call(e,t)})}function f(e,t){for(;e;){if(t(e))return e;e=e.parentElement}return null}var p={passive:!0},m=4,v="x-placement",y="x-out-of-boundaries",g="tippy-iOS",_="tippy-active",b="tippy-popper",w="tippy-tooltip",E="tippy-content",S="tippy-backdrop",T="tippy-arrow",C="tippy-roundarrow",k=".".concat(b),I=".".concat(w),A=".".concat(E),L=".".concat(S),x=".".concat(T),R=".".concat(C),N=!1;function M(){N||(N=!0,s&&document.body.classList.add(g),window.performance&&document.addEventListener("mousemove",O))}var P=0;function O(){var e=performance.now();e-P<20&&(N=!1,document.removeEventListener("mousemove",O),s||document.body.classList.remove(g)),P=e}function D(){var e=document.activeElement;e&&e.blur&&e._tippy&&e.blur()}var U=Object.keys(o);function F(e,t){return{}.hasOwnProperty.call(e,t)}function B(e,t,n){if(Array.isArray(e)){var r=e[t];return null==r?n:r}return e}function V(e,t){return 0===t?e:function(r){clearTimeout(n),n=setTimeout(function(){e(r)},t)};var n}function j(e,t){return e&&e.modifiers&&e.modifiers[t]}function H(e,t){return e.indexOf(t)>-1}function K(e){return e instanceof Element}function G(e){return!(!e||!F(e,"isVirtual"))||K(e)}function q(e,t){return"function"==typeof e?e.apply(null,t):e}function W(e,t){e.filter(function(e){return"flip"===e.name})[0].enabled=t}function z(){return document.createElement("div")}function Y(e,t){e.forEach(function(e){e&&(e.style.transitionDuration="".concat(t,"ms"))})}function X(e,t){e.forEach(function(e){e&&e.setAttribute("data-state",t)})}function $(e,n){var r=t({},n,{content:q(n.content,[e])},n.ignoreAttributes?{}:function(e){return U.reduce(function(t,n){var r=(e.getAttribute("data-tippy-".concat(n))||"").trim();if(!r)return t;if("content"===n)t[n]=r;else try{t[n]=JSON.parse(r)}catch(e){t[n]=r}return t},{})}(e));return(r.arrow||a)&&(r.animateFill=!1),r}function Z(e,t){Object.keys(e).forEach(function(e){if(!F(t,e))throw new Error("[tippy]: `".concat(e,"` is not a valid option"))})}function Q(e,t){e.innerHTML=K(t)?t.innerHTML:t}function J(e,t){K(t.content)?(Q(e,""),e.appendChild(t.content)):"function"!=typeof t.content&&(e[t.allowHTML?"innerHTML":"textContent"]=t.content)}function ee(e){return{tooltip:e.querySelector(I),backdrop:e.querySelector(L),content:e.querySelector(A),arrow:e.querySelector(x)||e.querySelector(R)}}function te(e){e.setAttribute("data-inertia","")}function ne(e){var t=z();return"round"===e?(t.className=C,Q(t,'<svg viewBox="0 0 18 7" xmlns="http://www.w3.org/2000/svg"><path d="M0 7s2.021-.015 5.253-4.218C6.584 1.051 7.797.007 9 0c1.203-.007 2.416 1.035 3.761 2.782C16.012 7.005 18 7 18 7H0z"/></svg>')):t.className=T,t}function re(){var e=z();return e.className=S,e.setAttribute("data-state","hidden"),e}function ie(e,t){e.setAttribute("tabindex","-1"),t.setAttribute("data-interactive","")}function ae(e,t,n){var r=a&&void 0!==document.body.style.webkitTransition?"webkitTransitionEnd":"transitionend";e[t+"EventListener"](r,n)}function se(e){var t=e.getAttribute(v);return t?t.split("-")[0]:""}function oe(e,t,n){n.split(" ").forEach(function(n){e.classList[t](n+"-theme")})}function ue(e,t){var n=z();n.className=b,n.id="tippy-".concat(e),n.style.zIndex=""+t.zIndex,n.style.position="absolute",n.style.top="0",n.style.left="0",t.role&&n.setAttribute("role",t.role);var r=z();r.className=w,r.style.maxWidth=t.maxWidth+("number"==typeof t.maxWidth?"px":""),r.setAttribute("data-size",t.size),r.setAttribute("data-animation",t.animation),r.setAttribute("data-state","hidden"),oe(r,"add",t.theme);var i=z();return i.className=E,i.setAttribute("data-state","hidden"),t.interactive&&ie(n,r),t.arrow&&r.appendChild(ne(t.arrowType)),t.animateFill&&(r.appendChild(re()),r.setAttribute("data-animatefill","")),t.inertia&&te(r),J(i,t),r.appendChild(i),n.appendChild(r),n}function le(e,t,n){var r=ee(e),i=r.tooltip,a=r.content,s=r.backdrop,o=r.arrow;e.style.zIndex=""+n.zIndex,i.setAttribute("data-size",n.size),i.setAttribute("data-animation",n.animation),i.style.maxWidth=n.maxWidth+("number"==typeof n.maxWidth?"px":""),n.role?e.setAttribute("role",n.role):e.removeAttribute("role"),t.content!==n.content&&J(a,n),!t.animateFill&&n.animateFill?(i.appendChild(re()),i.setAttribute("data-animatefill","")):t.animateFill&&!n.animateFill&&(i.removeChild(s),i.removeAttribute("data-animatefill")),!t.arrow&&n.arrow?i.appendChild(ne(n.arrowType)):t.arrow&&!n.arrow&&i.removeChild(o),t.arrow&&n.arrow&&t.arrowType!==n.arrowType&&i.replaceChild(ne(n.arrowType),o),!t.interactive&&n.interactive?ie(e,i):t.interactive&&!n.interactive&&function(e,t){e.removeAttribute("tabindex"),t.removeAttribute("data-interactive")}(e,i),!t.inertia&&n.inertia?te(i):t.inertia&&!n.inertia&&i.removeAttribute("data-inertia"),t.theme!==n.theme&&(oe(i,"remove",t.theme),oe(i,"add",n.theme))}var ce=1,de=[];function he(n,r){var a,s,l,g,b,w=$(n,r);if(!w.multiple&&n._tippy)return null;var E,S,T,C,I,A=!1,L=!1,x=!1,R=!1,M=[],P=V(ge,w.interactiveDebounce),O=ce++,D=ue(O,w),U=ee(D),G={id:O,reference:n,popper:D,popperChildren:U,popperInstance:null,props:w,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},clearDelayTimeouts:Le,set:xe,setContent:function(e){xe({content:e})},show:Re,hide:Ne,enable:function(){G.state.isEnabled=!0},disable:function(){G.state.isEnabled=!1},destroy:function(e){if(!G.state.isDestroyed){L=!0,G.state.isMounted&&Ne(0),me(),delete n._tippy;var t=G.props.target;t&&e&&K(n)&&d(n.querySelectorAll(t)).forEach(function(e){e._tippy&&e._tippy.destroy()}),G.popperInstance&&G.popperInstance.destroy(),L=!1,G.state.isDestroyed=!0}}};return n._tippy=G,D._tippy=G,pe(),w.lazy||Ce(),w.showOnInit&&ke(),!w.a11y||w.target||!K(I=J())||c.call(I,"a[href],area[href],button,details,input,textarea,select,iframe,[tabindex]")&&!I.hasAttribute("disabled")||J().setAttribute("tabindex","0"),D.addEventListener("mouseenter",function(e){G.props.interactive&&G.state.isVisible&&"mouseenter"===a&&ke(e,!0)}),D.addEventListener("mouseleave",function(){G.props.interactive&&"mouseenter"===a&&document.addEventListener("mousemove",P)}),G;function z(){document.removeEventListener("mousemove",ve)}function Q(){document.body.removeEventListener("mouseleave",Ie),document.removeEventListener("mousemove",P),de=de.filter(function(e){return e!==P})}function J(){return G.props.triggerTarget||n}function te(){document.addEventListener("click",Ae,!0)}function ne(){document.removeEventListener("click",Ae,!0)}function re(){return[G.popperChildren.tooltip,G.popperChildren.backdrop,G.popperChildren.content]}function ie(){var e=G.props.followCursor;return e&&"focus"!==a||N&&"initial"===e}function oe(e,t){var n=G.popperChildren.tooltip;function r(e){e.target===n&&(ae(n,"remove",r),t())}if(0===e)return t();ae(n,"remove",T),ae(n,"add",r),T=r}function fe(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];J().addEventListener(e,t,n),M.push({eventType:e,handler:t,options:n})}function pe(){G.props.touchHold&&!G.props.target&&(fe("touchstart",ye,p),fe("touchend",_e,p)),G.props.trigger.trim().split(" ").forEach(function(e){if("manual"!==e)if(G.props.target)switch(e){case"mouseenter":fe("mouseover",we),fe("mouseout",Ee);break;case"focus":fe("focusin",we),fe("focusout",Ee);break;case"click":fe(e,we)}else switch(fe(e,ye),e){case"mouseenter":fe("mouseleave",_e);break;case"focus":fe(i?"focusout":"blur",be)}})}function me(){M.forEach(function(e){var t=e.eventType,n=e.handler,r=e.options;J().removeEventListener(t,n,r)}),M=[]}function ve(e){var r=s=e,i=r.clientX,a=r.clientY;if(C){var o=f(e.target,function(e){return e===n}),u=n.getBoundingClientRect(),l=G.props.followCursor,c="horizontal"===l,d="vertical"===l,h=H(["top","bottom"],se(D)),p=D.getAttribute(v),m=!!p&&!!p.split("-")[1],y=h?D.offsetWidth:D.offsetHeight,g=y/2,_=h?0:m?y:g,b=h?m?y:g:0;!o&&G.props.interactive||(G.popperInstance.reference=t({},G.popperInstance.reference,{referenceNode:n,clientWidth:0,clientHeight:0,getBoundingClientRect:function(){return{width:h?y:0,height:h?0:y,top:(c?u.top:a)-_,bottom:(c?u.bottom:a)+_,left:(d?u.left:i)-b,right:(d?u.right:i)+b}}}),G.popperInstance.update()),"initial"===l&&G.state.isVisible&&z()}}function ye(e){G.state.isEnabled&&!Se(e)&&(G.state.isVisible||(a=e.type,e instanceof MouseEvent&&(s=e,de.forEach(function(t){return t(e)}))),"click"===e.type&&!1!==G.props.hideOnClick&&G.state.isVisible?Ie():ke(e))}function ge(e){var t=h(e.target,k)===D,r=f(e.target,function(e){return e===n});t||r||function(e,t,n,r){if(!e)return!0;var i=n.clientX,a=n.clientY,s=r.interactiveBorder,o=r.distance,u=t.top-a>("top"===e?s+o:s),l=a-t.bottom>("bottom"===e?s+o:s),c=t.left-i>("left"===e?s+o:s),d=i-t.right>("right"===e?s+o:s);return u||l||c||d}(se(D),D.getBoundingClientRect(),e,G.props)&&(Q(),Ie())}function _e(e){if(!Se(e))return G.props.interactive?(document.body.addEventListener("mouseleave",Ie),document.addEventListener("mousemove",P),void de.push(P)):void Ie()}function be(e){e.target===J()&&(G.props.interactive&&e.relatedTarget&&D.contains(e.relatedTarget)||Ie())}function we(e){h(e.target,G.props.target)&&ke(e)}function Ee(e){h(e.target,G.props.target)&&Ie()}function Se(e){var t="ontouchstart"in window,n=H(e.type,"touch"),r=G.props.touchHold;return t&&N&&r&&!n||N&&!r&&n}function Te(){!R&&S&&(R=!0,D.offsetHeight,S())}function Ce(){var r=G.props.popperOptions,i=G.popperChildren,a=i.tooltip,s=i.arrow,o=j(r,"preventOverflow");function u(e){G.props.flip&&!G.props.flipOnUpdate&&(e.flipped&&(G.popperInstance.options.placement=e.placement),W(G.popperInstance.modifiers,!1)),a.setAttribute(v,e.placement),!1!==e.attributes[y]?a.setAttribute(y,""):a.removeAttribute(y),E&&E!==e.placement&&x&&(a.style.transition="none",requestAnimationFrame(function(){a.style.transition=""})),E=e.placement,x=G.state.isVisible;var n=se(D),r=a.style;r.top=r.bottom=r.left=r.right="",r[n]=-(G.props.distance-10)+"px";var i=o&&void 0!==o.padding?o.padding:m,s="number"==typeof i,u=t({top:s?i:i.top,bottom:s?i:i.bottom,left:s?i:i.left,right:s?i:i.right},!s&&i);u[n]=s?i+G.props.distance:(i[n]||0)+G.props.distance,G.popperInstance.modifiers.filter(function(e){return"preventOverflow"===e.name})[0].padding=u,C=u}var l=t({eventsEnabled:!1,placement:G.props.placement},r,{modifiers:t({},r?r.modifiers:{},{preventOverflow:t({boundariesElement:G.props.boundary,padding:m},o),arrow:t({element:s,enabled:!!s},j(r,"arrow")),flip:t({enabled:G.props.flip,padding:G.props.distance+m,behavior:G.props.flipBehavior},j(r,"flip")),offset:t({offset:G.props.offset},j(r,"offset"))}),onCreate:function(e){u(e),Te(),r&&r.onCreate&&r.onCreate(e)},onUpdate:function(e){u(e),Te(),r&&r.onUpdate&&r.onUpdate(e)}});G.popperInstance=new e(n,D,l)}function ke(e,n){if(Le(),!G.state.isVisible){if(G.props.target)return function(e){if(e){var n=h(e.target,G.props.target);n&&!n._tippy&&he(n,t({},G.props,{content:q(r.content,[n]),appendTo:r.appendTo,target:"",showOnInit:!0}))}}(e);if(A=!0,e&&!n&&G.props.onTrigger(G,e),G.props.wait)return G.props.wait(G,e);ie()&&!G.state.isMounted&&(G.popperInstance||Ce(),document.addEventListener("mousemove",ve)),te();var i=B(G.props.delay,0,o.delay);i?l=setTimeout(function(){Re()},i):Re()}}function Ie(){if(Le(),!G.state.isVisible)return z(),void ne();A=!1;var e=B(G.props.delay,1,o.delay);e?g=setTimeout(function(){G.state.isVisible&&Ne()},e):b=requestAnimationFrame(function(){Ne()})}function Ae(e){if(!G.props.interactive||!D.contains(e.target)){if(J().contains(e.target)){if(N)return;if(G.state.isVisible&&H(G.props.trigger,"click"))return}!0===G.props.hideOnClick&&(Le(),Ne())}}function Le(){clearTimeout(l),clearTimeout(g),cancelAnimationFrame(b)}function xe(e){Z(e=e||{},o),me();var r=G.props,i=$(n,t({},G.props,{},e,{ignoreAttributes:!0}));i.ignoreAttributes=F(e,"ignoreAttributes")?e.ignoreAttributes||!1:r.ignoreAttributes,G.props=i,pe(),Q(),P=V(ge,i.interactiveDebounce),le(D,r,i),G.popperChildren=ee(D),G.popperInstance&&(u.some(function(t){return F(e,t)&&e[t]!==r[t]})?(G.popperInstance.destroy(),Ce(),G.state.isVisible&&G.popperInstance.enableEventListeners(),G.props.followCursor&&s&&ve(s)):G.popperInstance.update())}function Re(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B(G.props.duration,0,o.duration[1]);if(!G.state.isDestroyed&&G.state.isEnabled&&(!N||G.props.touch)&&!J().hasAttribute("disabled")&&!1!==G.props.onShow(G)){te(),D.style.visibility="visible",G.state.isVisible=!0,G.props.interactive&&J().classList.add(_);var t=re();Y(t.concat(D),0),S=function(){if(G.state.isVisible){var r=ie();r&&s?ve(s):r||G.popperInstance.update(),G.popperChildren.backdrop&&(G.popperChildren.content.style.transitionDelay=Math.round(e/12)+"ms"),G.props.sticky&&function(){Y([D],i?0:G.props.updateDuration);var e=n.getBoundingClientRect();!function t(){var r=n.getBoundingClientRect();e.top===r.top&&e.right===r.right&&e.bottom===r.bottom&&e.left===r.left||G.popperInstance.scheduleUpdate(),e=r,G.state.isMounted&&requestAnimationFrame(t)}()}(),Y([D],G.props.updateDuration),Y(t,e),X(t,"visible"),function(e,t){oe(e,function(){G.props.aria&&J().setAttribute("aria-".concat(G.props.aria),D.id),G.props.onShown(G),G.state.isShown=!0})}(e)}},function(){R=!1;var e=ie();G.popperInstance?(W(G.popperInstance.modifiers,G.props.flip),e||(G.popperInstance.reference=n,G.popperInstance.enableEventListeners()),G.popperInstance.scheduleUpdate()):(Ce(),e||G.popperInstance.enableEventListeners());var t=G.props.appendTo,r="parent"===t?n.parentNode:q(t,[n]);r.contains(D)||(r.appendChild(D),G.props.onMount(G),G.state.isMounted=!0)}()}}function Ne(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B(G.props.duration,1,o.duration[1]);if(!G.state.isDestroyed&&(G.state.isEnabled||L)&&(!1!==G.props.onHide(G)||L)){ne(),D.style.visibility="hidden",G.state.isVisible=!1,G.state.isShown=!1,x=!1,G.props.interactive&&J().classList.remove(_);var t=re();Y(t,e),X(t,"hidden"),function(e,t){oe(e,function(){!G.state.isVisible&&D.parentNode&&D.parentNode.contains(D)&&(A||z(),G.props.aria&&J().removeAttribute("aria-".concat(G.props.aria)),G.popperInstance.disableEventListeners(),G.popperInstance.options.placement=G.props.placement,D.parentNode.removeChild(D),G.props.onHidden(G),G.state.isMounted=!1)})}(e)}}}var fe=!1;function pe(e,n){Z(n||{},o),fe||(document.addEventListener("touchstart",M,p),window.addEventListener("blur",D),fe=!0);var r,i=t({},o,{},n);r=e,"[object Object]"!=={}.toString.call(r)||r.addEventListener||function(e){var t={isVirtual:!0,attributes:e.attributes||{},contains:function(){},setAttribute:function(t,n){e.attributes[t]=n},getAttribute:function(t){return e.attributes[t]},removeAttribute:function(t){delete e.attributes[t]},hasAttribute:function(t){return t in e.attributes},addEventListener:function(){},removeEventListener:function(){},classList:{classNames:{},add:function(t){e.classList.classNames[t]=!0},remove:function(t){delete e.classList.classNames[t]},contains:function(t){return t in e.classList.classNames}}};for(var n in t)e[n]=t[n]}(e);var a=function(e){if(G(e))return[e];if(e instanceof NodeList)return d(e);if(Array.isArray(e))return e;try{return d(document.querySelectorAll(e))}catch(e){return[]}}(e).reduce(function(e,t){var n=t&&he(t,i);return n&&e.push(n),e},[]);return G(e)?a[0]:a}return pe.version="4.3.5",pe.defaults=o,pe.setDefaults=function(e){Object.keys(e).forEach(function(t){o[t]=e[t]})},pe.hideAll=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.exclude,n=e.duration;d(document.querySelectorAll(k)).forEach(function(e){var r,i=e._tippy;if(i){var a=!1;t&&(a=(r=t)._tippy&&!c.call(r,k)?i.reference===t:e===t.popper),a||i.hide(n)}})},pe.group=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.delay,i=void 0===r?e[0].props.delay:r,a=n.duration,s=void 0===a?0:a,o=!1;function u(e){o=e,h()}function l(t){t._originalProps.onShow(t),e.forEach(function(e){e.set({duration:s}),e.state.isVisible&&e.hide()}),u(!0)}function c(e){e._originalProps.onHide(e),u(!1)}function d(e){e._originalProps.onShown(e),e.set({duration:e._originalProps.duration})}function h(){e.forEach(function(e){e.set({onShow:l,onShown:d,onHide:c,delay:o?[0,Array.isArray(i)?i[1]:i]:i,duration:o?s:e._originalProps.duration})})}e.forEach(function(e){e._originalProps?e.set(e._originalProps):e._originalProps=t({},e.props)}),h()},n&&setTimeout(function(){d(document.querySelectorAll("[data-tippy]")).forEach(function(e){var t=e.getAttribute("data-tippy");t&&pe(e,{content:t})})}),pe}(n(14))},function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE__14__},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.goog=window.goog||{};window.goog;window.asserts=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,i;return t=e,i=[{key:"assert",value:function(e,t){console.assert&&console.assert(e,t)}}],(r=null)&&n(t.prototype,r),i&&n(t,i),e}(),window.asserts.ENABLE_ASSERTS&&console.assert&&(window.asserts.assert=function(e,t){return console.assert(e,t)})},function(e,t,n){(function(t){
/**
 * Less - Leaner CSS v3.10.3
 * http://lesscss.org
 * 
 * Copyright (c) 2009-2019, Alexis Sellier <self@cloudhead.net>
 * Licensed under the Apache-2.0 License.
 *
 * @license Apache-2.0
 */
e.exports=function(){"use strict";function e(e){return e.replace(/^[a-z-]+:\/+?[^\/]+/,"").replace(/[\?\&]livereload=\w+/,"").replace(/^\//,"").replace(/\.[a-zA-Z]+$/,"").replace(/[^\.\w-]+/g,"-").replace(/\./g,":")}function n(e,t){for(var n in t.dataset)if(t.dataset.hasOwnProperty(n))if("env"===n||"dumpLineNumbers"===n||"rootpath"===n||"errorReporting"===n)e[n]=t.dataset[n];else try{e[n]=JSON.parse(t.dataset[n])}catch(e){}}var r={createCSS:function(t,n,r){var i=r.href||"",a="less:".concat(r.title||e(i)),s=t.getElementById(a),o=!1,u=t.createElement("style");u.setAttribute("type","text/css"),r.media&&u.setAttribute("media",r.media),u.id=a,u.styleSheet||(u.appendChild(t.createTextNode(n)),o=null!==s&&s.childNodes.length>0&&u.childNodes.length>0&&s.firstChild.nodeValue===u.firstChild.nodeValue);var l=t.getElementsByTagName("head")[0];if(null===s||!1===o){var c=r&&r.nextSibling||null;c?c.parentNode.insertBefore(u,c):l.appendChild(u)}if(s&&!1===o&&s.parentNode.removeChild(s),u.styleSheet)try{u.styleSheet.cssText=n}catch(e){throw new Error("Couldn't reassign styleSheet.cssText.")}},currentScript:function(e){var t,n=e.document;return n.currentScript||(t=n.getElementsByTagName("script"))[t.length-1]}};function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t,n){return(d=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&c(i,n.prototype),i}).apply(null,arguments)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?h(e):t}function p(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var m={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},v={length:{m:1,cm:.01,mm:.001,in:.0254,px:.0254/96,pt:.0254/72,pc:.0254/72*12},duration:{s:1,ms:.001},angle:{rad:1/(2*Math.PI),deg:1/360,grad:.0025,turn:1}},y={colors:m,unitConversions:v},g=function(){function e(){a(this,e),this.parent=null,this.visibilityBlocks=void 0,this.nodeVisible=void 0,this.rootNode=null,this.parsed=null;var t=this;Object.defineProperty(this,"currentFileInfo",{get:function(){return t.fileInfo()}}),Object.defineProperty(this,"index",{get:function(){return t.getIndex()}})}return o(e,[{key:"setParent",value:function(t,n){function r(t){t&&t instanceof e&&(t.parent=n)}Array.isArray(t)?t.forEach(r):r(t)}},{key:"getIndex",value:function(){return this._index||this.parent&&this.parent.getIndex()||0}},{key:"fileInfo",value:function(){return this._fileInfo||this.parent&&this.parent.fileInfo()||{}}},{key:"isRulesetLike",value:function(){return!1}},{key:"toCSS",value:function(e){var t=[];return this.genCSS(e,{add:function(e,n,r){t.push(e)},isEmpty:function(){return 0===t.length}}),t.join("")}},{key:"genCSS",value:function(e,t){t.add(this.value)}},{key:"accept",value:function(e){this.value=e.visit(this.value)}},{key:"eval",value:function(){return this}},{key:"_operate",value:function(e,t,n,r){switch(t){case"+":return n+r;case"-":return n-r;case"*":return n*r;case"/":return n/r}}},{key:"fround",value:function(e,t){var n=e&&e.numPrecision;return n?Number((t+2e-16).toFixed(n)):t}},{key:"blocksVisibility",value:function(){return null==this.visibilityBlocks&&(this.visibilityBlocks=0),0!==this.visibilityBlocks}},{key:"addVisibilityBlock",value:function(){null==this.visibilityBlocks&&(this.visibilityBlocks=0),this.visibilityBlocks=this.visibilityBlocks+1}},{key:"removeVisibilityBlock",value:function(){null==this.visibilityBlocks&&(this.visibilityBlocks=0),this.visibilityBlocks=this.visibilityBlocks-1}},{key:"ensureVisibility",value:function(){this.nodeVisible=!0}},{key:"ensureInvisibility",value:function(){this.nodeVisible=!1}},{key:"isVisible",value:function(){return this.nodeVisible}},{key:"visibilityInfo",value:function(){return{visibilityBlocks:this.visibilityBlocks,nodeVisible:this.nodeVisible}}},{key:"copyVisibilityInfo",value:function(e){e&&(this.visibilityBlocks=e.visibilityBlocks,this.nodeVisible=e.nodeVisible)}}]),e}();g.compare=function(e,t){if(e.compare&&"Quoted"!==t.type&&"Anonymous"!==t.type)return e.compare(t);if(t.compare)return-t.compare(e);if(e.type===t.type){if(e=e.value,t=t.value,!Array.isArray(e))return e===t?0:void 0;if(e.length===t.length){for(var n=0;n<e.length;n++)if(0!==g.compare(e[n],t[n]))return;return 0}}},g.numericCompare=function(e,t){return e<t?-1:e===t?0:e>t?1:void 0};var _=function(e){function t(e,n,r){var i;a(this,t);var s=h(i=f(this,l(t).call(this)));return Array.isArray(e)?i.rgb=e:e.length>=6?(i.rgb=[],e.match(/.{2}/g).map(function(e,t){t<3?s.rgb.push(parseInt(e,16)):s.alpha=parseInt(e,16)/255})):(i.rgb=[],e.split("").map(function(e,t){t<3?s.rgb.push(parseInt(e+e,16)):s.alpha=parseInt(e+e,16)/255})),i.alpha=i.alpha||("number"==typeof n?n:1),void 0!==r&&(i.value=r),i}return u(t,g),o(t,[{key:"luma",value:function(){var e=this.rgb[0]/255,t=this.rgb[1]/255,n=this.rgb[2]/255;return.2126*(e=e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(t=t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.0722*(n=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))}},{key:"genCSS",value:function(e,t){t.add(this.toCSS(e))}},{key:"toCSS",value:function(e,t){var n,r,i,a=e&&e.compress&&!t,s=[];if(r=this.fround(e,this.alpha),this.value)if(0===this.value.indexOf("rgb"))r<1&&(i="rgba");else{if(0!==this.value.indexOf("hsl"))return this.value;i=r<1?"hsla":"hsl"}else r<1&&(i="rgba");switch(i){case"rgba":s=this.rgb.map(function(e){return b(Math.round(e),255)}).concat(b(r,1));break;case"hsla":s.push(b(r,1));case"hsl":n=this.toHSL(),s=[this.fround(e,n.h),"".concat(this.fround(e,100*n.s),"%"),"".concat(this.fround(e,100*n.l),"%")].concat(s)}if(i)return"".concat(i,"(").concat(s.join(",".concat(a?"":" ")),")");if(n=this.toRGB(),a){var o=n.split("");o[1]===o[2]&&o[3]===o[4]&&o[5]===o[6]&&(n="#".concat(o[1]).concat(o[3]).concat(o[5]))}return n}},{key:"operate",value:function(e,n,r){for(var i=new Array(3),a=this.alpha*(1-r.alpha)+r.alpha,s=0;s<3;s++)i[s]=this._operate(e,n,this.rgb[s],r.rgb[s]);return new t(i,a)}},{key:"toRGB",value:function(){return w(this.rgb)}},{key:"toHSL",value:function(){var e,t,n=this.rgb[0]/255,r=this.rgb[1]/255,i=this.rgb[2]/255,a=this.alpha,s=Math.max(n,r,i),o=Math.min(n,r,i),u=(s+o)/2,l=s-o;if(s===o)e=t=0;else{switch(t=u>.5?l/(2-s-o):l/(s+o),s){case n:e=(r-i)/l+(r<i?6:0);break;case r:e=(i-n)/l+2;break;case i:e=(n-r)/l+4}e/=6}return{h:360*e,s:t,l:u,a:a}}},{key:"toHSV",value:function(){var e,t,n=this.rgb[0]/255,r=this.rgb[1]/255,i=this.rgb[2]/255,a=this.alpha,s=Math.max(n,r,i),o=Math.min(n,r,i),u=s,l=s-o;if(t=0===s?0:l/s,s===o)e=0;else{switch(s){case n:e=(r-i)/l+(r<i?6:0);break;case r:e=(i-n)/l+2;break;case i:e=(n-r)/l+4}e/=6}return{h:360*e,s:t,v:u,a:a}}},{key:"toARGB",value:function(){return w([255*this.alpha].concat(this.rgb))}},{key:"compare",value:function(e){return e.rgb&&e.rgb[0]===this.rgb[0]&&e.rgb[1]===this.rgb[1]&&e.rgb[2]===this.rgb[2]&&e.alpha===this.alpha?0:void 0}}]),t}();function b(e,t){return Math.min(Math.max(e,0),t)}function w(e){return"#".concat(e.map(function(e){return((e=b(Math.round(e),255))<16?"0":"")+e.toString(16)}).join(""))}_.prototype.type="Color",_.fromKeyword=function(e){var t,n=e.toLowerCase();if(m.hasOwnProperty(n)?t=new _(m[n].slice(1)):"transparent"===n&&(t=new _([0,0,0],0)),t)return t.value=e,t};var E=function(e){function t(e){var n;return a(this,t),(n=f(this,l(t).call(this))).value=e,n}return u(t,g),o(t,[{key:"genCSS",value:function(e,t){t.add("("),this.value.genCSS(e,t),t.add(")")}},{key:"eval",value:function(e){return new t(this.value.eval(e))}}]),t}();E.prototype.type="Paren";var S={"":!0," ":!0,"|":!0},T=function(e){function t(e){var n;return a(this,t),n=f(this,l(t).call(this))," "===e?(n.value=" ",n.emptyOrWhitespace=!0):(n.value=e?e.trim():"",n.emptyOrWhitespace=""===n.value),n}return u(t,g),o(t,[{key:"genCSS",value:function(e,t){var n=e.compress||S[this.value]?"":" ";t.add(n+this.value+n)}}]),t}();T.prototype.type="Combinator";var C=function(e){function t(e,n,r,i,s,o){var u;return a(this,t),(u=f(this,l(t).call(this))).combinator=e instanceof T?e:new T(e),u.value="string"==typeof n?n.trim():n||"",u.isVariable=r,u._index=i,u._fileInfo=s,u.copyVisibilityInfo(o),u.setParent(u.combinator,h(u)),u}return u(t,g),o(t,[{key:"accept",value:function(e){var t=this.value;this.combinator=e.visit(this.combinator),"object"===i(t)&&(this.value=e.visit(t))}},{key:"eval",value:function(e){return new t(this.combinator,this.value.eval?this.value.eval(e):this.value,this.isVariable,this.getIndex(),this.fileInfo(),this.visibilityInfo())}},{key:"clone",value:function(){return new t(this.combinator,this.value,this.isVariable,this.getIndex(),this.fileInfo(),this.visibilityInfo())}},{key:"genCSS",value:function(e,t){t.add(this.toCSS(e),this.fileInfo(),this.getIndex())}},{key:"toCSS",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.value,n=e.firstSelector;return t instanceof E&&(e.firstSelector=!0),t=t.toCSS?t.toCSS(e):t,e.firstSelector=n,""===t&&"&"===this.combinator.value.charAt(0)?"":this.combinator.toCSS(e)+t}}]),t}();C.prototype.type="Element";var k={ALWAYS:0,PARENS_DIVISION:1,PARENS:2,STRICT_LEGACY:3},I={OFF:0,LOCAL:1,ALL:2},A=function(e,t){return e(t={exports:{}},t.exports),t.exports}(function(e){var n=function(){function e(e,t){return null!=t&&e instanceof t}var n,r,i;try{n=Map}catch(e){n=function(){}}try{r=Set}catch(e){r=function(){}}try{i=Promise}catch(e){i=function(){}}function a(s,u,l,c,d){"object"==typeof u&&(l=u.depth,c=u.prototype,d=u.includeNonEnumerable,u=u.circular);var h=[],f=[],p=void 0!==t;return void 0===u&&(u=!0),void 0===l&&(l=1/0),function s(l,m){if(null===l)return null;if(0===m)return l;var v,y;if("object"!=typeof l)return l;if(e(l,n))v=new n;else if(e(l,r))v=new r;else if(e(l,i))v=new i(function(e,t){l.then(function(t){e(s(t,m-1))},function(e){t(s(e,m-1))})});else if(a.__isArray(l))v=[];else if(a.__isRegExp(l))v=new RegExp(l.source,o(l)),l.lastIndex&&(v.lastIndex=l.lastIndex);else if(a.__isDate(l))v=new Date(l.getTime());else{if(p&&t.isBuffer(l))return v=t.allocUnsafe?t.allocUnsafe(l.length):new t(l.length),l.copy(v),v;e(l,Error)?v=Object.create(l):void 0===c?(y=Object.getPrototypeOf(l),v=Object.create(y)):(v=Object.create(c),y=c)}if(u){var g=h.indexOf(l);if(-1!=g)return f[g];h.push(l),f.push(v)}for(var _ in e(l,n)&&l.forEach(function(e,t){var n=s(t,m-1),r=s(e,m-1);v.set(n,r)}),e(l,r)&&l.forEach(function(e){var t=s(e,m-1);v.add(t)}),l){var b;y&&(b=Object.getOwnPropertyDescriptor(y,_)),b&&null==b.set||(v[_]=s(l[_],m-1))}if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(l);for(_=0;_<w.length;_++){var E=w[_];(!(T=Object.getOwnPropertyDescriptor(l,E))||T.enumerable||d)&&(v[E]=s(l[E],m-1),T.enumerable||Object.defineProperty(v,E,{enumerable:!1}))}}if(d){var S=Object.getOwnPropertyNames(l);for(_=0;_<S.length;_++){var T,C=S[_];(T=Object.getOwnPropertyDescriptor(l,C))&&T.enumerable||(v[C]=s(l[C],m-1),Object.defineProperty(v,C,{enumerable:!1}))}}return v}(s,l)}function s(e){return Object.prototype.toString.call(e)}function o(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return a.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},a.__objToStr=s,a.__isDate=function(e){return"object"==typeof e&&"[object Date]"===s(e)},a.__isArray=function(e){return"object"==typeof e&&"[object Array]"===s(e)},a.__isRegExp=function(e){return"object"==typeof e&&"[object RegExp]"===s(e)},a.__getRegExpFlags=o,a}();e.exports&&(e.exports=n)});function L(e,t){for(var n=e+1,r=null,i=-1;--n>=0&&"\n"!==t.charAt(n);)i++;return"number"==typeof e&&(r=(t.slice(0,e).match(/\n/g)||"").length),{line:r,column:i}}function x(e){var t,n=e.length,r=new Array(n);for(t=0;t<n;t++)r[t]=e[t];return r}function R(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function N(e,t){var n=t||{};if(!t._defaults){n={};var r=A(e);n._defaults=r;var i=t?A(t):{};Object.assign(n,r,i)}return n}function M(e,t){if(t&&t._defaults)return t;var n=N(e,t);if(n.strictMath&&(n.math=k.STRICT_LEGACY),n.relativeUrls&&(n.rewriteUrls=I.ALL),"string"==typeof n.math)switch(n.math.toLowerCase()){case"always":n.math=k.ALWAYS;break;case"parens-division":n.math=k.PARENS_DIVISION;break;case"strict":case"parens":n.math=k.PARENS;break;case"strict-legacy":n.math=k.STRICT_LEGACY}if("string"==typeof n.rewriteUrls)switch(n.rewriteUrls.toLowerCase()){case"off":n.rewriteUrls=I.OFF;break;case"local":n.rewriteUrls=I.LOCAL;break;case"all":n.rewriteUrls=I.ALL}return n}function P(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=0,r=e.length;n<r;n++){var i=e[n];Array.isArray(i)?P(i,t):void 0!==i&&t.push(i)}return t}var O=Object.freeze({getLocation:L,copyArray:x,clone:R,defaults:N,copyOptions:M,merge:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},flattenArray:P}),D=function(e,t,n){Error.call(this);var r=e.filename||n;if(this.message=e.message,this.stack=e.stack,t&&r){var i=t.contents[r],a=L(e.index,i),s=a.line,o=a.column,u=e.call&&L(e.call,i).line,l=i?i.split("\n"):"";if(this.type=e.type||"Syntax",this.filename=r,this.index=e.index,this.line="number"==typeof s?s+1:null,this.column=o,!this.line&&this.stack){var c=this.stack.match(/(<anonymous>|Function):(\d+):(\d+)/);c&&(c[2]&&(this.line=parseInt(c[2])-2),c[3]&&(this.column=parseInt(c[3])))}this.callLine=u+1,this.callExtract=l[u],this.extract=[l[this.line-2],l[this.line-1],l[this.line]]}};if(void 0===Object.create){var U=function(){};U.prototype=Error.prototype,D.prototype=new U}else D.prototype=Object.create(Error.prototype);D.prototype.constructor=D,D.prototype.toString=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="",n=this.extract||[],r=[],a=function(e){return e};if(e.stylize){var s=i(e.stylize);if("function"!==s)throw Error("options.stylize should be a function, got a ".concat(s,"!"));a=e.stylize}if(null!==this.line){if("string"==typeof n[0]&&r.push(a("".concat(this.line-1," ").concat(n[0]),"grey")),"string"==typeof n[1]){var o="".concat(this.line," ");n[1]&&(o+=n[1].slice(0,this.column)+a(a(a(n[1].substr(this.column,1),"bold")+n[1].slice(this.column+1),"red"),"inverse")),r.push(o)}"string"==typeof n[2]&&r.push(a("".concat(this.line+1," ").concat(n[2]),"grey")),r="".concat(r.join("\n")+a("","reset"),"\n")}return t+=a("".concat(this.type,"Error: ").concat(this.message),"red"),this.filename&&(t+=a(" in ","red")+this.filename),this.line&&(t+=a(" on line ".concat(this.line,", column ").concat(this.column+1,":"),"grey")),t+="\n".concat(r),this.callLine&&(t+="".concat(a("from ","red")+(this.filename||""),"/n"),t+="".concat(a(this.callLine,"grey")," ").concat(this.callExtract,"/n")),t};var F=function(e){function t(e,n,r,i,s,o){var u;return a(this,t),(u=f(this,l(t).call(this))).extendList=n,u.condition=r,u.evaldCondition=!r,u._index=i,u._fileInfo=s,u.elements=u.getElements(e),u.mixinElements_=void 0,u.copyVisibilityInfo(o),u.setParent(u.elements,h(u)),u}return u(t,g),o(t,[{key:"accept",value:function(e){this.elements&&(this.elements=e.visitArray(this.elements)),this.extendList&&(this.extendList=e.visitArray(this.extendList)),this.condition&&(this.condition=e.visit(this.condition))}},{key:"createDerived",value:function(e,n,r){var i=new t(e=this.getElements(e),n||this.extendList,null,this.getIndex(),this.fileInfo(),this.visibilityInfo());return i.evaldCondition=null!=r?r:this.evaldCondition,i.mediaEmpty=this.mediaEmpty,i}},{key:"getElements",value:function(e){return e?("string"==typeof e&&this.parse.parseNode(e,["selector"],this._index,this._fileInfo,function(t,n){if(t)throw new D({index:t.index,message:t.message},this.parse.imports,this._fileInfo.filename);e=n[0].elements}),e):[new C("","&",!1,this._index,this._fileInfo)]}},{key:"createEmptySelectors",value:function(){var e=[new t([new C("","&",!1,this._index,this._fileInfo)],null,null,this._index,this._fileInfo)];return e[0].mediaEmpty=!0,e}},{key:"match",value:function(e){var t,n,r=this.elements,i=r.length;if(0===(t=(e=e.mixinElements()).length)||i<t)return 0;for(n=0;n<t;n++)if(r[n].value!==e[n])return 0;return t}},{key:"mixinElements",value:function(){if(this.mixinElements_)return this.mixinElements_;var e=this.elements.map(function(e){return e.combinator.value+(e.value.value||e.value)}).join("").match(/[,&#\*\.\w-]([\w-]|(\\.))*/g);return e?"&"===e[0]&&e.shift():e=[],this.mixinElements_=e}},{key:"isJustParentSelector",value:function(){return!this.mediaEmpty&&1===this.elements.length&&"&"===this.elements[0].value&&(" "===this.elements[0].combinator.value||""===this.elements[0].combinator.value)}},{key:"eval",value:function(e){var t=this.condition&&this.condition.eval(e),n=this.elements,r=this.extendList;return n=n&&n.map(function(t){return t.eval(e)}),r=r&&r.map(function(t){return t.eval(e)}),this.createDerived(n,r,t)}},{key:"genCSS",value:function(e,t){var n;for(e&&e.firstSelector||""!==this.elements[0].combinator.value||t.add(" ",this.fileInfo(),this.getIndex()),n=0;n<this.elements.length;n++)this.elements[n].genCSS(e,t)}},{key:"getIsOutput",value:function(){return this.evaldCondition}}]),t}();F.prototype.type="Selector";var B=function(e){function t(e){var n;if(a(this,t),n=f(this,l(t).call(this)),!e)throw new Error("Value requires an array argument");return Array.isArray(e)?n.value=e:n.value=[e],n}return u(t,g),o(t,[{key:"accept",value:function(e){this.value&&(this.value=e.visitArray(this.value))}},{key:"eval",value:function(e){return 1===this.value.length?this.value[0].eval(e):new t(this.value.map(function(t){return t.eval(e)}))}},{key:"genCSS",value:function(e,t){var n;for(n=0;n<this.value.length;n++)this.value[n].genCSS(e,t),n+1<this.value.length&&t.add(e&&e.compress?",":", ")}}]),t}();B.prototype.type="Value";var V=function(e){function t(e){var n;return a(this,t),(n=f(this,l(t).call(this))).value=e,n}return u(t,g),o(t,[{key:"genCSS",value:function(e,t){if("%"===this.value)throw{type:"Syntax",message:"Invalid % without number"};t.add(this.value)}}]),t}();V.prototype.type="Keyword",V.True=new V("true"),V.False=new V("false");var j=function(e){function t(e,n,r,i,s,o){var u;return a(this,t),(u=f(this,l(t).call(this))).value=e,u._index=n,u._fileInfo=r,u.mapLines=i,u.rulesetLike=void 0!==s&&s,u.allowRoot=!0,u.copyVisibilityInfo(o),u}return u(t,g),o(t,[{key:"eval",value:function(){return new t(this.value,this._index,this._fileInfo,this.mapLines,this.rulesetLike,this.visibilityInfo())}},{key:"compare",value:function(e){return e.toCSS&&this.toCSS()===e.toCSS()?0:void 0}},{key:"isRulesetLike",value:function(){return this.rulesetLike}},{key:"genCSS",value:function(e,t){this.nodeVisible=Boolean(this.value),this.nodeVisible&&t.add(this.value,this._fileInfo,this._index,this.mapLines)}}]),t}();j.prototype.type="Anonymous";var H=k,K=function(e){function t(e,n,r,i,s,o,u,c){var d;return a(this,t),(d=f(this,l(t).call(this))).name=e,d.value=n instanceof g?n:new B([n?new j(n):null]),d.important=r?" ".concat(r.trim()):"",d.merge=i,d._index=s,d._fileInfo=o,d.inline=u||!1,d.variable=void 0!==c?c:e.charAt&&"@"===e.charAt(0),d.allowRoot=!0,d.setParent(d.value,h(d)),d}return u(t,g),o(t,[{key:"genCSS",value:function(e,t){t.add(this.name+(e.compress?":":": "),this.fileInfo(),this.getIndex());try{this.value.genCSS(e,t)}catch(e){throw e.index=this._index,e.filename=this._fileInfo.filename,e}t.add(this.important+(this.inline||e.lastRule&&e.compress?"":";"),this._fileInfo,this._index)}},{key:"eval",value:function(e){var n,r,i=!1,a=this.name,s=this.variable;"string"!=typeof a&&(a=1===a.length&&a[0]instanceof V?a[0].value:function(e,t){var n,r="",i=t.length,a={add:function(e){r+=e}};for(n=0;n<i;n++)t[n].eval(e).genCSS(e,a);return r}(e,a),s=!1),"font"===a&&e.math===H.ALWAYS&&(i=!0,n=e.math,e.math=H.PARENS_DIVISION);try{if(e.importantScope.push({}),r=this.value.eval(e),!this.variable&&"DetachedRuleset"===r.type)throw{message:"Rulesets cannot be evaluated on a property.",index:this.getIndex(),filename:this.fileInfo().filename};var o=this.important,u=e.importantScope.pop();return!o&&u.important&&(o=u.important),new t(a,r,o,this.merge,this.getIndex(),this.fileInfo(),this.inline,s)}catch(e){throw"number"!=typeof e.index&&(e.index=this.getIndex(),e.filename=this.fileInfo().filename),e}finally{i&&(e.math=n)}}},{key:"makeImportant",value:function(){return new t(this.name,this.value,"!important",this.merge,this.getIndex(),this.fileInfo(),this.inline)}}]),t}();K.prototype.type="Declaration";var G=function e(t,n,r){var i="";if(t.dumpLineNumbers&&!t.compress)switch(t.dumpLineNumbers){case"comments":i=e.asComment(n);break;case"mediaquery":i=e.asMediaQuery(n);break;case"all":i=e.asComment(n)+(r||"")+e.asMediaQuery(n)}return i};G.asComment=function(e){return"/* line ".concat(e.debugInfo.lineNumber,", ").concat(e.debugInfo.fileName," */\n")},G.asMediaQuery=function(e){var t=e.debugInfo.fileName;return/^[a-z]+:\/\//i.test(t)||(t="file://".concat(t)),"@media -sass-debug-info{filename{font-family:".concat(t.replace(/([.:\/\\])/g,function(e){return"\\"==e&&(e="/"),"\\".concat(e)}),"}line{font-family:\\00003").concat(e.debugInfo.lineNumber,"}}\n")};var q=function(e){function t(e,n,r,i){var s;return a(this,t),(s=f(this,l(t).call(this))).value=e,s.isLineComment=n,s._index=r,s._fileInfo=i,s.allowRoot=!0,s}return u(t,g),o(t,[{key:"genCSS",value:function(e,t){this.debugInfo&&t.add(G(e,this),this.fileInfo(),this.getIndex()),t.add(this.value)}},{key:"isSilent",value:function(e){var t=e.compress&&"!"!==this.value[2];return this.isLineComment||t}}]),t}();q.prototype.type="Comment";var W={},z=function(e,t,n){if(e)for(var r=0;r<n.length;r++)e.hasOwnProperty(n[r])&&(t[n[r]]=e[n[r]])},Y=["paths","rewriteUrls","rootpath","strictImports","insecure","dumpLineNumbers","compress","syncImport","chunkInput","mime","useFileCache","processImports","pluginManager"];W.Parse=function(e){z(e,this,Y),"string"==typeof this.paths&&(this.paths=[this.paths])};var X=["paths","compress","math","strictUnits","sourceMap","importMultiple","urlArgs","javascriptEnabled","pluginManager","importantScope","rewriteUrls"];function $(e){return!/^(?:[a-z-]+:|\/|#)/i.test(e)}function Z(e){return"."===e.charAt(0)}W.Eval=function(){function e(t,n){a(this,e),z(t,this,X),"string"==typeof this.paths&&(this.paths=[this.paths]),this.frames=n||[],this.importantScope=this.importantScope||[],this.inCalc=!1,this.mathOn=!0}return o(e,[{key:"enterCalc",value:function(){this.calcStack||(this.calcStack=[]),this.calcStack.push(!0),this.inCalc=!0}},{key:"exitCalc",value:function(){this.calcStack.pop(),this.calcStack||(this.inCalc=!1)}},{key:"inParenthesis",value:function(){this.parensStack||(this.parensStack=[]),this.parensStack.push(!0)}},{key:"outOfParenthesis",value:function(){this.parensStack.pop()}},{key:"isMathOn",value:function(e){return!!this.mathOn&&!!("/"!==e||this.math===k.ALWAYS||this.parensStack&&this.parensStack.length)&&(!(this.math>k.PARENS_DIVISION)||this.parensStack&&this.parensStack.length)}},{key:"pathRequiresRewrite",value:function(e){return(this.rewriteUrls===I.LOCAL?Z:$)(e)}},{key:"rewritePath",value:function(e,t){var n;return t=t||"",n=this.normalizePath(t+e),Z(e)&&$(t)&&!1===Z(n)&&(n="./".concat(n)),n}},{key:"normalizePath",value:function(e){var t,n=e.split("/").reverse();for(e=[];0!==n.length;)switch(t=n.pop()){case".":break;case"..":0===e.length||".."===e[e.length-1]?e.push(t):e.pop();break;default:e.push(t)}return e.join("/")}}]),e}();var Q=function e(t){return{_data:{},add:function(e,t){e=e.toLowerCase(),this._data.hasOwnProperty(e),this._data[e]=t},addMultiple:function(e){var t=this;Object.keys(e).forEach(function(n){t.add(n,e[n])})},get:function(e){return this._data[e]||t&&t.get(e)},getLocalFunctions:function(){return this._data},inherit:function(){return e(this)},create:function(t){return e(t)}}}(null),J={eval:function(){var e=this.value_,t=this.error_;if(t)throw t;if(null!=e)return e?V.True:V.False},value:function(e){this.value_=e},error:function(e){this.error_=e},reset:function(){this.value_=this.error_=null}},ee=function(e){function t(e,n,r,i){var s;return a(this,t),(s=f(this,l(t).call(this))).selectors=e,s.rules=n,s._lookups={},s._variables=null,s._properties=null,s.strictImports=r,s.copyVisibilityInfo(i),s.allowRoot=!0,s.setParent(s.selectors,h(s)),s.setParent(s.rules,h(s)),s}return u(t,g),o(t,[{key:"isRulesetLike",value:function(){return!0}},{key:"accept",value:function(e){this.paths?this.paths=e.visitArray(this.paths,!0):this.selectors&&(this.selectors=e.visitArray(this.selectors)),this.rules&&this.rules.length&&(this.rules=e.visitArray(this.rules))}},{key:"eval",value:function(e){var n,r,i,a,s,o=!1;if(this.selectors&&(r=this.selectors.length)){for(n=new Array(r),J.error({type:"Syntax",message:"it is currently only allowed in parametric mixin guards,"}),a=0;a<r;a++){i=this.selectors[a].eval(e);for(var u=0;u<i.elements.length;u++)if(i.elements[u].isVariable){s=!0;break}n[a]=i,i.evaldCondition&&(o=!0)}if(s){var l=new Array(r);for(a=0;a<r;a++)i=n[a],l[a]=i.toCSS(e);this.parse.parseNode(l.join(","),["selectors"],n[0].getIndex(),n[0].fileInfo(),function(e,t){t&&(n=P(t))})}J.reset()}else o=!0;var c,d,h=this.rules?x(this.rules):null,f=new t(n,h,this.strictImports,this.visibilityInfo());f.originalRuleset=this,f.root=this.root,f.firstRoot=this.firstRoot,f.allowImports=this.allowImports,this.debugInfo&&(f.debugInfo=this.debugInfo),o||(h.length=0),f.functionRegistry=function(e){for(var t,n=0,r=e.length;n!==r;++n)if(t=e[n].functionRegistry)return t;return Q}(e.frames).inherit();var m=e.frames;m.unshift(f);var v=e.selectors;v||(e.selectors=v=[]),v.unshift(this.selectors),(f.root||f.allowImports||!f.strictImports)&&f.evalImports(e);var y=f.rules;for(a=0;c=y[a];a++)c.evalFirst&&(y[a]=c.eval(e));var _=e.mediaBlocks&&e.mediaBlocks.length||0;for(a=0;c=y[a];a++)"MixinCall"===c.type?(h=c.eval(e).filter(function(e){return!(e instanceof K&&e.variable&&f.variable(e.name))}),y.splice.apply(y,p([a,1].concat(h))),a+=h.length-1,f.resetCache()):"VariableCall"===c.type&&(h=c.eval(e).rules.filter(function(e){return!(e instanceof K&&e.variable)}),y.splice.apply(y,p([a,1].concat(h))),a+=h.length-1,f.resetCache());for(a=0;c=y[a];a++)c.evalFirst||(y[a]=c=c.eval?c.eval(e):c);for(a=0;c=y[a];a++)if(c instanceof t&&c.selectors&&1===c.selectors.length&&c.selectors[0]&&c.selectors[0].isJustParentSelector())for(y.splice(a--,1),u=0;d=c.rules[u];u++)d instanceof g&&(d.copyVisibilityInfo(c.visibilityInfo()),d instanceof K&&d.variable||y.splice(++a,0,d));if(m.shift(),v.shift(),e.mediaBlocks)for(a=_;a<e.mediaBlocks.length;a++)e.mediaBlocks[a].bubbleSelectors(n);return f}},{key:"evalImports",value:function(e){var t,n,r=this.rules;if(r)for(t=0;t<r.length;t++)"Import"===r[t].type&&((n=r[t].eval(e))&&(n.length||0===n.length)?(r.splice.apply(r,p([t,1].concat(n))),t+=n.length-1):r.splice(t,1,n),this.resetCache())}},{key:"makeImportant",value:function(){return new t(this.selectors,this.rules.map(function(e){return e.makeImportant?e.makeImportant():e}),this.strictImports,this.visibilityInfo())}},{key:"matchArgs",value:function(e){return!e||0===e.length}},{key:"matchCondition",value:function(e,t){var n=this.selectors[this.selectors.length-1];return!(!n.evaldCondition||n.condition&&!n.condition.eval(new W.Eval(t,t.frames)))}},{key:"resetCache",value:function(){this._rulesets=null,this._variables=null,this._properties=null,this._lookups={}}},{key:"variables",value:function(){return this._variables||(this._variables=this.rules?this.rules.reduce(function(e,t){if(t instanceof K&&!0===t.variable&&(e[t.name]=t),"Import"===t.type&&t.root&&t.root.variables){var n=t.root.variables();for(var r in n)n.hasOwnProperty(r)&&(e[r]=t.root.variable(r))}return e},{}):{}),this._variables}},{key:"properties",value:function(){return this._properties||(this._properties=this.rules?this.rules.reduce(function(e,t){if(t instanceof K&&!0!==t.variable){var n=1===t.name.length&&t.name[0]instanceof V?t.name[0].value:t.name;e["$".concat(n)]?e["$".concat(n)].push(t):e["$".concat(n)]=[t]}return e},{}):{}),this._properties}},{key:"variable",value:function(e){var t=this.variables()[e];if(t)return this.parseValue(t)}},{key:"property",value:function(e){var t=this.properties()[e];if(t)return this.parseValue(t)}},{key:"lastDeclaration",value:function(){for(var e=this.rules.length;e>0;e--){var t=this.rules[e-1];if(t instanceof K)return this.parseValue(t)}}},{key:"parseValue",value:function(e){var t=this;function n(e){return e.value instanceof j&&!e.parsed?("string"==typeof e.value.value?this.parse.parseNode(e.value.value,["value","important"],e.value.getIndex(),e.fileInfo(),function(t,n){t&&(e.parsed=!0),n&&(e.value=n[0],e.important=n[1]||"",e.parsed=!0)}):e.parsed=!0,e):e}if(Array.isArray(e)){var r=[];return e.forEach(function(e){r.push(n.call(t,e))}),r}return n.call(t,e)}},{key:"rulesets",value:function(){if(!this.rules)return[];var e,t,n=[],r=this.rules;for(e=0;t=r[e];e++)t.isRuleset&&n.push(t);return n}},{key:"prependRule",value:function(e){var t=this.rules;t?t.unshift(e):this.rules=[e],this.setParent(e,this)}},{key:"find",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,i=arguments.length>2?arguments[2]:void 0,a=[],s=e.toCSS();return s in this._lookups?this._lookups[s]:(this.rulesets().forEach(function(s){if(s!==r)for(var o=0;o<s.selectors.length;o++)if(t=e.match(s.selectors[o])){if(e.elements.length>t){if(!i||i(s)){n=s.find(new F(e.elements.slice(t)),r,i);for(var u=0;u<n.length;++u)n[u].path.push(s);Array.prototype.push.apply(a,n)}}else a.push({rule:s,path:[]});break}}),this._lookups[s]=a,a)}},{key:"genCSS",value:function(e,t){var n,r,i,a,s,o=[];e.tabLevel=e.tabLevel||0,this.root||e.tabLevel++;var u,l=e.compress?"":Array(e.tabLevel+1).join("  "),c=e.compress?"":Array(e.tabLevel).join("  "),d=0,h=0;for(n=0;a=this.rules[n];n++)a instanceof q?(h===n&&h++,o.push(a)):a.isCharset&&a.isCharset()?(o.splice(d,0,a),d++,h++):"Import"===a.type?(o.splice(h,0,a),h++):o.push(a);if(o=[].concat(o),!this.root){(i=G(e,this,c))&&(t.add(i),t.add(c));var f,p=this.paths,m=p.length;for(u=e.compress?",":",\n".concat(c),n=0;n<m;n++)if(f=(s=p[n]).length)for(n>0&&t.add(u),e.firstSelector=!0,s[0].genCSS(e,t),e.firstSelector=!1,r=1;r<f;r++)s[r].genCSS(e,t);t.add((e.compress?"{":" {\n")+l)}for(n=0;a=o[n];n++){n+1===o.length&&(e.lastRule=!0);var v=e.lastRule;a.isRulesetLike(a)&&(e.lastRule=!1),a.genCSS?a.genCSS(e,t):a.value&&t.add(a.value.toString()),e.lastRule=v,!e.lastRule&&a.isVisible()?t.add(e.compress?"":"\n".concat(l)):e.lastRule=!1}this.root||(t.add(e.compress?"}":"\n".concat(c,"}")),e.tabLevel--),t.isEmpty()||e.compress||!this.firstRoot||t.add("\n")}},{key:"joinSelectors",value:function(e,t,n){for(var r=0;r<n.length;r++)this.joinSelector(e,t,n[r])}},{key:"joinSelector",value:function(e,t,n){function r(e,t){var n,r;if(0===e.length)n=new E(e[0]);else{var i=new Array(e.length);for(r=0;r<e.length;r++)i[r]=new C(null,e[r],t.isVariable,t._index,t._fileInfo);n=new E(new F(i))}return n}function i(e,t){var n;return n=new C(null,e,t.isVariable,t._index,t._fileInfo),new F([n])}function a(e,t,n,r){var i,a,s;if(i=[],e.length>0?(a=(i=x(e)).pop(),s=r.createDerived(x(a.elements))):s=r.createDerived([]),t.length>0){var o=n.combinator,u=t[0].elements[0];o.emptyOrWhitespace&&!u.combinator.emptyOrWhitespace&&(o=u.combinator),s.elements.push(new C(o,u.value,n.isVariable,n._index,n._fileInfo)),s.elements=s.elements.concat(t[0].elements.slice(1))}if(0!==s.elements.length&&i.push(s),t.length>1){var l=t.slice(1);l=l.map(function(e){return e.createDerived(e.elements,[])}),i=i.concat(l)}return i}function s(e,t,n,r,i){var s;for(s=0;s<e.length;s++){var o=a(e[s],t,n,r);i.push(o)}return i}function o(e,t){var n,r;if(0!==e.length)if(0!==t.length)for(n=0;r=t[n];n++)r.length>0?r[r.length-1]=r[r.length-1].createDerived(r[r.length-1].elements.concat(e)):r.push(new F(e));else t.push([new F(e)])}function u(e,t){var n=t.createDerived(t.elements,t.extendList,t.evaldCondition);return n.copyVisibilityInfo(e),n}var l,c;if(!function e(t,n,u){var l,c,d,h,f,p,m,v,y,g,_,b,w=!1;for(h=[],f=[[]],l=0;v=u.elements[l];l++)if("&"!==v.value){var S=(b=void 0,(_=v).value instanceof E&&(b=_.value.value)instanceof F?b:null);if(null!=S){o(h,f);var T,k=[],I=[];for(T=e(k,n,S),w=w||T,d=0;d<k.length;d++)s(f,[i(r(k[d],v),v)],v,u,I);f=I,h=[]}else h.push(v)}else{for(w=!0,p=[],o(h,f),c=0;c<f.length;c++)if(m=f[c],0===n.length)m.length>0&&m[0].elements.push(new C(v.combinator,"",v.isVariable,v._index,v._fileInfo)),p.push(m);else for(d=0;d<n.length;d++){var A=a(m,n[d],v,u);p.push(A)}f=p,h=[]}for(o(h,f),l=0;l<f.length;l++)(y=f[l].length)>0&&(t.push(f[l]),g=f[l][y-1],f[l][y-1]=g.createDerived(g.elements,u.extendList));return w}(c=[],t,n))if(t.length>0)for(c=[],l=0;l<t.length;l++){var d=t[l].map(u.bind(this,n.visibilityInfo()));d.push(n),c.push(d)}else c=[[n]];for(l=0;l<c.length;l++)e.push(c[l])}}]),t}();ee.prototype.type="Ruleset",ee.prototype.isRuleset=!0;var te=function(e){function t(e,n,r,i,s,o,u,c){var d,p;if(a(this,t),(d=f(this,l(t).call(this))).name=e,d.value=n instanceof g?n:n?new j(n):n,r){for(Array.isArray(r)?d.rules=r:(d.rules=[r],d.rules[0].selectors=new F([],null,null,i,s).createEmptySelectors()),p=0;p<d.rules.length;p++)d.rules[p].allowImports=!0;d.setParent(d.rules,h(d))}return d._index=i,d._fileInfo=s,d.debugInfo=o,d.isRooted=u||!1,d.copyVisibilityInfo(c),d.allowRoot=!0,d}return u(t,g),o(t,[{key:"accept",value:function(e){var t=this.value,n=this.rules;n&&(this.rules=e.visitArray(n)),t&&(this.value=e.visit(t))}},{key:"isRulesetLike",value:function(){return this.rules||!this.isCharset()}},{key:"isCharset",value:function(){return"@charset"===this.name}},{key:"genCSS",value:function(e,t){var n=this.value,r=this.rules;t.add(this.name,this.fileInfo(),this.getIndex()),n&&(t.add(" "),n.genCSS(e,t)),r?this.outputRuleset(e,t,r):t.add(";")}},{key:"eval",value:function(e){var n,r,i=this.value,a=this.rules;return n=e.mediaPath,r=e.mediaBlocks,e.mediaPath=[],e.mediaBlocks=[],i&&(i=i.eval(e)),a&&((a=[a[0].eval(e)])[0].root=!0),e.mediaPath=n,e.mediaBlocks=r,new t(this.name,i,a,this.getIndex(),this.fileInfo(),this.debugInfo,this.isRooted,this.visibilityInfo())}},{key:"variable",value:function(e){if(this.rules)return ee.prototype.variable.call(this.rules[0],e)}},{key:"find",value:function(){if(this.rules){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ee.prototype.find.apply(this.rules[0],t)}}},{key:"rulesets",value:function(){if(this.rules)return ee.prototype.rulesets.apply(this.rules[0])}},{key:"outputRuleset",value:function(e,t,n){var r,i=n.length;if(e.tabLevel=1+(0|e.tabLevel),e.compress){for(t.add("{"),r=0;r<i;r++)n[r].genCSS(e,t);return t.add("}"),void e.tabLevel--}var a="\n".concat(Array(e.tabLevel).join("  ")),s="".concat(a,"  ");if(i){for(t.add(" {".concat(s)),n[0].genCSS(e,t),r=1;r<i;r++)t.add(s),n[r].genCSS(e,t);t.add("".concat(a,"}"))}else t.add(" {".concat(a,"}"));e.tabLevel--}}]),t}();te.prototype.type="AtRule";var ne=function(e){function t(e,n){var r;return a(this,t),(r=f(this,l(t).call(this))).ruleset=e,r.frames=n,r.setParent(r.ruleset,h(r)),r}return u(t,g),o(t,[{key:"accept",value:function(e){this.ruleset=e.visit(this.ruleset)}},{key:"eval",value:function(e){var n=this.frames||x(e.frames);return new t(this.ruleset,n)}},{key:"callEval",value:function(e){return this.ruleset.eval(this.frames?new W.Eval(e,this.frames.concat(e.frames)):e)}}]),t}();ne.prototype.type="DetachedRuleset",ne.prototype.evalFirst=!0;var re=function(e){function t(e,n,r){var i;return a(this,t),(i=f(this,l(t).call(this))).numerator=e?x(e).sort():[],i.denominator=n?x(n).sort():[],r?i.backupUnit=r:e&&e.length&&(i.backupUnit=e[0]),i}return u(t,g),o(t,[{key:"clone",value:function(){return new t(x(this.numerator),x(this.denominator),this.backupUnit)}},{key:"genCSS",value:function(e,t){var n=e&&e.strictUnits;1===this.numerator.length?t.add(this.numerator[0]):!n&&this.backupUnit?t.add(this.backupUnit):!n&&this.denominator.length&&t.add(this.denominator[0])}},{key:"toString",value:function(){var e,t=this.numerator.join("*");for(e=0;e<this.denominator.length;e++)t+="/".concat(this.denominator[e]);return t}},{key:"compare",value:function(e){return this.is(e.toString())?0:void 0}},{key:"is",value:function(e){return this.toString().toUpperCase()===e.toUpperCase()}},{key:"isLength",value:function(){return RegExp("^(px|em|ex|ch|rem|in|cm|mm|pc|pt|ex|vw|vh|vmin|vmax)$","gi").test(this.toCSS())}},{key:"isEmpty",value:function(){return 0===this.numerator.length&&0===this.denominator.length}},{key:"isSingular",value:function(){return this.numerator.length<=1&&0===this.denominator.length}},{key:"map",value:function(e){var t;for(t=0;t<this.numerator.length;t++)this.numerator[t]=e(this.numerator[t],!1);for(t=0;t<this.denominator.length;t++)this.denominator[t]=e(this.denominator[t],!0)}},{key:"usedUnits",value:function(){var e,t,n,r={};for(n in t=function(t){return e.hasOwnProperty(t)&&!r[n]&&(r[n]=t),t},v)v.hasOwnProperty(n)&&(e=v[n],this.map(t));return r}},{key:"cancel",value:function(){var e,t,n={};for(t=0;t<this.numerator.length;t++)n[e=this.numerator[t]]=(n[e]||0)+1;for(t=0;t<this.denominator.length;t++)n[e=this.denominator[t]]=(n[e]||0)-1;for(e in this.numerator=[],this.denominator=[],n)if(n.hasOwnProperty(e)){var r=n[e];if(r>0)for(t=0;t<r;t++)this.numerator.push(e);else if(r<0)for(t=0;t<-r;t++)this.denominator.push(e)}this.numerator.sort(),this.denominator.sort()}}]),t}();re.prototype.type="Unit";var ie=function(e){function t(e,n){var r;if(a(this,t),(r=f(this,l(t).call(this))).value=parseFloat(e),isNaN(r.value))throw new Error("Dimension is not a number.");return r.unit=n&&n instanceof re?n:new re(n?[n]:void 0),r.setParent(r.unit,h(r)),r}return u(t,g),o(t,[{key:"accept",value:function(e){this.unit=e.visit(this.unit)}},{key:"eval",value:function(e){return this}},{key:"toColor",value:function(){return new _([this.value,this.value,this.value])}},{key:"genCSS",value:function(e,t){if(e&&e.strictUnits&&!this.unit.isSingular())throw new Error("Multiple units in dimension. Correct the units or use the unit function. Bad unit: ".concat(this.unit.toString()));var n=this.fround(e,this.value),r=String(n);if(0!==n&&n<1e-6&&n>-1e-6&&(r=n.toFixed(20).replace(/0+$/,"")),e&&e.compress){if(0===n&&this.unit.isLength())return void t.add(r);n>0&&n<1&&(r=r.substr(1))}t.add(r),this.unit.genCSS(e,t)}},{key:"operate",value:function(e,n,r){var i=this._operate(e,n,this.value,r.value),a=this.unit.clone();if("+"===n||"-"===n)if(0===a.numerator.length&&0===a.denominator.length)a=r.unit.clone(),this.unit.backupUnit&&(a.backupUnit=this.unit.backupUnit);else if(0===r.unit.numerator.length&&0===a.denominator.length);else{if(r=r.convertTo(this.unit.usedUnits()),e.strictUnits&&r.unit.toString()!==a.toString())throw new Error("Incompatible units. Change the units or use the unit function. "+"Bad units: '".concat(a.toString(),"' and '").concat(r.unit.toString(),"'."));i=this._operate(e,n,this.value,r.value)}else"*"===n?(a.numerator=a.numerator.concat(r.unit.numerator).sort(),a.denominator=a.denominator.concat(r.unit.denominator).sort(),a.cancel()):"/"===n&&(a.numerator=a.numerator.concat(r.unit.denominator).sort(),a.denominator=a.denominator.concat(r.unit.numerator).sort(),a.cancel());return new t(i,a)}},{key:"compare",value:function(e){var n,r;if(e instanceof t){if(this.unit.isEmpty()||e.unit.isEmpty())n=this,r=e;else if(n=this.unify(),r=e.unify(),0!==n.unit.compare(r.unit))return;return g.numericCompare(n.value,r.value)}}},{key:"unify",value:function(){return this.convertTo({length:"px",duration:"s",angle:"rad"})}},{key:"convertTo",value:function(e){var n,r,i,a,s,o=this.value,u=this.unit.clone(),l={};if("string"==typeof e){for(n in v)v[n].hasOwnProperty(e)&&((l={})[n]=e);e=l}for(r in s=function(e,t){return i.hasOwnProperty(e)?(t?o/=i[e]/i[a]:o*=i[e]/i[a],a):e},e)e.hasOwnProperty(r)&&(a=e[r],i=v[r],u.map(s));return u.cancel(),new t(o,u)}}]),t}();ie.prototype.type="Dimension";var ae=k,se=function(e){function t(e,n,r){var i;return a(this,t),(i=f(this,l(t).call(this))).op=e.trim(),i.operands=n,i.isSpaced=r,i}return u(t,g),o(t,[{key:"accept",value:function(e){this.operands=e.visitArray(this.operands)}},{key:"eval",value:function(e){var n,r=this.operands[0].eval(e),i=this.operands[1].eval(e);if(e.isMathOn(this.op)){if(n="./"===this.op?"/":this.op,r instanceof ie&&i instanceof _&&(r=r.toColor()),i instanceof ie&&r instanceof _&&(i=i.toColor()),!r.operate){if(r instanceof t&&"/"===r.op&&e.math===ae.PARENS_DIVISION)return new t(this.op,[r,i],this.isSpaced);throw{type:"Operation",message:"Operation on an invalid type"}}return r.operate(e,n,i)}return new t(this.op,[r,i],this.isSpaced)}},{key:"genCSS",value:function(e,t){this.operands[0].genCSS(e,t),this.isSpaced&&t.add(" "),t.add(this.op),this.isSpaced&&t.add(" "),this.operands[1].genCSS(e,t)}}]),t}();se.prototype.type="Operation";var oe=k,ue=function(e){function t(e,n){var r;if(a(this,t),(r=f(this,l(t).call(this))).value=e,r.noSpacing=n,!e)throw new Error("Expression requires an array parameter");return r}return u(t,g),o(t,[{key:"accept",value:function(e){this.value=e.visitArray(this.value)}},{key:"eval",value:function(e){var n,r=e.isMathOn(),i=this.parens&&(e.math!==oe.STRICT_LEGACY||!this.parensInOp),a=!1;return i&&e.inParenthesis(),this.value.length>1?n=new t(this.value.map(function(t){return t.eval?t.eval(e):t}),this.noSpacing):1===this.value.length?(!this.value[0].parens||this.value[0].parensInOp||e.inCalc||(a=!0),n=this.value[0].eval(e)):n=this,i&&e.outOfParenthesis(),!this.parens||!this.parensInOp||r||a||n instanceof ie||(n=new E(n)),n}},{key:"genCSS",value:function(e,t){for(var n=0;n<this.value.length;n++)this.value[n].genCSS(e,t),!this.noSpacing&&n+1<this.value.length&&t.add(" ")}},{key:"throwAwayComments",value:function(){this.value=this.value.filter(function(e){return!(e instanceof q)})}}]),t}();ue.prototype.type="Expression";var le=function(){function e(t,n,r,i){a(this,e),this.name=t.toLowerCase(),this.index=r,this.context=n,this.currentFileInfo=i,this.func=n.frames[0].functionRegistry.get(this.name)}return o(e,[{key:"isValid",value:function(){return Boolean(this.func)}},{key:"call",value:function(e){return Array.isArray(e)&&(e=e.filter(function(e){return"Comment"!==e.type}).map(function(e){if("Expression"===e.type){var t=e.value.filter(function(e){return"Comment"!==e.type});return 1===t.length?t[0]:new ue(t)}return e})),this.func.apply(this,p(e))}}]),e}(),ce=function(e){function t(e,n,r,i){var s;return a(this,t),(s=f(this,l(t).call(this))).name=e,s.args=n,s.calc="calc"===e,s._index=r,s._fileInfo=i,s}return u(t,g),o(t,[{key:"accept",value:function(e){this.args&&(this.args=e.visitArray(this.args))}},{key:"eval",value:function(e){var n=e.mathOn;e.mathOn=!this.calc,(this.calc||e.inCalc)&&e.enterCalc();var r,i=this.args.map(function(t){return t.eval(e)});(this.calc||e.inCalc)&&e.exitCalc(),e.mathOn=n;var a=new le(this.name,e,this.getIndex(),this.fileInfo());if(a.isValid()){try{r=a.call(i)}catch(e){throw{type:e.type||"Runtime",message:"error evaluating function `".concat(this.name,"`").concat(e.message?": ".concat(e.message):""),index:this.getIndex(),filename:this.fileInfo().filename,line:e.lineNumber,column:e.columnNumber}}if(null!=r)return r instanceof g||(r=new j(r&&!0!==r?r.toString():null)),r._index=this._index,r._fileInfo=this._fileInfo,r}return new t(this.name,i,this.getIndex(),this.fileInfo())}},{key:"genCSS",value:function(e,t){t.add("".concat(this.name,"("),this.fileInfo(),this.getIndex());for(var n=0;n<this.args.length;n++)this.args[n].genCSS(e,t),n+1<this.args.length&&t.add(", ");t.add(")")}}]),t}();ce.prototype.type="Call";var de=function(e){function t(e,n,r){var i;return a(this,t),(i=f(this,l(t).call(this))).name=e,i._index=n,i._fileInfo=r,i}return u(t,g),o(t,[{key:"eval",value:function(e){var n,r=this.name;if(0===r.indexOf("@@")&&(r="@".concat(new t(r.slice(1),this.getIndex(),this.fileInfo()).eval(e).value)),this.evaluating)throw{type:"Name",message:"Recursive variable definition for ".concat(r),filename:this.fileInfo().filename,index:this.getIndex()};if(this.evaluating=!0,n=this.find(e.frames,function(t){var n=t.variable(r);if(n)return n.important&&(e.importantScope[e.importantScope.length-1].important=n.important),e.inCalc?new ce("_SELF",[n.value]).eval(e):n.value.eval(e)}))return this.evaluating=!1,n;throw{type:"Name",message:"variable ".concat(r," is undefined"),filename:this.fileInfo().filename,index:this.getIndex()}}},{key:"find",value:function(e,t){for(var n,r=0;r<e.length;r++)if(n=t.call(e,e[r]))return n;return null}}]),t}();de.prototype.type="Variable";var he=function(e){function t(e,n,r){var i;return a(this,t),(i=f(this,l(t).call(this))).name=e,i._index=n,i._fileInfo=r,i}return u(t,g),o(t,[{key:"eval",value:function(e){var t,n=this.name,r=e.pluginManager.less.visitors.ToCSSVisitor.prototype._mergeRules;if(this.evaluating)throw{type:"Name",message:"Recursive property reference for ".concat(n),filename:this.fileInfo().filename,index:this.getIndex()};if(this.evaluating=!0,t=this.find(e.frames,function(t){var i,a=t.property(n);if(a){for(var s=0;s<a.length;s++)i=a[s],a[s]=new K(i.name,i.value,i.important,i.merge,i.index,i.currentFileInfo,i.inline,i.variable);return r(a),(i=a[a.length-1]).important&&(e.importantScope[e.importantScope.length-1].important=i.important),i=i.value.eval(e)}}))return this.evaluating=!1,t;throw{type:"Name",message:"Property '".concat(n,"' is undefined"),filename:this.currentFileInfo.filename,index:this.index}}},{key:"find",value:function(e,t){for(var n,r=0;r<e.length;r++)if(n=t.call(e,e[r]))return n;return null}}]),t}();he.prototype.type="Property";var fe=function(e){function t(e,n,r){var i;return a(this,t),(i=f(this,l(t).call(this))).key=e,i.op=n,i.value=r,i}return u(t,g),o(t,[{key:"eval",value:function(e){return new t(this.key.eval?this.key.eval(e):this.key,this.op,this.value&&this.value.eval?this.value.eval(e):this.value)}},{key:"genCSS",value:function(e,t){t.add(this.toCSS(e))}},{key:"toCSS",value:function(e){var t=this.key.toCSS?this.key.toCSS(e):this.key;return this.op&&(t+=this.op,t+=this.value.toCSS?this.value.toCSS(e):this.value),"[".concat(t,"]")}}]),t}();fe.prototype.type="Attribute";var pe=function(e){function t(e,n,r,i,s){var o;return a(this,t),(o=f(this,l(t).call(this))).escaped=null==r||r,o.value=n||"",o.quote=e.charAt(0),o._index=i,o._fileInfo=s,o.variableRegex=/@\{([\w-]+)\}/g,o.propRegex=/\$\{([\w-]+)\}/g,o.allowRoot=r,o}return u(t,g),o(t,[{key:"genCSS",value:function(e,t){this.escaped||t.add(this.quote,this.fileInfo(),this.getIndex()),t.add(this.value),this.escaped||t.add(this.quote)}},{key:"containsVariables",value:function(){return this.value.match(this.variableRegex)}},{key:"eval",value:function(e){var n=this,r=this.value;function i(e,t,n){var r=e;do{e=r.toString(),r=e.replace(t,n)}while(e!==r);return r}return r=i(r,this.variableRegex,function(r,i){var a=new de("@".concat(i),n.getIndex(),n.fileInfo()).eval(e,!0);return a instanceof t?a.value:a.toCSS()}),r=i(r,this.propRegex,function(r,i){var a=new he("$".concat(i),n.getIndex(),n.fileInfo()).eval(e,!0);return a instanceof t?a.value:a.toCSS()}),new t(this.quote+r+this.quote,r,this.escaped,this.getIndex(),this.fileInfo())}},{key:"compare",value:function(e){return"Quoted"!==e.type||this.escaped||e.escaped?e.toCSS&&this.toCSS()===e.toCSS()?0:void 0:g.numericCompare(this.value,e.value)}}]),t}();pe.prototype.type="Quoted";var me=function(e){function t(e,n,r,i){var s;return a(this,t),(s=f(this,l(t).call(this))).value=e,s._index=n,s._fileInfo=r,s.isEvald=i,s}return u(t,g),o(t,[{key:"accept",value:function(e){this.value=e.visit(this.value)}},{key:"genCSS",value:function(e,t){t.add("url("),this.value.genCSS(e,t),t.add(")")}},{key:"eval",value:function(e){var n,r=this.value.eval(e);if(!this.isEvald&&("string"==typeof(n=this.fileInfo()&&this.fileInfo().rootpath)&&"string"==typeof r.value&&e.pathRequiresRewrite(r.value)?(r.quote||(n=n.replace(/[\(\)'"\s]/g,function(e){return"\\".concat(e)})),r.value=e.rewritePath(r.value,n)):r.value=e.normalizePath(r.value),e.urlArgs&&!r.value.match(/^\s*data:/))){var i=(-1===r.value.indexOf("?")?"?":"&")+e.urlArgs;-1!==r.value.indexOf("#")?r.value=r.value.replace("#","".concat(i,"#")):r.value+=i}return new t(r,this.getIndex(),this.fileInfo(),!0)}}]),t}();me.prototype.type="Url";var ve=function(e){function t(e,n,r,i,s){var o;a(this,t),(o=f(this,l(t).call(this)))._index=r,o._fileInfo=i;var u=new F([],null,null,o._index,o._fileInfo).createEmptySelectors();return o.features=new B(n),o.rules=[new ee(u,e)],o.rules[0].allowImports=!0,o.copyVisibilityInfo(s),o.allowRoot=!0,o.setParent(u,h(o)),o.setParent(o.features,h(o)),o.setParent(o.rules,h(o)),o}return u(t,te),o(t,[{key:"isRulesetLike",value:function(){return!0}},{key:"accept",value:function(e){this.features&&(this.features=e.visit(this.features)),this.rules&&(this.rules=e.visitArray(this.rules))}},{key:"genCSS",value:function(e,t){t.add("@media ",this._fileInfo,this._index),this.features.genCSS(e,t),this.outputRuleset(e,t,this.rules)}},{key:"eval",value:function(e){e.mediaBlocks||(e.mediaBlocks=[],e.mediaPath=[]);var n=new t(null,[],this._index,this._fileInfo,this.visibilityInfo());return this.debugInfo&&(this.rules[0].debugInfo=this.debugInfo,n.debugInfo=this.debugInfo),n.features=this.features.eval(e),e.mediaPath.push(n),e.mediaBlocks.push(n),this.rules[0].functionRegistry=e.frames[0].functionRegistry.inherit(),e.frames.unshift(this.rules[0]),n.rules=[this.rules[0].eval(e)],e.frames.shift(),e.mediaPath.pop(),0===e.mediaPath.length?n.evalTop(e):n.evalNested(e)}},{key:"evalTop",value:function(e){var t=this;if(e.mediaBlocks.length>1){var n=new F([],null,null,this.getIndex(),this.fileInfo()).createEmptySelectors();(t=new ee(n,e.mediaBlocks)).multiMedia=!0,t.copyVisibilityInfo(this.visibilityInfo()),this.setParent(t,this)}return delete e.mediaBlocks,delete e.mediaPath,t}},{key:"evalNested",value:function(e){var t,n,r=e.mediaPath.concat([this]);for(t=0;t<r.length;t++)n=r[t].features instanceof B?r[t].features.value:r[t].features,r[t]=Array.isArray(n)?n:[n];return this.features=new B(this.permute(r).map(function(e){for(e=e.map(function(e){return e.toCSS?e:new j(e)}),t=e.length-1;t>0;t--)e.splice(t,0,new j("and"));return new ue(e)})),this.setParent(this.features,this),new ee([],[])}},{key:"permute",value:function(e){if(0===e.length)return[];if(1===e.length)return e[0];for(var t=[],n=this.permute(e.slice(1)),r=0;r<n.length;r++)for(var i=0;i<e[0].length;i++)t.push([e[0][i]].concat(n[r]));return t}},{key:"bubbleSelectors",value:function(e){e&&(this.rules=[new ee(x(e),[this.rules[0]])],this.setParent(this.rules,this))}}]),t}();ve.prototype.type="Media";var ye=function(e){function t(e,n,r,i,s,o){var u;if(a(this,t),(u=f(this,l(t).call(this))).options=r,u._index=i,u._fileInfo=s,u.path=e,u.features=n,u.allowRoot=!0,void 0!==u.options.less||u.options.inline)u.css=!u.options.less||u.options.inline;else{var c=u.getPath();c&&/[#\.\&\?]css([\?;].*)?$/.test(c)&&(u.css=!0)}return u.copyVisibilityInfo(o),u.setParent(u.features,h(u)),u.setParent(u.path,h(u)),u}return u(t,g),o(t,[{key:"accept",value:function(e){this.features&&(this.features=e.visit(this.features)),this.path=e.visit(this.path),this.options.isPlugin||this.options.inline||!this.root||(this.root=e.visit(this.root))}},{key:"genCSS",value:function(e,t){this.css&&void 0===this.path._fileInfo.reference&&(t.add("@import ",this._fileInfo,this._index),this.path.genCSS(e,t),this.features&&(t.add(" "),this.features.genCSS(e,t)),t.add(";"))}},{key:"getPath",value:function(){return this.path instanceof me?this.path.value.value:this.path.value}},{key:"isVariableImport",value:function(){var e=this.path;return e instanceof me&&(e=e.value),!(e instanceof pe)||e.containsVariables()}},{key:"evalForImport",value:function(e){var n=this.path;return n instanceof me&&(n=n.value),new t(n.eval(e),this.features,this.options,this._index,this._fileInfo,this.visibilityInfo())}},{key:"evalPath",value:function(e){var t=this.path.eval(e),n=this._fileInfo;if(!(t instanceof me)){var r=t.value;n&&r&&e.pathRequiresRewrite(r)?t.value=e.rewritePath(r,n.rootpath):t.value=e.normalizePath(t.value)}return t}},{key:"eval",value:function(e){var t=this.doEval(e);return(this.options.reference||this.blocksVisibility())&&(t.length||0===t.length?t.forEach(function(e){e.addVisibilityBlock()}):t.addVisibilityBlock()),t}},{key:"doEval",value:function(e){var n,r,i=this.features&&this.features.eval(e);if(this.options.isPlugin){if(this.root&&this.root.eval)try{this.root.eval(e)}catch(e){throw e.message="Plugin error during evaluation",new D(e,this.root.imports,this.root.filename)}return(r=e.frames[0]&&e.frames[0].functionRegistry)&&this.root&&this.root.functions&&r.addMultiple(this.root.functions),[]}if(this.skip&&("function"==typeof this.skip&&(this.skip=this.skip()),this.skip))return[];if(this.options.inline){var a=new j(this.root,0,{filename:this.importedFilename,reference:this.path._fileInfo&&this.path._fileInfo.reference},!0,!0);return this.features?new ve([a],this.features.value):[a]}if(this.css){var s=new t(this.evalPath(e),i,this.options,this._index);if(!s.css&&this.error)throw this.error;return s}return(n=new ee(null,x(this.root.rules))).evalImports(e),this.features?new ve(n.rules,this.features.value):n.rules}}]),t}();ye.prototype.type="Import";var ge=function(e){function t(e,n,r,i){var s;return a(this,t),(s=f(this,l(t).call(this))).escaped=n,s.expression=e,s._index=r,s._fileInfo=i,s}return u(t,e),o(t,[{key:"eval",value:function(e){var t=this.evaluateJavaScript(this.expression,e),n=i(t);return"number"!==n||isNaN(t)?"string"===n?new pe('"'.concat(t,'"'),t,this.escaped,this._index):Array.isArray(t)?new j(t.join(", ")):new j(t):new ie(t)}}]),t}(function(e){function t(){return a(this,t),f(this,l(t).apply(this,arguments))}return u(t,g),o(t,[{key:"evaluateJavaScript",value:function(e,t){var n,r=this,i={};if(!t.javascriptEnabled)throw{message:"Inline JavaScript is not enabled. Is it set in your options?",filename:this.fileInfo().filename,index:this.getIndex()};e=e.replace(/@\{([\w-]+)\}/g,function(e,n){return r.jsify(new de("@".concat(n),r.getIndex(),r.fileInfo()).eval(t))});try{e=new Function("return (".concat(e,")"))}catch(t){throw{message:"JavaScript evaluation error: ".concat(t.message," from `").concat(e,"`"),filename:this.fileInfo().filename,index:this.getIndex()}}var a=t.frames[0].variables();for(var s in a)a.hasOwnProperty(s)&&(i[s.slice(1)]={value:a[s].value,toJS:function(){return this.value.eval(t).toCSS()}});try{n=e.call(i)}catch(e){throw{message:"JavaScript evaluation error: '".concat(e.name,": ").concat(e.message.replace(/["]/g,"'"),"'"),filename:this.fileInfo().filename,index:this.getIndex()}}return n}},{key:"jsify",value:function(e){return Array.isArray(e.value)&&e.value.length>1?"[".concat(e.value.map(function(e){return e.toCSS()}).join(", "),"]"):e.toCSS()}}]),t}());ge.prototype.type="JavaScript";var _e=function(e){function t(e,n){var r;return a(this,t),(r=f(this,l(t).call(this))).key=e,r.value=n,r}return u(t,g),o(t,[{key:"accept",value:function(e){this.value=e.visit(this.value)}},{key:"eval",value:function(e){return this.value.eval?new t(this.key,this.value.eval(e)):this}},{key:"genCSS",value:function(e,t){t.add("".concat(this.key,"=")),this.value.genCSS?this.value.genCSS(e,t):t.add(this.value)}}]),t}();_e.prototype.type="Assignment";var be=function(e){function t(e,n,r,i,s){var o;return a(this,t),(o=f(this,l(t).call(this))).op=e.trim(),o.lvalue=n,o.rvalue=r,o._index=i,o.negate=s,o}return u(t,g),o(t,[{key:"accept",value:function(e){this.lvalue=e.visit(this.lvalue),this.rvalue=e.visit(this.rvalue)}},{key:"eval",value:function(e){var t=function(e,t,n){switch(e){case"and":return t&&n;case"or":return t||n;default:switch(g.compare(t,n)){case-1:return"<"===e||"=<"===e||"<="===e;case 0:return"="===e||">="===e||"=<"===e||"<="===e;case 1:return">"===e||">="===e;default:return!1}}}(this.op,this.lvalue.eval(e),this.rvalue.eval(e));return this.negate?!t:t}}]),t}();be.prototype.type="Condition";var we=function(e){function t(e){var n;return a(this,t),(n=f(this,l(t).call(this))).value=e,n}return u(t,g),t}();we.prototype.type="UnicodeDescriptor";var Ee=function(e){function t(e){var n;return a(this,t),(n=f(this,l(t).call(this))).value=e,n}return u(t,g),o(t,[{key:"genCSS",value:function(e,t){t.add("-"),this.value.genCSS(e,t)}},{key:"eval",value:function(e){return e.isMathOn()?new se("*",[new ie(-1),this.value]).eval(e):new t(this.value.eval(e))}}]),t}();Ee.prototype.type="Negative";var Se=function(e){function t(e,n,r,i,s){var o;switch(a(this,t),(o=f(this,l(t).call(this))).selector=e,o.option=n,o.object_id=t.next_id++,o.parent_ids=[o.object_id],o._index=r,o._fileInfo=i,o.copyVisibilityInfo(s),o.allowRoot=!0,n){case"all":o.allowBefore=!0,o.allowAfter=!0;break;default:o.allowBefore=!1,o.allowAfter=!1}return o.setParent(o.selector,h(o)),o}return u(t,g),o(t,[{key:"accept",value:function(e){this.selector=e.visit(this.selector)}},{key:"eval",value:function(e){return new t(this.selector.eval(e),this.option,this.getIndex(),this.fileInfo(),this.visibilityInfo())}},{key:"clone",value:function(e){return new t(this.selector,this.option,this.getIndex(),this.fileInfo(),this.visibilityInfo())}},{key:"findSelfSelectors",value:function(e){var t,n,r=[];for(t=0;t<e.length;t++)n=e[t].elements,t>0&&n.length&&""===n[0].combinator.value&&(n[0].combinator.value=" "),r=r.concat(e[t].elements);this.selfSelectors=[new F(r)],this.selfSelectors[0].copyVisibilityInfo(this.visibilityInfo())}}]),t}();Se.next_id=0,Se.prototype.type="Extend";var Te=function(e){function t(e,n,r){var i;return a(this,t),(i=f(this,l(t).call(this))).variable=e,i._index=n,i._fileInfo=r,i.allowRoot=!0,i}return u(t,g),o(t,[{key:"eval",value:function(e){var t,n=new de(this.variable,this.getIndex(),this.fileInfo()).eval(e),r=new D({message:"Could not evaluate variable call ".concat(this.variable)});if(!n.ruleset){if(n.rules)t=n;else if(Array.isArray(n))t=new ee("",n);else{if(!Array.isArray(n.value))throw r;t=new ee("",n.value)}n=new ne(t)}if(n.ruleset)return n.callEval(e);throw r}}]),t}();Te.prototype.type="VariableCall";var Ce=function(e){function t(e,n,r,i,s){var o;return a(this,t),(o=f(this,l(t).call(this))).value=e,o.lookups=n,o.important=r,o._index=i,o._fileInfo=s,o}return u(t,g),o(t,[{key:"eval",value:function(e){var t,n,r=this.value.eval(e);for(t=0;t<this.lookups.length;t++){if(n=this.lookups[t],Array.isArray(r)&&(r=new ee([new F],r)),""===n)r=r.lastDeclaration();else if("@"===n.charAt(0)){if("@"===n.charAt(1)&&(n="@".concat(new de(n.substr(1)).eval(e).value)),r.variables&&(r=r.variable(n)),!r)throw{type:"Name",message:"variable ".concat(n," not found"),filename:this.fileInfo().filename,index:this.getIndex()}}else{if(n="$@"===n.substring(0,2)?"$".concat(new de(n.substr(1)).eval(e).value):"$"===n.charAt(0)?n:"$".concat(n),r.properties&&(r=r.property(n)),!r)throw{type:"Name",message:'property "'.concat(n.substr(1),'" not found'),filename:this.fileInfo().filename,index:this.getIndex()};r=r[r.length-1]}r.value&&(r=r.eval(e).value),r.ruleset&&(r=r.ruleset.eval(e))}return r}}]),t}();Ce.prototype.type="NamespaceValue";var ke=function(e){function t(e,n,r,i,s,o,u){var c;a(this,t),(c=f(this,l(t).call(this))).name=e||"anonymous mixin",c.selectors=[new F([new C(null,e,!1,c._index,c._fileInfo)])],c.params=n,c.condition=i,c.variadic=s,c.arity=n.length,c.rules=r,c._lookups={};var d=[];return c.required=n.reduce(function(e,t){return!t.name||t.name&&!t.value?e+1:(d.push(t.name),e)},0),c.optionalParameters=d,c.frames=o,c.copyVisibilityInfo(u),c.allowRoot=!0,c}return u(t,ee),o(t,[{key:"accept",value:function(e){this.params&&this.params.length&&(this.params=e.visitArray(this.params)),this.rules=e.visitArray(this.rules),this.condition&&(this.condition=e.visit(this.condition))}},{key:"evalParams",value:function(e,t,n,r){var i,a,s,o,u,l,c,d,h=new ee(null,null),f=x(this.params),p=0;if(t.frames&&t.frames[0]&&t.frames[0].functionRegistry&&(h.functionRegistry=t.frames[0].functionRegistry.inherit()),t=new W.Eval(t,[h].concat(t.frames)),n)for(p=(n=x(n)).length,s=0;s<p;s++)if(l=(a=n[s])&&a.name){for(c=!1,o=0;o<f.length;o++)if(!r[o]&&l===f[o].name){r[o]=a.value.eval(e),h.prependRule(new K(l,a.value.eval(e))),c=!0;break}if(c){n.splice(s,1),s--;continue}throw{type:"Runtime",message:"Named argument for ".concat(this.name," ").concat(n[s].name," not found")}}for(d=0,s=0;s<f.length;s++)if(!r[s]){if(a=n&&n[d],l=f[s].name)if(f[s].variadic){for(i=[],o=d;o<p;o++)i.push(n[o].value.eval(e));h.prependRule(new K(l,new ue(i).eval(e)))}else{if(u=a&&a.value)u=Array.isArray(u)?new ne(new ee("",u)):u.eval(e);else{if(!f[s].value)throw{type:"Runtime",message:"wrong number of arguments for ".concat(this.name," (").concat(p," for ").concat(this.arity,")")};u=f[s].value.eval(t),h.resetCache()}h.prependRule(new K(l,u)),r[s]=u}if(f[s].variadic&&n)for(o=d;o<p;o++)r[o]=n[o].value.eval(e);d++}return h}},{key:"makeImportant",value:function(){var e=this.rules?this.rules.map(function(e){return e.makeImportant?e.makeImportant(!0):e}):this.rules;return new t(this.name,this.params,e,this.condition,this.variadic,this.frames)}},{key:"eval",value:function(e){return new t(this.name,this.params,this.rules,this.condition,this.variadic,this.frames||x(e.frames))}},{key:"evalCall",value:function(e,t,n){var r,i,a=[],s=this.frames?this.frames.concat(e.frames):e.frames,o=this.evalParams(e,new W.Eval(e,s),t,a);return o.prependRule(new K("@arguments",new ue(a).eval(e))),r=x(this.rules),(i=new ee(null,r)).originalRuleset=this,i=i.eval(new W.Eval(e,[this,o].concat(s))),n&&(i=i.makeImportant()),i}},{key:"matchCondition",value:function(e,t){return!(this.condition&&!this.condition.eval(new W.Eval(t,[this.evalParams(t,new W.Eval(t,this.frames?this.frames.concat(t.frames):t.frames),e,[])].concat(this.frames||[]).concat(t.frames))))}},{key:"matchArgs",value:function(e,t){var n,r=e&&e.length||0,i=this.optionalParameters,a=e?e.reduce(function(e,t){return i.indexOf(t.name)<0?e+1:e},0):0;if(this.variadic){if(a<this.required-1)return!1}else{if(a<this.required)return!1;if(r>this.params.length)return!1}n=Math.min(a,this.arity);for(var s=0;s<n;s++)if(!this.params[s].name&&!this.params[s].variadic&&e[s].value.eval(t).toCSS()!=this.params[s].value.eval(t).toCSS())return!1;return!0}}]),t}();ke.prototype.type="MixinDefinition",ke.prototype.evalFirst=!0;var Ie=function(e){function t(e,n,r,i,s){var o;return a(this,t),(o=f(this,l(t).call(this))).selector=new F(e),o.arguments=n||[],o._index=r,o._fileInfo=i,o.important=s,o.allowRoot=!0,o.setParent(o.selector,h(o)),o}return u(t,g),o(t,[{key:"accept",value:function(e){this.selector&&(this.selector=e.visit(this.selector)),this.arguments.length&&(this.arguments=e.visitArray(this.arguments))}},{key:"eval",value:function(e){var t,n,r,i,a,s,o,u,l,c,d,h,f,p,m,v=[],y=[],g=!1,_=[],b=[],w=-1,E=0,S=1,T=2;function C(t,n){var r,i,a;for(r=0;r<2;r++){for(b[r]=!0,J.value(r),i=0;i<n.length&&b[r];i++)(a=n[i]).matchCondition&&(b[r]=b[r]&&a.matchCondition(null,e));t.matchCondition&&(b[r]=b[r]&&t.matchCondition(v,e))}return b[0]||b[1]?b[0]!=b[1]?b[1]?S:T:E:w}for(this.selector=this.selector.eval(e),s=0;s<this.arguments.length;s++)if(a=(i=this.arguments[s]).value.eval(e),i.expand&&Array.isArray(a.value))for(a=a.value,o=0;o<a.length;o++)v.push({value:a[o]});else v.push({name:i.name,value:a});for(m=function(t){return t.matchArgs(null,e)},s=0;s<e.frames.length;s++)if((t=e.frames[s].find(this.selector,null,m)).length>0){for(c=!0,o=0;o<t.length;o++){for(n=t[o].rule,r=t[o].path,l=!1,u=0;u<e.frames.length;u++)if(!(n instanceof ke)&&n===(e.frames[u].originalRuleset||e.frames[u])){l=!0;break}l||n.matchArgs(v,e)&&((d={mixin:n,group:C(n,r)}).group!==w&&_.push(d),g=!0)}for(J.reset(),f=[0,0,0],o=0;o<_.length;o++)f[_[o].group]++;if(f[E]>0)h=T;else if(h=S,f[S]+f[T]>1)throw{type:"Runtime",message:"Ambiguous use of `default()` found when matching for `".concat(this.format(v),"`"),index:this.getIndex(),filename:this.fileInfo().filename};for(o=0;o<_.length;o++)if((d=_[o].group)===E||d===h)try{(n=_[o].mixin)instanceof ke||(p=n.originalRuleset||n,(n=new ke("",[],n.rules,null,!1,null,p.visibilityInfo())).originalRuleset=p);var k=n.evalCall(e,v,this.important).rules;this._setVisibilityToReplacement(k),Array.prototype.push.apply(y,k)}catch(e){throw{message:e.message,index:this.getIndex(),filename:this.fileInfo().filename,stack:e.stack}}if(g)return y}throw c?{type:"Runtime",message:"No matching definition was found for `".concat(this.format(v),"`"),index:this.getIndex(),filename:this.fileInfo().filename}:{type:"Name",message:"".concat(this.selector.toCSS().trim()," is undefined"),index:this.getIndex(),filename:this.fileInfo().filename}}},{key:"_setVisibilityToReplacement",value:function(e){var t;if(this.blocksVisibility())for(t=0;t<e.length;t++)e[t].addVisibilityBlock()}},{key:"format",value:function(e){return"".concat(this.selector.toCSS().trim(),"(").concat(e?e.map(function(e){var t="";return e.name&&(t+="".concat(e.name,":")),e.value.toCSS?t+=e.value.toCSS():t+="???",t}).join(", "):"",")")}}]),t}();Ie.prototype.type="MixinCall";var Ae={Node:g,Color:_,AtRule:te,DetachedRuleset:ne,Operation:se,Dimension:ie,Unit:re,Keyword:V,Variable:de,Property:he,Ruleset:ee,Element:C,Attribute:fe,Combinator:T,Selector:F,Quoted:pe,Expression:ue,Declaration:K,Call:ce,URL:me,Import:ye,Comment:q,Anonymous:j,Value:B,JavaScript:ge,Assignment:_e,Condition:be,Paren:E,Media:ve,UnicodeDescriptor:we,Negative:Ee,Extend:Se,VariableCall:Te,NamespaceValue:Ce,mixin:{Call:Ie,Definition:ke}},Le={error:function(e){this._fireEvent("error",e)},warn:function(e){this._fireEvent("warn",e)},info:function(e){this._fireEvent("info",e)},debug:function(e){this._fireEvent("debug",e)},addListener:function(e){this._listeners.push(e)},removeListener:function(e){for(var t=0;t<this._listeners.length;t++)if(this._listeners[t]===e)return void this._listeners.splice(t,1)},_fireEvent:function(e,t){for(var n=0;n<this._listeners.length;n++){var r=this._listeners[n][e];r&&r(t)}},_listeners:[]},xe=function(){function e(t,n){a(this,e),this.fileManagers=n||[],t=t||{};for(var r=[],i=r.concat(["encodeBase64","mimeLookup","charsetLookup","getSourceMapGenerator"]),s=0;s<i.length;s++){var o=i[s],u=t[o];u?this[o]=u.bind(t):s<r.length&&this.warn("missing required function in environment - ".concat(o))}}return o(e,[{key:"getFileManager",value:function(e,t,n,r,i){e||Le.warn("getFileManager called with no filename.. Please report this issue. continuing."),null==t&&Le.warn("getFileManager called with null directory.. Please report this issue. continuing.");var a=this.fileManagers;n.pluginManager&&(a=[].concat(a).concat(n.pluginManager.getFileManagers()));for(var s=a.length-1;s>=0;s--){var o=a[s];if(o[i?"supportsSync":"supports"](e,t,n,r))return o}return null}},{key:"addFileManager",value:function(e){this.fileManagers.push(e)}},{key:"clearFileManagers",value:function(){this.fileManagers=[]}}]),e}(),Re=function(){function e(){a(this,e)}return o(e,[{key:"getPath",value:function(e){var t=e.lastIndexOf("?");return t>0&&(e=e.slice(0,t)),(t=e.lastIndexOf("/"))<0&&(t=e.lastIndexOf("\\")),t<0?"":e.slice(0,t+1)}},{key:"tryAppendExtension",value:function(e,t){return/(\.[a-z]*$)|([\?;].*)$/.test(e)?e:e+t}},{key:"tryAppendLessExtension",value:function(e){return this.tryAppendExtension(e,".less")}},{key:"supportsSync",value:function(){return!1}},{key:"alwaysMakePathsAbsolute",value:function(){return!1}},{key:"isPathAbsolute",value:function(e){return/^(?:[a-z-]+:|\/|\\|#)/i.test(e)}},{key:"join",value:function(e,t){return e?e+t:t}},{key:"pathDiff",value:function(e,t){var n,r,i,a,s=this.extractUrlParts(e),o=this.extractUrlParts(t),u="";if(s.hostPart!==o.hostPart)return"";for(r=Math.max(o.directories.length,s.directories.length),n=0;n<r&&o.directories[n]===s.directories[n];n++);for(a=o.directories.slice(n),i=s.directories.slice(n),n=0;n<a.length-1;n++)u+="../";for(n=0;n<i.length-1;n++)u+="".concat(i[n],"/");return u}},{key:"extractUrlParts",value:function(e,t){var n,r,i=/^((?:[a-z-]+:)?\/{2}(?:[^\/\?#]*\/)|([\/\\]))?((?:[^\/\\\?#]*[\/\\])*)([^\/\\\?#]*)([#\?].*)?$/i,a=e.match(i),s={},o=[],u=[];if(!a)throw new Error("Could not parse sheet href - '".concat(e,"'"));if(t&&(!a[1]||a[2])){if(!(r=t.match(i)))throw new Error("Could not parse page url - '".concat(t,"'"));a[1]=a[1]||r[1]||"",a[2]||(a[3]=r[3]+a[3])}if(a[3])for(o=a[3].replace(/\\/g,"/").split("/"),n=0;n<o.length;n++)".."===o[n]?u.pop():"."!==o[n]&&u.push(o[n]);return s.hostPart=a[1],s.directories=u,s.rawPath=(a[1]||"")+o.join("/"),s.path=(a[1]||"")+u.join("/"),s.filename=a[4],s.fileUrl=s.path+(a[4]||""),s.url=s.fileUrl+(a[5]||""),s}}]),e}(),Ne=function(){function e(){a(this,e),this.require=function(){return null}}return o(e,[{key:"evalPlugin",value:function(e,t,n,r,i){var a,s,o,u,l,c;u=t.pluginManager,i&&(l="string"==typeof i?i:i.filename);var d=(new this.less.FileManager).extractUrlParts(l).filename;if(l&&(s=u.get(l))){if(c=this.trySetOptions(s,l,d,r))return c;try{s.use&&s.use.call(this.context,s)}catch(e){return e.message=e.message||"Error during @plugin call",new D(e,n,l)}return s}o={exports:{},pluginManager:u,fileInfo:i},a=Q.create();try{new Function("module","require","registerPlugin","functions","tree","less","fileInfo",e)(o,this.require(l),function(e){s=e},a,this.less.tree,this.less,i)}catch(e){return new D(e,n,l)}if(s||(s=o.exports),(s=this.validatePlugin(s,l,d))instanceof D)return s;if(!s)return new D({message:"Not a valid plugin"},n,l);if(s.imports=n,s.filename=l,(!s.minVersion||this.compareVersion("3.0.0",s.minVersion)<0)&&(c=this.trySetOptions(s,l,d,r)))return c;if(u.addPlugin(s,i.filename,a),s.functions=a.getLocalFunctions(),c=this.trySetOptions(s,l,d,r))return c;try{s.use&&s.use.call(this.context,s)}catch(e){return e.message=e.message||"Error during @plugin call",new D(e,n,l)}return s}},{key:"trySetOptions",value:function(e,t,n,r){if(r&&!e.setOptions)return new D({message:"Options have been provided but the plugin ".concat(n," does not support any options.")});try{e.setOptions&&e.setOptions(r)}catch(e){return new D(e)}}},{key:"validatePlugin",value:function(e,t,n){return e?("function"==typeof e&&(e=new e),e.minVersion&&this.compareVersion(e.minVersion,this.less.version)<0?new D({message:"Plugin ".concat(n," requires version ").concat(this.versionToString(e.minVersion))}):e):null}},{key:"compareVersion",value:function(e,t){"string"==typeof e&&(e=e.match(/^(\d+)\.?(\d+)?\.?(\d+)?/)).shift();for(var n=0;n<e.length;n++)if(e[n]!==t[n])return parseInt(e[n])>parseInt(t[n])?-1:1;return 0}},{key:"versionToString",value:function(e){for(var t="",n=0;n<e.length;n++)t+=(t?".":"")+e[n];return t}},{key:"printUsage",value:function(e){for(var t=0;t<e.length;t++){var n=e[t];n.printUsage&&n.printUsage()}}}]),e}(),Me={visitDeeper:!0},Pe=!1;function Oe(e){return e}var De=function(){function e(t){a(this,e),this._implementation=t,this._visitInCache={},this._visitOutCache={},Pe||(function e(t,n){var r,a;for(r in t)switch(i(a=t[r])){case"function":a.prototype&&a.prototype.type&&(a.prototype.typeIndex=n++);break;case"object":n=e(a,n)}return n}(Ae,1),Pe=!0)}return o(e,[{key:"visit",value:function(e){if(!e)return e;var t=e.typeIndex;if(!t)return e.value&&e.value.typeIndex&&this.visit(e.value),e;var n,r=this._implementation,i=this._visitInCache[t],a=this._visitOutCache[t],s=Me;if(s.visitDeeper=!0,i||(i=r[n="visit".concat(e.type)]||Oe,a=r["".concat(n,"Out")]||Oe,this._visitInCache[t]=i,this._visitOutCache[t]=a),i!==Oe){var o=i.call(r,e,s);e&&r.isReplacing&&(e=o)}return s.visitDeeper&&e&&e.accept&&e.accept(this),a!=Oe&&a.call(r,e),e}},{key:"visitArray",value:function(e,t){if(!e)return e;var n,r=e.length;if(t||!this._implementation.isReplacing){for(n=0;n<r;n++)this.visit(e[n]);return e}var i=[];for(n=0;n<r;n++){var a=this.visit(e[n]);void 0!==a&&(a.splice?a.length&&this.flatten(a,i):i.push(a))}return i}},{key:"flatten",value:function(e,t){var n,r,i,a,s,o;for(t||(t=[]),r=0,n=e.length;r<n;r++)if(void 0!==(i=e[r]))if(i.splice)for(s=0,a=i.length;s<a;s++)void 0!==(o=i[s])&&(o.splice?o.length&&this.flatten(o,t):t.push(o));else t.push(i);return t}}]),e}(),Ue=function(){function e(t){a(this,e),this.imports=[],this.variableImports=[],this._onSequencerEmpty=t,this._currentDepth=0}return o(e,[{key:"addImport",value:function(e){var t=this,n={callback:e,args:null,isReady:!1};return this.imports.push(n),function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];n.args=Array.prototype.slice.call(r,0),n.isReady=!0,t.tryRun()}}},{key:"addVariableImport",value:function(e){this.variableImports.push(e)}},{key:"tryRun",value:function(){this._currentDepth++;try{for(;;){for(;this.imports.length>0;){var e=this.imports[0];if(!e.isReady)return;this.imports=this.imports.slice(1),e.callback.apply(null,e.args)}if(0===this.variableImports.length)break;var t=this.variableImports[0];this.variableImports=this.variableImports.slice(1),t()}}finally{this._currentDepth--}0===this._currentDepth&&this._onSequencerEmpty&&this._onSequencerEmpty()}}]),e}(),Fe=function(e,t){this._visitor=new De(this),this._importer=e,this._finish=t,this.context=new W.Eval,this.importCount=0,this.onceFileDetectionMap={},this.recursionDetector={},this._sequencer=new Ue(this._onSequencerEmpty.bind(this))};Fe.prototype={isReplacing:!1,run:function(e){try{this._visitor.visit(e)}catch(e){this.error=e}this.isFinished=!0,this._sequencer.tryRun()},_onSequencerEmpty:function(){this.isFinished&&this._finish(this.error)},visitImport:function(e,t){var n=e.options.inline;if(!e.css||n){var r=new W.Eval(this.context,x(this.context.frames)),i=r.frames[0];this.importCount++,e.isVariableImport()?this._sequencer.addVariableImport(this.processImportNode.bind(this,e,r,i)):this.processImportNode(e,r,i)}t.visitDeeper=!1},processImportNode:function(e,t,n){var r,i=e.options.inline;try{r=e.evalForImport(t)}catch(t){t.filename||(t.index=e.getIndex(),t.filename=e.fileInfo().filename),e.css=!0,e.error=t}if(!r||r.css&&!i)this.importCount--,this.isFinished&&this._sequencer.tryRun();else{r.options.multiple&&(t.importMultiple=!0);for(var a=void 0===r.css,s=0;s<n.rules.length;s++)if(n.rules[s]===e){n.rules[s]=r;break}var o=this.onImported.bind(this,r,t),u=this._sequencer.addImport(o);this._importer.push(r.getPath(),a,r.fileInfo(),r.options,u)}},onImported:function(e,t,n,r,i,a){n&&(n.filename||(n.index=e.getIndex(),n.filename=e.fileInfo().filename),this.error=n);var s=this,o=e.options.inline,u=e.options.isPlugin,l=e.options.optional,c=i||a in s.recursionDetector;if(t.importMultiple||(e.skip=!!c||function(){return a in s.onceFileDetectionMap||(s.onceFileDetectionMap[a]=!0,!1)}),!a&&l&&(e.skip=!0),r&&(e.root=r,e.importedFilename=a,!o&&!u&&(t.importMultiple||!c))){s.recursionDetector[a]=!0;var d=this.context;this.context=t;try{this._visitor.visit(r)}catch(n){this.error=n}this.context=d}s.importCount--,s.isFinished&&s._sequencer.tryRun()},visitDeclaration:function(e,t){"DetachedRuleset"===e.value.type?this.context.frames.unshift(e):t.visitDeeper=!1},visitDeclarationOut:function(e){"DetachedRuleset"===e.value.type&&this.context.frames.shift()},visitAtRule:function(e,t){this.context.frames.unshift(e)},visitAtRuleOut:function(e){this.context.frames.shift()},visitMixinDefinition:function(e,t){this.context.frames.unshift(e)},visitMixinDefinitionOut:function(e){this.context.frames.shift()},visitRuleset:function(e,t){this.context.frames.unshift(e)},visitRulesetOut:function(e){this.context.frames.shift()},visitMedia:function(e,t){this.context.frames.unshift(e.rules[0])},visitMediaOut:function(e){this.context.frames.shift()}};var Be=function(){function e(t){a(this,e),this.visible=t}return o(e,[{key:"run",value:function(e){this.visit(e)}},{key:"visitArray",value:function(e){if(!e)return e;var t,n=e.length;for(t=0;t<n;t++)this.visit(e[t]);return e}},{key:"visit",value:function(e){return e?e.constructor===Array?this.visitArray(e):!e.blocksVisibility||e.blocksVisibility()?e:(this.visible?e.ensureVisibility():e.ensureInvisibility(),e.accept(this),e):e}}]),e}(),Ve=function(){function e(){a(this,e),this._visitor=new De(this),this.contexts=[],this.allExtendsStack=[[]]}return o(e,[{key:"run",value:function(e){return(e=this._visitor.visit(e)).allExtends=this.allExtendsStack[0],e}},{key:"visitDeclaration",value:function(e,t){t.visitDeeper=!1}},{key:"visitMixinDefinition",value:function(e,t){t.visitDeeper=!1}},{key:"visitRuleset",value:function(e,t){if(!e.root){var n,r,i,a,s=[],o=e.rules,u=o?o.length:0;for(n=0;n<u;n++)e.rules[n]instanceof Ae.Extend&&(s.push(o[n]),e.extendOnEveryPath=!0);var l=e.paths;for(n=0;n<l.length;n++){var c=l[n],d=c[c.length-1].extendList;for((a=d?x(d).concat(s):s)&&(a=a.map(function(e){return e.clone()})),r=0;r<a.length;r++)this.foundExtends=!0,(i=a[r]).findSelfSelectors(c),i.ruleset=e,0===r&&(i.firstExtendOnThisSelectorPath=!0),this.allExtendsStack[this.allExtendsStack.length-1].push(i)}this.contexts.push(e.selectors)}}},{key:"visitRulesetOut",value:function(e){e.root||(this.contexts.length=this.contexts.length-1)}},{key:"visitMedia",value:function(e,t){e.allExtends=[],this.allExtendsStack.push(e.allExtends)}},{key:"visitMediaOut",value:function(e){this.allExtendsStack.length=this.allExtendsStack.length-1}},{key:"visitAtRule",value:function(e,t){e.allExtends=[],this.allExtendsStack.push(e.allExtends)}},{key:"visitAtRuleOut",value:function(e){this.allExtendsStack.length=this.allExtendsStack.length-1}}]),e}(),je=function(){function e(){a(this,e),this._visitor=new De(this)}return o(e,[{key:"run",value:function(e){var t=new Ve;if(this.extendIndices={},t.run(e),!t.foundExtends)return e;e.allExtends=e.allExtends.concat(this.doExtendChaining(e.allExtends,e.allExtends)),this.allExtendsStack=[e.allExtends];var n=this._visitor.visit(e);return this.checkExtendsForNonMatched(e.allExtends),n}},{key:"checkExtendsForNonMatched",value:function(e){var t=this.extendIndices;e.filter(function(e){return!e.hasFoundMatches&&1==e.parent_ids.length}).forEach(function(e){var n="_unknown_";try{n=e.selector.toCSS({})}catch(e){}t["".concat(e.index," ").concat(n)]||(t["".concat(e.index," ").concat(n)]=!0,Le.warn("extend '".concat(n,"' has no matches")))})}},{key:"doExtendChaining",value:function(e,t,n){var r,i,a,s,o,u,l,c,d=[],h=this;for(n=n||0,r=0;r<e.length;r++)for(i=0;i<t.length;i++)u=e[r],l=t[i],u.parent_ids.indexOf(l.object_id)>=0||(o=[l.selfSelectors[0]],(a=h.findMatch(u,o)).length&&(u.hasFoundMatches=!0,u.selfSelectors.forEach(function(e){var t=l.visibilityInfo();s=h.extendSelector(a,o,e,u.isVisible()),(c=new Ae.Extend(l.selector,l.option,0,l.fileInfo(),t)).selfSelectors=s,s[s.length-1].extendList=[c],d.push(c),c.ruleset=l.ruleset,c.parent_ids=c.parent_ids.concat(l.parent_ids,u.parent_ids),l.firstExtendOnThisSelectorPath&&(c.firstExtendOnThisSelectorPath=!0,l.ruleset.paths.push(s))})));if(d.length){if(this.extendChainCount++,n>100){var f="{unable to calculate}",p="{unable to calculate}";try{f=d[0].selfSelectors[0].toCSS(),p=d[0].selector.toCSS()}catch(e){}throw{message:"extend circular reference detected. One of the circular extends is currently:".concat(f,":extend(").concat(p,")")}}return d.concat(h.doExtendChaining(d,t,n+1))}return d}},{key:"visitDeclaration",value:function(e,t){t.visitDeeper=!1}},{key:"visitMixinDefinition",value:function(e,t){t.visitDeeper=!1}},{key:"visitSelector",value:function(e,t){t.visitDeeper=!1}},{key:"visitRuleset",value:function(e,t){if(!e.root){var n,r,i,a,s=this.allExtendsStack[this.allExtendsStack.length-1],o=[],u=this;for(i=0;i<s.length;i++)for(r=0;r<e.paths.length;r++)if(a=e.paths[r],!e.extendOnEveryPath){var l=a[a.length-1].extendList;l&&l.length||(n=this.findMatch(s[i],a)).length&&(s[i].hasFoundMatches=!0,s[i].selfSelectors.forEach(function(e){var t;t=u.extendSelector(n,a,e,s[i].isVisible()),o.push(t)}))}e.paths=e.paths.concat(o)}}},{key:"findMatch",value:function(e,t){var n,r,i,a,s,o,u,l=e.selector.elements,c=[],d=[];for(n=0;n<t.length;n++)for(r=t[n],i=0;i<r.elements.length;i++)for(a=r.elements[i],(e.allowBefore||0===n&&0===i)&&c.push({pathIndex:n,index:i,matched:0,initialCombinator:a.combinator}),o=0;o<c.length;o++)u=c[o],""===(s=a.combinator.value)&&0===i&&(s=" "),!this.isElementValuesEqual(l[u.matched].value,a.value)||u.matched>0&&l[u.matched].combinator.value!==s?u=null:u.matched++,u&&(u.finished=u.matched===l.length,u.finished&&!e.allowAfter&&(i+1<r.elements.length||n+1<t.length)&&(u=null)),u?u.finished&&(u.length=l.length,u.endPathIndex=n,u.endPathElementIndex=i+1,c.length=0,d.push(u)):(c.splice(o,1),o--);return d}},{key:"isElementValuesEqual",value:function(e,t){if("string"==typeof e||"string"==typeof t)return e===t;if(e instanceof Ae.Attribute)return e.op===t.op&&e.key===t.key&&(e.value&&t.value?(e=e.value.value||e.value)===(t=t.value.value||t.value):!e.value&&!t.value);if(e=e.value,t=t.value,e instanceof Ae.Selector){if(!(t instanceof Ae.Selector)||e.elements.length!==t.elements.length)return!1;for(var n=0;n<e.elements.length;n++){if(e.elements[n].combinator.value!==t.elements[n].combinator.value&&(0!==n||(e.elements[n].combinator.value||" ")!==(t.elements[n].combinator.value||" ")))return!1;if(!this.isElementValuesEqual(e.elements[n].value,t.elements[n].value))return!1}return!0}return!1}},{key:"extendSelector",value:function(e,t,n,r){var i,a,s,o,u,l=0,c=0,d=[];for(i=0;i<e.length;i++)a=t[(o=e[i]).pathIndex],s=new Ae.Element(o.initialCombinator,n.elements[0].value,n.elements[0].isVariable,n.elements[0].getIndex(),n.elements[0].fileInfo()),o.pathIndex>l&&c>0&&(d[d.length-1].elements=d[d.length-1].elements.concat(t[l].elements.slice(c)),c=0,l++),u=a.elements.slice(c,o.index).concat([s]).concat(n.elements.slice(1)),l===o.pathIndex&&i>0?d[d.length-1].elements=d[d.length-1].elements.concat(u):(d=d.concat(t.slice(l,o.pathIndex))).push(new Ae.Selector(u)),l=o.endPathIndex,(c=o.endPathElementIndex)>=t[l].elements.length&&(c=0,l++);return l<t.length&&c>0&&(d[d.length-1].elements=d[d.length-1].elements.concat(t[l].elements.slice(c)),l++),d=(d=d.concat(t.slice(l,t.length))).map(function(e){var t=e.createDerived(e.elements);return r?t.ensureVisibility():t.ensureInvisibility(),t})}},{key:"visitMedia",value:function(e,t){var n=e.allExtends.concat(this.allExtendsStack[this.allExtendsStack.length-1]);n=n.concat(this.doExtendChaining(n,e.allExtends)),this.allExtendsStack.push(n)}},{key:"visitMediaOut",value:function(e){var t=this.allExtendsStack.length-1;this.allExtendsStack.length=t}},{key:"visitAtRule",value:function(e,t){var n=e.allExtends.concat(this.allExtendsStack[this.allExtendsStack.length-1]);n=n.concat(this.doExtendChaining(n,e.allExtends)),this.allExtendsStack.push(n)}},{key:"visitAtRuleOut",value:function(e){var t=this.allExtendsStack.length-1;this.allExtendsStack.length=t}}]),e}(),He=function(){function e(){a(this,e),this.contexts=[[]],this._visitor=new De(this)}return o(e,[{key:"run",value:function(e){return this._visitor.visit(e)}},{key:"visitDeclaration",value:function(e,t){t.visitDeeper=!1}},{key:"visitMixinDefinition",value:function(e,t){t.visitDeeper=!1}},{key:"visitRuleset",value:function(e,t){var n,r=this.contexts[this.contexts.length-1],i=[];this.contexts.push(i),e.root||((n=e.selectors)&&(n=n.filter(function(e){return e.getIsOutput()}),e.selectors=n.length?n:n=null,n&&e.joinSelectors(i,r,n)),n||(e.rules=null),e.paths=i)}},{key:"visitRulesetOut",value:function(e){this.contexts.length=this.contexts.length-1}},{key:"visitMedia",value:function(e,t){var n=this.contexts[this.contexts.length-1];e.rules[0].root=0===n.length||n[0].multiMedia}},{key:"visitAtRule",value:function(e,t){var n=this.contexts[this.contexts.length-1];e.rules&&e.rules.length&&(e.rules[0].root=e.isRooted||0===n.length||null)}}]),e}(),Ke=function(){function e(t){a(this,e),this._visitor=new De(this),this._context=t}return o(e,[{key:"containsSilentNonBlockedChild",value:function(e){var t;if(!e)return!1;for(var n=0;n<e.length;n++)if((t=e[n]).isSilent&&t.isSilent(this._context)&&!t.blocksVisibility())return!0;return!1}},{key:"keepOnlyVisibleChilds",value:function(e){e&&e.rules&&(e.rules=e.rules.filter(function(e){return e.isVisible()}))}},{key:"isEmpty",value:function(e){return!e||!e.rules||0===e.rules.length}},{key:"hasVisibleSelector",value:function(e){return!(!e||!e.paths)&&e.paths.length>0}},{key:"resolveVisibility",value:function(e,t){if(!e.blocksVisibility()){if(this.isEmpty(e)&&!this.containsSilentNonBlockedChild(t))return;return e}var n=e.rules[0];if(this.keepOnlyVisibleChilds(n),!this.isEmpty(n))return e.ensureVisibility(),e.removeVisibilityBlock(),e}},{key:"isVisibleRuleset",value:function(e){return!!e.firstRoot||!this.isEmpty(e)&&!(!e.root&&!this.hasVisibleSelector(e))}}]),e}(),Ge=function(e){this._visitor=new De(this),this._context=e,this.utils=new Ke(e)};Ge.prototype={isReplacing:!0,run:function(e){return this._visitor.visit(e)},visitDeclaration:function(e,t){if(!e.blocksVisibility()&&!e.variable)return e},visitMixinDefinition:function(e,t){e.frames=[]},visitExtend:function(e,t){},visitComment:function(e,t){if(!e.blocksVisibility()&&!e.isSilent(this._context))return e},visitMedia:function(e,t){var n=e.rules[0].rules;return e.accept(this._visitor),t.visitDeeper=!1,this.utils.resolveVisibility(e,n)},visitImport:function(e,t){if(!e.blocksVisibility())return e},visitAtRule:function(e,t){return e.rules&&e.rules.length?this.visitAtRuleWithBody(e,t):this.visitAtRuleWithoutBody(e,t)},visitAnonymous:function(e,t){if(!e.blocksVisibility())return e.accept(this._visitor),e},visitAtRuleWithBody:function(e,t){var n=function(e){var t=e.rules;return function(e){var t=e.rules;return 1===t.length&&(!t[0].paths||0===t[0].paths.length)}(e)?t[0].rules:t}(e);return e.accept(this._visitor),t.visitDeeper=!1,this.utils.isEmpty(e)||this._mergeRules(e.rules[0].rules),this.utils.resolveVisibility(e,n)},visitAtRuleWithoutBody:function(e,t){if(!e.blocksVisibility()){if("@charset"===e.name){if(this.charset){if(e.debugInfo){var n=new Ae.Comment("/* ".concat(e.toCSS(this._context).replace(/\n/g,"")," */\n"));return n.debugInfo=e.debugInfo,this._visitor.visit(n)}return}this.charset=!0}return e}},checkValidNodes:function(e,t){if(e)for(var n=0;n<e.length;n++){var r=e[n];if(t&&r instanceof Ae.Declaration&&!r.variable)throw{message:"Properties must be inside selector blocks. They cannot be in the root",index:r.getIndex(),filename:r.fileInfo()&&r.fileInfo().filename};if(r instanceof Ae.Call)throw{message:"Function '".concat(r.name,"' is undefined"),index:r.getIndex(),filename:r.fileInfo()&&r.fileInfo().filename};if(r.type&&!r.allowRoot)throw{message:"".concat(r.type," node returned by a function is not valid here"),index:r.getIndex(),filename:r.fileInfo()&&r.fileInfo().filename}}},visitRuleset:function(e,t){var n,r=[];if(this.checkValidNodes(e.rules,e.firstRoot),e.root)e.accept(this._visitor),t.visitDeeper=!1;else{this._compileRulesetPaths(e);for(var i=e.rules,a=i?i.length:0,s=0;s<a;)(n=i[s])&&n.rules?(r.push(this._visitor.visit(n)),i.splice(s,1),a--):s++;a>0?e.accept(this._visitor):e.rules=null,t.visitDeeper=!1}return e.rules&&(this._mergeRules(e.rules),this._removeDuplicateRules(e.rules)),this.utils.isVisibleRuleset(e)&&(e.ensureVisibility(),r.splice(0,0,e)),1===r.length?r[0]:r},_compileRulesetPaths:function(e){e.paths&&(e.paths=e.paths.filter(function(e){var t;for(" "===e[0].elements[0].combinator.value&&(e[0].elements[0].combinator=new Ae.Combinator("")),t=0;t<e.length;t++)if(e[t].isVisible()&&e[t].getIsOutput())return!0;return!1}))},_removeDuplicateRules:function(e){if(e){var t,n,r,i={};for(r=e.length-1;r>=0;r--)if((n=e[r])instanceof Ae.Declaration)if(i[n.name]){(t=i[n.name])instanceof Ae.Declaration&&(t=i[n.name]=[i[n.name].toCSS(this._context)]);var a=n.toCSS(this._context);-1!==t.indexOf(a)?e.splice(r,1):t.push(a)}else i[n.name]=n}},_mergeRules:function(e){if(e){for(var t={},n=[],r=0;r<e.length;r++){var i=e[r];if(i.merge){var a=i.name;t[a]?e.splice(r--,1):n.push(t[a]=[]),t[a].push(i)}}n.forEach(function(e){if(e.length>0){var t=e[0],n=[],r=[new Ae.Expression(n)];e.forEach(function(e){"+"===e.merge&&n.length>0&&r.push(new Ae.Expression(n=[])),n.push(e.value),t.important=t.important||e.important}),t.value=new Ae.Value(r)}})}}};var qe={Visitor:De,ImportVisitor:Fe,MarkVisibleSelectorsVisitor:Be,ExtendVisitor:je,JoinSelectorVisitor:He,ToCSSVisitor:Ge},We=function(){var e,t,n,r,i,a,s,o=[],u={},l=32,c=9,d=10,h=13,f=47;function p(n){for(var r,o,m,v=u.i,y=t,g=u.i-s,_=u.i+a.length-g,b=u.i+=n,w=e;u.i<_;u.i++){if(r=w.charCodeAt(u.i),u.autoCommentAbsorb&&r===f){if("/"===(o=w.charAt(u.i+1))){m={index:u.i,isLineComment:!0};var E=w.indexOf("\n",u.i+2);E<0&&(E=_),u.i=E,m.text=w.substr(m.index,u.i-m.index),u.commentStore.push(m);continue}if("*"===o){var S=w.indexOf("*/",u.i+2);if(S>=0){m={index:u.i,text:w.substr(u.i,S+2-u.i),isLineComment:!1},u.i+=m.text.length-1,u.commentStore.push(m);continue}}break}if(r!==l&&r!==d&&r!==c&&r!==h)break}if(a=a.slice(n+u.i-b+g),s=u.i,!a.length){if(t<i.length-1)return a=i[++t],p(0),!0;u.finished=!0}return v!==u.i||y!==t}return u.save=function(){s=u.i,o.push({current:a,i:u.i,j:t})},u.restore=function(e){(u.i>n||u.i===n&&e&&!r)&&(n=u.i,r=e);var i=o.pop();a=i.current,s=u.i=i.i,t=i.j},u.forget=function(){o.pop()},u.isWhitespace=function(t){var n=u.i+(t||0),r=e.charCodeAt(n);return r===l||r===h||r===c||r===d},u.$re=function(e){u.i>s&&(a=a.slice(u.i-s),s=u.i);var t=e.exec(a);return t?(p(t[0].length),"string"==typeof t?t:1===t.length?t[0]:t):null},u.$char=function(t){return e.charAt(u.i)!==t?null:(p(1),t)},u.$str=function(t){for(var n=t.length,r=0;r<n;r++)if(e.charAt(u.i+r)!==t.charAt(r))return null;return p(n),t},u.$quoted=function(t){var n=t||u.i,r=e.charAt(n);if("'"===r||'"'===r){for(var i=e.length,a=n,s=1;s+a<i;s++)switch(e.charAt(s+a)){case"\\":s++;continue;case"\r":case"\n":break;case r:var o=e.substr(a,s+1);return t||0===t?[r,o]:(p(s+1),o)}return null}},u.$parseUntil=function(t){var n,r="",i=null,a=!1,s=0,o=[],l=[],c=e.length,d=u.i,h=u.i,f=u.i,m=!0;n="string"==typeof t?function(e){return e===t}:function(e){return t.test(e)};do{var v=e.charAt(f);if(0===s&&n(v))(i=e.substr(h,f-h))?l.push(i):l.push(" "),i=l,p(f-d),m=!1;else{if(a){"*"===v&&"/"===e.charAt(f+1)&&(f++,s--,a=!1),f++;continue}switch(v){case"\\":f++,v=e.charAt(f),l.push(e.substr(h,f-h+1)),h=f+1;break;case"/":"*"===e.charAt(f+1)&&(f++,a=!0,s++);break;case"'":case'"':(r=u.$quoted(f))?(l.push(e.substr(h,f-h),r),h=(f+=r[1].length-1)+1):(p(f-d),i=v,m=!1);break;case"{":o.push("}"),s++;break;case"(":o.push(")"),s++;break;case"[":o.push("]"),s++;break;case"}":case")":case"]":var y=o.pop();v===y?s--:(p(f-d),i=y,m=!1)}++f>c&&(m=!1)}}while(m);return i||null},u.autoCommentAbsorb=!0,u.commentStore=[],u.finished=!1,u.peek=function(t){if("string"==typeof t){for(var n=0;n<t.length;n++)if(e.charAt(u.i+n)!==t.charAt(n))return!1;return!0}return t.test(a)},u.peekChar=function(t){return e.charAt(u.i)===t},u.currentChar=function(){return e.charAt(u.i)},u.prevChar=function(){return e.charAt(u.i-1)},u.getInput=function(){return e},u.peekNotNumeric=function(){var t=e.charCodeAt(u.i);return t>57||t<43||t===f||44===t},u.start=function(r,o,l){e=r,u.i=t=s=n=0,i=o?function(e,t){var n,r,i,a,s,o,u,l,c,d=e.length,h=0,f=0,p=[],m=0;function v(t){var n=s-m;n<512&&!t||!n||(p.push(e.slice(m,s+1)),m=s+1)}for(s=0;s<d;s++)if(!((u=e.charCodeAt(s))>=97&&u<=122||u<34))switch(u){case 40:f++,r=s;continue;case 41:if(--f<0)return t("missing opening `(`",s);continue;case 59:f||v();continue;case 123:h++,n=s;continue;case 125:if(--h<0)return t("missing opening `{`",s);h||f||v();continue;case 92:if(s<d-1){s++;continue}return t("unescaped `\\`",s);case 34:case 39:case 96:for(c=0,o=s,s+=1;s<d;s++)if(!((l=e.charCodeAt(s))>96)){if(l==u){c=1;break}if(92==l){if(s==d-1)return t("unescaped `\\`",s);s++}}if(c)continue;return t("unmatched `".concat(String.fromCharCode(u),"`"),o);case 47:if(f||s==d-1)continue;if(47==(l=e.charCodeAt(s+1)))for(s+=2;s<d&&(!((l=e.charCodeAt(s))<=13)||10!=l&&13!=l);s++);else if(42==l){for(i=o=s,s+=2;s<d-1&&(125==(l=e.charCodeAt(s))&&(a=s),42!=l||47!=e.charCodeAt(s+1));s++);if(s==d-1)return t("missing closing `*/`",o);s++}continue;case 42:if(s<d-1&&47==e.charCodeAt(s+1))return t("unmatched `/*`",s);continue}return 0!==h?t(i>n&&a>i?"missing closing `}` or `*/`":"missing closing `}`",n):0!==f?t("missing closing `)`",r):(v(!0),p)}(r,l):[r],a=i[0],p(0)},u.end=function(){var t,i=u.i>=e.length;return u.i<n&&(t=r,u.i=n),{isFinished:i,furthest:u.i,furthestPossibleErrorMessage:t,furthestReachedEnd:u.i>=e.length-1,furthestChar:e[u.i]}},u},ze=function e(t,n,r){var i,a=We();function s(e,t){throw new D({index:a.i,filename:r.filename,type:t||"Syntax",message:e},n)}function o(e,t){var n=e instanceof Function?e.call(i):a.$re(e);if(n)return n;s(t||("string"==typeof e?"expected '".concat(e,"' got '").concat(a.currentChar(),"'"):"unexpected token"))}function u(e,t){if(a.$char(e))return e;s(t||"expected '".concat(e,"' got '").concat(a.currentChar(),"'"))}function l(e){var t=r.filename;return{lineNumber:L(e,a.getInput()).line+1,fileName:t}}return{parserInput:a,imports:n,fileInfo:r,parseNode:function(e,t,r,s,o){var u,l=[],c=a;try{c.start(e,!1,function(e,t){o({message:e,index:t+r})});for(var d,h,f=0;d=t[f];f++)if(h=c.i,u=i[d]()){try{u._index=h+r,u._fileInfo=s}catch(e){}l.push(u)}else l.push(null);c.end().isFinished?o(null,l):o(!0,null)}catch(e){throw new D({index:e.index+r,message:e.message},n,s.filename)}},parse:function(i,s,o){var u,l,c,d,h=null,f="";if(l=o&&o.globalVars?"".concat(e.serializeVars(o.globalVars),"\n"):"",c=o&&o.modifyVars?"\n".concat(e.serializeVars(o.modifyVars)):"",t.pluginManager)for(var p=t.pluginManager.getPreProcessors(),m=0;m<p.length;m++)i=p[m].process(i,{context:t,imports:n,fileInfo:r});(l||o&&o.banner)&&(f=(o&&o.banner?o.banner:"")+l,(d=n.contentsIgnoredChars)[r.filename]=d[r.filename]||0,d[r.filename]+=f.length),i=f+(i=i.replace(/\r\n?/g,"\n")).replace(/^\uFEFF/,"")+c,n.contents[r.filename]=i;try{a.start(i,t.chunkInput,function(e,t){throw new D({index:t,type:"Parse",message:e,filename:r.filename},n)}),Ae.Node.prototype.parse=this,u=new Ae.Ruleset(null,this.parsers.primary()),Ae.Node.prototype.rootNode=u,u.root=!0,u.firstRoot=!0,u.functionRegistry=Q.inherit()}catch(e){return s(new D(e,n,r.filename))}var v=a.end();if(!v.isFinished){var y=v.furthestPossibleErrorMessage;y||(y="Unrecognised input","}"===v.furthestChar?y+=". Possibly missing opening '{'":")"===v.furthestChar?y+=". Possibly missing opening '('":v.furthestReachedEnd&&(y+=". Possibly missing something")),h=new D({type:"Parse",message:y,index:v.furthest,filename:r.filename},n)}var g=function(e){return(e=h||e||n.error)?(e instanceof D||(e=new D(e,n,r.filename)),s(e)):s(null,u)};if(!1===t.processImports)return g();new qe.ImportVisitor(n,g).run(u)},parsers:i={primary:function(){for(var e,t=this.mixin,n=[];;){for(;e=this.comment();)n.push(e);if(a.finished)break;if(a.peek("}"))break;if(e=this.extendRule())n=n.concat(e);else if(e=t.definition()||this.declaration()||this.ruleset()||t.call(!1,!1)||this.variableCall()||this.entities.call()||this.atrule())n.push(e);else{for(var r=!1;a.$char(";");)r=!0;if(!r)break}}return n},comment:function(){if(a.commentStore.length){var e=a.commentStore.shift();return new Ae.Comment(e.text,e.isLineComment,e.index,r)}},entities:{mixinLookup:function(){return i.mixin.call(!0,!0)},quoted:function(e){var t,n=a.i,i=!1;if(a.save(),a.$char("~"))i=!0;else if(e)return void a.restore();if(t=a.$quoted())return a.forget(),new Ae.Quoted(t.charAt(0),t.substr(1,t.length-2),i,n,r);a.restore()},keyword:function(){var e=a.$char("%")||a.$re(/^\[?(?:[\w-]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+\]?/);if(e)return Ae.Color.fromKeyword(e)||new Ae.Keyword(e)},call:function(){var e,t,n,i=a.i;if(!a.peek(/^url\(/i))if(a.save(),e=a.$re(/^([\w-]+|%|progid:[\w\.]+)\(/)){if(e=e[1],(n=this.customFuncCall(e))&&(t=n.parse())&&n.stop)return a.forget(),t;if(t=this.arguments(t),a.$char(")"))return a.forget(),new Ae.Call(e,t,i,r);a.restore("Could not parse call arguments or missing ')'")}else a.forget()},customFuncCall:function(e){return{alpha:t(i.ieAlpha,!0),boolean:t(n),if:t(n)}[e.toLowerCase()];function t(e,t){return{parse:e,stop:t}}function n(){return[o(i.condition,"expected condition")]}},arguments:function(e){var t,n,r=e||[],s=[];for(a.save();;){if(e)e=!1;else{if(!(n=i.detachedRuleset()||this.assignment()||i.expression()))break;n.value&&1==n.value.length&&(n=n.value[0]),r.push(n)}a.$char(",")||(a.$char(";")||t)&&(t=!0,n=r.length<1?r[0]:new Ae.Value(r),s.push(n),r=[])}return a.forget(),t?s:r},literal:function(){return this.dimension()||this.color()||this.quoted()||this.unicodeDescriptor()},assignment:function(){var e,t;if(a.save(),e=a.$re(/^\w+(?=\s?=)/i))if(a.$char("=")){if(t=i.entity())return a.forget(),new Ae.Assignment(e,t);a.restore()}else a.restore();else a.restore()},url:function(){var e,t=a.i;if(a.autoCommentAbsorb=!1,a.$str("url("))return e=this.quoted()||this.variable()||this.property()||a.$re(/^(?:(?:\\[\(\)'"])|[^\(\)'"])+/)||"",a.autoCommentAbsorb=!0,u(")"),new Ae.URL(null!=e.value||e instanceof Ae.Variable||e instanceof Ae.Property?e:new Ae.Anonymous(e,t),t,r);a.autoCommentAbsorb=!0},variable:function(){var e,t,n=a.i;if(a.save(),"@"===a.currentChar()&&(t=a.$re(/^@@?[\w-]+/))){if("("===(e=a.currentChar())||"["===e&&!a.prevChar().match(/^\s/)){var s=i.variableCall(t);if(s)return a.forget(),s}return a.forget(),new Ae.Variable(t,n,r)}a.restore()},variableCurly:function(){var e,t=a.i;if("@"===a.currentChar()&&(e=a.$re(/^@\{([\w-]+)\}/)))return new Ae.Variable("@".concat(e[1]),t,r)},property:function(){var e,t=a.i;if("$"===a.currentChar()&&(e=a.$re(/^\$[\w-]+/)))return new Ae.Property(e,t,r)},propertyCurly:function(){var e,t=a.i;if("$"===a.currentChar()&&(e=a.$re(/^\$\{([\w-]+)\}/)))return new Ae.Property("$".concat(e[1]),t,r)},color:function(){var e;if(a.save(),"#"===a.currentChar()&&(e=a.$re(/^#([A-Fa-f0-9]{8}|[A-Fa-f0-9]{6}|[A-Fa-f0-9]{3,4})([\w.#\[])?/))&&!e[2])return a.forget(),new Ae.Color(e[1],void 0,e[0]);a.restore()},colorKeyword:function(){a.save();var e=a.autoCommentAbsorb;a.autoCommentAbsorb=!1;var t=a.$re(/^[_A-Za-z-][_A-Za-z0-9-]+/);if(a.autoCommentAbsorb=e,t){a.restore();var n=Ae.Color.fromKeyword(t);return n?(a.$str(t),n):void 0}a.forget()},dimension:function(){if(!a.peekNotNumeric()){var e=a.$re(/^([+-]?\d*\.?\d+)(%|[a-z_]+)?/i);return e?new Ae.Dimension(e[1],e[2]):void 0}},unicodeDescriptor:function(){var e;if(e=a.$re(/^U\+[0-9a-fA-F?]+(\-[0-9a-fA-F?]+)?/))return new Ae.UnicodeDescriptor(e[0])},javascript:function(){var e,t=a.i;a.save();var n=a.$char("~");if(a.$char("`")){if(e=a.$re(/^[^`]*`/))return a.forget(),new Ae.JavaScript(e.substr(0,e.length-1),Boolean(n),t,r);a.restore("invalid javascript definition")}else a.restore()}},variable:function(){var e;if("@"===a.currentChar()&&(e=a.$re(/^(@[\w-]+)\s*:/)))return e[1]},variableCall:function(e){var t,n,s=a.i,o=!!e,u=e;if(a.save(),u||"@"===a.currentChar()&&(u=a.$re(/^(@[\w-]+)(\(\s*\))?/))){if(!(t=this.mixin.ruleLookups())&&(o&&"()"!==a.$str("()")||"()"!==u[2]))return void a.restore("Missing '[...]' lookup in variable call");o||(u=u[1]),t&&i.important()&&(n=!0);var l=new Ae.VariableCall(u,s,r);return!o&&i.end()?(a.forget(),l):(a.forget(),new Ae.NamespaceValue(l,t,n,s,r))}a.restore()},extend:function(e){var t,n,i,u,l,c=a.i;if(a.$str(e?"&:extend(":":extend(")){do{for(i=null,t=null;!(i=a.$re(/^(all)(?=\s*(\)|,))/))&&(n=this.element());)t?t.push(n):t=[n];i=i&&i[1],t||s("Missing target selector for :extend()."),l=new Ae.Extend(new Ae.Selector(t),i,c,r),u?u.push(l):u=[l]}while(a.$char(","));return o(/^\)/),e&&o(/^;/),u}},extendRule:function(){return this.extend(!0)},mixin:{call:function(e,t){var n,s,o,l,c=a.currentChar(),d=!1,h=a.i;if("."===c||"#"===c){if(a.save(),s=this.elements()){if(a.$char("(")&&(o=this.args(!0).args,u(")"),l=!0),!1!==t&&(n=this.ruleLookups()),!0===t&&!n)return void a.restore();if(e&&!n&&!l)return void a.restore();if(!e&&i.important()&&(d=!0),e||i.end()){a.forget();var f=new Ae.mixin.Call(s,o,h,r,!n&&d);return n?new Ae.NamespaceValue(f,n,d):f}}a.restore()}},elements:function(){for(var e,t,n,i,s,o=/^[#.](?:[\w-]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+/;s=a.i,t=a.$re(o);)i=new Ae.Element(n,t,!1,s,r),e?e.push(i):e=[i],n=a.$char(">");return e},args:function(e){var t,n,r,o,u,l,c,d=i.entities,h={args:null,variadic:!1},f=[],p=[],m=[],v=!0;for(a.save();;){if(e)l=i.detachedRuleset()||i.expression();else{if(a.commentStore.length=0,a.$str("...")){h.variadic=!0,a.$char(";")&&!t&&(t=!0),(t?p:m).push({variadic:!0});break}l=d.variable()||d.property()||d.literal()||d.keyword()||this.call(!0)}if(!l||!v)break;o=null,l.throwAwayComments&&l.throwAwayComments(),u=l;var y=null;if(e?l.value&&1==l.value.length&&(y=l.value[0]):y=l,y&&(y instanceof Ae.Variable||y instanceof Ae.Property))if(a.$char(":")){if(f.length>0&&(t&&s("Cannot mix ; and , as delimiter types"),n=!0),!(u=i.detachedRuleset()||i.expression())){if(!e)return a.restore(),h.args=[],h;s("could not understand value for named argument")}o=r=y.name}else if(a.$str("...")){if(!e){h.variadic=!0,a.$char(";")&&!t&&(t=!0),(t?p:m).push({name:l.name,variadic:!0});break}c=!0}else e||(r=o=y.name,u=null);u&&f.push(u),m.push({name:o,value:u,expand:c}),a.$char(",")?v=!0:((v=";"===a.$char(";"))||t)&&(n&&s("Cannot mix ; and , as delimiter types"),t=!0,f.length>1&&(u=new Ae.Value(f)),p.push({name:r,value:u,expand:c}),r=null,f=[],n=!1)}return a.forget(),h.args=t?p:m,h},definition:function(){var e,t,n,r,s=[],u=!1;if(!("."!==a.currentChar()&&"#"!==a.currentChar()||a.peek(/^[^{]*\}/)))if(a.save(),t=a.$re(/^([#.](?:[\w-]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+)\s*\(/)){e=t[1];var l=this.args(!1);if(s=l.args,u=l.variadic,!a.$char(")"))return void a.restore("Missing closing ')'");if(a.commentStore.length=0,a.$str("when")&&(r=o(i.conditions,"expected condition")),n=i.block())return a.forget(),new Ae.mixin.Definition(e,s,n,r,u);a.restore()}else a.forget()},ruleLookups:function(){var e,t=[];if("["===a.currentChar()){for(;;){if(a.save(),!(e=this.lookupValue())&&""!==e){a.restore();break}t.push(e),a.forget()}return t.length>0?t:void 0}},lookupValue:function(){if(a.save(),a.$char("[")){var e=a.$re(/^(?:[@$]{0,2})[_a-zA-Z0-9-]*/);if(a.$char("]"))return e||""===e?(a.forget(),e):void a.restore();a.restore()}else a.restore()}},entity:function(){var e=this.entities;return this.comment()||e.literal()||e.variable()||e.url()||e.property()||e.call()||e.keyword()||this.mixin.call(!0)||e.javascript()},end:function(){return a.$char(";")||a.peek("}")},ieAlpha:function(){var e;if(a.$re(/^opacity=/i))return(e=a.$re(/^\d+/))||(e=o(i.entities.variable,"Could not parse alpha"),e="@{".concat(e.name.slice(1),"}")),u(")"),new Ae.Quoted("","alpha(opacity=".concat(e,")"))},element:function(){var e,t,n,i=a.i;if(t=this.combinator(),(e=a.$re(/^(?:\d+\.\d+|\d+)%/)||a.$re(/^(?:[.#]?|:*)(?:[\w-]|[^\x00-\x9f]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+/)||a.$char("*")||a.$char("&")||this.attribute()||a.$re(/^\([^&()@]+\)/)||a.$re(/^[\.#:](?=@)/)||this.entities.variableCurly())||(a.save(),a.$char("(")?(n=this.selector(!1))&&a.$char(")")?(e=new Ae.Paren(n),a.forget()):a.restore("Missing closing ')'"):a.forget()),e)return new Ae.Element(t,e,e instanceof Ae.Variable,i,r)},combinator:function(){var e=a.currentChar();if("/"===e){a.save();var t=a.$re(/^\/[a-z]+\//i);if(t)return a.forget(),new Ae.Combinator(t);a.restore()}if(">"===e||"+"===e||"~"===e||"|"===e||"^"===e){for(a.i++,"^"===e&&"^"===a.currentChar()&&(e="^^",a.i++);a.isWhitespace();)a.i++;return new Ae.Combinator(e)}return a.isWhitespace(-1)?new Ae.Combinator(" "):new Ae.Combinator(null)},selector:function(e){var t,n,i,u,l,c,d,h=a.i;for(e=!1!==e;(e&&(n=this.extend())||e&&(c=a.$str("when"))||(u=this.element()))&&(c?d=o(this.conditions,"expected condition"):d?s("CSS guard can only be used at the end of selector"):n?l=l?l.concat(n):n:(l&&s("Extend can only be used at the end of selector"),i=a.currentChar(),t?t.push(u):t=[u],u=null),"{"!==i&&"}"!==i&&";"!==i&&","!==i&&")"!==i););if(t)return new Ae.Selector(t,l,d,h,r);l&&s("Extend must be used to extend a selector, it cannot be used on its own")},selectors:function(){for(var e,t;(e=this.selector())&&(t?t.push(e):t=[e],a.commentStore.length=0,e.condition&&t.length>1&&s("Guards are only currently allowed on a single selector."),a.$char(","));)e.condition&&s("Guards are only currently allowed on a single selector."),a.commentStore.length=0;return t},attribute:function(){if(a.$char("[")){var e,t,n,r=this.entities;return(e=r.variableCurly())||(e=o(/^(?:[_A-Za-z0-9-\*]*\|)?(?:[_A-Za-z0-9-]|\\.)+/)),(n=a.$re(/^[|~*$^]?=/))&&(t=r.quoted()||a.$re(/^[0-9]+%/)||a.$re(/^[\w-]+/)||r.variableCurly()),u("]"),new Ae.Attribute(e,n,t)}},block:function(){var e;if(a.$char("{")&&(e=this.primary())&&a.$char("}"))return e},blockRuleset:function(){var e=this.block();return e&&(e=new Ae.Ruleset(null,e)),e},detachedRuleset:function(){var e,t,n;if(a.save(),!a.$re(/^[.#]\(/)||(t=(e=this.mixin.args(!1)).args,n=e.variadic,a.$char(")"))){var r=this.blockRuleset();if(r)return a.forget(),t?new Ae.mixin.Definition(null,t,r,null,n):new Ae.DetachedRuleset(r);a.restore()}else a.restore()},ruleset:function(){var e,n,r;if(a.save(),t.dumpLineNumbers&&(r=l(a.i)),(e=this.selectors())&&(n=this.block())){a.forget();var i=new Ae.Ruleset(e,n,t.strictImports);return t.dumpLineNumbers&&(i.debugInfo=r),i}a.restore()},declaration:function(){var e,t,n,i,s,o,u=a.i,l=a.currentChar();if("."!==l&&"#"!==l&&"&"!==l&&":"!==l)if(a.save(),e=this.variable()||this.ruleProperty()){if((o="string"==typeof e)&&(t=this.detachedRuleset())&&(n=!0),a.commentStore.length=0,!t){if(s=!o&&e.length>1&&e.pop().value,t=e[0].value&&"--"===e[0].value.slice(0,2)?this.permissiveValue():this.anonymousValue())return a.forget(),new Ae.Declaration(e,t,!1,s,u,r);t||(t=this.value()),t?i=this.important():o&&(t=this.permissiveValue())}if(t&&(this.end()||n))return a.forget(),new Ae.Declaration(e,t,i,s,u,r);a.restore()}else a.restore()},anonymousValue:function(){var e=a.i,t=a.$re(/^([^.#@\$+\/'"*`(;{}-]*);/);if(t)return new Ae.Anonymous(t[1],e)},permissiveValue:function(e){var t,n,i,o,u=e||";",l=a.i,c=[];function d(){var e=a.currentChar();return"string"==typeof u?e===u:u.test(e)}if(!d()){o=[];do{(n=this.comment())?o.push(n):(n=this.entity())&&o.push(n)}while(n);if(i=d(),o.length>0){if(o=new Ae.Expression(o),i)return o;c.push(o)," "===a.prevChar()&&c.push(new Ae.Anonymous(" ",l))}if(a.save(),o=a.$parseUntil(u)){if("string"==typeof o&&s("Expected '".concat(o,"'"),"Parse"),1===o.length&&" "===o[0])return a.forget(),new Ae.Anonymous("",l);var h;for(t=0;t<o.length;t++)if(h=o[t],Array.isArray(h))c.push(new Ae.Quoted(h[0],h[1],!0,l,r));else{t===o.length-1&&(h=h.trim());var f=new Ae.Quoted("'",h,!0,l,r);f.variableRegex=/@([\w-]+)/g,f.propRegex=/\$([\w-]+)/g,c.push(f)}return a.forget(),new Ae.Expression(c,!0)}a.restore()}},import:function(){var e,t,n=a.i,i=a.$re(/^@import?\s+/);if(i){var o=(i?this.importOptions():null)||{};if(e=this.entities.quoted()||this.entities.url())return t=this.mediaFeatures(),a.$char(";")||(a.i=n,s("missing semi-colon or unrecognised media features on import")),t=t&&new Ae.Value(t),new Ae.Import(e,t,o,n,r);a.i=n,s("malformed import statement")}},importOptions:function(){var e,t,n,r={};if(!a.$char("("))return null;do{if(e=this.importOption()){switch(n=!0,t=e){case"css":t="less",n=!1;break;case"once":t="multiple",n=!1}if(r[t]=n,!a.$char(","))break}}while(e);return u(")"),r},importOption:function(){var e=a.$re(/^(less|css|multiple|once|inline|reference|optional)/);if(e)return e[1]},mediaFeature:function(){var e,t,n=this.entities,i=[];a.save();do{(e=n.keyword()||n.variable()||n.mixinLookup())?i.push(e):a.$char("(")&&(t=this.property(),e=this.value(),a.$char(")")?t&&e?i.push(new Ae.Paren(new Ae.Declaration(t,e,null,null,a.i,r,!0))):e?i.push(new Ae.Paren(e)):s("badly formed media feature definition"):s("Missing closing ')'","Parse"))}while(e);if(a.forget(),i.length>0)return new Ae.Expression(i)},mediaFeatures:function(){var e,t=this.entities,n=[];do{if(e=this.mediaFeature()){if(n.push(e),!a.$char(","))break}else if((e=t.variable()||t.mixinLookup())&&(n.push(e),!a.$char(",")))break}while(e);return n.length>0?n:null},media:function(){var e,n,i,o,u=a.i;if(t.dumpLineNumbers&&(o=l(u)),a.save(),a.$str("@media"))return e=this.mediaFeatures(),(n=this.block())||s("media definitions require block statements after any features"),a.forget(),i=new Ae.Media(n,e,u,r),t.dumpLineNumbers&&(i.debugInfo=o),i;a.restore()},plugin:function(){var e,t,n,i=a.i;if(a.$re(/^@plugin?\s+/)){if(n=(t=this.pluginArgs())?{pluginArgs:t,isPlugin:!0}:{isPlugin:!0},e=this.entities.quoted()||this.entities.url())return a.$char(";")||(a.i=i,s("missing semi-colon on @plugin")),new Ae.Import(e,null,n,i,r);a.i=i,s("malformed @plugin statement")}},pluginArgs:function(){if(a.save(),!a.$char("("))return a.restore(),null;var e=a.$re(/^\s*([^\);]+)\)\s*/);return e[1]?(a.forget(),e[1].trim()):(a.restore(),null)},atrule:function(){var e,n,i,o,u,c,d,h=a.i,f=!0,p=!0;if("@"===a.currentChar()){if(n=this.import()||this.plugin()||this.media())return n;if(a.save(),e=a.$re(/^@[a-z-]+/)){switch(o=e,"-"==e.charAt(1)&&e.indexOf("-",2)>0&&(o="@".concat(e.slice(e.indexOf("-",2)+1))),o){case"@charset":u=!0,f=!1;break;case"@namespace":c=!0,f=!1;break;case"@keyframes":case"@counter-style":u=!0;break;case"@document":case"@supports":d=!0,p=!1;break;default:d=!0}if(a.commentStore.length=0,u?(n=this.entity())||s("expected ".concat(e," identifier")):c?(n=this.expression())||s("expected ".concat(e," expression")):d&&(n=this.permissiveValue(/^[{;]/),f="{"===a.currentChar(),n?n.value||(n=null):f||";"===a.currentChar()||s("".concat(e," rule is missing block or ending semi-colon"))),f&&(i=this.blockRuleset()),i||!f&&n&&a.$char(";"))return a.forget(),new Ae.AtRule(e,n,i,h,r,t.dumpLineNumbers?l(h):null,p);a.restore("at-rule options not recognised")}}},value:function(){var e,t=[],n=a.i;do{if((e=this.expression())&&(t.push(e),!a.$char(",")))break}while(e);if(t.length>0)return new Ae.Value(t,n)},important:function(){if("!"===a.currentChar())return a.$re(/^! *important/)},sub:function(){var e,t;if(a.save(),a.$char("("))return(e=this.addition())&&a.$char(")")?(a.forget(),(t=new Ae.Expression([e])).parens=!0,t):void a.restore("Expected ')'");a.restore()},multiplication:function(){var e,t,n,r,i;if(e=this.operand()){for(i=a.isWhitespace(-1);!a.peek(/^\/[*\/]/);){if(a.save(),!(n=a.$char("/")||a.$char("*")||a.$str("./"))){a.forget();break}if(!(t=this.operand())){a.restore();break}a.forget(),e.parensInOp=!0,t.parensInOp=!0,r=new Ae.Operation(n,[r||e,t],i),i=a.isWhitespace(-1)}return r||e}},addition:function(){var e,t,n,r,i;if(e=this.multiplication()){for(i=a.isWhitespace(-1);(n=a.$re(/^[-+]\s+/)||!i&&(a.$char("+")||a.$char("-")))&&(t=this.multiplication());)e.parensInOp=!0,t.parensInOp=!0,r=new Ae.Operation(n,[r||e,t],i),i=a.isWhitespace(-1);return r||e}},conditions:function(){var e,t,n,r=a.i;if(e=this.condition(!0)){for(;a.peek(/^,\s*(not\s*)?\(/)&&a.$char(",")&&(t=this.condition(!0));)n=new Ae.Condition("or",n||e,t,r);return n||e}},condition:function(e){var t,n,r;if(t=this.conditionAnd(e)){if(n=a.$str("or")){if(!(r=this.condition(e)))return;t=new Ae.Condition(n,t,r)}return t}},conditionAnd:function(e){var t,n,r,i,s=this;if(t=(i=s.negatedCondition(e)||s.parenthesisCondition(e))||e?i:s.atomicCondition(e)){if(n=a.$str("and")){if(!(r=this.conditionAnd(e)))return;t=new Ae.Condition(n,t,r)}return t}},negatedCondition:function(e){if(a.$str("not")){var t=this.parenthesisCondition(e);return t&&(t.negate=!t.negate),t}},parenthesisCondition:function(e){var t;if(a.save(),a.$str("(")){if(t=function(t){var n;if(a.save(),n=t.condition(e)){if(a.$char(")"))return a.forget(),n;a.restore()}else a.restore()}(this))return a.forget(),t;if(t=this.atomicCondition(e)){if(a.$char(")"))return a.forget(),t;a.restore("expected ')' got '".concat(a.currentChar(),"'"))}else a.restore()}else a.restore()},atomicCondition:function(e){var t,n,r,i,o=this.entities,u=a.i;function l(){return this.addition()||o.keyword()||o.quoted()||o.mixinLookup()}if(t=(l=l.bind(this))())return a.$char(">")?i=a.$char("=")?">=":">":a.$char("<")?i=a.$char("=")?"<=":"<":a.$char("=")&&(i=a.$char(">")?"=>":a.$char("<")?"=<":"="),i?(n=l())?r=new Ae.Condition(i,t,n,u,!1):s("expected expression"):r=new Ae.Condition("=",t,new Ae.Keyword("true"),u,!1),r},operand:function(){var e,t=this.entities;a.peek(/^-[@\$\(]/)&&(e=a.$char("-"));var n=this.sub()||t.dimension()||t.color()||t.variable()||t.property()||t.call()||t.quoted(!0)||t.colorKeyword()||t.mixinLookup();return e&&(n.parensInOp=!0,n=new Ae.Negative(n)),n},expression:function(){var e,t,n=[],r=a.i;do{(e=this.comment())?n.push(e):(e=this.addition()||this.entity())&&(n.push(e),a.peek(/^\/[\/*]/)||(t=a.$char("/"))&&n.push(new Ae.Anonymous(t,r)))}while(e);if(n.length>0)return new Ae.Expression(n)},property:function(){var e=a.$re(/^(\*?-?[_a-zA-Z0-9-]+)\s*:/);if(e)return e[1]},ruleProperty:function(){var e,t,n=[],i=[];a.save();var s=a.$re(/^([_a-zA-Z0-9-]+)\s*:/);if(s)return n=[new Ae.Keyword(s[1])],a.forget(),n;function o(e){var t=a.i,r=a.$re(e);if(r)return i.push(t),n.push(r[1])}for(o(/^(\*?)/);o(/^((?:[\w-]+)|(?:[@\$]\{[\w-]+\}))/););if(n.length>1&&o(/^((?:\+_|\+)?)\s*:/)){for(a.forget(),""===n[0]&&(n.shift(),i.shift()),t=0;t<n.length;t++)e=n[t],n[t]="@"!==e.charAt(0)&&"$"!==e.charAt(0)?new Ae.Keyword(e):"@"===e.charAt(0)?new Ae.Variable("@".concat(e.slice(2,-1)),i[t],r):new Ae.Property("$".concat(e.slice(2,-1)),i[t],r);return n}a.restore()}}}};ze.serializeVars=function(e){var t="";for(var n in e)if(Object.hasOwnProperty.call(e,n)){var r=e[n];t+="".concat(("@"===n[0]?"":"@")+n,": ").concat(r).concat(";"===String(r).slice(-1)?"":";")}return t};var Ye,Xe={boolean:function(e){return e?V.True:V.False},if:function(e,t,n){return e?t:n||new j}};function $e(e){return Math.min(1,Math.max(0,e))}function Ze(e,t){var n=Ye.hsla(t.h,t.s,t.l,t.a);if(n)return e.value&&/^(rgb|hsl)/.test(e.value)?n.value=e.value:n.value="rgb",n}function Qe(e){if(e.toHSL)return e.toHSL();throw new Error("Argument cannot be evaluated to a color")}function Je(e){if(e.toHSV)return e.toHSV();throw new Error("Argument cannot be evaluated to a color")}function et(e){if(e instanceof ie)return parseFloat(e.unit.is("%")?e.value/100:e.value);if("number"==typeof e)return e;throw{type:"Argument",message:"color functions take numbers as parameters"}}var tt=Ye={rgb:function(e,t,n){var r=Ye.rgba(e,t,n,1);if(r)return r.value="rgb",r},rgba:function(e,t,n,r){try{if(e instanceof _)return r=t?et(t):e.alpha,new _(e.rgb,r,"rgba");var i=[e,t,n].map(function(e){return n=255,(t=e)instanceof ie&&t.unit.is("%")?parseFloat(t.value*n/100):et(t);var t,n});return r=et(r),new _(i,r,"rgba")}catch(e){}},hsl:function(e,t,n){var r=Ye.hsla(e,t,n,1);if(r)return r.value="hsl",r},hsla:function(e,t,n,r){try{var i,a,s=function(e){return 6*(e=e<0?e+1:e>1?e-1:e)<1?i+(a-i)*e*6:2*e<1?a:3*e<2?i+(a-i)*(2/3-e)*6:i};if(e instanceof _)return r=t?et(t):e.alpha,new _(e.rgb,r,"hsla");e=et(e)%360/360,t=$e(et(t)),n=$e(et(n)),r=$e(et(r)),i=2*n-(a=n<=.5?n*(t+1):n+t-n*t);var o=[255*s(e+1/3),255*s(e),255*s(e-1/3)];return r=et(r),new _(o,r,"hsla")}catch(e){}},hsv:function(e,t,n){return Ye.hsva(e,t,n,1)},hsva:function(e,t,n,r){var i,a;e=et(e)%360/360*360,t=et(t),n=et(n),r=et(r);var s=[n,n*(1-t),n*(1-(a=e/60-(i=Math.floor(e/60%6)))*t),n*(1-(1-a)*t)],o=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]];return Ye.rgba(255*s[o[i][0]],255*s[o[i][1]],255*s[o[i][2]],r)},hue:function(e){return new ie(Qe(e).h)},saturation:function(e){return new ie(100*Qe(e).s,"%")},lightness:function(e){return new ie(100*Qe(e).l,"%")},hsvhue:function(e){return new ie(Je(e).h)},hsvsaturation:function(e){return new ie(100*Je(e).s,"%")},hsvvalue:function(e){return new ie(100*Je(e).v,"%")},red:function(e){return new ie(e.rgb[0])},green:function(e){return new ie(e.rgb[1])},blue:function(e){return new ie(e.rgb[2])},alpha:function(e){return new ie(Qe(e).a)},luma:function(e){return new ie(e.luma()*e.alpha*100,"%")},luminance:function(e){var t=.2126*e.rgb[0]/255+.7152*e.rgb[1]/255+.0722*e.rgb[2]/255;return new ie(t*e.alpha*100,"%")},saturate:function(e,t,n){if(!e.rgb)return null;var r=Qe(e);return void 0!==n&&"relative"===n.value?r.s+=r.s*t.value/100:r.s+=t.value/100,r.s=$e(r.s),Ze(e,r)},desaturate:function(e,t,n){var r=Qe(e);return void 0!==n&&"relative"===n.value?r.s-=r.s*t.value/100:r.s-=t.value/100,r.s=$e(r.s),Ze(e,r)},lighten:function(e,t,n){var r=Qe(e);return void 0!==n&&"relative"===n.value?r.l+=r.l*t.value/100:r.l+=t.value/100,r.l=$e(r.l),Ze(e,r)},darken:function(e,t,n){var r=Qe(e);return void 0!==n&&"relative"===n.value?r.l-=r.l*t.value/100:r.l-=t.value/100,r.l=$e(r.l),Ze(e,r)},fadein:function(e,t,n){var r=Qe(e);return void 0!==n&&"relative"===n.value?r.a+=r.a*t.value/100:r.a+=t.value/100,r.a=$e(r.a),Ze(e,r)},fadeout:function(e,t,n){var r=Qe(e);return void 0!==n&&"relative"===n.value?r.a-=r.a*t.value/100:r.a-=t.value/100,r.a=$e(r.a),Ze(e,r)},fade:function(e,t){var n=Qe(e);return n.a=t.value/100,n.a=$e(n.a),Ze(e,n)},spin:function(e,t){var n=Qe(e),r=(n.h+t.value)%360;return n.h=r<0?360+r:r,Ze(e,n)},mix:function(e,t,n){n||(n=new ie(50));var r=n.value/100,i=2*r-1,a=Qe(e).a-Qe(t).a,s=((i*a==-1?i:(i+a)/(1+i*a))+1)/2,o=1-s,u=[e.rgb[0]*s+t.rgb[0]*o,e.rgb[1]*s+t.rgb[1]*o,e.rgb[2]*s+t.rgb[2]*o],l=e.alpha*r+t.alpha*(1-r);return new _(u,l)},greyscale:function(e){return Ye.desaturate(e,new ie(100))},contrast:function(e,t,n,r){if(!e.rgb)return null;if(void 0===n&&(n=Ye.rgba(255,255,255,1)),void 0===t&&(t=Ye.rgba(0,0,0,1)),t.luma()>n.luma()){var i=n;n=t,t=i}return r=void 0===r?.43:et(r),e.luma()<r?n:t},argb:function(e){return new j(e.toARGB())},color:function(e){if(e instanceof pe&&/^#([A-Fa-f0-9]{8}|[A-Fa-f0-9]{6}|[A-Fa-f0-9]{3,4})$/i.test(e.value)){var t=e.value.slice(1);return new _(t,void 0,"#".concat(t))}if(e instanceof _||(e=_.fromKeyword(e.value)))return e.value=void 0,e;throw{type:"Argument",message:"argument must be a color keyword or 3|4|6|8 digit hex e.g. #FFF"}},tint:function(e,t){return Ye.mix(Ye.rgb(255,255,255),e,t)},shade:function(e,t){return Ye.mix(Ye.rgb(0,0,0),e,t)}};function nt(e,t,n){var r,i,a,s,o=t.alpha,u=n.alpha,l=[];a=u+o*(1-u);for(var c=0;c<3;c++)s=e(r=t.rgb[c]/255,i=n.rgb[c]/255),a&&(s=(u*i+o*(r-u*(r+i-s)))/a),l[c]=255*s;return new _(l,a)}var rt={multiply:function(e,t){return e*t},screen:function(e,t){return e+t-e*t},overlay:function(e,t){return(e*=2)<=1?rt.multiply(e,t):rt.screen(e-1,t)},softlight:function(e,t){var n=1,r=e;return t>.5&&(r=1,n=e>.25?Math.sqrt(e):((16*e-12)*e+4)*e),e-(1-2*t)*r*(n-e)},hardlight:function(e,t){return rt.overlay(t,e)},difference:function(e,t){return Math.abs(e-t)},exclusion:function(e,t){return e+t-2*e*t},average:function(e,t){return(e+t)/2},negation:function(e,t){return 1-Math.abs(e+t-1)}};for(var it in rt)rt.hasOwnProperty(it)&&(nt[it]=nt.bind(null,rt[it]));var at=function(e){return Array.isArray(e.value)?e.value:Array(e)},st={_SELF:function(e){return e},extract:function(e,t){return t=t.value-1,at(e)[t]},length:function(e){return new ie(at(e).length)},range:function(e,t,n){var r,i,a=1,s=[];t?(i=t,r=e.value,n&&(a=n.value)):(r=1,i=e);for(var o=r;o<=i.value;o+=a)s.push(new ie(o,i.unit));return new ue(s)},each:function(e,t){var n,r,i=[];r=!e.value||e instanceof pe?e.ruleset?e.ruleset.rules:e.rules?e.rules:Array.isArray(e)?e:[e]:Array.isArray(e.value)?e.value:[e.value];var a="@value",s="@key",o="@index";t.params?(a=t.params[0]&&t.params[0].name,s=t.params[1]&&t.params[1].name,o=t.params[2]&&t.params[2].name,t=t.rules):t=t.ruleset;for(var u=0;u<r.length;u++){var l=void 0,c=void 0,d=r[u];d instanceof K?(l="string"==typeof d.name?d.name:d.name[0].value,c=d.value):(l=new ie(u+1),c=d),d instanceof q||(n=t.rules.slice(0),a&&n.push(new K(a,c,!1,!1,this.index,this.currentFileInfo)),o&&n.push(new K(o,new ie(u+1),!1,!1,this.index,this.currentFileInfo)),s&&n.push(new K(s,l,!1,!1,this.index,this.currentFileInfo)),i.push(new ee([new F([new C("","&")])],n,t.strictImports,t.visibilityInfo())))}return new ee([new F([new C("","&")])],i,t.strictImports,t.visibilityInfo()).eval(this.context)}},ot=function(e,t,n){if(!(n instanceof ie))throw{type:"Argument",message:"argument must be a number"};return null==t?t=n.unit:n=n.unify(),new ie(e(parseFloat(n.value)),t)},ut={ceil:null,floor:null,sqrt:null,abs:null,tan:"",sin:"",cos:"",atan:"rad",asin:"rad",acos:"rad"};for(var lt in ut)ut.hasOwnProperty(lt)&&(ut[lt]=ot.bind(null,Math[lt],ut[lt]));ut.round=function(e,t){var n=void 0===t?0:t.value;return ot(function(e){return e.toFixed(n)},null,e)};var ct,dt=function(e,t){switch((t=Array.prototype.slice.call(t)).length){case 0:throw{type:"Argument",message:"one or more arguments required"}}var n,r,i,a,s,o,u,l,c=[],d={};for(n=0;n<t.length;n++)if((i=t[n])instanceof ie)if(u=""!==(o=""===(a=""===i.unit.toString()&&void 0!==l?new ie(i.value,l).unify():i.unify()).unit.toString()&&void 0!==u?u:a.unit.toString())&&void 0===u||""!==o&&""===c[0].unify().unit.toString()?o:u,l=""!==o&&void 0===l?i.unit.toString():l,void 0!==(r=void 0!==d[""]&&""!==o&&o===u?d[""]:d[o]))s=""===c[r].unit.toString()&&void 0!==l?new ie(c[r].value,l).unify():c[r].unify(),(e&&a.value<s.value||!e&&a.value>s.value)&&(c[r]=i);else{if(void 0!==u&&o!==u)throw{type:"Argument",message:"incompatible types"};d[o]=c.length,c.push(i)}else Array.isArray(t[n].value)&&Array.prototype.push.apply(t,Array.prototype.slice.call(t[n].value));return 1==c.length?c[0]:(t=c.map(function(e){return e.toCSS(this.context)}).join(this.context.compress?",":", "),new j("".concat(e?"min":"max","(").concat(t,")")))},ht={min:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return dt(!0,t)},max:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return dt(!1,t)},convert:function(e,t){return e.convertTo(t.value)},pi:function(){return new ie(Math.PI)},mod:function(e,t){return new ie(e.value%t.value,e.unit)},pow:function(e,t){if("number"==typeof e&&"number"==typeof t)e=new ie(e),t=new ie(t);else if(!(e instanceof ie&&t instanceof ie))throw{type:"Argument",message:"arguments must be numbers"};return new ie(Math.pow(e.value,t.value),e.unit)},percentage:function(e){return ot(function(e){return 100*e},"%",e)}},ft={e:function(e){return new pe('"',e instanceof ge?e.evaluated:e.value,!0)},escape:function(e){return new j(encodeURI(e.value).replace(/=/g,"%3D").replace(/:/g,"%3A").replace(/#/g,"%23").replace(/;/g,"%3B").replace(/\(/g,"%28").replace(/\)/g,"%29"))},replace:function(e,t,n,r){var i=e.value;return n="Quoted"===n.type?n.value:n.toCSS(),i=i.replace(new RegExp(t.value,r?r.value:""),n),new pe(e.quote||"",i,e.escaped)},"%":function(e){for(var t=Array.prototype.slice.call(arguments,1),n=e.value,r=function(e){n=n.replace(/%[sda]/i,function(n){var r="Quoted"===t[e].type&&n.match(/s/i)?t[e].value:t[e].toCSS();return n.match(/[A-Z]$/)?encodeURIComponent(r):r})},i=0;i<t.length;i++)r(i);return n=n.replace(/%%/g,"%"),new pe(e.quote||"",n,e.escaped)}},pt=function(e,t){return e instanceof t?V.True:V.False},mt=function(e,t){if(void 0===t)throw{type:"Argument",message:"missing the required second argument to isunit."};if("string"!=typeof(t="string"==typeof t.value?t.value:t))throw{type:"Argument",message:"Second argument to isunit should be a unit or a string."};return e instanceof ie&&e.unit.is(t)?V.True:V.False},vt={isruleset:function(e){return pt(e,ne)},iscolor:function(e){return pt(e,_)},isnumber:function(e){return pt(e,ie)},isstring:function(e){return pt(e,pe)},iskeyword:function(e){return pt(e,V)},isurl:function(e){return pt(e,me)},ispixel:function(e){return mt(e,"px")},ispercentage:function(e){return mt(e,"%")},isem:function(e){return mt(e,"em")},isunit:mt,unit:function(e,t){if(!(e instanceof ie))throw{type:"Argument",message:"the first argument to unit must be a number".concat(e instanceof se?". Have you forgotten parenthesis?":"")};return t=t?t instanceof V?t.value:t.toCSS():"",new ie(e.value,t)},"get-unit":function(e){return new j(e.unit)}},yt=function(e){var t={functionRegistry:Q,functionCaller:le};return Q.addMultiple(Xe),Q.add("default",J.eval.bind(J)),Q.addMultiple(tt),Q.addMultiple(nt),Q.addMultiple(function(e){var t=function(e,t){return new me(t,e.index,e.currentFileInfo).eval(e.context)};return{"data-uri":function(n,r){r||(r=n,n=null);var i=n&&n.value,a=r.value,s=this.currentFileInfo,o=s.rewriteUrls?s.currentDirectory:s.entryPath,u=a.indexOf("#"),l="";-1!==u&&(l=a.slice(u),a=a.slice(0,u));var c=R(this.context);c.rawBuffer=!0;var d=e.getFileManager(a,o,c,e,!0);if(!d)return t(this,r);var h=!1;if(n)h=/;base64$/.test(i);else{if("image/svg+xml"===(i=e.mimeLookup(a)))h=!1;else{var f=e.charsetLookup(i);h=["US-ASCII","UTF-8"].indexOf(f)<0}h&&(i+=";base64")}var p=d.loadFileSync(a,o,c,e);if(!p.contents)return Le.warn("Skipped data-uri embedding of ".concat(a," because file not found")),t(this,r||n);var m=p.contents;if(h&&!e.encodeBase64)return t(this,r);m=h?e.encodeBase64(m):encodeURIComponent(m);var v="data:".concat(i,",").concat(m).concat(l);return new me(new pe('"'.concat(v,'"'),v,!1,this.index,this.currentFileInfo),this.index,this.currentFileInfo)}}}(e)),Q.addMultiple(st),Q.addMultiple(ut),Q.addMultiple(ht),Q.addMultiple(ft),Q.addMultiple({"svg-gradient":function(e){var t,n,r,i,a,s,o,u,l="linear",c='x="0" y="0" width="1" height="1"',d={compress:!1},h=e.toCSS(d);function f(){throw{type:"Argument",message:"svg-gradient expects direction, start_color [start_position], [color position,]..., end_color [end_position] or direction, color list"}}switch(2==arguments.length?(arguments[1].value.length<2&&f(),t=arguments[1].value):arguments.length<3?f():t=Array.prototype.slice.call(arguments,1),h){case"to bottom":n='x1="0%" y1="0%" x2="0%" y2="100%"';break;case"to right":n='x1="0%" y1="0%" x2="100%" y2="0%"';break;case"to bottom right":n='x1="0%" y1="0%" x2="100%" y2="100%"';break;case"to top right":n='x1="0%" y1="100%" x2="100%" y2="0%"';break;case"ellipse":case"ellipse at center":l="radial",n='cx="50%" cy="50%" r="75%"',c='x="-50" y="-50" width="101" height="101"';break;default:throw{type:"Argument",message:"svg-gradient direction must be 'to bottom', 'to right', 'to bottom right', 'to top right' or 'ellipse at center'"}}for(r='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1 1"><'.concat(l,'Gradient id="g" ').concat(n,">"),i=0;i<t.length;i+=1)t[i]instanceof ue?(a=t[i].value[0],s=t[i].value[1]):(a=t[i],s=void 0),a instanceof _&&((0===i||i+1===t.length)&&void 0===s||s instanceof ie)||f(),o=s?s.toCSS(d):0===i?"0%":"100%",u=a.alpha,r+='<stop offset="'.concat(o,'" stop-color="').concat(a.toRGB(),'"').concat(u<1?' stop-opacity="'.concat(u,'"'):"","/>");return r+="</".concat(l,"Gradient><rect ").concat(c,' fill="url(#g)" /></svg>'),r=encodeURIComponent(r),r="data:image/svg+xml,".concat(r),new me(new pe("'".concat(r,"'"),r,!1,this.index,this.currentFileInfo),this.index,this.currentFileInfo)}}),Q.addMultiple(vt),t},gt=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.variables,a=new W.Eval(n);"object"!==i(r)||Array.isArray(r)||(r=Object.keys(r).map(function(e){var t=r[e];return t instanceof Ae.Value||(t instanceof Ae.Expression||(t=new Ae.Expression([t])),t=new Ae.Value([t])),new Ae.Declaration("@".concat(e),t,!1,null,0)}),a.frames=[new Ae.Ruleset(null,r)]);var s,o,u=[new qe.JoinSelectorVisitor,new qe.MarkVisibleSelectorsVisitor(!0),new qe.ExtendVisitor,new qe.ToCSSVisitor({compress:Boolean(n.compress)})],l=[];if(n.pluginManager){o=n.pluginManager.visitor();for(var c=0;c<2;c++)for(o.first();s=o.get();)s.isPreEvalVisitor?0!==c&&-1!==l.indexOf(s)||(l.push(s),s.run(e)):0!==c&&-1!==u.indexOf(s)||(s.isPreVisitor?u.unshift(s):u.push(s))}for(t=e.eval(a),c=0;c<u.length;c++)u[c].run(t);if(n.pluginManager)for(o.first();s=o.get();)-1===u.indexOf(s)&&-1===l.indexOf(s)&&s.run(t);return t},_t=function(){function e(t){a(this,e),this.less=t,this.visitors=[],this.preProcessors=[],this.postProcessors=[],this.installedPlugins=[],this.fileManagers=[],this.iterator=-1,this.pluginCache={},this.Loader=new t.PluginLoader(t)}return o(e,[{key:"addPlugins",value:function(e){if(e)for(var t=0;t<e.length;t++)this.addPlugin(e[t])}},{key:"addPlugin",value:function(e,t,n){this.installedPlugins.push(e),t&&(this.pluginCache[t]=e),e.install&&e.install(this.less,this,n||this.less.functions.functionRegistry)}},{key:"get",value:function(e){return this.pluginCache[e]}},{key:"addVisitor",value:function(e){this.visitors.push(e)}},{key:"addPreProcessor",value:function(e,t){var n;for(n=0;n<this.preProcessors.length&&!(this.preProcessors[n].priority>=t);n++);this.preProcessors.splice(n,0,{preProcessor:e,priority:t})}},{key:"addPostProcessor",value:function(e,t){var n;for(n=0;n<this.postProcessors.length&&!(this.postProcessors[n].priority>=t);n++);this.postProcessors.splice(n,0,{postProcessor:e,priority:t})}},{key:"addFileManager",value:function(e){this.fileManagers.push(e)}},{key:"getPreProcessors",value:function(){for(var e=[],t=0;t<this.preProcessors.length;t++)e.push(this.preProcessors[t].preProcessor);return e}},{key:"getPostProcessors",value:function(){for(var e=[],t=0;t<this.postProcessors.length;t++)e.push(this.postProcessors[t].postProcessor);return e}},{key:"getVisitors",value:function(){return this.visitors}},{key:"visitor",value:function(){var e=this;return{first:function(){return e.iterator=-1,e.visitors[e.iterator]},get:function(){return e.iterator+=1,e.visitors[e.iterator]}}}},{key:"getFileManagers",value:function(){return this.fileManagers}}]),e}();function bt(e,t){return!t&&ct||(ct=new _t(e)),ct}var wt,Et,St=function(e,t){var n,r=function(e){return function(){function t(n){a(this,t),this._css=[],this._rootNode=n.rootNode,this._contentsMap=n.contentsMap,this._contentsIgnoredCharsMap=n.contentsIgnoredCharsMap,n.sourceMapFilename&&(this._sourceMapFilename=n.sourceMapFilename.replace(/\\/g,"/")),this._outputFilename=n.outputFilename,this.sourceMapURL=n.sourceMapURL,n.sourceMapBasepath&&(this._sourceMapBasepath=n.sourceMapBasepath.replace(/\\/g,"/")),n.sourceMapRootpath?(this._sourceMapRootpath=n.sourceMapRootpath.replace(/\\/g,"/"),"/"!==this._sourceMapRootpath.charAt(this._sourceMapRootpath.length-1)&&(this._sourceMapRootpath+="/")):this._sourceMapRootpath="",this._outputSourceFiles=n.outputSourceFiles,this._sourceMapGeneratorConstructor=e.getSourceMapGenerator(),this._lineNumber=0,this._column=0}return o(t,[{key:"removeBasepath",value:function(e){return this._sourceMapBasepath&&0===e.indexOf(this._sourceMapBasepath)&&("\\"!==(e=e.substring(this._sourceMapBasepath.length)).charAt(0)&&"/"!==e.charAt(0)||(e=e.substring(1))),e}},{key:"normalizeFilename",value:function(e){return e=e.replace(/\\/g,"/"),e=this.removeBasepath(e),(this._sourceMapRootpath||"")+e}},{key:"add",value:function(e,t,n,r){if(e){var i,a,s,o,u;if(t&&t.filename){var l=this._contentsMap[t.filename];if(this._contentsIgnoredCharsMap[t.filename]&&((n-=this._contentsIgnoredCharsMap[t.filename])<0&&(n=0),l=l.slice(this._contentsIgnoredCharsMap[t.filename])),void 0===l)return;o=(a=(l=l.substring(0,n)).split("\n"))[a.length-1]}if(s=(i=e.split("\n"))[i.length-1],t&&t.filename)if(r)for(u=0;u<i.length;u++)this._sourceMapGenerator.addMapping({generated:{line:this._lineNumber+u+1,column:0===u?this._column:0},original:{line:a.length+u,column:0===u?o.length:0},source:this.normalizeFilename(t.filename)});else this._sourceMapGenerator.addMapping({generated:{line:this._lineNumber+1,column:this._column},original:{line:a.length,column:o.length},source:this.normalizeFilename(t.filename)});1===i.length?this._column+=s.length:(this._lineNumber+=i.length-1,this._column=s.length),this._css.push(e)}}},{key:"isEmpty",value:function(){return 0===this._css.length}},{key:"toCSS",value:function(e){if(this._sourceMapGenerator=new this._sourceMapGeneratorConstructor({file:this._outputFilename,sourceRoot:null}),this._outputSourceFiles)for(var t in this._contentsMap)if(this._contentsMap.hasOwnProperty(t)){var n=this._contentsMap[t];this._contentsIgnoredCharsMap[t]&&(n=n.slice(this._contentsIgnoredCharsMap[t])),this._sourceMapGenerator.setSourceContent(this.normalizeFilename(t),n)}if(this._rootNode.genCSS(e,this),this._css.length>0){var r,i=JSON.stringify(this._sourceMapGenerator.toJSON());this.sourceMapURL?r=this.sourceMapURL:this._sourceMapFilename&&(r=this._sourceMapFilename),this.sourceMapURL=r,this.sourceMap=i}return this._css.join("")}}]),t}()}(e=new xe(e,t)),i=function(e,t){return function(){function n(e){a(this,n),this.options=e}return o(n,[{key:"toCSS",value:function(t,n,r){var i=new e({contentsIgnoredCharsMap:r.contentsIgnoredChars,rootNode:t,contentsMap:r.contents,sourceMapFilename:this.options.sourceMapFilename,sourceMapURL:this.options.sourceMapURL,outputFilename:this.options.sourceMapOutputFilename,sourceMapBasepath:this.options.sourceMapBasepath,sourceMapRootpath:this.options.sourceMapRootpath,outputSourceFiles:this.options.outputSourceFiles,sourceMapGenerator:this.options.sourceMapGenerator,sourceMapFileInline:this.options.sourceMapFileInline}),a=i.toCSS(n);return this.sourceMap=i.sourceMap,this.sourceMapURL=i.sourceMapURL,this.options.sourceMapInputFilename&&(this.sourceMapInputFilename=i.normalizeFilename(this.options.sourceMapInputFilename)),void 0!==this.options.sourceMapBasepath&&void 0!==this.sourceMapURL&&(this.sourceMapURL=i.removeBasepath(this.sourceMapURL)),a+this.getCSSAppendage()}},{key:"getCSSAppendage",value:function(){var e=this.sourceMapURL;if(this.options.sourceMapFileInline){if(void 0===this.sourceMap)return"";e="data:application/json;base64,".concat(t.encodeBase64(this.sourceMap))}return e?"/*# sourceMappingURL=".concat(e," */"):""}},{key:"getExternalSourceMap",value:function(){return this.sourceMap}},{key:"setExternalSourceMap",value:function(e){this.sourceMap=e}},{key:"isInline",value:function(){return this.options.sourceMapFileInline}},{key:"getSourceMapURL",value:function(){return this.sourceMapURL}},{key:"getOutputFilename",value:function(){return this.options.sourceMapOutputFilename}},{key:"getInputFilename",value:function(){return this.sourceMapInputFilename}}]),n}()}(r,e),s=function(e){return function(){function t(e,n){a(this,t),this.root=e,this.imports=n}return o(t,[{key:"toCSS",value:function(t){var n,r,i={};try{n=gt(this.root,t)}catch(e){throw new D(e,this.imports)}try{var a=Boolean(t.compress);a&&Le.warn("The compress option has been deprecated. We recommend you use a dedicated css minifier, for instance see less-plugin-clean-css.");var s={compress:a,dumpLineNumbers:t.dumpLineNumbers,strictUnits:Boolean(t.strictUnits),numPrecision:8};t.sourceMap?(r=new e(t.sourceMap),i.css=r.toCSS(n,s,this.imports)):i.css=n.toCSS(s)}catch(e){throw new D(e,this.imports)}if(t.pluginManager)for(var o=t.pluginManager.getPostProcessors(),u=0;u<o.length;u++)i.css=o[u].process(i.css,{sourceMap:r,options:t,imports:this.imports});for(var l in t.sourceMap&&(i.map=r.getExternalSourceMap()),i.imports=[],this.imports.files)this.imports.files.hasOwnProperty(l)&&l!==this.imports.rootFilename&&i.imports.push(l);return i}}]),t}()}(i),u=function(e){return function(){function t(e,n,r){a(this,t),this.less=e,this.rootFilename=r.filename,this.paths=n.paths||[],this.contents={},this.contentsIgnoredChars={},this.mime=n.mime,this.error=null,this.context=n,this.queue=[],this.files={}}return o(t,[{key:"push",value:function(t,n,r,i,a){var s=this,o=this.context.pluginManager.Loader;this.queue.push(t);var u=function(e,n,r){s.queue.splice(s.queue.indexOf(t),1);var o=r===s.rootFilename;i.optional&&e?(a(null,{rules:[]},!1,null),Le.info("The file ".concat(r," was skipped because it was not found and the import was marked optional."))):(s.files[r]||i.inline||(s.files[r]={root:n,options:i}),e&&!s.error&&(s.error=e),a(e,n,o,r))},l={rewriteUrls:this.context.rewriteUrls,entryPath:r.entryPath,rootpath:r.rootpath,rootFilename:r.rootFilename},c=e.getFileManager(t,r.currentDirectory,this.context,e);if(c){var d,h=function(e){var t,n=e.filename,a=e.contents.replace(/^\uFEFF/,"");l.currentDirectory=c.getPath(n),l.rewriteUrls&&(l.rootpath=c.join(s.context.rootpath||"",c.pathDiff(l.currentDirectory,l.entryPath)),!c.isPathAbsolute(l.rootpath)&&c.alwaysMakePathsAbsolute()&&(l.rootpath=c.join(l.entryPath,l.rootpath))),l.filename=n;var d=new W.Parse(s.context);d.processImports=!1,s.contents[n]=a,(r.reference||i.reference)&&(l.reference=!0),i.isPlugin?(t=o.evalPlugin(a,d,s,i.pluginArgs,l))instanceof D?u(t,null,n):u(null,t,n):i.inline?u(null,a,n):!s.files[n]||s.files[n].options.multiple||i.multiple?new ze(d,s,l).parse(a,function(e,t){u(e,t,n)}):u(null,s.files[n].root,n)},f=R(this.context);n&&(f.ext=i.isPlugin?".js":".less"),i.isPlugin?(f.mime="application/javascript",d=o.loadPlugin(t,r.currentDirectory,f,e,c)):d=c.loadFile(t,r.currentDirectory,f,e,function(e,t){e?u(e):h(t)}),d&&d.then(h,u)}else u({message:"Could not find a file-manager for ".concat(t)})}}]),t}()}(e),l=function(e,t,n){return function e(n,r,i){if("function"==typeof r?(i=r,r=M(this.options,{})):r=M(this.options,r||{}),!i){var a=this;return new Promise(function(t,i){e.call(a,n,r,function(e,n){e?i(e):t(n)})})}this.parse(n,r,function(e,n,r,a){if(e)return i(e);var s;try{s=new t(n,r).toCSS(a)}catch(e){return i(e)}i(null,s)})}}(0,s),c=function(e,t,n){return function e(t,r,i){if("function"==typeof r?(i=r,r=M(this.options,{})):r=M(this.options,r||{}),!i){var a=this;return new Promise(function(n,i){e.call(a,t,r,function(e,t){e?i(e):n(t)})})}var s,o,u=new bt(this,!r.reUsePluginManager);if(r.pluginManager=u,s=new W.Parse(r),r.rootFileInfo)o=r.rootFileInfo;else{var l=r.filename||"input",c=l.replace(/[^\/\\]*$/,"");(o={filename:l,rewriteUrls:s.rewriteUrls,rootpath:s.rootpath||"",currentDirectory:c,entryPath:c,rootFilename:l}).rootpath&&"/"!==o.rootpath.slice(-1)&&(o.rootpath+="/")}var d=new n(this,s,o);this.importManager=d,r.plugins&&r.plugins.forEach(function(e){var t,n;if(e.fileContent){if(n=e.fileContent.replace(/^\uFEFF/,""),(t=u.Loader.evalPlugin(n,s,d,e.options,e.filename))instanceof D)return i(t)}else u.addPlugin(e)}),new ze(s,d,o).parse(t,function(e,t){if(e)return i(e);i(null,t,d,r)},r)}}(0,0,u),h=yt(e),f={version:[3,10,3],data:y,tree:Ae,Environment:xe,AbstractFileManager:Re,AbstractPluginLoader:Ne,environment:e,visitors:qe,Parser:ze,functions:h,contexts:W,SourceMapOutput:r,SourceMapBuilder:i,ParseTree:s,ImportManager:u,render:l,parse:c,LessError:D,transformTree:gt,utils:O,PluginManager:bt,logger:Le},p=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return d(e,n)}},m=Object.create(f);for(var v in f.tree)if("function"==typeof(n=f.tree[v]))m[v.toLowerCase()]=p(n);else for(var g in m[v]=Object.create(null),n)m[v][g.toLowerCase()]=p(n[g]);return m},Tt={},Ct=function(e){function t(){return a(this,t),f(this,l(t).apply(this,arguments))}return u(t,Re),o(t,[{key:"alwaysMakePathsAbsolute",value:function(){return!0}},{key:"join",value:function(e,t){return e?this.extractUrlParts(t,e).path:t}},{key:"doXHR",value:function(e,t,n,r){var i=new XMLHttpRequest,a=!wt.isFileProtocol||wt.fileAsync;function s(t,n,r){t.status>=200&&t.status<300?n(t.responseText,t.getResponseHeader("Last-Modified")):"function"==typeof r&&r(t.status,e)}"function"==typeof i.overrideMimeType&&i.overrideMimeType("text/css"),Et.debug("XHR: Getting '".concat(e,"'")),i.open("GET",e,a),i.setRequestHeader("Accept",t||"text/x-less, text/css; q=0.9, */*; q=0.5"),i.send(null),wt.isFileProtocol&&!wt.fileAsync?0===i.status||i.status>=200&&i.status<300?n(i.responseText):r(i.status,e):a?i.onreadystatechange=function(){4==i.readyState&&s(i,n,r)}:s(i,n,r)}},{key:"supports",value:function(){return!0}},{key:"clearFileCache",value:function(){Tt={}}},{key:"loadFile",value:function(e,t,n,r){t&&!this.isPathAbsolute(e)&&(e=t+e),e=n.ext?this.tryAppendExtension(e,n.ext):e,n=n||{};var i=this.extractUrlParts(e,window.location.href).url,a=this;return new Promise(function(e,t){if(n.useFileCache&&Tt[i])try{var r=Tt[i];return e({contents:r,filename:i,webInfo:{lastModified:new Date}})}catch(e){return t({filename:i,message:"Error loading file ".concat(i," error was ").concat(e.message)})}a.doXHR(i,n.mime,function(t,n){Tt[i]=t,e({contents:t,filename:i,webInfo:{lastModified:n}})},function(e,n){t({type:"File",message:"'".concat(n,"' wasn't found (").concat(e,")"),href:i})})})}}]),t}(),kt=function(e,t){return wt=e,Et=t,Ct},It=function(e){function t(e){var n;return a(this,t),(n=f(this,l(t).call(this))).less=e,n}return u(t,Ne),o(t,[{key:"loadPlugin",value:function(e,t,n,r,i){return new Promise(function(a,s){i.loadFile(e,t,n,r).then(a).catch(s)})}}]),t}(),At=function(t,n,i){return{add:function(a,s){i.errorReporting&&"html"!==i.errorReporting?"console"===i.errorReporting?function(e,t){var r=e.filename||t,a=[],s="".concat(e.type||"Syntax","Error: ").concat(e.message||"There is an error in your .less file"," in ").concat(r),o=function(e,t,n){void 0!==e.extract[t]&&a.push("{line} {content}".replace(/\{line\}/,(parseInt(e.line,10)||0)+(t-1)).replace(/\{class\}/,n).replace(/\{content\}/,e.extract[t]))};e.line&&(o(e,0,""),o(e,1,"line"),o(e,2,""),s+=" on line ".concat(e.line,", column ").concat(e.column+1,":\n").concat(a.join("\n"))),e.stack&&(e.extract||i.logLevel>=4)&&(s+="\nStack Trace\n".concat(e.stack)),n.logger.error(s)}(a,s):"function"==typeof i.errorReporting&&i.errorReporting("add",a,s):function(n,a){var s,o,u="less-error-message:".concat(e(a||"")),l=t.document.createElement("div"),c=[],d=n.filename||a,h=d.match(/([^\/]+(\?.*)?)$/)[1];l.id=u,l.className="less-error-message",o="<h3>".concat(n.type||"Syntax","Error: ").concat(n.message||"There is an error in your .less file")+'</h3><p>in <a href="'.concat(d,'">').concat(h,"</a> ");var f=function(e,t,n){void 0!==e.extract[t]&&c.push('<li><label>{line}</label><pre class="{class}">{content}</pre></li>'.replace(/\{line\}/,(parseInt(e.line,10)||0)+(t-1)).replace(/\{class\}/,n).replace(/\{content\}/,e.extract[t]))};n.line&&(f(n,0,""),f(n,1,"line"),f(n,2,""),o+="on line ".concat(n.line,", column ").concat(n.column+1,":</p><ul>").concat(c.join(""),"</ul>")),n.stack&&(n.extract||i.logLevel>=4)&&(o+="<br/>Stack Trace</br />".concat(n.stack.split("\n").slice(1).join("<br/>"))),l.innerHTML=o,r.createCSS(t.document,[".less-error-message ul, .less-error-message li {","list-style-type: none;","margin-right: 15px;","padding: 4px 0;","margin: 0;","}",".less-error-message label {","font-size: 12px;","margin-right: 15px;","padding: 4px 0;","color: #cc7777;","}",".less-error-message pre {","color: #dd6666;","padding: 4px 0;","margin: 0;","display: inline-block;","}",".less-error-message pre.line {","color: #ff0000;","}",".less-error-message h3 {","font-size: 20px;","font-weight: bold;","padding: 15px 0 5px 0;","margin: 0;","}",".less-error-message a {","color: #10a","}",".less-error-message .error {","color: red;","font-weight: bold;","padding-bottom: 2px;","border-bottom: 1px dashed red;","}"].join("\n"),{title:"error-message"}),l.style.cssText=["font-family: Arial, sans-serif","border: 1px solid #e00","background-color: #eee","border-radius: 5px","-webkit-border-radius: 5px","-moz-border-radius: 5px","color: #e00","padding: 15px","margin-bottom: 15px"].join(";"),"development"===i.env&&(s=setInterval(function(){var e=t.document,n=e.body;n&&(e.getElementById(u)?n.replaceChild(l,e.getElementById(u)):n.insertBefore(l,n.firstChild),clearInterval(s))},10))}(a,s)},remove:function(n){i.errorReporting&&"html"!==i.errorReporting?"console"===i.errorReporting||"function"==typeof i.errorReporting&&i.errorReporting("remove",n):function(n){var r=t.document.getElementById("less-error-message:".concat(e(n)));r&&r.parentNode.removeChild(r)}(n)}}},Lt={javascriptEnabled:!1,depends:!1,compress:!1,lint:!1,paths:[],color:!0,strictImports:!1,insecure:!1,rootpath:"",rewriteUrls:!1,math:0,strictUnits:!1,globalVars:null,modifyVars:null,urlArgs:""};if(window.less)for(var xt in window.less)window.less.hasOwnProperty(xt)&&(Lt[xt]=window.less[xt]);(function(e,t){n(t,r.currentScript(e)),void 0===t.isFileProtocol&&(t.isFileProtocol=/^(file|(chrome|safari)(-extension)?|resource|qrc|app):/.test(e.location.protocol)),t.async=t.async||!1,t.fileAsync=t.fileAsync||!1,t.poll=t.poll||(t.isFileProtocol?1e3:1500),t.env=t.env||("127.0.0.1"==e.location.hostname||"0.0.0.0"==e.location.hostname||"localhost"==e.location.hostname||e.location.port&&e.location.port.length>0||t.isFileProtocol?"development":"production");var i=/!dumpLineNumbers:(comments|mediaquery|all)/.exec(e.location.hash);i&&(t.dumpLineNumbers=i[1]),void 0===t.useFileCache&&(t.useFileCache=!0),void 0===t.onReady&&(t.onReady=!0),t.relativeUrls&&(t.rewriteUrls="all")})(window,Lt),Lt.plugins=Lt.plugins||[],window.LESS_PLUGINS&&(Lt.plugins=Lt.plugins.concat(window.LESS_PLUGINS));var Rt,Nt,Mt,Pt=function(e,t){var i=e.document,a=St();a.options=t;var s=a.environment,o=kt(t,a.logger),u=new o;s.addFileManager(u),a.FileManager=o,a.PluginLoader=It,function(e,t){t.logLevel=void 0!==t.logLevel?t.logLevel:"development"===t.env?3:1,t.loggers||(t.loggers=[{debug:function(e){t.logLevel>=4&&console.log(e)},info:function(e){t.logLevel>=3&&console.log(e)},warn:function(e){t.logLevel>=2&&console.warn(e)},error:function(e){t.logLevel>=1&&console.error(e)}}]);for(var n=0;n<t.loggers.length;n++)e.logger.addListener(t.loggers[n])}(a,t);var l=At(e,a,t),c=a.cache=t.cache||function(e,t,n){var r=null;if("development"!==t.env)try{r=void 0===e.localStorage?null:e.localStorage}catch(e){}return{setCSS:function(e,t,i,a){if(r){n.info("saving ".concat(e," to cache."));try{r.setItem(e,a),r.setItem("".concat(e,":timestamp"),t),i&&r.setItem("".concat(e,":vars"),JSON.stringify(i))}catch(t){n.error('failed to save "'.concat(e,'" to local storage for caching.'))}}},getCSS:function(e,t,n){var i=r&&r.getItem(e),a=r&&r.getItem("".concat(e,":timestamp")),s=r&&r.getItem("".concat(e,":vars"));if(n=n||{},s=s||"{}",a&&t.lastModified&&new Date(t.lastModified).valueOf()===new Date(a).valueOf()&&JSON.stringify(n)===s)return i}}}(e,t,a.logger);!function(){function e(){throw{type:"Runtime",message:"Image size functions are not supported in browser version of less"}}var t={"image-size":function(t){return e(),-1},"image-width":function(t){return e(),-1},"image-height":function(t){return e(),-1}};Q.addMultiple(t)}(a.environment),t.functions&&a.functions.functionRegistry.addMultiple(t.functions);var d=/^text\/(x-)?less$/;function h(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function f(e,t){var n=Array.prototype.slice.call(arguments,2);return function(){var r=n.concat(Array.prototype.slice.call(arguments,0));return e.apply(t,r)}}function p(e){for(var n,r=i.getElementsByTagName("style"),s=0;s<r.length;s++)if((n=r[s]).type.match(d)){var o=h(t);o.modifyVars=e;var u=n.innerHTML||"";o.filename=i.location.href.replace(/#.*$/,""),a.render(u,o,f(function(e,t,n){t?l.add(t,"inline"):(e.type="text/css",e.styleSheet?e.styleSheet.cssText=n.css:e.innerHTML=n.css)},null,n))}}function m(e,r,i,o,d){var f=h(t);n(f,e),f.mime=e.type,d&&(f.modifyVars=d),u.loadFile(e.href,null,f,s).then(function(t){!function(t){var n=t.contents,s=t.filename,d=t.webInfo,h={currentDirectory:u.getPath(s),filename:s,rootFilename:s,rewriteUrls:f.rewriteUrls};if(h.entryPath=h.currentDirectory,h.rootpath=f.rootpath||h.currentDirectory,d){d.remaining=o;var p=c.getCSS(s,d,f.modifyVars);if(!i&&p)return d.local=!0,void r(null,p,n,e,d,s)}l.remove(s),f.rootFileInfo=h,a.render(n,f,function(t,i){t?(t.href=s,r(t)):(c.setCSS(e.href,d.lastModified,f.modifyVars,i.css),r(null,i.css,n,e,d,s))})}(t)}).catch(function(e){console.log(e),r(e)})}function v(e,t,n){for(var r=0;r<a.sheets.length;r++)m(a.sheets[r],e,t,a.sheets.length-(r+1),n)}return a.watch=function(){return a.watchMode||(a.env="development","development"===a.env&&(a.watchTimer=setInterval(function(){a.watchMode&&(u.clearFileCache(),v(function(t,n,i,a,s){t?l.add(t,t.href||a.href):n&&r.createCSS(e.document,n,a)}))},t.poll))),this.watchMode=!0,!0},a.unwatch=function(){return clearInterval(a.watchTimer),this.watchMode=!1,!1},a.registerStylesheetsImmediately=function(){var e=i.getElementsByTagName("link");a.sheets=[];for(var t=0;t<e.length;t++)("stylesheet/less"===e[t].rel||e[t].rel.match(/stylesheet/)&&e[t].type.match(d))&&a.sheets.push(e[t])},a.registerStylesheets=function(){return new Promise(function(e,t){a.registerStylesheetsImmediately(),e()})},a.modifyVars=function(e){return a.refresh(!0,e,!1)},a.refresh=function(t,n,i){return(t||i)&&!1!==i&&u.clearFileCache(),new Promise(function(i,s){var o,u,c,d;o=u=new Date,0===(d=a.sheets.length)?(u=new Date,c=u-o,a.logger.info("Less has finished and no sheets were loaded."),i({startTime:o,endTime:u,totalMilliseconds:c,sheets:a.sheets.length})):v(function(t,n,h,f,p){if(t)return l.add(t,t.href||f.href),void s(t);p.local?a.logger.info("Loading ".concat(f.href," from cache.")):a.logger.info("Rendered ".concat(f.href," successfully.")),r.createCSS(e.document,n,f),a.logger.info("CSS for ".concat(f.href," generated in ").concat(new Date-u,"ms")),0==--d&&(c=new Date-o,a.logger.info("Less has finished. CSS generated in ".concat(c,"ms")),i({startTime:o,endTime:u,totalMilliseconds:c,sheets:a.sheets.length})),u=new Date},t,n),p(n)})},a.refreshStyles=p,a}(window,Lt);function Ot(e){e.filename&&console.warn(e),Lt.async||Nt.removeChild(Mt)}return window.less=Pt,Lt.onReady&&(/!watch/.test(window.location.hash)&&Pt.watch(),Lt.async||(Rt="body { display: none !important }",Nt=document.head||document.getElementsByTagName("head")[0],(Mt=document.createElement("style")).type="text/css",Mt.styleSheet?Mt.styleSheet.cssText=Rt:Mt.appendChild(document.createTextNode(Rt)),Nt.appendChild(Mt)),Pt.registerStylesheetsImmediately(),Pt.pageLoadFinished=Pt.refresh("development"===Pt.env).then(Ot,Ot)),Pt}()}).call(this,n(17).Buffer)},function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var r=n(18),i=n(19),a=n(20);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return l(this,e,t,n)}function l(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=h(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(t,n),i=(e=o(e,r)).write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(u.isBuffer(t)){var n=0|f(t.length);return 0===(e=o(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?o(e,0):h(e,t);if("Buffer"===t.type&&a(t.data))return h(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(c(t),e=o(e,t<0?0:0|f(t)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function h(e,t){var n=t.length<0?0:0|f(t.length);e=o(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function f(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function p(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return j(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return H(e).length;default:if(r)return j(e).length;t=(""+t).toLowerCase(),r=!0}}function m(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return x(this,t,n);case"utf8":case"utf-8":return k(this,t,n);case"ascii":return A(this,t,n);case"latin1":case"binary":return L(this,t,n);case"base64":return C(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function v(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function y(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=u.from(t,r)),u.isBuffer(t))return 0===t.length?-1:g(e,t,n,r,i);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):g(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function g(e,t,n,r,i){var a,s=1,o=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,o/=2,u/=2,n/=2}function l(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var c=-1;for(a=n;a<o;a++)if(l(e,a)===l(t,-1===c?0:a-c)){if(-1===c&&(c=a),a-c+1===u)return c*s}else-1!==c&&(a-=a-c),c=-1}else for(n+u>o&&(n=o-u),a=n;a>=0;a--){for(var d=!0,h=0;h<u;h++)if(l(e,a+h)!==l(t,h)){d=!1;break}if(d)return a}return-1}function _(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var s=0;s<r;++s){var o=parseInt(t.substr(2*s,2),16);if(isNaN(o))return s;e[n+s]=o}return s}function b(e,t,n,r){return K(j(t,e.length-n),e,n,r)}function w(e,t,n,r){return K(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function E(e,t,n,r){return w(e,t,n,r)}function S(e,t,n,r){return K(H(t),e,n,r)}function T(e,t,n,r){return K(function(e,t){for(var n,r,i,a=[],s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),r=n>>8,i=n%256,a.push(i),a.push(r);return a}(t,e.length-n),e,n,r)}function C(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function k(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var a,s,o,u,l=e[i],c=null,d=l>239?4:l>223?3:l>191?2:1;if(i+d<=n)switch(d){case 1:l<128&&(c=l);break;case 2:128==(192&(a=e[i+1]))&&(u=(31&l)<<6|63&a)>127&&(c=u);break;case 3:a=e[i+1],s=e[i+2],128==(192&a)&&128==(192&s)&&(u=(15&l)<<12|(63&a)<<6|63&s)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:a=e[i+1],s=e[i+2],o=e[i+3],128==(192&a)&&128==(192&s)&&128==(192&o)&&(u=(15&l)<<18|(63&a)<<12|(63&s)<<6|63&o)>65535&&u<1114112&&(c=u)}null===c?(c=65533,d=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=d}return function(e){var t=e.length;if(t<=I)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=I));return n}(r)}t.Buffer=u,t.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,n){return l(null,e,t,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,n){return function(e,t,n,r){return c(t),t<=0?o(e,t):void 0!==n?"string"==typeof r?o(e,t).fill(n,r):o(e,t).fill(n):o(e,t)}(null,e,t,n)},u.allocUnsafe=function(e){return d(null,e)},u.allocUnsafeSlow=function(e){return d(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=u.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var s=e[n];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?k(this,0,e):m.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,n,r,i){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),o=Math.min(a,s),l=this.slice(r,i),c=e.slice(t,n),d=0;d<o;++d)if(l[d]!==c[d]){a=l[d],s=c[d];break}return a<s?-1:s<a?1:0},u.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},u.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},u.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},u.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return _(this,e,t,n);case"utf8":case"utf-8":return b(this,e,t,n);case"ascii":return w(this,e,t,n);case"latin1":case"binary":return E(this,e,t,n);case"base64":return S(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function A(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function L(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function x(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=t;a<n;++a)i+=V(e[a]);return i}function R(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function N(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function M(e,t,n,r,i,a){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function P(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-n,2);i<a;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function O(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-n,4);i<a;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function D(e,t,n,r,i,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function U(e,t,n,r,a){return a||D(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function F(e,t,n,r,a){return a||D(e,0,n,8),i.write(e,t,n,r,52,8),n+8}u.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=u.prototype;else{var i=t-e;n=new u(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+e]}return n},u.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r},u.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},u.prototype.readUInt8=function(e,t){return t||N(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||N(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||N(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||N(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||N(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},u.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=t,i=1,a=this[e+--r];r>0&&(i*=256);)a+=this[e+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},u.prototype.readInt8=function(e,t){return t||N(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||N(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(e,t){t||N(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(e,t){return t||N(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||N(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||N(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||N(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||N(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||N(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||M(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},u.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||M(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+n},u.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):P(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):P(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):O(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):O(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);M(this,e,t,n,i-1,-i)}var a=0,s=1,o=0;for(this[t]=255&e;++a<n&&(s*=256);)e<0&&0===o&&0!==this[t+a-1]&&(o=1),this[t+a]=(e/s>>0)-o&255;return t+n},u.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);M(this,e,t,n,i-1,-i)}var a=n-1,s=1,o=0;for(this[t+a]=255&e;--a>=0&&(s*=256);)e<0&&0===o&&0!==this[t+a+1]&&(o=1),this[t+a]=(e/s>>0)-o&255;return t+n},u.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):P(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):P(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):O(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):O(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,n){return U(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return U(this,e,t,!1,n)},u.prototype.writeDoubleLE=function(e,t,n){return F(this,e,t,!0,n)},u.prototype.writeDoubleBE=function(e,t,n){return F(this,e,t,!1,n)},u.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,a=r-n;if(this===e&&n<t&&t<r)for(i=a-1;i>=0;--i)e[i+t]=this[i+n];else if(a<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},u.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var s=u.isBuffer(e)?e:j(new u(e,r).toString()),o=s.length;for(a=0;a<n-t;++a)this[a+t]=s[a%o]}return this};var B=/[^+\/0-9A-Za-z-_]/g;function V(e){return e<16?"0"+e.toString(16):e.toString(16)}function j(e,t){var n;t=t||1/0;for(var r=e.length,i=null,a=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function H(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(B,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function K(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(5))},function(e,t,n){"use strict";t.byteLength=function(e){var t=l(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=l(e),s=r[0],o=r[1],u=new a(function(e,t,n){return 3*(t+n)/4-n}(0,s,o)),c=0,d=o>0?s-4:s;for(n=0;n<d;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],u[c++]=t>>16&255,u[c++]=t>>8&255,u[c++]=255&t;2===o&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,u[c++]=255&t);1===o&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,u[c++]=t>>8&255,u[c++]=255&t);return u},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,a=[],s=0,o=n-i;s<o;s+=16383)a.push(c(e,s,s+16383>o?o:s+16383));1===i?(t=e[n-1],a.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],a.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return a.join("")};for(var r=[],i=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,u=s.length;o<u;++o)r[o]=s[o],i[s.charCodeAt(o)]=o;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e,t,n){for(var i,a,s=[],o=t;o<n;o+=3)i=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),s.push(r[(a=i)>>18&63]+r[a>>12&63]+r[a>>6&63]+r[63&a]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var a,s,o=8*i-r-1,u=(1<<o)-1,l=u>>1,c=-7,d=n?i-1:0,h=n?-1:1,f=e[t+d];for(d+=h,a=f&(1<<-c)-1,f>>=-c,c+=o;c>0;a=256*a+e[t+d],d+=h,c-=8);for(s=a&(1<<-c)-1,a>>=-c,c+=r;c>0;s=256*s+e[t+d],d+=h,c-=8);if(0===a)a=1-l;else{if(a===u)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,r),a-=l}return(f?-1:1)*s*Math.pow(2,a-r)},t.write=function(e,t,n,r,i,a){var s,o,u,l=8*a-i-1,c=(1<<l)-1,d=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:a-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+d>=1?h/u:h*Math.pow(2,1-d))*u>=2&&(s++,u/=2),s+d>=c?(o=0,s=c):s+d>=1?(o=(t*u-1)*Math.pow(2,i),s+=d):(o=t*Math.pow(2,d-1)*Math.pow(2,i),s=0));i>=8;e[n+f]=255&o,f+=p,o/=256,i-=8);for(s=s<<i|o,l+=i;l>0;e[n+f]=255&s,f+=p,s/=256,l-=8);e[n+f-p]|=128*m}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t){function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka=window.shaka||{};var i=window.shaka;window.goog=window.goog||{};var a,s=window.goog;(i.log=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"alwaysError",value:function(){}},{key:"alwaysWarn",value:function(){}},{key:"error",value:function(){}},{key:"warning",value:function(){}},{key:"info",value:function(){}},{key:"debug",value:function(){}},{key:"v1",value:function(){}},{key:"v2",value:function(){}}],(n=null)&&r(t.prototype,n),i&&r(t,i),e}(),i.log.Level={NONE:0,ERROR:1,WARNING:2,INFO:3,DEBUG:4,V1:5,V2:6},i.log.MAX_LOG_LEVEL=3,window.console)&&(i.log.logMap_=(n(a={},i.log.Level.ERROR,function(){var e;return(e=console).error.apply(e,arguments)}),n(a,i.log.Level.WARNING,function(){var e;return(e=console).warn.apply(e,arguments)}),n(a,i.log.Level.INFO,function(){var e;return(e=console).info.apply(e,arguments)}),n(a,i.log.Level.DEBUG,function(){var e;return(e=console).log.apply(e,arguments)}),n(a,i.log.Level.V1,function(){var e;return(e=console).debug.apply(e,arguments)}),n(a,i.log.Level.V2,function(){var e;return(e=console).debug.apply(e,arguments)}),a),i.log.alwaysWarn=i.log.logMap_[i.log.Level.WARNING],i.log.alwaysError=i.log.logMap_[i.log.Level.ERROR],s.DEBUG?(i.log.currentLevel,i.log.setLevel=function(e){var t=function(t){return t<=e?(window.asserts.assert(i.log.logMap_[t],"Unexpected log level"),i.log.logMap_[t]):function(){}};i.log.currentLevel=e,i.log.error=t(i.log.Level.ERROR),i.log.warning=t(i.log.Level.WARNING),i.log.info=t(i.log.Level.INFO),i.log.debug=t(i.log.Level.DEBUG),i.log.v1=t(i.log.Level.V1),i.log.v2=t(i.log.Level.V2)},i.log.setLevel(i.log.MAX_LOG_LEVEL)):(i.log.MAX_LOG_LEVEL>=i.log.Level.ERROR&&(i.log.error=i.log.logMap_[i.log.Level.ERROR]),i.log.MAX_LOG_LEVEL>=i.log.Level.WARNING&&(i.log.warning=i.log.logMap_[i.log.Level.WARNING]),i.log.MAX_LOG_LEVEL>=i.log.Level.INFO&&(i.log.info=i.log.logMap_[i.log.Level.INFO]),i.log.MAX_LOG_LEVEL>=i.log.Level.DEBUG&&(i.log.debug=i.log.logMap_[i.log.Level.DEBUG]),i.log.MAX_LOG_LEVEL>=i.log.Level.V1&&(i.log.v1=i.log.logMap_[i.log.Level.V1]),i.log.MAX_LOG_LEVEL>=i.log.Level.V2&&(i.log.v2=i.log.logMap_[i.log.Level.V2])))},function(e,t,n){"use strict";n.r(t);var r=n(1),i=n.n(r),a=(n(8),n(9),n(10),n(11),n(4)),s=n.n(a),o=(n(12),n(13),n(15),n(16),{UNKNOWN:"Unknown",CUSTOM:"Custom",SHAKA:"Shaka",AXINOM:"Axinom",UNIFIED_STREAMING:"Unified Streaming",DASH_IF:"DASH-IF",WOWZA:"Wowza",BITCODIN:"Bitcodin",NIMBLE_STREAMER:"Nimble Streamer",AZURE_MEDIA_SERVICES:"Azure Media Services",GPAC:"GPAC",UPLYNK:"Verizon Digital Media Services"}),u={CLEAR_KEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps.1_0",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha",CLEAR:"no drm protection"},l={MULTIKEY:"multiple keys",MULTIPERIOD:"multiple Periods",ENCRYPTED_WITH_CLEAR:"mixing encrypted and unencrypted periods",AESCTR_16_BYTE_IV:"encrypted with AES CTR Mode using a 16 byte IV",AESCTR_8_BYTE_IV:"encrypted with AES CTR Mode using a 8 byte IV",TRICK_MODE:"Special trick mode track",XLINK:"XLink",SUBTITLES:"Subtitles",CAPTIONS:"Captions",EMBEDDED_TEXT:"embedded text",MULTIPLE_LANGUAGES:"multiple languages",AUDIO_ONLY:"audio only",OFFLINE:"Downloadable",STORED:"Downloaded",LIVE:"Live",WEBM:"WebM",MP4:"MP4",MP2TS:"MPEG-2 TS",TTML:"TTML",WEBVTT:"WebVTT",HIGH_DEFINITION:"High definition",ULTRA_HIGH_DEFINITION:"Ultra-high definition",SURROUND:"Surround sound",DASH:"DASH",HLS:"HLS"};function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var h=window.shaka,f=(window.goog,function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"defaultEquals",value:function(e,t){return!("number"!=typeof e||"number"!=typeof t||!isNaN(e)||!isNaN(t))||e===t}},{key:"remove",value:function(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}},{key:"count",value:function(e,t){var n=0,r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done);r=!0)n+=t(s.value)?1:0}catch(e){i=!0,a=e}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}return n}},{key:"hasSameElements",value:function(e,t,n){if(n||(n=h.util.ArrayUtils.defaultEquals),e.length!=t.length)return!1;var r=t.slice(),i=!0,a=!1,s=void 0;try{for(var o,u=function(){var e=o.value,t=r.findIndex(function(t){return n(e,t)});if(-1==t)return{v:!1};r[t]=r[r.length-1],r.pop()},l=e[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var d=u();if("object"===c(d))return d.v}}catch(e){a=!0,s=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw s}}return 0==r.length}}],(n=null)&&d(t.prototype,n),r&&d(t,r),e}());
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var m=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.operations_=[]}var t,n,r;return t=e,(n=[{key:"manage",value:function(e){var t=this;this.operations_.push(e.finally(function(){f.remove(t.operations_,e)}))}},{key:"destroy",value:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var i,a=this.operations_[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value;s.promise.catch(function(){}),e.push(s.abort())}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return this.operations_=[],Promise.all(e)}}])&&p(t.prototype,n),r&&p(t,r),e}();function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var g=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"cloneObject",value:function(e){var t=new Set;return function e(n){switch(v(n)){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return n;case"object":default:if(!n)return n;if(n.buffer&&n.buffer.constructor==ArrayBuffer)return n;if(t.has(n))return null;var r=n.constructor==Array;if(n.constructor!=Object&&!r)return null;t.add(n);var i=r?[]:{};for(var a in n)i[a]=e(n[a]);return r&&(i.length=n.length),i}}(e)}}],(n=null)&&y(t.prototype,n),r&&y(t,r),e}();function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var b=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var r in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n)Object.defineProperty(this,r,{value:n[r],writable:!0,enumerable:!0});this.bubbles=!1,this.cancelable=!1,this.defaultPrevented=!1,this.timeStamp=window.performance&&window.performance.now?window.performance.now():Date.now(),this.type=t,this.isTrusted=!1,this.currentTarget=null,this.target=null,this.stopped=!1}var t,n,r;return t=e,(n=[{key:"preventDefault",value:function(){this.cancelable&&(this.defaultPrevented=!0)}},{key:"stopImmediatePropagation",value:function(){this.stopped=!0}},{key:"stopPropagation",value:function(){}}])&&_(t.prototype,n),r&&_(t,r),e}();function w(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var S=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.map_={}}var t,n,r;return t=e,(n=[{key:"push",value:function(e,t){this.map_.hasOwnProperty(e)?this.map_[e].push(t):this.map_[e]=[t]}},{key:"get",value:function(e){var t=this.map_[e];return t?t.slice():null}},{key:"getAll",value:function(){var e=[];for(var t in this.map_)e.push.apply(e,w(this.map_[t]));return e}},{key:"remove",value:function(e,t){var n=this.map_[e];if(n)for(var r=0;r<n.length;++r)n[r]===t&&(n.splice(r,1),--r)}},{key:"clear",value:function(){this.map_={}}},{key:"forEach",value:function(e){for(var t in this.map_)e(t,this.map_[t])}}])&&E(t.prototype,n),r&&E(t,r),e}();function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
console.log({FakeEvent:b}),window.shaka=window.shaka||{};var C=window.shaka;C.util;window.goog=window.goog||{};window.goog;var k=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.listeners_=new S,this.dispatchTarget=this}var t,n,r;return t=e,(n=[{key:"addEventListener",value:function(e,t,n){this.listeners_.push(e,t)}},{key:"removeEventListener",value:function(e,t,n){this.listeners_.remove(e,t)}},{key:"dispatchEvent",value:function(e){var t=this.listeners_.get(e.type)||[],n=!0,r=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;e.target=this.dispatchTarget,e.currentTarget=this.dispatchTarget;try{o.handleEvent?o.handleEvent(e):o.call(this,e)}catch(e){C.log.error("Uncaught exception in event handler",e,e?e.message:null,e?e.stack:null)}if(e.stopped)break}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return e.defaultPrevented}}])&&T(t.prototype,n),r&&T(t,r),e}();function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var A=function(){function e(){var t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=new Promise(function(e,r){t=e,n=r});return r.resolve=t,r.reject=n,r}var t,n,r;return t=e,(n=[{key:"resolve",value:function(e){}},{key:"reject",value:function(e){}}])&&I(t.prototype,n),r&&I(t,r),e}();function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */window.shaka;var R=window.goog,N=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),x(this,"severity",{RECOVERABLE:1,CRITICAL:2}),x(this,"category",{NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9}),x(this,"code",{UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,UNKNOWN_DATA_URI_ENCODING:1005,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,UNPLAYABLE_PERIOD:4011,RESTRICTIONS_CANNOT_BE_MET:4012,NO_PERIODS:4014,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_COULD_NOT_GUESS_MIME_TYPE:4021,HLS_MASTER_PLAYLIST_NOT_PROVIDED:4022,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,HLS_COULD_NOT_PARSE_SEGMENT_START_TIME:4030,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,HLS_AES_128_ENCRYPTION_NOT_SUPPORTED:4034,INVALID_STREAMS_CHOSEN:5005,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,CAST_RECEIVER_APP_ID_MISSING:8007,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,STORE_ALREADY_IN_PROGRESS:9006,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013});for(var i=arguments.length,a=new Array(i>3?i-3:0),s=3;s<i;s++)a[s-3]=arguments[s];if(this.data=a,this.handled=!1,R.DEBUG){var o="UNKNOWN",u="UNKNOWN";for(var l in e.Category)e.Category[l]==this.category&&(o=l);for(var c in e.Code)e.Code[c]==this.code&&(u=c);if(this.message="Shaka Error "+o+"."+u+" ("+this.data.toString()+")",e.createStack)try{throw new Error(this.message)}catch(e){this.stack=e.stack}}}var t,n,r;return t=e,(n=[{key:"toString",value:function(){return"Error "+JSON.stringify(this,null,"  ")}}])&&L(t.prototype,n),r&&L(t,r),e}();R.DEBUG&&(N.createStack=!0);var M=N;function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var O=new M,D=(window.shaka,function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.promise=t,this.onAbort_=n,this.aborted_=!1}var t,n,r;return t=e,r=[{key:"failed",value:function(t){return new e(Promise.reject(t),function(){return Promise.resolve()})}},{key:"aborted",value:function(){var t=Promise.reject(new M(O.severity.CRITICAL,O.category.PLAYER,O.code.OPERATION_ABORTED));return t.catch(function(){}),new e(t,function(){return Promise.resolve()})}},{key:"completed",value:function(t){return new e(Promise.resolve(t),function(){return Promise.resolve()})}},{key:"notAbortable",value:function(t){return new e(t,function(){return t.catch(function(){})})}},{key:"all",value:function(t){return new e(Promise.all(t.map(function(e){return e.promise})),function(){return Promise.all(t.map(function(e){return e.abort()}))})}},{key:"wrapChainCallback_",value:function(e,t,n){try{var r=e(t);return r&&r.promise&&r.abort?(n.resolve(r.promise),function(){return r.abort()}):(n.resolve(r),function(){return Promise.resolve(r).then(function(){}).catch(function(){})})}catch(e){return n.reject(e),function(){return Promise.resolve()}}}}],(n=[{key:"abort",value:function(){return this.aborted_=!0,this.onAbort_()}},{key:"finally",value:function(e){return this.promise.then(function(t){return e(!0)},function(t){return e(!1)}),this}},{key:"chain",value:function(t,n){var r=this,i=new A,a=function(){return i.reject(new M(O.severity.CRITICAL,O.category.PLAYER,O.code.OPERATION_ABORTED)),r.abort()};return this.promise.then(function(n){r.aborted_?i.reject(new M(O.severity.CRITICAL,O.category.PLAYER,O.code.OPERATION_ABORTED)):t?a=e.wrapChainCallback_(t,n,i):i.resolve(n)},function(t){n?a=e.wrapChainCallback_(n,t,i):i.reject(t)}),new e(i,function(){return a()})}}])&&P(t.prototype,n),r&&P(t,r),e}());D.prototype.promise={};var U=D,F=n(0),B=n.n(F);function V(e,t,n,r,i,a,s){try{var o=e[a](s),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,i)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var H=F.util.Timer,K=(window.shaka,window.goog,function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=e.defaultRetryParameters();this.maxAttempts_=null==t.maxAttempts?r.maxAttempts:t.maxAttempts,window.asserts.assert(this.maxAttempts_>=1,"maxAttempts should be >= 1"),this.baseDelay_=null==t.baseDelay?r.baseDelay:t.baseDelay,window.asserts.assert(this.baseDelay_>=0,"baseDelay should be >= 0"),this.fuzzFactor_=null==t.fuzzFactor?r.fuzzFactor:t.fuzzFactor,window.asserts.assert(this.fuzzFactor_>=0,"fuzzFactor should be >= 0"),this.backoffFactor_=null==t.backoffFactor?r.backoffFactor:t.backoffFactor,window.asserts.assert(this.backoffFactor_>=0,"backoffFactor should be >= 0"),this.numAttempts_=0,this.nextUnfuzzedDelay_=this.baseDelay_,this.autoReset_=n,this.autoReset_&&(window.asserts.assert(this.maxAttempts_>=2,"maxAttempts must be >= 2 for autoReset == true"),this.numAttempts_=1)}var t,n,r,i,a;return t=e,n=[{key:"attempt",value:(i=regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.numAttempts_>=this.maxAttempts_)){t.next=6;break}if(!this.autoReset_){t.next=5;break}this.reset_(),t.next=6;break;case 5:throw new Error(Error.Severity.CRITICAL,Error.Category.PLAYER,Error.Code.ATTEMPTS_EXHAUSTED);case 6:if(n=this.numAttempts_,this.numAttempts_++,0!=n){t.next=11;break}return window.asserts.assert(!this.autoReset_,"Failed to delay with auto-reset!"),t.abrupt("return");case 11:return r=e.fuzz_(this.nextUnfuzzedDelay_,this.fuzzFactor_),t.next=14,new Promise(function(t){e.defer(r,t)});case 14:this.nextUnfuzzedDelay_*=this.backoffFactor_;case 15:case"end":return t.stop()}},t,this)}),a=function(){var e=this,t=arguments;return new Promise(function(n,r){var a=i.apply(e,t);function s(e){V(a,n,r,s,o,"next",e)}function o(e){V(a,n,r,s,o,"throw",e)}s(void 0)})},function(){return a.apply(this,arguments)})},{key:"reset_",value:function(){window.asserts.assert(this.autoReset_,"Should only be used for auto-reset!"),this.numAttempts_=1,this.nextUnfuzzedDelay_=this.baseDelay_}}],r=[{key:"defaultRetryParameters",value:function(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0}}},{key:"fuzz_",value:function(e,t){return e*(1+(2*Math.random()-1)*t)}},{key:"defer",value:function(e,t){new H(t).tickAfter(e/1e3)}}],n&&j(t.prototype,n),r&&j(t,r),e}()),G=new RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$"),q={SCHEME:1,USER_INFO:2,DOMAIN:3,PORT:4,PATH:5,QUERY_DATA:6,FRAGMENT:7},W=function(e){return e.match(G)},z=z||{};z.global=window,z.isDef=function(e){return void 0!==e},z.exportPath_=function(e,t,n){var r,i=e.split("."),a=n||z.global;i[0]in a||!a.execScript||a.execScript("var "+i[0]);for(;i.length&&(r=i.shift());)!i.length&&z.isDef(t)?a[r]=t:a=a[r]?a[r]:a[r]={}},z.define=function(e,t){var n=t;z.exportPath_(e,n)},z.DEBUG=!0,z.define("goog.LOCALE","en"),z.define("goog.TRUSTED_SITE",!0),z.define("goog.STRICT_MODE_COMPATIBLE",!1),z.provide=function(e){if(z.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');delete z.implicitNamespaces_[e];for(var t=e;(t=t.substring(0,t.lastIndexOf(".")))&&!z.getObjectByName(t);)z.implicitNamespaces_[t]=!0;z.exportPath_(e)},z.forwardDeclare=function(e){},z.isProvided_=function(e){return!z.implicitNamespaces_[e]&&z.isDefAndNotNull(z.getObjectByName(e))},z.implicitNamespaces_={},z.getObjectByName=function(e,t){for(var n,r=e.split("."),i=t||z.global;n=r.shift();){if(!z.isDefAndNotNull(i[n]))return null;i=i[n]}return i},z.globalize=function(e,t){for(var n in t=t||z.global,e)t[n]=e[n]},z.addDependency=function(e,t,n){if(z.DEPENDENCIES_ENABLED){for(var r,i,a=e.replace(/\\/g,"/"),s=z.dependencies_,o=0;r=t[o];o++)s.nameToPath[r]=a;for(var u=0;i=n[u];u++)a in s.requires||(s.requires[a]={}),s.requires[a][i]=!0}},z.define("goog.ENABLE_DEBUG_LOADER",!0),z.logToConsole_=function(e){z.global.console&&z.global.console.error(e)},z.require=function(e){if(z.isProvided_(e))return null;if(z.ENABLE_DEBUG_LOADER){var t=z.getPathFromDeps_(e);if(t)return z.included_[t]=!0,z.writeScripts_(),null}var n="goog.require could not find: "+e;throw z.logToConsole_(n),Error(n)},z.basePath="",z.global.CLOSURE_BASE_PATH,z.global.CLOSURE_NO_DEPS=!0,z.global.CLOSURE_IMPORT_SCRIPT,z.DEPENDENCIES_ENABLED=z.ENABLE_DEBUG_LOADER,z.DEPENDENCIES_ENABLED&&(z.included_={},z.dependencies_={nameToPath:{},requires:{},visited:{},written:{}},z.inHtmlDocument_=function(){var e=z.global.document;return void 0!==e&&"write"in e},z.findBasePath_=function(){if(z.global.CLOSURE_BASE_PATH)z.basePath=z.global.CLOSURE_BASE_PATH;else if(z.inHtmlDocument_())for(var e=z.global.document.getElementsByTagName("script"),t=e.length-1;t>=0;--t){var n=e[t].src,r=n.lastIndexOf("?"),i=-1==r?n.length:r;if("base.js"==n.substr(i-7,7))return void(z.basePath=n.substr(0,i-7))}},z.importScript_=function(e,t){(z.global.CLOSURE_IMPORT_SCRIPT||z.writeScriptTag_)(e,t)&&(z.dependencies_.written[e]=!0)},z.writeScriptTag_=function(e,t){if(z.inHtmlDocument_()){var n=z.global.document;if("complete"==n.readyState){if(/\bdeps.js$/.test(e))return!1;throw Error('Cannot write "'+e+'" after document load')}return void 0===t?n.write('<script type="text/javascript" src="'+e+'"><\/script>'):n.write('<script type="text/javascript">'+t+"<\/script>"),!0}return!1},z.writeScripts_=function(){var e=[],t={},n=z.dependencies_;function r(i){if(!(i in n.written))if(i in n.visited)i in t||(t[i]=!0,e.push(i));else{if(n.visited[i]=!0,i in n.requires)for(var a in n.requires[i])if(!z.isProvided_(a)){if(!(a in n.nameToPath))throw Error("Undefined nameToPath for "+a);r(n.nameToPath[a])}i in t||(t[i]=!0,e.push(i))}}for(var i in z.included_)n.written[i]||r(i);for(var a=0;a<e.length;a++){i=e[a];z.dependencies_.written[i]=!0}for(a=0;a<e.length;a++){(i=e[a])&&z.importScript_(z.basePath+i)}},z.getPathFromDeps_=function(e){return e in z.dependencies_.nameToPath?z.dependencies_.nameToPath[e]:null},z.findBasePath_(),z.global.CLOSURE_NO_DEPS||z.importScript_(z.basePath+"deps.js")),z.isDefAndNotNull=function(e){return null!=e},z.isString=function(e){return"string"==typeof e},z.exportSymbol=function(e,t,n){z.exportPath_(e,t,n)},z.exportProperty=function(e,t,n){e[t]=n},z.inherits=function(e,t){function n(){}n.prototype=t.prototype,e.superClass_=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.base=function(e,n,r){var i=Array.prototype.slice.call(arguments,2);return t.prototype[n].apply(e,i)}},z.global.COMPILED=!1;var Y=z;function X(e){var t;e instanceof X?(this.setScheme(e.getScheme()),this.setUserInfo(e.getUserInfo()),this.setDomain(e.getDomain()),this.setPort(e.getPort()),this.setPath(e.getPath()),this.setQueryData(e.getQueryData().clone()),this.setFragment(e.getFragment())):e&&(t=W(String(e)))?(this.setScheme(t[q.SCHEME]||"",!0),this.setUserInfo(t[q.USER_INFO]||"",!0),this.setDomain(t[q.DOMAIN]||"",!0),this.setPort(t[q.PORT]),this.setPath(t[q.PATH]||"",!0),this.setQueryData(t[q.QUERY_DATA]||"",!0),this.setFragment(t[q.FRAGMENT]||"",!0)):this.queryData_=new X.QueryData(null,null)}function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function J(e,t,n){return t&&Q(e.prototype,t),n&&Q(e,n),e}function ee(e,t){return!t||"object"!==$(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ne(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&re(e,t)}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */X.prototype.scheme_="",X.prototype.userInfo_="",X.prototype.domain_="",X.prototype.port_=null,X.prototype.path_="",X.prototype.queryData_,X.prototype.fragment_="",X.prototype.toString=function(){var e=[],t=this.getScheme();t&&e.push(X.encodeSpecialChars_(t,X.reDisallowedInSchemeOrUserInfo_,!0),":");var n=this.getDomain();if(n){e.push("//");var r=this.getUserInfo();r&&e.push(X.encodeSpecialChars_(r,X.reDisallowedInSchemeOrUserInfo_,!0),"@"),e.push(X.removeDoubleEncoding_(encodeURIComponent(n)));var i=this.getPort();null!=i&&e.push(":",String(i))}var a=this.getPath();a&&(this.hasDomain()&&"/"!=a.charAt(0)&&e.push("/"),e.push(X.encodeSpecialChars_(a,"/"==a.charAt(0)?X.reDisallowedInAbsolutePath_:X.reDisallowedInRelativePath_,!0)));var s=this.getEncodedQuery();s&&e.push("?",s);var o=this.getFragment();return o&&e.push("#",X.encodeSpecialChars_(o,X.reDisallowedInFragment_)),e.join("")},X.prototype.resolve=function(e){var t=this.clone();"data"===t.scheme_&&(t=new X);var n=e.hasScheme();n?t.setScheme(e.getScheme()):n=e.hasUserInfo(),n?t.setUserInfo(e.getUserInfo()):n=e.hasDomain(),n?t.setDomain(e.getDomain()):n=e.hasPort();var r=e.getPath();if(n)t.setPort(e.getPort());else if(n=e.hasPath()){if("/"!=r.charAt(0))if(this.hasDomain()&&!this.hasPath())r="/"+r;else{var i=t.getPath().lastIndexOf("/");-1!=i&&(r=t.getPath().substr(0,i+1)+r)}r=X.removeDotSegments(r)}return n?t.setPath(r):n=e.hasQuery(),n?t.setQueryData(e.getQueryData().clone()):n=e.hasFragment(),n&&t.setFragment(e.getFragment()),t},X.prototype.clone=function(){return new X(this)},X.prototype.getScheme=function(){return this.scheme_},X.prototype.setScheme=function(e,t){return this.scheme_=t?X.decodeOrEmpty_(e,!0):e,this.scheme_&&(this.scheme_=this.scheme_.replace(/:$/,"")),this},X.prototype.hasScheme=function(){return!!this.scheme_},X.prototype.getUserInfo=function(){return this.userInfo_},X.prototype.setUserInfo=function(e,t){return this.userInfo_=t?X.decodeOrEmpty_(e):e,this},X.prototype.hasUserInfo=function(){return!!this.userInfo_},X.prototype.getDomain=function(){return this.domain_},X.prototype.setDomain=function(e,t){return this.domain_=t?X.decodeOrEmpty_(e,!0):e,this},X.prototype.hasDomain=function(){return!!this.domain_},X.prototype.getPort=function(){return this.port_},X.prototype.setPort=function(e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);this.port_=e}else this.port_=null;return this},X.prototype.hasPort=function(){return null!=this.port_},X.prototype.getPath=function(){return this.path_},X.prototype.setPath=function(e,t){return this.path_=t?X.decodeOrEmpty_(e,!0):e,this},X.prototype.hasPath=function(){return!!this.path_},X.prototype.hasQuery=function(){return""!==this.queryData_.toString()},X.prototype.setQueryData=function(e,t){return e instanceof X.QueryData?this.queryData_=e:(t||(e=X.encodeSpecialChars_(e,X.reDisallowedInQuery_)),this.queryData_=new X.QueryData(e,null)),this},X.prototype.getEncodedQuery=function(){return this.queryData_.toString()},X.prototype.getDecodedQuery=function(){return this.queryData_.toDecodedString()},X.prototype.getQueryData=function(){return this.queryData_},X.prototype.getFragment=function(){return this.fragment_},X.prototype.setFragment=function(e,t){return this.fragment_=t?X.decodeOrEmpty_(e):e,this},X.prototype.hasFragment=function(){return!!this.fragment_},X.removeDotSegments=function(e){if(".."==e||"."==e)return"";if(-1==e.indexOf("./")&&-1==e.indexOf("/."))return e;for(var t=0==e.lastIndexOf("/",0),n=e.split("/"),r=[],i=0;i<n.length;){var a=n[i++];"."==a?t&&i==n.length&&r.push(""):".."==a?((r.length>1||1==r.length&&""!=r[0])&&r.pop(),t&&i==n.length&&r.push("")):(r.push(a),t=!0)}return r.join("/")},X.decodeOrEmpty_=function(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""},X.encodeSpecialChars_=function(e,t,n){if(Y.isString(e)){var r=encodeURI(e).replace(t,X.encodeChar_);return n&&(r=X.removeDoubleEncoding_(r)),r}return null},X.encodeChar_=function(e){var t=e.charCodeAt(0);return"%"+(t>>4&15).toString(16)+(15&t).toString(16)},X.removeDoubleEncoding_=function(e){return e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")},X.reDisallowedInSchemeOrUserInfo_=/[#\/\?@]/g,X.reDisallowedInRelativePath_=/[\#\?:]/g,X.reDisallowedInAbsolutePath_=/[\#\?]/g,X.reDisallowedInQuery_=/[\#\?@]/g,X.reDisallowedInFragment_=/#/g,X.QueryData=function(e,t){this.encodedQuery_=e||null},X.QueryData.prototype.ensureKeyMapInitialized_=function(){if(!this.keyMap_&&(this.keyMap_={},this.count_=0,this.encodedQuery_))for(var e=this.encodedQuery_.split("&"),t=0;t<e.length;t++){var n=e[t].indexOf("="),r=null,i=null;n>=0?(r=e[t].substring(0,n),i=e[t].substring(n+1)):r=e[t],r=decodeURIComponent(r.replace(/\+/g," ")),i=i||"",this.add(r,decodeURIComponent(i.replace(/\+/g," ")))}},X.QueryData.prototype.keyMap_=null,X.QueryData.prototype.count_=null,X.QueryData.prototype.getCount=function(){return this.ensureKeyMapInitialized_(),this.count_},X.QueryData.prototype.add=function(e,t){this.ensureKeyMapInitialized_(),this.encodedQuery_=null;var n=this.keyMap_.hasOwnProperty(e)&&this.keyMap_[e];return n||(this.keyMap_[e]=n=[]),n.push(t),this.count_++,this},X.QueryData.prototype.toString=function(){if(this.encodedQuery_)return this.encodedQuery_;if(!this.keyMap_)return"";var e=[];for(var t in this.keyMap_)for(var n=encodeURIComponent(t),r=this.keyMap_[t],i=0;i<r.length;i++){var a=n;""!==r[i]&&(a+="="+encodeURIComponent(r[i])),e.push(a)}return this.encodedQuery_=e.join("&")},X.QueryData.prototype.toDecodedString=function(){return X.decodeOrEmpty_(this.toString())},X.QueryData.prototype.clone=function(){var e=new X.QueryData;if(e.encodedQuery_=this.encodedQuery_,this.keyMap_){var t={};for(var n in this.keyMap_)t[n]=this.keyMap_[n].concat();e.keyMap_=t,e.count_=this.count_}return e};var ie=F.util.Error,ae=(window.shaka,window.goog,function(e){function t(e){var n;return Z(this,t),(n=ee(this,te(t).call(this))).destroyed_=!1,n.operationManager_=new m,n.requestFilters_=new Set,n.responseFilters_=new Set,n.onProgressUpdated_=e||null,n}return ne(t,k),J(t,[{key:"registerRequestFilter",value:function(e){this.requestFilters_.add(e)}},{key:"unregisterRequestFilter",value:function(e){this.requestFilters_.delete(e)}},{key:"clearAllRequestFilters",value:function(){this.requestFilters_.clear()}},{key:"registerResponseFilter",value:function(e){this.responseFilters_.add(e)}},{key:"unregisterResponseFilter",value:function(e){this.responseFilters_.delete(e)}},{key:"clearAllResponseFilters",value:function(){this.responseFilters_.clear()}},{key:"destroy",value:function(){return this.destroyed_=!0,this.requestFilters_.clear(),this.responseFilters_.clear(),this.operationManager_.destroy()}},{key:"request",value:function(e,n){var r=this,i=new t.NumBytesRemainingClass;if(this.destroyed_){var a=Promise.reject(new ie(ie.Severity.CRITICAL,ie.Category.PLAYER,ie.Code.OPERATION_ABORTED));return a.catch(function(){}),new t.PendingRequest(a,function(){return Promise.resolve()},i)}window.asserts.assert(n.uris&&n.uris.length,"Request without URIs!"),n.method=n.method||"GET",n.headers=n.headers||{},n.retryParameters=n.retryParameters?g.cloneObject(n.retryParameters):t.defaultRetryParameters(),n.uris=g.cloneObject(n.uris);var s=this.filterRequest_(e,n),o=s.chain(function(){return r.makeRequestWithRetry_(e,n,i)}),u=o.chain(function(t){return r.filterResponse_(e,t)}),l=Date.now(),c=0;s.promise.then(function(){c=Date.now()-l},function(){});var d=0;o.promise.then(function(){d=Date.now()},function(){});var h=u.chain(function(n){var i=Date.now()-d,a=n.response;return a.timeMs+=c,a.timeMs+=i,n.gotProgress||!r.onProgressUpdated_||a.fromCache||e!=t.RequestType.SEGMENT||r.onProgressUpdated_(a.timeMs,a.data.byteLength),a},function(e){throw e&&(window.asserts.assert(e instanceof ie,"Wrong error type"),e.severity=ie.Severity.CRITICAL),e}),f=new t.PendingRequest(h.promise,h.onAbort_,i);return this.operationManager_.manage(f),f}},{key:"filterRequest_",value:function(e,t){var n=U.completed(void 0),r=!0,i=!1,a=void 0;try{for(var s,o=function(){var r=s.value;n=n.chain(function(){return r(e,t)})},u=this.requestFilters_[Symbol.iterator]();!(r=(s=u.next()).done);r=!0)o()}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n.chain(void 0,function(e){if(e&&e.code==ie.Code.OPERATION_ABORTED)throw e;throw new ie(ie.Severity.CRITICAL,ie.Category.NETWORK,ie.Code.REQUEST_FILTER_ERROR,e)})}},{key:"makeRequestWithRetry_",value:function(e,t,n){var r=new K(t.retryParameters,!1);return this.send_(e,t,r,0,null,n)}},{key:"send_",value:function(e,n,r,i,a,s){var o=this,u=new X(n.uris[i]),l=u.getScheme(),c=!1;l||(l=t.getLocationProtocol_(),window.asserts.assert(":"==l[l.length-1],"location.protocol expected to end with a colon!"),l=l.slice(0,-1),u.setScheme(l),n.uris[i]=u.toString());var d,h=t.schemes_[l],f=h?h.plugin:null;return f?U.notAbortable(r.attempt()).chain(function(){if(o.destroyed_)return U.aborted();d=Date.now();var r=t.RequestType.SEGMENT;return f(n.uris[i],n,e,function(t,n,i){o.onProgressUpdated_&&e===r&&(o.onProgressUpdated_(t,n),c=!0,s.setBytes(i))})}).chain(function(e){return void 0===e.timeMs&&(e.timeMs=Date.now()-d),{response:e,gotProgress:c}},function(t){if(o.destroyed_)return U.aborted();if(t.code===ie.Code.OPERATION_ABORTED)throw t;if(t.code===ie.Code.ATTEMPTS_EXHAUSTED)throw window.asserts.assert(a,"Should have last error"),a;if(t.severity===ie.Severity.RECOVERABLE){var u=new b("retry",{error:t instanceof ie?t:null});o.dispatchEvent(u),i=(i+1)%n.uris.length;var l=t;return o.send_(e,n,r,i,l,s)}throw t}):U.failed(new ie(ie.Severity.CRITICAL,ie.Category.NETWORK,ie.Code.UNSUPPORTED_SCHEME,u))}},{key:"filterResponse_",value:function(e,t){var n=U.completed(void 0),r=!0,i=!1,a=void 0;try{for(var s,o=function(){var r=s.value;n=n.chain(function(){return r(e,t.response)})},u=this.responseFilters_[Symbol.iterator]();!(r=(s=u.next()).done);r=!0)o()}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n.chain(function(){return t},function(e){if(e&&e.code===ie.Code.OPERATION_ABORTED)throw e;var t=ie.Severity.CRITICAL;throw e instanceof ie&&(t=e.severity),new ie(t,ie.Category.NETWORK,ie.Code.RESPONSE_FILTER_ERROR,e)})}}],[{key:"registerScheme",value:function(e,n,r){window.asserts.assert(null==r||r>0,"explicit priority must be > 0"),r=r||t.PluginPriority.APPLICATION;var i=t.schemes_[e];(!i||r>=i.priority)&&(t.schemes_[e]={priority:r,plugin:n})}},{key:"unregisterScheme",value:function(e){delete t.schemes_[e]}},{key:"defaultRetryParameters",value:function(){return K.defaultRetryParameters()}},{key:"makeRequest",value:function(e,t){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null}}},{key:"getLocationProtocol_",value:function(){return window.location.protocol}}]),t}());ae.NumBytesRemainingClass=function(){function e(){Z(this,e),this.bytesToLoad_=0}return J(e,[{key:"setBytes",value:function(e){this.bytesToLoad_=e}},{key:"getBytes",value:function(){return this.bytesToLoad_}}]),e}(),ae.PendingRequest=function(e){function t(e,n,r){var i;return Z(this,t),(i=ee(this,te(t).call(this,e,n))).bytesRemaining_=r,i}return ne(t,U),J(t,[{key:"getBytesRemaining",value:function(){return this.bytesRemaining_.getBytes()}}]),t}(),ae.RequestType={MANIFEST:0,SEGMENT:1,LICENSE:2,APP:3,TIMING:4},ae.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:3},ae.SchemeObject={},ae.schemes_={},ae.ResponseAndGotProgress={};var se=ae;function oe(e){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka=window.shaka||{};window.shaka;var le=function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t,this.shortName="",this.iconUri=n,this.manifestUri=r,this.source=i,this.focus=!1,this.disabled=!1,this.extraText=[],this.certificateUri=null,this.description="",this.isFeatured=!1,this.drm=[u.CLEAR],this.features=[],this.licenseServers=new Map,this.licenseRequestHeaders=new Map,this.requestFilter=null,this.responseFilter=null,this.drmCallback=null,this.clearKeys=new Map,this.extraConfig=null,this.storeCallback=null,this.unstoreCallback=null,this.storedContent=null,this.storedProgress=1}var t,n,r;return t=e,r=[{key:"caseLessAlphaComparator_",value:function(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0}},{key:"makeBlankAsset",value:function(){return new e("","","",o.CUSTOM)}},{key:"fromJSON",value:function(t){var n={};for(var r in t){var i=t[r];if(i&&"object"==oe(i)&&"map"===i.__type__){var a=new Map;for(var s in i)"__type__"!==s&&a.set(s,i[s]);n[r]=a}else n[r]=i}var o=e.makeBlankAsset();return Object.assign(o,n),o}}],(n=[{key:"addDescription",value:function(e){return this.description=e,this}},{key:"addCertificateUri",value:function(e){return this.certificateUri=e,this}},{key:"addFeature",value:function(t){return this.features.push(t),this.features.sort(e.caseLessAlphaComparator_),this}},{key:"addKeySystem",value:function(t){return 1===this.drm.length&&this.drm[0]===u.CLEAR&&(this.drm=[]),this.drm.push(t),this.drm.sort(e.caseLessAlphaComparator_),this}},{key:"setExtraConfig",value:function(e){return this.extraConfig=e,this}},{key:"setRequestFilter",value:function(e){return this.requestFilter=e,this}},{key:"setResponseFilter",value:function(e){return this.responseFilter=e,this}},{key:"addLicenseServer",value:function(e,t){return this.licenseServers.set(e,t),this}},{key:"addLicenseRequestHeader",value:function(e,t){return this.licenseRequestHeaders.set(e,t),this}},{key:"addExtraText",value:function(e){return this.extraText.push(e),this}},{key:"markAsFocused",value:function(){return this.focus=!0,this}},{key:"markAsFeatured",value:function(e){return this.isFeatured=!0,this.shortName=e||this.shortName,this}},{key:"markAsDisabled",value:function(){return this.disabled=!0,this}},{key:"toJSON",value:function(){var e={};for(var t in this){var n=this[t];if(n instanceof Map){var r={__type__:"map"},i=!0,a=!1,s=void 0;try{for(var o,u=n.entries()[Symbol.iterator]();!(i=(o=u.next()).done);i=!0){var l=o.value;r[l[0]]=l[1]}}catch(e){a=!0,s=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw s}}e[t]=r}else e[t]=n}return e}},{key:"applyFilters",value:function(e){var t=this;e.clearAllRequestFilters(),e.clearAllResponseFilters(),this.licenseRequestHeaders.size&&e.registerRequestFilter(function(e,n){return t.addLicenseRequestHeaders_(t.licenseRequestHeaders,e,n)}),this.requestFilter&&e.registerRequestFilter(this.requestFilter),this.responseFilter&&e.registerResponseFilter(this.responseFilter)}},{key:"getConfiguration",value:function(){var e={drm:{},manifest:{dash:{}}};if(this.licenseServers.size&&(e.drm.servers={},this.licenseServers.forEach(function(t,n){e.drm.servers[n]=t})),this.drmCallback&&(e.manifest.dash.customScheme=this.drmCallback),this.clearKeys.size&&(e.drm.clearKeys={},this.clearKeys.forEach(function(t,n){e.drm.clearKeys[n]=t})),this.extraConfig)for(var t in this.extraConfig)e[t]=this.extraConfig[t];return e}},{key:"addLicenseRequestHeaders_",value:function(e,t,n){t===se.RequestType.LICENSE&&e.forEach(function(e,t){n.headers[t]=e})}},{key:"isStored",value:function(){return null!=this.storedContent}}])&&ue(t.prototype,n),r&&ue(t,r),e}();window.shaka=window.shaka||{};window.shaka;var ce={};ce.Source=o,ce.Feature=l,ce.KeySystem=u,ce.ExtraText={},ce.lastUplynkPrefix="",ce.UplynkResponseFilter=function(e,t){e===se.RequestType.MANIFEST&&(t.headers["x-uplynk-prefix"]?ce.lastUplynkPrefix=t.headers["x-uplynk-prefix"]:ce.lastUplynkPrefix="")},ce.UplynkRequestFilter=function(e,t){e===se.RequestType.LICENSE&&(t.uris[0].includes("wv")&&ce.lastUplynkPrefix?t.uris[0]=ce.lastUplynkPrefix.concat("/wv"):t.uris[0].includes("ck")&&ce.lastUplynkPrefix?t.uris[0]=ce.lastUplynkPrefix.concat("/ck"):t.uris[0].includes("pr")&&ce.lastUplynkPrefix&&(t.uris[0]=ce.lastUplynkPrefix.concat("/pr")))},ce.testAssets=[new le("Big Buck Bunny: the Dark Truths of a Video Dev Cartoon (DASH)","https://storage.googleapis.com/shaka-asset-icons/dark_truth.png","https://storage.googleapis.com/shaka-demo-assets/bbb-dark-truths/dash.mpd",o.SHAKA).addFeature(l.DASH).addFeature(l.HIGH_DEFINITION).addFeature(l.MP4).addFeature(l.WEBM).addFeature(l.OFFLINE),new le("Big Buck Bunny: the Dark Truths of a Video Dev Cartoon (HLS)","https://storage.googleapis.com/shaka-asset-icons/dark_truth.png","https://storage.googleapis.com/shaka-demo-assets/bbb-dark-truths-hls/hls.m3u8",o.SHAKA).addDescription("A serious documentary about a problem plaguing video developers.").markAsFeatured("Big Buck Bunny: the Dark Truths").addFeature(l.HLS).addFeature(l.HIGH_DEFINITION).addFeature(l.MP4).addFeature(l.OFFLINE),new le("Angel One (multicodec, multilingual)","https://storage.googleapis.com/shaka-asset-icons/angel_one.png","https://storage.googleapis.com/shaka-demo-assets/angel-one/dash.mpd",o.SHAKA).addDescription("A clip from a classic Star Trek TNG episode, presented in MPEG-DASH.").markAsFeatured("Angel One").addFeature(l.DASH).addFeature(l.MP4).addFeature(l.MULTIPLE_LANGUAGES).addFeature(l.SUBTITLES).addFeature(l.WEBM).addFeature(l.WEBVTT).addFeature(l.OFFLINE),new le("Angel One (multicodec, multilingual, Widevine)","https://storage.googleapis.com/shaka-asset-icons/angel_one.png","https://storage.googleapis.com/shaka-demo-assets/angel-one-widevine/dash.mpd",o.SHAKA).addKeySystem(u.WIDEVINE).addFeature(l.DASH).addFeature(l.MP4).addFeature(l.MULTIPLE_LANGUAGES).addFeature(l.SUBTITLES).addFeature(l.MULTIKEY).addFeature(l.WEBM).addFeature(l.WEBVTT).addFeature(l.OFFLINE).addLicenseServer("com.widevine.alpha","https://cwip-shaka-proxy.appspot.com/no_auth"),new le("Angel One (multicodec, multilingual, ClearKey server)","https://storage.googleapis.com/shaka-asset-icons/angel_one.png","https://storage.googleapis.com/shaka-demo-assets/angel-one-clearkey/dash.mpd",o.SHAKA).addKeySystem(u.CLEAR_KEY).addFeature(l.DASH).addFeature(l.MP4).addFeature(l.MULTIPLE_LANGUAGES).addFeature(l.SUBTITLES).addFeature(l.WEBM).addFeature(l.WEBVTT).addFeature(l.OFFLINE).addLicenseServer("org.w3.clearkey","https://cwip-shaka-proxy.appspot.com/clearkey?_u3wDe7erb7v8Lqt8A3QDQ=ABEiM0RVZneImaq7zN3u_w"),new le("Angel One (HLS, MP4, multilingual)","https://storage.googleapis.com/shaka-asset-icons/angel_one.png","https://storage.googleapis.com/shaka-demo-assets/angel-one-hls/hls.m3u8",o.SHAKA).addFeature(l.HLS).addFeature(l.MP4).addFeature(l.MULTIPLE_LANGUAGES).addFeature(l.SUBTITLES).addFeature(l.SURROUND).addFeature(l.WEBVTT).addFeature(l.OFFLINE),new le("Angel One (HLS, MP4, multilingual, Widevine)","https://storage.googleapis.com/shaka-asset-icons/angel_one.png","https://storage.googleapis.com/shaka-demo-assets/angel-one-widevine-hls/hls.m3u8",o.SHAKA).addKeySystem(u.WIDEVINE).addFeature(l.HLS).addFeature(l.MP4).addFeature(l.MULTIPLE_LANGUAGES).addFeature(l.SUBTITLES).addFeature(l.SURROUND).addFeature(l.MULTIKEY).addFeature(l.WEBVTT).addFeature(l.OFFLINE).addLicenseServer("com.widevine.alpha","https://cwip-shaka-proxy.appspot.com/no_auth"),new le("Sintel 4k (multicodec)","https://storage.googleapis.com/shaka-asset-icons/sintel.png","https://storage.googleapis.com/shaka-demo-assets/sintel/dash.mpd",o.SHAKA).addFeature(l.DASH).addFeature(l.HIGH_DEFINITION).addFeature(l.MP4).addFeature(l.SUBTITLES).addFeature(l.ULTRA_HIGH_DEFINITION).addFeature(l.WEBM).addFeature(l.WEBVTT).addFeature(l.OFFLINE),new le("Sintel w/ trick mode (MP4 only, 720p)","https://storage.googleapis.com/shaka-asset-icons/sintel.png","https://storage.googleapis.com/shaka-demo-assets/sintel-trickplay/dash.mpd",o.SHAKA).addFeature(l.DASH).addFeature(l.MP4).addFeature(l.SUBTITLES).addFeature(l.TRICK_MODE).addFeature(l.WEBVTT).addFeature(l.OFFLINE),new le("Sintel 4k (WebM only)","https://storage.googleapis.com/shaka-asset-icons/sintel.png","https://storage.googleapis.com/shaka-demo-assets/sintel-webm-only/dash.mpd",o.SHAKA).addFeature(l.DASH).addFeature(l.HIGH_DEFINITION).addFeature(l.SUBTITLES).addFeature(l.ULTRA_HIGH_DEFINITION).addFeature(l.WEBM).addFeature(l.WEBVTT).addFeature(l.OFFLINE),new le("Sintel 4k (MP4 only)","https://storage.googleapis.com/shaka-asset-icons/sintel.png","https://storage.googleapis.com/shaka-demo-assets/sintel-mp4-only/dash.mpd",o.SHAKA).addFeature(l.DASH).addFeature(l.HIGH_DEFINITION).addFeature(l.MP4).addFeature(l.SUBTITLES).addFeature(l.ULTRA_HIGH_DEFINITION).addFeature(l.WEBVTT).addFeature(l.OFFLINE),new le("Sintel 4k (multicodec, Widevine)","https://storage.googleapis.com/shaka-asset-icons/sintel.png","https://storage.googleapis.com/shaka-demo-assets/sintel-widevine/dash.mpd",o.SHAKA).addDescription("A Blender Foundation short film, protected by Widevine encryption.").markAsFeatured("Sintel").addKeySystem(u.WIDEVINE).addFeature(l.DASH).addFeature(l.HIGH_DEFINITION).addFeature(l.MP4).addFeature(l.MULTIKEY).addFeature(l.SUBTITLES).addFeature(l.ULTRA_HIGH_DEFINITION).addFeature(l.WEBM).addFeature(l.WEBVTT).addFeature(l.OFFLINE).addLicenseServer("com.widevine.alpha","https://cwip-shaka-proxy.appspot.com/no_auth"),new le("Sintel 4k (multicodec, VTT in MP4)","https://storage.googleapis.com/shaka-asset-icons/sintel.png","https://storage.googleapis.com/shaka-demo-assets/sintel-mp4-wvtt/dash.mpd",o.SHAKA).addFeature(l.DASH).addFeature(l.HIGH_DEFINITION).addFeature(l.MP4).addFeature(l.SUBTITLES).addFeature(l.ULTRA_HIGH_DEFINITION).addFeature(l.WEBVTT).addFeature(l.OFFLINE),new le("Sintel w/ 44 subtitle languages","https://storage.googleapis.com/shaka-asset-icons/sintel.png","https://storage.googleapis.com/shaka-demo-assets/sintel-many-subs/dash.mpd",o.SHAKA).addFeature(l.DASH).addFeature(l.MP4).addFeature(l.SUBTITLES).addFeature(l.SURROUND).addFeature(l.WEBVTT).addFeature(l.OFFLINE),new le("Heliocentrism (multicodec, multiperiod)","https://storage.googleapis.com/shaka-asset-icons/heliocentricism.png","https://storage.googleapis.com/shaka-demo-assets/heliocentrism/heliocentrism.mpd",o.SHAKA).addFeature(l.DASH).addFeature(l.MP4).addFeature(l.MULTIPERIOD).addFeature(l.WEBM).addFeature(l.OFFLINE),new le("Heliocentrism (multicodec, multiperiod, xlink)","https://storage.googleapis.com/shaka-asset-icons/heliocentricism.png","https://storage.googleapis.com/shaka-demo-assets/heliocentrism-xlink/heliocentrism.mpd",o.SHAKA).addFeature(l.DASH).addFeature(l.MP4).addFeature(l.MULTIPERIOD).addFeature(l.WEBM).addFeature(l.XLINK).addFeature(l.OFFLINE),new le('"Dig the Uke" by Stefan Kartenberg (audio only, multicodec)',"https://storage.googleapis.com/shaka-asset-icons/audio_only.png","https://storage.googleapis.com/shaka-demo-assets/dig-the-uke-clear/dash.mpd",o.SHAKA).addDescription("An audio-only presentation performed by Stefan Kartenberg.").markAsFeatured("Dig the Uke").addFeature(l.DASH).addFeature(l.MP4).addFeature(l.AUDIO_ONLY).addFeature(l.WEBM).addFeature(l.OFFLINE),new le('"Dig the Uke" by Stefan Kartenberg (audio only, multicodec, Widevine)',"https://storage.googleapis.com/shaka-asset-icons/audio_only.png","https://storage.googleapis.com/shaka-demo-assets/dig-the-uke/dash.mpd",o.SHAKA).addKeySystem(u.WIDEVINE).addFeature(l.DASH).addFeature(l.MP4).addFeature(l.AUDIO_ONLY).addFeature(l.WEBM).addFeature(l.OFFLINE).addLicenseServer("com.widevine.alpha","https://cwip-shaka-proxy.appspot.com/no_auth"),new le("Tears of Steel (multicodec, TTML)","https://storage.googleapis.com/shaka-asset-icons/tears_of_steel.png","https://storage.googleapis.com/shaka-demo-assets/tos-ttml/dash.mpd",o.SHAKA).addFeature(l.DASH).addFeature(l.HIGH_DEFINITION).addFeature(l.MP4).addFeature(l.SUBTITLES).addFeature(l.TTML).addFeature(l.WEBM).addFeature(l.OFFLINE),new le("Tears of Steel (multicodec, surround + stereo)","https://storage.googleapis.com/shaka-asset-icons/tears_of_steel.png","https://storage.googleapis.com/shaka-demo-assets/tos-surround/dash.mpd",o.SHAKA).addFeature(l.DASH).addFeature(l.MP4).addFeature(l.SURROUND).addFeature(l.WEBM).addFeature(l.OFFLINE),new le("Shaka Player History (multicodec, live, DASH)","https://storage.googleapis.com/shaka-asset-icons/shaka.png","https://storage.googleapis.com/shaka-live-assets/player-source.mpd",o.SHAKA).addFeature(l.DASH).addFeature(l.HIGH_DEFINITION).addFeature(l.LIVE).addFeature(l.MP4).addFeature(l.WEBM),new le("Shaka Player History (live, HLS)","https://storage.googleapis.com/shaka-asset-icons/shaka.png","https://storage.googleapis.com/shaka-live-assets/player-source.m3u8",o.SHAKA).addDescription("A self-indulgent HLS livestream.").markAsFeatured("Shaka Player History").addFeature(l.HIGH_DEFINITION).addFeature(l.HLS).addFeature(l.LIVE).addFeature(l.MP4),new le("Multi-DRM","https://storage.googleapis.com/shaka-asset-icons/tears_of_steel.png","https://media.axprod.net/TestVectors/v7-MultiDRM-SingleKey/Manifest.mpd",o.AXINOM).addKeySystem(u.PLAYREADY).addKeySystem(u.WIDEVINE).addFeature(l.DASH).addFeature(l.HIGH_DEFINITION).addFeature(l.MP4).addFeature(l.MULTIPLE_LANGUAGES).addFeature(l.SUBTITLES).addFeature(l.TTML).addFeature(l.ULTRA_HIGH_DEFINITION).addFeature(l.WEBVTT).addLicenseServer("com.widevine.alpha","https://drm-widevine-licensing.axtest.net/AcquireLicense").addLicenseServer("com.microsoft.playready","https://drm-playready-licensing.axtest.net/AcquireLicense").addLicenseRequestHeader("X-AxDRM-Message","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ2ZXJzaW9uIjoxLCJjb21fa2V5X2lkIjoiYjMzNjRlYjUtNTFmNi00YWUzLThjOTgtMzNjZWQ1ZTMxYzc4IiwibWVzc2FnZSI6eyJ0eXBlIjoiZW50aXRsZW1lbnRfbWVzc2FnZSIsImtleXMiOlt7ImlkIjoiOWViNDA1MGQtZTQ0Yi00ODAyLTkzMmUtMjdkNzUwODNlMjY2IiwiZW5jcnlwdGVkX2tleSI6ImxLM09qSExZVzI0Y3Iya3RSNzRmbnc9PSJ9XX19.4lWwW46k-oWcah8oN18LPj5OLS5ZU-_AQv7fe0JhNjA"),new le("Multi-DRM, multi-key","https://storage.googleapis.com/shaka-asset-icons/tears_of_steel.png","https://media.axprod.net/TestVectors/v7-MultiDRM-MultiKey/Manifest.mpd",o.AXINOM).addKeySystem(u.PLAYREADY).addKeySystem(u.WIDEVINE).addFeature(l.DASH).addFeature(l.HIGH_DEFINITION).addFeature(l.MP4).addFeature(l.MULTIPLE_LANGUAGES).addFeature(l.MULTIKEY).addFeature(l.SUBTITLES).addFeature(l.TTML).addFeature(l.ULTRA_HIGH_DEFINITION).addFeature(l.WEBVTT).addLicenseServer("com.widevine.alpha","https://drm-widevine-licensing.axtest.net/AcquireLicense").addLicenseServer("com.microsoft.playready","https://drm-playready-licensing.axtest.net/AcquireLicense").addLicenseRequestHeader("X-AxDRM-Message","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ2ZXJzaW9uIjoxLCJjb21fa2V5X2lkIjoiYjMzNjRlYjUtNTFmNi00YWUzLThjOTgtMzNjZWQ1ZTMxYzc4IiwibWVzc2FnZSI6eyJ0eXBlIjoiZW50aXRsZW1lbnRfbWVzc2FnZSIsImtleXMiOlt7ImlkIjoiODAzOTliZjUtOGEyMS00MDE0LTgwNTMtZTI3ZTc0OGU5OGMwIiwiZW5jcnlwdGVkX2tleSI6ImxpTkpxVmFZa05oK01LY3hKRms3SWc9PSJ9LHsiaWQiOiI5MDk1M2UwOS02Y2IyLTQ5YTMtYTI2MC03YTVmZWZlYWQ0OTkiLCJlbmNyeXB0ZWRfa2V5Ijoia1l0SEh2cnJmQ01lVmRKNkxrYmtuZz09In0seyJpZCI6IjBlNGRhOTJiLWQwZTgtNGE2Ni04YzNmLWMyNWE5N2ViNjUzMiIsImVuY3J5cHRlZF9rZXkiOiI3dzdOWkhITE1nSjRtUUtFSzVMVE1RPT0ifSx7ImlkIjoiNTg1ZjIzM2YtMzA3Mi00NmYxLTlmYTQtNmRjMjJjNjZhMDE0IiwiZW5jcnlwdGVkX2tleSI6IkFjNFVVbVl0Qko1blBROU4xNXJjM2c9PSJ9LHsiaWQiOiI0MjIyYmQ3OC1iYzQ1LTQxYmYtYjYzZS02ZjgxNGRjMzkxZGYiLCJlbmNyeXB0ZWRfa2V5IjoiTzZGTzBmcVNXb3BwN2JqYy9ENGxNQT09In1dfX0.uF6YlKAREOmbniAeYiH070HSJhV0YS7zSKjlCtiDR5Y"),new le("Multi-DRM, multi-key, multi-Period","https://storage.googleapis.com/shaka-asset-icons/tears_of_steel.png","https://media.axprod.net/TestVectors/v7-MultiDRM-MultiKey-MultiPeriod/Manifest.mpd",o.AXINOM).addKeySystem(u.PLAYREADY).addKeySystem(u.WIDEVINE).addFeature(l.DASH).addFeature(l.HIGH_DEFINITION).addFeature(l.MP4).addFeature(l.MULTIPLE_LANGUAGES).addFeature(l.SUBTITLES).addFeature(l.MULTIKEY).addFeature(l.MULTIPERIOD).addFeature(l.TTML).addFeature(l.ULTRA_HIGH_DEFINITION).addFeature(l.WEBVTT).addLicenseServer("com.widevine.alpha","https://drm-widevine-licensing.axtest.net/AcquireLicense").addLicenseServer("com.microsoft.playready","https://drm-playready-licensing.axtest.net/AcquireLicense").addLicenseRequestHeader("X-AxDRM-Message","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ2ZXJzaW9uIjoxLCJjb21fa2V5X2lkIjoiYjMzNjRlYjUtNTFmNi00YWUzLThjOTgtMzNjZWQ1ZTMxYzc4IiwibWVzc2FnZSI6eyJ0eXBlIjoiZW50aXRsZW1lbnRfbWVzc2FnZSIsImtleXMiOlt7ImlkIjoiMDg3Mjc4NmUtZjllNy00NjVmLWEzYTItNGU1YjBlZjhmYTQ1IiwiZW5jcnlwdGVkX2tleSI6IlB3NitlRVlOY3ZqWWJmc2gzWDNmbWc9PSJ9LHsiaWQiOiJjMTRmMDcwOS1mMmI5LTQ0MjctOTE2Yi02MWI1MjU4NjUwNmEiLCJlbmNyeXB0ZWRfa2V5IjoiLzErZk5paDM4bXFSdjR5Y1l6bnQvdz09In0seyJpZCI6IjhiMDI5ZTUxLWQ1NmEtNDRiZC05MTBmLWQ0YjVmZDkwZmJhMiIsImVuY3J5cHRlZF9rZXkiOiJrcTBKdVpFanBGTjhzYVRtdDU2ME9nPT0ifSx7ImlkIjoiMmQ2ZTkzODctNjBjYS00MTQ1LWFlYzItYzQwODM3YjRiMDI2IiwiZW5jcnlwdGVkX2tleSI6IlRjUlFlQld4RW9IT0tIcmFkNFNlVlE9PSJ9LHsiaWQiOiJkZTAyZjA3Zi1hMDk4LTRlZTAtYjU1Ni05MDdjMGQxN2ZiYmMiLCJlbmNyeXB0ZWRfa2V5IjoicG9lbmNTN0dnbWVHRmVvSjZQRUFUUT09In0seyJpZCI6IjkxNGU2OWY0LTBhYjMtNDUzNC05ZTlmLTk4NTM2MTVlMjZmNiIsImVuY3J5cHRlZF9rZXkiOiJlaUkvTXNsbHJRNHdDbFJUL0xObUNBPT0ifSx7ImlkIjoiZGE0NDQ1YzItZGI1ZS00OGVmLWIwOTYtM2VmMzQ3YjE2YzdmIiwiZW5jcnlwdGVkX2tleSI6IjJ3K3pkdnFycERWM3hSMGJKeTR1Z3c9PSJ9LHsiaWQiOiIyOWYwNWU4Zi1hMWFlLTQ2ZTQtODBlOS0yMmRjZDQ0Y2Q3YTEiLCJlbmNyeXB0ZWRfa2V5IjoiL3hsU0hweHdxdTNnby9nbHBtU2dhUT09In0seyJpZCI6IjY5ZmU3MDc3LWRhZGQtNGI1NS05NmNkLWMzZWRiMzk5MTg1MyIsImVuY3J5cHRlZF9rZXkiOiJ6dTZpdXpOMnBzaTBaU3hRaUFUa1JRPT0ifV19fQ.BXr93Et1krYMVs-CUnf7F3ywJWFRtxYdkR7Qn4w3-to"),new le("Clear, single-Period","https://storage.googleapis.com/shaka-asset-icons/tears_of_steel.png","https://media.axprod.net/TestVectors/v7-Clear/Manifest.mpd",o.AXINOM).addFeature(l.DASH).addFeature(l.HIGH_DEFINITION).addFeature(l.MP4).addFeature(l.MULTIPLE_LANGUAGES).addFeature(l.TTML).addFeature(l.SUBTITLES).addFeature(l.ULTRA_HIGH_DEFINITION).addFeature(l.WEBVTT).addFeature(l.OFFLINE),new le("Clear, multi-Period","https://storage.googleapis.com/shaka-asset-icons/tears_of_steel.png","https://media.axprod.net/TestVectors/v7-Clear/Manifest_MultiPeriod.mpd",o.AXINOM).addFeature(l.DASH).addFeature(l.HIGH_DEFINITION).addFeature(l.MP4).addFeature(l.MULTIPLE_LANGUAGES).addFeature(l.MULTIPERIOD).addFeature(l.TTML).addFeature(l.SUBTITLES).addFeature(l.ULTRA_HIGH_DEFINITION).addFeature(l.WEBVTT).addFeature(l.OFFLINE),new le("Clear, Live DASH","https://storage.googleapis.com/shaka-asset-icons/axinom_test.png","https://akamai-axtest.akamaized.net/routes/lapd-v1-acceptance/www_c4/Manifest.mpd",o.AXINOM).addFeature(l.LIVE).addFeature(l.MP4).addFeature(l.DASH).addFeature(l.MULTIPERIOD).addFeature(l.HIGH_DEFINITION).addFeature(l.WEBVTT),new le("Clear, Live HLS","https://storage.googleapis.com/shaka-asset-icons/axinom_test.png","https://akamai-axtest.akamaized.net/routes/lapd-v1-acceptance/www_c4/Manifest.m3u8",o.AXINOM).addFeature(l.HLS).addFeature(l.LIVE).addFeature(l.MP4).addFeature(l.HIGH_DEFINITION),new le("Tears of Steel","https://storage.googleapis.com/shaka-asset-icons/tears_of_steel.png","https://demo.unified-streaming.com/video/tears-of-steel/tears-of-steel.ism/.mpd",o.UNIFIED_STREAMING).addFeature(l.DASH).addFeature(l.HIGH_DEFINITION).addFeature(l.MP4).addFeature(l.OFFLINE),new le("Tears of Steel (Widevine)","https://storage.googleapis.com/shaka-asset-icons/tears_of_steel.png","https://demo.unified-streaming.com/video/tears-of-steel/tears-of-steel-dash-widevine.ism/.mpd",o.UNIFIED_STREAMING).addKeySystem(u.WIDEVINE).addFeature(l.DASH).addFeature(l.HIGH_DEFINITION).addFeature(l.MP4).addFeature(l.SUBTITLES).addFeature(l.TTML).addLicenseServer("com.widevine.alpha","https://cwip-shaka-proxy.appspot.com/no_auth"),new le("Tears of Steel (PlayReady)","https://storage.googleapis.com/shaka-asset-icons/tears_of_steel.png","https://demo.unified-streaming.com/video/tears-of-steel/tears-of-steel-dash-playready.ism/.mpd",o.UNIFIED_STREAMING).addKeySystem(u.PLAYREADY).addFeature(l.DASH).addFeature(l.HIGH_DEFINITION).addFeature(l.MP4).addFeature(l.SUBTITLES).addFeature(l.TTML).addLicenseServer("com.microsoft.playready","https://test.playready.microsoft.com/service/rightsmanager.asmx?PlayRight=1&UseSimpleNonPersistentLicense=1"),new le("Tears of Steel (subtitles)","https://storage.googleapis.com/shaka-asset-icons/tears_of_steel.png","https://demo.unified-streaming.com/video/tears-of-steel/tears-of-steel-en.ism/.mpd",o.UNIFIED_STREAMING).addFeature(l.DASH).addFeature(l.HIGH_DEFINITION).addFeature(l.MP4).addFeature(l.SUBTITLES).addFeature(l.TTML).addFeature(l.OFFLINE),new le("Big Buck Bunny (DASH-IF)","https://storage.googleapis.com/shaka-asset-icons/big_buck_bunny.png","https://dash.akamaized.net/dash264/TestCases/1c/qualcomm/2/MultiRate.mpd",o.DASH_IF).addFeature(l.MP4).addFeature(l.DASH).addFeature(l.HIGH_DEFINITION).addFeature(l.OFFLINE),new le("Live sim (2s segments)","https://storage.googleapis.com/shaka-asset-icons/dash_if_test_pattern.png","https://livesim.dashif.org/livesim/utc_head/testpic_2s/Manifest.mpd",o.DASH_IF).addFeature(l.LIVE).addFeature(l.MP4).addFeature(l.DASH),new le("Live sim SegmentTimeline w $Time$ (6s segments)","https://storage.googleapis.com/shaka-asset-icons/dash_if_test_pattern.png","https://livesim.dashif.org/livesim/segtimeline_1/utc_head/testpic_6s/Manifest.mpd",o.DASH_IF).addFeature(l.DASH).addFeature(l.LIVE).addFeature(l.MP4),new le("Live sim SegmentTimeline w $Number$ (6s segments)","https://storage.googleapis.com/shaka-asset-icons/dash_if_test_pattern.png","https://livesim.dashif.org/livesim/segtimelinenr_1/utc_head/testpic_6s/Manifest.mpd",o.DASH_IF).addFeature(l.DASH).addFeature(l.LIVE).addFeature(l.MP4),new le("Live sim SegmentTimeline StartOver [-20s, +20s] (2s segments)","https://storage.googleapis.com/shaka-asset-icons/dash_if_test_pattern.png","https://livesim.dashif.org/livesim/segtimeline_1/startrel_-20/stoprel_20/timeoffset_0/testpic_2s/Manifest.mpd",o.DASH_IF).addFeature(l.DASH).addFeature(l.MP4),new le("Live sim StartOver SegTmpl Duration [-20s, +20s] (2s segments)","https://storage.googleapis.com/shaka-asset-icons/dash_if_test_pattern.png","https://livesim.dashif.org/livesim/startrel_-20/stoprel_20/timeoffset_0/testpic_2s/Manifest.mpd",o.DASH_IF).addFeature(l.DASH).addFeature(l.MP4),new le("Live sim SegTmpl Duration (multi-period 60s)","https://storage.googleapis.com/shaka-asset-icons/dash_if_test_pattern.png","https://livesim.dashif.org/livesim/utc_head/periods_60/testpic_2s/Manifest.mpd",o.DASH_IF).addFeature(l.DASH).addFeature(l.LIVE).addFeature(l.MP4).addFeature(l.MULTIPERIOD),new le("Live sim TTML Image Subtitles embedded (VoD)","https://storage.googleapis.com/shaka-asset-icons/dash_if_test_pattern.png","https://livesim.dashif.org/dash/vod/testpic_2s/img_subs.mpd",o.DASH_IF).addFeature(l.DASH).addFeature(l.SUBTITLES).addFeature(l.MP4).addFeature(l.TTML),new le("Big Buck Bunny (Live)","https://storage.googleapis.com/shaka-asset-icons/big_buck_bunny.png","https://wowzaec2demo.streamlock.net/live/bigbuckbunny/manifest_mpm4sav_mvtime.mpd",o.WOWZA).addFeature(l.DASH).addFeature(l.LIVE).addFeature(l.MP4),new le("Art of Motion (DASH)","https://storage.googleapis.com/shaka-asset-icons/art_of_motion.png","https://bitdash-a.akamaihd.net/content/MI201109210084_1/mpds/f08e80da-bf1d-4e3d-8899-f0f6155f6efa.mpd",o.BITCODIN).addFeature(l.DASH).addFeature(l.HIGH_DEFINITION).addFeature(l.MP4).addFeature(l.OFFLINE),new le("Art of Motion (HLS, TS)","https://storage.googleapis.com/shaka-asset-icons/art_of_motion.png","https://bitdash-a.akamaihd.net/content/MI201109210084_1/m3u8s/f08e80da-bf1d-4e3d-8899-f0f6155f6efa.m3u8",o.BITCODIN).markAsDisabled().addFeature(l.HIGH_DEFINITION).addFeature(l.HLS).addFeature(l.MP2TS).addFeature(l.OFFLINE),new le("Sintel (HLS, TS, 4k)","https://storage.googleapis.com/shaka-asset-icons/sintel.png","https://bitdash-a.akamaihd.net/content/sintel/hls/playlist.m3u8",o.BITCODIN).markAsDisabled().addFeature(l.HIGH_DEFINITION).addFeature(l.HLS).addFeature(l.MP2TS).addFeature(l.OFFLINE),new le("Big Buck Bunny (Nimble)","https://storage.googleapis.com/shaka-asset-icons/big_buck_bunny.png","https://video.wmspanel.com/local/raw/BigBuckBunny_320x180.mp4/manifest.mpd",o.NIMBLE_STREAMER).markAsDisabled().addFeature(l.DASH).addFeature(l.MP4).addFeature(l.HIGH_DEFINITION),new le("Azure Trailer","https://storage.googleapis.com/shaka-asset-icons/azure.png","https://amssamples.streaming.mediaservices.windows.net/91492735-c523-432b-ba01-faba6c2206a2/AzureMediaServicesPromo.ism/manifest(format=mpd-time-csf)",o.AZURE_MEDIA_SERVICES).addFeature(l.DASH).addFeature(l.MP4).addFeature(l.HIGH_DEFINITION).addFeature(l.OFFLINE),new le("Big Buck Bunny (Azure)","https://storage.googleapis.com/shaka-asset-icons/big_buck_bunny.png","https://amssamples.streaming.mediaservices.windows.net/622b189f-ec39-43f2-93a2-201ac4e31ce1/BigBuckBunny.ism/manifest(format=mpd-time-csf)",o.AZURE_MEDIA_SERVICES).addKeySystem(u.PLAYREADY).addKeySystem(u.WIDEVINE).addFeature(l.DASH).addFeature(l.HIGH_DEFINITION).addFeature(l.MP4).addFeature(l.OFFLINE).addLicenseServer("com.widevine.alpha","https://amssamples.keydelivery.mediaservices.windows.net/Widevine/?KID=1ab45440-532c-4399-94dc-5c5ad9584bac").addLicenseServer("com.microsoft.playready","https://amssamples.keydelivery.mediaservices.windows.net/PlayReady/"),new le("Tears of Steel (external text)","https://storage.googleapis.com/shaka-asset-icons/tears_of_steel.png","https://ams-samplescdn.streaming.mediaservices.windows.net/11196e3d-2f40-4835-9a4d-fc52751b0323/TearsOfSteel_WAMEH264SmoothStreaming720p.ism/manifest(format=mpd-time-csf)",o.AZURE_MEDIA_SERVICES).addFeature(l.DASH).addFeature(l.MP4).addFeature(l.SUBTITLES).addFeature(l.WEBVTT).addFeature(l.OFFLINE).addExtraText({uri:"https://ams-samplescdn.streaming.mediaservices.windows.net/11196e3d-2f40-4835-9a4d-fc52751b0323/TOS-en.vtt",language:"en",kind:"subtitle",mime:"text/vtt"}).addExtraText({uri:"https://ams-samplescdn.streaming.mediaservices.windows.net/11196e3d-2f40-4835-9a4d-fc52751b0323/TOS-es.vtt",language:"es",kind:"subtitle",mime:"text/vtt"}).addExtraText({uri:"https://ams-samplescdn.streaming.mediaservices.windows.net/11196e3d-2f40-4835-9a4d-fc52751b0323/TOS-fr.vtt",language:"fr",kind:"subtitle",mime:"text/vtt"}),new le("live profile","https://storage.googleapis.com/shaka-asset-icons/sintel.png","https://download.tsi.telecom-paristech.fr/gpac/DASH_CONFORMANCE/TelecomParisTech/mp4-live/mp4-live-mpd-AV-BS.mpd",o.GPAC).markAsDisabled().addFeature(l.DASH).addFeature(l.MP4),new le("live profile with five periods","https://storage.googleapis.com/shaka-asset-icons/gpac_test_pattern.png","https://download.tsi.telecom-paristech.fr/gpac/DASH_CONFORMANCE/TelecomParisTech/mp4-live-periods/mp4-live-periods-mpd.mpd",o.GPAC).addFeature(l.DASH).addFeature(l.MP4).addFeature(l.MULTIPERIOD).addFeature(l.HIGH_DEFINITION).addFeature(l.OFFLINE),new le("main profile, single file","https://storage.googleapis.com/shaka-asset-icons/gpac_test_pattern.png","https://download.tsi.telecom-paristech.fr/gpac/DASH_CONFORMANCE/TelecomParisTech/mp4-main-single/mp4-main-single-mpd-AV-NBS.mpd",o.GPAC).addFeature(l.DASH).addFeature(l.MP4).addFeature(l.HIGH_DEFINITION).addFeature(l.OFFLINE),new le("main profile, multiple files","https://storage.googleapis.com/shaka-asset-icons/gpac_test_pattern.png","https://download.tsi.telecom-paristech.fr/gpac/DASH_CONFORMANCE/TelecomParisTech/mp4-main-multi/mp4-main-multi-mpd-AV-BS.mpd",o.GPAC).markAsDisabled().addFeature(l.DASH).addFeature(l.MP4),new le("onDemand profile","https://storage.googleapis.com/shaka-asset-icons/gpac_test_pattern.png","https://download.tsi.telecom-paristech.fr/gpac/DASH_CONFORMANCE/TelecomParisTech/mp4-onDemand/mp4-onDemand-mpd-AV.mpd",o.GPAC).addFeature(l.DASH).addFeature(l.MP4).addFeature(l.HIGH_DEFINITION).addFeature(l.OFFLINE),new le("main profile, open GOP","https://storage.googleapis.com/shaka-asset-icons/gpac_test_pattern.png","https://download.tsi.telecom-paristech.fr/gpac/DASH_CONFORMANCE/TelecomParisTech/mp4-main-ogop/mp4-main-ogop-mpd-AV-BS.mpd",o.GPAC).markAsDisabled().addFeature(l.DASH).addFeature(l.MP4),new le("full profile, gradual decoding refresh","https://storage.googleapis.com/shaka-asset-icons/gpac_test_pattern.png","https://download.tsi.telecom-paristech.fr/gpac/DASH_CONFORMANCE/TelecomParisTech/mp4-full-gdr/mp4-full-gdr-mpd-AV-BS.mpd",o.GPAC).markAsDisabled().addFeature(l.DASH).addFeature(l.MP4),new le("Multi DRM - 8 Byte IV","https://storage.googleapis.com/shaka-asset-icons/azure.png","https://content.uplynk.com/847859273a4b4a81959d8fea181672a4.mpd?pr.version=2&pr.playenabler=B621D91F-EDCC-4035-8D4B-DC71760D43E9&pr.securitylevel=150",o.UPLYNK).addKeySystem(u.PLAYREADY).addKeySystem(u.WIDEVINE).addFeature(l.DASH).addFeature(l.MP4).addFeature(l.MULTIKEY).addFeature(l.AESCTR_8_BYTE_IV).addFeature(l.HIGH_DEFINITION).addLicenseServer("com.microsoft.playready","https://content.uplynk.com/pr").addLicenseServer("com.widevine.alpha","https://content.uplynk.com/wv").setRequestFilter(ce.UplynkRequestFilter).setResponseFilter(ce.UplynkResponseFilter),new le("Multi DRM - MultiPeriod - 8 Byte IV","https://storage.googleapis.com/shaka-asset-icons/sintel.png","https://content.uplynk.com/054225d59be2454fabdca3e96912d847.mpd?ad=cleardash&pr.version=2&pr.playenabler=B621D91F-EDCC-4035-8D4B-DC71760D43E9&pr.securitylevel=150",o.UPLYNK).addKeySystem(u.PLAYREADY).addKeySystem(u.WIDEVINE).addFeature(l.DASH).addFeature(l.MP4).addFeature(l.SUBTITLES).addFeature(l.MULTIKEY).addFeature(l.MULTIPERIOD).addFeature(l.WEBVTT).addFeature(l.AESCTR_8_BYTE_IV).addFeature(l.HIGH_DEFINITION).addLicenseServer("com.microsoft.playready","https://content.uplynk.com/pr").addLicenseServer("com.widevine.alpha","https://content.uplynk.com/wv").setRequestFilter(ce.UplynkRequestFilter).setResponseFilter(ce.UplynkResponseFilter),new le("Widevine - 16 Byte IV","https://storage.googleapis.com/shaka-asset-icons/big_buck_bunny.png","https://content.uplynk.com/224ac8717e714b68831997ab6cea4015.mpd",o.UPLYNK).markAsDisabled().addKeySystem(u.WIDEVINE).addFeature(l.DASH).addFeature(l.MP4).addFeature(l.MULTIKEY).addFeature(l.AESCTR_16_BYTE_IV).addFeature(l.HIGH_DEFINITION).addLicenseServer("com.widevine.alpha","https://content.uplynk.com/wv").setRequestFilter(ce.UplynkRequestFilter).setResponseFilter(ce.UplynkResponseFilter),new le("Widevine - 16 Byte IV - (mix of encrypted and unencrypted periods)","https://storage.googleapis.com/shaka-asset-icons/sintel.png","https://content.uplynk.com/1eb40d8e64234f5c9879db7045c3d48c.mpd?ad=cleardash&rays=cdefg",o.UPLYNK).markAsDisabled().addKeySystem(u.WIDEVINE).addFeature(l.DASH).addFeature(l.MP4).addFeature(l.MULTIPLE_LANGUAGES).addFeature(l.MULTIPERIOD).addFeature(l.MULTIKEY).addFeature(l.HIGH_DEFINITION).addFeature(l.AESCTR_16_BYTE_IV).addFeature(l.ENCRYPTED_WITH_CLEAR).addLicenseServer("com.widevine.alpha","https://content.uplynk.com/wv").setRequestFilter(ce.UplynkRequestFilter).setResponseFilter(ce.UplynkResponseFilter)];var de=ce,he=n(3),fe=n(6),pe=n.n(fe);function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ve=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"make",value:function(e,t){pe()(e,{content:t,placement:"bottom",arrow:!0,animation:"scale",size:"large"})}}],(n=null)&&me(t.prototype,n),r&&me(t,r),e}(),ye={ARIA_LABEL:"aria-label",SEEK_BAR_BASE_COLOR:"rgba(255, 255, 255, 0.3)",SEEK_BAR_PLAYED_COLOR:"rgb(255, 255, 255)",SEEK_BAR_BUFFERED_COLOR:"rgba(255, 255, 255, 0.54)",VOLUME_BAR_VOLUME_LEVEL_COLOR:"rgb(255, 255, 255)",VOLUME_BAR_BASE_COLOR:"rgba(255, 255, 255, 0.54)",MIN_SEEK_WINDOW_TO_SHOW_SEEKBAR:5,KEYCODE_TAB:9,KEYCODE_SHIFT:16,KEYCODE_ESCAPE:27},ge=ye,_e={MaterialDesignIcons:{FULLSCREEN:"fullscreen",EXIT_FULLSCREEN:"fullscreen_exit",CLOSED_CAPTIONS:"closed_caption",CHECKMARK:"done",LANGUAGE:"language",PIP:"picture_in_picture_alt",EXIT_PIP:"branding_watermark",BACK:"arrow_back",RESOLUTION:"settings",MUTE:"volume_up",UNMUTE:"volume_off",CAST:"cast",EXIT_CAST:"cast_connected",OPEN_OVERFLOW:"more_vert",REWIND:"fast_rewind",FAST_FORWARD:"fast_forward",PLAY:"play_arrow",PAUSE:"pause"},Opacity:{TRANSPARENT:0,OPAQUE:1}},be=_e,we={addTo:function(e){e.insert("ar",new Map([["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_PICTURE_IN_PICTURE",'   "  "'],["EXIT_FULL_SCREEN","   "],["EXIT_PICTURE_IN_PICTURE",'   "  "'],["FAST_FORWARD"," "],["FULL_SCREEN"," "],["LANGUAGE",""],["LIVE",""],["MORE_SETTINGS"," "],["MUTE"," "],["NOT_APPLICABLE"," "],["OFF",""],["ON",""],["PAUSE"," "],["PICTURE_IN_PICTURE","  "],["PLAY",""],["RESOLUTION",""],["REWIND",""],["SEEK","  "],["SKIP_TO_LIVE",""],["UNDETERMINED_LANGUAGE"," "],["UNMUTE","  "],["UNRECOGNIZED_LANGUAGE"," "],["VOLUME",""]])),e.insert("de",new Map([["AUTO_QUALITY","Automatisch"],["BACK","Zurck"],["CAPTIONS","Untertitel"],["CAST","Streamen"],["ENTER_PICTURE_IN_PICTURE","Bild-im-Bild-Modus aktivieren"],["EXIT_FULL_SCREEN","Vollbildmodus beenden"],["EXIT_PICTURE_IN_PICTURE","Bild-im-Bild-Modus beenden"],["FAST_FORWARD","Vorspulen"],["FULL_SCREEN","Vollbild"],["LANGUAGE","Sprache"],["LIVE","Live"],["MORE_SETTINGS","Weitere Einstellungen"],["MULTIPLE_LANGUAGES","mehrere Sprachen"],["MUTE","Stummschalten"],["NOT_APPLICABLE","Nicht zutreffend"],["OFF","Aus"],["ON","An"],["PAUSE","Pausieren"],["PICTURE_IN_PICTURE","Bild-in-Bild"],["PLAY","Wiedergeben"],["RESOLUTION","Auflsung"],["REWIND","Zurckspulen"],["SEEK","Schieberegler fr Suche"],["SKIP_TO_LIVE","Live"],["UNDETERMINED_LANGUAGE","Unbestimmt"],["UNMUTE","Stummschaltung aufheben"],["UNRECOGNIZED_LANGUAGE","Unerkannt"],["VOLUME","Lautstrke"]])),e.insert("en",new Map([["AUTO_QUALITY","Auto"],["BACK","Back"],["CAPTIONS","Captions"],["CAST","Cast..."],["ENTER_PICTURE_IN_PICTURE","Enter Picture-in-Picture"],["EXIT_FULL_SCREEN","Exit full screen"],["EXIT_PICTURE_IN_PICTURE","Exit Picture-in-Picture"],["FAST_FORWARD","Fast-forward"],["FULL_SCREEN","Full screen"],["LANGUAGE","Language"],["LIVE","Live"],["MORE_SETTINGS","More settings"],["MULTIPLE_LANGUAGES","Multiple languages"],["MUTE","Mute"],["NOT_APPLICABLE","Not applicable"],["OFF","Off"],["ON","On"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-Picture"],["PLAY","Play"],["RESOLUTION","Resolution"],["REWIND","Rewind"],["SEEK","Seek"],["SKIP_TO_LIVE","Skip ahead to live"],["UNDETERMINED_LANGUAGE","Undetermined"],["UNMUTE","Unmute"],["UNRECOGNIZED_LANGUAGE","Unrecognized"],["VOLUME","Volume"]])),e.insert("en-GB",new Map([["AUTO_QUALITY","Auto"],["BACK","Back"],["CAPTIONS","Captions"],["CAST","Cast..."],["ENTER_PICTURE_IN_PICTURE","Enter Picture-in-Picture"],["EXIT_FULL_SCREEN","Exit full screen"],["EXIT_PICTURE_IN_PICTURE","Exit Picture-in-Picture"],["FAST_FORWARD","Fast-forward"],["FULL_SCREEN","Full screen"],["LANGUAGE","Language"],["LIVE","Live"],["MORE_SETTINGS","More settings"],["MULTIPLE_LANGUAGES","Multiple languages"],["MUTE","Mute"],["NOT_APPLICABLE","Not applicable"],["OFF","Off"],["ON","On"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-Picture"],["PLAY","Play"],["RESOLUTION","Resolution"],["REWIND","Rewind"],["SEEK","Seek"],["SKIP_TO_LIVE","Skip ahead to live"],["UNDETERMINED_LANGUAGE","Undetermined"],["UNMUTE","Unmute"],["UNRECOGNIZED_LANGUAGE","Unrecognized"],["VOLUME","Volume"]])),e.insert("es",new Map([["AUTO_QUALITY","Automtica"],["BACK","Atrs"],["CAPTIONS","Subttulos"],["CAST","Reparto..."],["ENTER_PICTURE_IN_PICTURE","abrir el modo imagen en imagen"],["EXIT_FULL_SCREEN","Salir del modo de pantalla completa"],["EXIT_PICTURE_IN_PICTURE","salir del modo imagen en imagen"],["FAST_FORWARD","Avance rpido"],["FULL_SCREEN","Pantalla completa"],["LANGUAGE","Idioma"],["LIVE","En directo"],["MORE_SETTINGS","Ms ajustes"],["MULTIPLE_LANGUAGES","varios idiomas"],["MUTE","Silenciar"],["NOT_APPLICABLE","No aplicable"],["OFF","No"],["ON","activado"],["PAUSE","Pausa"],["PICTURE_IN_PICTURE","Imagen en imagen"],["PLAY","Reproducir"],["RESOLUTION","Resolucin"],["REWIND","Retroceder"],["SEEK","Barra deslizante de bsqueda"],["SKIP_TO_LIVE","En directo"],["UNDETERMINED_LANGUAGE","Desconocido"],["UNMUTE","Activar sonido"],["UNRECOGNIZED_LANGUAGE","Desconocido"],["VOLUME","volumen"]])),e.insert("es-419",new Map([["AUTO_QUALITY","Auto"],["BACK","Atrs"],["CAPTIONS","Subttulos"],["CAST","Transmitir"],["ENTER_PICTURE_IN_PICTURE","ingresar al modo de pantalla en pantalla"],["EXIT_FULL_SCREEN","Salir de pantalla completa"],["EXIT_PICTURE_IN_PICTURE","salir del modo de pantalla en pantalla"],["FAST_FORWARD","Avance rpido"],["FULL_SCREEN","Pantalla completa"],["LANGUAGE","Idioma"],["LIVE","En vivo"],["MORE_SETTINGS","Ms opciones de configuracin"],["MUTE","Silenciar"],["NOT_APPLICABLE","No aplicable"],["OFF","Desactivado"],["ON","activado"],["PAUSE","Detener"],["PICTURE_IN_PICTURE","Pantalla en pantalla"],["PLAY","Jugar"],["RESOLUTION","Resolucin"],["REWIND","Retroceder"],["SEEK","Barra deslizante de bsqueda"],["SKIP_TO_LIVE","En vivo"],["UNDETERMINED_LANGUAGE","Desconocido"],["UNMUTE","Activar sonido"],["UNRECOGNIZED_LANGUAGE","Desconocido"],["VOLUME","volumen"]])),e.insert("fr",new Map([["AUTO_QUALITY","Auto"],["BACK","Retour"],["CAPTIONS","Sous-titres"],["CAST","Caster sur"],["ENTER_PICTURE_IN_PICTURE","utiliser le mode PIP"],["EXIT_FULL_SCREEN","Quitter le mode plein cran"],["EXIT_PICTURE_IN_PICTURE","quitter le mode PIP"],["FAST_FORWARD","Avance rapide"],["FULL_SCREEN","Plein cran"],["LANGUAGE","Langue"],["LIVE","En direct"],["MORE_SETTINGS","Autres paramtres"],["MULTIPLE_LANGUAGES","plusieurs langues"],["MUTE","Dsactiver le son"],["NOT_APPLICABLE","Non applicable"],["OFF","Dsactive"],["ON","activ"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-picture"],["PLAY","Lire"],["RESOLUTION","Rsolution"],["REWIND","Retour arrire"],["SEEK","Barre de recherche"],["SKIP_TO_LIVE","Aller au direct"],["UNDETERMINED_LANGUAGE","Inconnue"],["UNMUTE","Activer le son"],["UNRECOGNIZED_LANGUAGE","Inconnue"],["VOLUME","volume"]])),e.insert("it",new Map([["AUTO_QUALITY","Auto"],["BACK","Indietro"],["CAPTIONS","Sottotitoli"],["CAST","Trasmetti"],["ENTER_PICTURE_IN_PICTURE","attiva picture in picture"],["EXIT_FULL_SCREEN","Esci dalla modalit a schermo intero"],["EXIT_PICTURE_IN_PICTURE","esci da picture in picture"],["FAST_FORWARD","Avanti veloce"],["FULL_SCREEN","Schermo intero"],["LANGUAGE","Lingua"],["LIVE","Dal vivo"],["MORE_SETTINGS","Altre impostazioni"],["MUTE","Disattiva audio"],["NOT_APPLICABLE","Non applicable"],["OFF","Disattivato"],["ON","on"],["PAUSE","Metti in pausa"],["PICTURE_IN_PICTURE","Picture in picture"],["PLAY","Riproduci"],["RESOLUTION","Risoluzione"],["REWIND","Riavvolgi"],["SEEK","Dispositivo di scorrimento"],["SKIP_TO_LIVE","Dal vivo"],["UNDETERMINED_LANGUAGE","Sconosciuto"],["UNMUTE","Riattiva audio"],["UNRECOGNIZED_LANGUAGE","Sconosciuto"],["VOLUME","volume"]])),e.insert("ja",new Map([["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_PICTURE_IN_PICTURE","  "],["EXIT_FULL_SCREEN",""],["EXIT_PICTURE_IN_PICTURE","  "],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["MORE_SETTINGS",""],["MULTIPLE_LANGUAGES",""],["MUTE",""],["NOT_APPLICABLE","--"],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE","  "],["PLAY",""],["RESOLUTION",""],["REWIND",""],["SEEK"," "],["SKIP_TO_LIVE",""],["UNDETERMINED_LANGUAGE",""],["UNMUTE",""],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]])),e.insert("ko",new Map([["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_PICTURE_IN_PICTURE","PIP  "],["EXIT_FULL_SCREEN"," "],["EXIT_PICTURE_IN_PICTURE","PIP  "],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["MORE_SETTINGS"," "],["MULTIPLE_LANGUAGES"," "],["MUTE",""],["NOT_APPLICABLE","  "],["OFF"," "],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE","PIP "],["PLAY",""],["RESOLUTION",""],["REWIND",""],["SEEK"," "],["SKIP_TO_LIVE",""],["UNDETERMINED_LANGUAGE","  "],["UNMUTE"," "],["UNRECOGNIZED_LANGUAGE","  "],["VOLUME",""]])),e.insert("nl",new Map([["AUTO_QUALITY","Automatisch"],["BACK","Terug"],["CAPTIONS","Ondertiteling"],["CAST","Casten..."],["ENTER_PICTURE_IN_PICTURE","scherm-in-scherm openen"],["EXIT_FULL_SCREEN","Volledig scherm afsluiten"],["EXIT_PICTURE_IN_PICTURE","scherm-in-scherm afsluiten"],["FAST_FORWARD","Vooruitspoelen"],["FULL_SCREEN","Volledig scherm"],["LANGUAGE","Taal"],["LIVE","Live"],["MORE_SETTINGS","Meer instellingen"],["MUTE","Dempen"],["NOT_APPLICABLE","Niet van toepassing"],["OFF","Uit"],["ON","aan"],["PAUSE","Onderbreken"],["PICTURE_IN_PICTURE","Scherm-in-scherm"],["PLAY","Afspelen"],["RESOLUTION","Resolutie"],["REWIND","Terugspoelen"],["SEEK","Zoekschuifbalk"],["SKIP_TO_LIVE","Live"],["UNDETERMINED_LANGUAGE","Onbekend"],["UNMUTE","Dempen opheffen"],["UNRECOGNIZED_LANGUAGE","Onbekend"],["VOLUME","volume"]])),e.insert("pl",new Map([["AUTO_QUALITY","Automatyczna"],["BACK","Wstecz"],["CAPTIONS","Napisy"],["CAST","Przelij..."],["ENTER_PICTURE_IN_PICTURE","wcz tryb obrazu w obrazie"],["EXIT_FULL_SCREEN","Zamknij peny ekran"],["EXIT_PICTURE_IN_PICTURE","wycz tryb obrazu w obrazie"],["FAST_FORWARD","Przewi do przodu"],["FULL_SCREEN","Peny ekran"],["LANGUAGE","Jzyk"],["LIVE","Na ywo"],["MORE_SETTINGS","Wicej ustawie"],["MUTE","Wycisz"],["NOT_APPLICABLE","Nie dotyczy"],["OFF","Wyczone"],["ON","w."],["PAUSE","Wstrzymaj"],["PICTURE_IN_PICTURE","Obraz w obrazie"],["PLAY","Odtwarzaj"],["RESOLUTION","Rozdzielczo"],["REWIND","Przewi do tyu"],["SEEK","Suwak przewijania"],["SKIP_TO_LIVE","Na ywo"],["UNDETERMINED_LANGUAGE","Nieznane"],["UNMUTE","Wycz wyciszenie"],["UNRECOGNIZED_LANGUAGE","Nieznane"],["VOLUME","gono"]])),e.insert("pt",new Map([["AUTO_QUALITY","Automtico"],["BACK","Voltar"],["CAPTIONS","Legendas ocultas"],["CAST","Elenco..."],["ENTER_PICTURE_IN_PICTURE","entrar no modo picture-in-picture"],["EXIT_FULL_SCREEN","Sair da tela inteira"],["EXIT_PICTURE_IN_PICTURE","sair de picture-in-picture"],["FAST_FORWARD","Avanar"],["FULL_SCREEN","Tela inteira"],["LANGUAGE","Idioma"],["LIVE","Ao vivo"],["MORE_SETTINGS","Mais configuraes"],["MULTIPLE_LANGUAGES","vrios idiomas"],["MUTE","Desativar som"],["NOT_APPLICABLE","No aplicvel"],["OFF","Desativado"],["ON","ativado"],["PAUSE","Pausar"],["PICTURE_IN_PICTURE","Picture-in-picture"],["PLAY","Reproduzir"],["RESOLUTION","Resoluo"],["REWIND","Retroceder"],["SEEK","Boto deslizante de busca"],["SKIP_TO_LIVE","Ao vivo"],["UNDETERMINED_LANGUAGE","Desconhecido"],["UNMUTE","Ativar som"],["UNRECOGNIZED_LANGUAGE","Desconhecido"],["VOLUME","volume"]])),e.insert("ru",new Map([["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST",""],["ENTER_PICTURE_IN_PICTURE",'  "  "'],["EXIT_FULL_SCREEN","   "],["EXIT_PICTURE_IN_PICTURE",'   "  "'],["FAST_FORWARD"," "],["FULL_SCREEN","  "],["LANGUAGE",""],["LIVE"," "],["MORE_SETTINGS"," "],["MULTIPLE_LANGUAGES","  "],["MUTE"," "],["NOT_APPLICABLE",""],["OFF","."],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE","  "],["PLAY",""],["RESOLUTION",""],["REWIND"," "],["SEEK"," "],["SKIP_TO_LIVE","  "],["UNDETERMINED_LANGUAGE",""],["UNMUTE"," "],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]])),e.insert("th",new Map([["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_PICTURE_IN_PICTURE",""],["EXIT_FULL_SCREEN",""],["EXIT_PICTURE_IN_PICTURE",""],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["MORE_SETTINGS",""],["MUTE",""],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE",""],["PLAY",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_TO_LIVE",""],["UNDETERMINED_LANGUAGE",""],["UNMUTE",""],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]])),e.insert("tr",new Map([["AUTO_QUALITY","Otomatik"],["BACK","Geri"],["CAPTIONS","Altyazlar"],["CAST","Yaynla..."],["ENTER_PICTURE_IN_PICTURE","pencere iinde pencere moduna gir"],["EXIT_FULL_SCREEN","Tam ekrandan k"],["EXIT_PICTURE_IN_PICTURE","pencere iinde pencere modundan kn"],["FAST_FORWARD","leri sar"],["FULL_SCREEN","Tam ekran"],["LANGUAGE","Dil"],["LIVE","Canl"],["MORE_SETTINGS","Dier ayarlar"],["MUTE","Sesi kapat"],["NOT_APPLICABLE","Kullanlmyor"],["OFF","Kapal"],["ON","ak"],["PAUSE","Duraklat"],["PICTURE_IN_PICTURE","Pencere iinde Pencere"],["PLAY","Oynat"],["RESOLUTION","znrlk"],["REWIND","Geri sar"],["SEEK","Arama kaydrma ubuu"],["SKIP_TO_LIVE","Canl"],["UNDETERMINED_LANGUAGE","Bilinmiyor"],["UNMUTE","Sesi a"],["UNRECOGNIZED_LANGUAGE","Bilinmiyor"],["VOLUME","ses dzeyi"]])),e.insert("zh",new Map([["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST",""],["ENTER_PICTURE_IN_PICTURE",""],["EXIT_FULL_SCREEN",""],["EXIT_PICTURE_IN_PICTURE",""],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["MORE_SETTINGS",""],["MUTE",""],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE",""],["PLAY",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_TO_LIVE",""],["UNDETERMINED_LANGUAGE",""],["UNMUTE",""],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]])),e.insert("zh-TW",new Map([["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST",""],["ENTER_PICTURE_IN_PICTURE",""],["EXIT_FULL_SCREEN",""],["EXIT_PICTURE_IN_PICTURE",""],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["MORE_SETTINGS",""],["MUTE",""],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE",""],["PLAY",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_TO_LIVE",""],["UNDETERMINED_LANGUAGE",""],["UNMUTE",""],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]]))},Ids:{ENTER_PICTURE_IN_PICTURE:"ENTER_PICTURE_IN_PICTURE",MULTIPLE_LANGUAGES:"MULTIPLE_LANGUAGES",BACK:"BACK",VOLUME:"VOLUME",EXIT_FULL_SCREEN:"EXIT_FULL_SCREEN",NOT_APPLICABLE:"NOT_APPLICABLE",SEEK:"SEEK",LANGUAGE:"LANGUAGE",SKIP_TO_LIVE:"SKIP_TO_LIVE",FULL_SCREEN:"FULL_SCREEN",CAST:"CAST",LIVE:"LIVE",UNRECOGNIZED_LANGUAGE:"UNRECOGNIZED_LANGUAGE",RESOLUTION:"RESOLUTION",PICTURE_IN_PICTURE:"PICTURE_IN_PICTURE",PLAY:"PLAY",PAUSE:"PAUSE",OFF:"OFF",MUTE:"MUTE",UNDETERMINED_LANGUAGE:"UNDETERMINED_LANGUAGE",CAPTIONS:"CAPTIONS",AUTO_QUALITY:"AUTO_QUALITY",ON:"ON",MORE_SETTINGS:"MORE_SETTINGS",EXIT_PICTURE_IN_PICTURE:"EXIT_PICTURE_IN_PICTURE",UNMUTE:"UNMUTE",FAST_FORWARD:"FAST_FORWARD",REWIND:"REWIND"}},Ee=we;
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var Te=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"map",value:function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var u=s.value;n.push(t(u))}}catch(e){i=!0,a=e}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}return n}},{key:"every",value:function(e,t){var n=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0)if(!t(a.value))return!1}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return!0}},{key:"some",value:function(e,t){var n=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0)if(t(a.value))return!0}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return!1}},{key:"filter",value:function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var u=s.value;t(u)&&n.push(u)}}catch(e){i=!0,a=e}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}return n}}],(n=null)&&Se(t.prototype,n),r&&Se(t,r),e}();function Ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var ke=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"createFallbackPromiseChain",value:function(e,t){return e.reduce(function(e,n){return e.catch(function(){return t(n)})},Promise.reject())}},{key:"collapseArrays",value:function(e,t){return e.concat(t)}},{key:"noop",value:function(){}},{key:"isNotNull",value:function(e){return null!=e}}],(n=null)&&Ce(t.prototype,n),r&&Ce(t,r),e}();function Ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var Ae=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"resolveUris",value:function(e,t){if(0==t.length)return e;var n=t.map(function(e){return new X(e)});return e.map(function(e){return new X(e)}).map(function(e){return n.map(function(t){return e.resolve(t)})}).reduce(ke.collapseArrays,[]).map(function(e){return e.toString()})}},{key:"createDrmInfo",value:function(e,t){return{keySystem:e,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:t||[],keyIds:[]}}}],(n=null)&&Ie(t.prototype,n),r&&Ie(t,r),e}();function Le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Ae.ContentType={VIDEO:"video",AUDIO:"audio",TEXT:"text",APPLICATION:"application"},Ae.TextStreamKind={SUBTITLE:"subtitle",CLOSED_CAPTION:"caption"},Ae.GAP_OVERLAP_TOLERANCE_SECONDS=1/15;
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var xe=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"areLocaleCompatible",value:function(t,n){return(t=e.normalize(t))==(n=e.normalize(n))}},{key:"areLanguageCompatible",value:function(t,n){t=e.normalize(t),n=e.normalize(n);var r=e.disassembleLocale_(t),i=e.disassembleLocale_(n);return r[0]==i[0]}},{key:"isParentOf",value:function(t,n){t=e.normalize(t),n=e.normalize(n);var r=e.disassembleLocale_(t),i=e.disassembleLocale_(n);return r[0]==i[0]&&1==r.length&&2==i.length}},{key:"isSiblingOf",value:function(t,n){t=e.normalize(t),n=e.normalize(n);var r=e.disassembleLocale_(t),i=e.disassembleLocale_(n);return 2==r.length&&2==i.length&&r[0]==i[0]}},{key:"normalize",value:function(t){var n=t.split("-"),r=n[0]||"",i=n[1]||"";return r=r.toLowerCase(),r=e.isoMap_.get(r)||r,(i=i.toUpperCase())?r+"-"+i:r}},{key:"areSiblings",value:function(t,n){var r=e.getBase(t),i=e.getBase(n);return t!=r&&n!=i&&r==i}},{key:"getBase",value:function(t){var n,r=t.indexOf("-");return n=(n=r>=0?t.substring(0,r):t).toLowerCase(),n=e.isoMap_.get(n)||n}},{key:"getLocaleForText",value:function(t){var n=Ae.ContentType;window.asserts.assert(t.type==n.TEXT,"Can only get language from text streams");var r=t.language||"und";return e.normalize(r)}},{key:"getLocaleForVariant",value:function(t){return t.language?e.normalize(t.language):t.audio&&t.audio.language?e.normalize(t.audio.language):t.video&&t.video.language?e.normalize(t.video.language):"und"}},{key:"findClosestLocale",value:function(t,n){var r=e.normalize(t),i=new Set,a=!0,s=!1,o=void 0;try{for(var u,l=n[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var c=u.value;i.add(e.normalize(c))}}catch(e){s=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(s)throw o}}var d=!0,h=!1,f=void 0;try{for(var p,m=i[Symbol.iterator]();!(d=(p=m.next()).done);d=!0){var v=p.value;if(v==r)return v}}catch(e){h=!0,f=e}finally{try{d||null==m.return||m.return()}finally{if(h)throw f}}var y=!0,g=!1,_=void 0;try{for(var b,w=i[Symbol.iterator]();!(y=(b=w.next()).done);y=!0){var E=b.value;if(e.isParentOf(E,r))return E}}catch(e){g=!0,_=e}finally{try{y||null==w.return||w.return()}finally{if(g)throw _}}var S=!0,T=!1,C=void 0;try{for(var k,I=i[Symbol.iterator]();!(S=(k=I.next()).done);S=!0){var A=k.value;if(e.isSiblingOf(A,r))return A}}catch(e){T=!0,C=e}finally{try{S||null==I.return||I.return()}finally{if(T)throw C}}var L=!0,x=!1,R=void 0;try{for(var N,M=i[Symbol.iterator]();!(L=(N=M.next()).done);L=!0){var P=N.value;if(e.isParentOf(r,P))return P}}catch(e){x=!0,R=e}finally{try{L||null==M.return||M.return()}finally{if(x)throw R}}return null}},{key:"disassembleLocale_",value:function(e){var t=e.split("-");return window.asserts.assert(t.length<=2,["Locales should not have more than 2 components. ",e," has too many components."].join()),t}}],(n=null)&&Le(t.prototype,n),r&&Le(t,r),e}();function Re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}xe.isoMap_=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]),
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka=window.shaka||{};window.shaka;window.goog=window.goog||{};window.goog;var Ne=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fallbackLocale_=xe.normalize(t),this.currentMap_=new Map,this.currentLocales_=new Set,this.localizations_=new Map,this.events_=new k}var t,n,r;return t=e,r=[{key:"findMissingKeys_",value:function(e,t,n){var r=!0,i=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var u=s.value;e.get(u)||n.add(u)}}catch(e){i=!0,a=e}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}}}],(n=[{key:"addEventListener",value:function(e,t,n){this.events_.addEventListener(e,t,n)}},{key:"removeEventListener",value:function(e,t,n){this.events_.removeEventListener(e,t,n||void 0)}},{key:"dispatchEvent",value:function(e){return this.events_.dispatchEvent(e)}},{key:"changeLocale",value:function(t){var n=this,r=e;this.currentLocales_.clear();var i=!0,a=!1,s=void 0;try{for(var o,u=t[Symbol.iterator]();!(i=(o=u.next()).done);i=!0){var l=o.value;this.currentLocales_.add(xe.normalize(l))}}catch(e){a=!0,s=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw s}}this.updateCurrentMap_(),this.events_.dispatchEvent(new b(r.LOCALE_CHANGED));var c=Te.filter(this.currentLocales_,function(e){return!n.localizations_.has(e)});if(c.length){var d={locales:c};this.events_.dispatchEvent(new b(r.UNKNOWN_LOCALES,d))}}},{key:"insert",value:function(t,n,r){var i=e,a=e.ConflictResolution;t=xe.normalize(t),void 0===r&&(r=a.USE_NEW);var s=this.localizations_.get(t)||new Map;return n.forEach(function(e,t){s.has(t)&&r!=a.USE_NEW||s.set(t,e)}),this.localizations_.set(t,s),this.updateCurrentMap_(),this.events_.dispatchEvent(new b(i.LOCALE_UPDATED)),this}},{key:"resolveDictionary",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=e.keys()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value;e.set(s,this.resolve(s))}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"resolve",value:function(t){var n=e,r=this.currentMap_.get(t);if(r)return r;var i={locales:Array.from(this.currentLocales_),missing:t};return this.events_.dispatchEvent(new b(n.UNKNOWN_LOCALIZATION,i)),""}},{key:"updateCurrentMap_",value:function(){var t=this,n=this.localizations_,r=this.fallbackLocale_,i=this.currentLocales_,a=new Set,s=!0,o=!1,u=void 0;try{for(var l,c=function(){var e=l.value;a.add(e),a.add(xe.getBase(e));var t=Te.filter(n.keys(),function(t){return xe.areSiblings(t,e)});t.sort();var r=!0,i=!1,s=void 0;try{for(var o,u=t[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var c=o.value;a.add(c)}}catch(e){i=!0,s=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw s}}var d=Te.filter(n.keys(),function(t){return xe.getBase(t)==e});d.sort();var h=!0,f=!1,p=void 0;try{for(var m,v=d[Symbol.iterator]();!(h=(m=v.next()).done);h=!0){var y=m.value;a.add(y)}}catch(e){f=!0,p=e}finally{try{h||null==v.return||v.return()}finally{if(f)throw p}}},d=i[Symbol.iterator]();!(s=(l=d.next()).done);s=!0)c()}catch(e){o=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(o)throw u}}a.add(r);var h=[],f=!0,p=!1,m=void 0;try{for(var v,y=a[Symbol.iterator]();!(f=(v=y.next()).done);f=!0){var g=v.value,_=n.get(g);_&&h.push(_)}}catch(e){p=!0,m=e}finally{try{f||null==y.return||y.return()}finally{if(p)throw m}}h.reverse(),this.currentMap_.clear();for(var w=0,E=h;w<E.length;w++)E[w].forEach(function(e,n){t.currentMap_.set(n,e)});var S=this.currentMap_.keys(),T=new Set,C=!0,k=!1,I=void 0;try{for(var A,L=this.currentLocales_[Symbol.iterator]();!(C=(A=L.next()).done);C=!0){var x=A.value,R=this.localizations_.get(x)||new Map;e.findMissingKeys_(R,S,T)}}catch(e){k=!0,I=e}finally{try{C||null==L.return||L.return()}finally{if(k)throw I}}if(T.size>0){var N={locales:Array.from(i),missing:Array.from(T)};this.events_.dispatchEvent(new b(e.MISSING_LOCALIZATIONS,N))}}}])&&Re(t.prototype,n),r&&Re(t,r),e}();function Me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Ne.ConflictResolution={USE_OLD:0,USE_NEW:1},Ne.UNKNOWN_LOCALES="unknown-locales",Ne.UNKNOWN_LOCALIZATION="unknown-localization",Ne.MISSING_LOCALIZATIONS="missing-localizations",Ne.LOCALE_CHANGED="locale-changed",Ne.LOCALE_UPDATED="locale-updated",Ne.UnknownLocalesEvent,Ne.UnknownLocalizationEvent,Ne.MissingLocalizationsEvent;
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Pe=F.util.Dom,Oe=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"getFirstDescendantWithClassName",value:function(t,n){return e.getDescendantIfExists(t,n)}},{key:"getDescendantIfExists",value:function(e,t){var n=e.getElementsByClassName(t);return n.length?n[0]:null}},{key:"focusOnTheChosenItem",value:function(t){if(t){var n=e.getDescendantIfExists(t,"shaka-chosen-item");n&&n.parentElement.focus()}}},{key:"checkmarkIcon",value:function(){var e=Pe.createHTMLElement("i");return e.classList.add("material-icons"),e.classList.add("shaka-chosen-item"),e.textContent=be.MaterialDesignIcons.CHECKMARK,e.setAttribute("aria-hidden","true"),e}},{key:"setDisplay",value:function(e,t){e&&(t?(e.classList.add("shaka-displayed"),e.classList.remove("shaka-hidden")):(e.classList.add("shaka-hidden"),e.classList.remove("shaka-displayed")))}}],(n=null)&&Me(t.prototype,n),r&&Me(t,r),e}();
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;function De(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fe(e,t,n){return t&&Ue(e.prototype,t),n&&Ue(e,n),e}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be=function(){function e(){De(this,e),this.bindingMap_=new S}return Fe(e,[{key:"release",value:function(){this.removeAll(),this.bindingMap_=null}},{key:"listen",value:function(t,n,r,i){if(this.bindingMap_){var a=new e.Binding_(t,n,r,i);this.bindingMap_.push(n,a)}}},{key:"listenOnce",value:function(e,t,n,r){var i=this;this.listen(e,t,function r(a){i.unlisten(e,t,r),n(a)},r)}},{key:"unlisten",value:function(e,t,n){if(this.bindingMap_){var r=this.bindingMap_.get(t)||[],i=!0,a=!1,s=void 0;try{for(var o,u=r[Symbol.iterator]();!(i=(o=u.next()).done);i=!0){var l=o.value;l.target===e&&(n!==l.listener&&n||(l.unlisten(),this.bindingMap_.remove(t,l)))}}catch(e){a=!0,s=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw s}}}}},{key:"removeAll",value:function(){if(this.bindingMap_){var e=this.bindingMap_.getAll(),t=!0,n=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){i.value.unlisten()}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}this.bindingMap_.clear()}}}]),e}();Be.ListenerType=null,Be.Binding_=function(){function e(t,n,r,i){De(this,e),this.target=t,this.type=n,this.listener=r,this.options=Be.Binding_.convertOptions_(t,i),this.target.addEventListener(n,r,this.options)}return Fe(e,[{key:"unlisten",value:function(){window.asserts.assert(this.target,"Missing target"),this.target.removeEventListener(this.type,this.listener,this.options),this.target=null,this.listener=null,this.options=!1}}],[{key:"convertOptions_",value:function(e,t){if(void 0===t)return!1;if("boolean"==typeof t)return t;var n=new Set(["passive","capture"]),r=Object.keys(t).filter(function(e){return!n.has(e)});return window.asserts.assert(0===r.length,"Unsupported flag(s) to addEventListener: "+r.join(",")),Be.Binding_.doesSupportObject_(e)?t:t.capture||!1}},{key:"doesSupportObject_",value:function(e){var t=Be.Binding_.supportsObject_;if(void 0===t){t=!1;try{var n={},r={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",r),Object.defineProperty(n,"capture",r);var i=function(){};e.addEventListener("test",i,n),e.removeEventListener("test",i,n)}catch(e){t=!1}Be.Binding_.supportsObject_=t}return t||!1}}]),e}(),Be.Binding_.supportsObject_=void 0;var Ve=Be;function je(e){return(je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function He(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka;var Ke=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"serialize",value:function(t){return JSON.stringify(t,function(t,n){if("function"!=typeof n){if(n instanceof Event||n instanceof b){var r={};for(var i in n){var a=n[i];a&&"object"==je(a)?"detail"==i&&(r[i]=a):i in Event||(r[i]=a)}return r}return n instanceof TimeRanges?e.unpackTimeRanges_(n):n instanceof Uint8Array?e.unpackUint8Array_(n):"number"==typeof n?isNaN(n)?"NaN":isFinite(n)?n:n<0?"-Infinity":"Infinity":n}})}},{key:"deserialize",value:function(t){return JSON.parse(t,function(t,n){return"NaN"==n?NaN:"-Infinity"==n?-1/0:"Infinity"==n?1/0:n&&"object"==je(n)&&"TimeRanges"==n.__type__?e.simulateTimeRanges_(n):n&&"object"==je(n)&&"Uint8Array"==n.__type__?e.makeUint8Array_(n):n})}},{key:"unpackTimeRanges_",value:function(e){for(var t={__type__:"TimeRanges",length:e.length,start:[],end:[]},n=0;n<e.length;++n)t.start.push(e.start(n)),t.end.push(e.end(n));return t}},{key:"simulateTimeRanges_",value:function(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}},{key:"unpackUint8Array_",value:function(e){return{__type__:"Uint8Array",entries:Array.from(e)}}},{key:"makeUint8Array_",value:function(e){return new Uint8Array(e.entries)}}],(n=null)&&He(t.prototype,n),r&&He(t,r),e}();function Ge(e,t,n,r,i,a,s){try{var o=e[a](s),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,i)}function qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Ke.VideoEvents=["ended","play","playing","pause","pausing","ratechange","seeked","seeking","timeupdate","volumechange"],Ke.VideoAttributes=["buffered","currentTime","duration","ended","loop","muted","paused","playbackRate","seeking","videoHeight","videoWidth","volume"],Ke.VideoInitStateAttributes=["loop","playbackRate"],Ke.VideoVoidMethods=["pause","play"],Ke.PlayerEvents=["abrstatuschanged","adaptation","buffering","emsg","error","loading","streaming","texttrackvisibility","timelineregionadded","timelineregionenter","timelineregionexit","trackschanged","unloading","variantchanged","textchanged"],Ke.PlayerGetterMethods={getAssetUri:2,getAudioLanguages:2,getAudioLanguagesAndRoles:2,getBufferedInfo:2,getConfiguration:2,getExpiration:2,getPlaybackRate:2,getTextLanguages:2,getTextLanguagesAndRoles:2,getTextTracks:2,getStats:5,getVariantTracks:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,usingEmbeddedTextTrack:2,getLoadMode:10},Ke.PlayerGetterMethodsThatRequireLive={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},Ke.PlayerInitState=[["getConfiguration","configure"]],Ke.PlayerInitAfterLoadState=[["isTextTrackVisible","setTextTrackVisibility"]],Ke.PlayerVoidMethods=["addTextTrack","cancelTrickPlay","configure","resetConfiguration","retryStreaming","selectAudioLanguage","selectEmbeddedTextTrack","selectTextLanguage","selectTextTrack","selectVariantTrack","setTextTrackVisibility","trickPlay"],Ke.PlayerPromiseMethods=["attach","detach","load","unload"],Ke.InitStateType,Ke.SHAKA_MESSAGE_NAMESPACE="urn:x-cast:com.google.shaka.v2",Ke.GENERIC_MESSAGE_NAMESPACE="urn:x-cast:com.google.cast.media";
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var We=F.util.Timer,ze=window.shaka,Ye=function(){function e(t,n,r,i,a,s){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.receiverAppId_=t,this.statusChangeTimer_=new We(n),this.onFirstCastStateUpdate_=r,this.hasJoinedExistingSession_=!1,this.onRemoteEvent_=i,this.onResumeLocal_=a,this.onInitStateRequired_=s,this.apiReady_=!1,this.isCasting_=!1,this.receiverName_="",this.appData_=null,this.onConnectionStatusChangedBound_=function(){return o.onConnectionStatusChanged_()},this.onMessageReceivedBound_=function(e,t){return o.onMessageReceived_(e,t)},this.cachedProperties_={video:{},player:{}},this.nextAsyncCallId_=0,this.asyncCallPromises_={},this.castPromise_=null,e.instances_.add(this)}var t,n,r,i,a;return t=e,(n=[{key:"destroy",value:function(){return e.instances_.delete(this),this.rejectAllPromises_(),e.session_&&this.removeListeners_(),this.statusChangeTimer_&&(this.statusChangeTimer_.stop(),this.statusChangeTimer_=null),this.onRemoteEvent_=null,this.onResumeLocal_=null,this.apiReady_=!1,this.isCasting_=!1,this.appData_=null,this.cachedProperties_=null,this.asyncCallPromises_=null,this.castPromise_=null,this.onConnectionStatusChangedBound_=null,this.onMessageReceivedBound_=null,Promise.resolve()}},{key:"apiReady",value:function(){return this.apiReady_}},{key:"hasReceivers",value:function(){return e.hasReceivers_}},{key:"isCasting",value:function(){return this.isCasting_}},{key:"receiverName",value:function(){return this.receiverName_}},{key:"hasRemoteProperties",value:function(){return 0!=Object.keys(this.cachedProperties_.video).length}},{key:"init",value:function(){var t=this;if(window.chrome&&chrome.cast&&chrome.cast.isAvailable){this.apiReady_=!0,this.statusChangeTimer_.tickNow();var n=new chrome.cast.SessionRequest(this.receiverAppId_),r=new chrome.cast.ApiConfig(n,function(e){return t.onExistingSessionJoined_(e)},function(e){return t.onReceiverStatusChanged_(e)},"origin_scoped");chrome.cast.initialize(r,function(){ze.log.debug("CastSender: init")},function(e){ze.log.error("CastSender: init error",e)}),e.hasReceivers_&&this.statusChangeTimer_.tickAfter(e.STATUS_DELAY);var i=e.session_;i&&i.status!=chrome.cast.SessionStatus.STOPPED?(ze.log.debug("CastSender: re-using existing connection"),this.onExistingSessionJoined_(i)):e.session_=null}}},{key:"setAppData",value:function(e){this.appData_=e,this.isCasting_&&this.sendMessage_({type:"appData",appData:this.appData_})}},{key:"cast",value:(i=regeneratorRuntime.mark(function t(n){var r=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.apiReady_){t.next=2;break}throw new Error(Error.Severity.RECOVERABLE,Error.Category.CAST,Error.Code.CAST_API_UNAVAILABLE);case 2:if(e.hasReceivers_){t.next=4;break}throw new Error(Error.Severity.RECOVERABLE,Error.Category.CAST,Error.Code.NO_CAST_RECEIVERS);case 4:if(!this.isCasting_){t.next=6;break}throw new Error(Error.Severity.RECOVERABLE,Error.Category.CAST,Error.Code.ALREADY_CASTING);case 6:return this.castPromise_=new A,chrome.cast.requestSession(function(e){return r.onSessionInitiated_(n,e)},function(e){return r.onConnectionError_(e)}),t.next=10,this.castPromise_;case 10:case"end":return t.stop()}},t,this)}),a=function(){var e=this,t=arguments;return new Promise(function(n,r){var a=i.apply(e,t);function s(e){Ge(a,n,r,s,o,"next",e)}function o(e){Ge(a,n,r,s,o,"throw",e)}s(void 0)})},function(e){return a.apply(this,arguments)})},{key:"showDisconnectDialog",value:function(){var e=this;if(this.isCasting_){var t=this.onInitStateRequired_();chrome.cast.requestSession(function(n){return e.onSessionInitiated_(t,n)},function(t){return e.onConnectionError_(t)})}}},{key:"forceDisconnect",value:function(){this.isCasting_&&(this.rejectAllPromises_(),e.session_&&(this.removeListeners_(),e.session_.stop(function(){},function(){}),e.session_=null))}},{key:"get",value:function(e,t){var n=this;window.asserts.assert("video"==e||"player"==e,"Unexpected target name");var r=r;if("video"==e){if(r.VideoVoidMethods.includes(t))return function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n.remoteCall_.apply(n,[e,t].concat(i))}}else if("player"==e){if(r.PlayerGetterMethodsThatRequireLive[t]){var i=this.get("player","isLive")();if(window.asserts.assert(i,t+" should be called on a live stream!"),!i)return function(){}}if(r.PlayerVoidMethods.includes(t))return function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n.remoteCall_.apply(n,[e,t].concat(i))};if(r.PlayerPromiseMethods.includes(t))return function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n.remoteAsyncCall_.apply(n,[e,t].concat(i))};if(r.PlayerGetterMethods[t])return function(){return n.propertyGetter_(e,t)}}return this.propertyGetter_(e,t)}},{key:"set",value:function(e,t,n){window.asserts.assert("video"==e||"player"==e,"Unexpected target name"),this.cachedProperties_[e][t]=n,this.sendMessage_({type:"set",targetName:e,property:t,value:n})}},{key:"onSessionInitiated_",value:function(e,t){ze.log.debug("CastSender: onSessionInitiated"),this.onSessionCreated_(t),this.sendMessage_({type:"init",initState:e,appData:this.appData_}),this.castPromise_.resolve()}},{key:"onConnectionError_",value:function(e){var t=Error.Code.UNEXPECTED_CAST_ERROR;switch(e.code){case"cancel":t=Error.Code.CAST_CANCELED_BY_USER;break;case"timeout":t=Error.Code.CAST_CONNECTION_TIMED_OUT;break;case"receiver_unavailable":t=Error.Code.CAST_RECEIVER_APP_UNAVAILABLE}this.castPromise_.reject(new Error(Error.Severity.CRITICAL,Error.Category.CAST,t,e))}},{key:"propertyGetter_",value:function(e,t){return window.asserts.assert("video"==e||"player"==e,"Unexpected target name"),this.cachedProperties_[e][t]}},{key:"remoteCall_",value:function(e,t){window.asserts.assert("video"==e||"player"==e,"Unexpected target name");for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];this.sendMessage_({type:"call",targetName:e,methodName:t,args:r})}},{key:"remoteAsyncCall_",value:function(e,t){window.asserts.assert("video"==e||"player"==e,"Unexpected target name");var n=new A,r=this.nextAsyncCallId_.toString();this.nextAsyncCallId_++,this.asyncCallPromises_[r]=n;for(var i=arguments.length,a=new Array(i>2?i-2:0),s=2;s<i;s++)a[s-2]=arguments[s];return this.sendMessage_({type:"asyncCall",targetName:e,methodName:t,args:a,id:r}),n}},{key:"onExistingSessionJoined_",value:function(e){ze.log.debug("CastSender: onExistingSessionJoined");var t=this.onInitStateRequired_();this.castPromise_=new A,this.hasJoinedExistingSession_=!0,this.onSessionInitiated_(t,e)}},{key:"onReceiverStatusChanged_",value:function(t){ze.log.debug("CastSender: receiver status",t),e.hasReceivers_="available"==t,this.statusChangeTimer_.tickNow()}},{key:"onSessionCreated_",value:function(t){e.session_=t,t.addUpdateListener(this.onConnectionStatusChangedBound_),t.addMessageListener(CastUtils.SHAKA_MESSAGE_NAMESPACE,this.onMessageReceivedBound_),this.onConnectionStatusChanged_()}},{key:"removeListeners_",value:function(){var t=e.session_;t.removeUpdateListener(this.onConnectionStatusChangedBound_),t.removeMessageListener(CastUtils.SHAKA_MESSAGE_NAMESPACE,this.onMessageReceivedBound_)}},{key:"onConnectionStatusChanged_",value:function(){var t=!!e.session_&&"connected"==e.session_.status;if(ze.log.debug("CastSender: connection status",t),this.isCasting_&&!t){for(var n in this.onResumeLocal_(),this.cachedProperties_)this.cachedProperties_[n]={};this.rejectAllPromises_()}this.isCasting_=t,this.receiverName_=t?e.session_.receiver.friendlyName:"",this.statusChangeTimer_.tickNow()}},{key:"rejectAllPromises_",value:function(){for(var e in this.asyncCallPromises_){var t=this.asyncCallPromises_[e];delete this.asyncCallPromises_[e],t.reject(new Error(Error.Severity.RECOVERABLE,Error.Category.PLAYER,Error.Code.LOAD_INTERRUPTED))}}},{key:"onMessageReceived_",value:function(e,t){var n=CastUtils.deserialize(t);switch(ze.log.v2("CastSender: message",n),n.type){case"event":var r=n.targetName,i=n.event,a=new b(i.type,i);this.onRemoteEvent_(r,a);break;case"update":var s=n.update;for(var o in s){var u=this.cachedProperties_[o]||{};for(var l in s[o])u[l]=s[o][l]}this.hasJoinedExistingSession_&&(this.onFirstCastStateUpdate_(),this.hasJoinedExistingSession_=!1);break;case"asyncComplete":var c=n.id,d=n.error,h=this.asyncCallPromises_[c];if(delete this.asyncCallPromises_[c],window.asserts.assert(h,"Unexpected async id"),!h)break;if(d){var f=new Error(d.severity,d.category,d.code);for(var p in d)f[p]=d[p];h.reject(f)}else h.resolve()}}},{key:"sendMessage_",value:function(t){var n=CastUtils.serialize(t);e.session_.sendMessage(CastUtils.SHAKA_MESSAGE_NAMESPACE,n,function(){},ze.log.error)}}])&&qe(t.prototype,n),r&&qe(t,r),e}();function Xe(e){return(Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $e(e,t,n,r,i,a,s){try{var o=e[a](s),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,i)}function Ze(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function s(e){$e(a,r,i,s,o,"next",e)}function o(e){$e(a,r,i,s,o,"throw",e)}s(void 0)})}}function Qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Je(e,t){return!t||"object"!==Xe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function et(e){return(et=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tt(e,t){return(tt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ye.STATUS_DELAY=.02,Ye.hasReceivers_=!1,Ye.session_=null,Ye.instances_=new Set,Ye.onSdkLoaded_=function(e){if(e){var t=!0,n=!1,r=void 0;try{for(var i,a=Ye.instances_[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){i.value.init()}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},window.__onGCastApiAvailable=Ye.onSdkLoaded_;var nt=window.shaka,rt=(window.goog,function(e){function t(e,n,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=Je(this,et(t).call(this))).localVideo_=e,i.localPlayer_=n,i.videoProxy_=null,i.playerProxy_=null,i.videoEventTarget_=null,i.playerEventTarget_=null,i.eventManager_=null,i.receiverAppId_=r,i.receiverAppId_&&(i.sender_=new Ye(r,function(){return i.onCastStatusChanged_()},function(){return i.onFirstCastStateUpdate_()},function(e,t){return i.onRemoteEvent_(e,t)},function(){return i.onResumeLocal_()},function(){return i.getInitState_()})),i.init_(),i}var n,r,i,a,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tt(e,t)}(t,k),n=t,(r=[{key:"destroy",value:function(e){e&&this.sender_&&this.sender_.forceDisconnect(),this.eventManager_&&(this.eventManager_.release(),this.eventManager_=null);var t=[];return this.localPlayer_&&(t.push(this.localPlayer_.destroy()),this.localPlayer_=null),this.sender_&&(t.push(this.sender_.destroy()),this.sender_=null),this.localVideo_=null,this.videoProxy_=null,this.playerProxy_=null,Promise.all(t)}},{key:"getVideo",value:function(){return this.videoProxy_}},{key:"getPlayer",value:function(){return this.playerProxy_}},{key:"canCast",value:function(){return!!this.sender_&&this.sender_.apiReady()&&this.sender_.hasReceivers()}},{key:"isCasting",value:function(){return!!this.sender_&&this.sender_.isCasting()}},{key:"receiverName",value:function(){return this.sender_?this.sender_.receiverName():""}},{key:"cast",value:(s=Ze(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender_){e.next=2;break}throw new Error(Error.Severity.RECOVERABLE,Error.Category.CAST,Error.Code.CAST_RECEIVER_APP_ID_MISSING);case 2:return t=this.getInitState_(),e.next=5,this.sender_.cast(t);case 5:if(this.localPlayer_){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.localPlayer_.unload();case 9:case"end":return e.stop()}},e,this)})),function(){return s.apply(this,arguments)})},{key:"setAppData",value:function(e){this.sender_&&this.sender_.setAppData(e)}},{key:"suggestDisconnect",value:function(){this.sender_&&this.sender_.showDisconnectDialog()}},{key:"forceDisconnect",value:function(){this.sender_&&this.sender_.forceDisconnect()}},{key:"changeReceiverId",value:(a=Ze(regeneratorRuntime.mark(function e(t){var n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t!=this.receiverAppId_){e.next=2;break}return e.abrupt("return");case 2:if(this.receiverAppId_=t,!this.sender_){e.next=8;break}return this.sender_.forceDisconnect(),e.next=7,this.sender_.destroy();case 7:this.sender_=null;case 8:this.sender_=new Ye(t,function(){return n.onCastStatusChanged_()},function(){return n.onFirstCastStateUpdate_()},function(e,t){return n.onRemoteEvent_(e,t)},function(){return n.onResumeLocal_()},function(){return n.getInitState_()}),this.sender_.init();case 10:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"init_",value:function(){var e=this;this.sender_&&this.sender_.init(),this.eventManager_=new Ve;var t=!0,n=!1,r=void 0;try{for(var i,a=Ke.VideoEvents[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value;this.eventManager_.listen(this.localVideo_,s,function(t){return e.videoProxyLocalEvent_(t)})}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}var o=!0,u=!1,l=void 0;try{for(var c,d=Ke.PlayerEvents[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){var h=c.value;this.eventManager_.listen(this.localPlayer_,h,function(t){return e.playerProxyLocalEvent_(t)})}}catch(e){u=!0,l=e}finally{try{o||null==d.return||d.return()}finally{if(u)throw l}}this.videoProxy_={};var f=function(t){Object.defineProperty(e.videoProxy_,t,{configurable:!1,enumerable:!0,get:function(){return e.videoProxyGet_(t)},set:function(n){return e.videoProxySet_(t,n)}})};for(var p in this.localVideo_)f(p);this.playerProxy_={},this.iterateOverPlayerMethods_(function(t,n){window.asserts.assert(e.playerProxy_,"Must have player proxy!"),Object.defineProperty(e.playerProxy_,t,{configurable:!1,enumerable:!0,get:function(){return e.playerProxyGet_(t)}})}),this.videoEventTarget_=new k,this.videoEventTarget_.dispatchTarget=this.videoProxy_,this.playerEventTarget_=new k,this.playerEventTarget_.dispatchTarget=this.playerProxy_}},{key:"iterateOverPlayerMethods_",value:function(e){window.asserts.assert(this.localPlayer_,"Must have player!");var t=this.localPlayer_,n=new Set;for(var r in t)n.has(r)||(n.add(r),e(r,t[r]));for(var i=Object.getPrototypeOf(t),a=Object.getPrototypeOf({});i&&i!=a;){var s=!0,o=!1,u=void 0;try{for(var l,c=Object.getOwnPropertyNames(i)[Symbol.iterator]();!(s=(l=c.next()).done);s=!0){var d=l.value;if(!d.endsWith("_")&&"constructor"!=d){var h=t[d];"function"==typeof h&&(n.has(d)||(n.add(d),e(d,h)))}}}catch(e){o=!0,u=e}finally{try{s||null==c.return||c.return()}finally{if(o)throw u}}i=Object.getPrototypeOf(i)}}},{key:"getInitState_",value:function(){var e={video:{},player:{},playerAfterLoad:{},manifest:this.localPlayer_.getAssetUri(),startTime:null};this.localVideo_.pause();var t=!0,n=!1,r=void 0;try{for(var i,a=Ke.VideoInitStateAttributes[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value;e.video[s]=this.localVideo_[s]}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}this.localVideo_.ended||(e.startTime=this.localVideo_.currentTime);var o=!0,u=!1,l=void 0;try{for(var c,d=Ke.PlayerInitState[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){var h=c.value,f=h[0],p=h[1],m=this.localPlayer_[f]();e.player[p]=m}}catch(e){u=!0,l=e}finally{try{o||null==d.return||d.return()}finally{if(u)throw l}}var v=!0,y=!1,g=void 0;try{for(var _,b=Ke.PlayerInitAfterLoadState[Symbol.iterator]();!(v=(_=b.next()).done);v=!0){var w=_.value,E=w[0],S=w[1],T=this.localPlayer_[E]();e.playerAfterLoad[S]=T}}catch(e){y=!0,g=e}finally{try{v||null==b.return||b.return()}finally{if(y)throw g}}return e}},{key:"onCastStatusChanged_",value:function(){var e=new b("caststatuschanged");this.dispatchEvent(e)}},{key:"onFirstCastStateUpdate_",value:function(){var e=this.videoProxy_.paused?"pause":"play",t=new b(e);this.videoEventTarget_.dispatchEvent(t)}},{key:"onResumeLocal_",value:function(){var e=this;window.asserts.assert(this.sender_,"Cast sender should not be null!");var t=!0,n=!1,r=void 0;try{for(var i,a=Ke.PlayerInitState[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value,o=s[0],u=s[1],l=this.sender_.get("player",o)();this.localPlayer_[u](l)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}var c=this.sender_.get("player","getAssetUri")(),d=this.sender_.get("video","ended"),h=Promise.resolve(),f=this.localVideo_.autoplay,p=null;d||(p=this.sender_.get("video","currentTime")),c&&(this.localVideo_.autoplay=!1,h=this.localPlayer_.load(c,p));var m={},v=!0,y=!1,g=void 0;try{for(var _,w=Ke.VideoInitStateAttributes[Symbol.iterator]();!(v=(_=w.next()).done);v=!0){var E=_.value;m[E]=this.sender_.get("video",E)}}catch(e){y=!0,g=e}finally{try{v||null==w.return||w.return()}finally{if(y)throw g}}h.then(function(){if(e.localVideo_){var t=!0,n=!1,r=void 0;try{for(var i,a=Ke.VideoInitStateAttributes[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value;e.localVideo_[s]=m[s]}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}var o=!0,u=!1,l=void 0;try{for(var d,h=Ke.PlayerInitAfterLoadState[Symbol.iterator]();!(o=(d=h.next()).done);o=!0){var p=d.value,v=p[0],y=p[1],g=e.sender_.get("player",v)();e.localPlayer_[y](g)}}catch(e){u=!0,l=e}finally{try{o||null==h.return||h.return()}finally{if(u)throw l}}e.localVideo_.autoplay=f,c&&e.localVideo_.play()}},function(t){window.asserts.assert(t instanceof Error,"Wrong error type!");var n=new b("error",{detail:t});e.localPlayer_.dispatchEvent(n)})}},{key:"videoProxyGet_",value:function(e){var t=this;if("addEventListener"==e)return function(e,n,r){return t.videoEventTarget_.addEventListener(e,n,r)};if("removeEventListener"==e)return function(e,n,r){return t.videoEventTarget_.removeEventListener(e,n,r)};if(this.sender_&&this.sender_.isCasting()&&!this.sender_.hasRemoteProperties()){var n=this.localVideo_[e];if("function"!=typeof n)return n}if(!this.sender_||!this.sender_.isCasting()){var r=this.localVideo_[e];return"function"==typeof r&&(r=r.bind(this.localVideo_)),r}return this.sender_.get("video",e)}},{key:"videoProxySet_",value:function(e,t){this.sender_&&this.sender_.isCasting()?this.sender_.set("video",e,t):this.localVideo_[e]=t}},{key:"videoProxyLocalEvent_",value:function(e){if(!this.sender_||!this.sender_.isCasting()){var t=new b(e.type,e);this.videoEventTarget_.dispatchEvent(t)}}},{key:"playerProxyGet_",value:function(e){var t=this;if("addEventListener"==e)return function(e,n,r){return t.playerEventTarget_.addEventListener(e,n,r)};if("removeEventListener"==e)return function(e,n,r){return t.playerEventTarget_.removeEventListener(e,n,r)};if("getMediaElement"==e)return function(){return t.videoProxy_};if("getSharedConfiguration"==e)return nt.log.warning("Can't share configuration across a network. Returning copy."),this.sender_?this.sender_.get("player","getConfiguration"):this.localPlayer_.getConfiguration();if("getNetworkingEngine"==e)return this.sender_.isCasting()&&nt.log.warning("NOTE: getNetworkingEngine() is always local!"),function(){return t.localPlayer_.getNetworkingEngine()};if(this.sender_&&this.sender_.isCasting()){if("getManifest"==e||"drmInfo"==e)return function(){return nt.log.alwaysWarn(e+"() does not work while casting!"),null};if("getManifestUri"==e)return nt.Deprecate.deprecateFeature(2,6,"getManifestUri",'Please use "getAssetUri" instead.'),this.playerProxyGet_("getAssetUri");if("attach"==e||"detach"==e)return function(){return nt.log.alwaysWarn(e+"() does not work while casting!"),Promise.resolve()}}if(this.sender_&&this.sender_.isCasting()&&!this.sender_.hasRemoteProperties()&&Ke.PlayerGetterMethods[e]){var n=this.localPlayer_[e];return window.asserts.assert("function"==typeof n,"only methods on Player"),n.bind(this.localPlayer_)}if(!this.sender_||!this.sender_.isCasting()){var r=this.localPlayer_[e];return window.asserts.assert("function"==typeof r,"only methods on Player"),r.bind(this.localPlayer_)}return this.sender_.get("player",e)}},{key:"playerProxyLocalEvent_",value:function(e){this.sender_&&this.sender_.isCasting()||this.playerEventTarget_.dispatchEvent(e)}},{key:"onRemoteEvent_",value:function(e,t){window.asserts.assert(this.sender_&&this.sender_.isCasting(),"Should only receive remote events while casting"),this.sender_.isCasting()&&("video"==e?this.videoEventTarget_.dispatchEvent(t):"player"==e&&this.playerEventTarget_.dispatchEvent(t))}}])&&Qe(n.prototype,r),i&&Qe(n,i),t}());function it(e){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function at(e,t,n,r,i,a,s){try{var o=e[a](s),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,i)}function st(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ot(e,t){return!t||"object"!==it(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ut(e){return(ut=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lt(e,t){return(lt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct=F.util.Dom,dt=F.util.Timer;window.shaka=window.shaka||{};var ht=window.shaka;window.goog=window.goog||{};window.goog;var ft=function(e){function t(e,n,r,i){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=ot(this,ut(t).call(this))).enabled_=!0,a.overrideCssShowControls_=!1,a.config_=i,a.castProxy_=new rt(r,e,a.config_.castReceiverAppId),a.castAllowed_=!0,a.video_=a.castProxy_.getVideo(),a.localVideo_=r,a.player_=a.castProxy_.getPlayer(),a.localPlayer_=e,a.videoContainer_=n,a.isSeeking_=!1,a.seekTimer_=new dt(function(){window.asserts.assert(null!=a.seekBar_,"Seekbar should not be null!"),a.video_.currentTime=parseFloat(a.seekBar_.value)}),a.mouseStillTimer_=new dt(function(){a.onMouseStill_()}),a.hideSettingsMenusTimer_=new dt(function(){var e,t=!0,n=!1,r=void 0;try{for(var i,s=a.settingsMenus_[Symbol.iterator]();!(t=(i=s.next()).done);t=!0){var o=i.value;e=o,Oe.setDisplay(e,!1)}}catch(e){n=!0,r=e}finally{try{t||null==s.return||s.return()}finally{if(n)throw r}}}),a.timeAndSeekRangeTimer_=new dt(function(){a.updateTimeAndSeekRange_()}),a.lastTouchEventTime_=null,a.elements_=[],a.localization_=t.createLocalization_(),a.eventManager_=new Ve,a.configure(a.config_),a.updateLocalizedStrings_(),a.pressedKeys_=new Set,a.onCastStatusChange_(),a.timeAndSeekRangeTimer_.tickEvery(.125),a}var n,r,i,a,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lt(e,t)}(t,k),n=t,r=[{key:"destroy",value:(a=regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.eventManager_&&(this.eventManager_.release(),this.eventManager_=null),this.seekTimer_&&(this.seekTimer_.stop(),this.seekTimer_=null),this.mouseStillTimer_&&(this.mouseStillTimer_.stop(),this.mouseStillTimer_=null),this.hideSettingsMenusTimer_&&(this.hideSettingsMenusTimer_.stop(),this.hideSettingsMenusTimer_=null),this.timeAndSeekRangeTimer_&&(this.timeAndSeekRangeTimer_.stop(),this.timeAndSeekRangeTimer_=null),!this.castProxy_){e.next=9;break}return e.next=8,this.castProxy_.destroy();case 8:this.castProxy_=null;case 9:if(!this.localPlayer_){e.next=13;break}return e.next=12,this.localPlayer_.destroy();case 12:this.localPlayer_=null;case 13:return this.player_=null,this.localVideo_=null,this.video_=null,this.localization_=null,this.pressedKeys_.clear(),e.next=20,Promise.all(this.elements_.map(function(e){return e.destroy()}));case 20:this.elements_=[];case 21:case"end":return e.stop()}},e,this)}),s=function(){var e=this,t=arguments;return new Promise(function(n,r){var i=a.apply(e,t);function s(e){at(i,n,r,s,o,"next",e)}function o(e){at(i,n,r,s,o,"throw",e)}s(void 0)})},function(){return s.apply(this,arguments)})},{key:"allowCast",value:function(e){this.castAllowed_=e,this.onCastStatusChange_()}},{key:"loadComplete",value:function(){this.onPlayStateChange_()}},{key:"configure",value:function(e){this.config_=e,this.castProxy_.changeReceiverId(e.castReceiverAppId),this.controlsContainer_?(ct.removeAllChildren(this.controlsContainer_),this.videoContainer_.removeChild(this.spinnerContainer_)):this.addControlsContainer_(),this.createDOM_(),this.addEventListeners_()}},{key:"setEnabledShakaControls",value:function(e){this.enabled_=e,e?(Oe.setDisplay(this.controlsContainer_,!0),Oe.setDisplay(this.spinnerContainer_,this.player_.isBuffering()),this.video_.tabIndex=-1,this.video_.controls=!1):(Oe.setDisplay(this.controlsContainer_,!1),Oe.setDisplay(this.spinnerContainer_,!1)),this.onPlayStateChange_()}},{key:"setEnabledNativeControls",value:function(e){this.video_.controls=e,this.video_.tabIndex=e?0:-1,e&&this.setEnabledShakaControls(!1)}},{key:"getCastProxy",value:function(){return this.castProxy_}},{key:"getLocalization",value:function(){return this.localization_}},{key:"getVideoContainer",value:function(){return this.videoContainer_}},{key:"getVideo",value:function(){return this.video_}},{key:"getLocalVideo",value:function(){return this.localVideo_}},{key:"getPlayer",value:function(){return this.player_}},{key:"getLocalPlayer",value:function(){return this.localPlayer_}},{key:"getControlsContainer",value:function(){return this.controlsContainer_}},{key:"getConfig",value:function(){return this.config_}},{key:"isSeeking",value:function(){return this.isSeeking_}},{key:"isCastAllowed",value:function(){return this.castAllowed_}},{key:"getDisplayTime",value:function(){return this.isSeeking_?Number(this.seekBar_.value):Number(this.video_.currentTime)}},{key:"setLastTouchEventTime",value:function(e){this.lastTouchEventTime_=e}},{key:"overrideCssShowControls",value:function(){this.overrideCssShowControls_=!0}},{key:"anySettingsMenusAreOpen",value:function(){return this.settingsMenus_.some(function(e){return e.classList.contains("shaka-displayed")})}},{key:"hideSettingsMenus",value:function(){this.hideSettingsMenusTimer_.tickNow()}},{key:"updateLocalizedStrings_",value:function(){var e=Ee.Ids;this.seekBar_&&this.seekBar_.setAttribute(ge.ARIA_LABEL,this.localization_.resolve(e.SEEK));var t=this.video_.paused&&!this.isSeeking_?e.PLAY:e.PAUSE;this.playButton_.setAttribute(ge.ARIA_LABEL,this.localization_.resolve(t))}},{key:"createDOM_",value:function(){if(this.seekBarContainer_=null,this.seekBar_=null,this.videoContainer_.classList.add("shaka-video-container"),this.video_.classList.add("shaka-video"),this.addPlayButton_(),this.addBufferingSpinner_(),this.addControlsButtonPanel_(),this.config_.addSeekBar&&this.addSeekBar_(),this.settingsMenus_=Array.from(this.videoContainer_.getElementsByClassName("shaka-settings-menu")),!this.seekBar_){var e=!0,t=!1,n=void 0;try{for(var r,i=this.settingsMenus_[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)r.value.classList.add("shaka-low-position")}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}}},{key:"addControlsContainer_",value:function(){var e=this;this.controlsContainer_=ct.createHTMLElement("div"),this.controlsContainer_.classList.add("shaka-controls-container"),this.videoContainer_.appendChild(this.controlsContainer_),this.eventManager_.listen(this.controlsContainer_,"touchstart",function(t){e.onContainerTouch_(t)},{passive:!1}),this.eventManager_.listen(this.controlsContainer_,"click",function(){e.onContainerClick_()})}},{key:"addPlayButton_",value:function(){this.playButtonContainer_=ct.createHTMLElement("div"),this.playButtonContainer_.classList.add("shaka-play-button-container"),this.controlsContainer_.appendChild(this.playButtonContainer_),this.playButton_=ct.createHTMLElement("button"),this.playButton_.classList.add("shaka-play-button"),this.playButtonContainer_.appendChild(this.playButton_),this.onPlayStateChange_()}},{key:"addBufferingSpinner_",value:function(){this.spinnerContainer_=ct.createHTMLElement("div"),this.spinnerContainer_.classList.add("shaka-spinner-container"),this.videoContainer_.appendChild(this.spinnerContainer_);var e=ct.createHTMLElement("div");e.classList.add("shaka-spinner"),this.spinnerContainer_.appendChild(e);var t="http://www.w3.org/2000/svg",n=document.createElementNS(t,"svg");n.setAttribute("class","shaka-spinner-svg"),n.setAttribute("viewBox","0 0 30 30"),e.appendChild(n);var r=document.createElementNS(t,"circle");r.setAttribute("class","shaka-spinner-path"),r.setAttribute("cx","15"),r.setAttribute("cy","15"),r.setAttribute("r","14.5"),r.setAttribute("fill","none"),r.setAttribute("stroke-width","1"),r.setAttribute("stroke-miterlimit","10"),n.appendChild(r)}},{key:"addControlsButtonPanel_",value:function(){this.bottomControls_=ct.createHTMLElement("div"),this.bottomControls_.classList.add("shaka-bottom-controls"),this.controlsContainer_.appendChild(this.bottomControls_),this.controlsButtonPanel_=ct.createHTMLElement("div"),this.controlsButtonPanel_.classList.add("shaka-controls-button-panel"),this.controlsButtonPanel_.classList.add("shaka-no-propagation"),this.controlsButtonPanel_.classList.add("shaka-show-controls-on-mouse-over"),this.bottomControls_.appendChild(this.controlsButtonPanel_);for(var e=0;e<this.config_.controlPanelElements.length;e++){var t=this.config_.controlPanelElements[e];if(pt.elementNamesToFactories_.get(t)){var n=pt.elementNamesToFactories_.get(t);this.elements_.push(n.create(this.controlsButtonPanel_,this))}else ht.log.alwaysWarn("Unrecognized control panel element requested:",t)}}},{key:"addEventListeners_",value:function(){var e=this;this.eventManager_.listen(this.player_,"buffering",function(){e.onBufferingStateChange_()}),this.onBufferingStateChange_(),this.eventManager_.listen(window,"keydown",function(t){return e.onKeyDown_(t)}),this.eventManager_.listen(this.video_,"play",function(){e.onPlayStateChange_()}),this.eventManager_.listen(this.video_,"pause",function(){e.onPlayStateChange_()}),this.eventManager_.listen(this.video_,"ended",function(){e.onPlayStateChange_()}),this.seekBar_&&(this.eventManager_.listen(this.seekBar_,"mousedown",function(){e.onSeekStart_()}),this.eventManager_.listen(this.seekBar_,"touchstart",function(){e.onSeekStart_()},{passive:!0}),this.eventManager_.listen(this.seekBar_,"input",function(){e.onSeekInput_()}),this.eventManager_.listen(this.seekBar_,"touchend",function(){e.onSeekEnd_()}),this.eventManager_.listen(this.seekBar_,"mouseup",function(){e.onSeekEnd_()}));var t=this.videoContainer_.getElementsByClassName("shaka-no-propagation"),n=!0,r=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;this.eventManager_.listen(o,"click",function(e){e.stopPropagation()})}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}var u=this.videoContainer_.getElementsByClassName("shaka-show-controls-on-mouse-over"),l=!0,c=!1,d=void 0;try{for(var h,f=u[Symbol.iterator]();!(l=(h=f.next()).done);l=!0){var p=h.value;this.eventManager_.listen(p,"mouseover",function(){e.overrideCssShowControls_=!0}),this.eventManager_.listen(p,"mouseleave",function(){e.overrideCssShowControls_=!1})}}catch(e){c=!0,d=e}finally{try{l||null==f.return||f.return()}finally{if(c)throw d}}this.eventManager_.listen(this.videoContainer_,"mousemove",function(t){e.onMouseMove_(t)}),this.eventManager_.listen(this.videoContainer_,"touchmove",function(t){e.onMouseMove_(t)},{passive:!0}),this.eventManager_.listen(this.videoContainer_,"touchend",function(t){e.onMouseMove_(t)},{passive:!0}),this.eventManager_.listen(this.videoContainer_,"mouseleave",function(){e.onMouseLeave_()}),this.eventManager_.listen(this.controlsButtonPanel_,"click",function(){e.hideSettingsMenus()}),this.eventManager_.listen(this.castProxy_,"caststatuschanged",function(){e.onCastStatusChange_()}),this.eventManager_.listen(this.videoContainer_,"keyup",function(t){e.onKeyUp_(t)}),this.eventManager_.listen(this.localization_,Ne.LOCALE_UPDATED,function(t){return e.updateLocalizedStrings_()}),this.eventManager_.listen(this.localization_,Ne.LOCALE_CHANGED,function(t){return e.updateLocalizedStrings_()})}},{key:"addSeekBar_",value:function(){this.seekBarContainer_=ct.createHTMLElement("div"),this.seekBarContainer_.classList.add("shaka-seek-bar-container"),this.seekBar_=document.createElement("input"),this.seekBar_.classList.add("shaka-seek-bar"),this.seekBar_.type="range",this.seekBar_.setAttribute("step","any"),this.seekBar_.setAttribute("min","0"),this.seekBar_.setAttribute("max","1"),this.seekBar_.value="0",this.seekBar_.classList.add("shaka-no-propagation"),this.seekBar_.classList.add("shaka-show-controls-on-mouse-over"),this.seekBarContainer_.appendChild(this.seekBar_),this.bottomControls_.appendChild(this.seekBarContainer_)}},{key:"onMouseMove_",value:function(e){"mousemove"==e.type&&this.controlsContainer_.classList.remove("shaka-keyboard-navigation"),"touchstart"==e.type||"touchmove"==e.type||"touchend"==e.type||"keyup"==e.type?this.lastTouchEventTime_=Date.now():this.lastTouchEventTime_+1e3<Date.now()&&(this.lastTouchEventTime_=null),this.lastTouchEventTime_&&"mousemove"==e.type||(this.videoContainer_.style.cursor="",this.hideSettingsMenusTimer_.stop(),this.setControlsOpacity_(be.Opacity.OPAQUE),this.updateTimeAndSeekRange_(),this.mouseStillTimer_.stop(),"touchend"!=e.type&&"keyup"!=e.type&&this.lastTouchEventTime_||this.mouseStillTimer_.tickAfter(3))}},{key:"onMouseLeave_",value:function(){this.lastTouchEventTime_||this.mouseStillTimer_.tickNow()}},{key:"onMouseStill_",value:function(){this.videoContainer_.style.cursor="none",this.video_.paused&&!this.isSeeking_||this.overrideCssShowControls_?this.setControlsOpacity_(be.Opacity.OPAQUE):this.setControlsOpacity_(be.Opacity.TRANSPARENT)}},{key:"onContainerTouch_",value:function(e){this.video_.duration&&(this.isOpaque_()?this.lastTouchEventTime_=Date.now():(this.onMouseMove_(e),e.preventDefault()))}},{key:"onContainerClick_",value:function(){this.enabled_&&(this.anySettingsMenusAreOpen()?this.hideSettingsMenusTimer_.tickNow():this.onPlayPauseClick_())}},{key:"onPlayPauseClick_",value:function(){this.enabled_&&this.video_.duration&&(this.player_.cancelTrickPlay(),this.video_.paused?this.video_.play():this.video_.pause())}},{key:"onCastStatusChange_",value:function(){var e=this.castProxy_.isCasting();this.dispatchEvent(new b("caststatuschanged",{newStatus:e})),e?this.controlsContainer_.setAttribute("casting","true"):this.controlsContainer_.removeAttribute("casting")}},{key:"onPlayStateChange_",value:function(){this.video_.ended&&!this.video_.paused&&this.video_.pause(),this.enabled_&&this.video_.paused&&!this.isSeeking_?(this.playButton_.setAttribute("icon","play"),this.playButton_.setAttribute(ge.ARIA_LABEL,this.localization_.resolve(Ee.Ids.PLAY))):(this.playButton_.setAttribute("icon","pause"),this.playButton_.setAttribute(ge.ARIA_LABEL,this.localization_.resolve(Ee.Ids.PAUSE)))}},{key:"onSeekStart_",value:function(){this.enabled_&&(this.isSeeking_=!0,this.video_.pause())}},{key:"onSeekInput_",value:function(){this.enabled_&&this.video_.duration&&(this.updateTimeAndSeekRange_(),this.seekTimer_.tickAfter(.125))}},{key:"onSeekEnd_",value:function(){this.enabled_&&(this.seekTimer_.tickNow(),this.isSeeking_=!1,this.video_.play())}},{key:"onKeyUp_",value:function(e){var t=e.key,n=document.activeElement,r=!(!n||!n.classList)&&n.classList.contains("shaka-volume-bar"),i=n&&n.classList&&n.classList.contains("shaka-seek-bar");switch(this.controlsContainer_.contains(n)&&this.onMouseMove_(e),this.pressedKeys_.delete(e.keyCode),t){case"ArrowLeft":r||this.seek_(this.video_.currentTime-5,e);break;case"ArrowRight":r||this.seek_(this.video_.currentTime+5,e);break;case"Home":this.seek_(this.player_.seekRange().start,e);break;case"End":this.seek_(this.player_.seekRange().end,e);break;case" ":i&&this.onPlayPauseClick_()}}},{key:"onBufferingStateChange_",value:function(){this.enabled_&&Oe.setDisplay(this.spinnerContainer_,this.player_.isBuffering())}},{key:"isOpaque_",value:function(){return!(!this.enabled_||(!this.castProxy_||!this.castProxy_.isCasting())&&null==this.controlsContainer_.getAttribute("shown"))}},{key:"seek_",value:function(e,t){this.video_.currentTime=e,this.updateTimeAndSeekRange_()}},{key:"updateTimeAndSeekRange_",value:function(){if(this.isOpaque_()){var e=this.isSeeking_?Number(this.seekBar_.value):Number(this.video_.currentTime),t=this.video_.buffered.length,n=t?this.video_.buffered.start(0):0,r=t?this.video_.buffered.end(t-1):0,i=this.player_.seekRange(),a=i.end-i.start;if(this.seekBar_&&(this.seekBar_.min=i.start,this.seekBar_.max=i.end),this.player_.isLive()){var s=Math.floor(i.end-e);e=Math.max(0,s),!this.isSeeking_&&this.seekBar_&&(this.seekBar_.value=i.end-e)}else!this.isSeeking_&&this.seekBar_&&(this.seekBar_.value=e);if(this.seekBar_){var o=this.player_.seekRange();if(o.end-o.start<ge.MIN_SEEK_WINDOW_TO_SHOW_SEEKBAR){Oe.setDisplay(this.seekBarContainer_,!1);var u=!0,l=!1,c=void 0;try{for(var d,h=this.settingsMenus_[Symbol.iterator]();!(u=(d=h.next()).done);u=!0)d.value.classList.add("shaka-low-position")}catch(e){l=!0,c=e}finally{try{u||null==h.return||h.return()}finally{if(l)throw c}}}else{Oe.setDisplay(this.seekBarContainer_,!0);var f=!0,p=!1,m=void 0;try{for(var v,y=this.settingsMenus_[Symbol.iterator]();!(f=(v=y.next()).done);f=!0)v.value.classList.remove("shaka-low-position")}catch(e){p=!0,m=e}finally{try{f||null==y.return||y.return()}finally{if(p)throw m}}var g=["to right"];if(0==t)g.push("#000 0%");else{var _=Math.max(n,o.start),w=Math.min(r,o.end),E=(_-o.start)/a||0,S=(w-o.start)/a||0,T=(e-o.start)/a||0;g.push(ge.SEEK_BAR_BASE_COLOR+" "+100*E+"%"),g.push(ge.SEEK_BAR_PLAYED_COLOR+" "+100*E+"%"),g.push(ge.SEEK_BAR_PLAYED_COLOR+" "+100*T+"%"),g.push(ge.SEEK_BAR_BUFFERED_COLOR+" "+100*T+"%"),g.push(ge.SEEK_BAR_BUFFERED_COLOR+" "+100*S+"%"),g.push(ge.SEEK_BAR_BASE_COLOR+" "+100*S+"%")}this.seekBarContainer_.style.background="linear-gradient("+g.join(",")+")"}}this.dispatchEvent(new b("timeandseekrangeupdated"))}}},{key:"onKeyDown_",value:function(e){var t=this;this.pressedKeys_.add(e.keyCode);var n=this.anySettingsMenusAreOpen();e.keyCode==ge.KEYCODE_TAB&&(this.controlsContainer_.classList.add("shaka-keyboard-navigation"),this.eventManager_.listen(window,"mousedown",function(){return t.onMouseDown_()})),e.keyCode==ge.KEYCODE_ESCAPE&&this.hideSettingsMenusTimer_.tickNow(),n&&this.pressedKeys_.has(ge.KEYCODE_TAB)&&this.keepFocusInMenu_(e)}},{key:"keepFocusInMenu_",value:function(e){var t=this.settingsMenus_.filter(function(e){return e.classList.contains("shaka-displayed")})[0];if(t.childNodes.length){for(var n=t.firstElementChild;n&&n.classList.contains("shaka-hidden");)n=n.nextElementSibling;for(var r=t.lastElementChild;r&&r.classList.contains("shaka-hidden");)r=r.previousElementSibling;var i=document.activeElement;this.pressedKeys_.has(ge.KEYCODE_SHIFT)?i==n&&(e.preventDefault(),r.focus()):i==r&&(e.preventDefault(),n.focus())}}},{key:"onMouseDown_",value:function(){var e=this;this.eventManager_.unlisten(window,"mousedown"),this.eventManager_.listen(window,"keydown",function(t){return e.onKeyDown_(t)})}},{key:"setControlsOpacity_",value:function(e){e==be.Opacity.OPAQUE?this.controlsContainer_.setAttribute("shown","true"):(this.controlsContainer_.removeAttribute("shown"),this.hideSettingsMenusTimer_.tickAfter(2))}}],i=[{key:"registerElement",value:function(e,t){pt.elementNamesToFactories_.set(e,t)}},{key:"createLocalization_",value:function(){var e=new Ne("en");return Ee.addTo(e),e.changeLocale(navigator.languages||[]),e}}],r&&st(n.prototype,r),i&&st(n,i),t}(),pt={};function mt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yt(e,t,n){return t&&vt(e.prototype,t),n&&vt(e,n),e}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pt.elementNamesToFactories_=new Map;var gt=function(){function e(t,n){mt(this,e),this.parent=t,this.button_=document.createElement("button"),this.button_.classList.add("material-icons"),this.button_.classList.add("close-button"),this.button_.textContent="close",this.parent.appendChild(this.button_),this.button_.addEventListener("click",function(){document.fullscreenElement&&document.exitFullscreen(),document.pictureInPictureElement&&document.exitPictureInPicture(),ai.unload()})}return yt(e,[{key:"destroy",value:function(){return Promise.resolve()}}]),e}();function _t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}gt.Factory=function(){function e(){mt(this,e)}return yt(e,[{key:"create",value:function(e,t){return new gt(e,t)}}]),e}();
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var bt=F.util.Timer,wt=(window.shaka,window.goog,function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"supportsMediaSource",value:function(){return!!window.MediaSource&&!!MediaSource.isTypeSupported}},{key:"supportsMediaType",value:function(t){return""!=e.anyMediaElement_().canPlayType(t)}},{key:"isEdge",value:function(){return e.userAgentContains_("Edge/")}},{key:"isIE",value:function(){return e.userAgentContains_("Trident/")}},{key:"isTizen",value:function(){return e.userAgentContains_("Tizen")}},{key:"isTizen3",value:function(){return e.userAgentContains_("Tizen 3")}},{key:"isWebOS",value:function(){return e.userAgentContains_("Web0S")}},{key:"isChromecast",value:function(){return e.userAgentContains_("CrKey")}},{key:"isChrome",value:function(){return e.userAgentContains_("Chrome")&&!e.isEdge()}},{key:"isApple",value:function(){return!!navigator.vendor&&navigator.vendor.includes("Apple")}},{key:"isMobile",value:function(){return/(?:iPhone|iPad|iPod|Android)/.test(navigator.userAgent)}},{key:"userAgentContains_",value:function(e){return(navigator.userAgent||"").includes(e)}},{key:"anyMediaElement_",value:function(){return e.cachedMediaElement_?e.cachedMediaElement_:(e.cacheExpirationTimer_||(e.cacheExpirationTimer_=new bt(function(){e.cachedMediaElement_=null})),e.cachedMediaElement_=document.querySelector("video")||document.querySelector("audio"),e.cachedMediaElement_||(e.cachedMediaElement_=document.createElement("video")),e.cacheExpirationTimer_.tickAfter(1),e.cachedMediaElement_)}}],(n=null)&&_t(t.prototype,n),r&&_t(t,r),e}());wt.cacheExpirationTimer_=null,wt.cachedMediaElement_=null;var Et=wt;function St(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
console.log({Shaka:B.a,net:F.net,util:F.util});var Tt=F.abr.SimpleAbrManager,Ct=F.util.ConfigUtils;console.log({NetworkingEngine:se});var kt=window.shaka,It=(window.goog,function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"createDefault",value:function(){var t=1e6,n=1/0;navigator.connection&&(t=1e6*navigator.connection.downlink,navigator.connection.saveData&&(n=360));var r={retryParameters:K.defaultRetryParameters(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1},i={retryParameters:K.defaultRetryParameters(),availabilityWindowOverride:NaN,dash:{customScheme:function(e){return e&&null},clockSyncUri:"",ignoreDrmInfo:!1,xlinkFailGracefully:!1,defaultPresentationDelay:10,ignoreMinBufferTime:!1,autoCorrectDrift:!0}},a={retryParameters:K.defaultRetryParameters(),failureCallback:function(e){kt.log.error("Unhandled streaming error",e)},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,smallGapLimit:.5,jumpLargeGaps:!1,durationBackoff:1,forceTransmuxTS:!1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1};Et.isWebOS()&&(a.stallEnabled=!1);var s={trackSelectionCallback:function(e){return e},progressCallback:function(e,t){kt.log.v2("Offline operation on",e.originalManifestUri,"progress at",t)},usePersistentLicense:!0},o={drm:r,manifest:i,streaming:a,offline:s,abrFactory:Tt,abr:{enabled:!0,defaultBandwidthEstimate:t,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:n,minPixels:0,maxPixels:1/0,minBandwidth:0,maxBandwidth:1/0}},preferredAudioLanguage:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayFactory:function(){return null}};return s.trackSelectionCallback=function(t){return e.defaultTrackSelect(t,o.preferredAudioLanguage)},o}},{key:"mergeConfigObjects",value:function(t,n,r){var i={".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",serverCertificate:new Uint8Array(0),individualizationServer:""}};return Ct.mergeConfigObjects(t,n,r||e.createDefault(),i,"")}},{key:"defaultTrackSelect",value:function(e,t){var n=Ae.ContentType,r=e.filter(function(e){return"variant"==e.type}),i=[],a=xe.findClosestLocale(t,r.map(function(e){return e.language}));a&&(i=r.filter(function(e){return xe.normalize(e.language)==a})),0==i.length&&(i=r.filter(function(e){return e.primary})),0==i.length&&(new Set(r.map(function(e){return e.language})).size>1&&kt.log.warning("Could not choose a good audio track based on language preferences or primary tracks.  An arbitrary language will be stored!"),i=r);var s=i.filter(function(e){return e.height&&e.height<=480});s.length&&(s.sort(function(e,t){return t.height-e.height}),i=s.filter(function(e){return e.height==s[0].height}));var o=[];if(i.length){var u=Math.floor(i.length/2);i.sort(function(e,t){return e.bandwidth-t.bandwidth}),o.push(i[u])}var l=!0,c=!1,d=void 0;try{for(var h,f=e[Symbol.iterator]();!(l=(h=f.next()).done);l=!0){var p=h.value;p.type==n.TEXT&&o.push(p)}}catch(e){c=!0,d=e}finally{try{l||null==f.return||f.return()}finally{if(c)throw d}}return o}}],(n=null)&&St(t.prototype,n),r&&St(t,r),e}());function At(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Lt=new M,xt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.destroyed_=!1,this.waitOnDestroy_=new A,this.onDestroy_=t}var t,n,r;return t=e,r=[{key:"destroyedError",value:function(e){return new M(Lt.severity.CRITICAL,Lt.category.PLAYER,Lt.code.OBJECT_DESTROYED,e)}}],(n=[{key:"destroyed",value:function(){return this.destroyed_}},{key:"destroy",value:function(){var e=this;return this.destroyed_?this.waitOnDestroy_:(this.destroyed_=!0,this.onDestroy_().then(function(){e.waitOnDestroy_.resolve()},function(){e.waitOnDestroy_.resolve()}))}},{key:"ensureNotDestroyed",value:function(t){if(this.destroyed_)throw t&&t.code===Lt.code.OBJECT_DESTROYED?t:e.destroyedError(t)}}])&&At(t.prototype,n),r&&At(t,r),e}();function Rt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var Nt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"asMap",value:function(e){for(var t=new Map,n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];t.set(i,e[i])}return t}},{key:"asObject",value:function(e){var t={};return e.forEach(function(e,n){t[n]=e}),t}}],(n=null)&&Rt(t.prototype,n),r&&Rt(t,r),e}();function Mt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var Pt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"getFullType",value:function(e,t){var n=e;return t&&(n+='; codecs="'+t+'"'),n}},{key:"getExtendedType",value:function(t){var n=[t.mimeType];return e.EXTENDED_MIME_PARAMETERS_.forEach(function(e,r){var i=t[r];i&&n.push(e+'="'+i+'"')}),n.join(";")}},{key:"splitCodecs",value:function(e){return e.split(",")}},{key:"getCodecBase",value:function(t){return e.getCodecParts_(t)[0]}},{key:"getCodecParts_",value:function(e){var t=e.split("."),n=t[0];return t.pop(),[n,t.join(".")]}}],(n=null)&&Mt(t.prototype,n),r&&Mt(t,r),e}();Pt.EXTENDED_MIME_PARAMETERS_=(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels"),Pt.CLOSED_CAPTION_MIMETYPE="application/cea-608";var Ot=Pt;function Dt(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ut(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ft=window.shaka,Bt=(window.goog,function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"fromUTF8",value:function(t){if(!t)return"";var n=new Uint8Array(t);239==n[0]&&187==n[1]&&191==n[2]&&(n=n.subarray(3));var r=e.fromCharCode(n),i=escape(r);try{return decodeURIComponent(i)}catch(e){throw new Ft.util.Error(Ft.util.Error.Severity.CRITICAL,Ft.util.Error.Category.TEXT,Ft.util.Error.Code.BAD_ENCODING)}}},{key:"fromUTF16",value:function(e,t,n){if(!e)return"";if(!n&&e.byteLength%2!=0)throw Ft.log.error("Data has an incorrect length, must be even."),new Ft.util.Error(Ft.util.Error.Severity.CRITICAL,Ft.util.Error.Category.TEXT,Ft.util.Error.Code.BAD_ENCODING);var r;if(e instanceof ArrayBuffer)r=e;else{var i=new Uint8Array(e.byteLength);i.set(new Uint8Array(e)),r=i.buffer}for(var a=Math.floor(e.byteLength/2),s=new Uint16Array(a),o=new DataView(r),u=0;u<a;u++)s[u]=o.getUint16(2*u,t);return Ft.util.StringUtils.fromCharCode(s)}},{key:"fromBytesAutoDetect",value:function(e){var t=Ft.util.StringUtils,n=new Uint8Array(e);if(239==n[0]&&187==n[1]&&191==n[2])return t.fromUTF8(n);if(254==n[0]&&255==n[1])return t.fromUTF16(n.subarray(2),!1);if(255==n[0]&&254==n[1])return t.fromUTF16(n.subarray(2),!0);var r=function(e){return n.byteLength<=e||n[e]>=32&&n[e]<=126};if(Ft.log.debug("Unable to find byte-order-mark, making an educated guess."),0==n[0]&&0==n[2])return t.fromUTF16(e,!1);if(0==n[1]&&0==n[3])return t.fromUTF16(e,!0);if(r(0)&&r(1)&&r(2)&&r(3))return t.fromUTF8(e);throw new Ft.util.Error(Ft.util.Error.Severity.CRITICAL,Ft.util.Error.Category.TEXT,Ft.util.Error.Code.UNABLE_TO_DETECT_ENCODING)}},{key:"toUTF8",value:function(e){for(var t=encodeURIComponent(e),n=unescape(t),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r.buffer}},{key:"toUTF16",value:function(e,t){for(var n=new Uint8Array(2*e.length),r=new DataView(n.buffer),i=0;i<e.length;++i){var a=e.charCodeAt(i);r.setUint16(2*i,a,t)}return n.buffer}},{key:"fromCharCode",value:function(t){if(!e.fromCharCodeImpl_)for(var n=function(t){if(function(e){try{var t=new Uint8Array(e),n=String.fromCharCode.apply(String,Dt(t));return window.asserts.assert(n,"Should get value"),!0}catch(e){return!1}}(t))return e.fromCharCodeImpl_=function(e){for(var n="",r=0;r<e.length;r+=t){var i=e.subarray(r,r+t);n+=String.fromCharCode.apply(String,Dt(i))}return n},"break"},r=65536;r>0&&"break"!==n(r);r/=2);return window.asserts.assert(e.fromCharCodeImpl_,"Unable to create a fromCharCode method"),e.fromCharCodeImpl_(t)}}],(n=null)&&Ut(t.prototype,n),r&&Ut(t,r),e}());function Vt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Bt.fromCharCodeImpl_=null;
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var jt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"toStandardBase64",value:function(e){var t=Bt.fromCharCode(e);return btoa(t)}},{key:"toBase64",value:function(t,n){n=null==n||n;var r=e.toStandardBase64(t).replace(/\+/g,"-").replace(/\//g,"_");return n?r:r.replace(/[=]*$/,"")}},{key:"fromBase64",value:function(e){for(var t=window.atob(e.replace(/-/g,"+").replace(/_/g,"/")),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}},{key:"fromHex",value:function(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length;n+=2)t[n/2]=window.parseInt(e.substr(n,2),16);return t}},{key:"toHex",value:function(e){for(var t="",n=0;n<e.length;++n){var r=e[n].toString(16);1==r.length&&(r="0"+r),t+=r}return t}},{key:"equal",value:function(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;if(e.length!=t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!=t[n])return!1;return!0}},{key:"concat",value:function(){for(var e=0,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)e+=n[i].length;for(var a=new Uint8Array(e),s=0,o=0;o<n.length;++o)a.set(n[o],s),s+=n[o].length;return a}},{key:"toDataView",value:function(e){return e instanceof ArrayBuffer?new DataView(e):new DataView(e.buffer,e.byteOffset,e.byteLength)}}],(n=null)&&Vt(t.prototype,n),r&&Vt(t,r),e}();function Ht(e,t,n,r,i,a,s){try{var o=e[a](s),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,i)}function Kt(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function s(e){Ht(a,r,i,s,o,"next",e)}function o(e){Ht(a,r,i,s,o,"throw",e)}s(void 0)})}}function Gt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var qt=F.util.Timer,Wt=window.shaka,zt=(window.goog,function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.playerInterface_=t,this.supportedTypes_=new Set,this.mediaKeys_=null,this.video_=null,this.initialized_=!1,this.currentDrmInfo_=null,this.eventManager_=new Ve,this.activeSessions_=new Map,this.offlineSessionIds_=[],this.allSessionsLoaded_=new A,this.config_=null,this.onError_=function(e){n.allSessionsLoaded_.reject(e),t.onError(e)},this.keyStatusByKeyId_=new Map,this.announcedKeyStatusByKeyId_=new Map,this.keyStatusTimer_=new qt(function(){return n.processKeyStatusChanges_()}),this.usePersistentLicenses_=!1,this.mediaKeyMessageEvents_=[],this.initialRequestsSent_=!1,this.expirationTimer_=new qt(function(){n.pollExpiration_()}).tickEvery(1);this.allSessionsLoaded_.catch(function(){}),this.destroyer_=new xt(function(){return n.destroyNow_()})}var t,n,r,i,a,s,o,u,l,c,d,h;return t=e,n=[{key:"destroy",value:function(){return this.destroyer_.destroy()}},{key:"destroyNow_",value:(h=Kt(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.eventManager_.release(),this.eventManager_=null,this.allSessionsLoaded_.reject(),this.expirationTimer_.stop(),this.expirationTimer_=null,this.keyStatusTimer_.stop(),this.keyStatusTimer_=null,n=Array.from(this.activeSessions_.keys()),this.activeSessions_.clear(),t.next=11,Promise.all(n.map(function(t){return Promise.resolve().then(Kt(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return Wt.log.v1("Closing session",t.sessionId),n.prev=1,n.next=4,e.closeSession_(t);case 4:n.next=8;break;case 6:n.prev=6,n.t0=n.catch(1);case 8:case"end":return n.stop()}},n,null,[[1,6]])})))}));case 11:if(!this.video_){t.next=21;break}return window.asserts.assert(!this.video_.src,"video src must be removed first!"),t.prev=13,t.next=16,this.video_.setMediaKeys(null);case 16:t.next=20;break;case 18:t.prev=18,t.t0=t.catch(13);case 20:this.video_=null;case 21:this.currentDrmInfo_=null,this.supportedTypes_.clear(),this.mediaKeys_=null,this.offlineSessionIds_=[],this.config_=null,this.onError_=function(){},this.playerInterface_=null;case 28:case"end":return t.stop()}},t,this,[[13,18]])})),function(){return h.apply(this,arguments)})},{key:"configure",value:function(e){this.config_=e}},{key:"initForStorage",value:function(e,t){return this.offlineSessionIds_=[],this.usePersistentLicenses_=t,this.init_(e)}},{key:"initForPlayback",value:function(e,t){return this.offlineSessionIds_=t,this.usePersistentLicenses_=t.length>0,this.init_(e)}},{key:"initForRemoval",value:function(e,t,n,r,i){var a=new Map;return a.set(e,{audioCapabilities:r,videoCapabilities:i,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:e,drmInfos:[{keySystem:e,licenseServerUri:t,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:n,initData:null,keyIds:null}]}),this.queryMediaKeys_(a)}},{key:"init_",value:function(t){window.asserts.assert(this.config_,"DrmEngine configure() must be called before init()!");var n=t.some(function(e){return e.drmInfos.length>0});if(!n){var r=Nt.asMap(this.config_.servers);e.replaceDrmInfo_(t,r)}var i=this.configureClearKey_();if(i){var a=!0,s=!1,o=void 0;try{for(var u,l=t[Symbol.iterator]();!(a=(u=l.next()).done);a=!0)u.value.drmInfos=[i]}catch(e){s=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(s)throw o}}}var c=!0,d=!1,h=void 0;try{for(var f,p=t[Symbol.iterator]();!(c=(f=p.next()).done);c=!0){var m=f.value,v=!0,y=!1,g=void 0;try{for(var _,b=m.drmInfos[Symbol.iterator]();!(v=(_=b.next()).done);v=!0){var w=_.value;e.fillInDrmInfoDefaults_(w,Nt.asMap(this.config_.servers),Nt.asMap(this.config_.advanced||{}))}}catch(e){y=!0,g=e}finally{try{v||null==b.return||b.return()}finally{if(y)throw g}}}}catch(e){d=!0,h=e}finally{try{c||null==p.return||p.return()}finally{if(d)throw h}}var E=this.prepareMediaKeyConfigsForVariants_(t);if(!E.size)return this.initialized_=!0,Promise.resolve();var S=this.queryMediaKeys_(E);return n?S:S.catch(function(){})}},{key:"attach",value:(d=Kt(regeneratorRuntime.mark(function e(t){var n,r,i,a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.mediaKeys_){e.next=3;break}return this.eventManager_.listenOnce(t,"encrypted",function(e){a.onError_(new Error(Error.Severity.CRITICAL,Error.Category.DRM,Error.Code.ENCRYPTED_CONTENT_WITHOUT_DRM_INFO))}),e.abrupt("return");case 3:return this.video_=t,this.eventManager_.listenOnce(this.video_,"play",function(){return a.onPlay_()}),n=(n=this.video_.setMediaKeys(this.mediaKeys_)).catch(function(e){return Promise.reject(new Error(Error.Severity.CRITICAL,Error.Category.DRM,Error.Code.FAILED_TO_ATTACH_TO_VIDEO,e.message))}),r=this.setServerCertificate(),e.next=10,Promise.all([n,r]);case 10:this.destroyer_.ensureNotDestroyed(),this.createOrLoad(),this.currentDrmInfo_.initData.length||this.offlineSessionIds_.length||(i=function(e){return a.newInitData(e.initDataType,new Uint8Array(e.initData))},this.eventManager_.listen(this.video_,"encrypted",i));case 13:case"end":return e.stop()}},e,this)})),function(e){return d.apply(this,arguments)})},{key:"setServerCertificate",value:(c=Kt(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.asserts.assert(this.initialized_,"Must call init() before setServerCertificate"),!(this.mediaKeys_&&this.currentDrmInfo_&&this.currentDrmInfo_.serverCertificate&&this.currentDrmInfo_.serverCertificate.length)){e.next=12;break}return e.prev=2,e.next=5,this.mediaKeys_.setServerCertificate(this.currentDrmInfo_.serverCertificate);case 5:e.sent||Wt.log.warning("Server certificates are not supported by the key system.  The server certificate has been ignored."),e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(2),new Error(Error.Severity.CRITICAL,Error.Category.DRM,Error.Code.INVALID_SERVER_CERTIFICATE,e.t0.message);case 12:case"end":return e.stop()}},e,this,[[2,9]])})),function(){return c.apply(this,arguments)})},{key:"removeSession",value:(l=Kt(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.asserts.assert(this.mediaKeys_,"Must call init() before removeSession"),e.next=3,this.loadOfflineSession_(t);case 3:if(n=e.sent){e.next=7;break}return Wt.log.v2("Ignoring attempt to remove missing session",t),e.abrupt("return");case 7:return r=[],(i=this.activeSessions_.get(n))&&(i.updatePromise=new A,r.push(i.updatePromise)),Wt.log.v2("Attempting to remove session",t),r.push(n.remove()),e.next=14,Promise.all(r);case 14:case"end":return e.stop()}},e,this)})),function(e){return l.apply(this,arguments)})},{key:"createOrLoad",value:function(){var e=(this.currentDrmInfo_?this.currentDrmInfo_.initData:[])||[],t=!0,n=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value;this.createTemporarySession_(s.initDataType,s.initData)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}var o=!0,u=!1,l=void 0;try{for(var c,d=this.offlineSessionIds_[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){var h=c.value;this.loadOfflineSession_(h)}}catch(e){u=!0,l=e}finally{try{o||null==d.return||d.return()}finally{if(u)throw l}}return e.length||this.offlineSessionIds_.length||this.allSessionsLoaded_.resolve(),this.allSessionsLoaded_}},{key:"newInitData",value:function(e,t){var n=this.activeSessions_.values(),r=!0,i=!1,a=void 0;try{for(var s,o=n[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var u=s.value;if(jt.equal(t,u.initData))return void Wt.log.debug("Ignoring duplicate init data.")}}catch(e){i=!0,a=e}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}this.createTemporarySession_(e,t)}},{key:"initialized",value:function(){return this.initialized_}},{key:"keySystem",value:function(){return this.currentDrmInfo_?this.currentDrmInfo_.keySystem:""}},{key:"willSupport",value:function(e){return!!Et.isEdge()||this.supportedTypes_.has(e)}},{key:"getSessionIds",value:function(){var e=this.activeSessions_.keys(),t=Te.map(e,function(e){return e.sessionId});return Array.from(t)}},{key:"getExpiration",value:function(){var e=1/0,t=this.activeSessions_.keys(),n=!0,r=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;isNaN(o.expiration)||(e=Math.min(e,o.expiration))}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return e}},{key:"getDrmInfo",value:function(){return this.currentDrmInfo_}},{key:"getKeyStatuses",value:function(){return Nt.asObject(this.announcedKeyStatusByKeyId_)}},{key:"prepareMediaKeyConfigsForVariants_",value:function(t){var n=new Set,r=!0,i=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var u=s.value,l=!0,c=!1,d=void 0;try{for(var h,f=u.drmInfos[Symbol.iterator]();!(l=(h=f.next()).done);l=!0){var p=h.value;n.add(p)}}catch(e){c=!0,d=e}finally{try{l||null==f.return||f.return()}finally{if(c)throw d}}}}catch(e){i=!0,a=e}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}var m=!0,v=!1,y=void 0;try{for(var g,_=n[Symbol.iterator]();!(m=(g=_.next()).done);m=!0){var b=g.value;e.fillInDrmInfoDefaults_(b,Nt.asMap(this.config_.servers),Nt.asMap(this.config_.advanced||{}))}}catch(e){v=!0,y=e}finally{try{m||null==_.return||_.return()}finally{if(v)throw y}}var w=this.usePersistentLicenses_?"required":"optional",E=this.usePersistentLicenses_?["persistent-license"]:["temporary"],S=new Map,T=!0,C=!1,k=void 0;try{for(var I,A=n[Symbol.iterator]();!(T=(I=A.next()).done);T=!0){var L=I.value,x={audioCapabilities:[],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:w,sessionTypes:E,label:L.keySystem,drmInfos:[]};S.set(L.keySystem,x)}}catch(e){C=!0,k=e}finally{try{T||null==A.return||A.return()}finally{if(C)throw k}}var R=!0,N=!1,M=void 0;try{for(var P,O=t[Symbol.iterator]();!(R=(P=O.next()).done);R=!0){var D=P.value,U=D.audio,F=D.video,B=U?Ot.getFullType(U.mimeType,U.codecs):"",V=F?Ot.getFullType(F.mimeType,F.codecs):"",j=!0,H=!1,K=void 0;try{for(var G,q=D.drmInfos[Symbol.iterator]();!(j=(G=q.next()).done);j=!0){var W=G.value,z=S.get(W.keySystem);if(window.asserts.assert(z,"Any missing configs should have be filled in before."),z.drmInfos.push(W),W.distinctiveIdentifierRequired&&(z.distinctiveIdentifier="required"),W.persistentStateRequired&&(z.persistentState="required"),U){var Y={robustness:W.audioRobustness||"",contentType:B};z.audioCapabilities.push(Y)}if(F){var X={robustness:W.videoRobustness||"",contentType:V};z.videoCapabilities.push(X)}}}catch(e){H=!0,K=e}finally{try{j||null==q.return||q.return()}finally{if(H)throw K}}}}catch(e){N=!0,M=e}finally{try{R||null==O.return||O.return()}finally{if(N)throw M}}return S}},{key:"queryMediaKeys_",value:(u=Kt(regeneratorRuntime.mark(function t(n){var r,i,a,s,o,u,l,c,d,h,f,p,m,v,y,g,_,b,w,E,S,T,C,k,I,A,L,x,R,N,M,P,O;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(1!=n.size||!n.has("")){t.next=2;break}throw new Error(Error.Severity.CRITICAL,Error.Category.DRM,Error.Code.NO_RECOGNIZED_KEY_SYSTEMS);case 2:for(r=!0,i=!1,a=void 0,t.prev=5,s=n.values()[Symbol.iterator]();!(r=(o=s.next()).done);r=!0)0==(u=o.value).audioCapabilities.length&&delete u.audioCapabilities,0==u.videoCapabilities.length&&delete u.videoCapabilities;t.next=13;break;case 9:t.prev=9,t.t0=t.catch(5),i=!0,a=t.t0;case 13:t.prev=13,t.prev=14,r||null==s.return||s.return();case 16:if(t.prev=16,!i){t.next=19;break}throw a;case 19:return t.finish(16);case 20:return t.finish(13);case 21:c=0,d=[!0,!1];case 22:if(!(c<d.length)){t.next=67;break}h=d[c],f=!0,p=!1,m=void 0,t.prev=27,v=n.keys()[Symbol.iterator]();case 29:if(f=(y=v.next()).done){t.next=48;break}if(g=y.value,(_=n.get(g)).drmInfos.some(function(e){return!!e.licenseServerUri})==h){t.next=35;break}return t.abrupt("continue",45);case 35:return t.prev=35,t.next=38,navigator.requestMediaKeySystemAccess(g,[_]);case 38:return l=t.sent,t.abrupt("break",48);case 42:t.prev=42,t.t1=t.catch(35);case 44:this.destroyer_.ensureNotDestroyed();case 45:f=!0,t.next=29;break;case 48:t.next=54;break;case 50:t.prev=50,t.t2=t.catch(27),p=!0,m=t.t2;case 54:t.prev=54,t.prev=55,f||null==v.return||v.return();case 57:if(t.prev=57,!p){t.next=60;break}throw m;case 60:return t.finish(57);case 61:return t.finish(54);case 62:if(!l){t.next=64;break}return t.abrupt("break",67);case 64:c++,t.next=22;break;case 67:if(l){t.next=69;break}throw new Error(Error.Severity.CRITICAL,Error.Category.DRM,Error.Code.REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE);case 69:for(this.destroyer_.ensureNotDestroyed(),t.prev=70,this.supportedTypes_.clear(),b=l.getConfiguration(),w=b.audioCapabilities||[],E=b.videoCapabilities||[],S=!0,T=!1,C=void 0,t.prev=78,k=w[Symbol.iterator]();!(S=(I=k.next()).done);S=!0)A=I.value,this.supportedTypes_.add(A.contentType);t.next=86;break;case 82:t.prev=82,t.t3=t.catch(78),T=!0,C=t.t3;case 86:t.prev=86,t.prev=87,S||null==k.return||k.return();case 89:if(t.prev=89,!T){t.next=92;break}throw C;case 92:return t.finish(89);case 93:return t.finish(86);case 94:for(L=!0,x=!1,R=void 0,t.prev=97,N=E[Symbol.iterator]();!(L=(M=N.next()).done);L=!0)P=M.value,this.supportedTypes_.add(P.contentType);t.next=105;break;case 101:t.prev=101,t.t4=t.catch(97),x=!0,R=t.t4;case 105:t.prev=105,t.prev=106,L||null==N.return||N.return();case 108:if(t.prev=108,!x){t.next=111;break}throw R;case 111:return t.finish(108);case 112:return t.finish(105);case 113:if(window.asserts.assert(this.supportedTypes_.size,"We should get at least one supported MIME type"),this.currentDrmInfo_=e.createDrmInfoFor_(l.keySystem,n.get(l.keySystem)),this.currentDrmInfo_.licenseServerUri){t.next=117;break}throw new Error(Error.Severity.CRITICAL,Error.Category.DRM,Error.Code.NO_LICENSE_SERVER_GIVEN,this.currentDrmInfo_.keySystem);case 117:return t.next=119,l.createMediaKeys();case 119:O=t.sent,this.destroyer_.ensureNotDestroyed(),Wt.log.info("Created MediaKeys object for key system",this.currentDrmInfo_.keySystem),this.mediaKeys_=O,this.initialized_=!0,t.next=134;break;case 126:if(t.prev=126,t.t5=t.catch(70),this.destroyer_.ensureNotDestroyed(t.t5),this.currentDrmInfo_=null,this.supportedTypes_.clear(),!(t.t5 instanceof Error)){t.next=133;break}throw t.t5;case 133:throw new Error(Error.Severity.CRITICAL,Error.Category.DRM,Error.Code.FAILED_TO_CREATE_CDM,t.t5.message);case 134:case"end":return t.stop()}},t,this,[[5,9,13,21],[14,,16,20],[27,50,54,62],[35,42],[55,,57,61],[70,126],[78,82,86,94],[87,,89,93],[97,101,105,113],[106,,108,112]])})),function(e){return u.apply(this,arguments)})},{key:"configureClearKey_",value:function(){var e=Nt.asMap(this.config_.clearKeys);if(0==e.size)return null;var t=[],n=[];e.forEach(function(e,r){var i=jt.fromHex(r),a=jt.fromHex(e),s={kty:"oct",kid:jt.toBase64(i,!1),k:jt.toBase64(a,!1)};t.push(s),n.push(s.kid)});var r={keys:t},i=JSON.stringify(r),a=JSON.stringify({kids:n}),s=[{initData:new Uint8Array(Bt.toUTF8(a)),initDataType:"keyids"}];return{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+window.btoa(i),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:s,keyIds:[]}}},{key:"loadOfflineSession_",value:(o=Kt(regeneratorRuntime.mark(function e(t){var n,r,i,a,s=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,Wt.log.v1("Attempting to load an offline session",t),n=this.mediaKeys_.createSession("persistent-license"),e.next=10;break;case 5:return e.prev=5,e.t0=e.catch(0),r=new Error(Error.Severity.CRITICAL,Error.Category.DRM,Error.Code.FAILED_TO_CREATE_SESSION,e.t0.message),this.onError_(r),e.abrupt("return",Promise.reject(r));case 10:return this.eventManager_.listen(n,"message",function(e){return s.onSessionMessage_(e)}),this.eventManager_.listen(n,"keystatuseschange",function(e){return s.onKeyStatusesChange_(e)}),i={initData:null,loaded:!1,oldExpiration:1/0,updatePromise:null},this.activeSessions_.set(n,i),e.prev=14,e.next=17,n.load(t);case 17:if(a=e.sent,this.destroyer_.ensureNotDestroyed(),Wt.log.v2("Loaded offline session",t,a),a){e.next=24;break}return this.activeSessions_.delete(n),this.onError_(new Error(Error.Severity.CRITICAL,Error.Category.DRM,Error.Code.OFFLINE_SESSION_REMOVED)),e.abrupt("return",Promise.resolve());case 24:return i.loaded=!0,this.areAllSessionsLoaded_()&&this.allSessionsLoaded_.resolve(),e.abrupt("return",n);case 29:e.prev=29,e.t1=e.catch(14),this.destroyer_.ensureNotDestroyed(e.t1),this.activeSessions_.delete(n),this.onError_(new Error(Error.Severity.CRITICAL,Error.Category.DRM,Error.Code.FAILED_TO_CREATE_SESSION,e.t1.message));case 34:return e.abrupt("return",Promise.resolve());case 35:case"end":return e.stop()}},e,this,[[0,5],[14,29]])})),function(e){return o.apply(this,arguments)})},{key:"createTemporarySession_",value:function(e,t){var n,r=this;try{this.usePersistentLicenses_?(Wt.log.v1("Creating new persistent session"),n=this.mediaKeys_.createSession("persistent-license")):(Wt.log.v1("Creating new temporary session"),n=this.mediaKeys_.createSession())}catch(e){return void this.onError_(new Error(Error.Severity.CRITICAL,Error.Category.DRM,Error.Code.FAILED_TO_CREATE_SESSION,e.message))}this.eventManager_.listen(n,"message",function(e){return r.onSessionMessage_(e)}),this.eventManager_.listen(n,"keystatuseschange",function(e){return r.onKeyStatusesChange_(e)});var i={initData:t,loaded:!1,oldExpiration:1/0,updatePromise:null};this.activeSessions_.set(n,i),n.generateRequest(e,t.buffer).catch(function(e){var t;r.destroyer_.destroyed()||(r.activeSessions_.delete(n),e.errorCode&&e.errorCode.systemCode&&((t=e.errorCode.systemCode)<0&&(t+=Math.pow(2,32)),t="0x"+t.toString(16)),r.onError_(new Error(Error.Severity.CRITICAL,Error.Category.DRM,Error.Code.FAILED_TO_GENERATE_LICENSE_REQUEST,e.message,e,t)))})}},{key:"onSessionMessage_",value:function(e){this.delayLicenseRequest_()?this.mediaKeyMessageEvents_.push(e):this.sendLicenseRequest_(e)}},{key:"delayLicenseRequest_",value:function(){return this.config_.delayLicenseRequestUntilPlayed&&this.video_.paused&&!this.initialRequestsSent_}},{key:"sendLicenseRequest_",value:(s=Kt(regeneratorRuntime.mark(function t(n){var r,i,a,s,o,u,l,c,d,h,f,p=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.target,Wt.log.v2("Sending license request for session",r.sessionId),i=this.activeSessions_.get(r),a=this.currentDrmInfo_.licenseServerUri,s=this.config_.advanced[this.currentDrmInfo_.keySystem],"individualization-request"==n.messageType&&s&&s.individualizationServer&&(a=s.individualizationServer),o=se.RequestType.LICENSE,(u=se.makeRequest([a],this.config_.retryParameters)).body=n.message,u.method="POST",u.licenseRequestType=n.messageType,"com.microsoft.playready"!==this.currentDrmInfo_.keySystem&&"com.chromecast.playready"!==this.currentDrmInfo_.keySystem||this.unpackPlayReadyRequest_(u),this.currentDrmInfo_.keySystem.startsWith("com.apple.fps")&&this.formatFairPlayRequest_(u),t.prev=13,c=this.playerInterface_.netEngine.request(o,u),t.next=17,c.promise;case 17:l=t.sent,t.next=27;break;case 20:return t.prev=20,t.t0=t.catch(13),window.asserts.assert(t.t0 instanceof Error,"Wrong NetworkingEngine error type!"),d=new Error(Error.Severity.CRITICAL,Error.Category.DRM,Error.Code.LICENSE_REQUEST_FAILED,t.t0),this.onError_(d),i&&i.updatePromise&&i.updatePromise.reject(d),t.abrupt("return");case 27:if(!this.destroyer_.destroyed()){t.next=29;break}return t.abrupt("return");case 29:return this.currentDrmInfo_.keySystem.startsWith("com.apple.fps")&&this.parseFairPlayResponse_(l),t.prev=30,t.next=33,r.update(l.data);case 33:t.next=41;break;case 35:return t.prev=35,t.t1=t.catch(30),h=new Error(Error.Severity.CRITICAL,Error.Category.DRM,Error.Code.LICENSE_RESPONSE_REJECTED,t.t1.message),this.onError_(h),i&&i.updatePromise&&i.updatePromise.reject(h),t.abrupt("return");case 41:f=new b("drmsessionupdate"),this.playerInterface_.onEvent(f),i&&(i.updatePromise&&i.updatePromise.resolve(),new qt(function(){i.loaded=!0,p.areAllSessionsLoaded_()&&p.allSessionsLoaded_.resolve()}).tickAfter(e.SESSION_LOAD_TIMEOUT_));case 44:case"end":return t.stop()}},t,this,[[13,20],[30,35]])})),function(e){return s.apply(this,arguments)})},{key:"unpackPlayReadyRequest_",value:function(e){var t=Bt.fromUTF16(e.body,!0,!0);if(!t.includes("PlayReadyKeyMessage"))return Wt.log.debug("PlayReady request is already unwrapped."),void(e.headers["Content-Type"]="text/xml; charset=utf-8");Wt.log.debug("Unwrapping PlayReady request.");var n=(new DOMParser).parseFromString(t,"application/xml"),r=n.getElementsByTagName("HttpHeader"),i=!0,a=!1,s=void 0;try{for(var o,u=r[Symbol.iterator]();!(i=(o=u.next()).done);i=!0){var l=o.value,c=l.querySelector("name"),d=l.querySelector("value");window.asserts.assert(c&&d,"Malformed PlayReady headers!"),e.headers[c.textContent]=d.textContent}}catch(e){a=!0,s=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw s}}var h=n.querySelector("Challenge");window.asserts.assert(h,"Malformed PlayReady challenge!"),window.asserts.assert("base64encoded"==h.getAttribute("encoding"),"Unexpected PlayReady challenge encoding!"),e.body=jt.fromBase64(h.textContent).buffer}},{key:"formatFairPlayRequest_",value:function(e){var t=new Uint8Array(e.body),n="spc="+jt.toStandardBase64(t);e.headers["Content-Type"]="application/x-www-form-urlencoded",e.body=Bt.toUTF8(encodeURIComponent(n))}},{key:"parseFairPlayResponse_",value:function(e){var t;try{t=Bt.fromUTF8(e.data)}catch(e){return}"<ckc>"===(t=t.trim()).substr(0,5)&&"</ckc>"===t.substr(-6)&&(t=t.slice(5,-6));try{t=JSON.parse(t).ckc}catch(e){}e.data=jt.fromBase64(t).buffer}},{key:"onKeyStatusesChange_",value:function(t){var n=this,r=t.target;Wt.log.v2("Key status changed for session",r.sessionId);var i=this.activeSessions_.get(r),a=r.keyStatuses,s=!1;a.forEach(function(e,t){if("string"==typeof t){var r=t;t=e,e=r}if("com.microsoft.playready"==n.currentDrmInfo_.keySystem&&16==t.byteLength&&!Et.isTizen()){var a=jt.toDataView(t),o=a.getUint32(0,!0),u=a.getUint16(4,!0),l=a.getUint16(6,!0);a.setUint32(0,o,!1),a.setUint16(4,u,!1),a.setUint16(6,l,!1)}"com.microsoft.playready"==n.currentDrmInfo_.keySystem&&"status-pending"==e&&(e="usable"),"status-pending"!=e&&(i.loaded=!0),i||window.asserts.assert("usable"!=e,"Usable keys found in closed session"),"expired"==e&&(s=!0);var c=jt.toHex(new Uint8Array(t));n.keyStatusByKeyId_.set(c,e)});var o=r.expiration-Date.now();(o<0||s&&o<1e3)&&i&&!i.updatePromise&&(Wt.log.debug("Session has expired",r.sessionId),this.activeSessions_.delete(r),r.close().catch(function(){})),this.areAllSessionsLoaded_()&&(this.allSessionsLoaded_.resolve(),this.keyStatusTimer_.tickAfter(e.KEY_STATUS_BATCH_TIME))}},{key:"processKeyStatusChanges_",value:function(){var e=this.keyStatusByKeyId_,t=this.announcedKeyStatusByKeyId_;t.clear(),e.forEach(function(e,n){return t.set(n,e)});var n=Array.from(t.values());n.length&&n.every(function(e){return"expired"==e})&&this.onError_(new Error(Error.Severity.CRITICAL,Error.Category.DRM,Error.Code.EXPIRED)),this.playerInterface_.onKeyStatus(Nt.asObject(t))}},{key:"onPlay_",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.mediaKeyMessageEvents_[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var a=r.value;this.sendLicenseRequest_(a)}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this.initialRequestsSent_=!0,this.mediaKeyMessageEvents_=[]}},{key:"supportsVariant",value:function(e){var t=e.audio,n=e.video;if(t&&t.encrypted){var r=Ot.getFullType(t.mimeType,t.codecs);if(!this.willSupport(r))return!1}if(n&&n.encrypted){var i=Ot.getFullType(n.mimeType,n.codecs);if(!this.willSupport(i))return!1}var a=this.keySystem();return 0==e.drmInfos.length||e.drmInfos.some(function(e){return e.keySystem==a})}},{key:"pollExpiration_",value:function(){var e=this;this.activeSessions_.forEach(function(t,n){var r=t.oldExpiration,i=n.expiration;isNaN(i)&&(i=1/0),i!=r&&(e.playerInterface_.onExpirationUpdated(n.sessionId,i),t.oldExpiration=i)})}},{key:"areAllSessionsLoaded_",value:function(){var e=this.activeSessions_.values();return Te.every(e,function(e){return e.loaded})}}],r=[{key:"isBrowserSupported",value:function(){return!!(window.MediaKeys&&window.navigator&&window.navigator.requestMediaKeySystemAccess&&window.MediaKeySystemAccess&&window.MediaKeySystemAccess.prototype.getConfiguration)}},{key:"probeSupport",value:(a=Kt(regeneratorRuntime.mark(function t(){var n,r,i,a,s,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return window.asserts.assert(e.isBrowserSupported(),"Must have basic EME support"),n=["org.w3.clearkey","com.widevine.alpha","com.microsoft.playready","com.apple.fps.3_0","com.apple.fps.2_0","com.apple.fps.1_0","com.apple.fps","com.adobe.primetime"],i=[{videoCapabilities:r=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],persistentState:"required",sessionTypes:["persistent-license"]},{videoCapabilities:r}],a=new Map,s=function(){var e=Kt(regeneratorRuntime.mark(function e(t){var n,r,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.requestMediaKeySystemAccess(t,i);case 3:return n=e.sent,r=n.getConfiguration().sessionTypes,s=!!r&&r.includes("persistent-license"),Et.isTizen3()&&(s=!1),a.set(t,{persistentState:s}),e.next=10,n.createMediaKeys();case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),a.set(t,null);case 15:case"end":return e.stop()}},e,null,[[0,12]])}));return function(t){return e.apply(this,arguments)}}(),o=n.map(function(e){return s(e)}),t.next=11,Promise.all(o);case 11:return t.abrupt("return",Nt.asObject(a));case 12:case"end":return t.stop()}},t)})),function(){return a.apply(this,arguments)})},{key:"areDrmCompatible",value:function(t,n){return!t.length||!n.length||e.getCommonDrmInfos(t,n).length>0}},{key:"getCommonDrmInfos",value:function(e,t){if(!e.length)return t;if(!t.length)return e;var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var u=s.value,l=!0,c=!1,d=void 0;try{for(var h,f=t[Symbol.iterator]();!(l=(h=f.next()).done);l=!0){var p=h.value;if(u.keySystem==p.keySystem){var m=[];m=(m=m.concat(u.initData||[])).concat(p.initData||[]);var v=[];v=(v=v.concat(u.keyIds)).concat(p.keyIds);var y={keySystem:u.keySystem,licenseServerUri:u.licenseServerUri||p.licenseServerUri,distinctiveIdentifierRequired:u.distinctiveIdentifierRequired||p.distinctiveIdentifierRequired,persistentStateRequired:u.persistentStateRequired||p.persistentStateRequired,videoRobustness:u.videoRobustness||p.videoRobustness,audioRobustness:u.audioRobustness||p.audioRobustness,serverCertificate:u.serverCertificate||p.serverCertificate,initData:m,keyIds:v};n.push(y);break}}}catch(e){c=!0,d=e}finally{try{l||null==f.return||f.return()}finally{if(c)throw d}}}}catch(e){i=!0,a=e}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}return n}},{key:"replaceDrmInfo_",value:function(e,t){var n=[];t.forEach(function(e,t){n.push({keySystem:t,licenseServerUri:e,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:[],keyIds:[]})});var r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done);r=!0)s.value.drmInfos=n}catch(e){i=!0,a=e}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}}},{key:"createDrmInfoFor_",value:function(t,n){var r=[],i=[],a=[],s=[];e.processDrmInfos_(n.drmInfos,r,i,a,s),i.length>1&&Wt.log.warning("Multiple unique server certificates found! Only the first will be used."),r.length>1&&Wt.log.warning("Multiple unique license server URIs found! Only the first will be used.");var o=n.audioCapabilities?n.audioCapabilities[0].robustness:"",u=n.videoCapabilities?n.videoCapabilities[0].robustness:"",l=n.distinctiveIdentifier;return{keySystem:t,licenseServerUri:r[0],distinctiveIdentifierRequired:"required"==l,persistentStateRequired:"required"==n.persistentState,audioRobustness:o,videoRobustness:u,serverCertificate:i[0],initData:a,keyIds:s}}},{key:"processDrmInfos_",value:function(e,t,n,r,i){var a=!0,s=!1,o=void 0;try{for(var u,l=function(){var e=u.value;if(t.includes(e.licenseServerUri)||t.push(e.licenseServerUri),e.serverCertificate&&(n.some(function(t){return jt.equal(t,e.serverCertificate)})||n.push(e.serverCertificate)),e.initData){var a=!0,s=!1,o=void 0;try{for(var l,c=function(){var e=l.value;r.some(function(t){return r=e,!(!(n=t).keyId||n.keyId!=r.keyId)||n.initDataType==r.initDataType&&jt.equal(n.initData,r.initData);var n,r})||r.push(e)},d=e.initData[Symbol.iterator]();!(a=(l=d.next()).done);a=!0)c()}catch(e){s=!0,o=e}finally{try{a||null==d.return||d.return()}finally{if(s)throw o}}}if(e.keyIds){var h=!0,f=!1,p=void 0;try{for(var m,v=e.keyIds[Symbol.iterator]();!(h=(m=v.next()).done);h=!0){var y=m.value;i.includes(y)||i.push(y)}}catch(e){f=!0,p=e}finally{try{h||null==v.return||v.return()}finally{if(f)throw p}}}},c=e[Symbol.iterator]();!(a=(u=c.next()).done);a=!0)l()}catch(e){s=!0,o=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw o}}}},{key:"fillInDrmInfoDefaults_",value:function(e,t,n){if(e.keySystem&&("org.w3.clearkey"!=e.keySystem||!e.licenseServerUri)){if(t.size){var r=t.get(e.keySystem)||"";e.licenseServerUri=r}e.keyIds||(e.keyIds=[]);var i=n.get(e.keySystem);i&&(e.distinctiveIdentifierRequired||(e.distinctiveIdentifierRequired=i.distinctiveIdentifierRequired),e.persistentStateRequired||(e.persistentStateRequired=i.persistentStateRequired),e.videoRobustness||(e.videoRobustness=i.videoRobustness),e.audioRobustness||(e.audioRobustness=i.audioRobustness),e.serverCertificate||(e.serverCertificate=i.serverCertificate)),window.cast&&window.cast.__platform__&&"com.microsoft.playready"==e.keySystem&&(e.keySystem="com.chromecast.playready")}}},{key:"closeSession_",value:(i=Kt(regeneratorRuntime.mark(function t(n){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=new Promise(function(t){new qt(t).tickAfter(e.CLOSE_TIMEOUT_)}),t.next=3,Promise.race([n.close().then(function(){return!0}),r.then(function(){return!1})]);case 3:t.sent||Wt.log.warning("Timeout waiting for session close");case 5:case"end":return t.stop()}},t)})),function(e){return i.apply(this,arguments)})}],n&&Gt(t.prototype,n),r&&Gt(t,r),e}());zt.SessionMetaData={},zt.PlayerInterface={},zt.CLOSE_TIMEOUT_=1,zt.SESSION_LOAD_TIMEOUT_=5,zt.KEY_STATUS_BATCH_TIME=.5;var Yt=zt;function Xt(e,t,n,r,i,a,s){try{var o=e[a](s),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,i)}function $t(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function s(e){Xt(a,r,i,s,o,"next",e)}function o(e){Xt(a,r,i,s,o,"throw",e)}s(void 0)})}}function Zt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Qt=F.util.Error,Jt=window.shaka,en=(window.goog,function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r,i,a,s;return t=e,n=null,r=[{key:"registerParserByExtension",value:function(t,n){e.parsersByExtension[t]=n}},{key:"registerParserByMime",value:function(t,n){e.parsersByMime[t]=n}},{key:"probeSupport",value:function(){var t={};if(Et.supportsMediaSource()){for(var n in e.parsersByMime)t[n]=!0;for(var r in e.parsersByExtension)t[r]=!0}for(var i={mpd:"application/dash+xml",m3u8:"application/x-mpegurl",ism:"application/vnd.ms-sstr+xml"},a=0,s=["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"];a<s.length;a++){var o=s[a];Et.supportsMediaSource()?t[o]=!!e.parsersByMime[o]:t[o]=Et.supportsMediaType(o)}for(var u in i)if(Et.supportsMediaSource())t[u]=!!e.parsersByExtension[u];else{var l=i[u];t[u]=Et.supportsMediaType(l)}return t}},{key:"create",value:(s=$t(regeneratorRuntime.mark(function t(n,r,i,a){var s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.getFactory_(n,r,i,a);case 3:return s=t.sent,t.abrupt("return",new s);case 7:throw t.prev=7,t.t0=t.catch(0),window.asserts.assert(t.t0 instanceof Qt,"Incorrect error type"),t.t0.severity=Qt.Severity.CRITICAL,t.t0;case 12:case"end":return t.stop()}},t,null,[[0,7]])})),function(e,t,n,r){return s.apply(this,arguments)})},{key:"getFactory_",value:(a=$t(regeneratorRuntime.mark(function t(n,r,i,a){var s,o,u,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=5;break}if(!(s=e.parsersByMime[a.toLowerCase()])){t.next=4;break}return t.abrupt("return",s);case 4:Jt.log.warning("Could not determine manifest type using MIME type ",a);case 5:if(!(o=e.getExtension(n))){t.next=13;break}if(!(u=e.parsersByExtension[o])){t.next=10;break}return t.abrupt("return",u);case 10:Jt.log.warning("Could not determine manifest type for extension ",o),t.next=14;break;case 13:Jt.log.warning("Could not find extension for ",n);case 14:if(a){t.next=23;break}return t.next=17,e.getMimeType(n,r,i);case 17:if(!(a=t.sent)){t.next=23;break}if(!(l=e.parsersByMime[a])){t.next=22;break}return t.abrupt("return",l);case 22:Jt.log.warning("Could not determine manifest type using MIME type",a);case 23:throw new Qt(Qt.Severity.CRITICAL,Qt.Category.MANIFEST,Qt.Code.UNABLE_TO_GUESS_MANIFEST_TYPE,n);case 24:case"end":return t.stop()}},t)})),function(e,t,n,r){return a.apply(this,arguments)})},{key:"getMimeType",value:(i=$t(regeneratorRuntime.mark(function e(t,n,r){var i,a,s,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=se.RequestType.MANIFEST,(a=se.makeRequest([t],r)).method="HEAD",e.next=5,n.request(i,a).promise;case 5:return s=e.sent,o=s.headers["content-type"],e.abrupt("return",o?o.toLowerCase():"");case 8:case"end":return e.stop()}},e)})),function(e,t,n){return i.apply(this,arguments)})},{key:"getExtension",value:function(e){var t=new X(e).getPath().split("/").pop().split(".");return 1==t.length?"":t.pop().toLowerCase()}},{key:"isSupported",value:function(t,n){return!!Et.supportsMediaSource()&&(n in e.parsersByMime||e.getExtension(t)in e.parsersByExtension)}}],n&&Zt(t.prototype,n),r&&Zt(t,r),e}());en.parsersByMime={},en.parsersByExtension={};var tn=en;function nn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka;var rn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.estimatedTotal_=0,this.estimatedDownloaded_=0,this.actualDownloaded_=0,this.pending_=new Map,this.nextId_=0}var t,n,r;return t=e,(n=[{key:"open",value:function(e){this.estimatedTotal_+=e;var t=this.nextId_;return this.nextId_++,this.pending_.set(t,e),t}},{key:"close",value:function(e,t){if(this.pending_.has(e)){var n=this.pending_.get(e);this.pending_.delete(e),this.estimatedDownloaded_+=n,this.actualDownloaded_+=t}}},{key:"getEstimatedProgress",value:function(){return 0==this.estimatedTotal_?0:this.estimatedDownloaded_/this.estimatedTotal_}},{key:"getTotalDownloaded",value:function(){return this.actualDownloaded_}}])&&nn(t.prototype,n),r&&nn(t,r),e}();function an(e,t,n,r,i,a,s){try{var o=e[a](s),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,i)}function sn(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function s(e){an(a,r,i,s,o,"next",e)}function o(e){an(a,r,i,s,o,"throw",e)}s(void 0)})}}function on(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var un=F.net.NetworkingEngine,ln=window.shaka,cn=(window.goog,function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.networkingEngine_=t,this.groups_=new Map,this.destroyer_=new xt(function(){var e=Array.from(r.groups_.values());return Promise.all(e.map(function(e){return e.catch(function(){})}))}),this.onProgress_=n,this.estimator_=new rn}var t,n,r,i,a;return t=e,(n=[{key:"destroy",value:function(){return this.destroyer_.destroy()}},{key:"queue",value:function(e,t,n,r){var i=this;this.destroyer_.ensureNotDestroyed();var a=this.estimator_.open(n),s=this.groups_.get(e)||Promise.resolve();this.groups_.set(e,s.then(sn(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.fetchSegment_(t);case 2:if(n=e.sent,!i.destroyer_.destroyed()){e.next=5;break}throw new ln.util.Error(ln.util.Error.Severity.CRITICAL,ln.util.Error.Category.STORAGE,ln.util.Error.Code.OPERATION_ABORTED);case 5:return i.estimator_.close(a,n.byteLength),i.onProgress_(i.estimator_.getEstimatedProgress(),i.estimator_.getTotalDownloaded()),e.abrupt("return",r(n));case 8:case"end":return e.stop()}},e)}))))}},{key:"waitToFinish",value:(a=sn(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(this.groups_.values());case 2:return e.abrupt("return",this.estimator_.getTotalDownloaded());case 3:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})},{key:"fetchSegment_",value:(i=sn(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=un.RequestType.SEGMENT,r=this.networkingEngine_.request(n,t),e.next=4,r.promise;case 4:return i=e.sent,window.asserts.assert(i.data,"Response data should be non-null!"),e.abrupt("return",i.data);case 7:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})}])&&on(t.prototype,n),r&&on(t,r),e}());function dn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var hn=function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type_=t,this.mechanism_=n,this.cell_=r,this.key_=i,this.asString_=["offline:",t,"/",n,"/",r,"/",i].join("")}var t,n,r;return t=e,r=[{key:"parse",value:function(t){var n=/^offline:([a-z]+)\/([^\/]+)\/([^\/]+)\/([0-9]+)$/.exec(t);if(null==n)return null;var r=n[1];if("manifest"!=r&&"segment"!=r)return null;var i=n[2];if(!i)return null;var a=n[3];if(!a)return null;var s=Number(n[4]);return null==r?null:new e(r,i,a,s)}},{key:"manifest",value:function(t,n,r){return new e("manifest",t,n,r)}},{key:"segment",value:function(t,n,r){return new e("segment",t,n,r)}}],(n=[{key:"isManifest",value:function(){return"manifest"==this.type_}},{key:"isSegment",value:function(){return"segment"==this.type_}},{key:"mechanism",value:function(){return this.mechanism_}},{key:"cell",value:function(){return this.cell_}},{key:"key",value:function(){return this.key_}},{key:"toString",value:function(){return this.asString_}}])&&dn(t.prototype,n),r&&dn(t,r),e}();function fn(e,t,n,r,i,a,s){try{var o=e[a](s),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,i)}function pn(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function s(e){fn(a,r,i,s,o,"next",e)}function o(e){fn(a,r,i,s,o,"throw",e)}s(void 0)})}}function mn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var vn=window.shaka,yn=(window.goog,function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r,i,a;return t=e,n=[{key:"delete",value:(a=pn(regeneratorRuntime.mark(function e(t,n,r){var i,a,s,o,u,l,c,d,h,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=i,a=[],s=!0,o=!1,u=void 0,e.prev=5,l=i.createBuckets_(r)[Symbol.iterator]();case 7:if(s=(c=l.next()).done){e.next=17;break}return d=c.value,h=this.doDelete_(t,n,d),e.next=12,h;case 12:f=e.sent,a=a.concat(f);case 14:s=!0,e.next=7;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(5),o=!0,u=e.t0;case 23:e.prev=23,e.prev=24,s||null==l.return||l.return();case 26:if(e.prev=26,!o){e.next=29;break}throw u;case 29:return e.finish(26);case 30:return e.finish(23);case 31:return e.abrupt("return",a);case 32:case"end":return e.stop()}},e,this,[[5,19,23,31],[24,,26,30]])})),function(e,t,n){return a.apply(this,arguments)})},{key:"doDelete_",value:(i=pn(regeneratorRuntime.mark(function e(t,n,r){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=new Yt({netEngine:n,onError:function(){},onKeyStatus:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),e.prev=1,i.configure(t),e.next=5,i.initForRemoval(r.info.keySystem,r.info.licenseUri,r.info.serverCertificate,r.info.audioCapabilities,r.info.videoCapabilities);case 5:e.next=13;break;case 7:return e.prev=7,e.t0=e.catch(1),vn.log.warning("Error initializing EME",e.t0),e.next=12,i.destroy();case 12:return e.abrupt("return",[]);case 13:return e.prev=13,e.next=16,i.setServerCertificate();case 16:e.next=24;break;case 18:return e.prev=18,e.t1=e.catch(13),vn.log.warning("Error setting server certificate",e.t1),e.next=23,i.destroy();case 23:return e.abrupt("return",[]);case 24:return a=[],e.next=27,Promise.all(r.sessionIds.map(function(){var e=pn(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.removeSession(t);case 3:a.push(t),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),vn.log.warning("Error deleting offline session",e.t0);case 9:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t){return e.apply(this,arguments)}}()));case 27:return e.next=29,i.destroy();case 29:return e.abrupt("return",a);case 30:case"end":return e.stop()}},e,null,[[1,7],[13,18]])})),function(e,t,n){return i.apply(this,arguments)})}],r=[{key:"createBuckets_",value:function(e){var t=t,n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){for(var u=s.value,l=!1,c=0,d=n;c<d.length;c++){var h=d[c];if(t.isCompatible_(h.info,u)){h.sessionIds.push(u.sessionId),l=!0;break}}l||n.push({info:u,sessionIds:[u.sessionId]})}}catch(e){i=!0,a=e}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}return n}},{key:"isCompatible_",value:function(e,t){var n=function(e,t){return e.robustness==t.robustness&&e.contentType==t.contentType};return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&f.hasSameElements(e.audioCapabilities,t.audioCapabilities,n)&&f.hasSameElements(e.videoCapabilities,t.videoCapabilities,n)}}],n&&mn(t.prototype,n),r&&mn(t,r),e}());yn.Bucket_={};var gn=yn;function _n(e,t,n,r,i,a,s){try{var o=e[a](s),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,i)}function bn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var wn=window.shaka,En=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mechanisms_=new Map}var t,n,r,i,a;return t=e,n=[{key:"destroy",value:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var i,a=this.mechanisms_.values()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value;e.push(s.destroy())}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return this.mechanisms_.clear(),Promise.all(e)}},{key:"init",value:function(){var t=this;e.getRegistry_().forEach(function(e,n){var r=e();r?t.mechanisms_.set(n,r):wn.log.info("Skipping "+n+" as it is not supported on this platform")});var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=this.mechanisms_.values()[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var u=s.value;n.push(u.init())}}catch(e){i=!0,a=e}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}return Promise.all(n)}},{key:"getActive",value:function(){var e=null;if(this.mechanisms_.forEach(function(t,n){t.getCells().forEach(function(t,r){t.hasFixedKeySpace()||e||(e={path:{mechanism:n,cell:r},cell:t})})}),e)return e;throw new wn.util.Error(wn.util.Error.Severity.CRITICAL,wn.util.Error.Category.STORAGE,wn.util.Error.Code.MISSING_STORAGE_CELL,"Could not find a cell that supports add-operations")}},{key:"forEachCell",value:function(e){this.mechanisms_.forEach(function(t,n){t.getCells().forEach(function(t,r){e({mechanism:n,cell:r},t)})})}},{key:"getCell",value:function(e,t){var n=this.mechanisms_.get(e);if(!n)throw new wn.util.Error(wn.util.Error.Severity.CRITICAL,wn.util.Error.Category.STORAGE,wn.util.Error.Code.MISSING_STORAGE_CELL,"Could not find mechanism with name "+e);var r=n.getCells().get(t);if(!r)throw new wn.util.Error(wn.util.Error.Severity.CRITICAL,wn.util.Error.Category.STORAGE,wn.util.Error.Code.MISSING_STORAGE_CELL,"Could not find cell with name "+t);return r}},{key:"forEachEmeSessionCell",value:function(e){this.mechanisms_.forEach(function(t,n){e(t.getEmeSessionCell())})}},{key:"getEmeSessionCell",value:function(){var e=Array.from(this.mechanisms_.keys());if(!e.length)throw new wn.util.Error(wn.util.Error.Severity.CRITICAL,wn.util.Error.Category.STORAGE,wn.util.Error.Code.STORAGE_NOT_SUPPORTED,"No supported storage mechanisms found");return this.mechanisms_.get(e[0]).getEmeSessionCell()}},{key:"resolvePath",value:function(e){var t=this.mechanisms_.get(e.mechanism);return t?t.getCells().get(e.cell):null}},{key:"erase",value:(i=regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=Array.from(this.mechanisms_.values()),(r=n.length>0)||e.getRegistry_().forEach(function(e,t){var r=e();r&&n.push(r)}),t.next=5,Promise.all(n.map(function(e){return e.erase()}));case 5:if(r){t.next=8;break}return t.next=8,Promise.all(n.map(function(e){return e.destroy()}));case 8:case"end":return t.stop()}},t,this)}),a=function(){var e=this,t=arguments;return new Promise(function(n,r){var a=i.apply(e,t);function s(e){_n(a,n,r,s,o,"next",e)}function o(e){_n(a,n,r,s,o,"throw",e)}s(void 0)})},function(){return a.apply(this,arguments)})}],r=[{key:"register",value:function(t,n){e.registry_.set(t,n)}},{key:"unregister",value:function(t){e.registry_.delete(t)}},{key:"support",value:function(){var t=e.getRegistry_(),n=!0,r=!1,i=void 0;try{for(var a,s=t.values()[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=(0,a.value)();if(o)return o.destroy(),!0}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return!1}},{key:"overrideSupport",value:function(t){e.override_=t}},{key:"clearOverride",value:function(){e.override_=null}},{key:"getRegistry_",value:function(){var t=e.override_,n=e.registry_;return window.COMPILED?n:t||n}}],n&&bn(t.prototype,n),r&&bn(t,r),e}();En.override_=null,En.registry_=new Map;var Sn=En;function Tn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Cn=window.shaka,kn=window.goog,In=function(){function e(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.presentationStartTime_=t,this.presentationDelay_=n,this.duration_=1/0,this.segmentAvailabilityDuration_=1/0,this.maxSegmentDuration_=1,this.minSegmentStartTime_=null,this.maxSegmentEndTime_=null,this.clockOffset_=0,this.static_=!0,this.userSeekStart_=0,this.autoCorrectDrift_=r}var t,n,r;return t=e,(n=[{key:"getDuration",value:function(){return this.duration_}},{key:"getMaxSegmentDuration",value:function(){return this.maxSegmentDuration_}},{key:"setDuration",value:function(e){window.asserts.assert(e>0,"duration must be > 0"),this.duration_=e}},{key:"getPresentationStartTime",value:function(){return this.presentationStartTime_}},{key:"setClockOffset",value:function(e){this.clockOffset_=e}},{key:"setStatic",value:function(e){this.static_=e}},{key:"setSegmentAvailabilityDuration",value:function(e){window.asserts.assert(e>=0,"segmentAvailabilityDuration must be >= 0"),this.segmentAvailabilityDuration_=e}},{key:"setDelay",value:function(e){window.asserts.assert(e>=0,"delay must be >= 0"),this.presentationDelay_=e}},{key:"getDelay",value:function(){return this.presentationDelay_}},{key:"notifySegments",value:function(e,t){if(0!=e.length){var n=e[0].startTime+t,r=e[e.length-1].endTime+t;if(this.notifyMinSegmentStartTime(n),this.maxSegmentDuration_=e.reduce(function(e,t){return Math.max(e,t.endTime-t.startTime)},this.maxSegmentDuration_),this.maxSegmentEndTime_=Math.max(this.maxSegmentEndTime_,r),null!=this.presentationStartTime_&&this.autoCorrectDrift_){var i=(Date.now()+this.clockOffset_)/1e3;this.presentationStartTime_=i-this.maxSegmentEndTime_-this.maxSegmentDuration_}Cn.log.v1("notifySegments:","maxSegmentDuration="+this.maxSegmentDuration_)}}},{key:"notifyMinSegmentStartTime",value:function(e){null==this.minSegmentStartTime_?this.minSegmentStartTime_=e:this.minSegmentStartTime_=Math.min(this.minSegmentStartTime_,e)}},{key:"notifyMaxSegmentDuration",value:function(e){this.maxSegmentDuration_=Math.max(this.maxSegmentDuration_,e),Cn.log.v1("notifyNewSegmentDuration:","maxSegmentDuration="+this.maxSegmentDuration_)}},{key:"offset",value:function(e){null!=this.minSegmentStartTime_&&(this.minSegmentStartTime_+=e),null!=this.maxSegmentEndTime_&&(this.maxSegmentEndTime_+=e)}},{key:"isLive",value:function(){return this.duration_==1/0&&!this.static_}},{key:"isInProgress",value:function(){return this.duration_!=1/0&&!this.static_}},{key:"getSegmentAvailabilityStart",value:function(){if(window.asserts.assert(this.segmentAvailabilityDuration_>=0,"The availability duration should be positive"),this.segmentAvailabilityDuration_==1/0)return this.userSeekStart_;var e=this.getSegmentAvailabilityEnd()-this.segmentAvailabilityDuration_;return Math.max(this.userSeekStart_,e)}},{key:"setUserSeekStart",value:function(e){this.userSeekStart_=e}},{key:"getSegmentAvailabilityEnd",value:function(){return this.isLive()||this.isInProgress()?Math.min(this.getLiveEdge_(),this.duration_):this.duration_}},{key:"getSafeSeekRangeStart",value:function(e){var t=Math.max(this.minSegmentStartTime_,this.userSeekStart_);if(this.segmentAvailabilityDuration_==1/0)return t;var n=this.getSegmentAvailabilityEnd()-this.segmentAvailabilityDuration_,r=Math.min(n+e,this.getSeekRangeEnd());return Math.max(t,r)}},{key:"getSeekRangeStart",value:function(){return this.getSafeSeekRangeStart(0)}},{key:"getSeekRangeEnd",value:function(){var e=this.isLive()||this.isInProgress()?this.presentationDelay_:0;return Math.max(0,this.getSegmentAvailabilityEnd()-e)}},{key:"usingPresentationStartTime",value:function(){return null!=this.presentationStartTime_&&null==this.maxSegmentEndTime_}},{key:"getLiveEdge_",value:function(){window.asserts.assert(null!=this.presentationStartTime_,"Cannot compute timeline live edge without start time");var e=(Date.now()+this.clockOffset_)/1e3;return Math.max(0,e-this.maxSegmentDuration_-this.presentationStartTime_)}},{key:"assertIsValid",value:function(){kn.DEBUG&&(this.isLive()?window.asserts.assert(null!=this.presentationStartTime_,"Detected as live stream, but does not match our model of live!"):this.isInProgress()?window.asserts.assert(null!=this.presentationStartTime_&&this.segmentAvailabilityDuration_==1/0,"Detected as IPR stream, but does not match our model of IPR!"):window.asserts.assert(this.segmentAvailabilityDuration_==1/0&&this.duration_!=1/0&&this.static_,"Detected as VOD stream, but does not match our model of VOD!"))}}])&&Tn(t.prototype,n),r&&Tn(t,r),e}();function An(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ln(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xn(e,t,n){return t&&Ln(e.prototype,t),n&&Ln(e,n),e}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */window.shaka,window.goog;var Rn=function(){function e(t,n,r){An(this,e),this.getUris=t,this.startByte=n,this.endByte=r}return xn(e,[{key:"createUris",value:function(){return this.getUris()}},{key:"getStartByte",value:function(){return this.startByte}},{key:"getEndByte",value:function(){return this.endByte}},{key:"getSize",value:function(){return this.endByte?this.endByte-this.startByte:null}}]),e}(),Nn=function(){function e(t,n,r,i,a,s){An(this,e),window.asserts.assert(n<r,"startTime must be less than endTime"),window.asserts.assert(a<s||null==s,"startByte must be < endByte"),this.position=t,this.startTime=n,this.endTime=r,this.getUris=i,this.startByte=a,this.endByte=s}return xn(e,[{key:"getPosition",value:function(){return this.position}},{key:"getStartTime",value:function(){return this.startTime}},{key:"getEndTime",value:function(){return this.endTime}},{key:"createUris",value:function(){return this.getUris()}},{key:"getStartByte",value:function(){return this.startByte}},{key:"getEndByte",value:function(){return this.endByte}},{key:"getSize",value:function(){return this.endByte?this.endByte-this.startByte:null}}]),e}();function Mn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Pn=window.shaka,On=window.goog,Dn=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),On.DEBUG&&e.assertCorrectReferences_(t),this.references_=t}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){return this.references_=null,Promise.resolve()}},{key:"find",value:function(e){for(var t=this.references_.length-1;t>=0;--t){var n=this.references_[t];if(e>=n.startTime&&e<n.endTime)return n.position}return this.references_.length&&e<this.references_[0].startTime?this.references_[0].position:null}},{key:"get",value:function(e){if(0==this.references_.length)return null;var t=e-this.references_[0].position;return t<0||t>=this.references_.length?null:this.references_[t]}},{key:"offset",value:function(e){for(var t=0;t<this.references_.length;++t)this.references_[t].startTime+=e,this.references_[t].endTime+=e}},{key:"merge",value:function(t){On.DEBUG&&e.assertCorrectReferences_(t);for(var n=[],r=0,i=0;r<this.references_.length&&i<t.length;){var a=this.references_[r],s=t[i];if(a.startTime<s.startTime)n.push(a),r++;else if(a.startTime>s.startTime)0==r?n.push(s):Pn.log.warning("Refusing to rewrite original references on update!"),i++;else{if(Math.abs(a.endTime-s.endTime)>.1){window.asserts.assert(s.endTime>a.endTime&&r==this.references_.length-1&&i==t.length-1,"This should be an update of the last segment in a period");var o=new Nn(a.position,s.startTime,s.endTime,s.getUris,s.startByte,s.endByte);n.push(o)}else n.push(a);r++,i++}}for(;r<this.references_.length;)n.push(this.references_[r++]);if(n.length)for(var u=n[n.length-1].position+1;i<t.length;){var l=t[i++],c=new Nn(u++,l.startTime,l.endTime,l.getUris,l.startByte,l.endByte);n.push(c)}else n=t;On.DEBUG&&e.assertCorrectReferences_(n),this.references_=n}},{key:"replace",value:function(t){On.DEBUG&&e.assertCorrectReferences_(t),this.references_=t}},{key:"evict",value:function(e){for(var t=0;t<this.references_.length;++t)if(this.references_[t].endTime>e)return void this.references_.splice(0,t);this.references_=[]}},{key:"fit",value:function(e){for(window.asserts.assert(null!=e,"Period duration must be known for static content!"),window.asserts.assert(e!=1/0,"Period duration must be finite for static content!");this.references_.length&&this.references_[this.references_.length-1].startTime>=e;)this.references_.pop();for(;this.references_.length&&this.references_[0].endTime<=0;)this.references_.shift();if(0!=this.references_.length){var t=this.references_[this.references_.length-1];this.references_[this.references_.length-1]=new Nn(t.position,t.startTime,e,t.getUris,t.startByte,t.endByte)}}}])&&Mn(t.prototype,n),r&&Mn(t,r),e}();function Un(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}On.DEBUG&&(Dn.assertCorrectReferences_=function(e){window.asserts.assert(e.every(function(t,n){if(0==n)return!0;var r=e[n-1];return t.position==r.position+1&&(r.startTime<t.startTime||!(r.startTime>t.startTime)&&r.endTime<=t.endTime)}),"SegmentReferences are incorrect")});
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var Fn=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mechanism_=t,this.cell_=n}var t,n,r;return t=e,(n=[{key:"fromManifestDB",value:function(e){var t=this,n=new In(null,0);n.setDuration(e.duration);var r=e.periods.map(function(e){return t.fromPeriodDB(e,n)}),i=e.drmInfo?[e.drmInfo]:[];if(e.drmInfo){var a=!0,s=!1,o=void 0;try{for(var u,l=r[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var c=u.value,d=!0,h=!1,f=void 0;try{for(var p,m=c.variants[Symbol.iterator]();!(d=(p=m.next()).done);d=!0)p.value.drmInfos=i}catch(e){h=!0,f=e}finally{try{d||null==m.return||m.return()}finally{if(h)throw f}}}}catch(e){s=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(s)throw o}}}return{presentationTimeline:n,minBufferTime:2,offlineSessionIds:e.sessionIds,periods:r}}},{key:"fromPeriodDB",value:function(e,t){var n=this,r=e.streams.filter(function(e){return n.isAudio_(e)}),i=e.streams.filter(function(e){return n.isVideo_(e)}),a=this.createVariants(r,i),s=e.streams.filter(function(e){return n.isText_(e)}).map(function(e){return n.fromStreamDB_(e)}),o=!0,u=!1,l=void 0;try{for(var c,d=e.streams[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){var h=c.value.segments.map(function(e,t){return n.fromSegmentDB_(t,e)});t.notifySegments(h,e.startTime)}}catch(e){u=!0,l=e}finally{try{o||null==d.return||d.return()}finally{if(u)throw l}}return{startTime:e.startTime,variants:Array.from(a.values()),textStreams:s}}},{key:"createVariants",value:function(e,t){var n=new Set,r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var u=s.value,l=!0,c=!1,d=void 0;try{for(var h,f=u.variantIds[Symbol.iterator]();!(l=(h=f.next()).done);l=!0){var p=h.value;n.add(p)}}catch(e){c=!0,d=e}finally{try{l||null==f.return||f.return()}finally{if(c)throw d}}}}catch(e){i=!0,a=e}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}var m=!0,v=!1,y=void 0;try{for(var g,_=t[Symbol.iterator]();!(m=(g=_.next()).done);m=!0){var b=g.value,w=!0,E=!1,S=void 0;try{for(var T,C=b.variantIds[Symbol.iterator]();!(w=(T=C.next()).done);w=!0){var k=T.value;n.add(k)}}catch(e){E=!0,S=e}finally{try{w||null==C.return||C.return()}finally{if(E)throw S}}}}catch(e){v=!0,y=e}finally{try{m||null==_.return||_.return()}finally{if(v)throw y}}var I=new Map,A=!0,L=!1,x=void 0;try{for(var R,N=n[Symbol.iterator]();!(A=(R=N.next()).done);A=!0){var M=R.value;I.set(M,this.createEmptyVariant_(M))}}catch(e){L=!0,x=e}finally{try{A||null==N.return||N.return()}finally{if(L)throw x}}var P=!0,O=!1,D=void 0;try{for(var U,F=e[Symbol.iterator]();!(P=(U=F.next()).done);P=!0){var B=U.value,V=this.fromStreamDB_(B),j=!0,H=!1,K=void 0;try{for(var G,q=B.variantIds[Symbol.iterator]();!(j=(G=q.next()).done);j=!0){var W=G.value,z=I.get(W);window.asserts.assert(!z.audio,"A variant should only have one audio stream"),z.language=V.language,z.primary=z.primary||V.primary,z.audio=V}}catch(e){H=!0,K=e}finally{try{j||null==q.return||q.return()}finally{if(H)throw K}}}}catch(e){O=!0,D=e}finally{try{P||null==F.return||F.return()}finally{if(O)throw D}}var Y=!0,X=!1,$=void 0;try{for(var Z,Q=t[Symbol.iterator]();!(Y=(Z=Q.next()).done);Y=!0){var J=Z.value,ee=this.fromStreamDB_(J),te=!0,ne=!1,re=void 0;try{for(var ie,ae=J.variantIds[Symbol.iterator]();!(te=(ie=ae.next()).done);te=!0){var se=ie.value,oe=I.get(se);window.asserts.assert(!oe.video,"A variant should only have one video stream"),oe.primary=oe.primary||ee.primary,oe.video=ee}}catch(e){ne=!0,re=e}finally{try{te||null==ae.return||ae.return()}finally{if(ne)throw re}}}}catch(e){X=!0,$=e}finally{try{Y||null==Q.return||Q.return()}finally{if(X)throw $}}return I}},{key:"fromStreamDB_",value:function(e){var t=this,n=e.segments.map(function(e,n){return t.fromSegmentDB_(n,e)}),r=new Dn(n),i={id:e.id,originalId:e.originalId,createSegmentIndex:function(){return Promise.resolve()},findSegmentPosition:function(e){return r.find(e)},getSegmentReference:function(e){return r.get(e)},initSegmentReference:null,presentationTimeOffset:e.presentationTimeOffset,mimeType:e.mimeType,codecs:e.codecs,width:e.width||void 0,height:e.height||void 0,frameRate:e.frameRate||void 0,kind:e.kind,encrypted:e.encrypted,keyId:e.keyId,language:e.language,label:e.label||null,type:e.contentType,primary:e.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,closedCaptions:null};return null!=e.initSegmentKey&&(i.initSegmentReference=this.fromInitSegmentDB_(e.initSegmentKey)),i}},{key:"fromSegmentDB_",value:function(e,t){var n=hn.segment(this.mechanism_,this.cell_,t.dataKey);return new Nn(e,t.startTime,t.endTime,function(){return[n.toString()]},0,null)}},{key:"fromInitSegmentDB_",value:function(e){var t=hn.segment(this.mechanism_,this.cell_,e);return new Rn(function(){return[t.toString()]},0,null)}},{key:"isAudio_",value:function(e){var t=Ae.ContentType;return e.contentType==t.AUDIO}},{key:"isVideo_",value:function(e){var t=Ae.ContentType;return e.contentType==t.VIDEO}},{key:"isText_",value:function(e){var t=Ae.ContentType;return e.contentType==t.TEXT}},{key:"createEmptyVariant_",value:function(e){return{id:e,language:"",primary:!1,audio:null,video:null,bandwidth:0,drmInfos:[],allowedByApplication:!0,allowedByKeySystem:!0}}}])&&Un(t.prototype,n),r&&Un(t,r),e}(),Bn=n(2),Vn=n.n(Bn);
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka;function jn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var Hn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"bufferStart",value:function(e){return e?1==e.length&&e.end(0)-e.start(0)<1e-6?null:1==e.length&&e.start(0)<0?0:e.length?e.start(0):null:null}},{key:"bufferEnd",value:function(e){return e?1==e.length&&e.end(0)-e.start(0)<1e-6?null:e.length?e.end(e.length-1):null:null}},{key:"isBuffered",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return!(!e||!e.length||1==e.length&&e.end(0)-e.start(0)<1e-6||t>e.end(e.length-1)||!(t+n>=e.start(0)))}},{key:"bufferedAheadOf",value:function(e,t){if(!e||!e.length)return 0;if(1==e.length&&e.end(0)-e.start(0)<1e-6)return 0;for(var n=0,r=e.length-1;r>=0&&e.end(r)>t;--r)n+=e.end(r)-Math.max(e.start(r),t);return n}},{key:"getGapIndex",value:function(e,t){if(!e||!e.length)return null;if(1==e.length&&e.end(0)-e.start(0)<1e-6)return null;for(var n=Et.isEdge()||Et.isIE()||Et.isTizen()||Et.isChromecast()?.5:.1,r=0;r<e.length;r++)if(e.start(r)>t&&(0==r||e.end(r-1)-t<=n))return r;return null}},{key:"getBufferedInfo",value:function(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}}],(n=null)&&jn(t.prototype,n),r&&jn(t,r),e}();function Kn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */window.shaka;var Gn=function e(t,n,r){Kn(this,e),this.startTime=t,this.direction=e.direction.HORIZONTAL_LEFT_TO_RIGHT,this.endTime=n,this.payload=r,this.region=new qn,this.position=null,this.positionAlign=e.positionAlign.AUTO,this.size=100,this.textAlign=e.textAlign.CENTER,this.writingMode=e.writingMode.HORIZONTAL_TOP_TO_BOTTOM,this.lineInterpretation=e.lineInterpretation.LINE_NUMBER,this.line=null,this.lineHeight="",this.lineAlign=e.lineAlign.START,this.displayAlign=e.displayAlign.AFTER,this.color="",this.backgroundColor="",this.backgroundImage=null,this.fontSize="",this.fontWeight=e.fontWeight.NORMAL,this.fontStyle=e.fontStyle.NORMAL,this.fontFamily="",this.textDecoration=[],this.wrapLine=!0,this.id=""};Gn.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:"auto"},Gn.textAlign={LEFT:"left",RIGHT:"right",CENTER:"center",START:"start",END:"end"},Gn.displayAlign={BEFORE:"before",CENTER:"center",AFTER:"after"},Gn.direction={HORIZONTAL_LEFT_TO_RIGHT:"ltr",HORIZONTAL_RIGHT_TO_LEFT:"rtl"},Gn.writingMode={HORIZONTAL_TOP_TO_BOTTOM:"horizontal-tb",VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"},Gn.lineInterpretation={LINE_NUMBER:0,PERCENTAGE:1},Gn.lineAlign={CENTER:"center",START:"start",END:"end"},Gn.fontWeight={NORMAL:400,BOLD:700},Gn.fontStyle={NORMAL:"normal",ITALIC:"italic",OBLIQUE:"oblique"},Gn.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"};var qn=function e(){Kn(this,e),this.id="",this.viewportAnchorX=0,this.viewportAnchorY=0,this.regionAnchorX=0,this.regionAnchorY=0,this.width=100,this.height=100,this.heightUnits=e.units.PERCENTAGE,this.widthUnits=e.units.PERCENTAGE,this.viewportAnchorUnits=e.units.PERCENTAGE,this.scroll=e.scrollMode.NONE};function Wn(e,t,n,r,i,a,s){try{var o=e[a](s),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,i)}function zn(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function s(e){Wn(a,r,i,s,o,"next",e)}function o(e){Wn(a,r,i,s,o,"throw",e)}s(void 0)})}}function Yn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}qn.units={PX:0,PERCENTAGE:1,LINES:2},qn.scrollMode={NONE:"",UP:"up"};
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var Xn=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parser_=null,this.displayer_=t,this.timestampOffset_=0,this.appendWindowStart_=0,this.appendWindowEnd_=1/0,this.bufferStart_=null,this.bufferEnd_=null,this.selectedClosedCaptionId_="",this.closedCaptionsMap_=new Map}var t,n,r,i,a;return t=e,n=[{key:"destroy",value:function(){return this.parser_=null,this.displayer_=null,this.closedCaptionsMap_.clear(),Promise.resolve()}},{key:"setDisplayer",value:function(e){this.displayer_=e}},{key:"initParser",value:function(t){if(t!=Ot.CLOSED_CAPTION_MIMETYPE){var n=e.parserMap_[t];window.asserts.assert(n,"Text type negotiation should have happened already"),this.parser_=new n}}},{key:"getStartTime",value:function(e){window.asserts.assert(this.parser_,"The parser should already be initialized");try{return this.parser_.parseMedia(new Uint8Array(e),{periodStart:0,segmentStart:null,segmentEnd:0})[0].startTime}catch(e){throw new M(M.Severity.CRITICAL,M.Category.TEXT,M.Code.UNABLE_TO_EXTRACT_CUE_START_TIME,e)}}},{key:"appendBuffer",value:(a=zn(regeneratorRuntime.mark(function e(t,n,r){var i,a,s,o=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.asserts.assert(this.parser_,"The parser should already be initialized"),e.next=3,Promise.resolve();case 3:if(this.parser_&&this.displayer_){e.next=5;break}return e.abrupt("return");case 5:if(null!=n&&null!=r){e.next=8;break}return this.parser_.parseInit(new Uint8Array(t)),e.abrupt("return");case 8:i={periodStart:this.timestampOffset_,segmentStart:n,segmentEnd:r},a=this.parser_.parseMedia(new Uint8Array(t),i),s=a.filter(function(e){return e.startTime>=o.appendWindowStart_&&e.startTime<o.appendWindowEnd_}),this.displayer_.append(s),null==this.bufferStart_?this.bufferStart_=Math.max(n,this.appendWindowStart_):(window.asserts.assert(null!=this.bufferEnd_,"There should already be a buffered range end."),window.asserts.assert(n-this.bufferEnd_<=1,"There should not be a gap in text references >1s")),this.bufferEnd_=Math.min(r,this.appendWindowEnd_);case 14:case"end":return e.stop()}},e,this)})),function(e,t,n){return a.apply(this,arguments)})},{key:"remove",value:(i=zn(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve();case 2:this.displayer_&&this.displayer_.remove(t,n)&&(null==this.bufferStart_?window.asserts.assert(null==this.bufferEnd_,"end must be null if startTime is null"):(window.asserts.assert(null!=this.bufferEnd_,"end must be non-null if startTime is non-null"),n<=this.bufferStart_||t>=this.bufferEnd_||(t<=this.bufferStart_&&n>=this.bufferEnd_?this.bufferStart_=this.bufferEnd_=null:t<=this.bufferStart_&&n<this.bufferEnd_?this.bufferStart_=n:t>this.bufferStart_&&n>=this.bufferEnd_?this.bufferEnd_=t:window.asserts.assert(!1,"removal from the middle is not supported by TextEngine"))));case 3:case"end":return e.stop()}},e,this)})),function(e,t){return i.apply(this,arguments)})},{key:"setTimestampOffset",value:function(e){this.timestampOffset_=e}},{key:"setAppendWindow",value:function(e,t){this.appendWindowStart_=e,this.appendWindowEnd_=t}},{key:"bufferStart",value:function(){return this.bufferStart_}},{key:"bufferEnd",value:function(){return this.bufferEnd_}},{key:"isBuffered",value:function(e){return null!=this.bufferStart_&&null!=this.bufferEnd_&&e>=this.bufferStart_&&e<this.bufferEnd_}},{key:"bufferedAheadOf",value:function(e){return null==this.bufferEnd_||this.bufferEnd_<e?0:(window.asserts.assert(null!=this.bufferStart_,"start should not be null if end is not null"),this.bufferEnd_-Math.max(e,this.bufferStart_))}},{key:"appendCues",value:function(e){this.displayer_.append(e)}},{key:"setSelectedClosedCaptionId",value:function(e,t){this.selectedClosedCaptionId_=e;var n=this.closedCaptionsMap_.get(e);if(n){var r=!0,i=!1,a=void 0;try{for(var s,o=n.keys()[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var u=s.value,l=n.get(u);l&&(l=l.filter(function(e){return e.endTime<=t}),this.displayer_.append(l))}}catch(e){i=!0,a=e}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}}}},{key:"storeAndAppendClosedCaptions",value:function(e,t,n,r){var i=t+" "+n,a=new Map,s=!0,o=!1,u=void 0;try{for(var l,c=e[Symbol.iterator]();!(s=(l=c.next()).done);s=!0){var d=l.value,h=d.stream;if(a.has(h)||a.set(h,new Map),a.get(h).has(i)||a.get(h).set(i,[]),d.startTime+=r,d.endTime+=r,d.startTime>=this.appendWindowStart_&&d.startTime<this.appendWindowEnd_){var f=new Gn(d.startTime,d.endTime,d.text);a.get(h).get(i).push(f),h==this.selectedClosedCaptionId_&&this.displayer_.append([f])}}}catch(e){o=!0,u=e}finally{try{s||null==c.return||c.return()}finally{if(o)throw u}}var p=!0,m=!1,v=void 0;try{for(var y,g=a.keys()[Symbol.iterator]();!(p=(y=g.next()).done);p=!0){var _=y.value;this.closedCaptionsMap_.has(_)||this.closedCaptionsMap_.set(_,new Map);var b=!0,w=!1,E=void 0;try{for(var S,T=a.get(_).keys()[Symbol.iterator]();!(b=(S=T.next()).done);b=!0){var C=S.value,k=a.get(_).get(C);this.closedCaptionsMap_.get(_).set(C,k)}}catch(e){w=!0,E=e}finally{try{b||null==T.return||T.return()}finally{if(w)throw E}}}}catch(e){m=!0,v=e}finally{try{p||null==g.return||g.return()}finally{if(m)throw v}}null==this.bufferStart_?this.bufferStart_=Math.max(t,this.appendWindowStart_):this.bufferStart_=Math.min(this.bufferStart_,Math.max(t,this.appendWindowStart_)),this.bufferEnd_=Math.max(this.bufferEnd_,Math.min(n,this.appendWindowEnd_))}},{key:"getNumberOfClosedCaptionChannels",value:function(){return this.closedCaptionsMap_.size}},{key:"getNumberOfClosedCaptionsInChannel",value:function(e){var t=this.closedCaptionsMap_.get(e);return t?t.size:0}}],r=[{key:"registerParser",value:function(t,n){e.parserMap_[t]=n}},{key:"unregisterParser",value:function(t){delete e.parserMap_[t]}},{key:"isTypeSupported",value:function(t){return!!e.parserMap_[t]||!(!Vn.a||t!==Ot.CLOSED_CAPTION_MIMETYPE)}}],n&&Yn(t.prototype,n),r&&Yn(t,r),e}();Xn.parserMap_={};var $n=Xn;function Zn(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Qn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var Jn=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.muxTransmuxer_=new Vn.a.mp4.Transmuxer({keepOriginalTimestamps:!0}),this.transmuxPromise_=null,this.transmuxedData_=[],this.captions_=[],this.isTransmuxing_=!1,this.muxTransmuxer_.on("data",function(e){return t.onTransmuxed_(e)}),this.muxTransmuxer_.on("done",function(){return t.onTransmuxDone_()})}var t,n,r;return t=e,r=[{key:"isSupported",value:function(t,n){if(!Vn.a||!e.isTsContainer(t))return!1;var r=e.convertTsCodecs;if(n)return MediaSource.isTypeSupported(r(n,t));var i=Ae.ContentType;return MediaSource.isTypeSupported(r(i.AUDIO,t))||MediaSource.isTypeSupported(r(i.VIDEO,t))}},{key:"isTsContainer",value:function(e){return"mp2t"==e.split(";")[0].split("/")[1]}},{key:"convertTsCodecs",value:function(e,t){var n=Ae.ContentType,r=t.replace("mp2t","mp4");e==n.AUDIO&&(r=r.replace("video","audio"));var i=/avc1\.(66|77|100)\.(\d+)/.exec(r);if(i){var a="avc1.",s=i[1];"66"==s?a+="4200":"77"==s?a+="4d00":(window.asserts.assert("100"==s,"Legacy avc1 parsing code out of sync with regex!"),a+="6400");var o=Number(i[2]);window.asserts.assert(o<256,"Invalid legacy avc1 level number!"),a+=(o>>4).toString(16),a+=(15&o).toString(16),r=r.replace(i[0],a)}return r}}],(n=[{key:"destroy",value:function(){return this.muxTransmuxer_.dispose(),this.muxTransmuxer_=null,Promise.resolve()}},{key:"transmux",value:function(e){window.asserts.assert(!this.isTransmuxing_,"No transmuxing should be in progress."),this.isTransmuxing_=!0,this.transmuxPromise_=new A,this.transmuxedData_=[],this.captions_=[];var t=new Uint8Array(e);return this.muxTransmuxer_.push(t),this.muxTransmuxer_.flush(),this.isTransmuxing_&&this.transmuxPromise_.reject(new M(M.Severity.CRITICAL,M.Category.MEDIA,M.Code.TRANSMUXING_FAILED)),this.transmuxPromise_}},{key:"onTransmuxed_",value:function(e){this.captions_=e.captions;var t=new Uint8Array(e.data.byteLength+e.initSegment.byteLength);t.set(e.initSegment,0),t.set(e.data,e.initSegment.byteLength),this.transmuxedData_.push(t)}},{key:"onTransmuxDone_",value:function(){var e={data:jt.concat.apply(jt,Zn(this.transmuxedData_)),captions:this.captions_};this.transmuxPromise_.resolve(e),this.isTransmuxing_=!1}}])&&Qn(t.prototype,n),r&&Qn(t,r),e}();function er(e,t,n,r,i,a,s){try{var o=e[a](s),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,i)}function tr(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function s(e){er(a,r,i,s,o,"next",e)}function o(e){er(a,r,i,s,o,"throw",e)}s(void 0)})}}function nr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var rr=F.util.Error,ir=window.shaka,ar=window.goog,sr=function(){function e(t,n,r){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.video_=t,this.textDisplayer_=r,this.sourceBuffers_={},this.textEngine_=null,this.queues_={},this.eventManager_=new Ve,this.transmuxers_={},this.captionParser_=n,this.mediaSourceOpen_=new A,this.mediaSource_=this.createMediaSource(this.mediaSourceOpen_),this.destroyer_=new xt(function(){return i.doDestroy_()})}var t,n,r,i,a,s,o,u,l,c,d,h,f;return t=e,n=[{key:"createMediaSource",value:function(t){var n=new MediaSource;return this.eventManager_.listenOnce(n,"sourceopen",t.resolve),console.log(e.createObjectURL(n)),this.video_.src=e.createObjectURL(n),n}},{key:"destroy",value:function(){return this.destroyer_.destroy()}},{key:"doDestroy_",value:(f=tr(regeneratorRuntime.mark(function e(){var t,n,r,i,a,s,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n in t=[],this.queues_)for(r=this.queues_[n],i=r[0],this.queues_[n]=r.slice(0,1),i&&t.push(i.p.catch(ke.noop)),a=1;a<r.length;++a)r[a].p.reject(xt.destroyedError());for(s in this.textEngine_&&t.push(this.textEngine_.destroy()),this.textDisplayer_&&t.push(this.textDisplayer_.destroy()),this.transmuxers_)t.push(this.transmuxers_[s].destroy());return e.next=7,Promise.all(t);case 7:if(this.eventManager_&&(this.eventManager_.release(),this.eventManager_=null),this.video_&&(this.video_.removeAttribute("src"),this.video_.load(),this.video_=null),this.mediaSource_=null,this.textEngine_=null,this.textDisplayer_=null,this.sourceBuffers_={},this.transmuxers_={},this.captionParser_=null,ar.DEBUG)for(o in this.queues_)window.asserts.assert(0==this.queues_[o].length,o+" queue should be empty after destroy!");this.queues_={};case 17:case"end":return e.stop()}},e,this)})),function(){return f.apply(this,arguments)})},{key:"open",value:function(){return this.mediaSourceOpen_}},{key:"init",value:(h=tr(regeneratorRuntime.mark(function t(n,r){var i,a,s,o,u,l,c,d=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=Ae.ContentType,t.next=3,this.mediaSourceOpen_;case 3:for(a=!0,s=!1,o=void 0,t.prev=6,u=function(){var t=c.value,a=n.get(t);window.asserts.assert(e.isStreamSupported(a),"Type negotiation should happen before MediaSourceEngine.init!");var s=Ot.getFullType(a.mimeType,a.codecs);if(t==i.TEXT)d.reinitText(s);else{!r&&MediaSource.isTypeSupported(s)||!Jn.isSupported(s,t)||(d.transmuxers_[t]=new Jn,s=Jn.convertTsCodecs(t,s));var o=d.mediaSource_.addSourceBuffer(s);console.log({sourceBuffer:o}),d.eventManager_.listen(o,"error",function(){return d.onError_(t)}),d.eventManager_.listen(o,"updateend",function(){return d.onUpdateEnd_(t)}),d.sourceBuffers_[t]=o,d.queues_[t]=[]}},l=n.keys()[Symbol.iterator]();!(a=(c=l.next()).done);a=!0)u();t.next=15;break;case 11:t.prev=11,t.t0=t.catch(6),s=!0,o=t.t0;case 15:t.prev=15,t.prev=16,a||null==l.return||l.return();case 18:if(t.prev=18,!s){t.next=21;break}throw o;case 21:return t.finish(18);case 22:return t.finish(15);case 23:case"end":return t.stop()}},t,this,[[6,11,15,23],[16,,18,22]])})),function(e,t){return h.apply(this,arguments)})},{key:"reinitText",value:function(e){this.textEngine_||(this.textEngine_=new $n(this.textDisplayer_)),this.textEngine_.initParser(e)}},{key:"ended",value:function(){return!this.mediaSource_||"ended"==this.mediaSource_.readyState}},{key:"bufferStart",value:function(e){return e==Ae.ContentType.TEXT?this.textEngine_.bufferStart():Hn.bufferStart(this.getBuffered_(e))}},{key:"bufferEnd",value:function(e){return e==Ae.ContentType.TEXT?this.textEngine_.bufferEnd():Hn.bufferEnd(this.getBuffered_(e))}},{key:"isBuffered",value:function(e,t,n){if(e==Ae.ContentType.TEXT)return this.textEngine_.isBuffered(t);var r=this.getBuffered_(e);return Hn.isBuffered(r,t,n)}},{key:"bufferedAheadOf",value:function(e,t){if(e==Ae.ContentType.TEXT)return this.textEngine_.bufferedAheadOf(t);var n=this.getBuffered_(e);return Hn.bufferedAheadOf(n,t)}},{key:"getBufferedInfo",value:function(e){var t=Ae.ContentType,n=Hn.getBufferedInfo;if(e.total=n(this.video_.buffered),e.audio=n(this.getBuffered_(t.AUDIO)),e.video=n(this.getBuffered_(t.VIDEO)),e.text=[],this.textEngine_){var r=this.textEngine_.bufferStart(),i=this.textEngine_.bufferEnd();null!=r&&null!=i&&e.text.push({start:r,end:i})}}},{key:"getBuffered_",value:function(e){try{return this.sourceBuffers_[e].buffered}catch(t){return e in this.sourceBuffers_&&ir.log.error("failed to get buffered range for "+e,t),null}}},{key:"appendBuffer",value:(d=tr(regeneratorRuntime.mark(function e(t,n,r,i,a){var s,o,u,l=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s=Ae.ContentType,t!=s.TEXT){e.next=6;break}return e.next=4,this.textEngine_.appendBuffer(n,r,i);case 4:e.next=25;break;case 6:if(!this.transmuxers_[t]){e.next=16;break}return e.next=9,this.transmuxers_[t].transmux(n);case 9:return o=e.sent,this.textEngine_||this.reinitText("text/vtt"),o.captions&&(u=this.sourceBuffers_[s.VIDEO].timestampOffset,this.textEngine_.storeAndAppendClosedCaptions(o.captions,r,i,u)),e.next=14,this.enqueueOperation_(t,function(){return l.append_(t,o.data.buffer)});case 14:e.next=25;break;case 16:if(!a||!Vn.a){e.next=23;break}return this.textEngine_||this.reinitText("text/vtt"),null==r&&null==i?this.captionParser_.init(n):this.captionParser_.parseFrom(n,function(e){if(e.length){var t=l.sourceBuffers_[s.VIDEO].timestampOffset;l.textEngine_.storeAndAppendClosedCaptions(e,r,i,t)}}),e.next=21,this.enqueueOperation_(t,function(){return l.append_(t,n)});case 21:e.next=25;break;case 23:return e.next=25,this.enqueueOperation_(t,function(){return l.append_(t,n)});case 25:case"end":return e.stop()}},e,this)})),function(e,t,n,r,i){return d.apply(this,arguments)})},{key:"setSelectedClosedCaptionId",value:function(e){var t=Ae.ContentType.VIDEO,n=this.bufferEnd(t)||0;this.textEngine_.setSelectedClosedCaptionId(e,n)}},{key:"remove",value:(c=tr(regeneratorRuntime.mark(function e(t,n,r){var i,a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.asserts.assert(r<Number.MAX_VALUE,"remove() with MAX_VALUE or Infinity is not IE-compatible!"),i=Ae.ContentType,t!=i.TEXT){e.next=7;break}return e.next=5,this.textEngine_.remove(n,r);case 5:e.next=9;break;case 7:return e.next=9,this.enqueueOperation_(t,function(){return a.remove_(t,n,r)});case 9:case"end":return e.stop()}},e,this)})),function(e,t,n){return c.apply(this,arguments)})},{key:"clear",value:(l=tr(regeneratorRuntime.mark(function e(t){var n,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Ae.ContentType,t!=n.TEXT){e.next=9;break}if(this.textEngine_){e.next=4;break}return e.abrupt("return");case 4:return this.captionParser_.reset(),e.next=7,this.textEngine_.remove(0,1/0);case 7:e.next=11;break;case 9:return e.next=11,this.enqueueOperation_(t,function(){return r.remove_(t,0,r.mediaSource_.duration)});case 11:case"end":return e.stop()}},e,this)})),function(e){return l.apply(this,arguments)})},{key:"flush",value:(u=tr(regeneratorRuntime.mark(function e(t){var n,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Ae.ContentType,t!=n.TEXT){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.enqueueOperation_(t,function(){return r.flush_(t)});case 5:case"end":return e.stop()}},e,this)})),function(e){return u.apply(this,arguments)})},{key:"setStreamProperties",value:(o=tr(regeneratorRuntime.mark(function e(t,n,r,i){var a,s=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Ae.ContentType,t!=a.TEXT){e.next=5;break}return this.textEngine_.setTimestampOffset(n),this.textEngine_.setAppendWindow(r,i),e.abrupt("return");case 5:return e.next=7,Promise.all([this.enqueueOperation_(t,function(){return s.abort_(t)}),this.enqueueOperation_(t,function(){return s.setTimestampOffset_(t,n)}),this.enqueueOperation_(t,function(){return s.setAppendWindow_(t,r,i)})]);case 7:case"end":return e.stop()}},e,this)})),function(e,t,n,r){return o.apply(this,arguments)})},{key:"endOfStream",value:(s=tr(regeneratorRuntime.mark(function e(t){var n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.enqueueBlockingOperation_(function(){t?n.mediaSource_.endOfStream(t):n.mediaSource_.endOfStream()});case 2:case"end":return e.stop()}},e,this)})),function(e){return s.apply(this,arguments)})},{key:"setDuration",value:(a=tr(regeneratorRuntime.mark(function e(t){var n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.asserts.assert(isNaN(this.mediaSource_.duration)||this.mediaSource_.duration<=t,"duration cannot decrease: "+this.mediaSource_.duration+" -> "+t),e.next=3,this.enqueueBlockingOperation_(function(){n.mediaSource_.duration=t});case 3:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"getDuration",value:function(){return this.mediaSource_.duration}},{key:"append_",value:function(e,t){this.sourceBuffers_[e].appendBuffer(t)}},{key:"remove_",value:function(e,t,n){n<=t?this.onUpdateEnd_(e):this.sourceBuffers_[e].remove(t,n)}},{key:"abort_",value:function(e){var t=this.sourceBuffers_[e].appendWindowStart,n=this.sourceBuffers_[e].appendWindowEnd;this.sourceBuffers_[e].abort(),this.sourceBuffers_[e].appendWindowStart=t,this.sourceBuffers_[e].appendWindowEnd=n,this.onUpdateEnd_(e)}},{key:"flush_",value:function(e){window.asserts.assert(0==this.video_.buffered.length,"MediaSourceEngine.flush_ should only be used after clearing all data!"),this.video_.currentTime-=.001,this.onUpdateEnd_(e)}},{key:"setTimestampOffset_",value:function(e,t){t<0&&(t+=.001),this.sourceBuffers_[e].timestampOffset=t,this.onUpdateEnd_(e)}},{key:"setAppendWindow_",value:function(e,t,n){this.sourceBuffers_[e].appendWindowStart=0,this.sourceBuffers_[e].appendWindowEnd=n,this.sourceBuffers_[e].appendWindowStart=t,this.onUpdateEnd_(e)}},{key:"onError_",value:function(e){var t=this.queues_[e][0];window.asserts.assert(t,"Spurious error event!"),window.asserts.assert(!this.sourceBuffers_[e].updating,"SourceBuffer should not be updating on error!");var n=this.video_.error?this.video_.error.code:0;t.p.reject(new rr(rr.Severity.CRITICAL,rr.Category.MEDIA,rr.Code.MEDIA_SOURCE_OPERATION_FAILED,n))}},{key:"onUpdateEnd_",value:function(e){var t=this.queues_[e][0];window.asserts.assert(t,"Spurious updateend event!"),t&&(window.asserts.assert(!this.sourceBuffers_[e].updating,"SourceBuffer should not be updating on updateend!"),t.p.resolve(),this.popFromQueue_(e))}},{key:"enqueueOperation_",value:function(e,t){this.destroyer_.ensureNotDestroyed();var n={start:t,p:new A};if(this.queues_[e].push(n),1==this.queues_[e].length)try{n.start()}catch(t){"QuotaExceededError"==t.name?n.p.reject(new rr(rr.Severity.CRITICAL,rr.Category.MEDIA,rr.Code.QUOTA_EXCEEDED_ERROR,e)):n.p.reject(new rr(rr.Severity.CRITICAL,rr.Category.MEDIA,rr.Code.MEDIA_SOURCE_OPERATION_THREW,t)),this.popFromQueue_(e)}return n.p}},{key:"enqueueBlockingOperation_",value:(i=tr(regeneratorRuntime.mark(function e(t){var n,r,i,a,s,o,u=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(i in this.destroyer_.ensureNotDestroyed(),n=[],r=function(e){var t=new A,r={start:function(){return t.resolve()},p:t};u.queues_[e].push(r),n.push(t),1==u.queues_[e].length&&r.start()},this.sourceBuffers_)r(i);return e.prev=4,e.next=7,Promise.all(n);case 7:if(ar.DEBUG)for(i in this.sourceBuffers_)window.asserts.assert(0==this.sourceBuffers_[i].updating,"SourceBuffers should not be updating after a blocking op!");try{t()}catch(e){a=Promise.reject(new rr(rr.Severity.CRITICAL,rr.Category.MEDIA,rr.Code.MEDIA_SOURCE_OPERATION_THREW,e))}for(s in this.sourceBuffers_)this.popFromQueue_(s);return e.abrupt("return",a);case 13:if(e.prev=13,e.t0=e.catch(4),window.asserts.assert(this.destroyer_.destroyed(),"Should be destroyed by now"),ar.DEBUG)for(o in this.sourceBuffers_)this.queues_[o].length&&(window.asserts.assert(1==this.queues_[o].length,"Should be at most one item in queue!"),window.asserts.assert(n.includes(this.queues_[o][0].p),"The item in queue should be one of our waiters!"),this.queues_[o].shift());throw e.t0;case 18:case"end":return e.stop()}},e,this,[[4,13]])})),function(e){return i.apply(this,arguments)})},{key:"popFromQueue_",value:function(e){this.queues_[e].shift();var t=this.queues_[e][0];if(t)try{t.start()}catch(n){t.p.reject(new rr(rr.Severity.CRITICAL,rr.Category.MEDIA,rr.Code.MEDIA_SOURCE_OPERATION_THREW,n)),this.popFromQueue_(e)}}},{key:"getTextDisplayer",value:function(){return window.asserts.assert(this.textDisplayer_,"TextDisplayer should only be null when this is destroyed"),this.textDisplayer_}},{key:"setTextDisplayer",value:function(e){var t=this.textDisplayer_;this.textDisplayer_=e,t&&(e.setTextVisibility(t.isTextVisible()),t.destroy()),this.textEngine_&&this.textEngine_.setDisplayer(e)}}],r=[{key:"isStreamSupported",value:function(e){var t=Ot.getFullType(e.mimeType,e.codecs),n=Ot.getExtendedType(e);return $n.isTypeSupported(t)||MediaSource.isTypeSupported(n)||Jn.isSupported(t,e.type)}},{key:"probeSupport",value:function(){for(var e={},t=0,n=['video/mp4; codecs="avc1.42E01E"','video/mp4; codecs="avc3.42E01E"','video/mp4; codecs="hev1.1.6.L93.90"','video/mp4; codecs="hvc1.1.6.L93.90"','video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084"','video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084"','video/mp4; codecs="vp9"','video/mp4; codecs="vp09.00.10.08"','audio/mp4; codecs="mp4a.40.2"','audio/mp4; codecs="ac-3"','audio/mp4; codecs="ec-3"','audio/mp4; codecs="opus"','audio/mp4; codecs="flac"','video/webm; codecs="vp8"','video/webm; codecs="vp9"','video/webm; codecs="vp09.00.10.08"','audio/webm; codecs="vorbis"','audio/webm; codecs="opus"','video/mp2t; codecs="avc1.42E01E"','video/mp2t; codecs="avc3.42E01E"','video/mp2t; codecs="hvc1.1.6.L93.90"','video/mp2t; codecs="mp4a.40.2"','video/mp2t; codecs="ac-3"','video/mp2t; codecs="ec-3"',"text/vtt",'application/mp4; codecs="wvtt"',"application/ttml+xml",'application/mp4; codecs="stpp"'];t<n.length;t++){var r=n[t];Et.supportsMediaSource()?$n.isTypeSupported(r)?e[r]=!0:e[r]=MediaSource.isTypeSupported(r)||Jn.isSupported(r):e[r]=Et.supportsMediaType(r);var i=r.split(";")[0];e[i]=e[i]||e[r]}return e}}],n&&nr(t.prototype,n),r&&nr(t,r),e}();sr.createObjectURL=window.URL.createObjectURL,sr.Operation;var or=sr;function ur(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function lr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var cr=window.shaka,dr=(window.goog,function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"meetsRestrictions",value:function(e,t,n){var r=function(e,t,n){return e>=t&&e<=n},i=e.video;if(i&&i.width&&i.height){if(!r(i.width,t.minWidth,Math.min(t.maxWidth,n.width)))return!1;if(!r(i.height,t.minHeight,Math.min(t.maxHeight,n.height)))return!1;if(!r(i.width*i.height,t.minPixels,t.maxPixels))return!1}return!!r(e.bandwidth,t.minBandwidth,t.maxBandwidth)}},{key:"applyRestrictions",value:function(t,n,r){var i=!1,a=!0,s=!1,o=void 0;try{for(var u,l=t[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var c=u.value,d=c.allowedByApplication;c.allowedByApplication=e.meetsRestrictions(c,n,r),d!=c.allowedByApplication&&(i=!0)}}catch(e){s=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(s)throw o}}return i}},{key:"filterNewPeriod",value:function(t,n,r,i){n&&window.asserts.assert(e.isAudio(n),"Audio streams must have the audio type."),r&&window.asserts.assert(e.isVideo(r),"Video streams must have the video type."),i.variants=i.variants.filter(function(i){if(t&&t.initialized()&&!t.supportsVariant(i))return cr.log.debug("Dropping variant - not compatible with key system",i),!1;var a=i.audio,s=i.video;return a&&!or.isStreamSupported(a)?(cr.log.debug("Dropping variant - audio not compatible with platform",e.getStreamSummaryString_(a)),!1):s&&!or.isStreamSupported(s)?(cr.log.debug("Dropping variant - video not compatible with platform",e.getStreamSummaryString_(s)),!1):a&&n&&!e.areStreamsCompatible_(a,n)?(cr.log.debug("Droping variant - not compatible with active audio","active audio",e.getStreamSummaryString_(n),"variant.audio",e.getStreamSummaryString_(a)),!1):!(s&&r&&!e.areStreamsCompatible_(s,r)&&(cr.log.debug("Droping variant - not compatible with active video","active video",e.getStreamSummaryString_(r),"variant.video",e.getStreamSummaryString_(s)),1))}),i.textStreams=i.textStreams.filter(function(e){var t=Ot.getFullType(e.mimeType,e.codecs),n=$n.isTypeSupported(t);return n||cr.log.debug("Dropping text stream. Is not supported by the platform.",e),n})}},{key:"areStreamsCompatible_",value:function(e,t){return e.mimeType==t.mimeType&&e.codecs.split(".")[0]==t.codecs.split(".")[0]}},{key:"variantToTrack",value:function(e){var t=e.audio,n=e.video,r=t?t.codecs:null,i=n?n.codecs:null,a=[];i&&a.push(i),r&&a.push(r);var s=[];n&&s.push(n.mimeType),t&&s.push(t.mimeType);var o=s[0]||null,u=[];t&&u.push(t.kind),n&&u.push(n.kind);var l=u[0]||null,c=new Set;if(t){var d=!0,h=!1,f=void 0;try{for(var p,m=t.roles[Symbol.iterator]();!(d=(p=m.next()).done);d=!0){var v=p.value;c.add(v)}}catch(e){h=!0,f=e}finally{try{d||null==m.return||m.return()}finally{if(h)throw f}}}if(n){var y=!0,g=!1,_=void 0;try{for(var b,w=n.roles[Symbol.iterator]();!(y=(b=w.next()).done);y=!0){var E=b.value;c.add(E)}}catch(e){g=!0,_=e}finally{try{y||null==w.return||w.return()}finally{if(g)throw _}}}var S={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:l,width:null,height:null,frameRate:null,mimeType:o,codecs:a.join(", "),audioCodec:r,videoCodec:i,primary:e.primary,roles:Array.from(c),audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null};return n&&(S.videoId=n.id,S.originalVideoId=n.originalId,S.width=n.width||null,S.height=n.height||null,S.frameRate=n.frameRate||null,S.videoBandwidth=n.bandwidth||null),t&&(S.audioId=t.id,S.originalAudioId=t.originalId,S.channelsCount=t.channelsCount,S.audioBandwidth=t.bandwidth||null,S.label=t.label,S.audioRoles=t.roles),S}},{key:"textStreamToTrack",value:function(e){var t=Ae.ContentType;return{id:e.id,active:!1,type:t.TEXT,bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,mimeType:e.mimeType,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId}}},{key:"html5TrackId",value:function(t){return t.__shaka_id||(t.__shaka_id=e.nextTrackId_++),t.__shaka_id}},{key:"html5TextTrackToTrack",value:function(t){var n=Ot.CLOSED_CAPTION_MIMETYPE,r=e.html5TrackToGenericShakaTrack_(t);return r.active="disabled"!=t.mode,r.type="text",r.originalTextId=t.id,"captions"==t.kind&&(r.mimeType=n),r}},{key:"html5AudioTrackToTrack",value:function(t){var n=e.html5TrackToGenericShakaTrack_(t);return n.active=t.enabled,n.type="variant",n.originalAudioId=t.id,"main"==t.kind?(n.primary=!0,n.roles=["main"],n.audioRoles=["main"]):n.audioRoles=[],n}},{key:"html5TrackToGenericShakaTrack_",value:function(t){return{id:e.html5TrackId(t),active:!1,type:"",bandwidth:0,language:xe.normalize(t.language),label:t.label,kind:t.kind,width:null,height:null,frameRate:null,mimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null}}},{key:"isPlayable",value:function(e){return e.allowedByApplication&&e.allowedByKeySystem}},{key:"getPlayableVariants",value:function(t){return t.filter(function(t){return e.isPlayable(t)})}},{key:"filterVariantsByAudioChannelCount",value:function(e,t){var n=e.filter(function(e){return e.audio&&e.audio.channelsCount}),r=new Map,i=!0,a=!1,s=void 0;try{for(var o,u=n[Symbol.iterator]();!(i=(o=u.next()).done);i=!0){var l=o.value,c=l.audio.channelsCount;window.asserts.assert(null!=c,"Must have count after filtering!"),r.has(c)||r.set(c,[]),r.get(c).push(l)}}catch(e){a=!0,s=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw s}}var d=Array.from(r.keys());if(0==d.length)return e;var h=d.filter(function(e){return e<=t});return h.length?r.get(Math.max.apply(Math,ur(h))):r.get(Math.min.apply(Math,ur(d)))}},{key:"filterStreamsByLanguageAndRole",value:function(t,n,r){var i=t,a=t.filter(function(e){return e.primary});a.length&&(i=a);var s=i.length?i[0].language:"";if(i=i.filter(function(e){return e.language==s}),n){var o=xe.findClosestLocale(xe.normalize(n),t.map(function(e){return e.language}));o&&(i=t.filter(function(e){return xe.normalize(e.language)==o}))}if(r){var u=e.filterTextStreamsByRole_(i,r);if(u.length)return u;cr.log.warning("No exact match for the text role could be found.")}else{var l=i.filter(function(e){return 0==e.roles.length});if(l.length)return l}var c=i.map(function(e){return e.roles}).reduce(ke.collapseArrays,[]);return c.length?e.filterTextStreamsByRole_(i,c[0]):i}},{key:"filterTextStreamsByRole_",value:function(e,t){return e.filter(function(e){return e.roles.includes(t)})}},{key:"getVariantByStreams",value:function(t,n,r){t&&window.asserts.assert(e.isAudio(t),"Audio streams must have the audio type."),n&&window.asserts.assert(e.isVideo(n),"Video streams must have the video type.");for(var i=0;i<r.length;i++)if(r[i].audio==t&&r[i].video==n)return r[i];return null}},{key:"isAudio",value:function(e){var t=Ae.ContentType;return e.type==t.AUDIO}},{key:"isVideo",value:function(e){var t=Ae.ContentType;return e.type==t.VIDEO}},{key:"getVariantStreams",value:function(e){var t=[];return e.audio&&t.push(e.audio),e.video&&t.push(e.video),t}},{key:"getStreamSummaryString_",value:function(t){return e.isAudio(t)?"type=audio codecs="+t.codecs+" bandwidth="+t.bandwidth+" channelsCount="+t.channelsCount:e.isVideo(t)?"type=video codecs="+t.codecs+" bandwidth="+t.bandwidth+" frameRate="+t.frameRate+" width="+t.width+" height="+t.height:"unexpected stream type"}}],(n=null)&&lr(t.prototype,n),r&&lr(t,r),e}());dr.nextTrackId_=0;var hr=dr;function fr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var pr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"fromManifest",value:function(t,n,r,i){window.asserts.assert(n.periods.length,"Cannot create stored content from manifest with no periods.");var a=null==n.expiration?1/0:n.expiration,s=n.presentationTimeline.getDuration(),o=n.periods[0];return{offlineUri:null,originalManifestUri:t,duration:s,size:r,expiration:a,tracks:e.getTracks_(o),appMetadata:i}}},{key:"fromManifestDB",value:function(t,n){window.asserts.assert(n.periods.length,"Cannot create stored content from manifestDB with no periods.");var r=new Fn(t.mechanism(),t.cell()),i=n.periods[0],a=new In(null,0),s=r.fromPeriodDB(i,a),o=n.appMetadata||{},u=e.getTracks_(s);return{offlineUri:t.toString(),originalManifestUri:n.originalManifestUri,duration:n.duration,size:n.size,expiration:n.expiration,tracks:u,appMetadata:o}}},{key:"getTracks_",value:function(e){var t=hr,n=[],r=t.getPlayableVariants(e.variants),i=!0,a=!1,s=void 0;try{for(var o,u=r[Symbol.iterator]();!(i=(o=u.next()).done);i=!0){var l=o.value;n.push(t.variantToTrack(l))}}catch(e){a=!0,s=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw s}}var c=e.textStreams,d=!0,h=!1,f=void 0;try{for(var p,m=c[Symbol.iterator]();!(d=(p=m.next()).done);d=!0){var v=p.value;n.push(t.textStreamToTrack(v))}}catch(e){h=!0,f=e}finally{try{d||null==m.return||m.return()}finally{if(h)throw f}}return n}}],(n=null)&&fr(t.prototype,n),r&&fr(t,r),e}();function mr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var vr=window.shaka,yr=(window.goog,function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.estimateByStreamId_={}}var t,n,r;return t=e,(n=[{key:"addVariant",value:function(t){var n=t.audio,r=t.video;if(n&&!r){var i=n.bandwidth||t.bandwidth;this.setBitrate_(n.id,i)}if(!n&&r){var a=r.bandwidth||t.bandwidth;this.setBitrate_(r.id,a)}if(n&&r){var s=n.bandwidth||e.DEFAULT_AUDIO_BITRATE_,o=r.bandwidth||t.bandwidth-s;o<=0&&(vr.log.warning("Audio bit rate consumes variants bandwidth. Setting video bandwidth to match variant's bandwidth."),o=t.bandwidth),this.setBitrate_(n.id,s),this.setBitrate_(r.id,o)}}},{key:"setBitrate_",value:function(e,t){this.estimateByStreamId_[e]=t}},{key:"addText",value:function(t){this.estimateByStreamId_[t.id]=e.DEFAULT_TEXT_BITRATE_}},{key:"getSegmentEstimate",value:function(e,t){var n=t.endTime-t.startTime;return this.getEstimate_(e)*n}},{key:"getInitSegmentEstimate",value:function(e){return.5*this.getEstimate_(e)}},{key:"getEstimate_",value:function(e){var t=this.estimateByStreamId_[e];return null==t&&(t=0,vr.log.error("Asking for bitrate of stream not given to the estimator")),0==t&&vr.log.warning("Using bitrate of 0, this stream won't affect progress"),t}}])&&mr(t.prototype,n),r&&mr(t,r),e}());yr.DEFAULT_AUDIO_BITRATE_=393216,yr.DEFAULT_TEXT_BITRATE_=52;var gr=yr;function _r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function br(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wr(e,t,n){return t&&br(e.prototype,t),n&&br(e,n),e}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */window.shaka,window.goog;var Er=function(){function e(){_r(this,e)}return wr(e,null,[{key:"filterByRestrictions",value:function(e,t,n){var r=!0,i=!1,a=void 0;try{for(var s,o=e.periods[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var u=s.value;u.variants=u.variants.filter(function(e){return hr.meetsRestrictions(e,t,n)})}}catch(e){i=!0,a=e}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}}},{key:"filterByMediaSourceSupport",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=e.periods[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value;s.variants=s.variants.filter(function(e){var t=!0;return e.audio&&(t=t&&or.isStreamSupported(e.audio)),e.video&&(t=t&&or.isStreamSupported(e.video)),t})}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"filterByDrmSupport",value:function(e,t){var n=!0,r=!1,i=void 0;try{for(var a,s=e.periods[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;o.variants=o.variants.filter(function(e){return t.supportsVariant(e)})}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}}},{key:"filterByCommonCodecs",value:function(t){window.asserts.assert(t.periods.length>0,"There should be at least be one period");var n=new e.VariantCodecSummarySet,r=!0,i=!0,a=!1,s=void 0;try{for(var o,u=t.periods[Symbol.iterator]();!(i=(o=u.next()).done);i=!0){var l=o.value,c=e.VariantCodecSummarySet.fromVariants(l.variants);r?(n.includeAll(c),r=!1):n.onlyKeep(c)}}catch(e){a=!0,s=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw s}}var d=!0,h=!1,f=void 0;try{for(var p,m=t.periods[Symbol.iterator]();!(d=(p=m.next()).done);d=!0){var v=p.value;v.variants=v.variants.filter(function(t){var r=new e.VariantCodecSummary(t);return n.contains(r)})}}catch(e){h=!0,f=e}finally{try{d||null==m.return||m.return()}finally{if(h)throw f}}}},{key:"rollingFilter",value:function(t,n){var r=null,i=!0,a=!1,s=void 0;try{for(var o,u=t.periods[Symbol.iterator]();!(i=(o=u.next()).done);i=!0){var l=o.value;r&&(l.variants=l.variants.filter(function(t){var n=new e.VariantCodecSummary(t);return r.contains(n)})),n(l),r=e.VariantCodecSummarySet.fromVariants(l.variants)}}catch(e){a=!0,s=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw s}}}}]),e}();Er.VariantCodecSummary=function(){function e(t){_r(this,e);var n=t.audio,r=t.video;this.audioMime_=n?n.mimeType:null,this.audioCodec_=n?n.codecs.split(".")[0]:null,this.videoMime_=r?r.mimeType:null,this.videoCodec_=r?r.codecs.split(".")[0]:null}return wr(e,[{key:"equals",value:function(e){return this.audioMime_==e.audioMime_&&this.audioCodec_==e.audioCodec_&&this.videoMime_==e.videoMime_&&this.videoCodec_==e.videoCodec_}}]),e}(),Er.VariantCodecSummarySet=function(){function e(){_r(this,e),this.all_=[]}return wr(e,[{key:"add",value:function(e){this.contains(e)||this.all_.push(e)}},{key:"includeAll",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=e.all_[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value;this.add(s)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"onlyKeep",value:function(e){this.all_=this.all_.filter(function(t){return e.contains(t)})}},{key:"contains",value:function(e){return this.all_.some(function(t){return e.equals(t)})}}],[{key:"fromVariants",value:function(e){var t=new Er.VariantCodecSummarySet,n=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;t.add(new Er.VariantCodecSummary(o))}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return t}}]),e}();var Sr=Er;function Tr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var Cr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"createSegmentRequest",value:function(e,t,n,r){var i=se.makeRequest(e,r);return 0==t&&null==n||(i.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),i}}],(n=null)&&Tr(t.prototype,n),r&&Tr(t,r),e}();function kr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var Ir=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"getAllVariantsFrom",value:function(e){var t=[],n=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value,u=!0,l=!1,c=void 0;try{for(var d,h=o.variants[Symbol.iterator]();!(u=(d=h.next()).done);u=!0){var f=d.value;t.push(f)}}catch(e){l=!0,c=e}finally{try{u||null==h.return||h.return()}finally{if(l)throw c}}}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return t}},{key:"findPeriodForTime",value:function(e,t){var n=null,r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var u=s.value;t>=u.startTime&&(n=u)}}catch(e){i=!0,a=e}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}return n}}],(n=null)&&kr(t.prototype,n),r&&kr(t,r),e}();function Ar(e){return(Ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lr(e,t,n,r,i,a,s){try{var o=e[a](s),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,i)}function xr(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function s(e){Lr(a,r,i,s,o,"next",e)}function o(e){Lr(a,r,i,s,o,"throw",e)}s(void 0)})}}function Rr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Nr=F.util.ConfigUtils,Mr=F.util.Error,Pr=F.net.NetworkingEngine,Or=window.shaka,Dr=(window.goog,function(){function e(t){var n=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&t.constructor!=F.Player)throw new Mr(Mr.Severity.CRITICAL,Mr.Category.STORAGE,Mr.Code.LOCAL_PLAYER_INSTANCE_REQUIRED);this.config_=null,this.networkingEngine_=null,t?(this.config_=t.getSharedConfiguration(),this.networkingEngine_=t.getNetworkingEngine(),window.asserts.assert(this.networkingEngine_,"Storage should not be initialized with a player that had |destroy| called on it.")):(this.config_=It.createDefault(),this.networkingEngine_=new Pr),this.storeInProgress_=!1,this.segmentsFromStore_=[],this.openOperations_=[];var r=!t;this.destroyer_=new xt(xr(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(){},e.next=3,Promise.all(n.openOperations_.map(function(e){return e.then(t,t)}));case 3:if(!r){e.next=6;break}return e.next=6,n.networkingEngine_.destroy();case 6:n.config_=null,n.networkingEngine_=null;case 8:case"end":return e.stop()}},e)})))}var t,n,r,i,a,s,o,u,l,c,d,h,p,m;return t=e,n=[{key:"destroy",value:function(){return this.destroyer_.destroy()}},{key:"configure",value:function(t,n){return window.asserts.assert("object"==Ar(t)||2==arguments.length,"String configs should have values!"),2==arguments.length&&"string"==typeof t&&(t=Nr.convertToConfigObject(t,n)),window.asserts.assert("object"==Ar(t),"Should be an object!"),e.verifyConfig_(t),window.asserts.assert(this.config_,"Cannot reconfigure stroage after calling destroy."),It.mergeConfigObjects(this.config_,t)}},{key:"getConfiguration",value:function(){window.asserts.assert(this.config_,"Config must not be null!");var e=It.createDefault();return It.mergeConfigObjects(e,this.config_,It.createDefault()),e}},{key:"getNetworkingEngine",value:function(){return this.networkingEngine_}},{key:"store",value:function(e,t,n){var r,i=this,a=(r=xr(regeneratorRuntime.mark(function t(){var r,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n||"string"==typeof n){t.next=4;break}return Or.Deprecate.deprecateFeature(2,6,"Storing with a manifest parser factory","Please register a manifest parser and for the mime-type."),r=n,t.abrupt("return",new r);case 4:return window.asserts.assert(i.networkingEngine_,"Should not call |store| after |destroy|"),t.next=7,tn.create(e,i.networkingEngine_,i.config_.manifest.retryParameters,n);case 7:return a=t.sent,t.abrupt("return",a);case 9:case"end":return t.stop()}},t)})),function(){return r.apply(this,arguments)});return this.startOperation_(this.store_(e,t||{},a))}},{key:"getStoreInProgress",value:function(){return this.storeInProgress_}},{key:"store_",value:(m=xr(regeneratorRuntime.mark(function e(t,n,r){var i,a,s,o,u,l,c,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.requireSupport_(),!this.storeInProgress_){e.next=3;break}throw new Mr(Mr.Severity.CRITICAL,Mr.Category.STORAGE,Mr.Code.STORE_ALREADY_IN_PROGRESS);case 3:return this.storeInProgress_=!0,e.next=6,this.parseManifest(t,r);case 6:if(i=e.sent,this.ensureNotDestroyed_(),!i.presentationTimeline.isLive()&&!i.presentationTimeline.isInProgress()){e.next=11;break}throw new Mr(Mr.Severity.CRITICAL,Mr.Category.STORAGE,Mr.Code.CANNOT_STORE_LIVE_OFFLINE,t);case 11:return a=null,s=new Sn,o=null,u=null,e.prev=15,e.next=18,this.createDrmEngine(i,function(e){u=u||e});case 18:if(a=e.sent,this.ensureNotDestroyed_(),!u){e.next=22;break}throw u;case 22:return this.filterManifest_(i,a),e.next=25,s.init();case 25:return this.ensureNotDestroyed_(),e.next=28,s.getActive();case 28:return o=e.sent,this.ensureNotDestroyed_(),window.asserts.assert(a,"drmEngine should be non-null here."),e.next=33,this.downloadManifest_(o.cell,a,i,t,n);case 33:if(l=e.sent,this.ensureNotDestroyed_(),!u){e.next=37;break}throw u;case 37:return e.next=39,o.cell.addManifests([l]);case 39:return c=e.sent,this.ensureNotDestroyed_(),d=hn.manifest(o.path.mechanism,o.path.cell,c[0]),e.abrupt("return",pr.fromManifestDB(d,l));case 45:if(e.prev=45,e.t0=e.catch(15),!o){e.next=50;break}return e.next=50,o.cell.removeSegments(this.segmentsFromStore_,function(){});case 50:throw u||e.t0;case 51:return e.prev=51,this.storeInProgress_=!1,this.segmentsFromStore_=[],e.next=56,s.destroy();case 56:if(!a){e.next=59;break}return e.next=59,a.destroy();case 59:return e.finish(51);case 60:case"end":return e.stop()}},e,this,[[15,45,51,60]])})),function(e,t,n){return m.apply(this,arguments)})},{key:"filterManifest_",value:function(t,n){var r=this,i={width:1/0,height:1/0};Sr.filterByRestrictions(t,this.config_.restrictions,i),Sr.filterByMediaSourceSupport(t),Sr.filterByDrmSupport(t,n),Sr.filterByCommonCodecs(t),Sr.rollingFilter(t,function(e){var t=hr,n=[],i=!0,a=!1,s=void 0;try{for(var o,u=e.variants[Symbol.iterator]();!(i=(o=u.next()).done);i=!0){var l=o.value;window.asserts.assert(t.isPlayable(l),'We should have already filtered by "is playable"'),n.push(t.variantToTrack(l))}}catch(e){a=!0,s=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw s}}var c=!0,d=!1,h=void 0;try{for(var f,p=e.textStreams[Symbol.iterator]();!(c=(f=p.next()).done);c=!0){var m=f.value;n.push(t.textStreamToTrack(m))}}catch(e){d=!0,h=e}finally{try{c||null==p.return||p.return()}finally{if(d)throw h}}var v=r.config_.offline.trackSelectionCallback(n),y=new Set,g=new Set,_=!0,b=!1,w=void 0;try{for(var E,S=v[Symbol.iterator]();!(_=(E=S.next()).done);_=!0){var T=E.value;"variant"==T.type&&y.add(T.id),"text"==T.type&&g.add(T.id)}}catch(e){b=!0,w=e}finally{try{_||null==S.return||S.return()}finally{if(b)throw w}}e.variants=e.variants.filter(function(e){return y.has(e.id)}),e.textStreams=e.textStreams.filter(function(e){return g.has(e.id)})}),e.validateManifest_(t)}},{key:"downloadManifest_",value:(p=xr(regeneratorRuntime.mark(function e(t,n,r,i,a){var s,o,u,l=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.asserts.assert(this.networkingEngine_,"Cannot call |downloadManifest_| after calling |destroy|."),s=pr.fromManifest(i,r,0,a),o=new cn(this.networkingEngine_,function(e,t){s.size=t,l.config_.offline.progressCallback(s,e)}),e.prev=3,u=this.createOfflineManifest_(o,t,n,r,i,a),e.next=7,o.waitToFinish();case 7:return u.size=e.sent,e.abrupt("return",u);case 9:return e.prev=9,e.next=12,o.destroy();case 12:return e.finish(9);case 13:case"end":return e.stop()}},e,this,[[3,,9,13]])})),function(e,t,n,r,i){return p.apply(this,arguments)})},{key:"remove",value:function(e){return this.startOperation_(this.remove_(e))}},{key:"remove_",value:(h=xr(regeneratorRuntime.mark(function e(t){var n,r,i,a,s,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.requireSupport_(),null!=(n=hn.parse(t))&&n.isManifest()){e.next=4;break}throw new Mr(Mr.Severity.CRITICAL,Mr.Category.STORAGE,Mr.Code.MALFORMED_OFFLINE_URI,t);case 4:return r=n,i=new Sn,e.prev=6,e.next=9,i.init();case 9:return e.next=11,i.getCell(r.mechanism(),r.cell());case 11:return a=e.sent,e.next=14,a.getManifests([r.key()]);case 14:return s=e.sent,o=s[0],e.next=18,Promise.all([this.removeFromDRM_(r,o,i),this.removeFromStorage_(a,r,o)]);case 18:return e.prev=18,e.next=21,i.destroy();case 21:return e.finish(18);case 22:case"end":return e.stop()}},e,this,[[6,,18,22]])})),function(e){return h.apply(this,arguments)})},{key:"removeFromDRM_",value:(d=xr(regeneratorRuntime.mark(function t(n,r,i){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return window.asserts.assert(this.networkingEngine_,"Cannot be destroyed"),t.next=3,e.deleteLicenseFor_(this.networkingEngine_,this.config_.drm,i,r);case 3:case"end":return t.stop()}},t,this)})),function(e,t,n){return d.apply(this,arguments)})},{key:"removeFromStorage_",value:function(t,n,r){var i=this,a=e.getAllSegmentIds_(r),s=a.length+1,o=0,u=pr.fromManifestDB(n,r),l=function(e){o+=1,i.config_.offline.progressCallback(u,o/s)};return Promise.all([t.removeSegments(a,l),t.removeManifests([n.key()],l)])}},{key:"removeEmeSessions",value:function(){return this.startOperation_(this.removeEmeSessions_())}},{key:"removeEmeSessions_",value:(c=xr(regeneratorRuntime.mark(function e(){var t,n,r,i,a,s,o,u,l,c,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.requireSupport_(),window.asserts.assert(this.networkingEngine_,"Cannot be destroyed"),t=this.networkingEngine_,n=this.config_.drm,r=new Sn,i=new gn,a=!1,e.prev=7,e.next=10,r.init();case 10:s=[],r.forEachEmeSessionCell(function(e){return s.push(e)}),o=0,u=s;case 13:if(!(o<u.length)){e.next=27;break}return l=u[o],e.next=17,l.getAll();case 17:return c=e.sent,e.next=20,i.delete(n,t,c);case 20:return d=e.sent,e.next=23,l.remove(d);case 23:d.length!=c.length&&(a=!0);case 24:o++,e.next=13;break;case 27:return e.prev=27,e.next=30,r.destroy();case 30:return e.finish(27);case 31:return e.abrupt("return",!a);case 32:case"end":return e.stop()}},e,this,[[7,,27,31]])})),function(){return c.apply(this,arguments)})},{key:"list",value:function(){return this.startOperation_(this.list_())}},{key:"list_",value:(l=xr(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.requireSupport_(),t=[],n=new Sn,e.prev=3,e.next=6,n.init();case 6:return r=Promise.resolve(),n.forEachCell(function(e,n){r=r.then(xr(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.getAllManifests();case 2:r.sent.forEach(function(n,r){var i=hn.manifest(e.mechanism,e.cell,r),a=pr.fromManifestDB(i,n);t.push(a)});case 4:case"end":return r.stop()}},r)})))}),e.next=10,r;case 10:return e.prev=10,e.next=13,n.destroy();case 13:return e.finish(10);case 14:return e.abrupt("return",t);case 15:case"end":return e.stop()}},e,this,[[3,,10,14]])})),function(){return l.apply(this,arguments)})},{key:"parseManifest",value:(u=xr(regeneratorRuntime.mark(function t(n,r){var i,a,s,o,u,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=null,a=this.networkingEngine_,window.asserts.assert(a,"Should be initialized!"),s={networkingEngine:a,filterAllPeriods:function(){},filterNewPeriod:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(e){i=e}},t.next=6,r();case 6:return(o=t.sent).configure(this.config_.manifest),this.ensureNotDestroyed_(),t.prev=9,t.next=12,o.start(n,s);case 12:return u=t.sent,this.ensureNotDestroyed_(),l=e.getStreamSet_(u),t.next=17,Promise.all(Array.from(l).map(function(e){return e.createSegmentIndex()}));case 17:if(this.ensureNotDestroyed_(),!i){t.next=20;break}throw i;case 20:return t.abrupt("return",u);case 21:return t.prev=21,t.next=24,o.stop();case 24:return t.finish(21);case 25:case"end":return t.stop()}},t,this,[[9,,21,25]])})),function(e,t){return u.apply(this,arguments)})},{key:"createDrmEngine",value:(o=xr(regeneratorRuntime.mark(function e(t,n){var r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.asserts.assert(this.networkingEngine_,"Cannot call |createDrmEngine| after |destroy|"),r=new Yt({netEngine:this.networkingEngine_,onError:n,onKeyStatus:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),i=Ir.getAllVariantsFrom(t.periods),a=this.config_,r.configure(a.drm),e.next=7,r.initForStorage(i,a.offline.usePersistentLicense);case 7:return e.next=9,r.setServerCertificate();case 9:return e.next=11,r.createOrLoad();case 11:return e.abrupt("return",r);case 12:case"end":return e.stop()}},e,this)})),function(e,t){return o.apply(this,arguments)})},{key:"createOfflineManifest_",value:function(e,t,n,r,i,a){var s=this,o=new gr,u=r.periods.map(function(i){return s.createPeriod_(e,t,o,n,r,i)}),l=n.getDrmInfo(),c=n.getSessionIds();if(l&&this.config_.offline.usePersistentLicense){if(!c.length)throw new Mr(Mr.Severity.CRITICAL,Mr.Category.STORAGE,Mr.Code.NO_INIT_DATA_FOR_OFFLINE,i);l.initData=[]}return{originalManifestUri:i,duration:r.presentationTimeline.getDuration(),size:0,expiration:n.getExpiration(),periods:u,sessionIds:this.config_.offline.usePersistentLicense?c:[],drmInfo:l,appMetadata:a}}},{key:"createPeriod_",value:function(t,n,r,i,a,s){var o=!0,u=!1,l=void 0;try{for(var c,d=a.periods[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){var h=c.value,f=!0,p=!1,m=void 0;try{for(var v,y=h.variants[Symbol.iterator]();!(f=(v=y.next()).done);f=!0){var g=v.value;r.addVariant(g)}}catch(e){p=!0,m=e}finally{try{f||null==y.return||y.return()}finally{if(p)throw m}}var _=!0,b=!1,w=void 0;try{for(var E,S=h.textStreams[Symbol.iterator]();!(_=(E=S.next()).done);_=!0){var T=E.value;r.addText(T)}}catch(e){b=!0,w=e}finally{try{_||null==S.return||S.return()}finally{if(b)throw w}}}}catch(e){u=!0,l=e}finally{try{o||null==d.return||d.return()}finally{if(u)throw l}}var C=e.getStreamSet_(a),k=new Map,I=!0,A=!1,L=void 0;try{for(var x,R=C[Symbol.iterator]();!(I=(x=R.next()).done);I=!0){var N=x.value,M=this.createStream_(t,n,r,a,s,N);k.set(N.id,M)}}catch(e){A=!0,L=e}finally{try{I||null==R.return||R.return()}finally{if(A)throw L}}var P=!0,O=!1,D=void 0;try{for(var U,F=s.variants[Symbol.iterator]();!(P=(U=F.next()).done);P=!0){var B=U.value;B.audio&&k.get(B.audio.id).variantIds.push(B.id),B.video&&k.get(B.video.id).variantIds.push(B.id)}}catch(e){O=!0,D=e}finally{try{P||null==F.return||F.return()}finally{if(O)throw D}}return{startTime:s.startTime,streams:Array.from(k.values())}}},{key:"createStream_",value:function(t,n,r,i,a,s){var o=this,u={id:s.id,originalId:s.originalId,primary:s.primary,presentationTimeOffset:s.presentationTimeOffset||0,contentType:s.type,mimeType:s.mimeType,codecs:s.codecs,frameRate:s.frameRate,kind:s.kind,language:s.language,label:s.label,width:s.width||null,height:s.height||null,initSegmentKey:null,encrypted:s.encrypted,keyId:s.keyId,segments:[],variantIds:[]},l=i.presentationTimeline.getSegmentAvailabilityStart(),c=s.id;e.forEachSegment_(s,l,function(e){var i,a=Cr.createSegmentRequest(e.getUris(),e.startByte,e.endByte,o.config_.streaming.retryParameters);t.queue(c,a,r.getSegmentEstimate(s.id,e),(i=xr(regeneratorRuntime.mark(function t(r){var i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.addSegments([{data:r}]);case 2:i=t.sent,o.segmentsFromStore_.push(i[0]),u.segments.push({startTime:e.startTime,endTime:e.endTime,dataKey:i[0]});case 5:case"end":return t.stop()}},t)})),function(e){return i.apply(this,arguments)}))});var d,h=s.initSegmentReference;if(h){var f=Cr.createSegmentRequest(h.getUris(),h.startByte,h.endByte,this.config_.streaming.retryParameters);t.queue(c,f,r.getInitSegmentEstimate(s.id),(d=xr(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.addSegments([{data:t}]);case 2:r=e.sent,o.segmentsFromStore_.push(r[0]),u.initSegmentKey=r[0];case 5:case"end":return e.stop()}},e)})),function(e){return d.apply(this,arguments)}))}return u}},{key:"ensureNotDestroyed_",value:function(){if(this.destroyer_.destroyed())throw new Mr(Mr.Severity.CRITICAL,Mr.Category.STORAGE,Mr.Code.OPERATION_ABORTED)}},{key:"requireSupport_",value:function(){if(!e.support())throw new Mr(Mr.Severity.CRITICAL,Mr.Category.STORAGE,Mr.Code.STORAGE_NOT_SUPPORTED)}},{key:"startOperation_",value:(s=xr(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.openOperations_.push(t),e.prev=1,e.next=4,t;case 4:return e.abrupt("return",e.sent);case 5:return e.prev=5,f.remove(this.openOperations_,t),e.finish(5);case 8:case"end":return e.stop()}},e,this,[[1,,5,8]])})),function(e){return s.apply(this,arguments)})}],r=[{key:"support",value:function(){return!!Et.supportsMediaSource()&&Sn.support()}},{key:"getCapabilities_",value:function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e.periods[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var u=s.value,l=!0,c=!1,d=void 0;try{for(var h,f=u.streams[Symbol.iterator]();!(l=(h=f.next()).done);l=!0){var p=h.value;t&&"video"==p.contentType?n.push({contentType:Ot.getFullType(p.mimeType,p.codecs),robustness:e.drmInfo.videoRobustness}):t||"audio"!=p.contentType||n.push({contentType:Ot.getFullType(p.mimeType,p.codecs),robustness:e.drmInfo.audioRobustness})}}catch(e){c=!0,d=e}finally{try{l||null==f.return||f.return()}finally{if(c)throw d}}}}catch(e){i=!0,a=e}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}return n}},{key:"forEachSegment_",value:function(e,t,n){for(var r=e.findSegmentPosition(t),i=null==r?null:e.getSegmentReference(r);i;)n(i),i=e.getSegmentReference(++r)}},{key:"getAllSegmentIds_",value:function(e){var t=[],n=!0,r=!1,i=void 0;try{for(var a,s=e.periods[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value,u=!0,l=!1,c=void 0;try{for(var d,h=o.streams[Symbol.iterator]();!(u=(d=h.next()).done);u=!0){var f=d.value;null!=f.initSegmentKey&&t.push(f.initSegmentKey);var p=!0,m=!1,v=void 0;try{for(var y,g=f.segments[Symbol.iterator]();!(p=(y=g.next()).done);p=!0){var _=y.value;t.push(_.dataKey)}}catch(e){m=!0,v=e}finally{try{p||null==g.return||g.return()}finally{if(m)throw v}}}}catch(e){l=!0,c=e}finally{try{u||null==h.return||h.return()}finally{if(l)throw c}}}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return t}},{key:"deleteAll",value:(a=xr(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Sn,e.prev=1,e.next=4,t.erase();case 4:return e.prev=4,e.next=7,t.destroy();case 7:return e.finish(4);case 8:case"end":return e.stop()}},e,null,[[1,,4,8]])})),function(){return a.apply(this,arguments)})},{key:"deleteLicenseFor_",value:(i=xr(regeneratorRuntime.mark(function t(n,r,i,a){var s,o,u,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a.drmInfo){t.next=2;break}return t.abrupt("return");case 2:return s=i.getEmeSessionCell(),o=a.sessionIds.map(function(t){return{sessionId:t,keySystem:a.drmInfo.keySystem,licenseUri:a.drmInfo.licenseServerUri,serverCertificate:a.drmInfo.serverCertificate,audioCapabilities:e.getCapabilities_(a,!1),videoCapabilities:e.getCapabilities_(a,!0)}}),u=new gn,t.next=7,u.delete(r,n,o);case 7:return l=t.sent,t.next=10,s.remove(l);case 10:return t.next=12,s.add(o.filter(function(e){return-1==l.indexOf(e.sessionId)}));case 12:case"end":return t.stop()}},t)})),function(e,t,n,r){return i.apply(this,arguments)})},{key:"getStreamSet_",value:function(e){var t=new Set,n=!0,r=!1,i=void 0;try{for(var a,s=e.periods[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value,u=!0,l=!1,c=void 0;try{for(var d,h=o.textStreams[Symbol.iterator]();!(u=(d=h.next()).done);u=!0){var f=d.value;t.add(f)}}catch(e){l=!0,c=e}finally{try{u||null==h.return||h.return()}finally{if(l)throw c}}var p=!0,m=!1,v=void 0;try{for(var y,g=o.variants[Symbol.iterator]();!(p=(y=g.next()).done);p=!0){var _=y.value;_.audio&&t.add(_.audio),_.video&&t.add(_.video)}}catch(e){m=!0,v=e}finally{try{p||null==g.return||g.return()}finally{if(m)throw v}}}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return t}},{key:"verifyConfig_",value:function(e){var t=!1;null!=e.trackSelectionCallback&&(t=!0,e.offline=e.offline||{},e.offline.trackSelectionCallback=e.trackSelectionCallback,delete e.trackSelectionCallback),null!=e.progressCallback&&(t=!0,e.offline=e.offline||{},e.offline.progressCallback=e.progressCallback,delete e.progressCallback),null!=e.usePersistentLicense&&(t=!0,e.offline=e.offline||{},e.offline.usePersistentLicense=e.usePersistentLicense,delete e.usePersistentLicense),t&&Or.Deprecate.deprecateFeature(2,6,"Storage.configure with OfflineConfig","Please configure storage with a player configuration.")}},{key:"validateManifest_",value:function(t){if(0==t.periods.length)throw new Mr(Mr.Severity.CRITICAL,Mr.Category.MANIFEST,Mr.Code.NO_PERIODS);var n=!0,r=!1,i=void 0;try{for(var a,s=t.periods[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;e.validatePeriod_(o)}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}}},{key:"validatePeriod_",value:function(e){var t=new Set(e.variants.map(function(e){return e.video})),n=new Set(e.variants.map(function(e){return e.audio})),r=e.textStreams;t.size>1&&Or.log.warning("Multiple video tracks selected to be stored");var i=!0,a=!1,s=void 0;try{for(var o,u=n[Symbol.iterator]();!(i=(o=u.next()).done);i=!0){var l=o.value,c=!0,d=!1,h=void 0;try{for(var f,p=n[Symbol.iterator]();!(c=(f=p.next()).done);c=!0){var m=f.value;l!=m&&l.language==m.language&&Or.log.warning("Similar audio tracks were selected to be stored",l.id,m.id)}}catch(e){d=!0,h=e}finally{try{c||null==p.return||p.return()}finally{if(d)throw h}}}}catch(e){a=!0,s=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw s}}var v=!0,y=!1,g=void 0;try{for(var _,b=r[Symbol.iterator]();!(v=(_=b.next()).done);v=!0){var w=_.value,E=!0,S=!1,T=void 0;try{for(var C,k=r[Symbol.iterator]();!(E=(C=k.next()).done);E=!0){var I=C.value;w!=I&&w.language==I.language&&Or.log.warning("Similar text tracks were selected to be stored",w.id,I.id)}}catch(e){S=!0,T=e}finally{try{E||null==k.return||k.return()}finally{if(S)throw T}}}}catch(e){y=!0,g=e}finally{try{v||null==b.return||b.return()}finally{if(y)throw g}}}}],n&&Rr(t.prototype,n),r&&Rr(t,r),e}());F.Player.registerSupportPlugin("offline",Dr.support);var Ur=Dr;function Fr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Br=window.shaka,Vr=(window.goog,function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.textTrack_=null;for(var n=0;n<t.textTracks.length;++n){var r=t.textTracks[n];r.mode="disabled",r.label==Br.text.SimpleTextDisplayer.TextTrackLabel_&&(this.textTrack_=r)}this.textTrack_||(this.textTrack_=t.addTextTrack("subtitles",Br.text.SimpleTextDisplayer.TextTrackLabel_)),this.textTrack_.mode="hidden"}var t,n,r;return t=e,r=[{key:"convertToTextTrackCue_",value:function(e){if(e.startTime>=e.endTime)return Br.log.warning("Invalid cue times: "+e.startTime+" - "+e.endTime),null;var t=new VTTCue(e.startTime,e.endTime,e.payload);t.lineAlign=e.lineAlign,t.positionAlign=e.positionAlign,t.size=e.size;try{t.align=e.textAlign}catch(e){}return"center"==e.textAlign&&"center"!=t.align&&(t.align="middle"),e.writingMode==Gn.writingMode.VERTICAL_LEFT_TO_RIGHT?t.vertical="lr":e.writingMode==Gn.writingMode.VERTICAL_RIGHT_TO_LEFT&&(t.vertical="rl"),e.lineInterpretation==Gn.lineInterpretation.PERCENTAGE&&(t.snapToLines=!1),null!=e.line&&(t.line=e.line),null!=e.position&&(t.position=e.position),t}},{key:"removeWhere_",value:function(e,t){var n=e.mode,r="showing"==n?"showing":"hidden";e.mode=r,window.asserts.assert(e.cues,'Cues should be accessible when mode is set to "'+r+'".');for(var i=e.cues,a=i.length-1;a>=0;a--){var s=i[a];s&&t(s)&&e.removeCue(s)}e.mode=n}}],(n=[{key:"remove",value:function(e,t){return!!this.textTrack_&&(Br.text.SimpleTextDisplayer.removeWhere_(this.textTrack_,function(n){return n.startTime<t&&n.endTime>e}),!0)}},{key:"append",value:function(e){for(var t=Br.text.SimpleTextDisplayer.convertToTextTrackCue_,n=[],r=0;r<e.length;r++){var i=t(e[r]);i&&n.push(i)}var a=n.slice().sort(function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime!=t.endTime?e.endTime-t.startTime:n.indexOf(t)-n.indexOf(e)}),s=!0,o=!1,u=void 0;try{for(var l,c=a[Symbol.iterator]();!(s=(l=c.next()).done);s=!0){var d=l.value;this.textTrack_.addCue(d)}}catch(e){o=!0,u=e}finally{try{s||null==c.return||c.return()}finally{if(o)throw u}}}},{key:"destroy",value:function(){return this.textTrack_&&Br.text.SimpleTextDisplayer.removeWhere_(this.textTrack_,function(e){return!0}),this.textTrack_=null,Promise.resolve()}},{key:"isTextVisible",value:function(){return"showing"==this.textTrack_.mode}},{key:"setTextVisibility",value:function(e){this.textTrack_.mode=e?"showing":"hidden"}}])&&Fr(t.prototype,n),r&&Fr(t,r),e}());Vr.TextTrackLabel_="Shaka Player TextTrack";var jr=Vr;function Hr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Kr=F.util.Dom,Gr=F.util.Timer,qr=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isTextVisible_=!1,this.cues_=[],this.video_=t,this.videoContainer_=n,this.textContainer_=Kr.createHTMLElement("div"),this.textContainer_.classList.add("shaka-text-container"),this.videoContainer_.appendChild(this.textContainer_);this.captionsTimer_=new Gr(function(){r.updateCaptions_()}).tickEvery(.25),this.currentCuesMap_=new Map}var t,n,r;return t=e,(n=[{key:"append",value:function(e){this.cues_=this.cues_.concat(e)}},{key:"destroy",value:function(){this.videoContainer_.removeChild(this.textContainer_),this.textContainer_=null,this.isTextVisible_=!1,this.cues_=[],this.captionsTimer_&&this.captionsTimer_.stop(),this.currentCuesMap_.clear()}},{key:"remove",value:function(e,t){if(!this.textContainer_)return!1;var n=new Set,r=!0,i=!1,a=void 0;try{for(var s,o=this.cues_[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var u=s.value;u.startTime>e&&u.endTime<t&&n.add(u)}}catch(e){i=!0,a=e}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}var l=!0,c=!1,d=void 0;try{for(var h,f=n[Symbol.iterator]();!(l=(h=f.next()).done);l=!0){var p=h.value,m=this.currentCuesMap_.get(p);m&&(this.textContainer_.removeChild(m),this.currentCuesMap_.delete(p))}}catch(e){c=!0,d=e}finally{try{l||null==f.return||f.return()}finally{if(c)throw d}}return this.cues_=this.cues_.filter(function(e){return!n.has(e)}),!0}},{key:"isTextVisible",value:function(){return this.isTextVisible_}},{key:"setTextVisibility",value:function(e){this.isTextVisible_=e}},{key:"updateCaptions_",value:function(){var e=this,t=this.video_.currentTime,n=function(n){return e.isTextVisible_&&n.startTime<=t&&n.endTime>=t},r=!0,i=!1,a=void 0;try{for(var s,o=this.currentCuesMap_.keys()[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var u=s.value;if(!n(u)){var l=this.currentCuesMap_.get(u);this.textContainer_.removeChild(l),this.currentCuesMap_.delete(u)}}}catch(e){i=!0,a=e}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}var c=this.cues_.filter(function(t){return n(t)&&!e.currentCuesMap_.has(t)}).sort(function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime-t.endTime}),d=!0,h=!1,f=void 0;try{for(var p,m=c[Symbol.iterator]();!(d=(p=m.next()).done);d=!0){var v=p.value,y=Kr.createHTMLElement("span");this.setCaptionStyles_(y,v),this.currentCuesMap_.set(v,y),this.textContainer_.appendChild(y)}}catch(e){h=!0,f=e}finally{try{d||null==m.return||m.return()}finally{if(h)throw f}}}},{key:"setCaptionStyles_",value:function(e,t){var n=e.style,r=this.textContainer_.style;if(n.whiteSpace="pre",e.textContent=t.payload,n.backgroundColor=t.backgroundColor,n.color=t.color,n.direction=t.direction,t.backgroundImage&&(n.backgroundImage="url('"+t.backgroundImage+"')",n.backgroundRepeat="no-repeat",n.backgroundSize="contain",n.backgroundPosition="center"),t.backgroundImage&&t.region){var i=shaka.text.CueRegion.units.PERCENTAGE,a=t.region.heightUnits==i?"%":"px",s=t.region.widthUnits==i?"%":"px";n.height=t.region.height+a,n.width=t.region.width+s}t.displayAlign==Gn.displayAlign.BEFORE?r.alignItems="flex-start":t.displayAlign==Gn.displayAlign.CENTER?r.alignItems="flex-top":r.alignItems="flex-end",n.fontFamily=t.fontFamily,n.fontWeight=t.fontWeight.toString(),n.fontSize=t.fontSize,n.fontStyle=t.fontStyle,t.line&&t.lineInterpretation==Gn.lineInterpretation.PERCENTAGE&&(t.writingMode==Gn.writingMode.HORIZONTAL_TOP_TO_BOTTOM?t.lineAlign==Gn.lineAlign.START?r.top=t.line+"%":t.lineAlign==Gn.lineAlign.END&&(r.bottom=t.line+"%"):t.writingMode==Gn.writingMode.VERTICAL_LEFT_TO_RIGHT?t.lineAlign==Gn.lineAlign.START?r.left=t.line+"%":t.lineAlign==Gn.lineAlign.END&&(r.right=t.line+"%"):t.lineAlign==Gn.lineAlign.START?r.right=t.line+"%":t.lineAlign==Gn.lineAlign.END&&(r.left=t.line+"%")),n.lineHeight=t.lineHeight,t.position&&(t.writingMode==Gn.writingMode.HORIZONTAL_TOP_TO_BOTTOM?r.paddingLeft=t.position:r.paddingTop=t.position),t.positionAlign==Gn.positionAlign.LEFT?r.cssFloat="left":t.positionAlign==Gn.positionAlign.RIGHT?r.cssFloat="right":r.margin="auto",n.textAlign=t.textAlign,n.textDecoration=t.textDecoration.join(" "),n.writingMode=t.writingMode,t.writingMode==Gn.writingMode.HORIZONTAL_TOP_TO_BOTTOM?r.width=t.size+"%":r.height=t.size+"%"}}])&&Hr(t.prototype,n),r&&Hr(t,r),e}(),Wr=n(7);function zr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xr(e,t,n){return t&&Yr(e.prototype,t),n&&Yr(e,n),e}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $r=function(){function e(){zr(this,e)}return Xr(e,null,[{key:"upgradeDom",value:function(){}}]),e}();function Zr(e,t,n,r,i,a,s){try{var o=e[a](s),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,i)}function Qr(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function s(e){Zr(a,r,i,s,o,"next",e)}function o(e){Zr(a,r,i,s,o,"throw",e)}s(void 0)})}}function Jr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Element.prototype.MaterialLayout;
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ei=F.util.ConfigUtils,ti=new M,ni=window.shaka,ri=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.video_=null,this.container_=null,this.player_=null,this.selectedAsset=null,this.desiredConfig_,this.defaultConfig_,this.fullyLoaded_=!1,this.controls_=null,this.initialStoredList_,this.nativeControlsEnabled_=!1,this.support_,this.uiLocale_=""}var t,n,r,i,a,s,o,u,l;return t=e,(n=[{key:"initCommon_",value:function(){var e=this;window.addEventListener("error",function(t){t.message.includes("cvox.Api")||e.onError_(t.error)}),document.getElementById("error-display-close-button").addEventListener("click",function(t){return e.closeError_()}),this.setUpVersionString_()}},{key:"initFailed",value:function(){this.initCommon_();var e=Error.Severity.CRITICAL;this.handleError_(e,"Your browser is not supported!","https://github.com/google/shaka-player#platform-and-browser-support-matrix"),$r.upgradeDom();var t=[],n=!0,r=!1,i=void 0;try{for(var a,s=document.getElementsByClassName("should-disable-on-fail")[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;t.push(o)}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}t.push(document.getElementsByClassName("mdl-layout__drawer-button"));for(var u=0,l=t;u<l.length;u++){var c=l[u];c.tabIndex=-1,c.classList.add("disabled-by-fail")}}},{key:"init",value:(l=Qr(regeneratorRuntime.mark(function t(){var n,r=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.initCommon_(),t.next=3,F.Player.probeSupport();case 3:return this.support_=t.sent,this.video_=document.getElementById("video"),this.video_.poster=e.mainPoster_,this.container_=document.getElementsByClassName("video-container")[0],this.setupPlayer_(),this.readHash_(),window.addEventListener("hashchange",function(){return r.hashChanged_()}),t.next=12,this.setupStorage_();case 12:this.dispatchEventWithName_("shaka-main-loaded"),$r.upgradeDom(),n=this.getLastAssetFromHash_(),this.fullyLoaded_=!0,this.remakeHash(),n&&!this.selectedAsset&&this.loadAsset(n);case 18:case"end":return t.stop()}},t,this)})),function(){return l.apply(this,arguments)})},{key:"setupPlayer_",value:function(){var e=this,t=this.video_.ui;this.player_=t.getControls().getPlayer(),ft.registerElement("close",new gt.Factory);var n=t.getConfiguration();n.controlPanelElements.push("close"),t.configure(n),this.player_.configure("manifest.dash.clockSyncUri","https://shaka-player-demo.appspot.com/time.txt"),this.defaultConfig_=this.player_.getConfiguration(),this.desiredConfig_=this.player_.getConfiguration();var r=navigator.languages||["en-us"];this.configure("preferredAudioLanguage",r[0]),this.configure("preferredTextLanguage",r[0]),this.uiLocale_=r[0];var i=function(t){return e.onErrorEvent_(t)};this.player_.addEventListener("error",i),this.controls_=t.getControls(),this.controls_.addEventListener("error",i),this.controls_.addEventListener("caststatuschanged",function(t){e.onCastStatusChange_(t.newStatus)});var a=this.controls_.getLocalization(),s=Ne.UNKNOWN_LOCALES;a.addEventListener(s,function(t){var n=!0,r=!1,i=void 0;try{for(var a,s=t.locales[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;e.loadUILocale_(o)}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}}),this.loadUILocale_(this.uiLocale_);var o=document.getElementById("drawer-close-button");o.addEventListener("click",function(){document.getElementById("main-layout").MaterialLayout.toggleDrawer(),e.dispatchEventWithName_("shaka-main-drawer-state-change"),e.hideNode_(o)});var u=document.querySelector(".mdl-layout__drawer-button");window.asserts.assert(u,"There should be a drawer button."),u.addEventListener("click",function(){e.dispatchEventWithName_("shaka-main-drawer-state-change"),e.showNode_(o)});var l=document.querySelector(".mdl-layout__obfuscator");window.asserts.assert(l,"There should be an obfuscator."),l.addEventListener("click",function(){e.dispatchEventWithName_("shaka-main-drawer-state-change"),e.hideNode_(o)}),this.hideNode_(o)}},{key:"getIsDrawerOpen",value:function(){var e=document.querySelector(".mdl-layout__drawer");return window.asserts.assert(e,"There should be a drawer."),e.classList.contains("is-visible")}},{key:"getIdentifierFromAsset_",value:function(e){return e.name+(e.source==de.Source.CUSTOM?" [CUSTOM]":"")}},{key:"makeStorageInstance_",value:function(){var e=this;if(!Ur.support())return null;var t=new Ur;return t.configure("offline.progressCallback",function(t,n){var r=function(t){var n=!0,r=!1,i=void 0;try{for(var a,s=de.testAssets[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;if(e.getIdentifierFromAsset_(o)==t)return o}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}if(shakaDemoCustom){var u=!0,l=!1,c=void 0;try{for(var d,h=shakaDemoCustom.assets()[Symbol.iterator]();!(u=(d=h.next()).done);u=!0){var f=d.value;if(e.getIdentifierFromAsset_(f)==t)return f}}catch(e){l=!0,c=e}finally{try{u||null==h.return||h.return()}finally{if(l)throw c}}}return null}(t.appMetadata.identifier);r&&(r.storedProgress=n,e.dispatchEventWithName_("shaka-main-offline-progress"))}),t}},{key:"setupOfflineSupport",value:function(e){var t=this;if(this.initialStoredList_){var n=!0,r=!1,i=void 0;try{for(var a,s=this.initialStoredList_[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value,u=o.appMetadata.identifier;this.getIdentifierFromAsset_(e)==u&&(e.storedContent=o)}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}e.storeCallback=Qr(regeneratorRuntime.mark(function n(){var r,i,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.makeStorageInstance_()){n.next=3;break}return n.abrupt("return");case 3:return n.prev=3,n.next=6,t.drmConfiguration_(e,r);case 6:return i={identifier:t.getIdentifierFromAsset_(e),downloaded:new Date},e.storedProgress=0,t.dispatchEventWithName_("shaka-main-offline-progress"),n.next=11,r.store(e.manifestUri,i);case 11:a=n.sent,e.storedContent=a,n.next=19;break;case 15:n.prev=15,n.t0=n.catch(3),t.onError_(n.t0),e.storedContent=null;case 19:r.destroy(),e.storedProgress=1,t.dispatchEventWithName_("shaka-main-offline-progress");case 22:case"end":return n.stop()}},n,null,[[3,15]])})),e.unstoreCallback=Qr(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e==t.selectedAsset&&t.unload(),!e.storedContent||!e.storedContent.offlineUri){n.next=19;break}if(r=t.makeStorageInstance_()){n.next=5;break}return n.abrupt("return");case 5:return n.prev=5,e.storedProgress=0,t.dispatchEventWithName_("shaka-main-offline-progress"),n.next=10,r.remove(e.storedContent.offlineUri);case 10:e.storedContent=null,n.next=16;break;case 13:n.prev=13,n.t0=n.catch(5),t.onError_(n.t0);case 16:r.destroy(),e.storedProgress=1,t.dispatchEventWithName_("shaka-main-offline-progress");case 19:case"end":return n.stop()}},n,null,[[5,13]])}))}}},{key:"setupStorage_",value:(u=Qr(regeneratorRuntime.mark(function e(){var t,n,r,i,a,s,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.makeStorageInstance_()){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,t.list();case 6:this.initialStoredList_=e.sent,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(3),console.error(e.t0),this.initialStoredList_=null;case 13:return e.prev=13,t.destroy(),e.finish(13);case 16:n=!0,r=!1,i=void 0,e.prev=19,a=de.testAssets[Symbol.iterator]();case 21:if(n=(s=a.next()).done){e.next=29;break}if(o=s.value,!this.getAssetUnsupportedReason(o,!0)){e.next=25;break}return e.abrupt("continue",26);case 25:this.setupOfflineSupport(o);case 26:n=!0,e.next=21;break;case 29:e.next=35;break;case 31:e.prev=31,e.t1=e.catch(19),r=!0,i=e.t1;case 35:e.prev=35,e.prev=36,n||null==a.return||a.return();case 38:if(e.prev=38,!r){e.next=41;break}throw i;case 41:return e.finish(38);case 42:return e.finish(35);case 43:case"end":return e.stop()}},e,this,[[3,9,13,16],[19,31,35,43],[36,,38,42]])})),function(){return u.apply(this,arguments)})},{key:"hashChanged_",value:function(){this.readHash_(),this.dispatchEventWithName_("shaka-main-config-change")}},{key:"getAssetUnsupportedReason",value:function(e,t){var n=this;if(e.source==de.Source.CUSTOM)return null;if(e.disabled)return"This asset is disabled.";if(t&&!e.features.includes(de.Feature.OFFLINE))return"This asset cannot be downloaded.";if(t&&!Ur.support())return"Your browser does not support offline storage.";if(!e.drm.includes(de.KeySystem.CLEAR)){if(!e.drm.some(function(e){return n.support_.drm[e]}))return"Your browser does not support the required key systems.";if(t&&!e.drm.some(function(e){return n.support_.drm[e]&&n.support_.drm[e].persistentState}))return"Your browser does not support offline licenses for the required key systems."}if(e.features.includes(de.Feature.DASH)&&!this.support_.manifest.mpd)return"Your browser does not support MPEG-DASH manifests.";if(e.features.includes(de.Feature.HLS)&&!this.support_.manifest.m3u8)return"Your browser does not support HLS manifests.";var r=[];return e.features.includes(de.Feature.WEBM)&&r.push("video/webm"),e.features.includes(de.Feature.MP4)&&r.push("video/mp4"),e.features.includes(de.Feature.MP2TS)&&r.push("video/mp2t"),r.some(function(e){return n.support_.media[e]})?null:"Your browser does not support the required video format."}},{key:"setNativeControlsEnabled",value:function(e){this.nativeControlsEnabled_=e,this.remakeHash()}},{key:"getNativeControlsEnabled",value:function(){return this.nativeControlsEnabled_}},{key:"loadUILocale_",value:(o=Qr(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:for(i in n=Wr,r=new Map,n)r.set(i,n[i]);this.controls_.getLocalization().insert(t,r);case 7:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"setUILocale",value:function(e){this.uiLocale_=e;var t=[e].concat(navigator.languages);this.controls_.getLocalization().changeLocale(t)}},{key:"getUILocale",value:function(){return this.uiLocale_}},{key:"getLastAssetFromHash_",value:function(){var t=this.getParams_(),n=t.asset;if(n){var r=!0,i=!1,a=void 0;try{for(var s,o=de.testAssets[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var u=s.value;if(u.manifestUri==n)return u}}catch(e){i=!0,a=e}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}var l=!0,c=!1,d=void 0;try{for(var h,f=shakaDemoCustom.assets()[Symbol.iterator]();!(l=(h=f.next()).done);l=!0){var p=h.value;if(p.manifestUri==n)return p}}catch(e){c=!0,d=e}finally{try{l||null==f.return||f.return()}finally{if(c)throw d}}var m=new le("loaded asset","",n,de.Source.UNKNOWN);if("license"in t){var v=e.commonDrmSystems;"drmSystem"in t&&(v=[t.drmSystem]);var y=!0,g=!1,_=void 0;try{for(var b,w=v[Symbol.iterator]();!(y=(b=w.next()).done);y=!0){var E=b.value;m.addLicenseServer(E,t.license)}}catch(e){g=!0,_=e}finally{try{y||null==w.return||w.return()}finally{if(g)throw _}}}return"certificate"in t&&m.addCertificateUri(t.certificate),m}return null}},{key:"readHash_",value:function(){var e=this,t=this.getParams_();if(this.player_){var n=this.player_.getConfiguration();he.a.runThroughHashParams(function(n,r){if(n in t){var i=e.getCurrentConfigValue(r),a=t[n];"boolean"==typeof i?a="true"==a:"number"==typeof i&&(a=parseFloat(a)),e.configure(r,a)}},n)}if("lang"in t){var r=t.lang;this.configure("preferredAudioLanguage",r),this.configure("preferredTextLanguage",r),this.setUILocale(r)}if("uilang"in t&&this.setUILocale(t.uilang),"noadaptation"in t&&this.configure("abr.enabled",!1),"jumpLargeGaps"in t&&this.configure("streaming.jumpLargeGaps",!0),"build"in t&&t.build,this.nativeControlsEnabled_="nativecontrols"in t,!he.a.browserSupportsUncompiledMode()){var i=document.getElementById("uncompiled-link");i.setAttribute("disabled",""),i.removeAttribute("href"),i.title="requires a newer browser"}ni.log&&("vv"in t?ni.log.setLevel(ni.log.Level.V2):"v"in t?ni.log.setLevel(ni.log.Level.V1):"debug"in t?ni.log.setLevel(ni.log.Level.DEBUG):"info"in t&&ni.log.setLevel(ni.log.Level.INFO))}},{key:"getParams_",value:function(){var e=location.search.substr(1);e=e?e.split(";"):[];var t=location.hash.substr(1);t=t?t.split(";"):[];for(var n=e.concat(t),r={},i=0;i<n.length;++i){var a=n[i].split("=");r[a[0]]=a.slice(1).join("=")}return r}},{key:"getValueFromGivenConfig_",value:function(e,t){for(var n=t,r=e;r;){var i=r.split(/\.(.+)/);if(3!=i.length)return n[i[0]];r=i[1],n=n[i[0]]}}},{key:"getCurrentConfigValue",value:function(e){var t=this.desiredConfig_;return this.getValueFromGivenConfig_(e,t)}},{key:"resetConfiguration",value:function(e){this.configure(e,void 0)}},{key:"configure",value:function(e,t){2==arguments.length&&"string"==typeof e&&(e=ei.convertToConfigObject(e,t));var n=e;It.mergeConfigObjects(this.desiredConfig_,n,this.defaultConfig_),this.player_.configure(e,t)}},{key:"getConfiguration",value:function(){return this.desiredConfig_}},{key:"requestCertificate_",value:(s=Qr(regeneratorRuntime.mark(function e(t,n){var r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=NetworkingEngine.RequestType.APP,i={uris:[t]},e.next=4,n.request(r,i).promise;case 4:return a=e.sent,e.abrupt("return",a.data);case 6:case"end":return e.stop()}},e)})),function(e,t){return s.apply(this,arguments)})},{key:"unload",value:function(){this.selectedAsset=null;var t=document.getElementById("video-bar");this.hideNode_(t),this.video_.poster=e.mainPoster_,this.player_.unload(),this.dispatchEventWithName_("shaka-main-selected-asset-changed"),this.remakeHash()}},{key:"drmConfiguration_",value:(a=Qr(regeneratorRuntime.mark(function e(t,n){var r,i,a,s,o,u,l,c,d,h,f,p,m,v,y,g,_;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n?n.getNetworkingEngine():this.player_.getNetworkingEngine(),window.asserts.assert(r,"There should be a net engine."),t.applyFilters(r),i=t.getConfiguration(),n?n.configure(i):(this.player_.configure(this.desiredConfig_),this.player_.configure(i)),a=n?n.getConfiguration():this.player_.getConfiguration(),!t.certificateUri){e.next=32;break}return e.next=9,this.requestCertificate_(t.certificateUri,r);case 9:for(s=e.sent,o=new Uint8Array(s),u=!0,l=!1,c=void 0,e.prev=14,d=t.licenseServers.keys()[Symbol.iterator]();!(u=(h=d.next()).done);u=!0)f=h.value,a.drm.advanced[f]=a.drm.advanced[f]||{},a.drm.advanced[f].serverCertificate=o;e.next=22;break;case 18:e.prev=18,e.t0=e.catch(14),l=!0,c=e.t0;case 22:e.prev=22,e.prev=23,u||null==d.return||d.return();case 25:if(e.prev=25,!l){e.next=28;break}throw c;case 28:return e.finish(25);case 29:return e.finish(22);case 30:e.next=51;break;case 32:for(p=!0,m=!1,v=void 0,e.prev=35,y=t.licenseServers.keys()[Symbol.iterator]();!(p=(g=y.next()).done);p=!0)_=g.value,a.drm.advanced[_]&&delete a.drm.advanced[_].serverCertificate;e.next=43;break;case 39:e.prev=39,e.t1=e.catch(35),m=!0,v=e.t1;case 43:e.prev=43,e.prev=44,p||null==y.return||y.return();case 46:if(e.prev=46,!m){e.next=49;break}throw v;case 49:return e.finish(46);case 50:return e.finish(43);case 51:n?n.configure(a):this.player_.configure("drm.advanced",a.drm.advanced),this.remakeHash();case 53:case"end":return e.stop()}},e,this,[[14,18,22,30],[23,,25,29],[35,39,43,51],[44,,46,50]])})),function(e,t){return a.apply(this,arguments)})},{key:"showPlayer_",value:function(){var t=document.getElementById("video-bar");this.showNode_(t),this.closeError_(),this.video_.poster=e.mainPoster_,t.scrollIntoView({behavior:"smooth",block:"start"})}},{key:"loadAsset",value:(i=Qr(regeneratorRuntime.mark(function t(n){var r,i,a,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.selectedAsset=n,this.showPlayer_(),this.dispatchEventWithName_("shaka-main-selected-asset-changed"),t.next=6,this.drmConfiguration_(n);case 6:return this.controls_.getCastProxy().setAppData({asset:n}),this.nativeControlsEnabled_?(this.controls_.setEnabledShakaControls(!1),this.controls_.setEnabledNativeControls(!0)):(this.controls_.setEnabledShakaControls(!0),this.controls_.setEnabledNativeControls(!1)),r=this,i=function(){return r.nativeControlsEnabled_?new jr(r.video_):new qr(r.video_,r.container_)},this.player_.configure("textDisplayFactory",i),a=(n.storedContent?n.storedContent.offlineUri:null)||n.manifestUri,console.log(this.player_,a),t.next=15,this.player_.load(a);case 15:this.player_.isAudioOnly()&&(this.video_.poster=e.audioOnlyPoster_),t.next=22;break;case 18:t.prev=18,t.t0=t.catch(0),(s=t.t0).code==ti.code.LOAD_INTERRUPTED?console.debug("load() interrupted"):this.onError_(s);case 22:this.remakeHash();case 23:case"end":return t.stop()}},t,this,[[0,18]])})),function(e){return i.apply(this,arguments)})},{key:"remakeHash",value:function(){var t=this;if(this.fullyLoaded_){var n=[];if(this.player_){var r=this.player_.getConfiguration();he.a.runThroughHashParams(function(e,r){var i=t.getCurrentConfigValue(r),a=t.defaultConfig_,s=t.getValueFromGivenConfig_(r,a),o=isNaN(i)&&isNaN(s);i==s||o||n.push(e+"="+i)},r)}if(this.getCurrentConfigValue("abr.enabled")||n.push("noadaptation"),this.getCurrentConfigValue("streaming.jumpLargeGaps")&&n.push("jumpLargeGaps"),n.push("uilang="+this.getUILocale()),this.selectedAsset){var i=de.testAssets.includes(this.selectedAsset);if(n.push("asset="+this.selectedAsset.manifestUri),!i&&this.selectedAsset.licenseServers.size){var a=this.selectedAsset.licenseServers.values().next().value;n.push("license="+a);var s=!0,o=!1,u=void 0;try{for(var l,c=this.selectedAsset.licenseServers.keys()[Symbol.iterator]();!(s=(l=c.next()).done);s=!0){var d=l.value;if(!e.commonDrmSystems.includes(d)){n.push("drmSystem="+d);break}}}catch(e){o=!0,u=e}finally{try{s||null==c.return||c.return()}finally{if(o)throw u}}}!i&&this.selectedAsset.certificateUri&&n.push("certificate="+this.selectedAsset.certificateUri)}var h=document.getElementById("nav-button-container"),f=!0,p=!1,m=void 0;try{for(var v,y=h.childNodes[Symbol.iterator]();!(f=(v=y.next()).done);f=!0){var g=v.value;if(g.nodeType==Node.ELEMENT_NODE&&g.classList.contains("mdl-button--accent")){n.push("panel="+g.textContent);break}}}catch(e){p=!0,m=e}finally{try{f||null==y.return||y.return()}finally{if(p)throw m}}if(this.nativeControlsEnabled_&&n.push("nativecontrols"),ni.log&&ni.log.currentLevel!=ni.log.MAX_LOG_LEVEL)switch(ni.log.currentLevel){case ni.log.Level.INFO:n.push("info");break;case ni.log.Level.DEBUG:n.push("debug");break;case ni.log.Level.V2:n.push("vv");break;case ni.log.Level.V1:n.push("v")}this.setNewHashSilent_(n.join(";"))}}},{key:"setNewHashSilent_",value:function(e){var t=document.location.pathname+"#"+e;history.replaceState(null,"",t)}},{key:"getHamburgerMenu",value:function(){return document.getElementById("hamburger-menu-contents")}},{key:"hideNode_",value:function(e){e.classList.add("hidden")}},{key:"showNode_",value:function(e){e.classList.remove("hidden")}},{key:"addNavButton",value:function(e){var t=this,n=document.getElementById("nav-button-container"),r=document.getElementById("contents"),i=document.getElementById("nav-button-"+e),a=this.getParams_(),s=a.panel==encodeURI(i.textContent);s||a.panel||(s=null!=i.getAttribute("defaultselected"));var o=document.createElement("div");this.hideNode_(o),r.appendChild(o);var u=function(){var e=!0,a=!1,s=void 0;try{for(var u,l=n.childNodes[Symbol.iterator]();!(e=(u=l.next()).done);e=!0){var c=u.value;c.nodeType==Node.ELEMENT_NODE&&c.classList.remove("mdl-button--accent")}}catch(e){a=!0,s=e}finally{try{e||null==l.return||l.return()}finally{if(a)throw s}}var d=!0,h=!1,f=void 0;try{for(var p,m=r.childNodes[Symbol.iterator]();!(d=(p=m.next()).done);d=!0){var v=p.value;v.nodeType==Node.ELEMENT_NODE&&t.hideNode_(v)}}catch(e){h=!0,f=e}finally{try{d||null==m.return||m.return()}finally{if(h)throw f}}i.classList.add("mdl-button--accent"),t.showNode_(o),t.remakeHash(),t.dispatchEventWithName_("shaka-main-page-changed"),o.scrollIntoView({behavior:"smooth",block:"start"})};return i.addEventListener("click",u),s&&Promise.resolve().then(u),o}},{key:"dispatchEventWithName_",value:function(e){var t=document.createEvent("CustomEvent");t.initCustomEvent(e,!1,!1,null),document.dispatchEvent(t)}},{key:"setUpVersionString_",value:function(){for(var e=F.Player.version.split("-"),t=[],n=function(){var n=i[r];e.includes(n)&&(t.push(n),e=e.filter(function(e){return e!=n}))},r=0,i=["debug","uncompiled"];r<i.length;r++)n()}},{key:"closeError_",value:function(){document.getElementById("error-display").classList.add("hidden");var e=document.getElementById("error-display-link");e.href="",e.textContent="",e.severity=null}},{key:"onErrorEvent_",value:function(e){this.onError_(e.detail)}},{key:"onError_",value:function(e){var t=e.severity;null!=t&&null!=e.severity||(t=ti.severity.CRITICAL);var n=e.message||"Error code "+e.code,r="";e.code&&(r="../docs/api/Error.html#value:"+e.code),console.error(e),this.handleError_(t,n,r)}},{key:"handleError_",value:function(e,t,n){var r=document.getElementById("error-display-link");(null==r.severity||e>r.severity)&&(r.href=n,void 0===r.textContent?r.innerText=t:r.textContent=t,r.severity=e,r.href?r.classList.remove("input-disabled"):r.classList.add("input-disabled"),document.getElementById("error-display").classList.remove("hidden"))}},{key:"onCastStatusChange_",value:function(e){e&&!this.selectedAsset&&(this.selectedAsset=le.makeBlankAsset(),this.showPlayer_())}}])&&Jr(t.prototype,n),r&&Jr(t,r),e}();ri.commonDrmSystems=["com.widevine.alpha","com.microsoft.playready","com.apple.fps.1_0","com.adobe.primetime","org.w3.clearkey"];var ii=new ri,ai=ii;function si(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}ri.mainPoster_="https://shaka-player-demo.appspot.com/assets/poster.jpg",ri.audioOnlyPoster_="https://shaka-player-demo.appspot.com/assets/audioOnly.gif",ri.initWrapper=function(){var e=Qr(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),ii.onError_(e.t0),console.error(e.t0);case 9:case"end":return e.stop()}},e,null,[[0,5]])}));return function(t){return e.apply(this,arguments)}}(),document.addEventListener("shaka-ui-loaded",function(){ri.initWrapper(function(){return ii.init()})}),document.addEventListener("shaka-ui-load-failed",function(e){ri.initWrapper(function(){return ii.initFailed()})});
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var oi=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"registerDialog",value:function(e){}}],(n=null)&&si(t.prototype,n),r&&si(t,r),e}();function ui(e,t,n,r,i,a,s){try{var o=e[a](s),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,i)}function li(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function s(e){ui(a,r,i,s,o,"next",e)}function o(e){ui(a,r,i,s,o,"throw",e)}s(void 0)})}}function ci(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var di=F.util.Dom;window.shaka=window.shaka||{};window.shaka;var hi=function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.card_=document.createElement("div"),this.asset_=n,this.actions_=document.createElement("div"),this.featureIconsContainer_=document.createElement("div"),this.progressBar_=document.createElement("progress"),this.remakeButtonsFn_=i,this.card_.classList.add("mdl-card-wide"),this.card_.classList.add("mdl-card"),this.card_.classList.add("mdl-shadow--2dp"),this.card_.classList.add("asset-card");var a=document.createElement("div");a.classList.add("mdl-card__title"),this.card_.appendChild(a);var s=document.createElement("h2");if(s.classList.add("mdl-card__title-text"),s.textContent=n.shortName||n.name,a.appendChild(s),n.iconUri){var o=document.createElement("picture"),u=document.createElement("source");u.srcset=n.iconUri.replace(/.png$/,".webp"),u.type="image/webp";var l=document.createElement("source");l.srcset=n.iconUri,l.type="image/png";var c=document.createElement("img");c.src=n.iconUri,c.alt="",o.appendChild(u),o.appendChild(l),o.appendChild(c),this.card_.appendChild(o)}if(n.description&&r){var d=document.createElement("div");d.classList.add("mdl-card__supporting-text"),d.textContent=n.description,this.card_.appendChild(d)}this.card_.appendChild(this.featureIconsContainer_),this.addFeatureIcons_(n),this.actions_.classList.add("mdl-card__actions"),this.actions_.classList.add("mdl-card--border"),this.card_.appendChild(this.actions_);var h=document.createElement("div");this.progressBar_.classList.add("hidden"),this.progressBar_.setAttribute("max",1),this.progressBar_.setAttribute("value",n.storedProgress),h.appendChild(this.progressBar_),this.card_.appendChild(h),t.appendChild(this.card_),this.remakeButtons()}var t,n,r;return t=e,(n=[{key:"addFeatureIcon_",value:function(e,t){var n=document.createElement("div");n.classList.add("feature-icon"),n.setAttribute("icon",e),this.featureIconsContainer_.appendChild(n),ve.make(n,t)}},{key:"addFeatureIcons_",value:function(e){var t=de.Feature,n=de.KeySystem,r=(new Map).set(t.SUBTITLES,"subtitles").set(t.CAPTIONS,"closed_caption").set(t.LIVE,"live").set(t.TRICK_MODE,"trick_mode").set(t.HIGH_DEFINITION,"high_definition").set(t.ULTRA_HIGH_DEFINITION,"ultra_high_definition").set(t.SURROUND,"surround_sound").set(t.MULTIPLE_LANGUAGES,"multiple_languages").set(t.AUDIO_ONLY,"audio_only"),i=!0,a=!1,s=void 0;try{for(var o,u=e.features[Symbol.iterator]();!(i=(o=u.next()).done);i=!0){var l=o.value,c=r.get(l);c&&this.addFeatureIcon_(c,l)}}catch(e){a=!0,s=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw s}}var d=!0,h=!1,f=void 0;try{for(var p,m=e.drm[Symbol.iterator]();!(d=(p=m.next()).done);d=!0)switch(p.value){case n.WIDEVINE:this.addFeatureIcon_("widevine","Widevine DRM");break;case n.CLEAR_KEY:this.addFeatureIcon_("clear_key","Clear Key DRM");break;case n.PLAYREADY:this.addFeatureIcon_("playready","PlayReady DRM")}}catch(e){h=!0,f=e}finally{try{d||null==m.return||m.return()}finally{if(h)throw f}}}},{key:"markAsUnsupported",value:function(e){this.card_.classList.add("asset-card-unsupported"),this.makeUnsupportedButton_("Not Available",e)}},{key:"makeUnsupportedButton_",value:function(e,t){var n=this.addButton(e,function(){});if(n.setAttribute("disabled",""),t){var r=document.createElement("div");n.parentElement&&n.parentElement.removeChild(n),r.classList.add("tooltip-attach-point"),r.appendChild(n),this.actions_.appendChild(r),ve.make(r,t)}return n}},{key:"selectByAsset",value:function(e){this.card_.classList.remove("selected"),this.asset_==e&&this.card_.classList.add("selected")}},{key:"remakeButtons",value:function(){di.removeAllChildren(this.actions_),this.remakeButtonsFn_(this)}},{key:"addStoreButton",value:function(){var e=this,t=function(e,t,n){t.classList.add("asset-card-corner-button");var r=document.createElement("i");r.textContent=n,r.classList.add("material-icons"),e.appendChild(r)},n=ai.getAssetUnsupportedReason(this.asset_,!0);if(!n&&this.asset_.storeCallback)if(this.asset_.isStored()){var r=this.addButton("",function(){e.makeDeleteDialog_(r)});t(r,r,"offline_pin")}else{var i=this.addButton("",li(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i.disabled=!0,t.next=3,e.asset_.storeCallback();case 3:e.remakeButtons();case 4:case"end":return t.stop()}},t)})));t(i,i,"get_app")}else{var a=this.makeUnsupportedButton_("",n);t(a,a.parentElement||a,"get_app")}}},{key:"makeDeleteDialog_",value:function(e){var t=this,n=this.card_.parentElement;if(n){var r=document.createElement("dialog");r.classList.add("mdl-dialog"),n.appendChild(r),r.showModal||oi.registerDialog(r);var i=document.createElement("h2");i.classList.add("mdl-typography--title"),i.textContent="Delete the offline copy?",r.appendChild(i);var a=document.createElement("div");r.appendChild(a);var s=function(e,t){var n=document.createElement("button");n.textContent=e,n.classList.add("mdl-button"),n.classList.add("mdl-button--colored"),n.classList.add("mdl-js-button"),n.classList.add("mdl-js-ripple-effect"),n.addEventListener("click",function(){t()}),a.appendChild(n),n.blur()};s("Yes",li(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r.close(),e.disabled=!0,n.next=4,t.asset_.unstoreCallback();case 4:t.remakeButtons();case 5:case"end":return n.stop()}},n)}))),s("No",function(){r.close()}),r.showModal()}}},{key:"updateProgress",value:function(){if(this.asset_.storedProgress<1){this.progressBar_.classList.remove("hidden");var e=!0,t=!1,n=void 0;try{for(var r,i=this.actions_.childNodes[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)r.value.disabled=!0}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}else{this.progressBar_.classList.add("hidden");var a=!0,s=!1,o=void 0;try{for(var u,l=this.actions_.childNodes[Symbol.iterator]();!(a=(u=l.next()).done);a=!0)u.value.disabled=!1}catch(e){s=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(s)throw o}}}this.progressBar_.setAttribute("value",this.asset_.storedProgress)}},{key:"addButton",value:function(e,t){var n=document.createElement("button");return n.classList.add("mdl-button"),n.classList.add("mdl-button--colored"),n.classList.add("mdl-js-button"),n.classList.add("mdl-js-ripple-effect"),n.textContent=e,n.addEventListener("click",function(){n.hasAttribute("disabled")||t()}),this.actions_.appendChild(n),n}}])&&ci(t.prototype,n),r&&ci(t,r),e}();function fi(e){return(fi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pi(e,t){return!t||"object"!==fi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function mi(e){return(mi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vi(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yi(e,t)}function yi(e,t){return(yi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var bi=function(){function e(t,n,r,i,a){var s=this;if(gi(this,e),this.container_=document.createElement(r),t.latestElementContainer.appendChild(this.container_),this.input_=document.createElement(n),this.input_.onchange=function(){a(s.input_)},this.input_.id=e.generateNewId_("input"),this.container_.appendChild(this.input_),t.latestTooltip){var o=document.createElement("span");o.textContent=t.latestTooltip,o.classList.add("hidden"),o.id=e.generateNewId_("extra-info"),this.container_.appendChild(o),this.input_.setAttribute("aria-describedby",o.id)}this.extra_=null,i&&(this.extra_=document.createElement(i),this.container_.appendChild(this.extra_))}var t,n,r;return t=e,r=[{key:"generateNewId_",value:function(t){var n=e.lastId_;return e.lastId_+=1,t+"-labeled-"+n}}],(n=[{key:"input",value:function(){return this.input_}},{key:"container",value:function(){return this.container_}},{key:"extra",value:function(){return this.extra_}}])&&_i(t.prototype,n),r&&_i(t,r),e}();bi.lastId_=0;var wi=function(e){function t(e,n,r,i){var a;gi(this,t),(a=pi(this,mi(t).call(this,e,"select","div","label",r))).container_.classList.add("mdl-textfield"),a.container_.classList.add("mdl-js-textfield"),a.container_.classList.add("mdl-textfield--floating-label"),a.input_.classList.add("mdl-textfield__input"),a.extra_.classList.add("mdl-textfield__label"),a.extra_.setAttribute("for",a.input_.id);for(var s=0,o=Object.keys(i);s<o.length;s++){var u=o[s],l=document.createElement("option");l.textContent=i[u],l.value=u,a.input_.appendChild(l)}return a}return vi(t,bi),t}(),Ei=function(e){function t(e,n,r){var i;return gi(this,t),(i=pi(this,mi(t).call(this,e,"input","label","span",r))).input_.type="checkbox",i.container_.classList.add("mdl-switch"),i.container_.classList.add("mdl-js-switch"),i.container_.classList.add("mdl-js-ripple-effect"),i.container_.setAttribute("for",i.input_.id),i.input_.classList.add("mdl-switch__input"),i.extra_.classList.add("mdl-switch__label"),i}return vi(t,bi),t}(),Si=function(e){function t(e,n,r){var i;return gi(this,t),(i=pi(this,mi(t).call(this,e,"input","div","label",r))).container_.classList.add("mdl-textfield"),i.container_.classList.add("mdl-js-textfield"),i.container_.classList.add("mdl-textfield--floating-label"),i.input_.classList.add("mdl-textfield__input"),i.extra_.classList.add("mdl-textfield__label"),i.extra_.setAttribute("for",i.input_.id),i}return vi(t,bi),t}(),Ti=function(e){function t(e,n,r,i){var a;gi(this,t),a=pi(this,mi(t).call(this,e,n,r));try{var o=new s.a(a.input_);o.list=i.slice(),o.minChars=0,a.input_.addEventListener("focus",function(){o.evaluate()})}catch(e){console.log({Awesomplete:s.a})}return a}return vi(t,Si),t}(),Ci=function(e){function t(e,n,r,i,a,s){var o;gi(this,t),o=pi(this,mi(t).call(this,e,n,r));var u=document.createElement("span");return u.classList.add("mdl-textfield__error"),o.container_.appendChild(u),u.textContent="Must be a positive",o.input_.pattern="(Infinity|",a?o.input_.pattern+="[0-9]*":(o.input_.pattern+="[0-9]*[1-9][0-9]*",u.textContent+=", nonzero"),i?(o.input_.pattern+="(.[0-9]+)?",u.textContent+=" number."):u.textContent+=" integer.",o.input_.pattern+=")",s&&(o.input_.pattern+="?"),o}return vi(t,Si),t}();function ki(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ii=function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.style_=r,this.header_,this.table_=document.createElement("div"),this.latestRow_,this.latestElementContainer,this.latestTooltip,this.numRows_=0,n&&this.createHeader_(t,n),this.table_.classList.add(r),r==e.Style.ACCORDION&&this.table_.classList.add("hidden"),t.appendChild(this.table_),i&&this.addDocLink_(this.table_,i)}var t,n,r;return t=e,(n=[{key:"getIsOpen",value:function(){return this.style_==e.Style.ACCORDION&&this.table_.classList.contains("show")}},{key:"open",value:function(){var t=this;!this.style_!=e.Style.ACCORDION&&(this.table_.classList.remove("hidden"),setTimeout(function(){t.table_.classList.add("show")},20),this.header_.classList.add("mdl-button--colored"))}},{key:"close",value:function(){var t=this;this.style_==e.Style.ACCORDION&&(this.table_.classList.remove("show"),this.table_.addEventListener("transitionend",function(e){t.table_.classList.add("hidden")},{once:!0}),this.header_.classList.remove("mdl-button--colored"))}},{key:"createHeader_",value:function(t,n){var r=this;this.style_==e.Style.ACCORDION?(this.header_=document.createElement("button"),this.header_.classList.add("mdl-button--raised"),this.header_.classList.add("mdl-button"),this.header_.classList.add("mdl-js-button"),this.header_.classList.add("mdl-js-ripple-effect"),this.header_.addEventListener("click",function(){r.getIsOpen()?r.close():r.open()})):this.header_=document.createElement("h3"),this.header_.textContent=n,t.appendChild(this.header_)}},{key:"addDocLink_",value:function(e,t){var n=document.createElement("a");n.href=t,n.target="_blank",n.classList.add("mdl-button"),n.classList.add("mdl-js-button"),n.classList.add("mdl-js-ripple-effect"),n.classList.add("mdl-button--colored");var r=document.createElement("i");r.classList.add("material-icons"),r.textContent="help",n.appendChild(r),e.appendChild(n)}},{key:"addRow",value:function(e,t,n){this.latestRow_=document.createElement("div"),n&&this.latestRow_.classList.add(n),this.table_.appendChild(this.latestRow_);var r="input-container-row-"+this.numRows_;if(this.numRows_+=1,e){var i=document.createElement("label");i.setAttribute("for",r),i.classList.add("input-container-label");var a=document.createElement("b");a.textContent=e,i.appendChild(a),this.latestRow_.appendChild(i)}this.latestElementContainer=document.createElement("div"),this.latestRow_.appendChild(this.latestElementContainer),this.latestElementContainer.classList.add("input-container-row"),this.latestElementContainer.id=r,this.latestTooltip=t,t&&(ve.make(this.latestRow_,t),this.latestRow_.setAttribute("tabindex",-1),this.latestRow_.classList.add("borderless"))}}])&&ki(t.prototype,n),r&&ki(t,r),e}();function Ai(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Li(e,t,n){return t&&Ai(e.prototype,t),n&&Ai(e,n),e}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ii.Style={VERTICAL:"input-container-style-vertical",ACCORDION:"input-container-style-accordion",FLEX:"input-container-style-flex"};var xi=F.util.Dom,Ri=(window.shaka,function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.assetCards_=[],this.messageDiv_=document.createElement("div"),this.assetCardDiv_=document.createElement("div"),t.appendChild(this.messageDiv_),this.makeMessage_(),t.appendChild(this.assetCardDiv_),document.addEventListener("shaka-main-selected-asset-changed",function(){n.updateSelected_()}),document.addEventListener("shaka-main-offline-progress",function(){n.updateOfflineProgress_()}),document.addEventListener("shaka-main-page-changed",function(){n.assetCardDiv_.childNodes.length||t.classList.contains("hidden")||n.remakeAssetCards_()})}return Li(e,null,[{key:"init",value:function(){var t=ai.addNavButton("front");new e(t)}}]),Li(e,[{key:"makeMessage_",value:function(){var e=this,t="shakaPlayerHideFrontMessage";if(!window.localStorage.getItem(t)){var n=function(t,n){var r=document.createElement("h2");r.classList.add("mdl-typography--"+t),r.textContent=n,e.messageDiv_.appendChild(r)};n("body-2","This is a demo of Google's Shaka Player, a JavaScript library for adaptive video streaming."),n("body-1","Choose a video to playback; more assets are available via the search tab.");var r=document.createElement("button");r.classList.add("mdl-button"),r.classList.add("mdl-button--colored"),r.classList.add("mdl-js-button"),r.classList.add("mdl-js-ripple-effect"),r.textContent="Dismiss",r.addEventListener("click",function(){xi.removeAllChildren(e.messageDiv_),window.localStorage.setItem(t,"true")}),this.messageDiv_.appendChild(r)}}},{key:"remakeAssetCards_",value:function(){var e=this;xi.removeAllChildren(this.assetCardDiv_);var t=de.testAssets.filter(function(e){return e.isFeatured&&!e.disabled});console.log(t),this.assetCards_=t.map(function(t){return e.createAssetCardFor_(t,e.assetCardDiv_)}),this.updateSelected_()}},{key:"createAssetCardFor_",value:function(e,t){var n=this;return new hi(t,e,!0,function(t){var r=ai.getAssetUnsupportedReason(e,!1);r?t.markAsUnsupported(r):(t.addButton("Play",function(){ai.loadAsset(e),n.updateSelected_()}),t.addStoreButton())})}},{key:"updateOfflineProgress_",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.assetCards_[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value.updateProgress()}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},{key:"updateSelected_",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.assetCards_[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value.selectByAsset(ai.selectedAsset)}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}}]),e}());function Ni(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mi(e,t,n){return t&&Ni(e.prototype,t),n&&Ni(e,n),e}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */document.addEventListener("shaka-main-loaded",Ri.init);var Pi=F.util.Dom,Oi=(window.shaka,function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.desiredFeatures_=[],this.desiredSource_,this.desiredDRM_,this.makeSearchDiv_(t),this.assetCards_=[],this.resultsDiv_=document.createElement("div"),t.appendChild(this.resultsDiv_),document.addEventListener("shaka-main-selected-asset-changed",function(){n.updateSelected_()}),document.addEventListener("shaka-main-offline-progress",function(){n.updateOfflineProgress_()}),document.addEventListener("shaka-main-page-changed",function(){n.resultsDiv_.childNodes.length||t.classList.contains("hidden")||n.remakeResultsDiv_()})}return Mi(e,null,[{key:"init",value:function(){var t=ai.addNavButton("search");new e(t)}}]),Mi(e,[{key:"createAssetCardFor_",value:function(e){var t=this,n=this.resultsDiv_;return new hi(n,e,!1,function(n){var r=ai.getAssetUnsupportedReason(e,!1);r?n.markAsUnsupported(r):(n.addButton("Play",function(){ai.loadAsset(e),t.updateSelected_()}),n.addStoreButton())})}},{key:"updateOfflineProgress_",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.assetCards_[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value.updateProgress()}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},{key:"updateSelected_",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.assetCards_[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value.selectByAsset(ai.selectedAsset)}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},{key:"remakeResultsDiv_",value:function(){var e=this;Pi.removeAllChildren(this.resultsDiv_);var t=this.searchResults_();this.assetCards_=t.map(function(t){return e.createAssetCardFor_(t)}),this.updateSelected_()}},{key:"addDesiredTerm_",value:function(t,n,r){switch(n){case e.TermType.DRM:this.desiredDRM_=t;break;case e.TermType.SOURCE:this.desiredSource_=t;break;case e.TermType.FEATURE:var i=!0,a=!1,s=void 0;try{for(var o,u=r[Symbol.iterator]();!(i=(o=u.next()).done);i=!0){var l=o.value,c=this.desiredFeatures_.indexOf(l);-1!=c&&this.desiredFeatures_.splice(c,1)}}catch(e){a=!0,s=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw s}}this.desiredFeatures_.push(t)}}},{key:"removeDesiredTerm_",value:function(t,n){var r;switch(n){case e.TermType.DRM:this.desiredDRM_=null;break;case e.TermType.SOURCE:this.desiredSource_=null;break;case e.TermType.FEATURE:-1!=(r=this.desiredFeatures_.indexOf(t))&&this.desiredFeatures_.splice(r,1)}}},{key:"makeBooleanInput_",value:function(e,t,n){var r=this;e.addRow(t,null,"significant-right-padding");new Ei(e,t,function(e){e.checked?r.addDesiredTerm_(t,n,[t]):r.removeDesiredTerm_(t,n),r.remakeResultsDiv_(),componentHandler.upgradeDom()})}},{key:"makeSelectInput_",value:function(e,t,n,r){var i=this;e.addRow(null,null);var a={},s=!0,o=!1,u=void 0;try{for(var l,c=n[Symbol.iterator]();!(s=(l=c.next()).done);s=!0){var d=l.value;if("DRM"==r){for(var h in de.KeySystem)if(de.KeySystem[h]==d){a[d]=h.split("_").map(function(e){return e[0]+e.substr(1).toLowerCase()}).join(" ");break}}else a[d]=d}}catch(e){o=!0,u=e}finally{try{s||null==c.return||c.return()}finally{if(o)throw u}}a.Unspecified="Unspecified";var f="Unspecified",p=new wi(e,t,function(e){"Unspecified"!=e.value?i.addDesiredTerm_(e.value,r,n):i.removeDesiredTerm_(f,r),f=e.value,i.remakeResultsDiv_(),componentHandler.upgradeDom()},a);p.extra().textContent=t,p.input().value="Unspecified"}},{key:"makeSearchDiv_",value:function(t){var n=de.Feature,r=e.TermType.FEATURE,i=e.TermType.DRM,a=e.TermType.SOURCE,s=new Ii(t,null,Ii.Style.FLEX,null);this.makeSelectInput_(s,"Manifest",[n.DASH,n.HLS],r),this.makeSelectInput_(s,"Container",[n.MP4,n.MP2TS,n.WEBM],r),this.makeSelectInput_(s,"DRM",Object.values(de.KeySystem),i),this.makeSelectInput_(s,"Source",Object.values(de.Source).filter(function(e){return"Custom"!=e}),a);var o=Ii.Style.FLEX,u=new Ii(t,null,o,null);this.makeBooleanInput_(u,n.LIVE,r),this.makeBooleanInput_(u,n.HIGH_DEFINITION,r),this.makeBooleanInput_(u,n.XLINK,r),this.makeBooleanInput_(u,n.SUBTITLES,r),this.makeBooleanInput_(u,n.TRICK_MODE,r),this.makeBooleanInput_(u,n.SURROUND,r),this.makeBooleanInput_(u,n.OFFLINE,r),this.makeBooleanInput_(u,n.STORED,r)}},{key:"searchResults_",value:function(){var e=this;return de.testAssets.filter(function(t){if(t.disabled)return!1;if(e.desiredDRM_&&!t.drm.includes(e.desiredDRM_))return!1;if(e.desiredSource_&&t.source!=e.desiredSource_)return!1;var n=!0,r=!1,i=void 0;try{for(var a,s=e.desiredFeatures_[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;if(o==de.Feature.STORED){if(!t.isStored())return!1}else if(!t.features.includes(o))return!1}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return!0})}}]),e}());function Di(e,t,n,r,i,a,s){try{var o=e[a](s),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,i)}function Ui(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function s(e){Di(a,r,i,s,o,"next",e)}function o(e){Di(a,r,i,s,o,"throw",e)}s(void 0)})}}function Fi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bi(e,t,n){return t&&Fi(e.prototype,t),n&&Fi(e,n),e}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Oi.SearchTerm={},Oi.TermType={FEATURE:"Feature",DRM:"DRM",SOURCE:"Source"},document.addEventListener("shaka-main-loaded",Oi.init);var Vi=F.util.Dom,ji=(window.shaka,function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dialog_=document.createElement("dialog"),this.dialog_.classList.add("mdl-dialog"),t.appendChild(this.dialog_),this.dialog_.showModal||oi.registerDialog(this.dialog_),this.assets_=this.loadAssetInfos_(),this.assetCards_=[],this.savedList_=document.createElement("div"),t.appendChild(this.savedList_);var r=document.createElement("div");r.classList.add("add-button-container"),t.appendChild(r);var i=this.makeButton_("add",!0,function(){n.showAssetDialog_(le.makeBlankAsset())});r.appendChild(i),document.addEventListener("shaka-main-selected-asset-changed",function(){n.updateSelected_()}),document.addEventListener("shaka-main-offline-progress",function(){n.updateOfflineProgress_()}),document.addEventListener("shaka-main-page-changed",function(){n.savedList_.childNodes.length||t.classList.contains("hidden")||n.remakeSavedList_()})}return Bi(e,null,[{key:"init",value:function(){var t=ai.addNavButton("custom");new e(t)}}]),Bi(e,[{key:"assets",value:function(){return Array.from(this.assets_)}},{key:"updateOfflineProgress_",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.assetCards_[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value.updateProgress()}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},{key:"showAssetDialog_",value:function(e){var t=this;Vi.removeAllChildren(this.dialog_);var n=document.createElement("div");this.dialog_.appendChild(n);var r=document.createElement("div");this.dialog_.appendChild(r);var i,a,s=[],o=function(){var t=i.value,n=a.value;if(t){e.licenseServers.clear();var r=!0,s=!1,o=void 0;try{for(var u,l=ShakaDemoMain.commonDrmSystems[Symbol.iterator]();!(r=(u=l.next()).done);r=!0){var c=u.value;e.licenseServers.set(c,t)}}catch(e){s=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(s)throw o}}n&&e.licenseServers.set(n,t)}else e.licenseServers.clear()},u=Ii.Style.VERTICAL,l=new Ii(n,null,u,null),c=function(e,t,n){l.addRow(null,null);var r=new Si(l,e,n);r.extra().textContent=e,t(r.input(),r.container())};c("Manifest URL",function(t,n){t.value=e.manifestUri,s.push(t);var r=document.createElement("span");r.classList.add("mdl-textfield__error"),r.textContent="Must have a manifest URL.",n.appendChild(r),t.required=!0,t.pattern="^(?!([\r\n\t\f\v ]+)$).*$"},function(t){e.manifestUri=t.value});c("Custom License Server URL",function(t,n){i=t;var r=e.licenseServers.keys().next();r&&r.value&&(t.value=e.licenseServers.get(r.value))},function(e){o()});c("Custom License Certificate URL",function(t,n){e.certificateUri&&(t.value=e.certificateUri)},function(t){e.certificateUri=t.value});c("Custom DRM System",function(t,n){a=t;var r=e.licenseServers.keys(),i=!0,s=!1,o=void 0;try{for(var u,l=r[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var c=u.value;if(!ShakaDemoMain.commonDrmSystems.includes(c)){t.value=c;break}}}catch(e){s=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(s)throw o}}},function(e){o()});c("Name",function(n,r){n.value=e.name,s.push(n);var i=document.createElement("span");i.classList.add("mdl-textfield__error"),i.textContent="Must be a unique name.",r.appendChild(i),n.required=!0,n.pattern="^(?!( *";var a=!0,o=!1,u=void 0;try{for(var l,c=t.assets_[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var d=l.value;if(d!=e){n.pattern+="|"+function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(d.name)}}}catch(e){o=!0,u=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw u}}n.pattern+=")$).*$"},function(t){e.name=t.value});c("Icon URL",function(t,n){if(e.iconUri){t.value=e.iconUri;var i=document.createElement("img");i.src=t.value,i.alt="",r.appendChild(i)}},function(t){if(Vi.removeAllChildren(r),e.iconUri=t.value,t.value){var n=document.createElement("img");n.src=t.value,n.alt="",r.appendChild(n)}});var d=document.createElement("tr");n.appendChild(d),d.appendChild(this.makeButton_("Save",!1,function(){for(var n=0,r=s;n<r.length;n++){if(!r[n].validity.valid)return}ai.setupOfflineSupport(e),t.assets_.add(e),t.saveAssetInfos_(t.assets_),t.remakeSavedList_(),t.dialog_.close()})),d.appendChild(this.makeButton_("Cancel",!1,function(){t.dialog_.close()})),componentHandler.upgradeDom(),this.dialog_.showModal()}},{key:"loadAssetInfos_",value:function(){var t=window.localStorage.getItem(e.saveId_);if(t){var n=JSON.parse(t);return new Set(n.map(function(e){var t=le.fromJSON(e);return ai.setupOfflineSupport(t),t}))}return new Set}},{key:"saveAssetInfos_",value:function(t){var n=e.saveId_,r=Array.from(t);window.localStorage.setItem(n,JSON.stringify(r))}},{key:"makeButton_",value:function(e,t,n){var r=document.createElement("button");if(t){r.classList.add("mdl-button--fab"),r.classList.add("mdl-button--colored");var i=document.createElement("i");i.classList.add("material-icons"),i.textContent=e,r.appendChild(i)}else r.textContent=e,r.classList.add("mdl-button--raised");return r.addEventListener("click",n),r.classList.add("mdl-button"),r.classList.add("mdl-js-button"),r.classList.add("mdl-js-ripple-effect"),r}},{key:"createAssetCardFor_",value:function(e){var t=this,n=this.savedList_;return new AssetCard(n,e,!1,function(n){n.addButton("Play",function(){ai.loadAsset(e),t.updateSelected_()}),n.addButton("Edit",Ui(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.unstoreCallback){n.next=3;break}return n.next=3,e.unstoreCallback();case 3:t.showAssetDialog_(e);case 4:case"end":return n.stop()}},n)}))),n.addButton("Delete",Ui(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.assets_.delete(e),!e.unstoreCallback){n.next=4;break}return n.next=4,e.unstoreCallback();case 4:t.saveAssetInfos_(t.assets_),t.remakeSavedList_();case 6:case"end":return n.stop()}},n)}))),n.addStoreButton()})}},{key:"updateSelected_",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.assetCards_[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value.selectByAsset(ai.selectedAsset)}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},{key:"remakeSavedList_",value:function(){var e=this;if(Vi.removeAllChildren(this.savedList_),0==this.assets_.size){var t=function(t,n){var r=document.createElement("h2");r.classList.add("mdl-typography--"+t),r.textContent=n,e.savedList_.appendChild(r)};t("title","Try Shaka Player with your own content!"),t("body-2","Press the button below to add a custom asset."),t("body-1","Custom assets will remain even after reloading the page.")}else this.assetCards_=Array.from(this.assets_).map(function(t){return e.createAssetCardFor_(t)}),this.updateSelected_()}}]),e}());function Hi(e){return(Hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ki(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gi(e,t,n){return t&&Ki(e.prototype,t),n&&Ki(e,n),e}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ji.saveId_="shakaPlayerDemoSavedAssets",document.addEventListener("shaka-main-loaded",ji.init);var qi=F.util.Dom,Wi=window.shaka,zi=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container_=t,this.sections_=[],this.latestInput_=null,this.addedFields_=new Set,this.reload_(),document.addEventListener("shaka-main-config-change",function(){n.reloadAndSaveState_()}),document.addEventListener("shaka-main-drawer-state-change",function(){n.setContentAvailability_(ai.getIsDrawerOpen())}),this.setContentAvailability_(ai.getIsDrawerOpen())}return Gi(e,null,[{key:"init",value:function(){var t=ai.getHamburgerMenu();new e(t)}}]),Gi(e,[{key:"setContentAvailability_",value:function(e){e?this.container_.classList.remove("hidden"):this.container_.classList.add("hidden")}},{key:"reload_",value:function(){qi.removeAllChildren(this.container_),this.sections_=[],this.addMetaSection_(),this.addLanguageSection_(),this.addAbrSection_(),this.addOfflineSection_(),this.addDrmSection_(),this.addStreamingSection_(),this.addManifestSection_(),this.addRetrictionsSection_("",""),this.checkSectionCompleteness_(),this.checkSectionValidity_()}},{key:"reloadAndSaveState_",value:function(){var e=this.sections_.map(function(e){return e.getIsOpen()});this.reload_();for(var t=0;t<e.length;t++){var n=e[t],r=this.sections_[t];n&&r.open()}$r.upgradeDom()}},{key:"addDrmSection_",value:function(){var e=this,t=this.resolveExternLink_(".DrmConfiguration");this.addSection_("DRM",t).addBoolInput_("Delay License Request Until Played","drm.delayLicenseRequestUntilPlayed");var n=ai.getConfiguration().drm.advanced||{},r=["SW_SECURE_CRYPTO","SW_SECURE_DECODE","HW_SECURE_CRYPTO","HW_SECURE_DECODE","HW_SECURE_ALL"],i=function(t,i){e.addDatalistInput_(t,r,function(e){for(var t in n)n[t][i]=e.value;ai.configure("drm.advanced",n),ai.remakeHash()});var a=Object.keys(n)[0];if(a){var s=n[a][i];e.latestInput_.input().value=s}};i("Video Robustness","videoRobustness"),i("Audio Robustness","audioRobustness"),this.addRetrySection_("drm","DRM")}},{key:"addManifestSection_",value:function(){var e=this.resolveExternLink_(".ManifestConfiguration");this.addSection_("Manifest",e).addBoolInput_("Ignore DASH DRM Info","manifest.dash.ignoreDrmInfo").addBoolInput_("Auto-Correct DASH Drift","manifest.dash.autoCorrectDrift").addBoolInput_("Xlink Should Fail Gracefully","manifest.dash.xlinkFailGracefully").addNumberInput_("Availability Window Override","manifest.availabilityWindowOverride",!0,!1,!0).addTextInput_("Clock Sync URI","manifest.dash.clockSyncUri").addBoolInput_("Ignore DRM Info","manifest.dash.ignoreDrmInfo").addNumberInput_("Default Presentation Delay","manifest.dash.defaultPresentationDelay").addBoolInput_("Ignore Min Buffer Time","manifest.dash.ignoreMinBufferTime"),this.addRetrySection_("manifest","Manifest")}},{key:"addAbrSection_",value:function(){var e=this.resolveExternLink_(".AbrConfiguration");this.addSection_("Adaptation",e).addBoolInput_("Enabled","abr.enabled").addNumberInput_("Default Bandwidth Estimate","abr.defaultBandwidthEstimate").addNumberInput_("Bandwidth Downgrade Target","abr.bandwidthDowngradeTarget",!0).addNumberInput_("Bandwidth Upgrade Target","abr.bandwidthUpgradeTarget",!0).addNumberInput_("Switch Interval","abr.switchInterval",!0),this.addRetrictionsSection_("abr","Adaptation")}},{key:"addRetrictionsSection_",value:function(e,t){var n=(e?e+".":"")+"restrictions.",r=(t?t+" ":"")+"Restrictions",i=this.resolveExternLink_(".Restrictions");this.addSection_(r,i).addNumberInput_("Min Width",n+"minWidth").addNumberInput_("Max Width",n+"maxWidth").addNumberInput_("Min Height",n+"minHeight").addNumberInput_("Max Height",n+"maxHeight").addNumberInput_("Min Pixels",n+"minPixels").addNumberInput_("Max Pixels",n+"maxPixels").addNumberInput_("Min Bandwidth",n+"minBandwidth").addNumberInput_("Max Bandwidth",n+"maxBandwidth")}},{key:"addRetrySection_",value:function(e,t){var n=e+".retryParameters.",r=this.resolveExternLink_(".RetryParameters");this.addSection_(t+" Retry Parameters",r).addNumberInput_("Max Attempts",n+"maxAttempts").addNumberInput_("Base Delay",n+"baseDelay",!0).addNumberInput_("Backoff Factor",n+"backoffFactor",!0).addNumberInput_("Fuzz Factor",n+"fuzzFactor",!0).addNumberInput_("Timeout",n+"timeout",!0)}},{key:"addOfflineSection_",value:function(){var e=this.resolveExternLink_(".OfflineConfiguration");this.addSection_("Offline",e).addBoolInput_("Use Persistent Licenses","offline.usePersistentLicense")}},{key:"addStreamingSection_",value:function(){var e=this.resolveExternLink_(".StreamingConfiguration");if(this.addSection_("Streaming",e).addNumberInput_("Maximum Small Gap Size","streaming.smallGapLimit",!0).addNumberInput_("Buffering Goal","streaming.bufferingGoal",!0).addNumberInput_("Duration Backoff","streaming.durationBackoff",!0).addNumberInput_("Rebuffering Goal","streaming.rebufferingGoal",!0).addNumberInput_("Buffer Behind","streaming.bufferBehind",!0).addNumberInput_("Safe Seek Offset","streaming.safeSeekOffset",!0).addNumberInput_("Stall Threshold","streaming.stallThreshold",!0).addNumberInput_("Safe Skip Distance","streaming.stallSkip",!0),ai.getNativeControlsEnabled()){this.addCustomBoolInput_("Always Stream Text",function(e){},"Text must always be streamed while native controls are enabled, for captions to work."),this.latestInput_.input().disabled=!0,this.latestInput_.input().checked=!0}else this.addBoolInput_("Always Stream Text","streaming.alwaysStreamText");this.addBoolInput_("Jump Large Gaps","streaming.jumpLargeGaps").addBoolInput_("Force Transmux TS","streaming.forceTransmuxTS").addBoolInput_("Start At Segment Boundary","streaming.startAtSegmentBoundary").addBoolInput_("Ignore Text Stream Failures","streaming.ignoreTextStreamFailures").addBoolInput_("Stall Detector Enabled","streaming.stallEnabled"),this.addRetrySection_("streaming","Streaming")}},{key:"addLanguageSection_",value:function(){var e=this.resolveExternLink_(".PlayerConfiguration");this.addSection_("Language",e).addTextInput_("Preferred Audio Language","preferredAudioLanguage").addTextInput_("Preferred Text Language","preferredTextLanguage");this.addCustomTextInput_("Preferred UI Locale",function(e){ai.setUILocale(e.value)}),this.latestInput_.input().value=ai.getUILocale(),this.addNumberInput_("Preferred Audio Channel Count","preferredAudioChannelCount")}},{key:"addMetaSection_",value:function(){var e=this;if(this.addSection_("",null),this.addCustomBoolInput_("Shaka Controls",function(t){ai.setNativeControlsEnabled(!t.checked),t.checked&&(ai.configure("streaming.alwaysStreamText",!0),ai.remakeHash()),e.reloadAndSaveState_()}),ai.getNativeControlsEnabled()||(this.latestInput_.input().checked=!0),Wi.log){var t=Wi.log.Level,n=Wi.log.setLevel;this.addSelectInput_("Log Level",{info:"Info",debug:"Debug",v:"Verbose",vv:"Very Verbose"},function(e){switch(e.value){case"info":n(t.INFO);break;case"debug":n(t.DEBUG);break;case"vv":n(t.V2);break;case"v":n(t.V1)}ai.remakeHash()});var r=this.latestInput_.input();switch(Wi.log.currentLevel){case t.DEBUG:r.value="debug";break;case t.V2:r.value="vv";break;case t.V1:r.value="v";break;default:r.value="info"}}}},{key:"resolveExternLink_",value:function(e){return"../docs/api/shaka.extern.html#"+e}},{key:"addSection_",value:function(e,t){var n=e?Ii.Style.ACCORDION:Ii.Style.VERTICAL;return this.sections_.push(new Ii(this.container_,e,n,t)),this}},{key:"addBoolInput_",value:function(e,t,n){return this.addCustomBoolInput_(e,function(e){ai.configure(t,e.checked),ai.remakeHash()},n),ai.getCurrentConfigValue(t)&&(this.latestInput_.input().checked=!0),this.addedFields_.add(t),this}},{key:"addCustomBoolInput_",value:function(e,t,n){return this.createRow_(e,n),this.latestInput_=new Ei(this.getLatestSection_(),e,t),this}},{key:"addTextInput_",value:function(e,t,n){return this.addCustomTextInput_(e,function(e){ai.configure(t,e.value),ai.remakeHash()},n),this.latestInput_.input().value=ai.getCurrentConfigValue(t),this.addedFields_.add(t),this}},{key:"addCustomTextInput_",value:function(e,t,n){return this.createRow_(e,n),this.latestInput_=new Si(this.getLatestSection_(),e,t),this}},{key:"addNumberInput_",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5?arguments[5]:void 0,s=function(e){if(ai.resetConfiguration(t),ai.remakeHash(),"Infinity"==e.value)return ai.configure(t,1/0),void ai.remakeHash();if(""!=e.value||!i){var a=Number(e.value);if((0!=a||r)&&!isNaN(a)){if(Math.floor(a)!=a&&!n)return;ai.configure(t,a),ai.remakeHash()}}};return this.createRow_(e,a),this.latestInput_=new Ci(this.getLatestSection_(),e,s,n,r,i),this.latestInput_.input().value=ai.getCurrentConfigValue(t),isNaN(Number(this.latestInput_.input().value))&&i&&(this.latestInput_.input().value=""),this.addedFields_.add(t),this}},{key:"addDatalistInput_",value:function(e,t,n,r){return this.createRow_(e,r),this.latestInput_=new Ti(this.getLatestSection_(),e,n,t),this}},{key:"addSelectInput_",value:function(e,t,n,r){return this.createRow_(e,r),this.latestInput_=new wi(this.getLatestSection_(),e,n,t),this}},{key:"createRow_",value:function(e,t){this.getLatestSection_().addRow(e,t||null)}},{key:"checkSectionCompleteness_",value:function(){var e=this,t=new Set(["number","string","boolean"]);!function n(r,i){for(var a in r){var s=i?i+"."+a:a,o=r[a];t.has(Hi(o))?e.addedFields_.has(s)||console.warn("WARNING: Does not have config field for "+s):n(o,s)}}(ai.getConfiguration(),"")}},{key:"checkSectionValidity_",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.addedFields_[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var a=r.value;null==ai.getCurrentConfigValue(a)&&console.warn("WARNING: Invalid config field "+a)}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},{key:"getLatestSection_",value:function(){return window.asserts.assert(this.sections_.length>0,"Must have at least one section."),this.sections_[this.sections_.length-1]}}]),e}();function Yi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}document.addEventListener("shaka-main-loaded",zi.init);
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka;var Xi=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.libraryVersion_=t,this.onPending_=n,this.onExpired_=r}var t,n,r;return t=e,(n=[{key:"enforce",value:function(e,t,n){(e.compareTo(this.libraryVersion_)>0?this.onPending_:this.onExpired_)(this.libraryVersion_,e,t,n)}}])&&Yi(t.prototype,n),r&&Yi(t,r),e}();function $i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka;var Zi=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.major_=t,this.minor_=n}var t,n,r;return t=e,r=[{key:"parse",value:function(t){var n=t.substring(1).split(".",2);return new e(Number(n[0]),Number(n[1]))}}],(n=[{key:"major",value:function(){return this.major_}},{key:"minor",value:function(){return this.minor_}},{key:"compareTo",value:function(e){var t=this.major_-e.major_,n=this.minor_-e.minor_;return t||n}},{key:"toString",value:function(){return"v"+this.major_+"."+this.minor_}}])&&$i(t.prototype,n),r&&$i(t,r),e}();function Qi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ji=window.shaka;window.goog;function ea(e){return(ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ta(e,t,n,r,i,a,s){try{var o=e[a](s),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,i)}function na(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function s(e){ta(a,r,i,s,o,"next",e)}function o(e){ta(a,r,i,s,o,"throw",e)}s(void 0)})}}function ra(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ia(e,t){return!t||"object"!==ea(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function aa(e){return(aa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sa(e,t){return(sa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"init",value:function(t){window.asserts.assert(null==e.enforcer_,"Deprecate.init should only be called once."),e.enforcer_=new Xi(Zi.parse(t),e.onPending_,e.onExpired_)}},{key:"deprecateFeature",value:function(t,n,r,i){var a=e.enforcer_;window.asserts.assert(a,"Missing deprecation enforcer. Was |init| called?");var s=new e.Version(t,n);a.enforce(s,r,i)}},{key:"onPending_",value:function(e,t,n,r){Ji.log.alwaysWarn([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",r].join(" "))}},{key:"onExpired_",value:function(e,t,n,r){var i=[n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",r].join("");Ji.log.alwaysError(i),window.asserts.assert(!1,i)}}],(n=null)&&Qi(t.prototype,n),r&&Qi(t,r),e}()).enforcer_=null;var oa=window.shaka,ua=function(e){function t(e,n,r,i){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=ia(this,aa(t).call(this))).video_=e,a.player_=n,a.eventManager_=new EventManager,a.targets_={video:e,player:n},a.appDataCallback_=r||function(){},a.contentIdCallback_=i||function(e){return e},a.isConnected_=!1,a.isIdle_=!0,a.updateNumber_=0,a.startUpdatingUpdateNumber_=!1,a.initialStatusUpdatePending_=!0,a.shakaBus_=null,a.genericBus_=null,a.pollTimer_=new Timer(function(){a.pollAttributes_()}),a.init_(),a}var n,r,i,a,s,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sa(e,t)}(t,k),n=t,(r=[{key:"isConnected",value:function(){return this.isConnected_}},{key:"isIdle",value:function(){return this.isIdle_}},{key:"destroy",value:(o=na(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.eventManager_&&(this.eventManager_.release(),this.eventManager_=null),t=[],this.player_&&(t.push(this.player_.destroy()),this.player_=null),this.pollTimer_&&(this.pollTimer_.stop(),this.pollTimer_=null),this.video_=null,this.targets_=null,this.appDataCallback_=null,this.isConnected_=!1,this.isIdle_=!0,this.shakaBus_=null,this.genericBus_=null,e.next=13,Promise.all(t);case 13:cast.receiver.CastReceiverManager.getInstance().stop();case 15:case"end":return e.stop()}},e,this)})),function(){return o.apply(this,arguments)})},{key:"init_",value:function(){var e=this,t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return e.onSendersChanged_()},t.onSenderDisconnected=function(){return e.onSendersChanged_()},t.onSystemVolumeChanged=function(){return e.fakeVolumeChangeEvent_()},this.genericBus_=t.getCastMessageBus(CastUtils.GENERIC_MESSAGE_NAMESPACE),this.genericBus_.onMessage=function(t){return e.onGenericMessage_(t)},this.shakaBus_=t.getCastMessageBus(CastUtils.SHAKA_MESSAGE_NAMESPACE),this.shakaBus_.onMessage=function(t){return e.onShakaMessage_(t)},goog.DEBUG?Platform.isChromecast()&&t.start():t.start();var n=!0,r=!1,i=void 0;try{for(var a,s=CastUtils.VideoEvents[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;this.eventManager_.listen(this.video_,o,function(t){return e.proxyEvent_("video",t)})}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}var u=!0,l=!1,c=void 0;try{for(var d,h=CastUtils.PlayerEvents[Symbol.iterator]();!(u=(d=h.next()).done);u=!0){var f=d.value;this.eventManager_.listen(this.player_,f,function(t){return e.proxyEvent_("player",t)})}}catch(e){l=!0,c=e}finally{try{u||null==h.return||h.return()}finally{if(l)throw c}}cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?this.player_.setMaxHardwareResolution(3840,2160):this.player_.setMaxHardwareResolution(1920,1080),this.eventManager_.listen(this.video_,"loadeddata",function(){e.startUpdatingUpdateNumber_=!0}),this.eventManager_.listen(this.player_,"loading",function(){e.isIdle_=!1,e.onCastStatusChanged_()}),this.eventManager_.listen(this.video_,"playing",function(){e.isIdle_=!1,e.onCastStatusChanged_()}),this.eventManager_.listen(this.video_,"pause",function(){e.onCastStatusChanged_()}),this.eventManager_.listen(this.player_,"unloading",function(){e.isIdle_=!0,e.onCastStatusChanged_()}),this.eventManager_.listen(this.video_,"ended",function(){new oa.util.Timer(function(){e.video_&&e.video_.ended&&(e.isIdle_=!0,e.onCastStatusChanged_())}).tickAfter(oa.cast.CastReceiver.IDLE_INTERVAL)})}},{key:"onSendersChanged_",value:function(){this.updateNumber_=0,this.initialStatusUpdatePending_=!0;var e=cast.receiver.CastReceiverManager.getInstance();this.isConnected_=0!=e.getSenders().length,this.onCastStatusChanged_()}},{key:"onCastStatusChanged_",value:(s=na(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve();case 2:if(this.player_){e.next=4;break}return e.abrupt("return");case 4:t=new oa.util.FakeEvent("caststatuschanged"),this.dispatchEvent(t),this.maybeSendMediaInfoMessage_()||this.sendMediaStatus_(0);case 7:case"end":return e.stop()}},e,this)})),function(){return s.apply(this,arguments)})},{key:"initState_",value:(a=na(regeneratorRuntime.mark(function e(t,n){var r,i,a,s,o,u,l,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(r in t.player)i=t.player[r],this.player_[r](i);if(this.appDataCallback_(n),a=this.video_.autoplay,!t.manifest){e.next=18;break}return this.video_.autoplay=!1,e.prev=5,e.next=8,this.player_.load(t.manifest,t.startTime);case 8:e.next=16;break;case 10:return e.prev=10,e.t0=e.catch(5),window.asserts.assert(e.t0 instanceof oa.util.Error,"Wrong error type!"),s=new oa.util.FakeEvent("error",{detail:e.t0}),this.player_.dispatchEvent(s),e.abrupt("return");case 16:e.next=20;break;case 18:return e.next=20,Promise.resolve();case 20:if(this.player_){e.next=22;break}return e.abrupt("return");case 22:for(o in t.video)u=t.video[o],this.video_[o]=u;for(l in t.playerAfterLoad)c=t.playerAfterLoad[l],this.player_[l](c);this.video_.autoplay=a,t.manifest&&(this.video_.play(),this.sendMediaStatus_(0));case 26:case"end":return e.stop()}},e,this,[[5,10]])})),function(e,t){return a.apply(this,arguments)})},{key:"proxyEvent_",value:function(e,t){this.player_&&(this.pollAttributes_(),this.sendMessage_({type:"event",targetName:e,event:t},this.shakaBus_))}},{key:"pollAttributes_",value:function(){this.pollTimer_.tickAfter(t.POLL_INTERVAL);var e={video:{},player:{}},n=!0,r=!1,i=void 0;try{for(var a,s=CastUtils.VideoAttributes[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;e.video[o]=this.video_[o]}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}if(this.player_.isLive()){var u=CastUtils.PlayerGetterMethodsThatRequireLive;for(var l in u){var c=u[l];this.updateNumber_%c==0&&(e.player[l]=this.player_[l]())}}for(var d in CastUtils.PlayerGetterMethods){var h=CastUtils.PlayerGetterMethods[d];this.updateNumber_%h==0&&(e.player[d]=this.player_[d]())}var f=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();f&&(e.video.volume=f.level,e.video.muted=f.muted),this.startUpdatingUpdateNumber_&&(this.updateNumber_+=1),this.sendMessage_({type:"update",update:e},this.shakaBus_),this.maybeSendMediaInfoMessage_()}},{key:"maybeSendMediaInfoMessage_",value:function(){return!(!this.initialStatusUpdatePending_||!this.video_.duration&&!this.player_.isLive()||(this.sendMediaInfoMessage_(),this.initialStatusUpdatePending_=!1,0))}},{key:"sendMediaInfoMessage_",value:function(){var e={contentId:this.player_.getAssetUri(),streamType:this.player_.isLive()?"LIVE":"BUFFERED",duration:this.video_.duration,contentType:""};this.sendMediaStatus_(0,e)}},{key:"fakeVolumeChangeEvent_",value:function(){var e=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();window.asserts.assert(e,"System volume should not be null!"),e&&this.sendMessage_({type:"update",update:{video:{volume:e.level,muted:e.muted}}},this.shakaBus_),this.sendMessage_({type:"event",targetName:"video",event:{type:"volumechange"}},this.shakaBus_)}},{key:"onShakaMessage_",value:function(e){var t=this,n=CastUtils.deserialize(e.data);switch(oa.log.debug("CastReceiver: message",n),n.type){case"init":this.updateNumber_=0,this.startUpdatingUpdateNumber_=!1,this.initialStatusUpdatePending_=!0,this.initState_(n.initState,n.appData),this.pollAttributes_();break;case"appData":this.appDataCallback_(n.appData);break;case"set":var r=n.targetName,i=n.property,a=n.value;if("video"==r){var s=cast.receiver.CastReceiverManager.getInstance();if("volume"==i){s.setSystemVolumeLevel(a);break}if("muted"==i){s.setSystemVolumeMuted(a);break}}this.targets_[r][i]=a;break;case"call":var o=n.targetName,u=n.methodName,l=n.args,c=this.targets_[o];c[u].apply(c,l);break;case"asyncCall":var d=n.targetName,h=n.methodName;"player"==d&&"load"==h&&(this.updateNumber_=0,this.startUpdatingUpdateNumber_=!1);var f=n.args,p=n.id,m=e.senderId,v=this.targets_[d],y=v[h].apply(v,f);"player"==d&&"load"==h&&(y=y.then(function(){t.initialStatusUpdatePending_=!0})),y.then(function(){return t.sendAsyncComplete_(m,p,null)},function(e){return t.sendAsyncComplete_(m,p,e)})}}},{key:"onGenericMessage_",value:function(e){var t=this,n=CastUtils.deserialize(e.data);switch(oa.log.debug("CastReceiver: message",n),n.type){case"PLAY":this.video_.play(),this.sendMediaStatus_(0);break;case"PAUSE":this.video_.pause(),this.sendMediaStatus_(0);break;case"SEEK":var r=n.currentTime,i=n.resumeState;null!=r&&(this.video_.currentTime=Number(r)),i&&"PLAYBACK_START"==i?(this.video_.play(),this.sendMediaStatus_(0)):i&&"PLAYBACK_PAUSE"==i&&(this.video_.pause(),this.sendMediaStatus_(0));break;case"STOP":this.player_.unload().then(function(){t.player_&&t.sendMediaStatus_(0)});break;case"GET_STATUS":this.sendMediaStatus_(Number(n.requestId));break;case"VOLUME":var a=n.volume,s=a.level,o=a.muted,u=this.video_.volume,l=this.video_.muted;null!=s&&(this.video_.volume=Number(s)),null!=o&&(this.video_.muted=o),u==this.video_.volume&&l==this.video_.muted||this.sendMediaStatus_(0);break;case"LOAD":this.updateNumber_=0,this.startUpdatingUpdateNumber_=!1,this.initialStatusUpdatePending_=!1;var c=n.media,d=c.contentId,h=n.currentTime,f=this.contentIdCallback_(d),p=n.autoplay||!0,m=c.customData;this.appDataCallback_(m),p&&(this.video_.autoplay=!0),this.player_.load(f,h).then(function(){t.player_&&t.sendMediaInfoMessage_()}).catch(function(e){var r="LOAD_FAILED";e.category==oa.util.Error.Category.PLAYER&&e.code==oa.util.Error.Code.LOAD_INTERRUPTED&&(r="LOAD_CANCELLED"),t.sendMessage_({requestId:Number(n.requestId),type:r},t.genericBus_)});break;default:oa.log.warning("Unrecognized message type from the generic Chromecast controller!",n.type),this.sendMessage_({requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},this.genericBus_)}}},{key:"sendAsyncComplete_",value:function(e,t,n){this.player_&&this.sendMessage_({type:"asyncComplete",id:t,error:n},this.shakaBus_,e)}},{key:"sendMessage_",value:function(e,t,n){if(this.isConnected_){var r=CastUtils.serialize(e);n?t.getCastChannel(n).send(r):t.broadcast(r)}}},{key:"getPlayState_",value:function(){var e=t.PLAY_STATE;return this.isIdle_?e.IDLE:this.player_.isBuffering()?e.BUFFERING:this.video_.paused?e.PAUSED:e.PLAYING}},{key:"sendMediaStatus_",value:function(e,t){var n={mediaSessionId:0,playbackRate:this.video_.playbackRate,playerState:this.getPlayState_(),currentTime:this.video_.currentTime,supportedMediaCommands:15,volume:{level:this.video_.volume,muted:this.video_.muted}};t&&(n.media=t);var r={requestId:e,type:"MEDIA_STATUS",status:[n]};this.sendMessage_(r,this.genericBus_)}}])&&ra(n.prototype,r),i&&ra(n,i),t}();ua.POLL_INTERVAL=.5,ua.IDLE_INTERVAL=5,ua.PLAY_STATE={IDLE:"IDLE",PLAYING:"PLAYING",BUFFERING:"BUFFERING",PAUSED:"PAUSED"};function la(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ca=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),window.asserts.assert(t>0,"expected halfLife to be positive"),this.alpha_=Math.exp(Math.log(.5)/t),this.estimate_=0,this.totalWeight_=0}var t,n,r;return t=e,(n=[{key:"sample",value:function(e,t){var n=Math.pow(this.alpha_,e),r=t*(1-n)+n*this.estimate_;isNaN(r)||(this.estimate_=r,this.totalWeight_+=e)}},{key:"getEstimate",value:function(){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}}])&&la(t.prototype,n),r&&la(t,r),e}();function da(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ha=window.shaka,fa=(window.goog,function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"findChild",value:function(t,n){var r=e.findChildren(t,n);return 1!=r.length?null:r[0]}},{key:"findChildNS",value:function(t,n,r){var i=e.findChildrenNS(t,n,r);return 1!=i.length?null:i[0]}},{key:"findChildren",value:function(e,t){return Array.from(e.childNodes).filter(function(e){return e instanceof Element&&e.tagName==t})}},{key:"findChildrenNS",value:function(e,t,n){return Array.from(e.childNodes).filter(function(e){return e instanceof Element&&e.localName==n&&e.namespaceURI==t})}},{key:"getAttributeNS",value:function(e,t,n){return e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null}},{key:"getContents",value:function(e){return Array.from(e.childNodes).every(function(e){return e.nodeType==Node.TEXT_NODE||e.nodeType==Node.CDATA_SECTION_NODE})?e.textContent.trim():null}},{key:"parseAttr",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=null,a=e.getAttribute(t);return null!=a&&(i=n(a)),null==i?r:i}},{key:"parseDate",value:function(e){if(!e)return null;/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z");var t=Date.parse(e);return isNaN(t)?null:Math.floor(t/1e3)}},{key:"parseDuration",value:function(e){if(!e)return null;var t=new RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(e);if(!t)return ha.log.warning("Invalid duration string:",e),null;var n=31536e3*Number(t[1]||null)+2592e3*Number(t[2]||null)+86400*Number(t[3]||null)+3600*Number(t[4]||null)+60*Number(t[5]||null)+Number(t[6]||null);return isFinite(n)?n:null}},{key:"parseRange",value:function(e){var t=/([0-9]+)-([0-9]+)/.exec(e);if(!t)return null;var n=Number(t[1]);if(!isFinite(n))return null;var r=Number(t[2]);return isFinite(r)?{start:n,end:r}:null}},{key:"parseInt",value:function(e){var t=Number(e);return t%1==0?t:null}},{key:"parsePositiveInt",value:function(e){var t=Number(e);return t%1==0&&t>0?t:null}},{key:"parseNonNegativeInt",value:function(e){var t=Number(e);return t%1==0&&t>=0?t:null}},{key:"parseFloat",value:function(e){var t=Number(e);return isNaN(t)?null:t}},{key:"evalDivision",value:function(e){var t,n;return n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e),isNaN(n)?null:n}},{key:"parseXmlString",value:function(e,t){var n=new DOMParser,r=null,i=null;try{i=n.parseFromString(e,"text/xml")}catch(e){}return i&&i.documentElement.tagName==t&&(r=i.documentElement),r&&r.getElementsByTagName("parsererror").length>0?null:r}},{key:"parseXml",value:function(t,n){try{var r=Bt.fromUTF8(t);return e.parseXmlString(r,n)}catch(e){return null}}}],(n=null)&&da(t.prototype,n),r&&da(t,r),e}());function pa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ma=new M,va=window.shaka,ya=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"parseFromAdaptationSet",value:function(t,n,r){var i=e.parseElements_(t),a=null,s=[],o=[],u=new Set(i.map(function(e){return e.keyId}));if(u.delete(null),u.size>1)throw new M(ma.severity.CRITICAL,ma.category.MANIFEST,ma.code.DASH_CONFLICTING_KEY_IDS);if(r||(o=i.filter(function(t){return t.schemeUri!=e.MP4Protection_||(window.asserts.assert(!t.init||t.init.length,"Init data must be null or non-empty."),a=t.init||a,!1)})).length&&0==(s=e.convertElements_(a,n,o)).length&&(s=[Ae.createDrmInfo("",a)]),i.length&&(r||!o.length)){s=[];var l=e.defaultKeySystems_,c=!0,d=!1,h=void 0;try{for(var f,p=l.values()[Symbol.iterator]();!(c=(f=p.next()).done);c=!0){var m=f.value;if("org.w3.clearkey"!=m){var v=Ae.createDrmInfo(m,a);s.push(v)}}}catch(e){d=!0,h=e}finally{try{c||null==p.return||p.return()}finally{if(d)throw h}}}var y=Array.from(u)[0]||null;if(y){var g=!0,_=!1,b=void 0;try{for(var w,E=s[Symbol.iterator]();!(g=(w=E.next()).done);g=!0){var S=w.value,T=!0,C=!1,k=void 0;try{for(var I,A=S.initData[Symbol.iterator]();!(T=(I=A.next()).done);T=!0)I.value.keyId=y}catch(e){C=!0,k=e}finally{try{T||null==A.return||A.return()}finally{if(C)throw k}}}}catch(e){_=!0,b=e}finally{try{g||null==E.return||E.return()}finally{if(_)throw b}}}return{defaultKeyId:y,defaultInit:a,drmInfos:s,firstRepresentation:!0}}},{key:"parseFromRepresentation",value:function(t,n,r,i){var a=e.parseFromAdaptationSet(t,n,i);if(r.firstRepresentation){var s=1==r.drmInfos.length&&!r.drmInfos[0].keySystem,o=0==r.drmInfos.length,u=0==a.drmInfos.length;(o||s&&!u)&&(r.drmInfos=a.drmInfos),r.firstRepresentation=!1}else if(a.drmInfos.length>0&&(r.drmInfos=r.drmInfos.filter(function(e){return a.drmInfos.some(function(t){return t.keySystem==e.keySystem})}),0==r.drmInfos.length))throw new M(ma.severity.CRITICAL,ma.category.MANIFEST,ma.code.DASH_NO_COMMON_KEY_SYSTEM);return a.defaultKeyId||r.defaultKeyId}},{key:"getWidevineLicenseUrl",value:function(e){var t=fa.findChildNS(e.node,"urn:microsoft","laurl");return t&&t.getAttribute("licenseUrl")||""}},{key:"parseMsProRecords_",value:function(e,t){for(var n=[],r=new DataView(e);t<e.byteLength-1;){var i=r.getUint16(t,!0);t+=2;var a=r.getUint16(t,!0);t+=2,window.asserts.assert(0==(1&a),"expected byteLength to be an even number");var s=new Uint8Array(e,t,a);n.push({type:i,value:s}),t+=a}return n}},{key:"parseMsPro_",value:function(t){var n=0,r=new DataView(t).getUint32(n,!0);return n+=4,r!==t.byteLength?(va.log.warning("PlayReady Object with invalid length encountered."),[]):(n+=2,e.parseMsProRecords_(t,n))}},{key:"getLaurl_",value:function(e){var t=e.querySelector("DATA > LA_URL");return t?t.textContent:""}},{key:"getPlayReadyLicenseUrl",value:function(t){var n=fa.findChildNS(t.node,"urn:microsoft:playready","pro");if(!n)return"";var r=e.PLAYREADY_RECORD_TYPES,i=jt.fromBase64(n.textContent),a=e.parseMsPro_(i.buffer).filter(function(e){return e.type===r.RIGHTS_MANAGEMENT})[0];if(!a)return"";var s=StringUtils.fromUTF16(a.value,!0),o=fa.parseXmlString(s,"WRMHEADER");return o?e.getLaurl_(o):""}},{key:"convertElements_",value:function(t,n,r){var i=e.defaultKeySystems_,a=e.licenseUrlParsers_,s=[],o=!0,u=!1,l=void 0;try{for(var c,d=r[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){var h=c.value,f=i.get(h.schemeUri);if(f){window.asserts.assert(!h.init||h.init.length,"Init data must be null or non-empty.");var p=h.init||t,m=Ae.createDrmInfo(f,p),v=a.get(f);v&&(m.licenseServerUri=v(h)),s.push(m)}else{window.asserts.assert(n,"ContentProtection callback is required");var y=n(h.node)||[],g=!0,_=!1,b=void 0;try{for(var w,E=y[Symbol.iterator]();!(g=(w=E.next()).done);g=!0){var S=w.value;s.push(S)}}catch(e){_=!0,b=e}finally{try{g||null==E.return||E.return()}finally{if(_)throw b}}}}}catch(e){u=!0,l=e}finally{try{o||null==d.return||d.return()}finally{if(u)throw l}}return s}},{key:"parseElements_",value:function(t){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var u=s.value,l=e.parseElement_(u);l&&n.push(l)}}catch(e){i=!0,a=e}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}return n}},{key:"parseElement_",value:function(t){var n=e.CencNamespaceUri_,r=t.getAttribute("schemeIdUri"),i=fa.getAttributeNS(t,n,"default_KID"),a=fa.findChildrenNS(t,n,"pssh").map(fa.getContents);if(!r)return va.log.error("Missing required schemeIdUri attribute on","ContentProtection element",t),null;if(r=r.toLowerCase(),i&&(i=i.replace(/-/g,"").toLowerCase()).includes(" "))throw new M(ma.severity.CRITICAL,ma.category.MANIFEST,ma.code.DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED);var s=[];try{s=a.map(function(e){return{initDataType:"cenc",initData:jt.fromBase64(e),keyId:null}})}catch(e){throw new M(ma.severity.CRITICAL,ma.category.MANIFEST,ma.code.DASH_PSSH_BAD_ENCODING)}return{node:t,schemeUri:r,keyId:i,init:s.length>0?s:null}}}],(n=null)&&pa(t.prototype,n),r&&pa(t,r),e}();function ga(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}ya.PlayReadyRecord,ya.PLAYREADY_RECORD_TYPES={RIGHTS_MANAGEMENT:1,RESERVED:2,EMBEDDED_LICENSE:3},ya.Context,ya.Element,ya.defaultKeySystems_=(new Map).set("urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b","org.w3.clearkey").set("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine.alpha").set("urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95","com.microsoft.playready").set("urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb","com.adobe.primetime"),ya.licenseUrlParsers_=(new Map).set("com.widevine.alpha",ya.getWidevineLicenseUrl).set("com.microsoft.playready",ya.getPlayReadyLicenseUrl),ya.MP4Protection_="urn:mpeg:dash:mp4protection:2011",ya.CencNamespaceUri_="urn:mpeg:cenc:2013";
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var _a=F.util.Error,ba=window.shaka,wa=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"fillUriTemplate",value:function(e,t,n,r,i){var a={RepresentationID:t,Number:n,Bandwidth:r,Time:i};return e.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(t,n,r,i){if("$$"==t)return"$";var s,o=a[n];if(window.asserts.assert(void 0!==o,"Unrecognized identifier"),null==o)return ba.log.warning("URL template does not have an available substitution for ",'identifier "'+n+'":',e),t;switch("RepresentationID"==n&&r&&(ba.log.warning("URL template should not contain a width specifier for identifier",'"RepresentationID":',e),r=void 0),"Time"==n&&(window.asserts.assert(Math.abs(o-Math.round(o))<.2,"Calculated $Time$ values must be close to integers"),o=Math.round(o)),i){case void 0:case"d":case"i":case"u":s=o.toString();break;case"o":s=o.toString(8);break;case"x":s=o.toString(16);break;case"X":s=o.toString(16).toUpperCase();break;default:window.asserts.assert(!1,"Unhandled format specifier"),s=o.toString()}var u=window.parseInt(r,10)||1,l=Math.max(0,u-s.length);return new Array(l+1).join("0")+s})}},{key:"createTimeline",value:function(e,t,n,r){window.asserts.assert(t>0&&t<1/0,"timescale must be a positive, finite integer"),window.asserts.assert(r>0,"period duration must be a positive integer");for(var i=fa.findChildren(e,"S"),a=[],s=0,o=0;o<i.length;++o){var u=i[o],l=fa.parseAttr(u,"t",fa.parseNonNegativeInt),c=fa.parseAttr(u,"d",fa.parseNonNegativeInt),d=fa.parseAttr(u,"r",fa.parseInt);if(null!=l&&(l-=n),!c)return ba.log.warning('"S" element must have a duration:','ignoring the remaining "S" elements.',u),a;var h=null!=l?l:s,f=d||0;if(f<0)if(o+1<i.length){var p=i[o+1],m=fa.parseAttr(p,"t",fa.parseNonNegativeInt);if(null==m)return ba.log.warning('An "S" element cannot have a negative repeat','if the next "S" element does not have a valid start time:','ignoring the remaining "S" elements.',u),a;if(h>=m)return ba.log.warning('An "S" element cannot have a negative repeatif its start ','time exceeds the next "S" element\'s start time:','ignoring the remaining "S" elements.',u),a;f=Math.ceil((m-h)/c)-1}else{if(r==1/0)return ba.log.warning('The last "S" element cannot have a negative repeat',"if the Period has an infinite duration:",'ignoring the last "S" element.',u),a;if(h/t>=r)return ba.log.warning('The last "S" element cannot have a negative repeat',"if its start time exceeds the Period's duration:",'igoring the last "S" element.',u),a;f=Math.ceil((r*t-h)/c)-1}if(a.length>0&&h!=s){var v=h-s;Math.abs(v/t)>=Ae.GAP_OVERLAP_TOLERANCE_SECONDS&&ba.log.warning("SegmentTimeline contains a large gap/overlap:","the content may have errors in it.",u),a[a.length-1].end=h/t}for(var y=0;y<=f;++y){var g=h+c,_={start:h/t,end:g/t,unscaledStart:h};a.push(_),h=g,s=g}}return a}},{key:"parseSegmentInfo",value:function(t,n){window.asserts.assert(n(t.representation),"There must be at least one element of the given type.");var r=e.inheritAttribute(t,n,"timescale"),i=1;r&&(i=fa.parsePositiveInt(r)||1);var a=e.inheritAttribute(t,n,"duration"),s=fa.parsePositiveInt(a||"");s&&(s/=i);var o=e.inheritAttribute(t,n,"startNumber"),u=Number(e.inheritAttribute(t,n,"presentationTimeOffset"))||0,l=fa.parseNonNegativeInt(o||"");null!=o&&null!=l||(l=1);var c=e.inheritChild(t,n,"SegmentTimeline"),d=null;return c&&(d=e.createTimeline(c,i,u,t.periodInfo.duration||1/0)),{timescale:i,segmentDuration:s,startNumber:l,scaledPresentationTimeOffset:u/i||0,unscaledPresentationTimeOffset:u,timeline:d}}},{key:"inheritAttribute",value:function(e,t,n){return window.asserts.assert(t(e.representation),"There must be at least one element of the given type"),[t(e.representation),t(e.adaptationSet),t(e.period)].filter(ke.isNotNull).map(function(e){return e.getAttribute(n)}).reduce(function(e,t){return e||t})}},{key:"inheritChild",value:function(e,t,n){return window.asserts.assert(t(e.representation),"There must be at least one element of the given type"),[t(e.representation),t(e.adaptationSet),t(e.period)].filter(ke.isNotNull).map(function(e){return fa.findChild(e,n)}).reduce(function(e,t){return e||t})}},{key:"handleXlinkInElement_",value:function(t,n,r,i,a,s){for(var o=e.XlinkNamespaceUri_,u=fa.getAttributeNS(t,o,"href"),l=fa.getAttributeNS(t,o,"actuate")||"onRequest",c=0;c<t.attributes.length;c++){var d=t.attributes[c];d.namespaceURI==o&&(t.removeAttributeNS(d.namespaceURI,d.localName),c-=1)}if(s>=5)return U.failed(new _a(_a.Severity.CRITICAL,_a.Category.MANIFEST,_a.Code.DASH_XLINK_DEPTH_LIMIT));if("onLoad"!=l)return U.failed(new _a(_a.Severity.CRITICAL,_a.Category.MANIFEST,_a.Code.DASH_UNSUPPORTED_XLINK_ACTUATE));var h=Ae.resolveUris([i],[u]),f=se.RequestType.MANIFEST,p=se.makeRequest(h,n),m=a.request(f,p);return window.asserts.assert(m instanceof U,"Unexpected implementation of IAbortableOperation!"),m.chain(function(i){var o=fa.parseXml(i.data,t.tagName);if(!o)return U.failed(new _a(_a.Severity.CRITICAL,_a.Category.MANIFEST,_a.Code.DASH_INVALID_XML,u));for(;t.childNodes.length;)t.removeChild(t.childNodes[0]);for(;o.childNodes.length;){var l=o.childNodes[0];o.removeChild(l),t.appendChild(l)}for(var c=0;c<o.attributes.length;c++){var d=o.attributes[c].nodeName,f=o.getAttribute(d);t.setAttribute(d,f)}return e.processXlinks(t,n,r,h[0],a,s+1)})}},{key:"processXlinks",value:function(t,n,r,i,a){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=e.XlinkNamespaceUri_;if(fa.getAttributeNS(t,o,"href")){var u=e.handleXlinkInElement_(t,n,r,i,a,s);return r&&(u=u.chain(void 0,function(o){return e.processXlinks(t,n,r,i,a,s)})),u}for(var l=[],c=0;c<t.childNodes.length;c++){var d=t.childNodes[c];if(d instanceof Element){var h="urn:mpeg:dash:resolve-to-zero:2013";fa.getAttributeNS(d,o,"href")==h?(t.removeChild(d),c-=1):"SegmentTimeline"!=d.tagName&&l.push(e.processXlinks(d,n,r,i,a,s))}}return U.all(l).chain(function(){return t})}}],(n=null)&&ga(t.prototype,n),r&&ga(t,r),e}();function Ea(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}wa.TimeRange,wa.SegmentInfo,wa.XlinkNamespaceUri_="http://www.w3.org/1999/xlink";
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Sa=F.util.Mp4Parser,Ta=F.util.Error,Ca=window.shaka,ka=(window.goog,function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"parse",value:function(t,n,r,i){var a,s=(new Sa).fullBox("sidx",function(t){a=e.parseSIDX_(n,i,r,t)});if(t&&s.parse(t),a)return a;throw Ca.log.error('Invalid box type, expected "sidx".'),new Ta(Ta.severity.CRITICAL,Ta.category.MEDIA,Ta.code.MP4_SIDX_WRONG_BOX_TYPE)}},{key:"parseSIDX_",value:function(e,t,n,r){window.asserts.assert(null!=r.version,"SIDX is a full box and should have a valid version.");var i=[];r.reader.skip(4);var a,s,o=r.reader.readUint32();if(0==o)throw Ca.log.error("Invalid timescale."),new Ta(Ta.severity.CRITICAL,Ta.category.MEDIA,Ta.code.MP4_SIDX_INVALID_TIMESCALE);0==r.version?(a=r.reader.readUint32(),s=r.reader.readUint32()):(a=r.reader.readUint64(),s=r.reader.readUint64()),r.reader.skip(2);for(var u=r.reader.readUint16(),l=a,c=e+r.size+s,d=0;d<u;d++){var h=r.reader.readUint32(),f=(2147483648&h)>>>31,p=2147483647&h,m=r.reader.readUint32();if(r.reader.skip(4),1==f)throw Ca.log.error("Heirarchical SIDXs are not supported."),new Ta(Ta.severity.CRITICAL,Ta.category.MEDIA,Ta.code.MP4_SIDX_TYPE_NOT_SUPPORTED);i.push(new Nn(i.length,l/o-t,(l+m)/o-t,function(){return n},c,c+p-1)),l+=m,c+=p}return r.parser.stop(),i}}],(n=null)&&Ea(t.prototype,n),r&&Ea(t,r),e}());function Ia(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Aa=window.shaka,La=(window.goog,function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataView_=t,this.littleEndian_=n===e.Endianness.LITTLE_ENDIAN,this.position_=0}var t,n,r;return t=e,(n=[{key:"hasMoreData",value:function(){return this.position_<this.dataView_.byteLength}},{key:"getPosition",value:function(){return this.position_}},{key:"getLength",value:function(){return this.dataView_.byteLength}},{key:"readUint8",value:function(){try{var e=this.dataView_.getUint8(this.position_);return this.position_+=1,e}catch(e){throw this.outOfBounds_()}}},{key:"readUint16",value:function(){try{var e=this.dataView_.getUint16(this.position_,this.littleEndian_);return this.position_+=2,e}catch(e){throw this.outOfBounds_()}}},{key:"readUint32",value:function(){try{var e=this.dataView_.getUint32(this.position_,this.littleEndian_);return this.position_+=4,e}catch(e){throw this.outOfBounds_()}}},{key:"readInt32",value:function(){try{var e=this.dataView_.getInt32(this.position_,this.littleEndian_);return this.position_+=4,e}catch(e){throw this.outOfBounds_()}}},{key:"readUint64",value:function(){var e,t;try{this.littleEndian_?(e=this.dataView_.getUint32(this.position_,!0),t=this.dataView_.getUint32(this.position_+4,!0)):(t=this.dataView_.getUint32(this.position_,!1),e=this.dataView_.getUint32(this.position_+4,!1))}catch(e){throw this.outOfBounds_()}if(t>2097151)throw new Aa.util.Error(Aa.util.Error.Severity.CRITICAL,Aa.util.Error.Category.MEDIA,Aa.util.Error.Code.JS_INTEGER_OVERFLOW);return this.position_+=8,t*Math.pow(2,32)+e}},{key:"readBytes",value:function(e){if(window.asserts.assert(e>=0,"Bad call to DataViewReader.readBytes"),this.position_+e>this.dataView_.byteLength)throw this.outOfBounds_();var t=new Uint8Array(this.dataView_.buffer,this.dataView_.byteOffset+this.position_,e);return this.position_+=e,new Uint8Array(t)}},{key:"skip",value:function(e){if(window.asserts.assert(e>=0,"Bad call to DataViewReader.skip"),this.position_+e>this.dataView_.byteLength)throw this.outOfBounds_();this.position_+=e}},{key:"rewind",value:function(e){if(window.asserts.assert(e>=0,"Bad call to DataViewReader.rewind"),this.position_<e)throw this.outOfBounds_();this.position_-=e}},{key:"seek",value:function(e){if(window.asserts.assert(e>=0,"Bad call to DataViewReader.seek"),e<0||e>this.dataView_.byteLength)throw this.outOfBounds_();this.position_=e}},{key:"readTerminatedString",value:function(){for(var e=this.position_;this.hasMoreData()&&0!=this.dataView_.getUint8(this.position_);)this.position_+=1;var t=new Uint8Array(this.dataView_.buffer,this.dataView_.byteOffset+e,this.position_-e);return this.position_+=1,Bt.fromUTF8(t)}},{key:"outOfBounds_",value:function(){return new M(M.Severity.CRITICAL,M.Category.MEDIA,M.Code.BUFFER_READ_OUT_OF_BOUNDS)}}])&&Ia(t.prototype,n),r&&Ia(t,r),e}());La.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:1};var xa=La;function Ra(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Na(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ma(e,t,n){return t&&Na(e.prototype,t),n&&Na(e,n),e}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pa=new M,Oa=(window.shaka,window.goog,function(){function e(t){Ra(this,e),this.dataView_=t,this.reader_=new xa(t,xa.Endianness.BIG_ENDIAN)}return Ma(e,[{key:"hasMoreData",value:function(){return this.reader_.hasMoreData()}},{key:"parseElement",value:function(){var t,n=this.parseId_(),r=this.parseVint_();t=e.isDynamicSizeValue_(r)?this.dataView_.byteLength-this.reader_.getPosition():e.getVintValue_(r);var i=this.reader_.getPosition()+t<=this.dataView_.byteLength?t:this.dataView_.byteLength-this.reader_.getPosition(),a=new DataView(this.dataView_.buffer,this.dataView_.byteOffset+this.reader_.getPosition(),i);return this.reader_.skip(i),new Da(n,a)}},{key:"parseId_",value:function(){var e=this.parseVint_();if(e.length>7)throw new M(Pa.severity.CRITICAL,Pa.category.MEDIA,Pa.code.EBML_OVERFLOW);var t=0,n=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){t=256*t+a.value}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return t}},{key:"parseVint_",value:function(){var e=this.reader_.readUint8();if(0==e)throw new M(Pa.severity.CRITICAL,Pa.category.MEDIA,Pa.code.EBML_OVERFLOW);var t=8-Math.floor(Math.log2(e));window.asserts.assert(t<=8&&t>=1,"Incorrect log2 value");var n=new Uint8Array(t);n[0]=e;for(var r=1;r<t;r++)n[r]=this.reader_.readUint8();return n}}],[{key:"getVintValue_",value:function(e){if(8==e.length&&224&e[1])throw new M(Pa.severity.CRITICAL,Pa.category.MEDIA,Pa.code.JS_INTEGER_OVERFLOW);for(var t=1<<8-e.length,n=e[0]&t-1,r=1;r<e.length;r++)n=256*n+e[r];return n}},{key:"isDynamicSizeValue_",value:function(t){var n=!0,r=!1,i=void 0;try{for(var a,s=e.DYNAMIC_SIZES[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;if(jt.equal(t,o))return!0}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return!1}}]),e}());Oa.DYNAMIC_SIZES=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];var Da=function(){function e(t,n){Ra(this,e),this.id=t,this.dataView_=n}return Ma(e,[{key:"getOffset",value:function(){return this.dataView_.byteOffset}},{key:"createParser",value:function(){return new Oa(this.dataView_)}},{key:"getUint",value:function(){if(this.dataView_.byteLength>8)throw new M(Pa.severity.CRITICAL,Pa.category.MEDIA,Pa.code.EBML_OVERFLOW);if(8==this.dataView_.byteLength&&224&this.dataView_.getUint8(0))throw new M(Pa.severity.CRITICAL,Pa.category.MEDIA,Pa.code.JS_INTEGER_OVERFLOW);for(var e=0,t=0;t<this.dataView_.byteLength;t++){e=256*e+this.dataView_.getUint8(t)}return e}},{key:"getFloat",value:function(){if(4==this.dataView_.byteLength)return this.dataView_.getFloat32(0);if(8==this.dataView_.byteLength)return this.dataView_.getFloat64(0);throw new M(Pa.severity.CRITICAL,Pa.category.MEDIA,Pa.code.EBML_BAD_FLOATING_POINT_SIZE)}}]),e}();function Ua(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Fa=window.shaka,Ba=(window.goog,function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"parse",value:function(t,n,r,i){var a=e.parseWebmContainer_(n),s=new Oa(new DataView(t)).parseElement();if(s.id!=e.CUES_ID)throw Fa.log.error("Not a Cues element."),new M(M.Severity.CRITICAL,M.Category.MEDIA,M.Code.WEBM_CUES_ELEMENT_MISSING);return e.parseCues_(s,a.segmentOffset,a.timecodeScale,a.duration,r,i)}},{key:"parseWebmContainer_",value:function(t){var n=new Oa(new DataView(t));if(n.parseElement().id!=e.EBML_ID)throw Fa.log.error("Not an EBML element."),new M(M.Severity.CRITICAL,M.Category.MEDIA,M.Code.WEBM_EBML_HEADER_ELEMENT_MISSING);var r=n.parseElement();if(r.id!=e.SEGMENT_ID)throw Fa.log.error("Not a Segment element."),new M(M.Severity.CRITICAL,M.Category.MEDIA,M.Code.WEBM_SEGMENT_ELEMENT_MISSING);var i=r.getOffset(),a=e.parseSegment_(r);return{segmentOffset:i,timecodeScale:a.timecodeScale,duration:a.duration}}},{key:"parseSegment_",value:function(t){for(var n=t.createParser(),r=null;n.hasMoreData();){var i=n.parseElement();if(i.id==e.INFO_ID){r=i;break}}if(!r)throw Fa.log.error("Not an Info element."),new M(M.Severity.CRITICAL,M.Category.MEDIA,M.Code.WEBM_INFO_ELEMENT_MISSING);return e.parseInfo_(r)}},{key:"parseInfo_",value:function(t){for(var n=t.createParser(),r=1e6,i=null;n.hasMoreData();){var a=n.parseElement();a.id==e.TIMECODE_SCALE_ID?r=a.getUint():a.id==e.DURATION_ID&&(i=a.getFloat())}if(null==i)throw new M(M.Severity.CRITICAL,M.Category.MEDIA,M.Code.WEBM_DURATION_ELEMENT_MISSING);var s=r/1e9;return{timecodeScale:s,duration:i*s}}},{key:"parseCues_",value:function(t,n,r,i,a,s){for(var o=[],u=function(){return a},l=t.createParser(),c=null,d=null;l.hasMoreData();){var h=l.parseElement();if(h.id==e.CUE_POINT_ID){var f=e.parseCuePoint_(h);if(f){var p=r*f.unscaledTime,m=n+f.relativeOffset;null!=c&&(window.asserts.assert(null!=d,"last offset cannot be null"),o.push(new Nn(o.length,c-s,p-s,u,d,m-1))),c=p,d=m}}}return null!=c&&(window.asserts.assert(null!=d,"last offset cannot be null"),o.push(new Nn(o.length,c-s,i-s,u,d,null))),o}},{key:"parseCuePoint_",value:function(t){var n=t.createParser(),r=n.parseElement();if(r.id!=e.CUE_TIME_ID)throw Fa.log.warning("Not a CueTime element."),new M(M.Severity.CRITICAL,M.Category.MEDIA,M.Code.WEBM_CUE_TIME_ELEMENT_MISSING);var i=r.getUint(),a=n.parseElement();if(a.id!=e.CUE_TRACK_POSITIONS_ID)throw Fa.log.warning("Not a CueTrackPositions element."),new M(M.Severity.CRITICAL,M.Category.MEDIA,M.Code.WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING);for(var s=a.createParser(),o=0;s.hasMoreData();){var u=s.parseElement();if(u.id==e.CUE_CLUSTER_POSITION){o=u.getUint();break}}return{unscaledTime:i,relativeOffset:o}}}],(n=null)&&Ua(t.prototype,n),r&&Ua(t,r),e}());function Va(e,t,n,r,i,a,s){try{var o=e[a](s),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,i)}function ja(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Ba.EBML_ID=440786851,Ba.SEGMENT_ID=408125543,Ba.INFO_ID=357149030,Ba.TIMECODE_SCALE_ID=2807729,Ba.DURATION_ID=17545,Ba.CUES_ID=475249515,Ba.CUE_POINT_ID=187,Ba.CUE_TIME_ID=179,Ba.CUE_TRACK_POSITIONS_ID=183,Ba.CUE_CLUSTER_POSITION=241;
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ha=new M,Ka=window.shaka,Ga=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"createInitSegment",value:function(e,t){var n=wa.inheritChild(e,t,"Initialization");if(!n)return null;var r=e.representation.baseUris,i=n.getAttribute("sourceURL");i&&(r=Ae.resolveUris(e.representation.baseUris,[i]));var a=0,s=null,o=fa.parseAttr(n,"range",fa.parseRange);return o&&(a=o.start,s=o.end),new Rn(function(){return r},a,s)}},{key:"createStream",value:function(t,n){window.asserts.assert(t.representation.segmentBase,"Should only be called with SegmentBase");var r=Number(wa.inheritAttribute(t,e.fromInheritance_,"presentationTimeOffset"))||0,i=wa.inheritAttribute(t,e.fromInheritance_,"timescale"),a=1;i&&(a=fa.parsePositiveInt(i)||1);var s=r/a||0,o=e.createInitSegment(t,e.fromInheritance_),u=e.createSegmentIndex_(t,n,o,s);return{createSegmentIndex:u.createSegmentIndex,findSegmentPosition:u.findSegmentPosition,getSegmentReference:u.getSegmentReference,initSegmentReference:o,scaledPresentationTimeOffset:s}}},{key:"createSegmentIndexFromUris",value:function(e,t,n,r,i,a,s,o){var u,l,c=e.presentationTimeline,d=!e.dynamic||!e.periodInfo.isLastPeriod,h=e.periodInfo.start,f=e.periodInfo.duration,p=t,m=null;return{createSegmentIndex:(u=regeneratorRuntime.mark(function e(){var t,u,l,v,y;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[p(r,i,a),"webm"==s?p(n.getUris(),n.startByte,n.endByte):null],p=null,e.next=4,Promise.all(t);case 4:return u=e.sent,l=u[0],v=u[1]||null,y=null,"mp4"==s?y=ka.parse(l,i,r,o):(window.asserts.assert(v,"WebM requires init data"),y=Ba.parse(l,v,r,o)),c.notifySegments(y,h),window.asserts.assert(!m,"Should not call createSegmentIndex twice"),m=new Dn(y),d&&m.fit(f),e.abrupt("return",u);case 14:case"end":return e.stop()}},e)}),l=function(){var e=this,t=arguments;return new Promise(function(n,r){var i=u.apply(e,t);function a(e){Va(i,n,r,a,s,"next",e)}function s(e){Va(i,n,r,a,s,"throw",e)}a(void 0)})},function(){return l.apply(this,arguments)}),findSegmentPosition:function(e){return window.asserts.assert(m,"Must call createSegmentIndex first"),m.find(e)},getSegmentReference:function(e){return window.asserts.assert(m,"Must call createSegmentIndex first"),m.get(e)}}}},{key:"fromInheritance_",value:function(e){return e.segmentBase}},{key:"createSegmentIndex_",value:function(t,n,r,i){var a=Ae.ContentType,s=t.representation.contentType,o=t.representation.mimeType.split("/")[1];if(s!=a.TEXT&&"mp4"!=o&&"webm"!=o)throw Ka.log.error("SegmentBase specifies an unsupported container type.",t.representation),new M(Ha.severity.CRITICAL,Ha.category.MANIFEST,Ha.code.DASH_UNSUPPORTED_CONTAINER);if("webm"==o&&!r)throw Ka.log.error("SegmentBase does not contain sufficient segment information:","the SegmentBase uses a WebM container,","but does not contain an Initialization element.",t.representation),new M(Ha.severity.CRITICAL,Ha.category.MANIFEST,Ha.code.DASH_WEBM_MISSING_INIT);var u=wa.inheritChild(t,e.fromInheritance_,"RepresentationIndex"),l=wa.inheritAttribute(t,e.fromInheritance_,"indexRange"),c=t.representation.baseUris,d=fa.parseRange(l||"");if(u){var h=u.getAttribute("sourceURL");h&&(c=Ae.resolveUris(t.representation.baseUris,[h])),d=fa.parseAttr(u,"range",fa.parseRange,d)}if(!d)throw Ka.log.error("SegmentBase does not contain sufficient segment information:","the SegmentBase does not contain @indexRange","or a RepresentationIndex element.",t.representation),new M(Ha.severity.CRITICAL,Ha.category.MANIFEST,Ha.code.DASH_NO_SEGMENT_INFO);return e.createSegmentIndexFromUris(t,n,r,c,d.start,d.end,o,i)}}],(n=null)&&ja(t.prototype,n),r&&ja(t,r),e}();function qa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Wa=window.shaka,za=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"createStream",value:function(e,t){window.asserts.assert(e.representation.segmentList,"Should only be called with SegmentList");var n=n,r=SegmentBase.createInitSegment(e,n.fromInheritance_),i=n.parseSegmentListInfo_(e);n.checkSegmentListInfo_(e,i);var a=null,s=null;e.period.id&&e.representation.id&&(s=e.period.id+","+e.representation.id,a=t[s]);var o=n.createSegmentReferences_(e.periodInfo.duration,i.startNumber,e.representation.baseUris,i);if(a){a.merge(o);var u=e.presentationTimeline.getSegmentAvailabilityStart();a.evict(u-e.periodInfo.start)}else e.presentationTimeline.notifySegments(o,e.periodInfo.start),a=new SegmentIndex(o),s&&e.dynamic&&(t[s]=a);return e.dynamic&&e.periodInfo.isLastPeriod||a.fit(e.periodInfo.duration),{createSegmentIndex:function(){return Promise.resolve()},findSegmentPosition:function(e){return a.find(e)},getSegmentReference:function(e){return a.get(e)},initSegmentReference:r,scaledPresentationTimeOffset:i.scaledPresentationTimeOffset}}},{key:"fromInheritance_",value:function(e){return e.segmentList}},{key:"parseSegmentListInfo_",value:function(t){var n=e.parseMediaSegments_(t),r=MpdUtils.parseSegmentInfo(t,e.fromInheritance_),i=r.startNumber;0==i&&(Wa.log.warning("SegmentList@startNumber must be > 0"),i=1);var a=0;return r.segmentDuration?a=r.segmentDuration*(i-1):r.timeline&&r.timeline.length>0&&(a=r.timeline[0].start),{segmentDuration:r.segmentDuration,startTime:a,startNumber:i,scaledPresentationTimeOffset:r.scaledPresentationTimeOffset,timeline:r.timeline,mediaSegments:n}}},{key:"checkSegmentListInfo_",value:function(e,t){if(!t.segmentDuration&&!t.timeline&&t.mediaSegments.length>1)throw Wa.log.warning("SegmentList does not contain sufficient segment information:","the SegmentList specifies multiple segments,","but does not specify a segment duration or timeline.",e.representation),new Wa.util.Error(Wa.util.Error.Severity.CRITICAL,Wa.util.Error.Category.MANIFEST,Wa.util.Error.Code.DASH_NO_SEGMENT_INFO);if(!t.segmentDuration&&!e.periodInfo.duration&&!t.timeline&&1==t.mediaSegments.length)throw Wa.log.warning("SegmentList does not contain sufficient segment information:","the SegmentList specifies one segment,","but does not specify a segment duration, period duration,","or timeline.",e.representation),new Wa.util.Error(Wa.util.Error.Severity.CRITICAL,Wa.util.Error.Category.MANIFEST,Wa.util.Error.Code.DASH_NO_SEGMENT_INFO);if(t.timeline&&0==t.timeline.length)throw Wa.log.warning("SegmentList does not contain sufficient segment information:","the SegmentList has an empty timeline.",e.representation),new Wa.util.Error(Wa.util.Error.Severity.CRITICAL,Wa.util.Error.Category.MANIFEST,Wa.util.Error.Code.DASH_NO_SEGMENT_INFO)}},{key:"createSegmentReferences_",value:function(e,t,n,r){var i=Wa.util.ManifestParserUtils,a=r.mediaSegments.length;r.timeline&&r.timeline.length!=r.mediaSegments.length&&(a=Math.min(r.timeline.length,r.mediaSegments.length),Wa.log.warning("The number of items in the segment timeline and the number of ","segment URLs do not match, truncating",r.mediaSegments.length,"to",a));for(var s=[],o=r.startTime,u=function(a){var u=r.mediaSegments[a],l=i.resolveUris(n,[u.mediaUri]),c=o,d=void 0;null!=r.segmentDuration?d=c+r.segmentDuration:r.timeline?d=r.timeline[a].end:(window.asserts.assert(1==r.mediaSegments.length&&e,"There should be exactly one segment with a Period duration."),d=c+e),s.push(new SegmentReference(a+t,c,d,function(){return l},u.start,u.end)),o=d},l=0;l<a;l++)u(l);return s}},{key:"parseMediaSegments_",value:function(e){return[e.representation.segmentList,e.adaptationSet.segmentList,e.period.segmentList].filter(Functional.isNotNull).map(function(e){return XmlUtils.findChildren(e,"SegmentURL")}).reduce(function(e,t){return e.length>0?e:t}).map(function(t){t.getAttribute("indexRange")&&!e.indexRangeWarningGiven&&(e.indexRangeWarningGiven=!0,Wa.log.warning("We do not support the SegmentURL@indexRange attribute on SegmentList.  We only use the SegmentList@duration attribute or SegmentTimeline, which must be accurate."));var n=t.getAttribute("media"),r=XmlUtils.parseAttr(t,"mediaRange",XmlUtils.parseRange,{start:0,end:null});return{mediaUri:n,start:r.start,end:r.end}})}}],(n=null)&&qa(t.prototype,n),r&&qa(t,r),e}();function Ya(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}za.MediaSegment,za.SegmentListInfo;
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Xa=window.shaka,$a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"createStream",value:function(t,n,r,i){window.asserts.assert(t.representation.segmentTemplate,"Should only be called with SegmentTemplate");var a=e.createInitSegment_(t),s=e.parseSegmentTemplateInfo_(t);e.checkSegmentTemplateInfo_(t,s);var o=null;if(s.indexTemplate)o=e.createFromIndexTemplate_(t,n,a,s);else if(s.segmentDuration)i||(t.presentationTimeline.notifyMaxSegmentDuration(s.segmentDuration),t.presentationTimeline.notifyMinSegmentStartTime(t.periodInfo.start)),o=e.createFromDuration_(t,s);else{var u=null,l=null;t.period.id&&t.representation.id&&(l=t.period.id+","+t.representation.id,u=r[l]);var c=e.createFromTimeline_(t,s),d=!t.dynamic||!t.periodInfo.isLastPeriod;if(u){d&&new Dn(c).fit(t.periodInfo.duration),u.merge(c);var h=t.presentationTimeline.getSegmentAvailabilityStart();u.evict(h-t.periodInfo.start)}else t.presentationTimeline.notifySegments(c,t.periodInfo.start),u=new Dn(c),l&&t.dynamic&&(r[l]=u);d&&u.fit(t.periodInfo.duration),o={createSegmentIndex:function(){return Promise.resolve()},findSegmentPosition:function(e){return u.find(e)},getSegmentReference:function(e){return u.get(e)}}}return{createSegmentIndex:o.createSegmentIndex,findSegmentPosition:o.findSegmentPosition,getSegmentReference:o.getSegmentReference,initSegmentReference:a,scaledPresentationTimeOffset:s.scaledPresentationTimeOffset}}},{key:"fromInheritance_",value:function(e){return e.segmentTemplate}},{key:"parseSegmentTemplateInfo_",value:function(t){var n=wa.parseSegmentInfo(t,e.fromInheritance_),r=wa.inheritAttribute(t,e.fromInheritance_,"media"),i=wa.inheritAttribute(t,e.fromInheritance_,"index");return{segmentDuration:n.segmentDuration,timescale:n.timescale,startNumber:n.startNumber,scaledPresentationTimeOffset:n.scaledPresentationTimeOffset,unscaledPresentationTimeOffset:n.unscaledPresentationTimeOffset,timeline:n.timeline,mediaTemplate:r,indexTemplate:i}}},{key:"checkSegmentTemplateInfo_",value:function(e,t){var n=0;if(n+=t.indexTemplate?1:0,n+=t.timeline?1:0,0==(n+=t.segmentDuration?1:0))throw Xa.log.error("SegmentTemplate does not contain any segment information:","the SegmentTemplate must contain either an index URL template","a SegmentTimeline, or a segment duration.",e.representation),new Error(Error.Severity.CRITICAL,Error.Category.MANIFEST,Error.Code.DASH_NO_SEGMENT_INFO);if(1!=n&&(Xa.log.warning("SegmentTemplate containes multiple segment information sources:","the SegmentTemplate should only contain an index URL template,","a SegmentTimeline or a segment duration.",e.representation),t.indexTemplate?(Xa.log.info("Using the index URL template by default."),t.timeline=null,t.segmentDuration=null):(window.asserts.assert(t.timeline,"There should be a timeline"),Xa.log.info("Using the SegmentTimeline by default."),t.segmentDuration=null)),!t.indexTemplate&&!t.mediaTemplate)throw Xa.log.error("SegmentTemplate does not contain sufficient segment information:","the SegmentTemplate's media URL template is missing.",e.representation),new Error(Error.Severity.CRITICAL,Error.Category.MANIFEST,Error.Code.DASH_NO_SEGMENT_INFO)}},{key:"createFromIndexTemplate_",value:function(e,t,n,r){var i=e.representation.mimeType.split("/")[1];if("mp4"!=i&&"webm"!=i)throw Xa.log.error("SegmentTemplate specifies an unsupported container type.",e.representation),new Error(Error.Severity.CRITICAL,Error.Category.MANIFEST,Error.Code.DASH_UNSUPPORTED_CONTAINER);if("webm"==i&&!n)throw Xa.log.error("SegmentTemplate does not contain sufficient segment information:","the SegmentTemplate uses a WebM container,","but does not contain an initialization URL template.",e.representation),new Error(Error.Severity.CRITICAL,Error.Category.MANIFEST,Error.Code.DASH_WEBM_MISSING_INIT);window.asserts.assert(r.indexTemplate,"must be using index template");var a=wa.fillUriTemplate(r.indexTemplate,e.representation.id,null,e.bandwidth||null,null),s=Ae.resolveUris(e.representation.baseUris,[a]);return Ga.createSegmentIndexFromUris(e,t,n,s,0,null,i,r.scaledPresentationTimeOffset)}},{key:"createFromDuration_",value:function(e,t){window.asserts.assert(t.mediaTemplate,"There should be a media template with duration");var n=e.periodInfo.duration,r=t.segmentDuration,i=t.startNumber,a=t.timescale,s=t.mediaTemplate,o=e.bandwidth||null,u=e.representation.id,l=e.representation.baseUris;return{createSegmentIndex:function(){return Promise.resolve()},findSegmentPosition:function(e){return e<0?null:n&&e>=n?null:Math.floor(e/r)},getSegmentReference:function(e){var t=e*r,c=t+r;return n&&(c=Math.min(c,n)),c<0?null:n&&t>=n?null:new Nn(e,t,c,function(){var n=wa.fillUriTemplate(s,u,e+i,o,t*a);return Ae.resolveUris(l,[n])},0,null)}}}},{key:"createFromTimeline_",value:function(e,t){for(var n=[],r=function(r){var i=t.timeline[r].start,a=t.timeline[r].unscaledStart,s=t.timeline[r].end,o=r+t.startNumber,u=a+t.unscaledPresentationTimeOffset;n.push(new Nn(o,i,s,function(){window.asserts.assert(t.mediaTemplate,"There should be a media template with a timeline");var n=wa.fillUriTemplate(t.mediaTemplate,e.representation.id,o,e.bandwidth||null,u);return Ae.resolveUris(e.representation.baseUris,[n]).map(function(e){return e.toString()})},0,null))},i=0;i<t.timeline.length;i++)r(i);return n}},{key:"createInitSegment_",value:function(t){var n=wa.inheritAttribute(t,e.fromInheritance_,"initialization");if(!n)return null;var r=t.representation.id,i=t.bandwidth||null,a=t.representation.baseUris;return new Rn(function(){window.asserts.assert(n,"Should have returned earler");var e=wa.fillUriTemplate(n,r,null,i,null);return Ae.resolveUris(a,[e])},0,null)}}],(n=null)&&Ya(t.prototype,n),r&&Ya(t,r),e}();function Za(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Qa(e,t,n,r,i,a,s){try{var o=e[a](s),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,i)}function Ja(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function s(e){Qa(a,r,i,s,o,"next",e)}function o(e){Qa(a,r,i,s,o,"throw",e)}s(void 0)})}}function es(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}$a.SegmentTemplateInfo;
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ts=F.util.Timer,ns=window.shaka,rs=window.goog,is=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config_=null,this.playerInterface_=null,this.manifestUris_=[],this.manifest_=null,this.periodIds_=[],this.globalId_=1,this.segmentIndexMap_={},this.updatePeriod_=0,this.averageUpdateDuration_=new ca(5),this.updateTimer_=new ts(function(){t.onUpdate_()}),this.operationManager_=new m}var t,n,r,i,a,s,o,u,l,c,d,h;return t=e,n=[{key:"configure",value:function(e){window.asserts.assert(null!=e.dash,"DashManifestConfiguration should not be null!"),this.config_=e}},{key:"start",value:(h=Ja(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.asserts.assert(this.config_,"Must call configure() before start()!"),this.manifestUris_=[t],this.playerInterface_=n,e.next=5,this.requestManifest_();case 5:if(r=e.sent,this.playerInterface_&&this.setUpdateTimer_(r),this.playerInterface_){e.next=9;break}throw new Error(ErrorUtils.severity.CRITICAL,ErrorUtils.category.PLAYER,ErrorUtils.code.OPERATION_ABORTED);case 9:return window.asserts.assert(this.manifest_,"Manifest should be non-null!"),e.abrupt("return",this.manifest_);case 11:case"end":return e.stop()}},e,this)})),function(e,t){return h.apply(this,arguments)})},{key:"stop",value:function(){return this.playerInterface_=null,this.config_=null,this.manifestUris_=[],this.manifest_=null,this.periodIds_=[],this.segmentIndexMap_={},null!=this.updateTimer_&&(this.updateTimer_.stop(),this.updateTimer_=null),this.operationManager_.destroy()}},{key:"update",value:(d=Ja(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.requestManifest_();case 3:e.next=11;break;case 5:if(e.prev=5,e.t0=e.catch(0),this.playerInterface_&&e.t0){e.next=9;break}return e.abrupt("return");case 9:window.asserts.assert(e.t0 instanceof Error,"Bad error type"),this.playerInterface_.onError(e.t0);case 11:case"end":return e.stop()}},e,this,[[0,5]])})),function(){return d.apply(this,arguments)})},{key:"onExpirationUpdated",value:function(e,t){}},{key:"requestManifest_",value:(c=Ja(regeneratorRuntime.mark(function e(){var t,n,r,i,a,s,o,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=se.RequestType.MANIFEST,n=se.makeRequest(this.manifestUris_,this.config_.retryParameters),r=this.playerInterface_.networkingEngine,i=Date.now(),a=r.request(t,n),this.operationManager_.manage(a),e.next=8,a.promise;case 8:if(s=e.sent,this.playerInterface_){e.next=11;break}return e.abrupt("return",0);case 11:return s.uri&&!this.manifestUris_.includes(s.uri)&&this.manifestUris_.unshift(s.uri),e.next=14,this.parseManifest_(s.data,s.uri);case 14:return o=Date.now(),u=(o-i)/1e3,this.averageUpdateDuration_.sample(1,u),e.abrupt("return",u);case 18:case"end":return e.stop()}},e,this)})),function(){return c.apply(this,arguments)})},{key:"parseManifest_",value:(l=Ja(regeneratorRuntime.mark(function e(t,n){var r,i,a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=fa.parseXml(t,"MPD")){e.next=3;break}throw new Error(Error.Severity.CRITICAL,Error.Category.MANIFEST,Error.Code.DASH_INVALID_XML,n);case 3:return i=this.config_.dash.xlinkFailGracefully,a=wa.processXlinks(r,this.config_.retryParameters,i,n,this.playerInterface_.networkingEngine),this.operationManager_.manage(a),e.next=8,a.promise;case 8:return s=e.sent,e.abrupt("return",this.processManifest_(s,n));case 10:case"end":return e.stop()}},e,this)})),function(e,t){return l.apply(this,arguments)})},{key:"processManifest_",value:(u=Ja(regeneratorRuntime.mark(function e(t,n){var r,i,a,s,o,u,l,c,d,h,f,p,m,v,y,g,_,b,w;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[n],(i=fa.findChildren(t,"Location").map(fa.getContents).filter(ke.isNotNull)).length>0&&(a=Ae.resolveUris(r,i),this.manifestUris_=a,r=a),s=fa.findChildren(t,"BaseURL").map(fa.getContents),o=Ae.resolveUris(r,s),this.config_.dash.ignoreMinBufferTime||(u=fa.parseAttr(t,"minBufferTime",fa.parseDuration)),this.updatePeriod_=fa.parseAttr(t,"minimumUpdatePeriod",fa.parseDuration,-1),l=fa.parseAttr(t,"availabilityStartTime",fa.parseDate),c=fa.parseAttr(t,"timeShiftBufferDepth",fa.parseDuration),d=fa.parseAttr(t,"suggestedPresentationDelay",fa.parseDuration),h=fa.parseAttr(t,"maxSegmentDuration",fa.parseDuration),f=t.getAttribute("type")||"static",this.manifest_?p=this.manifest_.presentationTimeline:(m=Math.max(this.config_.dash.defaultPresentationDelay,1.5*u),p=new In(l,null!=d?d:m,this.config_.dash.autoCorrectDrift)),v={dynamic:"static"!=f,presentationTimeline:p,period:null,periodInfo:null,adaptationSet:null,representation:null,bandwidth:0,indexRangeWarningGiven:!1},y=this.parsePeriods_(v,o,t),g=y.duration,_=y.periods,p.setStatic("static"==f),"static"!=f&&y.durationDerivedFromPeriods||p.setDuration(g||1/0),p.isLive()&&!isNaN(this.config_.availabilityWindowOverride)&&(c=this.config_.availabilityWindowOverride),null==c&&(c=1/0),p.setSegmentAvailabilityDuration(c),p.notifyMaxSegmentDuration(h||1),rs.DEBUG&&p.assertIsValid(),this.manifest_){e.next=36;break}if(this.manifest_={presentationTimeline:p,periods:_,offlineSessionIds:[],minBufferTime:u||0},!p.usingPresentationStartTime()){e.next=36;break}return b=fa.findChildren(t,"UTCTiming"),e.next=32,this.parseUtcTiming_(o,b);case 32:if(w=e.sent,this.playerInterface_){e.next=35;break}return e.abrupt("return");case 35:p.setClockOffset(w);case 36:case"end":return e.stop()}},e,this)})),function(e,t){return u.apply(this,arguments)})},{key:"parsePeriods_",value:function(e,t,n){for(var r=fa.parseAttr(n,"mediaPresentationDuration",fa.parseDuration),i=[],a=0,s=fa.findChildren(n,"Period"),o=0;o<s.length;o++){var u=s[o],l=fa.parseAttr(u,"start",fa.parseDuration,a),c=fa.parseAttr(u,"duration",fa.parseDuration),d=null;if(o!=s.length-1){var h=s[o+1],f=fa.parseAttr(h,"start",fa.parseDuration);null!=f&&(d=f-l)}else null!=r&&(d=r-l);var p=Ae.GAP_OVERLAP_TOLERANCE_SECONDS;d&&c&&Math.abs(d-c)>p&&ns.log.warning("There is a gap/overlap between Periods",u),null==d&&(d=c);var m={start:l,duration:d,node:u,isLastPeriod:null==d||o==s.length-1},v=this.parsePeriod_(e,t,m);i.push(v);var y=e.period.id;if(window.asserts.assert(y,"Period IDs should not be null!"),this.periodIds_.includes(y)||(this.periodIds_.push(y),this.manifest_&&(this.playerInterface_.filterNewPeriod(v),this.manifest_.periods.push(v))),null==d){o!=s.length-1&&ns.log.warning("Skipping Period",o+1,"and any subsequent Periods:","Period",o+1,"does not have a valid start time.",i[o+1]),a=null;break}a=l+d}return null==this.manifest_&&this.playerInterface_.filterAllPeriods(i),null!=r?(a!=r&&ns.log.warning("@mediaPresentationDuration does not match the total duration of ","all Periods."),{periods:i,duration:r,durationDerivedFromPeriods:!1}):{periods:i,duration:a,durationDerivedFromPeriods:!0}}},{key:"parsePeriod_",value:function(e,t,n){var r=this,i=Ae.ContentType;e.period=this.createFrame_(n.node,null,t),e.periodInfo=n,e.period.id||(ns.log.info("No Period ID given for Period with start time "+n.start+",  Assigning a default"),e.period.id="__shaka_period_"+n.start);var a=fa.findChildren(n.node,"EventStream"),s=!0,o=!1,u=void 0;try{for(var l,c=a[Symbol.iterator]();!(s=(l=c.next()).done);s=!0){var d=l.value;this.parseEventStream_(n.start,n.duration,d)}}catch(e){o=!0,u=e}finally{try{s||null==c.return||c.return()}finally{if(o)throw u}}var h=fa.findChildren(n.node,"AdaptationSet").map(function(t){return r.parseAdaptationSet_(e,t)}).filter(ke.isNotNull);if(e.dynamic){var f=[],p=!0,m=!1,v=void 0;try{for(var y,g=h[Symbol.iterator]();!(p=(y=g.next()).done);p=!0){var _=y.value,b=!0,w=!1,E=void 0;try{for(var S,T=_.representationIds[Symbol.iterator]();!(b=(S=T.next()).done);b=!0){var C=S.value;f.push(C)}}catch(e){w=!0,E=e}finally{try{b||null==T.return||T.return()}finally{if(w)throw E}}}}catch(e){m=!0,v=e}finally{try{p||null==g.return||g.return()}finally{if(m)throw v}}var k=new Set(f);if(f.length!=k.size)throw new Error(Error.Severity.CRITICAL,Error.Category.MANIFEST,Error.Code.DASH_DUPLICATE_REPRESENTATION_ID)}var I=h.filter(function(e){return!e.trickModeFor}),A=h.filter(function(e){return e.trickModeFor}),L=!0,x=!1,R=void 0;try{for(var N,M=A[Symbol.iterator]();!(L=(N=M.next()).done);L=!0){var P=N.value,O=P.streams[0],D=P.trickModeFor,U=!0,F=!1,B=void 0;try{for(var V,j=I[Symbol.iterator]();!(U=(V=j.next()).done);U=!0){var H=V.value;if(H.id==D){var K=!0,G=!1,q=void 0;try{for(var W,z=H.streams[Symbol.iterator]();!(K=(W=z.next()).done);K=!0)W.value.trickModeVideo=O}catch(e){G=!0,q=e}finally{try{K||null==z.return||z.return()}finally{if(G)throw q}}}}}catch(e){F=!0,B=e}finally{try{U||null==j.return||j.return()}finally{if(F)throw B}}}}catch(e){x=!0,R=e}finally{try{L||null==M.return||M.return()}finally{if(x)throw R}}var Y=this.getSetsOfType_(I,i.VIDEO),X=this.getSetsOfType_(I,i.AUDIO);if(!Y.length&&!X.length)throw new Error(Error.Severity.CRITICAL,Error.Category.MANIFEST,Error.Code.DASH_EMPTY_PERIOD);X.length||(X=[null]),Y.length||(Y=[null]);var $=[],Z=!0,Q=!1,J=void 0;try{for(var ee,te=X[Symbol.iterator]();!(Z=(ee=te.next()).done);Z=!0){var ne=ee.value,re=!0,ie=!1,ae=void 0;try{for(var se,oe=Y[Symbol.iterator]();!(re=(se=oe.next()).done);re=!0){var ue=se.value;this.createVariants_(ne,ue,$)}}catch(e){ie=!0,ae=e}finally{try{re||null==oe.return||oe.return()}finally{if(ie)throw ae}}}}catch(e){Q=!0,J=e}finally{try{Z||null==te.return||te.return()}finally{if(Q)throw J}}var le=this.getSetsOfType_(I,i.TEXT),ce=[],de=!0,he=!1,fe=void 0;try{for(var pe,me=le[Symbol.iterator]();!(de=(pe=me.next()).done);de=!0){var ve=pe.value;ce.push.apply(ce,Za(ve.streams))}}catch(e){he=!0,fe=e}finally{try{de||null==me.return||me.return()}finally{if(he)throw fe}}return{startTime:n.start,textStreams:ce,variants:$}}},{key:"getSetsOfType_",value:function(e,t){return e.filter(function(e){return e.contentType==t})}},{key:"createVariants_",value:function(e,t,n){var r,i,a=Ae.ContentType;if(window.asserts.assert(!e||e.contentType==a.AUDIO,"Audio parameter mismatch!"),window.asserts.assert(!t||t.contentType==a.VIDEO,"Video parameter mismatch!"),e||t)if(e&&t){if(Yt.areDrmCompatible(e.drmInfos,t.drmInfos)){var s=Yt.getCommonDrmInfos(e.drmInfos,t.drmInfos),o=!0,u=!1,l=void 0;try{for(var c,d=e.streams[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){var h=c.value,f=!0,p=!1,m=void 0;try{for(var v,y=t.streams[Symbol.iterator]();!(f=(v=y.next()).done);f=!0){var g=v.value;r=(g.bandwidth||0)+(h.bandwidth||0),i={id:this.globalId_++,language:e.language,primary:e.main||t.main,audio:h,video:g,bandwidth:r,drmInfos:s,allowedByApplication:!0,allowedByKeySystem:!0},n.push(i)}}catch(e){p=!0,m=e}finally{try{f||null==y.return||y.return()}finally{if(p)throw m}}}}catch(e){u=!0,l=e}finally{try{o||null==d.return||d.return()}finally{if(u)throw l}}}}else{var _=e||t,b=!0,w=!1,E=void 0;try{for(var S,T=_.streams[Symbol.iterator]();!(b=(S=T.next()).done);b=!0){var C=S.value;r=C.bandwidth||0,i={id:this.globalId_++,language:_.language||"und",primary:_.main,audio:e?C:null,video:t?C:null,bandwidth:r,drmInfos:_.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0},n.push(i)}}catch(e){w=!0,E=e}finally{try{b||null==T.return||T.return()}finally{if(w)throw E}}}}},{key:"parseAdaptationSet_",value:function(t,n){var r=this,i=Ae.ContentType;t.adaptationSet=this.createFrame_(n,t.period,null);var a=!1,s=fa.findChildren(n,"Role"),o=s.map(function(e){return e.getAttribute("value")}).filter(ke.isNotNull),u=void 0,l=t.adaptationSet.contentType==i.TEXT;l&&(u=Ae.TextStreamKind.SUBTITLE);var c=!0,d=!1,h=void 0;try{for(var f,p=s[Symbol.iterator]();!(c=(f=p.next()).done);c=!0){var m=f.value,v=m.getAttribute("schemeIdUri");if(null==v||"urn:mpeg:dash:role:2011"==v){var y=m.getAttribute("value");switch(y){case"main":a=!0;break;case"caption":case"subtitle":u=y}}}}catch(e){d=!0,h=e}finally{try{c||null==p.return||p.return()}finally{if(d)throw h}}var g=fa.findChildren(n,"EssentialProperty"),_=null,b=!1,w=!0,E=!1,S=void 0;try{for(var T,C=g[Symbol.iterator]();!(w=(T=C.next()).done);w=!0){var k=T.value;"http://dashif.org/guidelines/trickmode"==k.getAttribute("schemeIdUri")?_=k.getAttribute("value"):b=!0}}catch(e){E=!0,S=e}finally{try{w||null==C.return||C.return()}finally{if(E)throw S}}var I=fa.findChildren(n,"Accessibility"),A=new Map,L=!0,x=!1,R=void 0;try{for(var N,M=I[Symbol.iterator]();!(L=(N=M.next()).done);L=!0){var P=N.value,O=P.getAttribute("schemeIdUri");if("urn:scte:dash:cc:cea-608:2015"==O||"urn:scte:dash:cc:cea-708:2015"==O){var D=1,U=P.getAttribute("value");if(null!=U){var F=!0,B=!1,V=void 0;try{for(var j,H=U.split(";")[Symbol.iterator]();!(F=(j=H.next()).done);F=!0){var K=j.value,G=void 0,q=void 0;if(K.includes("=")){var W=K.split("=");G=W[0].startsWith("CC")?W[0]:"CC"+W[0],q=W[1].split(",")[0].split(":").pop()}else G="CC"+D,D+=2,q=K;A.set(G,xe.normalize(q))}}catch(e){B=!0,V=e}finally{try{F||null==H.return||H.return()}finally{if(B)throw V}}}else A.set("CC1","und")}}}catch(e){x=!0,R=e}finally{try{L||null==M.return||M.return()}finally{if(x)throw R}}if(b)return null;var z=fa.findChildren(n,"ContentProtection"),Y=ya.parseFromAdaptationSet(z,this.config_.dash.customScheme,this.config_.dash.ignoreDrmInfo),X=xe.normalize(n.getAttribute("lang")||"und"),$=n.getAttribute("label"),Z=fa.findChildren(n,"Representation"),Q=Z.map(function(e){return r.parseRepresentation_(t,Y,u,X,$,a,o,A,e)}).filter(function(e){return!!e});if(0==Q.length){if(l)return null;throw new Error(Error.Severity.CRITICAL,Error.Category.MANIFEST,Error.Code.DASH_EMPTY_ADAPTATION_SET)}if(!t.adaptationSet.contentType||t.adaptationSet.contentType==i.APPLICATION){var J=Q[0].mimeType,ee=Q[0].codecs;t.adaptationSet.contentType=e.guessContentType_(J,ee);var te=!0,ne=!1,re=void 0;try{for(var ie,ae=Q[Symbol.iterator]();!(te=(ie=ae.next()).done);te=!0)ie.value.type=t.adaptationSet.contentType}catch(e){ne=!0,re=e}finally{try{te||null==ae.return||ae.return()}finally{if(ne)throw re}}}var se=!0,oe=!1,ue=void 0;try{for(var le,ce=Q[Symbol.iterator]();!(se=(le=ce.next()).done);se=!0){var de=le.value,he=!0,fe=!1,pe=void 0;try{for(var me,ve=Y.drmInfos[Symbol.iterator]();!(he=(me=ve.next()).done);he=!0){var ye=me.value;de.keyId&&ye.keyIds.push(de.keyId)}}catch(e){fe=!0,pe=e}finally{try{he||null==ve.return||ve.return()}finally{if(fe)throw pe}}}}catch(e){oe=!0,ue=e}finally{try{se||null==ce.return||ce.return()}finally{if(oe)throw ue}}var ge=Z.map(function(e){return e.getAttribute("id")}).filter(ke.isNotNull);return{id:t.adaptationSet.id||"__fake__"+this.globalId_++,contentType:t.adaptationSet.contentType,language:X,main:a,streams:Q,drmInfos:Y.drmInfos,trickModeFor:_,representationIds:ge}}},{key:"parseRepresentation_",value:function(e,t,n,r,i,a,s,o,u){var l,c=this,d=Ae.ContentType;if(e.representation=this.createFrame_(u,e.adaptationSet,null),!this.verifyRepresentation_(e.representation))return ns.log.warning("Skipping Representation",e.representation),null;e.bandwidth=fa.parseAttr(u,"bandwidth",fa.parsePositiveInt)||0;var h=e.representation.contentType,f=h==d.TEXT||h==d.APPLICATION;try{var p=function(e,t,n){return c.requestInitSegment_(e,t,n)};if(e.representation.segmentBase)l=Ga.createStream(e,p);else if(e.representation.segmentList)l=za.createStream(e,this.segmentIndexMap_);else if(e.representation.segmentTemplate){var m=!!this.manifest_;l=$a.createStream(e,p,this.segmentIndexMap_,m)}else{window.asserts.assert(f,"Must have Segment* with non-text streams.");var v=e.representation.baseUris,y=e.periodInfo.duration||0;l={createSegmentIndex:function(){return Promise.resolve()},findSegmentPosition:function(e){return e>=0&&e<y?1:null},getSegmentReference:function(e){return 1!=e?null:new Nn(1,0,y,function(){return v},0,null)},initSegmentReference:null,scaledPresentationTimeOffset:0}}}catch(e){if(f&&e.code==Error.Code.DASH_NO_SEGMENT_INFO)return null;throw e}var g=fa.findChildren(u,"ContentProtection"),_=ya.parseFromRepresentation(g,this.config_.dash.customScheme,t,this.config_.dash.ignoreDrmInfo);return{id:this.globalId_++,originalId:e.representation.id,createSegmentIndex:l.createSegmentIndex,findSegmentPosition:l.findSegmentPosition,getSegmentReference:l.getSegmentReference,initSegmentReference:l.initSegmentReference,presentationTimeOffset:l.scaledPresentationTimeOffset,mimeType:e.representation.mimeType,codecs:e.representation.codecs,frameRate:e.representation.frameRate,bandwidth:e.bandwidth,width:e.representation.width,height:e.representation.height,kind:n,encrypted:t.drmInfos.length>0,keyId:_,language:r,label:i,type:e.adaptationSet.contentType,primary:a,trickModeVideo:null,emsgSchemeIdUris:e.representation.emsgSchemeIdUris,roles:s,channelsCount:e.representation.numChannels,closedCaptions:o}}},{key:"onUpdate_",value:(o=Ja(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.asserts.assert(this.updatePeriod_>=0,"There should be an update period"),ns.log.info("Updating manifest..."),t=0,e.prev=3,e.next=6,this.requestManifest_();case 6:t=e.sent,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(3),window.asserts.assert(e.t0 instanceof Error,"Should only receive a Shaka error"),this.playerInterface_&&(e.t0.severity=Error.Severity.RECOVERABLE,this.playerInterface_.onError(e.t0));case 13:if(this.playerInterface_){e.next=15;break}return e.abrupt("return");case 15:this.setUpdateTimer_(t);case 16:case"end":return e.stop()}},e,this,[[3,9]])})),function(){return o.apply(this,arguments)})},{key:"setUpdateTimer_",value:function(t){if(!(this.updatePeriod_<0)){var n=Math.max(e.MIN_UPDATE_PERIOD_,this.updatePeriod_-t,this.averageUpdateDuration_.getEstimate());this.updateTimer_.tickAfter(n)}}},{key:"createFrame_",value:function(t,n,r){window.asserts.assert(n||r,"Must provide either parent or baseUris"),n=n||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,numChannels:null},r=r||n.baseUris;var i=fa.parseNonNegativeInt,a=fa.evalDivision,s=fa.findChildren(t,"BaseURL").map(fa.getContents),o=t.getAttribute("contentType")||n.contentType,u=t.getAttribute("mimeType")||n.mimeType,l=t.getAttribute("codecs")||n.codecs,c=fa.parseAttr(t,"frameRate",a)||n.frameRate,d=this.emsgSchemeIdUris_(fa.findChildren(t,"InbandEventStream"),n.emsgSchemeIdUris),h=fa.findChildren(t,"AudioChannelConfiguration"),f=this.parseAudioChannels_(h)||n.numChannels;return o||(o=e.guessContentType_(u,l)),{baseUris:Ae.resolveUris(r,s),segmentBase:fa.findChild(t,"SegmentBase")||n.segmentBase,segmentList:fa.findChild(t,"SegmentList")||n.segmentList,segmentTemplate:fa.findChild(t,"SegmentTemplate")||n.segmentTemplate,width:fa.parseAttr(t,"width",i)||n.width,height:fa.parseAttr(t,"height",i)||n.height,contentType:o,mimeType:u,codecs:l,frameRate:c,emsgSchemeIdUris:d,id:t.getAttribute("id"),numChannels:f}}},{key:"emsgSchemeIdUris_",value:function(e,t){var n=t.slice(),r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var u=s.value.getAttribute("schemeIdUri");n.includes(u)||n.push(u)}}catch(e){i=!0,a=e}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}return n}},{key:"parseAudioChannels_",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value,o=s.getAttribute("schemeIdUri");if(o){var u=s.getAttribute("value");if(u)switch(o){case"urn:mpeg:dash:outputChannelPositionList:2012":return u.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":var l=parseInt(u,10);if(!l){ns.log.warning("Channel parsing failure! Ignoring scheme and value",o,u);continue}return l;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":var c=parseInt(u,16);if(!c){ns.log.warning("Channel parsing failure! Ignoring scheme and value",o,u);continue}for(var d=0;c;)1&c&&++d,c>>=1;return d;default:ns.log.warning("Unrecognized audio channel scheme:",o,u);continue}}}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return null}},{key:"verifyRepresentation_",value:function(e){var t=Ae.ContentType,n=0;return n+=e.segmentBase?1:0,n+=e.segmentList?1:0,0==(n+=e.segmentTemplate?1:0)?e.contentType==t.TEXT||e.contentType==t.APPLICATION||(ns.log.warning("Representation does not contain a segment information source:","the Representation must contain one of SegmentBase, SegmentList,",'SegmentTemplate, or explicitly indicate that it is "text".',e),!1):(1!=n&&(ns.log.warning("Representation contains multiple segment information sources:","the Representation should only contain one of SegmentBase,","SegmentList, or SegmentTemplate.",e),e.segmentBase?(ns.log.info("Using SegmentBase by default."),e.segmentList=null,e.segmentTemplate=null):(window.asserts.assert(e.segmentList,"There should be a SegmentList"),ns.log.info("Using SegmentList by default."),e.segmentTemplate=null)),!0)}},{key:"requestForTiming_",value:(s=Ja(regeneratorRuntime.mark(function e(t,n,r){var i,a,s,o,u,l,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ae.resolveUris(t,[n]),(a=se.makeRequest(i,this.config_.retryParameters)).method=r,s=se.RequestType.TIMING,o=this.playerInterface_.networkingEngine.request(s,a),this.operationManager_.manage(o),e.next=8,o.promise;case 8:if(u=e.sent,"HEAD"!=r){e.next=16;break}if(u.headers&&u.headers.date){e.next=13;break}return ns.log.warning("UTC timing response is missing","expected date header"),e.abrupt("return",0);case 13:l=u.headers.date,e.next=17;break;case 16:l=Bt.fromUTF8(u.data);case 17:if(c=Date.parse(l),!isNaN(c)){e.next=21;break}return ns.log.warning("Unable to parse date from UTC timing response"),e.abrupt("return",0);case 21:return e.abrupt("return",c-Date.now());case 22:case"end":return e.stop()}},e,this)})),function(e,t,n){return s.apply(this,arguments)})},{key:"parseUtcTiming_",value:(a=Ja(regeneratorRuntime.mark(function e(t,n){var r,i,a,s,o,u,l,c,d,h,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n.map(function(e){return{scheme:e.getAttribute("schemeIdUri"),value:e.getAttribute("value")}}),i=this.config_.dash.clockSyncUri,!r.length&&i&&r.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:i}),a=!0,s=!1,o=void 0,e.prev=6,u=r[Symbol.iterator]();case 8:if(a=(l=u.next()).done){e.next=36;break}c=l.value,e.prev=10,d=c.scheme,h=c.value,e.t0=d,e.next="urn:mpeg:dash:utc:http-head:2014"===e.t0?16:"urn:mpeg:dash:utc:http-head:2012"===e.t0?16:"urn:mpeg:dash:utc:http-xsdate:2014"===e.t0?19:"urn:mpeg:dash:utc:http-iso:2014"===e.t0?19:"urn:mpeg:dash:utc:http-xsdate:2012"===e.t0?19:"urn:mpeg:dash:utc:http-iso:2012"===e.t0?19:"urn:mpeg:dash:utc:direct:2014"===e.t0?22:"urn:mpeg:dash:utc:direct:2012"===e.t0?22:"urn:mpeg:dash:utc:http-ntp:2014"===e.t0?24:"urn:mpeg:dash:utc:ntp:2014"===e.t0?24:"urn:mpeg:dash:utc:sntp:2014"===e.t0?24:26;break;case 16:return e.next=18,this.requestForTiming_(t,h,"HEAD");case 18:return e.abrupt("return",e.sent);case 19:return e.next=21,this.requestForTiming_(t,h,"GET");case 21:return e.abrupt("return",e.sent);case 22:return f=Date.parse(h),e.abrupt("return",isNaN(f)?0:f-Date.now());case 24:return ns.log.alwaysWarn("NTP UTCTiming scheme is not supported"),e.abrupt("break",28);case 26:return ns.log.alwaysWarn("Unrecognized scheme in UTCTiming element",d),e.abrupt("break",28);case 28:e.next=33;break;case 30:e.prev=30,e.t1=e.catch(10),ns.log.warning("Error fetching time from UTCTiming elem",e.t1.message);case 33:a=!0,e.next=8;break;case 36:e.next=42;break;case 38:e.prev=38,e.t2=e.catch(6),s=!0,o=e.t2;case 42:e.prev=42,e.prev=43,a||null==u.return||u.return();case 45:if(e.prev=45,!s){e.next=48;break}throw o;case 48:return e.finish(45);case 49:return e.finish(42);case 50:return ns.log.alwaysWarn("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),e.abrupt("return",0);case 52:case"end":return e.stop()}},e,this,[[6,38,42,50],[10,30],[43,,45,49]])})),function(e,t){return a.apply(this,arguments)})},{key:"parseEventStream_",value:function(e,t,n){var r=fa.parseNonNegativeInt,i=n.getAttribute("schemeIdUri")||"",a=n.getAttribute("value")||"",s=fa.parseAttr(n,"timescale",r)||1,o=!0,u=!1,l=void 0;try{for(var c,d=fa.findChildren(n,"Event")[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){var h=c.value,f=fa.parseAttr(h,"presentationTime",r)||0,p=fa.parseAttr(h,"duration",r)||0,m=f/s+e,v=m+p/s;null!=t&&(m=Math.min(m,e+t),v=Math.min(v,e+t));var y={schemeIdUri:i,value:a,startTime:m,endTime:v,id:h.getAttribute("id")||"",eventElement:h};this.playerInterface_.onTimelineRegionAdded(y)}}catch(e){u=!0,l=e}finally{try{o||null==d.return||d.return()}finally{if(u)throw l}}}},{key:"requestInitSegment_",value:(i=Ja(regeneratorRuntime.mark(function e(t,n,r){var i,a,s,o,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=se.RequestType.SEGMENT,a=Cr.createSegmentRequest(t,n,r,this.config_.retryParameters),s=this.playerInterface_.networkingEngine,o=s.request(i,a),this.operationManager_.manage(o),e.next=7,o.promise;case 7:return u=e.sent,e.abrupt("return",u.data);case 9:case"end":return e.stop()}},e,this)})),function(e,t,n){return i.apply(this,arguments)})}],r=[{key:"guessContentType_",value:function(e,t){var n=Ot.getFullType(e,t);return $n.isTypeSupported(n)?Ae.ContentType.TEXT:e.split("/")[0]}}],n&&es(t.prototype,n),r&&es(t,r),e}();function as(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ss(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */is.MIN_UPDATE_PERIOD_=3,is.RequestInitSegmentCallback={},is.InheritanceFrame={},is.Context={},is.PeriodInfo={},is.AdaptationInfo={},is.SegmentIndexFunctions={},is.StreamInfo={},tn.registerParserByExtension("mpd",is),tn.registerParserByMime("application/dash+xml",is);window.shaka,window.goog;var os=function e(t,n,r,i){ss(this,e),this.absoluteUri=t,this.type=n,this.tags=r,this.segments=i||null},us=0,ls=1,cs=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;ss(this,e),this.id=t,this.name=n,this.attributes=r,this.value=i}var t,n,r;return t=e,(n=[{key:"toString",value:function(){var e="#"+this.name,t=this.attributes?this.attributes.map(function(e){var t=isNaN(Number(e.value))?'"'+e.value+'"':e.value;return e.name+"="+t}):[];return this.value&&t.unshift(this.value),t.length>0&&(e+=":"+t.join(",")),e}},{key:"addAttribute",value:function(e){this.attributes.push(e)}},{key:"getAttribute",value:function(e){var t=this.attributes.filter(function(t){return t.name==e});return window.asserts.assert(t.length<2,"A tag should not have multiple attributes with the same name!"),t.length?t[0]:null}},{key:"getAttributeValue",value:function(e,t){var n=this.getAttribute(e);return n?n.value:t||null}}])&&as(t.prototype,n),r&&as(t,r),e}(),ds=function e(t,n){ss(this,e),this.name=t,this.value=n},hs=function e(t,n){ss(this,e),this.tags=n,this.absoluteUri=t};function fs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var ps=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"filterTagsByName",value:function(e,t){return e.filter(function(e){return e.name==t})}},{key:"getFirstTagWithName",value:function(t,n){var r=e.filterTagsByName(t,n);return r.length?r[0]:null}},{key:"findMediaTags",value:function(e,t,n){return e.filter(function(e){var r=e.getAttribute("TYPE"),i=e.getAttribute("GROUP-ID");return r.value==t&&i.value==n})}},{key:"constructAbsoluteUri",value:function(e,t){return Ae.resolveUris([e],[t])[0]}},{key:"isComment",value:function(e){return/^#(?!EXT)/m.test(e)}}],(n=null)&&fs(t.prototype,n),r&&fs(t,r),e}();function ms(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var vs=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data_=t,this.position_=0}var t,n,r;return t=e,(n=[{key:"atEnd",value:function(){return this.position_==this.data_.length}},{key:"readLine",value:function(){return this.readRegexReturnCapture_(/(.*?)(\n|$)/gm,1)}},{key:"readWord",value:function(){return this.readRegexReturnCapture_(/[^ \t\n]*/gm,0)}},{key:"skipWhitespace",value:function(){this.readRegex(/[ \t]+/gm)}},{key:"readRegex",value:function(e){var t=this.indexOf_(e);return this.atEnd()||null==t||t.position!=this.position_?null:(this.position_+=t.length,t.results)}},{key:"readRegexReturnCapture_",value:function(e,t){if(this.atEnd())return null;var n=this.readRegex(e);return n?n[t]:null}},{key:"indexOf_",value:function(e){window.asserts.assert(e.global,"global flag should be set"),e.lastIndex=this.position_;var t=e.exec(this.data_);return null==t?null:{position:t.index,length:t[0].length,results:t}}}])&&ms(t.prototype,n),r&&ms(t,r),e}();function ys(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var gs=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.globalId_=0}var t,n,r;return t=e,r=[{key:"parseTag",value:function(e,t){var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new M(M.Severity.CRITICAL,M.Category.MANIFEST,M.Code.INVALID_HLS_TAG,t);var r,i=n[1],a=n[2],s=[];if(a){var o,u=new vs(a),l=u.readRegex(/^([^,=]+)(?:,|$)/g);l&&(r=l[1]);for(var c=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;o=u.readRegex(c);){var d=o[1],h=o[2]||o[3],f=new ds(d,h);s.push(f)}}return new cs(e,i,s,r)}}],(n=[{key:"parsePlaylist",value:function(t,n){var r=e.MEDIA_PLAYLIST_TAGS,i=e.SEGMENT_TAGS,a=Bt.fromUTF8(t),s=(a=a.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim()).split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(s[0]))throw new M(M.Severity.CRITICAL,M.Category.MANIFEST,M.Code.HLS_PLAYLIST_HEADER_MISSING);for(var o=us,u=1;u<s.length;u++)if(!ps.isComment(s[u])){var l=this.parseTag_(s[u]);if(this.globalId_-=1,r.includes(l.name)){o=ls;break}"EXT-X-STREAM-INF"==l.name&&(u+=1)}for(var c=[],d=1;d<s.length;)if(ps.isComment(s[d]))d+=1;else{var h=this.parseTag_(s[d]);if(i.includes(h.name)){if(o!=ls)throw new M(M.Severity.CRITICAL,M.Category.MANIFEST,M.Code.HLS_INVALID_PLAYLIST_HIERARCHY);var f=s.splice(d,s.length-d),p=this.parseSegments_(n,f,c);return new os(n,o,c,p)}if(c.push(h),d+=1,"EXT-X-STREAM-INF"==h.name){var m=new ds("URI",s[d]);h.addAttribute(m),d+=1}}return new os(n,o,c)}},{key:"parseSegments_",value:function(t,n,r){var i=[],a=[],s=!0,o=!1,u=void 0;try{for(var l,c=n[Symbol.iterator]();!(s=(l=c.next()).done);s=!0){var d=l.value;if(/^(#EXT)/.test(d)){var h=this.parseTag_(d);e.MEDIA_PLAYLIST_TAGS.includes(h.name)?r.push(h):a.push(h)}else if(ps.isComment(d));else{var f=d.trim(),p=ps.constructAbsoluteUri(t,f),m=new hs(p,a);i.push(m),a=[]}}}catch(e){o=!0,u=e}finally{try{s||null==c.return||c.return()}finally{if(o)throw u}}return i}},{key:"parseTag_",value:function(t){return e.parseTag(this.globalId_++,t)}}])&&ys(t.prototype,n),r&&ys(t,r),e}();function _s(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function bs(e,t,n,r,i,a,s){try{var o=e[a](s),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,i)}function ws(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function s(e){bs(a,r,i,s,o,"next",e)}function o(e){bs(a,r,i,s,o,"throw",e)}s(void 0)})}}function Es(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}gs.MEDIA_PLAYLIST_TAGS=["EXT-X-TARGETDURATION","EXT-X-MEDIA-SEQUENCE","EXT-X-DISCONTINUITY-SEQUENCE","EXT-X-PLAYLIST-TYPE","EXT-X-MAP","EXT-X-I-FRAMES-ONLY","EXT-X-ENDLIST"],gs.SEGMENT_TAGS=["EXTINF","EXT-X-BYTERANGE","EXT-X-DISCONTINUITY","EXT-X-PROGRAM-DATE-TIME","EXT-X-KEY","EXT-X-DATERANGE"];
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ss=F.util.Mp4Parser,Ts=F.util.Error,Cs=F.util.Timer,ks=F.net.DataUriPlugin,Is=new Ts,As=window.shaka,Ls=(window.goog,function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.playerInterface_=null,this.config_=null,this.globalId_=1,this.mediaTagsToStreamInfosMap_=new Map,this.variantUriSet_=new Set,this.uriToStreamInfosMap_=new Map,this.presentationTimeline_=null,this.masterPlaylistUri_="",this.manifestTextParser_=new gs,this.updatePlaylistDelay_=0,this.updatePlaylistTimer_=new Cs(function(){t.onUpdate_()}),this.presentationType_=e.PresentationType_.VOD,this.manifest_=null,this.maxTargetDuration_=0,this.minTargetDuration_=1/0,this.operationManager_=new m,this.segmentsToNotifyByStream_=[],this.groupIdToClosedCaptionsMap_=new Map,this.aesEncrypted_=!1}var t,n,r,i,a,s,o,u,l,c,d,h,p,v,y,g,_;return t=e,n=[{key:"configure",value:function(e){this.config_=e}},{key:"start",value:(_=ws(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.asserts.assert(this.config_,"Must call configure() before start()!"),this.playerInterface_=n,e.next=4,this.requestManifest_(t);case 4:return r=e.sent,this.masterPlaylistUri_=r.uri,window.asserts.assert(r.data,"Response data should be non-null!"),e.next=9,this.parseManifest_(r.data);case 9:return(i=this.updatePlaylistDelay_)>0&&this.updatePlaylistTimer_.tickAfter(i),window.asserts.assert(this.manifest_,"Manifest should be non-null"),e.abrupt("return",this.manifest_);case 13:case"end":return e.stop()}},e,this)})),function(e,t){return _.apply(this,arguments)})},{key:"stop",value:function(){this.updatePlaylistTimer_&&(this.updatePlaylistTimer_.stop(),this.updatePlaylistTimer_=null);var e=[];return this.operationManager_&&(e.push(this.operationManager_.destroy()),this.operationManager_=null),this.playerInterface_=null,this.config_=null,this.mediaTagsToStreamInfosMap_.clear(),this.variantUriSet_.clear(),this.uriToStreamInfosMap_.clear(),this.manifest_=null,Promise.all(e)}},{key:"update",value:function(){if(!this.isLive_())return Promise.resolve();var e=[],t=!0,n=!1,r=void 0;try{for(var i,a=this.uriToStreamInfosMap_.values()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value;e.push(this.updateStream_(s))}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return Promise.all(e)}},{key:"updateStream_",value:(g=ws(regeneratorRuntime.mark(function t(n){var r,i,a,s,o,u,l,c,d;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.PresentationType_,i=n.absoluteMediaPlaylistUri,t.next=4,this.requestManifest_(i);case 4:if(a=t.sent,(s=this.manifestTextParser_.parsePlaylist(a.data,a.uri)).type==ls){t.next=8;break}throw new Ts(Is.severity.CRITICAL,Is.category.MANIFEST,Is.code.HLS_INVALID_PLAYLIST_HIERARCHY);case 8:return o=ps.getFirstTagWithName(s.tags,"EXT-X-MEDIA-SEQUENCE"),u=o?Number(o.value):0,l=n.stream,t.next=13,this.createSegments_(n.verbatimMediaPlaylistUri,s,u,l.mimeType,l.codecs);case 13:c=t.sent,n.segmentIndex.replace(c),d=c[c.length-1],window.asserts.assert(d,"Should have segments!"),ps.getFirstTagWithName(s.tags,"EXT-X-ENDLIST")&&(this.setPresentationType_(r.VOD),this.presentationTimeline_.setDuration(d.endTime));case 19:case"end":return t.stop()}},t,this)})),function(e){return g.apply(this,arguments)})},{key:"onExpirationUpdated",value:function(e,t){}},{key:"parseManifest_",value:(y=ws(regeneratorRuntime.mark(function t(n){var r,i,a,s,o,u,l,c,d,h,f,p,m,v,y,g,_,b,w,E,S,T,C,k,I,A,L,x;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(window.asserts.assert(this.masterPlaylistUri_,"Master playlist URI must be set before calling parseManifest_!"),(r=this.manifestTextParser_.parsePlaylist(n,this.masterPlaylistUri_)).type==us){t.next=4;break}throw new Ts(Is.severity.CRITICAL,Is.category.MANIFEST,Is.code.HLS_MASTER_PLAYLIST_NOT_PROVIDED);case 4:return t.next=6,this.createPeriod_(r);case 6:if(i=t.sent,this.playerInterface_){t.next=9;break}throw new Ts(Is.severity.CRITICAL,Is.category.PLAYER,Is.code.OPERATION_ABORTED);case 9:if(!this.aesEncrypted_||0!=i.variants.length){t.next=12;break}throw As.log.info("No stream is created, because we don't support AES-128","encryption yet"),new Ts(Is.severity.CRITICAL,Is.category.MANIFEST,Is.code.HLS_AES_128_ENCRYPTION_NOT_SUPPORTED);case 12:for(this.playerInterface_.filterAllPeriods([i]),a=1/0,s=0,o=0,u=1/0,l=!0,c=!1,d=void 0,t.prev=20,h=this.uriToStreamInfosMap_.values()[Symbol.iterator]();!(l=(f=h.next()).done);l=!0)p=f.value,a=Math.min(a,p.minTimestamp),s=Math.max(s,p.minTimestamp),o=Math.max(o,p.maxTimestamp),"text"!=p.stream.type&&(u=Math.min(u,p.duration));t.next=28;break;case 24:t.prev=24,t.t0=t.catch(20),c=!0,d=t.t0;case 28:t.prev=28,t.prev=29,l||null==h.return||h.return();case 31:if(t.prev=31,!c){t.next=34;break}throw d;case 34:return t.finish(31);case 35:return t.finish(28);case 36:if(window.asserts.assert(null==this.presentationTimeline_,"Presentation timeline created early!"),this.createPresentationTimeline_(o),window.asserts.assert(this.presentationTimeline_,"Presentation timeline not created!"),!this.isLive_()){t.next=69;break}for(this.updatePlaylistDelay_=this.minTargetDuration_,m=e.PresentationType_,this.presentationType_==m.LIVE&&(v=this.presentationTimeline_.getDelay(),isNaN(this.config_.availabilityWindowOverride)||(v=this.config_.availabilityWindowOverride),this.presentationTimeline_.setSegmentAvailabilityDuration(v)),y=e.TS_ROLLOVER_/e.TS_TIMESCALE_,g=0;s>=y;)g+=y,s-=y;if(!g){t.next=67;break}for(As.log.debug("Offsetting live streams by",g,"to compensate for rollover"),_=!0,b=!1,w=void 0,t.prev=51,E=this.uriToStreamInfosMap_.values()[Symbol.iterator]();!(_=(S=E.next()).done);_=!0)(T=S.value).minTimestamp<y?(As.log.v1("Offset applied to",T.stream.type),T.stream.presentationTimeOffset=-g,T.segmentIndex.offset(g)):As.log.v1("Offset NOT applied to",T.stream.type);t.next=59;break;case 55:t.prev=55,t.t1=t.catch(51),b=!0,w=t.t1;case 59:t.prev=59,t.prev=60,_||null==E.return||E.return();case 62:if(t.prev=62,!b){t.next=65;break}throw w;case 65:return t.finish(62);case 66:return t.finish(59);case 67:t.next=90;break;case 69:for(this.presentationTimeline_.setDuration(u),this.presentationTimeline_.offset(-a),C=!0,k=!1,I=void 0,t.prev=74,A=this.uriToStreamInfosMap_.values()[Symbol.iterator]();!(C=(L=A.next()).done);C=!0)(x=L.value).stream.presentationTimeOffset=a,x.segmentIndex.offset(-a),x.segmentIndex.fit(u);t.next=82;break;case 78:t.prev=78,t.t2=t.catch(74),k=!0,I=t.t2;case 82:t.prev=82,t.prev=83,C||null==A.return||A.return();case 85:if(t.prev=85,!k){t.next=88;break}throw I;case 88:return t.finish(85);case 89:return t.finish(82);case 90:this.manifest_={presentationTimeline:this.presentationTimeline_,periods:[i],offlineSessionIds:[],minBufferTime:0};case 91:case"end":return t.stop()}},t,this,[[20,24,28,36],[29,,31,35],[51,55,59,67],[60,,62,66],[74,78,82,90],[83,,85,89]])})),function(e){return y.apply(this,arguments)})},{key:"createPeriod_",value:(v=ws(regeneratorRuntime.mark(function t(n){var r,i,a,s,o,u,l,c,d,h,f=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.tags,i=ps.filterTagsByName(n.tags,"EXT-X-MEDIA"),a=i.filter(function(t){return"SUBTITLES"==e.getRequiredAttributeValue_(t,"TYPE")}),s=a.map(function(e){return f.createTextStream_(e,n)}),o=i.filter(function(t){return"CLOSED-CAPTIONS"==e.getRequiredAttributeValue_(t,"TYPE")}),this.parseClosedCaptions_(o),t.next=8,Promise.all(s);case 8:return u=t.sent,l=ps.filterTagsByName(r,"EXT-X-STREAM-INF"),c=l.map(function(e){return f.createVariantsForTag_(e,n)}),t.next=13,Promise.all(c);case 13:return d=t.sent,h=(h=d.reduce(ke.collapseArrays,[])).filter(function(e){return null!=e}),t.abrupt("return",{startTime:0,variants:h,textStreams:u});case 17:case"end":return t.stop()}},t,this)})),function(e){return v.apply(this,arguments)})},{key:"createVariantsForTag_",value:(p=ws(regeneratorRuntime.mark(function t(n,r){var i,a,s,o,u,l,c,d,h,p,m,v,y,g,_,b,w,E,S,T,C,k,I,A,L,x=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return window.asserts.assert("EXT-X-STREAM-INF"==n.name,"Should only be called on variant tags!"),i=Ae.ContentType,a=n.getAttributeValue("CODECS","avc1.42E01E,mp4a.40.2"),s=e.filterDuplicateCodecs_(a.split(/\s*,\s*/)),o=n.getAttribute("RESOLUTION"),u=null,l=null,c=n.getAttributeValue("FRAME-RATE"),d=Number(e.getRequiredAttributeValue_(n,"BANDWIDTH")),o&&(h=o.value.split("x"),u=h[0],l=h[1]),p=(p=(p=ps.filterTagsByName(r.tags,"EXT-X-MEDIA")).filter(function(t){return"CLOSED-CAPTIONS"!=e.getRequiredAttributeValue_(t,"TYPE")})).filter(function(e){var t=e.getAttributeValue("URI")||"";return"SUBTITLES"==(e.getAttributeValue("TYPE")||"")||""!=t}),m=n.getAttributeValue("AUDIO"),v=n.getAttributeValue("VIDEO"),window.asserts.assert(null==m||null==v,"Unexpected: both video and audio described by media tags!"),m?p=ps.findMediaTags(p,"AUDIO",m):v&&(p=ps.findMediaTags(p,"VIDEO",v)),(y=this.guessCodecsSafe_(i.TEXT,s))&&((g=n.getAttributeValue("SUBTITLES"))&&(_=ps.findMediaTags(p,"SUBTITLES",g),window.asserts.assert(1==_.length,"Exactly one text tag expected!"),_.length&&(this.mediaTagsToStreamInfosMap_.get(_[0].id).stream.codecs=y)),f.remove(s,y)),b=p.map(function(e){return x.createStreamInfoFromMediaTag_(e,s)}),w=[],E=[],t.next=25,Promise.all(b);case 25:if(T=(T=t.sent).filter(function(e){return null!=e}),m?w=T:v&&(E=T),As.log.debug("Guessing stream type for",n.toString()),k=!1,w.length||E.length?w.length?(A=e.getRequiredAttributeValue_(n,"URI"),L=w[0].verbatimMediaPlaylistUri,A==L?(As.log.debug("Guessing audio-only."),C=i.AUDIO,k=!0):(As.log.debug("Guessing video."),C=i.VIDEO)):(window.asserts.assert(E.length,"No video streams!  This should have been handled already!"),As.log.debug("Guessing audio."),C=i.AUDIO):1==s.length?(I=this.guessCodecsSafe_(i.VIDEO,s),o||c||I?(As.log.debug("Guessing video-only."),C=i.VIDEO):(As.log.debug("Guessing audio-only."),C=i.AUDIO)):(As.log.debug("Guessing multiplexed audio+video."),C=i.VIDEO,s=[s.join(",")]),window.asserts.assert(C,"Type should have been set by now!"),k){t.next=36;break}return t.next=35,this.createStreamInfoFromVariantTag_(n,s,C);case 35:S=t.sent;case 36:if(!S){t.next=40;break}S.stream.type==i.AUDIO?w=[S]:E=[S],t.next=43;break;case 40:if(null!==S){t.next=43;break}return As.log.debug("streamInfo is null"),t.abrupt("return",[]);case 43:return window.asserts.assert(E.length||w.length,"We should have created a stream!"),E&&this.filterLegacyCodecs_(E),w&&this.filterLegacyCodecs_(w),t.abrupt("return",this.createVariants_(w,E,d,u,l,c));case 47:case"end":return t.stop()}},t,this)})),function(e,t){return p.apply(this,arguments)})},{key:"filterLegacyCodecs_",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value,o=s.stream.codecs.split(",");o=o.filter(function(e){return"mp4a.40.34"!=e}),s.stream.codecs=o.join(",")}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"createVariants_",value:function(e,t,n,r,i,a){var s=!0,o=!1,u=void 0;try{for(var l,c=t[Symbol.iterator]();!(s=(l=c.next()).done);s=!0){var d=l.value;this.addVideoAttributes_(d.stream,r,i,a)}}catch(e){o=!0,u=e}finally{try{s||null==c.return||c.return()}finally{if(o)throw u}}e.length||(e=[null]),t.length||(t=[null]);var h=[],f=!0,p=!1,m=void 0;try{for(var v,y=e[Symbol.iterator]();!(f=(v=y.next()).done);f=!0){var g=v.value,_=!0,b=!1,w=void 0;try{for(var E,S=t[Symbol.iterator]();!(_=(E=S.next()).done);_=!0){var T=E.value,C=g?g.stream:null,k=T?T.stream:null,I=g?g.drmInfos:null,A=T?T.drmInfos:null,L=(T?T.verbatimMediaPlaylistUri:"")+" - "+(g?g.verbatimMediaPlaylistUri:""),x=void 0;if(C&&k){if(!Yt.areDrmCompatible(I,A)){As.log.warning("Incompatible DRM info in HLS variant.  Skipping.");continue}x=Yt.getCommonDrmInfos(I,A)}else C?x=I:k&&(x=A);if(this.variantUriSet_.has(L))As.log.debug("Skipping variant which only differs in text streams.");else{var R=this.createVariant_(C,k,n,x);h.push(R),this.variantUriSet_.add(L)}}}catch(e){b=!0,w=e}finally{try{_||null==S.return||S.return()}finally{if(b)throw w}}}}catch(e){p=!0,m=e}finally{try{f||null==y.return||y.return()}finally{if(p)throw m}}return h}},{key:"createVariant_",value:function(e,t,n,r){var i=Ae.ContentType;return window.asserts.assert(!e||e.type==i.AUDIO,"Audio parameter mismatch!"),window.asserts.assert(!t||t.type==i.VIDEO,"Video parameter mismatch!"),{id:this.globalId_++,language:e?e.language:"und",primary:!!e&&e.primary||!!t&&t.primary,audio:e,video:t,bandwidth:n,drmInfos:r,allowedByApplication:!0,allowedByKeySystem:!0}}},{key:"createTextStream_",value:(h=ws(regeneratorRuntime.mark(function t(n,r){var i,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return window.asserts.assert("EXT-X-MEDIA"==n.name,"Should only be called on media tags!"),i=e.getRequiredAttributeValue_(n,"TYPE"),window.asserts.assert("SUBTITLES"==i,'Should only be called on tags with TYPE="SUBTITLES"!'),t.next=5,this.createStreamInfoFromMediaTag_(n,[]);case 5:return a=t.sent,window.asserts.assert(a,"Should always have a streamInfo for text"),t.abrupt("return",a.stream);case 8:case"end":return t.stop()}},t,this)})),function(e,t){return h.apply(this,arguments)})},{key:"parseClosedCaptions_",value:function(t){var n=!0,r=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;window.asserts.assert("EXT-X-MEDIA"==o.name,"Should only be called on media tags!");var u=e.getRequiredAttributeValue_(o,"TYPE");window.asserts.assert("CLOSED-CAPTIONS"==u,'Should only be called on tags with TYPE="CLOSED-CAPTIONS"!');var l=o.getAttributeValue("LANGUAGE")||"und",c=xe.normalize(l),d=e.getRequiredAttributeValue_(o,"GROUP-ID"),h=e.getRequiredAttributeValue_(o,"INSTREAM-ID");this.groupIdToClosedCaptionsMap_.get(d)||this.groupIdToClosedCaptionsMap_.set(d,new Map),this.groupIdToClosedCaptionsMap_.get(d).set(h,c)}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}}},{key:"createStreamInfoFromMediaTag_",value:(d=ws(regeneratorRuntime.mark(function t(n,r){var i,a,s,o,u,l,c,d,h,f,p;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(window.asserts.assert("EXT-X-MEDIA"==n.name,"Should only be called on media tags!"),i=e.getRequiredAttributeValue_(n,"URI"),!this.uriToStreamInfosMap_.has(i)){t.next=4;break}return t.abrupt("return",this.uriToStreamInfosMap_.get(i));case 4:return a=e.getRequiredAttributeValue_(n,"TYPE").toLowerCase(),s=Ae.ContentType,"subtitles"==a&&(a=s.TEXT),o=xe.normalize(n.getAttributeValue("LANGUAGE","und")),u=n.getAttributeValue("NAME"),l=n.getAttribute("DEFAULT"),c=n.getAttribute("AUTOSELECT"),d=n.getAttributeValue("CHANNELS"),h="audio"==a?this.getChannelCount_(d):null,f=!!l||!!c,t.next=16,this.createStreamInfo_(i,r,a,o,f,u,h,null);case 16:if(null!=(p=t.sent)){t.next=19;break}return t.abrupt("return",null);case 19:if(!this.uriToStreamInfosMap_.has(i)){t.next=21;break}return t.abrupt("return",this.uriToStreamInfosMap_.get(i));case 21:return this.mediaTagsToStreamInfosMap_.set(n.id,p),this.uriToStreamInfosMap_.set(i,p),t.abrupt("return",p);case 24:case"end":return t.stop()}},t,this)})),function(e,t){return d.apply(this,arguments)})},{key:"getChannelCount_",value:function(e){if(!e)return null;var t=e.split("/")[0];return parseInt(t,10)}},{key:"createStreamInfoFromVariantTag_",value:(c=ws(regeneratorRuntime.mark(function t(n,r,i){var a,s,o,u,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(window.asserts.assert("EXT-X-STREAM-INF"==n.name,"Should only be called on media tags!"),a=Ae.ContentType,s=e.getRequiredAttributeValue_(n,"URI"),!this.uriToStreamInfosMap_.has(s)){t.next=5;break}return t.abrupt("return",this.uriToStreamInfosMap_.get(s));case 5:return o=n.getAttributeValue("CLOSED-CAPTIONS"),u=null,i==a.VIDEO&&o&&"NONE"!=o&&(u=this.groupIdToClosedCaptionsMap_.get(o)),t.next=10,this.createStreamInfo_(s,r,i,"und",!1,null,null,u);case 10:if(null!=(l=t.sent)){t.next=13;break}return t.abrupt("return",null);case 13:if(!this.uriToStreamInfosMap_.has(s)){t.next=15;break}return t.abrupt("return",this.uriToStreamInfosMap_.get(s));case 15:return this.uriToStreamInfosMap_.set(s,l),t.abrupt("return",l);case 17:case"end":return t.stop()}},t,this)})),function(e,t,n){return c.apply(this,arguments)})},{key:"createStreamInfo_",value:(l=ws(regeneratorRuntime.mark(function t(n,r,i,a,s,o,u,l){var c,d,h,f,p,m,v,y,g,_,b,w,E,S,T,C,k,I,A,L,x,R,N,M,P,O,D,U,F,B,V,j,H,K;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c=ps.constructAbsoluteUri(this.masterPlaylistUri_,n),d="",t.next=4,this.requestManifest_(c);case 4:if(h=t.sent,c=h.uri,(f=this.manifestTextParser_.parsePlaylist(h.data,c)).type==ls){t.next=9;break}throw new Ts(Is.severity.CRITICAL,Is.category.MANIFEST,Is.code.HLS_INVALID_PLAYLIST_HIERARCHY);case 9:if(p=[],!f.segments){t.next=30;break}for(m=!0,v=!1,y=void 0,t.prev=14,g=f.segments[Symbol.iterator]();!(m=(_=g.next()).done);m=!0)b=_.value,w=ps.filterTagsByName(b.tags,"EXT-X-KEY"),p.push.apply(p,_s(w));t.next=22;break;case 18:t.prev=18,t.t0=t.catch(14),v=!0,y=t.t0;case 22:t.prev=22,t.prev=23,m||null==g.return||g.return();case 25:if(t.prev=25,!v){t.next=28;break}throw y;case 28:return t.finish(25);case 29:return t.finish(22);case 30:E=!1,S=[],T=null,C=0,k=p;case 34:if(!(C<k.length)){t.next=50;break}if(I=k[C],"NONE"==(A=e.getRequiredAttributeValue_(I,"METHOD"))){t.next=47;break}if(E=!0,"AES-128"!=A){t.next=43;break}return As.log.warning("Unsupported HLS Encryption",A),this.aesEncrypted_=!0,t.abrupt("return",null);case 43:L=e.getRequiredAttributeValue_(I,"KEYFORMAT"),x=e.KEYFORMATS_TO_DRM_PARSERS_[L],(R=x?x(I):null)?(R.keyIds.length&&(T=R.keyIds[0]),S.push(R)):As.log.warning("Unsupported HLS KEYFORMAT",L);case 47:C++,t.next=34;break;case 50:if(!E||S.length){t.next=52;break}throw new Ts(Is.severity.CRITICAL,Is.category.MANIFEST,Is.code.HLS_KEYFORMATS_NOT_SUPPORTED);case 52:return window.asserts.assert(null!=f.segments,"Media playlist should have segments!"),this.determinePresentationType_(f),d=this.guessCodecs_(i,r),t.next=57,this.guessMimeType_(i,d,f);case 57:return N=t.sent,M=N,P=ps.getFirstTagWithName(f.tags,"EXT-X-MEDIA-SEQUENCE"),O=P?Number(P.value):0,t.next=63,this.createSegments_(n,f,O,M,d);case 63:return D=t.sent,U=D[0].startTime,F=D[D.length-1].endTime,B=F-U,V=new Dn(D),j=this.createInitSegmentReference_(f),H=void 0,i==Ae.ContentType.TEXT&&(H=Ae.TextStreamKind.SUBTITLE),K={id:this.globalId_++,originalId:o,createSegmentIndex:function(){return Promise.resolve()},findSegmentPosition:function(e){return V.find(e)},getSegmentReference:function(e){return V.get(e)},initSegmentReference:j,presentationTimeOffset:0,mimeType:M,codecs:d,kind:H,encrypted:E,keyId:T,language:a,label:o,type:i,primary:s,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:[],channelsCount:u,closedCaptions:l},t.abrupt("return",{stream:K,segmentIndex:V,drmInfos:S,verbatimMediaPlaylistUri:n,absoluteMediaPlaylistUri:c,minTimestamp:U,maxTimestamp:F,duration:B});case 73:case"end":return t.stop()}},t,this,[[14,18,22,30],[23,,25,29]])})),function(e,t,n,r,i,a,s,o){return l.apply(this,arguments)})},{key:"determinePresentationType_",value:function(t){var n=e.PresentationType_,r=ps.getFirstTagWithName(t.tags,"EXT-X-PLAYLIST-TYPE"),i=ps.getFirstTagWithName(t.tags,"EXT-X-ENDLIST"),a=r&&"VOD"==r.value||i,s=r&&"EVENT"==r.value&&!a,o=!a&&!s;if(a)this.setPresentationType_(n.VOD);else{o?this.setPresentationType_(n.LIVE):this.setPresentationType_(n.EVENT);var u=this.getRequiredTag_(t.tags,"EXT-X-TARGETDURATION"),l=Number(u.value);this.maxTargetDuration_=Math.max(l,this.maxTargetDuration_),this.minTargetDuration_=Math.min(l,this.minTargetDuration_)}}},{key:"createPresentationTimeline_",value:function(e){this.isLive_()?(this.presentationTimeline_=new In(0,3*this.maxTargetDuration_),this.presentationTimeline_.setStatic(!1)):(this.presentationTimeline_=new In(null,0),this.presentationTimeline_.setStatic(!0)),this.notifySegments_(),window.asserts.assert(!this.presentationTimeline_.usingPresentationStartTime(),"We should not be using the presentation start time in HLS!")}},{key:"createInitSegmentReference_",value:function(t){var n=ps.filterTagsByName(t.tags,"EXT-X-MAP");if(!n.length)return null;if(n.length>1)throw new Ts(Is.severity.CRITICAL,Is.category.MANIFEST,Is.code.HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND);var r=n[0],i=e.getRequiredAttributeValue_(r,"URI"),a=ps.constructAbsoluteUri(t.absoluteUri,i),s=0,o=null,u=r.getAttributeValue("BYTERANGE");if(u){var l=u.split("@"),c=Number(l[0]);o=(s=Number(l[1]))+c-1}return new Rn(function(){return[a]},s,o)}},{key:"createSegmentReference_",value:function(e,t,n,r,i){var a=n.tags,s=n.absoluteUri,o=this.getRequiredTag_(a,"EXTINF").value.split(","),u=i+Number(o[0]),l=0,c=null,d=ps.getFirstTagWithName(a,"EXT-X-BYTERANGE");if(d){var h=d.value.split("@"),f=Number(h[0]);h[1]?l=Number(h[1]):(window.asserts.assert(t,"Cannot refer back to previous HLS segment!"),l=t.endByte+1),c=l+f-1}return new Nn(r,i,u,function(){return[s]},l,c)}},{key:"notifySegments_",value:function(){if(this.presentationTimeline_){var e=!0,t=!1,n=void 0;try{for(var r,i=this.segmentsToNotifyByStream_[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var a=r.value;this.presentationTimeline_.notifySegments(a,0)}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this.segmentsToNotifyByStream_=[]}}},{key:"createSegments_",value:(u=ws(regeneratorRuntime.mark(function e(t,n,r,i,a){var s,o,u,l,c,d,h,f,p,m,v,y;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.segments,o=[],window.asserts.assert(s.length,"Playlist should have segments!"),u=s[0].absoluteUri,l=this.createSegmentReference_(n,null,s[0],r,0),c=this.createInitSegmentReference_(n),e.next=8,this.getStartTime_(t,c,l,i,a);case 8:for(d=e.sent,As.log.debug("First segment",u.split("/").pop(),"starts at",d),h=0;h<s.length;++h)f=s[h],p=o[o.length-1],m=0==h?d:p.endTime,v=r+h,y=this.createSegmentReference_(n,p,f,v,m),o.push(y);return this.segmentsToNotifyByStream_.push(o),this.notifySegments_(),e.abrupt("return",o);case 14:case"end":return e.stop()}},e,this)})),function(e,t,n,r,i){return u.apply(this,arguments)})},{key:"fetchPartialSegment_",value:(o=ws(regeneratorRuntime.mark(function t(n){var r,i,a,s,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=se.RequestType,i=Cr.createSegmentRequest(n.getUris(),n.startByte,n.startByte+e.PARTIAL_SEGMENT_SIZE_-1,this.config_.retryParameters),a=Cr.createSegmentRequest(n.getUris(),n.startByte,n.endByte,this.config_.retryParameters),t.prev=3,t.next=6,this.makeNetworkRequest_(i,r.SEGMENT);case 6:return s=t.sent,t.abrupt("return",s);case 10:if(t.prev=10,t.t0=t.catch(3),t.t0.code!=Is.code.OPERATION_ABORTED){t.next=14;break}throw t.t0;case 14:return As.log.alwaysWarn("Unable to fetch a partial HLS segment! Falling back to a full segment request, which is expensive!  Your server should support Range requests and CORS preflights.",i.uris[0]),t.next=17,this.makeNetworkRequest_(a,r.SEGMENT);case 17:return o=t.sent,t.abrupt("return",o);case 19:case"end":return t.stop()}},t,this,[[3,10]])})),function(e){return o.apply(this,arguments)})},{key:"getStartTime_",value:(s=ws(regeneratorRuntime.mark(function e(t,n,r,i,a){var s,o,u,l,c,d,h,f,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.manifest_){e.next=8;break}if(s=this.uriToStreamInfosMap_.get(t),o=s.segmentIndex,!(u=o.get(r.position))){e.next=7;break}return As.log.v1("Found segment start time in previous manifest"),e.abrupt("return",u.startTime);case 7:As.log.debug("Unable to find segment start time in previous manifest!");case 8:if(As.log.v1("Fetching segment to find start time"),"audio/mpeg"!=i){e.next=11;break}return e.abrupt("return",0);case 11:if("video/mp4"!=i&&"audio/mp4"!=i){e.next=20;break}return l=[this.fetchPartialSegment_(r)],n&&l.push(this.fetchPartialSegment_(n)),e.next=16,Promise.all(l);case 16:return c=e.sent,d=c[0],h=c[1]||c[0],e.abrupt("return",this.getStartTimeFromMp4Segment_(d.data,h.data));case 20:if("video/mp2t"!=i){e.next=26;break}return e.next=23,this.fetchPartialSegment_(r);case 23:return f=e.sent,window.asserts.assert(f.data,"Should have a response body!"),e.abrupt("return",this.getStartTimeFromTsSegment_(f.data));case 26:if("application/mp4"!=i&&!i.startsWith("text/")){e.next=32;break}return e.next=29,this.fetchPartialSegment_(r);case 29:return p=e.sent,window.asserts.assert(p.data,"Should have a response body!"),e.abrupt("return",this.getStartTimeFromTextSegment_(i,a,p.data));case 32:throw new Ts(Is.severity.CRITICAL,Is.category.MANIFEST,Is.code.HLS_COULD_NOT_PARSE_SEGMENT_START_TIME);case 33:case"end":return e.stop()}},e,this)})),function(e,t,n,r,i){return s.apply(this,arguments)})},{key:"getStartTimeFromMp4Segment_",value:function(e,t){var n=0;if((new Ss).box("moov",Ss.children).box("trak",Ss.children).box("mdia",Ss.children).fullBox("mdhd",function(e){window.asserts.assert(0==e.version||1==e.version,"MDHD version can only be 0 or 1"),e.reader.skip(0==e.version?8:16),n=e.reader.readUint32(),e.parser.stop()}).parse(t,!0),!n)throw As.log.error("Unable to find timescale in init segment!"),new Ts(Is.severity.CRITICAL,Is.category.MANIFEST,Is.code.HLS_COULD_NOT_PARSE_SEGMENT_START_TIME);var r=0,i=!1;if((new Ss).box("moof",Ss.children).box("traf",Ss.children).fullBox("tfdt",function(e){window.asserts.assert(0==e.version||1==e.version,"TFDT version can only be 0 or 1");var t=0==e.version?e.reader.readUint32():e.reader.readUint64();r=t/n,i=!0,e.parser.stop()}).parse(e,!0),!i)throw new Ts(Is.severity.CRITICAL,Is.category.MANIFEST,Is.code.HLS_COULD_NOT_PARSE_SEGMENT_START_TIME);return r}},{key:"getStartTimeFromTsSegment_",value:function(t){for(var n=new xa(new DataView(t),xa.Endianness.BIG_ENDIAN),r=function(){throw new Ts(Is.severity.CRITICAL,Is.category.MANIFEST,Is.code.HLS_COULD_NOT_PARSE_SEGMENT_START_TIME)},i=0,a=0;;){i=n.getPosition(),71!=(a=n.readUint8())&&r(),16384&n.readUint16()||r();var s=(48&n.readUint8())>>4;if(0!=s&&2!=s||r(),3==s){var o=n.readUint8();n.skip(o)}if(1==n.readUint32()>>8){n.skip(3);var u=n.readUint8()>>6;0!=u&&1!=u||r();var l=n.readUint8();return 0==l&&r(),2==u?window.asserts.assert(5==l,"Bad PES header?"):3==u&&window.asserts.assert(10==l,"Bad PES header?"),(((14&n.readUint8())>>1)*(1<<30)+((65534&n.readUint16())<<14|(65534&n.readUint16())>>1))/e.TS_TIMESCALE_}n.seek(i+188),71!=(a=n.readUint8())&&(n.seek(i+192),a=n.readUint8()),71!=a&&(n.seek(i+204),a=n.readUint8()),71!=a&&r(),n.rewind(1)}}},{key:"getStartTimeFromTextSegment_",value:function(e,t,n){var r=Ot.getFullType(e,t);if(!$n.isTypeSupported(r))return 0;var i=new $n(null);return i.initParser(r),i.getStartTime(n)}},{key:"guessCodecsSafe_",value:function(t,n){var r=Ae.ContentType,i=e.CODEC_REGEXPS_BY_CONTENT_TYPE_[t],a=!0,s=!1,o=void 0;try{for(var u,l=i[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var c=u.value,d=!0,h=!1,f=void 0;try{for(var p,m=n[Symbol.iterator]();!(d=(p=m.next()).done);d=!0){var v=p.value;if(c.test(v.trim()))return v.trim()}}catch(e){h=!0,f=e}finally{try{d||null==m.return||m.return()}finally{if(h)throw f}}}}catch(e){s=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(s)throw o}}return t==r.TEXT?"":null}},{key:"guessCodecs_",value:function(e,t){if(1==t.length)return t[0];var n=this.guessCodecsSafe_(e,t);if(null!=n)return n;throw new Ts(Is.severity.CRITICAL,Is.category.MANIFEST,Is.code.HLS_COULD_NOT_GUESS_CODECS,t)}},{key:"guessMimeType_",value:(a=ws(regeneratorRuntime.mark(function t(n,r,i){var a,s,o,u,l,c,d,h,f,p;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=Ae.ContentType,s=se.RequestType,window.asserts.assert(i.segments.length,"Playlist should have segments!"),o=i.segments[0].absoluteUri,u=new X(o),l=u.getPath().split(".").pop(),c=e.EXTENSION_MAP_BY_CONTENT_TYPE_[n],!(d=c[l])){t.next=10;break}return t.abrupt("return",d);case 10:if(n!=a.TEXT){t.next=16;break}if(r&&"vtt"!=r){t.next=15;break}return t.abrupt("return","text/vtt");case 15:return t.abrupt("return","application/mp4");case 16:return(h=se.makeRequest([o],this.config_.retryParameters)).method="HEAD",t.next=20,this.makeNetworkRequest_(h,s.SEGMENT);case 20:if(f=t.sent,p=f.headers["content-type"]){t.next=24;break}throw new Ts(Is.severity.CRITICAL,Is.category.MANIFEST,Is.code.HLS_COULD_NOT_GUESS_MIME_TYPE,l);case 24:return t.abrupt("return",p.split(";")[0]);case 25:case"end":return t.stop()}},t,this)})),function(e,t,n){return a.apply(this,arguments)})},{key:"getRequiredTag_",value:function(e,t){var n=ps.getFirstTagWithName(e,t);if(!n)throw new Ts(Is.severity.CRITICAL,Is.category.MANIFEST,Is.code.HLS_REQUIRED_TAG_MISSING,t);return n}},{key:"addVideoAttributes_",value:function(e,t,n,r){e&&(e.width=Number(t)||void 0,e.height=Number(n)||void 0,e.frameRate=Number(r)||void 0)}},{key:"requestManifest_",value:function(e){var t=se.RequestType,n=se.makeRequest([e],this.config_.retryParameters);return this.makeNetworkRequest_(n,t.MANIFEST)}},{key:"onUpdate_",value:(i=ws(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(As.log.info("Updating manifest..."),window.asserts.assert(this.updatePlaylistDelay_>0,"We should only call |onUpdate_| when we are suppose to be updating."),this.playerInterface_){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,this.update();case 7:t=this.updatePlaylistDelay_,this.updatePlaylistTimer_.tickAfter(t),e.next=17;break;case 11:e.prev=11,e.t0=e.catch(4),window.asserts.assert(e.t0 instanceof Ts,"Should only receive a Shaka error"),e.t0.severity=Is.severity.RECOVERABLE,this.playerInterface_.onError(e.t0),this.updatePlaylistTimer_.tickAfter(.1);case 17:case"end":return e.stop()}},e,this,[[4,11]])})),function(){return i.apply(this,arguments)})},{key:"isLive_",value:function(){var t=e.PresentationType_;return this.presentationType_!=t.VOD}},{key:"setPresentationType_",value:function(e){this.presentationType_=e,this.presentationTimeline_&&this.presentationTimeline_.setStatic(!this.isLive_()),this.isLive_()||this.updatePlaylistTimer_.stop()}},{key:"makeNetworkRequest_",value:function(e,t){if(!this.operationManager_)throw new Ts(Is.severity.CRITICAL,Is.category.PLAYER,Is.code.OPERATION_ABORTED);var n=this.playerInterface_.networkingEngine.request(t,e);return this.operationManager_.manage(n),n.promise}}],r=[{key:"filterDuplicateCodecs_",value:function(e){var t=new Set,n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var u=s.value,l=Ot.getCodecBase(u);t.has(l)?As.log.debug("Ignoring duplicate codec"):(n.push(u),t.add(l))}}catch(e){i=!0,a=e}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}return n}},{key:"getRequiredAttributeValue_",value:function(e,t){var n=e.getAttribute(t);if(!n)throw new Ts(Is.severity.CRITICAL,Is.category.MANIFEST,Is.code.HLS_REQUIRED_ATTRIBUTE_MISSING,t);return n.value}},{key:"widevineDrmParser_",value:function(t){var n=e.getRequiredAttributeValue_(t,"METHOD");As.Deprecate.deprecateFeature(2,6,"HLS SAMPLE-AES-CENC","SAMPLE-AES-CENC will no longer be supported, see Issue #1227");var r=["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"];if(!r.includes(n))return As.log.error("Widevine in HLS is only supported with [",r.join(", "),"], not",n),null;var i=e.getRequiredAttributeValue_(t,"URI"),a=ks.parseRaw(i),s=new Uint8Array(a.data),o=Ae.createDrmInfo("com.widevine.alpha",[{initDataType:"cenc",initData:s}]),u=t.getAttributeValue("KEYID");return u&&(window.asserts.assert(u.startsWith("0x"),"Incorrect KEYID format!"),o.keyIds=[u.substr(2).toLowerCase()]),o}}],n&&Es(t.prototype,n),r&&Es(t,r),e}());Ls.StreamInfo={},Ls.VIDEO_CODEC_REGEXPS_=[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av1$/],Ls.AUDIO_CODEC_REGEXPS_=[/^vorbis$/,/^opus$/,/^flac$/,/^mp4a/,/^[ae]c-3$/],Ls.TEXT_CODEC_REGEXPS_=[/^vtt$/,/^wvtt/,/^stpp/],Ls.CODEC_REGEXPS_BY_CONTENT_TYPE_={audio:Ls.AUDIO_CODEC_REGEXPS_,video:Ls.VIDEO_CODEC_REGEXPS_,text:Ls.TEXT_CODEC_REGEXPS_},Ls.AUDIO_EXTENSIONS_TO_MIME_TYPES_={mp4:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",ts:"video/mp2t"},Ls.VIDEO_EXTENSIONS_TO_MIME_TYPES_={mp4:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",ts:"video/mp2t"},Ls.TEXT_EXTENSIONS_TO_MIME_TYPES_={mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",vtt:"text/vtt",ttml:"application/ttml+xml"},Ls.EXTENSION_MAP_BY_CONTENT_TYPE_={audio:Ls.AUDIO_EXTENSIONS_TO_MIME_TYPES_,video:Ls.VIDEO_EXTENSIONS_TO_MIME_TYPES_,text:Ls.TEXT_EXTENSIONS_TO_MIME_TYPES_},Ls.DrmParser_,Ls.KEYFORMATS_TO_DRM_PARSERS_={"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":Ls.widevineDrmParser_},Ls.PresentationType_={VOD:"VOD",EVENT:"EVENT",LIVE:"LIVE"},Ls.TS_TIMESCALE_=9e4,Ls.TS_ROLLOVER_=8589934592,Ls.PARTIAL_SEGMENT_SIZE_=2048;tn.registerParserByExtension("m3u8",Ls),tn.registerParserByMime("application/x-mpegurl",Ls),tn.registerParserByMime("application/vnd.apple.mpegurl",Ls);n(21);
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka;function xs(e,t,n,r,i,a,s){try{var o=e[a](s),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,i)}function Rs(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function s(e){xs(a,r,i,s,o,"next",e)}function o(e){xs(a,r,i,s,o,"throw",e)}s(void 0)})}}function Ns(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ms=window.shaka,Ps=(window.goog,function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.uri_=null}var t,n,r,i,a;return t=e,(n=[{key:"configure",value:function(e){}},{key:"start",value:(a=Rs(regeneratorRuntime.mark(function e(t,n){var r,i,a,s,o,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=hn.parse(t),this.uri_=r,null!=r&&r.isManifest()){e.next=4;break}throw new Ms.util.Error(Ms.util.Error.Severity.CRITICAL,Ms.util.Error.Category.NETWORK,Ms.util.Error.Code.MALFORMED_OFFLINE_URI,t);case 4:return i=new Sn,e.prev=5,e.next=8,i.init();case 8:return e.next=10,i.getCell(r.mechanism(),r.cell());case 10:return a=e.sent,e.next=13,a.getManifests([r.key()]);case 13:return s=e.sent,o=s[0],u=new Fn(r.mechanism(),r.cell()),e.abrupt("return",u.fromManifestDB(o));case 17:return e.prev=17,e.next=20,i.destroy();case 20:return e.finish(17);case 21:case"end":return e.stop()}},e,this,[[5,,17,21]])})),function(e,t){return a.apply(this,arguments)})},{key:"stop",value:function(){return Promise.resolve()}},{key:"update",value:function(){}},{key:"onExpirationUpdated",value:(i=Rs(regeneratorRuntime.mark(function e(t,n){var r,i,a,s,o,u,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.asserts.assert(this.uri_,"Should not get update event before start has been called"),r=this.uri_,i=new Sn,e.prev=3,e.next=6,i.init();case 6:return e.next=8,i.getCell(r.mechanism(),r.cell());case 8:return a=e.sent,e.next=11,a.getManifests([r.key()]);case 11:if(s=e.sent,o=s[0],u=o.sessionIds.includes(t),l=null==o.expiration||o.expiration>n,!u||!l){e.next=19;break}return Ms.log.debug("Updating expiration for stored content"),e.next=19,a.updateManifestExpiration(r.key(),n);case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(3),Ms.log.error("There was an error updating",r,e.t0);case 24:return e.prev=24,e.next=27,i.destroy();case 27:return e.finish(24);case 28:case"end":return e.stop()}},e,this,[[3,21,24,28]])})),function(e,t){return i.apply(this,arguments)})}])&&Ns(t.prototype,n),r&&Ns(t,r),e}());tn.registerParserByMime("application/x-offline-manifest",Ps);function Os(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ds=F.util.Error,Us=(window.shaka,window.goog,function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"plugin",value:function(t,n,r,i){var a=hn.parse(t);return a&&a.isManifest()?e.getManifest_(t):a&&a.isSegment()?e.getSegment_(a.key(),a):U.failed(new Ds(Ds.Severity.CRITICAL,Ds.Category.NETWORK,Ds.Code.MALFORMED_OFFLINE_URI,t))}},{key:"getManifest_",value:function(e){var t={uri:e,originalUri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}};return U.completed(t)}},{key:"getSegment_",value:function(e,t){window.asserts.assert(t.isSegment(),"Only segment uri's should be given to getSegment");var n=new Sn;return U.completed(void 0).chain(function(){return n.init()}).chain(function(){return n.getCell(t.mechanism(),t.cell())}).chain(function(e){return e.getSegments([t.key()])}).chain(function(e){var n=e[0];return{uri:t,data:n.data,headers:{}}}).finally(function(){return n.destroy()})}}],(n=null)&&Os(t.prototype,n),r&&Os(t,r),e}());function Fs(e,t,n,r,i,a,s){try{var o=e[a](s),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,i)}function Bs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}se.registerScheme("offline",Us.plugin);
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var Vs=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.transaction_=t,this.store_=t.objectStore(n),this.promise_=new A,t.onabort=function(e){e.preventDefault(),r.promise_.reject()},t.onerror=function(e){e.preventDefault(),r.promise_.reject()},t.oncomplete=function(e){r.promise_.resolve()}}var t,n,r,i,a;return t=e,(n=[{key:"abort",value:(i=regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{this.transaction_.abort()}catch(e){}return e.prev=1,e.next=4,this.promise_;case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}},e,this,[[1,6]])}),a=function(){var e=this,t=arguments;return new Promise(function(n,r){var a=i.apply(e,t);function s(e){Fs(a,n,r,s,o,"next",e)}function o(e){Fs(a,n,r,s,o,"throw",e)}s(void 0)})},function(){return a.apply(this,arguments)})},{key:"forEachEntry",value:function(e){var t=this;return new Promise(function(n,r){var i=t.store_.openCursor();i.onerror=r,i.onsuccess=function(t){var r=t.target.result;r?(e(r.key,r.value,r),r.continue()):n()}})}},{key:"store",value:function(){return this.store_}},{key:"promise",value:function(){return this.promise_}}])&&Bs(t.prototype,n),r&&Bs(t,r),e}();function js(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var Hs=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.connection_=t,this.pending_=[]}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){return Promise.all(this.pending_.map(function(e){return e.abort()}))}},{key:"startReadOnlyOperation",value:function(e){return this.startOperation_(e,"readonly")}},{key:"startReadWriteOperation",value:function(e){return this.startOperation_(e,"readwrite")}},{key:"startOperation_",value:function(e,t){var n=this,r=this.connection_.transaction([e],t),i=new Vs(r,e);return this.pending_.push(i),i.promise().then(function(){return n.stopTracking_(i)},function(){return n.stopTracking_(i)}),i}},{key:"stopTracking_",value:function(e){f.remove(this.pending_,e)}}])&&js(t.prototype,n),r&&js(t,r),e}();function Ks(e,t,n,r,i,a,s){try{var o=e[a](s),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,i)}function Gs(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function s(e){Ks(a,r,i,s,o,"next",e)}function o(e){Ks(a,r,i,s,o,"throw",e)}s(void 0)})}}function qs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka;var Ws=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.connection_=new Hs(t),this.store_=n}var t,n,r,i,a;return t=e,(n=[{key:"destroy",value:function(){return this.connection_.destroy()}},{key:"getAll",value:(a=Gs(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.connection_.startReadOnlyOperation(this.store_),n=[],e.next=4,t.forEachEntry(function(e,t){n.push(t)});case 4:return e.next=6,t.promise();case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})},{key:"add",value:function(e){var t=this.connection_.startReadWriteOperation(this.store_),n=t.store(),r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var u=s.value;n.add(u)}}catch(e){i=!0,a=e}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}return t.promise()}},{key:"remove",value:(i=Gs(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.connection_.startReadWriteOperation(this.store_),e.next=3,n.forEachEntry(function(e,n,r){t.indexOf(n.sessionId)>=0&&r.delete()});case 3:return e.next=5,n.promise();case 5:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})}])&&qs(t.prototype,n),r&&qs(t,r),e}();function zs(e,t,n,r,i,a,s){try{var o=e[a](s),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,i)}function Ys(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function s(e){zs(a,r,i,s,o,"next",e)}function o(e){zs(a,r,i,s,o,"throw",e)}s(void 0)})}}function Xs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var $s=window.shaka,Zs=(window.goog,function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.connection_=new Hs(t),this.segmentStore_=n,this.manifestStore_=r}var t,n,r,i,a,s,o,u;return t=e,n=[{key:"destroy",value:function(){return this.connection_.destroy()}},{key:"hasFixedKeySpace",value:function(){return!0}},{key:"addSegments",value:function(e){return this.rejectAdd_(this.segmentStore_)}},{key:"removeSegments",value:function(e,t){return this.remove_(this.segmentStore_,e,t)}},{key:"getSegments",value:(u=Ys(regeneratorRuntime.mark(function t(n){var r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.convertSegmentData_,t.next=3,this.get_(this.segmentStore_,n);case 3:return i=t.sent,t.abrupt("return",i.map(r));case 5:case"end":return t.stop()}},t,this)})),function(e){return u.apply(this,arguments)})},{key:"addManifests",value:function(e){return this.rejectAdd_(this.manifestStore_)}},{key:"updateManifestExpiration",value:(o=Ys(regeneratorRuntime.mark(function e(t,n){var r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.connection_.startReadWriteOperation(this.manifestStore_),i=r.store(),a=new A,i.get(t).onsuccess=function(e){var r=e.target.result;r?(window.asserts.assert(r.key==t,"With in-line keys, the keys should match"),r.expiration=n,i.put(r),a.resolve()):a.reject(new $s.util.Error($s.util.Error.Severity.CRITICAL,$s.util.Error.Category.STORAGE,$s.util.Error.Code.KEY_NOT_FOUND,"Could not find values for "+t))},e.next=6,Promise.all([r.promise(),a]);case 6:case"end":return e.stop()}},e,this)})),function(e,t){return o.apply(this,arguments)})},{key:"removeManifests",value:function(e,t){return this.remove_(this.manifestStore_,e,t)}},{key:"getManifests",value:(s=Ys(regeneratorRuntime.mark(function t(n){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.get_(this.manifestStore_,n);case 2:return r=t.sent,t.abrupt("return",r.map(e.convertManifest_));case 4:case"end":return t.stop()}},t,this)})),function(e){return s.apply(this,arguments)})},{key:"getAllManifests",value:(a=Ys(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.connection_.startReadOnlyOperation(this.manifestStore_),r=new Map,t.next=4,n.forEachEntry(function(t,n){r.set(t,e.convertManifest_(n))});case 4:return t.next=6,n.promise();case 6:return t.abrupt("return",r);case 7:case"end":return t.stop()}},t,this)})),function(){return a.apply(this,arguments)})},{key:"rejectAdd_",value:function(e){return Promise.reject(new $s.util.Error($s.util.Error.Severity.CRITICAL,$s.util.Error.Category.STORAGE,$s.util.Error.Code.NEW_KEY_OPERATION_NOT_SUPPORTED,"Cannot add new value to "+e))}},{key:"remove_",value:function(e,t,n){var r=this.connection_.startReadWriteOperation(e),i=r.store(),a=!0,s=!1,o=void 0;try{for(var u,l=function(){var e=u.value;i.delete(e).onsuccess=function(){return n(e)}},c=t[Symbol.iterator]();!(a=(u=c.next()).done);a=!0)l()}catch(e){s=!0,o=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw o}}return r.promise()}},{key:"get_",value:(i=Ys(regeneratorRuntime.mark(function e(t,n){var r,i,a,s,o,u,l,c,d,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(r=this.connection_.startReadOnlyOperation(t),i=r.store(),a={},s=[],o=!0,u=!1,l=void 0,e.prev=7,c=function(){var e=h.value;i.get(e).onsuccess=function(t){var n=t.target.result;null==n&&s.push(e),a[e]=n}},d=n[Symbol.iterator]();!(o=(h=d.next()).done);o=!0)c();e.next=16;break;case 12:e.prev=12,e.t0=e.catch(7),u=!0,l=e.t0;case 16:e.prev=16,e.prev=17,o||null==d.return||d.return();case 19:if(e.prev=19,!u){e.next=22;break}throw l;case 22:return e.finish(19);case 23:return e.finish(16);case 24:return e.next=26,r.promise();case 26:if(!s.length){e.next=28;break}throw new $s.util.Error($s.util.Error.Severity.CRITICAL,$s.util.Error.Category.STORAGE,$s.util.Error.Code.KEY_NOT_FOUND,"Could not find values for "+s);case 28:return e.abrupt("return",n.map(function(e){return a[e]}));case 29:case"end":return e.stop()}},e,this,[[7,12,16,24],[17,,19,23]])})),function(e,t){return i.apply(this,arguments)})}],r=[{key:"convertManifest_",value:function(t){return window.asserts.assert(null!=t.originalManifestUri,"Old manifest format should have an originalManifestUri field"),window.asserts.assert(null!=t.duration,"Old manifest format should have a duration field"),window.asserts.assert(null!=t.size,"Old manifest format should have a size field"),window.asserts.assert(null!=t.periods,"Old manifest format should have a periods field"),window.asserts.assert(null!=t.sessionIds,"Old manifest format should have a session ids field"),window.asserts.assert(null!=t.appMetadata,"Old manifest format should have an app metadata field"),{originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:null==t.expiration?1/0:t.expiration,periods:t.periods.map(e.convertPeriod_),sessionIds:t.sessionIds,drmInfo:t.drmInfo,appMetadata:t.appMetadata}}},{key:"convertPeriod_",value:function(t){window.asserts.assert(null!=t.startTime,"Old period format should have a start time field"),window.asserts.assert(null!=t.streams,"Old period format should have a streams field"),e.fillMissingVariants_(t);var n=!0,r=!1,i=void 0;try{for(var a,s=t.streams[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;window.asserts.assert(o.variantIds,"After filling in missing variants, each stream should have variant ids")}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return{startTime:t.startTime,streams:t.streams.map(e.convertStream_)}}},{key:"convertStream_",value:function(t){window.asserts.assert(null!=t.id,"Old stream format should have an id field"),window.asserts.assert(null!=t.primary,"Old stream format should have a primary field"),window.asserts.assert(null!=t.presentationTimeOffset,"Old stream format should have a presentation time offset field"),window.asserts.assert(null!=t.contentType,"Old stream format should have a content type field"),window.asserts.assert(null!=t.mimeType,"Old stream format should have a mime type field"),window.asserts.assert(null!=t.codecs,"Old stream format should have a codecs field"),window.asserts.assert(null!=t.language,"Old stream format should have a language field"),window.asserts.assert(null!=t.encrypted,"Old stream format should have an encrypted field"),window.asserts.assert(null!=t.segments,"Old stream format should have a segments field");var n=t.initSegmentUri?e.getKeyFromSegmentUri_(t.initSegmentUri):null;return{id:t.id,originalId:null,primary:t.primary,presentationTimeOffset:t.presentationTimeOffset,contentType:t.contentType,mimeType:t.mimeType,codecs:t.codecs,frameRate:t.frameRate,kind:t.kind,language:t.language,label:t.label,width:t.width,height:t.height,initSegmentKey:n,encrypted:t.encrypted,keyId:t.keyId,segments:t.segments.map(e.convertSegment_),variantIds:t.variantIds}}},{key:"convertSegment_",value:function(t){window.asserts.assert(null!=t.startTime,"The old segment format should have a start time field"),window.asserts.assert(null!=t.endTime,"The old segment format should have an end time field"),window.asserts.assert(null!=t.uri,"The old segment format should have a uri field");var n=e.getKeyFromSegmentUri_(t.uri);return{startTime:t.startTime,endTime:t.endTime,dataKey:n}}},{key:"convertSegmentData_",value:function(e){return window.asserts.assert(null!=e.key,"The old segment data format should have a key field"),window.asserts.assert(null!=e.data,"The old segment data format should have a data field"),{data:e.data}}},{key:"getKeyFromSegmentUri_",value:function(e){var t=null;if(t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))return Number(t[1]);if(t=/^offline:segment\/([0-9]+)$/.exec(e))return Number(t[1]);throw new $s.util.Error($s.util.Error.Severity.CRITICAL,$s.util.Error.Category.STORAGE,$s.util.Error.Code.MALFORMED_OFFLINE_URI,"Could not parse uri "+e)}},{key:"fillMissingVariants_",value:function(e){var t=Ae.ContentType.AUDIO,n=Ae.ContentType.VIDEO,r=e.streams.filter(function(e){return e.contentType==t}),i=e.streams.filter(function(e){return e.contentType==n});if(!r.every(function(e){return e.variantIds})||!i.every(function(e){return e.variantIds})){window.asserts.assert(r.every(function(e){return!e.variantIds}),"Some audio streams have variant ids and some do not."),window.asserts.assert(i.every(function(e){return!e.variantIds}),"Some video streams have variant ids and some do not.");var a=!0,s=!1,o=void 0;try{for(var u,l=r[Symbol.iterator]();!(a=(u=l.next()).done);a=!0)u.value.variantIds=[]}catch(e){s=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(s)throw o}}var c=!0,d=!1,h=void 0;try{for(var f,p=i[Symbol.iterator]();!(c=(f=p.next()).done);c=!0)f.value.variantIds=[]}catch(e){d=!0,h=e}finally{try{c||null==p.return||p.return()}finally{if(d)throw h}}var m=0;if(i.length&&!r.length){$s.log.debug("Found video-only content. Creating variants for video.");var v=m++,y=!0,g=!1,_=void 0;try{for(var b,w=i[Symbol.iterator]();!(y=(b=w.next()).done);y=!0)b.value.variantIds.push(v)}catch(e){g=!0,_=e}finally{try{y||null==w.return||w.return()}finally{if(g)throw _}}}if(!i.length&&r.length){$s.log.debug("Found audio-only content. Creating variants for audio.");var E=m++,S=!0,T=!1,C=void 0;try{for(var k,I=r[Symbol.iterator]();!(S=(k=I.next()).done);S=!0)k.value.variantIds.push(E)}catch(e){T=!0,C=e}finally{try{S||null==I.return||I.return()}finally{if(T)throw C}}}if(i.length&&r.length){$s.log.debug("Found audio-video content. Creating variants.");var A=!0,L=!1,x=void 0;try{for(var R,N=r[Symbol.iterator]();!(A=(R=N.next()).done);A=!0){var M=R.value,P=!0,O=!1,D=void 0;try{for(var U,F=i[Symbol.iterator]();!(P=(U=F.next()).done);P=!0){var B=U.value,V=m++;M.variantIds.push(V),B.variantIds.push(V)}}catch(e){O=!0,D=e}finally{try{P||null==F.return||F.return()}finally{if(O)throw D}}}}catch(e){L=!0,x=e}finally{try{A||null==N.return||N.return()}finally{if(L)throw x}}}}}}],n&&Xs(t.prototype,n),r&&Xs(t,r),e}());function Qs(e,t,n,r,i,a,s){try{var o=e[a](s),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,i)}function Js(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function s(e){Qs(a,r,i,s,o,"next",e)}function o(e){Qs(a,r,i,s,o,"throw",e)}s(void 0)})}}function eo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var to=window.shaka,no=(window.goog,function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.connection_=new Hs(t),this.segmentStore_=n,this.manifestStore_=r,this.isFixedKey_=i}var t,n,r,i,a,s;return t=e,(n=[{key:"destroy",value:function(){return this.connection_.destroy()}},{key:"hasFixedKeySpace",value:function(){return this.isFixedKey_}},{key:"addSegments",value:function(e){return this.add_(this.segmentStore_,e)}},{key:"removeSegments",value:function(e,t){return this.remove_(this.segmentStore_,e,t)}},{key:"getSegments",value:function(e){return this.get_(this.segmentStore_,e)}},{key:"addManifests",value:function(e){return this.add_(this.manifestStore_,e)}},{key:"updateManifestExpiration",value:function(e,t){var n=this.connection_.startReadWriteOperation(this.manifestStore_),r=n.store();return r.get(e).onsuccess=function(n){var i=n.target.result;i&&(i.expiration=t,r.put(i,e))},n.promise()}},{key:"removeManifests",value:function(e,t){return this.remove_(this.manifestStore_,e,t)}},{key:"getManifests",value:function(e){return this.get_(this.manifestStore_,e)}},{key:"getAllManifests",value:(s=Js(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.connection_.startReadOnlyOperation(this.manifestStore_),n=new Map,e.next=4,t.forEachEntry(function(e,t){n.set(e,t)});case 4:return e.next=6,t.promise();case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}},e,this)})),function(){return s.apply(this,arguments)})},{key:"add_",value:(a=Js(regeneratorRuntime.mark(function e(t,n){var r,i,a,s,o,u,l,c,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isFixedKey_){e.next=2;break}throw new to.util.Error(to.util.Error.Severity.CRITICAL,to.util.Error.Category.STORAGE,to.util.Error.Code.NEW_KEY_OPERATION_NOT_SUPPORTED,"Cannot add new value to "+t);case 2:for(r=this.connection_.startReadWriteOperation(t),i=r.store(),a=[],s=!0,o=!1,u=void 0,e.prev=8,l=n[Symbol.iterator]();!(s=(c=l.next()).done);s=!0)d=c.value,i.add(d).onsuccess=function(e){var t=e.target.result;a.push(t)};e.next=16;break;case 12:e.prev=12,e.t0=e.catch(8),o=!0,u=e.t0;case 16:e.prev=16,e.prev=17,s||null==l.return||l.return();case 19:if(e.prev=19,!o){e.next=22;break}throw u;case 22:return e.finish(19);case 23:return e.finish(16);case 24:return e.next=26,r.promise();case 26:return e.abrupt("return",a);case 27:case"end":return e.stop()}},e,this,[[8,12,16,24],[17,,19,23]])})),function(e,t){return a.apply(this,arguments)})},{key:"remove_",value:function(e,t,n){var r=this.connection_.startReadWriteOperation(e),i=r.store(),a=!0,s=!1,o=void 0;try{for(var u,l=function(){var e=u.value;i.delete(e).onsuccess=function(){return n(e)}},c=t[Symbol.iterator]();!(a=(u=c.next()).done);a=!0)l()}catch(e){s=!0,o=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw o}}return r.promise()}},{key:"get_",value:(i=Js(regeneratorRuntime.mark(function e(t,n){var r,i,a,s,o,u,l,c,d,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(r=this.connection_.startReadOnlyOperation(t),i=r.store(),a={},s=[],o=!0,u=!1,l=void 0,e.prev=7,c=function(){var e=h.value,t=i.get(e);t.onsuccess=function(){null==t.result&&s.push(e),a[e]=t.result}},d=n[Symbol.iterator]();!(o=(h=d.next()).done);o=!0)c();e.next=16;break;case 12:e.prev=12,e.t0=e.catch(7),u=!0,l=e.t0;case 16:e.prev=16,e.prev=17,o||null==d.return||d.return();case 19:if(e.prev=19,!u){e.next=22;break}throw l;case 22:return e.finish(19);case 23:return e.finish(16);case 24:return e.next=26,r.promise();case 26:if(!s.length){e.next=28;break}throw new to.util.Error(to.util.Error.Severity.CRITICAL,to.util.Error.Category.STORAGE,to.util.Error.Code.KEY_NOT_FOUND,"Could not find values for "+s);case 28:return e.abrupt("return",n.map(function(e){return a[e]}));case 29:case"end":return e.stop()}},e,this,[[7,12,16,24],[17,,19,23]])})),function(e,t){return i.apply(this,arguments)})}])&&eo(t.prototype,n),r&&eo(t,r),e}());function ro(e,t,n,r,i,a,s){try{var o=e[a](s),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,i)}function io(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function s(e){ro(a,r,i,s,o,"next",e)}function o(e){ro(a,r,i,s,o,"throw",e)}s(void 0)})}}function ao(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var so=window.shaka,oo=(window.goog,function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.db_=null,this.v1_=null,this.v2_=null,this.v3_=null,this.sessions_=null}var t,n,r,i,a;return t=e,n=[{key:"init",value:function(){var t=this,n=e.DB_NAME,r=e.VERSION,i=new A,a=window.indexedDB.open(n,r);return a.onsuccess=function(n){var r=n.target.result;t.db_=r,t.v1_=e.createV1_(r),t.v2_=e.createV2_(r),t.v3_=e.createV3_(r),t.sessions_=e.createEmeSession_(r),i.resolve()},a.onupgradeneeded=function(e){t.createStores_(e.target.result)},a.onerror=function(e){i.reject(new M(M.Severity.CRITICAL,M.Category.STORAGE,M.Code.INDEXED_DB_ERROR,a.error)),e.preventDefault()},i}},{key:"destroy",value:(a=io(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.v1_){e.next=3;break}return e.next=3,this.v1_.destroy();case 3:if(!this.v2_){e.next=6;break}return e.next=6,this.v2_.destroy();case 6:if(!this.v3_){e.next=9;break}return e.next=9,this.v3_.destroy();case 9:if(!this.sessions_){e.next=12;break}return e.next=12,this.sessions_.destroy();case 12:this.db_&&this.db_.close();case 13:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})},{key:"getCells",value:function(){var e=new Map;return this.v1_&&e.set("v1",this.v1_),this.v2_&&e.set("v2",this.v2_),this.v3_&&e.set("v3",this.v3_),e}},{key:"getEmeSessionCell",value:function(){return window.asserts.assert(this.sessions_,"Cannot be destroyed."),this.sessions_}},{key:"erase",value:(i=io(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.v1_){t.next=3;break}return t.next=3,this.v1_.destroy();case 3:if(!this.v2_){t.next=6;break}return t.next=6,this.v2_.destroy();case 6:if(!this.v3_){t.next=9;break}return t.next=9,this.v3_.destroy();case 9:return this.db_&&this.db_.close(),t.next=12,e.deleteAll_();case 12:return this.db_=null,this.v1_=null,this.v2_=null,this.v3_=null,t.next=18,this.init();case 18:case"end":return t.stop()}},t,this)})),function(){return i.apply(this,arguments)})},{key:"createStores_",value:function(t){for(var n=0,r=[e.V3_SEGMENT_STORE,e.V3_MANIFEST_STORE,e.SESSION_ID_STORE];n<r.length;n++){var i=r[n];t.objectStoreNames.contains(i)||t.createObjectStore(i,{autoIncrement:!0})}}}],r=[{key:"createV1_",value:function(t){var n=e.V1_SEGMENT_STORE,r=e.V1_MANIFEST_STORE,i=t.objectStoreNames;return i.contains(r)&&i.contains(n)?(so.log.debug("Mounting v1 idb storage cell"),new Zs(t,n,r)):null}},{key:"createV2_",value:function(t){var n=e.V2_SEGMENT_STORE,r=e.V2_MANIFEST_STORE,i=t.objectStoreNames;return i.contains(r)&&i.contains(n)?(so.log.debug("Mounting v2 idb storage cell"),new no(t,n,r,!0)):null}},{key:"createV3_",value:function(t){var n=e.V3_SEGMENT_STORE,r=e.V3_MANIFEST_STORE,i=t.objectStoreNames;return i.contains(r)&&i.contains(n)?(so.log.debug("Mounting v3 idb storage cell"),new no(t,n,r,!1)):null}},{key:"createEmeSession_",value:function(t){var n=e.SESSION_ID_STORE;return t.objectStoreNames.contains(n)?(so.log.debug("Mounting session ID idb storage cell"),new Ws(t,n)):null}},{key:"deleteAll_",value:function(){var t=e.DB_NAME,n=new A,r=window.indexedDB.deleteDatabase(t);return r.onblocked=function(e){so.log.warning("Deleting",t,"is being blocked")},r.onsuccess=function(e){n.resolve()},r.onerror=function(e){n.reject(new M(M.Severity.CRITICAL,M.Category.STORAGE,M.Code.INDEXED_DB_ERROR,r.error)),e.preventDefault()},n}}],n&&ao(t.prototype,n),r&&ao(t,r),e}());oo.DB_NAME="shaka_offline_db",oo.VERSION=4,oo.V1_SEGMENT_STORE="segment",oo.V2_SEGMENT_STORE="segment-v2",oo.V3_SEGMENT_STORE="segment-v3",oo.V1_MANIFEST_STORE="manifest",oo.V2_MANIFEST_STORE="manifest-v2",oo.V3_MANIFEST_STORE="manifest-v3",oo.SESSION_ID_STORE="session-ids",Sn.register("idb",function(){return window.indexedDB?new oo:null});function uo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka;var lo=function(){function e(){var t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=[],(n="polyfills_")in(t=this)?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}var t,n,r;return t=e,r=[{key:"installAll",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.polyfills_[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)r.value.callback()}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},{key:"register",value:function(e,t){for(var n={priority:t=t||0,callback:e},r=0;r<this.polyfills_.length;r++)if(this.polyfills_[r].priority<t)return void this.polyfills_.splice(r,0,n);this.polyfills_.push(n)}}],(n=null)&&uo(t.prototype,n),r&&uo(t,r),e}();lo.polyfills_=[];var co=lo;function ho(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka;var fo=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"install",value:function(){if(window.Document){var t=Element.prototype;t.requestFullscreen=t.requestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||t.webkitRequestFullscreen,(t=Document.prototype).exitFullscreen=t.exitFullscreen||t.mozCancelFullScreen||t.msExitFullscreen||t.webkitExitFullscreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitSupportsFullscreen||document.webkitFullscreenEnabled}}));var n=e.proxyEvent_;document.addEventListener("webkitfullscreenchange",n),document.addEventListener("webkitfullscreenerror",n),document.addEventListener("mozfullscreenchange",n),document.addEventListener("mozfullscreenerror",n),document.addEventListener("MSFullscreenChange",n),document.addEventListener("MSFullscreenError",n)}}},{key:"proxyEvent_",value:function(e){var t,n=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase();"function"==typeof Event?t=new Event(n,e):(t=document.createEvent("Event")).initEvent(n,e.bubbles,e.cancelable),e.target.dispatchEvent(t)}}],(n=null)&&ho(t.prototype,n),r&&ho(t,r),e}();function po(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}co.register(fo.install);
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var mo=window.shaka,vo=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"install",value:function(){mo.log.debug("IndexedDB.install"),Et.isChromecast()&&(mo.log.debug("Removing IndexedDB from ChromeCast"),delete window.indexedDB,window.asserts.assert(!window.indexedDB,"Failed to override window.indexedDB"))}}],(n=null)&&po(t.prototype,n),r&&po(t,r),e}();function yo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}co.register(vo.install);
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var go=window.shaka,_o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"install",value:function(){go.log.debug("InputEvent.install"),Et.isIE()&&(HTMLInputElement.prototype.originalAddEventListener||(go.log.info("Patching input event support on IE."),HTMLInputElement.prototype.originalAddEventListener=HTMLInputElement.prototype.addEventListener,HTMLInputElement.prototype.addEventListener=go.polyfill.InputEvent.addEventListener_))}},{key:"addEventListener_",value:function(e,t,n){if("input"==e)switch(this.type){case"range":e="change"}HTMLInputElement.prototype.originalAddEventListener.call(this,e,t,n)}}],(n=null)&&yo(t.prototype,n),r&&yo(t,r),e}();function bo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}co.register(_o.install);
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var wo=window.shaka,Eo=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"install",value:function(){wo.log.debug("mathRound.install");var t=e.MAX_ACCURATE_INPUT_+1;if(Math.round(t)!=t){wo.log.debug("polyfill Math.round");var n=Math.round;Math.round=function(t){var r=t;return t<=e.MAX_ACCURATE_INPUT_&&(r=n(t)),r}}}}],(n=null)&&bo(t.prototype,n),r&&bo(t,r),e}();function So(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Eo.MAX_ACCURATE_INPUT_=4503599627370496,co.register(Eo.install);
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var To=window.shaka,Co=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"install",value:function(){if(To.log.debug("MediaSource.install"),window.MediaSource)if(window.cast&&cast.__platform__&&cast.__platform__.canDisplayType)To.log.info("Patching Chromecast MSE bugs."),e.patchCastIsTypeSupported_();else if(Et.isApple()){var t=navigator.appVersion;co.MediaSource.rejectTsContent_(),t.includes("Version/8")?(To.log.info("Blacklisting Safari 8 MSE."),co.MediaSource.blacklist_()):t.includes("Version/9")?(To.log.info("Patching Safari 9 MSE bugs."),co.MediaSource.stubAbort_()):t.includes("Version/10")?(To.log.info("Patching Safari 10 MSE bugs."),co.MediaSource.stubAbort_(),co.MediaSource.patchEndOfStreamEvents_()):(t.includes("Version/11")||t.includes("Version/12"))&&(To.log.info("Patching Safari 11/12 MSE bugs."),co.MediaSource.stubAbort_(),co.MediaSource.patchRemovalRange_())}else Et.isTizen()?co.MediaSource.rejectCodec_("opus"):To.log.info("Using native MSE as-is.");else To.log.info("No MSE implementation available.")}},{key:"blacklist_",value:function(){window.MediaSource=null}},{key:"stubAbort_",value:function(){var t=e.prototype.addSourceBuffer;e.prototype.addSourceBuffer=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=t.apply(this,n);return i.abort=function(){},i}}},{key:"patchRemovalRange_",value:function(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}},{key:"patchEndOfStreamEvents_",value:function(){var t=e.prototype.endOfStream;e.prototype.endOfStream=function(){var e=0,n=!0,r=!1,i=void 0;try{for(var a,s=(this.sourceBuffers||[])[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value,u=o.buffered.end(o.buffered.length-1);e=Math.max(e,u)}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}if(!isNaN(this.duration)&&e<this.duration){this.ignoreUpdateEnd_=!0;var l=!0,c=!1,d=void 0;try{for(var h,f=(this.sourceBuffers||[])[Symbol.iterator]();!(l=(h=f.next()).done);l=!0){var p=h.value;p.eventSuppressed_=!1}}catch(e){c=!0,d=e}finally{try{l||null==f.return||f.return()}finally{if(c)throw d}}}for(var m=arguments.length,v=new Array(m),y=0;y<m;y++)v[y]=arguments[y];return t.apply(this,v)};var n=!1,r=e.prototype.addSourceBuffer;e.prototype.addSourceBuffer=function(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];var s=r.apply(this,i);return s.mediaSource_=this,s.addEventListener("updateend",e.ignoreUpdateEnd_,!1),n||(this.addEventListener("sourceclose",e.cleanUpListeners_,!1),n=!0),s}}},{key:"ignoreUpdateEnd_",value:function(e){var t=e.target,n=t.mediaSource_;if(n.ignoreUpdateEnd_){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),t.eventSuppressed_=!0;var r=!0,i=!1,a=void 0;try{for(var s,o=n.sourceBuffers[Symbol.iterator]();!(r=(s=o.next()).done);r=!0)if(0==s.value.eventSuppressed_)return}catch(e){i=!0,a=e}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}n.ignoreUpdateEnd_=!1}}},{key:"cleanUpListeners_",value:function(t){var n=t.target,r=!0,i=!1,a=void 0;try{for(var s,o=(n.sourceBuffers||[])[Symbol.iterator]();!(r=(s=o.next()).done);r=!0)s.value.removeEventListener("updateend",e.ignoreUpdateEnd_,!1)}catch(e){i=!0,a=e}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}n.removeEventListener("sourceclose",e.cleanUpListeners_,!1)}},{key:"rejectTsContent_",value:function(){var t=e.isTypeSupported;e.isTypeSupported=function(e){return"mp2t"!=e.split(/ *; */)[0].split("/")[1]&&t(e)}}},{key:"rejectCodec_",value:function(t){var n=e.isTypeSupported;e.isTypeSupported=function(e){return Ot.getCodecBase(e)!=t&&n(e)}}},{key:"patchCastIsTypeSupported_",value:function(){var t=e.isTypeSupported,n=/^dv(?:h[e1]|a[v1])\./;e.isTypeSupported=function(e){for(var r=e.split(/ *; */),i=r[0],a={},s=1;s<r.length;++s){var o=r[s].split("="),u=o[0],l=o[1].replace(/"(.*)"/,"$1");a[u]=l}var c=a.codecs;if(!c)return t(e);var d=!1,h=!1,f=c.split(",").filter(function(e){return n.test(e)&&(h=!0),/^(hev|hvc)1\.2/.test(e)&&(d=!0),!0});h&&(d=!1),a.codecs=f.join(","),d&&(a.eotf="smpte2084");var p=i;for(var m in a)p+="; "+m+'="'+a[m]+'"';return cast.__platform__.canDisplayType(p)}}}],(n=null)&&So(t.prototype,n),r&&So(t,r),e}();function ko(e){return(ko="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Io(e,t){return!t||"object"!==ko(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ao(e){return(Ao=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Lo(e,t){return(Lo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ro(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function No(e,t,n){return t&&Ro(e.prototype,t),n&&Ro(e,n),e}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */co.register(Co.install);var Mo=window.shaka,Po=window.goog,Oo=function(){function e(){xo(this,e)}return No(e,null,[{key:"install",value:function(){if(window.HTMLVideoElement&&window.WebKitMediaKeys){Mo.log.info("Using Apple-prefixed EME");var e=Mo.polyfill.PatchedMediaKeysApple;e.MediaKeyStatusMap.KEY_ID_=new Uint8Array([0]).buffer,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=e.setMediaKeys,window.MediaKeys=e.MediaKeys,window.MediaKeySystemAccess=e.MediaKeySystemAccess,navigator.requestMediaKeySystemAccess=e.requestMediaKeySystemAccess}}},{key:"requestMediaKeySystemAccess",value:function(e,t){Mo.log.debug("PatchedMediaKeysApple.requestMediaKeySystemAccess"),window.asserts.assert(this==navigator,'bad "this" for requestMediaKeySystemAccess');var n=Mo.polyfill.PatchedMediaKeysApple;try{var r=new n.MediaKeySystemAccess(e,t);return Promise.resolve(r)}catch(e){return Promise.reject(e)}}},{key:"setMediaKeys",value:function(e){Mo.log.debug("PatchedMediaKeysApple.setMediaKeys"),window.asserts.assert(this instanceof HTMLMediaElement,'bad "this" for setMediaKeys');var t=Mo.polyfill.PatchedMediaKeysApple,n=e,r=this.mediaKeys;return r&&r!=n&&(window.asserts.assert(r instanceof t.MediaKeys,"non-polyfill instance of oldMediaKeys"),r.setMedia(null)),delete this.mediaKeys,this.mediaKeys=e,n?(window.asserts.assert(n instanceof t.MediaKeys,"non-polyfill instance of newMediaKeys"),n.setMedia(this)):Promise.resolve()}},{key:"rebuildInitData_",value:function(e,t){var n=new Uint8Array(e);if(new DataView(n.buffer).getUint32(0,!0)+4!=n.byteLength)throw new Error("Malformed init data!");var r=Bt.fromUTF16(n.slice(4),!0),i=new Po.Uri(r).getDomain(),a=new Uint8Array(Bt.toUTF16(i,!0)),s=new Uint8Array(n.byteLength+4+a.byteLength+4+t.byteLength),o=0,u=function(e){s.set(e,o),o+=e.byteLength},l=function(e){var t=new DataView(s.buffer),n=e.byteLength;t.setUint32(o,n,!0),o+=4,u(e)};return u(n),l(a),l(new Uint8Array(t)),s}},{key:"onWebkitNeedKey_",value:function(e){Mo.log.debug("PatchedMediaKeysApple.onWebkitNeedKey_",e);var t=Mo.polyfill.PatchedMediaKeysApple,n=this.mediaKeys;window.asserts.assert(n instanceof t.MediaKeys,"non-polyfill instance of newMediaKeys"),window.asserts.assert(null!=e.initData,"missing init data!");var r=n.certificate;window.asserts.assert(null!=r,"missing certificate!");var i=new Event("encrypted");i.initDataType="cenc",i.initData=t.rebuildInitData_(e.initData,r),this.dispatchEvent(i)}}]),e}();function Do(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Oo.MediaKeySystemAccess=function(){function e(t,n){if(xo(this,e),Mo.log.debug("PatchedMediaKeysApple.MediaKeySystemAccess"),this.keySystem=t,this.configuration_,t.startsWith("com.apple.fps")){var r=!0,i=!1,a=void 0;try{for(var s,o=n[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var u=s.value,l=this.checkConfig_(u);if(l)return void(this.configuration_=l)}}catch(e){i=!0,a=e}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}}var c=new Error("Unsupported keySystem");throw c.name="NotSupportedError",c.code=DOMException.NOT_SUPPORTED_ERR,c}return No(e,[{key:"checkConfig_",value:function(e){if("required"==e.persistentState)return null;var t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:e.initDataTypes,sessionTypes:["temporary"],label:e.label},n=!1,r=!1;if(e.audioCapabilities){var i=!0,a=!1,s=void 0;try{for(var o,u=e.audioCapabilities[Symbol.iterator]();!(i=(o=u.next()).done);i=!0){var l=o.value;if(l.contentType){n=!0;var c=l.contentType.split(";")[0];WebKitMediaKeys.isTypeSupported(this.keySystem,c)&&(t.audioCapabilities.push(l),r=!0)}}}catch(e){a=!0,s=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw s}}}if(e.videoCapabilities){var d=!0,h=!1,f=void 0;try{for(var p,m=e.videoCapabilities[Symbol.iterator]();!(d=(p=m.next()).done);d=!0){var v=p.value;if(v.contentType){n=!0;var y=v.contentType.split(";")[0];WebKitMediaKeys.isTypeSupported(this.keySystem,y)&&(t.videoCapabilities.push(v),r=!0)}}}catch(e){h=!0,f=e}finally{try{d||null==m.return||m.return()}finally{if(h)throw f}}}return n||(r=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),r?t:null}},{key:"createMediaKeys",value:function(){Mo.log.debug("PatchedMediaKeysApple.MediaKeySystemAccess.createMediaKeys");var e=new Mo.polyfill.PatchedMediaKeysApple.MediaKeys(this.keySystem);return Promise.resolve(e)}},{key:"getConfiguration",value:function(){return Mo.log.debug("PatchedMediaKeysApple.MediaKeySystemAccess.getConfiguration"),this.configuration_}}]),e}(),Oo.MediaKeys=function(){function e(t){xo(this,e),Mo.log.debug("PatchedMediaKeysApple.MediaKeys"),this.nativeMediaKeys_=new WebKitMediaKeys(t),this.eventManager_=new Ve,this.certificate=null}return No(e,[{key:"createSession",value:function(e){if(Mo.log.debug("PatchedMediaKeysApple.MediaKeys.createSession"),"temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new Mo.polyfill.PatchedMediaKeysApple.MediaKeySession(this.nativeMediaKeys_,e)}},{key:"setServerCertificate",value:function(e){return Mo.log.debug("PatchedMediaKeysApple.MediaKeys.setServerCertificate"),this.certificate=e?new Uint8Array(e):null,Promise.resolve(!0)}},{key:"setMedia",value:function(e){var t=this,n=Mo.polyfill.PatchedMediaKeysApple;if(this.eventManager_.removeAll(),!e)return Promise.resolve();this.eventManager_.listen(e,"webkitneedkey",n.onWebkitNeedKey_);try{return e.readyState>=1?e.webkitSetMediaKeys(this.nativeMediaKeys_):this.eventManager_.listenOnce(e,"loadedmetadata",function(){e.webkitSetMediaKeys(t.nativeMediaKeys_)}),Promise.resolve()}catch(e){return Promise.reject(e)}}}]),e}(),Oo.MediaKeySession=function(e){function t(e,n){var r;return xo(this,t),Mo.log.debug("PatchedMediaKeysApple.MediaKeySession"),(r=Io(this,Ao(t).call(this))).nativeMediaKeySession_=null,r.nativeMediaKeys_=e,r.generateRequestPromise_=null,r.updatePromise_=null,r.eventManager_=new Ve,r.sessionId="",r.expiration=NaN,r.closed=new A,r.keyStatuses=new Mo.polyfill.PatchedMediaKeysApple.MediaKeyStatusMap,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lo(e,t)}(t,k),No(t,[{key:"generateRequest",value:function(e,t){var n=this;Mo.log.debug("PatchedMediaKeysApple.MediaKeySession.generateRequest"),this.generateRequestPromise_=new A;try{var r=this.nativeMediaKeys_.createSession("video/mp4",new Uint8Array(t));this.nativeMediaKeySession_=r,this.eventManager_.listen(this.nativeMediaKeySession_,"webkitkeymessage",function(e){return n.onWebkitKeyMessage_(e)}),this.eventManager_.listen(r,"webkitkeyadded",function(e){return n.onWebkitKeyAdded_(e)}),this.eventManager_.listen(r,"webkitkeyerror",function(e){return n.onWebkitKeyError_(e)}),this.updateKeyStatus_("status-pending")}catch(e){this.generateRequestPromise_.reject(e)}return this.generateRequestPromise_}},{key:"load",value:function(){return Mo.log.debug("PatchedMediaKeysApple.MediaKeySession.load"),Promise.reject(new Error("MediaKeySession.load not yet supported"))}},{key:"update",value:function(e){Mo.log.debug("PatchedMediaKeysApple.MediaKeySession.update"),this.updatePromise_=new A;try{this.nativeMediaKeySession_.update(new Uint8Array(e))}catch(e){this.updatePromise_.reject(e)}return this.updatePromise_}},{key:"close",value:function(){Mo.log.debug("PatchedMediaKeysApple.MediaKeySession.close");try{this.nativeMediaKeySession_.close(),this.closed.resolve(),this.eventManager_.removeAll()}catch(e){this.closed.reject(e)}return this.closed}},{key:"remove",value:function(){return Mo.log.debug("PatchedMediaKeysApple.MediaKeySession.remove"),Promise.reject(new Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))}},{key:"onWebkitKeyMessage_",value:function(e){Mo.log.debug("PatchedMediaKeysApple.onWebkitKeyMessage_",e),window.asserts.assert(this.generateRequestPromise_,"generateRequestPromise_ should be set before now!"),this.generateRequestPromise_&&(this.generateRequestPromise_.resolve(),this.generateRequestPromise_=null);var t=null==this.keyStatuses.getStatus(),n=new b("message",{messageType:t?"license-request":"license-renewal",message:e.message.buffer});this.dispatchEvent(n)}},{key:"onWebkitKeyAdded_",value:function(e){Mo.log.debug("PatchedMediaKeysApple.onWebkitKeyAdded_",e),window.asserts.assert(!this.generateRequestPromise_,"Key added during generate!"),window.asserts.assert(this.updatePromise_,"updatePromise_ should be set before now!"),this.updatePromise_&&(this.updateKeyStatus_("usable"),this.updatePromise_.resolve(),this.updatePromise_=null)}},{key:"onWebkitKeyError_",value:function(e){Mo.log.debug("PatchedMediaKeysApple.onWebkitKeyError_",e);var t=new Error("EME PatchedMediaKeysApple key error");if(t.errorCode=this.nativeMediaKeySession_.error,null!=this.generateRequestPromise_)this.generateRequestPromise_.reject(t),this.generateRequestPromise_=null;else if(null!=this.updatePromise_)this.updatePromise_.reject(t),this.updatePromise_=null;else switch(this.nativeMediaKeySession_.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:this.updateKeyStatus_("output-not-allowed");break;default:this.updateKeyStatus_("internal-error")}}},{key:"updateKeyStatus_",value:function(e){this.keyStatuses.setStatus(e);var t=new b("keystatuseschange");this.dispatchEvent(t)}}]),t}(),Oo.MediaKeyStatusMap=function(){function e(){xo(this,e),this.size=0,this.status_=void 0}return No(e,[{key:"setStatus",value:function(e){this.size=null==e?0:1,this.status_=e}},{key:"getStatus",value:function(){return this.status_}},{key:"forEach",value:function(e){if(this.status_){var t=Mo.polyfill.PatchedMediaKeysApple.MediaKeyStatusMap.KEY_ID_;e(this.status_,t)}}},{key:"get",value:function(e){if(this.has(e))return this.status_}},{key:"has",value:function(e){var t=Oo.MediaKeyStatusMap.KEY_ID_;return!(!this.status_||!jt.equal(new Uint8Array(e),new Uint8Array(t)))}},{key:"entries",value:function(){window.asserts.assert(!1,"Not used!  Provided only for the compiler.")}},{key:"keys",value:function(){window.asserts.assert(!1,"Not used!  Provided only for the compiler.")}},{key:"values",value:function(){window.asserts.assert(!1,"Not used!  Provided only for the compiler.")}}]),e}(),Oo.MediaKeyStatusMap.KEY_ID_,co.register(Oo.install);
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Uo=F.util.Mp4Parser,Fo=window.shaka,Bo=(window.goog,function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.systemIds=[],this.cencKeyIds=[],this.dataBoundaries=[],(new Uo).fullBox("pssh",function(e){return n.parseBox_(e)}).parse(t.buffer),0==this.dataBoundaries.length&&Fo.log.warning("No pssh box found!")}var t,n,r;return t=e,(n=[{key:"parseBox_",value:function(e){var t;if(window.asserts.assert(null!=e.version,"PSSH boxes are full boxes and must have a valid version"),window.asserts.assert(null!=e.flags,"PSSH boxes are full boxes and must have a valid flag"),e.version>1)Fo.log.warning("Unrecognized PSSH version found!");else{var n=jt.toHex(e.reader.readBytes(16)),r=[];if(e.version>0)for(var i=e.reader.readUint32(),a=0;a<i;++a){var s=jt.toHex(e.reader.readBytes(16));r.push(s)}var o=e.reader.readUint32();e.reader.skip(o),(t=this.cencKeyIds).push.apply(t,r),this.systemIds.push(n),this.dataBoundaries.push({start:e.start,end:e.start+e.size-1}),e.reader.getPosition()!=e.reader.getLength()&&Fo.log.warning("Mismatch between box size and data size!")}}}])&&Do(t.prototype,n),r&&Do(t,r),e}());function Vo(e){return(Vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jo(e,t){return!t||"object"!==Vo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ho(e){return(Ho=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ko(e,t){return(Ko=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Go(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wo(e,t,n){return t&&qo(e.prototype,t),n&&qo(e,n),e}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zo=window.shaka,Yo=(window.goog,function(){function e(){Go(this,e)}return Wo(e,null,[{key:"install",value:function(){!window.HTMLVideoElement||!window.MSMediaKeys||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(zo.log.info("Using ms-prefixed EME v20140218"),e.MediaKeyStatusMap.KEY_ID_=new Uint8Array([0]).buffer,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,window.MediaKeys=e.MediaKeys,window.MediaKeySystemAccess=e.MediaKeySystemAccess,navigator.requestMediaKeySystemAccess=e.requestMediaKeySystemAccess,HTMLMediaElement.prototype.setMediaKeys=e.MediaKeySystemAccess.setMediaKeys)}},{key:"requestMediaKeySystemAccess",value:function(t,n){zo.log.debug("PatchedMediaKeysMs.requestMediaKeySystemAccess"),window.asserts.assert(this==navigator,'bad "this" for requestMediaKeySystemAccess');try{var r=new e.MediaKeySystemAccess(t,n);return Promise.resolve(r)}catch(e){return Promise.reject(e)}}},{key:"onMsNeedKey_",value:function(t){if(zo.log.debug("PatchedMediaKeysMs.onMsNeedKey_",t),t.initData){var n=document.createEvent("CustomEvent");n.initCustomEvent("encrypted",!1,!1,null),n.initDataType="cenc",n.initData=e.normaliseInitData_(t.initData),this.dispatchEvent(n)}}},{key:"normaliseInitData_",value:function(e){if(!e)return e;var t=new Bo(e);if(t.dataBoundaries.length<=1)return e;var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=t.dataBoundaries[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var u=s.value,l=e.subarray(u.start,u.end+1);n.push(l)}}catch(e){i=!0,a=e}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}for(var c=[],d=function(){var e=f[h];c.some(function(t){return jt.equal(t,e)})||c.push(e)},h=0,f=n;h<f.length;h++)d();for(var p=0,m=0,v=c;m<v.length;m++){p+=v[m].length}for(var y=new Uint8Array(p),g=0,_=0,b=c;_<b.length;_++){var w=b[_];y.set(w,g),g+=w.length}return y}}]),e}());function Xo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zo(e,t,n){return t&&$o(e.prototype,t),n&&$o(e,n),e}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yo.MediaKeySystemAccess=function(){function e(t,n){Go(this,e),zo.log.debug("PatchedMediaKeysMs.MediaKeySystemAccess"),this.keySystem=t,this.configuration_;var r=!1,i=!0,a=!1,s=void 0;try{for(var o,u=n[Symbol.iterator]();!(i=(o=u.next()).done);i=!0){var l=o.value,c={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:l.initDataTypes,sessionTypes:["temporary"],label:l.label},d=!1;if(l.audioCapabilities){var h=!0,f=!1,p=void 0;try{for(var m,v=l.audioCapabilities[Symbol.iterator]();!(h=(m=v.next()).done);h=!0){var y=m.value;if(y.contentType){d=!0;var g=y.contentType.split(";")[0];MSMediaKeys.isTypeSupported(this.keySystem,g)&&(c.audioCapabilities.push(y),r=!0)}}}catch(e){f=!0,p=e}finally{try{h||null==v.return||v.return()}finally{if(f)throw p}}}if(l.videoCapabilities){var _=!0,b=!1,w=void 0;try{for(var E,S=l.videoCapabilities[Symbol.iterator]();!(_=(E=S.next()).done);_=!0){var T=E.value;if(T.contentType){d=!0;var C=T.contentType.split(";")[0];MSMediaKeys.isTypeSupported(this.keySystem,C)&&(c.videoCapabilities.push(T),r=!0)}}}catch(e){b=!0,w=e}finally{try{_||null==S.return||S.return()}finally{if(b)throw w}}}if(d||(r=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),"required"==l.persistentState&&(r=!1),r)return void(this.configuration_=c)}}catch(e){a=!0,s=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw s}}var k=new Error("Unsupported keySystem");throw k.name="NotSupportedError",k.code=DOMException.NOT_SUPPORTED_ERR,k}return Wo(e,[{key:"createMediaKeys",value:function(){zo.log.debug("PatchedMediaKeysMs.MediaKeySystemAccess.createMediaKeys");var e=new Yo.MediaKeys(this.keySystem);return Promise.resolve(e)}},{key:"getConfiguration",value:function(){return zo.log.debug("PatchedMediaKeysMs.MediaKeySystemAccess.getConfiguration"),this.configuration_}}],[{key:"setMediaKeys",value:function(e){zo.log.debug("PatchedMediaKeysMs.setMediaKeys"),window.asserts.assert(this instanceof HTMLMediaElement,'bad "this" for setMediaKeys');var t=e,n=this.mediaKeys;return n&&n!=t&&(window.asserts.assert(n instanceof Yo.MediaKeys,"non-polyfill instance of oldMediaKeys"),n.setMedia(null)),delete this.mediaKeys,this.mediaKeys=e,t?(window.asserts.assert(t instanceof Yo.MediaKeys,"non-polyfill instance of newMediaKeys"),t.setMedia(this)):Promise.resolve()}}]),e}(),Yo.MediaKeys=function(){function e(t){Go(this,e),zo.log.debug("PatchedMediaKeysMs.MediaKeys"),this.nativeMediaKeys_=new MSMediaKeys(t),this.eventManager_=new Ve}return Wo(e,[{key:"createSession",value:function(e){if(zo.log.debug("PatchedMediaKeysMs.MediaKeys.createSession"),"temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new Yo.MediaKeySession(this.nativeMediaKeys_,e)}},{key:"setServerCertificate",value:function(e){return zo.log.debug("PatchedMediaKeysMs.MediaKeys.setServerCertificate"),Promise.resolve(!1)}},{key:"setMedia",value:function(e){if(this.eventManager_.removeAll(),!e)return Promise.resolve();this.eventManager_.listen(e,"msneedkey",Yo.onMsNeedKey_);var t=this;try{return e.readyState>=1?e.msSetMediaKeys(this.nativeMediaKeys_):e.addEventListener("loadedmetadata",function n(){e.msSetMediaKeys(t.nativeMediaKeys_),e.removeEventListener("loadedmetadata",n)}),Promise.resolve()}catch(e){return Promise.reject(e)}}}]),e}(),Yo.MediaKeySession=function(e){function t(e,n){var r;return Go(this,t),zo.log.debug("PatchedMediaKeysMs.MediaKeySession"),(r=jo(this,Ho(t).call(this))).nativeMediaKeySession_=null,r.nativeMediaKeys_=e,r.generateRequestPromise_=null,r.updatePromise_=null,r.eventManager_=new Ve,r.sessionId="",r.expiration=NaN,r.closed=new zo.util.PublicPromise,r.keyStatuses=new Yo.MediaKeyStatusMap,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ko(e,t)}(t,k),Wo(t,[{key:"generateRequest",value:function(e,t){var n=this;zo.log.debug("PatchedMediaKeysMs.MediaKeySession.generateRequest"),this.generateRequestPromise_=new zo.util.PublicPromise;try{this.nativeMediaKeySession_=this.nativeMediaKeys_.createSession("video/mp4",new Uint8Array(t),null),this.eventManager_.listen(this.nativeMediaKeySession_,"mskeymessage",function(e){return n.onMsKeyMessage_(e)}),this.eventManager_.listen(this.nativeMediaKeySession_,"mskeyadded",function(e){return n.onMsKeyAdded_(e)}),this.eventManager_.listen(this.nativeMediaKeySession_,"mskeyerror",function(e){return n.onMsKeyError_(e)}),this.updateKeyStatus_("status-pending")}catch(e){this.generateRequestPromise_.reject(e)}return this.generateRequestPromise_}},{key:"load",value:function(){return zo.log.debug("PatchedMediaKeysMs.MediaKeySession.load"),Promise.reject(new Error("MediaKeySession.load not yet supported"))}},{key:"update",value:function(e){zo.log.debug("PatchedMediaKeysMs.MediaKeySession.update"),this.updatePromise_=new A;try{this.nativeMediaKeySession_.update(new Uint8Array(e))}catch(e){this.updatePromise_.reject(e)}return this.updatePromise_}},{key:"close",value:function(){zo.log.debug("PatchedMediaKeysMs.MediaKeySession.close");try{this.nativeMediaKeySession_.close(),this.closed.resolve(),this.eventManager_.removeAll()}catch(e){this.closed.reject(e)}return this.closed}},{key:"remove",value:function(){return zo.log.debug("PatchedMediaKeysMs.MediaKeySession.remove"),Promise.reject(new Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))}},{key:"onMsKeyMessage_",value:function(e){zo.log.debug("PatchedMediaKeysMs.onMsKeyMessage_",e),window.asserts.assert(this.generateRequestPromise_,"generateRequestPromise_ not set in onMsKeyMessage_"),this.generateRequestPromise_&&(this.generateRequestPromise_.resolve(),this.generateRequestPromise_=null);var t=null==this.keyStatuses.getStatus(),n=new b("message",{messageType:t?"license-request":"license-renewal",message:e.message.buffer});this.dispatchEvent(n)}},{key:"onMsKeyAdded_",value:function(e){if(zo.log.debug("PatchedMediaKeysMs.onMsKeyAdded_",e),this.generateRequestPromise_)return zo.log.debug("Simulating completion for a PR persistent license."),window.asserts.assert(!this.updatePromise_,"updatePromise_ and generateRequestPromise_ set in onMsKeyAdded_"),this.updateKeyStatus_("usable"),this.generateRequestPromise_.resolve(),void(this.generateRequestPromise_=null);window.asserts.assert(this.updatePromise_,"updatePromise_ not set in onMsKeyAdded_"),this.updatePromise_&&(this.updateKeyStatus_("usable"),this.updatePromise_.resolve(),this.updatePromise_=null)}},{key:"onMsKeyError_",value:function(e){zo.log.debug("PatchedMediaKeysMs.onMsKeyError_",e);var t=new Error("EME PatchedMediaKeysMs key error");if(t.errorCode=this.nativeMediaKeySession_.error,null!=this.generateRequestPromise_)this.generateRequestPromise_.reject(t),this.generateRequestPromise_=null;else if(null!=this.updatePromise_)this.updatePromise_.reject(t),this.updatePromise_=null;else switch(this.nativeMediaKeySession_.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:this.updateKeyStatus_("output-not-allowed");break;default:this.updateKeyStatus_("internal-error")}}},{key:"updateKeyStatus_",value:function(e){this.keyStatuses.setStatus(e);var t=new b("keystatuseschange");this.dispatchEvent(t)}}]),t}(),Yo.MediaKeyStatusMap=function(){function e(){Go(this,e),this.size=0,this.status_=void 0}return Wo(e,[{key:"setStatus",value:function(e){this.size=null==e?0:1,this.status_=e}},{key:"getStatus",value:function(){return this.status_}},{key:"forEach",value:function(e){if(this.status_){var t=zo.polyfill.PatchedMediaKeysMs.MediaKeyStatusMap.KEY_ID_;e(this.status_,t)}}},{key:"get",value:function(e){if(this.has(e))return this.status_}},{key:"has",value:function(e){var t=Yo.MediaKeyStatusMap.KEY_ID_;return!(!this.status_||!jt.equal(new Uint8Array(e),new Uint8Array(t)))}},{key:"entries",value:function(){window.asserts.assert(!1,"Not used!  Provided only for the compiler.")}},{key:"keys",value:function(){window.asserts.assert(!1,"Not used!  Provided only for the compiler.")}},{key:"values",value:function(){window.asserts.assert(!1,"Not used!  Provided only for the compiler.")}}]),e}(),Yo.MediaKeyStatusMap.KEY_ID_,co.register(Yo.install);var Qo=window.shaka,Jo=(window.goog,function(){function e(){Xo(this,e)}return Zo(e,null,[{key:"install",value:function(){if(!(!window.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){Qo.log.info("EME not available.");var e=Qo.polyfill.PatchedMediaKeysNop;navigator.requestMediaKeySystemAccess=e.requestMediaKeySystemAccess,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=e.setMediaKeys,window.MediaKeys=e.MediaKeys,window.MediaKeySystemAccess=e.MediaKeySystemAccess}}},{key:"requestMediaKeySystemAccess",value:function(e,t){return Qo.log.debug("PatchedMediaKeysNop.requestMediaKeySystemAccess"),window.asserts.assert(this==navigator,'bad "this" for requestMediaKeySystemAccess'),Promise.reject(new Error("The key system specified is not supported."))}},{key:"setMediaKeys",value:function(e){return Qo.log.debug("PatchedMediaKeysNop.setMediaKeys"),window.asserts.assert(this instanceof HTMLMediaElement,'bad "this" for setMediaKeys'),null==e?Promise.resolve():Promise.reject(new Error("MediaKeys not supported."))}}]),e}());Jo.MediaKeys=function(){function e(){throw Xo(this,e),new TypeError("Illegal constructor.")}return Zo(e,[{key:"createSession",value:function(){}},{key:"setServerCertificate",value:function(){}}]),e}(),Jo.MediaKeySystemAccess=function(){function e(){throw Xo(this,e),this.keySystem="",new TypeError("Illegal constructor.")}return Zo(e,[{key:"getConfiguration",value:function(){}},{key:"createMediaKeys",value:function(){}}]),e}(),co.register(Jo.install,-10);function eu(e){return(eu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tu(e,t){return!t||"object"!==eu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nu(e){return(nu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ru(e,t){return(ru=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function iu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function au(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function su(e,t,n){return t&&au(e.prototype,t),n&&au(e,n),e}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ou=F.util.Timer,uu=window.shaka,lu=(window.goog,function(){function e(){iu(this,e)}return su(e,null,[{key:"install",value:function(){var t=e.prefixApi_;if(!(!window.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)uu.log.info("Using webkit-prefixed EME v0.1b"),e.prefix_="webkit";else{if(!HTMLMediaElement.prototype.generateKeyRequest)return;uu.log.info("Using nonprefixed EME v0.1b")}window.asserts.assert(HTMLMediaElement.prototype[t("generateKeyRequest")],"PatchedMediaKeysWebkit APIs not available!"),e.MediaKeyStatusMap.KEY_ID_=new Uint8Array([0]).buffer,navigator.requestMediaKeySystemAccess=e.requestMediaKeySystemAccess,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=e.setMediaKeys,window.MediaKeys=e.MediaKeys,window.MediaKeySystemAccess=e.MediaKeySystemAccess}}},{key:"prefixApi_",value:function(t){var n=e.prefix_;return n?n+t.charAt(0).toUpperCase()+t.slice(1):t}},{key:"requestMediaKeySystemAccess",value:function(t,n){uu.log.debug("PatchedMediaKeysWebkit.requestMediaKeySystemAccess"),window.asserts.assert(this==navigator,'bad "this" for requestMediaKeySystemAccess');try{var r=new e.MediaKeySystemAccess(t,n);return Promise.resolve(r)}catch(e){return Promise.reject(e)}}},{key:"setMediaKeys",value:function(t){uu.log.debug("PatchedMediaKeysWebkit.setMediaKeys"),window.asserts.assert(this instanceof HTMLMediaElement,'bad "this" for setMediaKeys');var n=t,r=this.mediaKeys;return r&&r!=n&&(window.asserts.assert(r instanceof e.MediaKeys,"non-polyfill instance of oldMediaKeys"),r.setMedia(null)),delete this.mediaKeys,this.mediaKeys=t,n&&(window.asserts.assert(n instanceof e.MediaKeys,"non-polyfill instance of newMediaKeys"),n.setMedia(this)),Promise.resolve()}},{key:"getVideoElement_",value:function(){var e=document.getElementsByTagName("video");return e.length?e[0]:document.createElement("video")}}]),e}());lu.MediaKeySystemAccess=function(){function e(t,n){iu(this,e),uu.log.debug("PatchedMediaKeysWebkit.MediaKeySystemAccess"),this.keySystem=t,this.internalKeySystem_=t,this.configuration_;var r=!1;"org.w3.clearkey"==t&&(this.internalKeySystem_="webkit-org.w3.clearkey",r=!1);var i=!1,a=lu.getVideoElement_(),s=!0,o=!1,u=void 0;try{for(var l,c=n[Symbol.iterator]();!(s=(l=c.next()).done);s=!0){var d=l.value,h={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:d.initDataTypes,sessionTypes:["temporary"],label:d.label},f=!1;if(d.audioCapabilities){var p=!0,m=!1,v=void 0;try{for(var y,g=d.audioCapabilities[Symbol.iterator]();!(p=(y=g.next()).done);p=!0){var _=y.value;if(_.contentType){f=!0;var b=_.contentType.split(";")[0];a.canPlayType(b,this.internalKeySystem_)&&(h.audioCapabilities.push(_),i=!0)}}}catch(e){m=!0,v=e}finally{try{p||null==g.return||g.return()}finally{if(m)throw v}}}if(d.videoCapabilities){var w=!0,E=!1,S=void 0;try{for(var T,C=d.videoCapabilities[Symbol.iterator]();!(w=(T=C.next()).done);w=!0){var k=T.value;k.contentType&&(f=!0,a.canPlayType(k.contentType,this.internalKeySystem_)&&(h.videoCapabilities.push(k),i=!0))}}catch(e){E=!0,S=e}finally{try{w||null==C.return||C.return()}finally{if(E)throw S}}}if(f||(i=a.canPlayType("video/mp4",this.internalKeySystem_)||a.canPlayType("video/webm",this.internalKeySystem_)),"required"==d.persistentState&&(r?(h.persistentState="required",h.sessionTypes=["persistent-license"]):i=!1),i)return void(this.configuration_=h)}}catch(e){o=!0,u=e}finally{try{s||null==c.return||c.return()}finally{if(o)throw u}}var I="Unsupported keySystem";"org.w3.clearkey"!=t&&"com.widevine.alpha"!=t||(I="None of the requested configurations were supported.");var A=new Error(I);throw A.name="NotSupportedError",A.code=DOMException.NOT_SUPPORTED_ERR,A}return su(e,[{key:"createMediaKeys",value:function(){uu.log.debug("PatchedMediaKeysWebkit.MediaKeySystemAccess.createMediaKeys");var e=new lu.MediaKeys(this.internalKeySystem_);return Promise.resolve(e)}},{key:"getConfiguration",value:function(){return uu.log.debug("PatchedMediaKeysWebkit.MediaKeySystemAccess.getConfiguration"),this.configuration_}}]),e}(),lu.MediaKeys=function(){function e(t){iu(this,e),uu.log.debug("PatchedMediaKeysWebkit.MediaKeys"),this.keySystem_=t,this.media_=null,this.eventManager_=new Ve,this.newSessions_=[],this.sessionMap_=new Map}return su(e,[{key:"setMedia",value:function(e){var t=this;this.media_=e,this.eventManager_.removeAll();var n=lu.prefix_;e&&(this.eventManager_.listen(e,n+"needkey",function(e){return t.onWebkitNeedKey_(e)}),this.eventManager_.listen(e,n+"keymessage",function(e){return t.onWebkitKeyMessage_(e)}),this.eventManager_.listen(e,n+"keyadded",function(e){return t.onWebkitKeyAdded_(e)}),this.eventManager_.listen(e,n+"keyerror",function(e){return t.onWebkitKeyError_(e)}))}},{key:"createSession",value:function(e){if(uu.log.debug("PatchedMediaKeysWebkit.MediaKeys.createSession"),"temporary"!=(e=e||"temporary")&&"persistent-license"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.media_||document.createElement("video");t.src||(t.src="about:blank");var n=new lu.MediaKeySession(t,this.keySystem_,e);return this.newSessions_.push(n),n}},{key:"setServerCertificate",value:function(e){return uu.log.debug("PatchedMediaKeysWebkit.MediaKeys.setServerCertificate"),Promise.resolve(!1)}},{key:"onWebkitNeedKey_",value:function(e){uu.log.debug("PatchedMediaKeysWebkit.onWebkitNeedKey_",e),window.asserts.assert(this.media_,"media_ not set in onWebkitNeedKey_");var t=document.createEvent("CustomEvent");t.initCustomEvent("encrypted",!1,!1,null),t.initDataType="webm",t.initData=e.initData,this.media_.dispatchEvent(t)}},{key:"onWebkitKeyMessage_",value:function(e){uu.log.debug("PatchedMediaKeysWebkit.onWebkitKeyMessage_",e);var t=this.findSession_(e.sessionId);if(t){var n=null==t.keyStatuses.getStatus(),r=new uu.util.FakeEvent("message",{messageType:n?"licenserequest":"licenserenewal",message:e.message});t.generated(),t.dispatchEvent(r)}else uu.log.error("Session not found",e.sessionId)}},{key:"onWebkitKeyAdded_",value:function(e){uu.log.debug("PatchedMediaKeysWebkit.onWebkitKeyAdded_",e);var t=this.findSession_(e.sessionId);window.asserts.assert(t,"unable to find session in onWebkitKeyAdded_"),t&&t.ready()}},{key:"onWebkitKeyError_",value:function(e){uu.log.debug("PatchedMediaKeysWebkit.onWebkitKeyError_",e);var t=this.findSession_(e.sessionId);window.asserts.assert(t,"unable to find session in onWebkitKeyError_"),t&&t.handleError(e)}},{key:"findSession_",value:function(e){var t=this.sessionMap_.get(e);return t?(uu.log.debug("PatchedMediaKeysWebkit.MediaKeys.findSession_",t),t):(t=this.newSessions_.shift())?(t.sessionId=e,this.sessionMap_.set(e,t),uu.log.debug("PatchedMediaKeysWebkit.MediaKeys.findSession_",t),t):null}}]),e}(),lu.MediaKeySession=function(e){function t(e,n,r){var i;return iu(this,t),uu.log.debug("PatchedMediaKeysWebkit.MediaKeySession"),(i=tu(this,nu(t).call(this))).media_=e,i.initialized_=!1,i.generatePromise_=null,i.updatePromise_=null,i.keySystem_=n,i.type_=r,i.sessionId="",i.expiration=NaN,i.closed=new A,i.keyStatuses=new lu.MediaKeyStatusMap,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ru(e,t)}(t,k),su(t,[{key:"generated",value:function(){uu.log.debug("PatchedMediaKeysWebkit.MediaKeySession.generated"),this.generatePromise_&&(this.generatePromise_.resolve(),this.generatePromise_=null)}},{key:"ready",value:function(){uu.log.debug("PatchedMediaKeysWebkit.MediaKeySession.ready"),this.updateKeyStatus_("usable"),this.updatePromise_&&this.updatePromise_.resolve(),this.updatePromise_=null}},{key:"handleError",value:function(e){uu.log.debug("PatchedMediaKeysWebkit.MediaKeySession.handleError",e);var t=new Error("EME v0.1b key error");if(t.errorCode=e.errorCode,t.errorCode.systemCode=e.systemCode,!e.sessionId&&this.generatePromise_)t.method="generateRequest",45==e.systemCode&&(t.message="Unsupported session type."),this.generatePromise_.reject(t),this.generatePromise_=null;else if(e.sessionId&&this.updatePromise_)t.method="update",this.updatePromise_.reject(t),this.updatePromise_=null;else{var n=e.errorCode.code,r=e.systemCode;n==MediaKeyError.MEDIA_KEYERR_OUTPUT?this.updateKeyStatus_("output-restricted"):1==r?this.updateKeyStatus_("expired"):this.updateKeyStatus_("internal-error")}}},{key:"generate_",value:function(e,t){var n,r=this;if(this.initialized_){var i=new Error("The session is already initialized.");return Promise.reject(i)}this.initialized_=!0;try{if("persistent-license"==this.type_){var a=uu.util.StringUtils;if(t)n=new Uint8Array(a.toUTF8("LOAD_SESSION|"+t));else{var s=a.toUTF8("PERSISTENT|"),o=new Uint8Array(s.byteLength+e.byteLength);o.set(new Uint8Array(s),0),o.set(new Uint8Array(e),s.byteLength),n=o}}else window.asserts.assert("temporary"==this.type_,"expected temporary session"),window.asserts.assert(!t,"unexpected offline session ID"),n=new Uint8Array(e);window.asserts.assert(n,"init data not set!")}catch(e){return Promise.reject(e)}window.asserts.assert(null==this.generatePromise_,"generatePromise_ should be null"),this.generatePromise_=new A;var u=(0,uu.polyfill.PatchedMediaKeysWebkit.prefixApi_)("generateKeyRequest");try{this.media_[u](this.keySystem_,n)}catch(e){if("InvalidStateError"!=e.name)return this.generatePromise_=null,Promise.reject(e);new ou(function(){try{r.media_[u](r.keySystem_,n)}catch(e){r.generatePromise_.reject(e),r.generatePromise_=null}}).tickAfter(.01)}return this.generatePromise_}},{key:"update_",value:function(e,t){var n=this;if(this.updatePromise_)this.updatePromise_.then(function(){return n.update_(e,t)}).catch(function(){return n.update_(e,t)});else{var r,i;if(this.updatePromise_=e,"webkit-org.w3.clearkey"==this.keySystem_){var a=Bt.fromUTF8(t),s=JSON.parse(a);"oct"!=s.keys[0].kty&&(this.updatePromise_.reject(new Error("Response is not a valid JSON Web Key Set.")),this.updatePromise_=null),r=jt.fromBase64(s.keys[0].k),i=jt.fromBase64(s.keys[0].kid)}else r=new Uint8Array(t),i=null;var o=(0,lu.prefixApi_)("addKey");try{this.media_[o](this.keySystem_,r,i,this.sessionId)}catch(e){this.updatePromise_.reject(e),this.updatePromise_=null}}}},{key:"updateKeyStatus_",value:function(e){this.keyStatuses.setStatus(e);var t=new b("keystatuseschange");this.dispatchEvent(t)}},{key:"generateRequest",value:function(e,t){return uu.log.debug("PatchedMediaKeysWebkit.MediaKeySession.generateRequest"),this.generate_(t,null)}},{key:"load",value:function(e){return uu.log.debug("PatchedMediaKeysWebkit.MediaKeySession.load"),"persistent-license"==this.type_?this.generate_(null,e):Promise.reject(new Error("Not a persistent session."))}},{key:"update",value:function(e){uu.log.debug("PatchedMediaKeysWebkit.MediaKeySession.update",e),window.asserts.assert(this.sessionId,"update without session ID");var t=new A;return this.update_(t,e),t}},{key:"close",value:function(){if(uu.log.debug("PatchedMediaKeysWebkit.MediaKeySession.close"),"persistent-license"!=this.type_){if(!this.sessionId)return this.closed.reject(new Error("The session is not callable.")),this.closed;var e=(0,lu.prefixApi_)("cancelKeyRequest");try{this.media_[e](this.keySystem_,this.sessionId)}catch(e){}}return this.closed.resolve(),this.closed}},{key:"remove",value:function(){return uu.log.debug("PatchedMediaKeysWebkit.MediaKeySession.remove"),"persistent-license"!=this.type_?Promise.reject(new Error("Not a persistent session.")):this.close()}}]),t}(),lu.MediaKeyStatusMap=function(){function e(){iu(this,e),this.size=0,this.status_=void 0}return su(e,[{key:"setStatus",value:function(e){this.size=null==e?0:1,this.status_=e}},{key:"getStatus",value:function(){return this.status_}},{key:"forEach",value:function(e){if(this.status_){var t=lu.MediaKeyStatusMap.KEY_ID_;e(this.status_,t)}}},{key:"get",value:function(e){if(this.has(e))return this.status_}},{key:"has",value:function(e){var t=lu.MediaKeyStatusMap.KEY_ID_;return!(!this.status_||!uu.util.Uint8ArrayUtils.equal(new Uint8Array(e),new Uint8Array(t)))}},{key:"entries",value:function(){window.asserts.assert(!1,"Not used!  Provided only for compiler.")}},{key:"keys",value:function(){window.asserts.assert(!1,"Not used!  Provided only for compiler.")}},{key:"values",value:function(){window.asserts.assert(!1,"Not used!  Provided only for compiler.")}}]),e}(),lu.prefix_="",lu.MediaKeyStatusMap.KEY_ID_,co.register(lu.install);function cu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var du=window.shaka,hu=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"install",value:function(){if(window.HTMLVideoElement){var t=HTMLVideoElement.prototype;t.requestPictureInPicture&&document.exitPictureInPicture||t.webkitSupportsPresentationMode&&(du.log.debug("PiPWebkit.install"),document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,t.requestPictureInPicture=e.requestPictureInPicture_,document.exitPictureInPicture=e.exitPictureInPicture_,document.addEventListener("webkitpresentationmodechanged",e.proxyEvent_,!0))}}},{key:"proxyEvent_",value:function(t){var n=t.target;if(n.webkitPresentationMode==e.PIP_MODE_){document.pictureInPictureElement=n;var r=new Event("enterpictureinpicture");n.dispatchEvent(r)}else{document.pictureInPictureElement==n&&(document.pictureInPictureElement=null);var i=new Event("leavepictureinpicture");n.dispatchEvent(i)}}},{key:"requestPictureInPicture_",value:function(){if(this.webkitSupportsPresentationMode(e.PIP_MODE_))return this.webkitSetPresentationMode(e.PIP_MODE_),document.pictureInPictureElement=this,Promise.resolve();var t=new Error("PiP not allowed by video element");return Promise.reject(t)}},{key:"exitPictureInPicture_",value:function(){var t=document.pictureInPictureElement;if(t)return t.webkitSetPresentationMode(e.INLINE_MODE_),document.pictureInPictureElement=null,Promise.resolve();var n=new Error("No picture in picture element found");return Promise.reject(n)}}],(n=null)&&cu(t.prototype,n),r&&cu(t,r),e}();hu.PIP_MODE_="picture-in-picture",hu.INLINE_MODE_="inline",co.register(hu.install);function fu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var pu=window.shaka,mu=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"install",value:function(){if(window.VTTCue)pu.log.info("Using native VTTCue.");else if(window.TextTrackCue){var t=TextTrackCue.length;3==t?(pu.log.info("Using VTTCue polyfill from 3 argument TextTrackCue."),window.VTTCue=e.from3ArgsTextTrackCue_):6==t?(pu.log.info("Using VTTCue polyfill from 6 argument TextTrackCue."),window.VTTCue=e.from6ArgsTextTrackCue_):e.canUse3ArgsTextTrackCue_()&&(pu.log.info("Using VTTCue polyfill from 3 argument TextTrackCue."),window.VTTCue=e.from3ArgsTextTrackCue_)}else pu.log.error("VTTCue not available.")}},{key:"from3ArgsTextTrackCue_",value:function(e,t,n){return new window.TextTrackCue(e,t,n)}},{key:"from6ArgsTextTrackCue_",value:function(e,t,n){var r=e+"-"+t+"-"+n;return new window.TextTrackCue(r,e,t,n)}},{key:"canUse3ArgsTextTrackCue_",value:function(){try{return!!e.from3ArgsTextTrackCue_(1,2,"")}catch(e){return!1}}}],(n=null)&&fu(t.prototype,n),r&&fu(t,r),e}();co.register(mu.install);function vu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var yu=window.shaka,gu=(window.goog,function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"install",value:function(){if(yu.log.debug("VideoPlayPromise.install"),window.HTMLMediaElement){var e=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var t=e.apply(this);return t&&t.catch(function(){}),t}}}}],(n=null)&&vu(t.prototype,n),r&&vu(t,r),e}());co.register(gu.install);function _u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka;var bu=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"install",value:function(){if(window.HTMLVideoElement){var t=HTMLVideoElement.prototype;t.getVideoPlaybackQuality||"webkitDroppedFrameCount"in t&&(t.getVideoPlaybackQuality=e.webkit_)}}},{key:"webkit_",value:function(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}}],(n=null)&&_u(t.prototype,n),r&&_u(t,r),e}();co.register(bu.install);window.shaka,window.shaka;
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wu(e,t,n,r,i,a,s){try{var o=e[a](s),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,i)}function Eu(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function s(e){wu(a,r,i,s,o,"next",e)}function o(e){wu(a,r,i,s,o,"throw",e)}s(void 0)})}}function Su(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Tu=F.util.Error,Cu=(window.shaka,window.goog,function(){function e(t,n,r){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.implementation_=r,this.currentlyAt_=t,this.currentlyWith_=n,this.waitForWork_=null,this.requests_=[],this.currentRoute_=null,this.currentStep_=null,this.mainLoopPromise_=Promise.resolve().then(function(){return i.mainLoop_()}),this.destroyer_=new xt(function(){return i.doDestroy_()})}var t,n,r,i,a,s;return t=e,(n=[{key:"destroy",value:function(){return this.destroyer_.destroy()}},{key:"doDestroy_",value:(s=Eu(regeneratorRuntime.mark(function e(){var t,n,r,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.currentStep_&&this.currentStep_.abort(),this.unblockMainLoop_(),e.next=4,this.mainLoopPromise_;case 4:for(this.currentRoute_&&this.currentRoute_.listeners.onCancel(),t=!0,n=!1,r=void 0,e.prev=8,i=this.requests_[Symbol.iterator]();!(t=(a=i.next()).done);t=!0)a.value.listeners.onCancel();e.next=16;break;case 12:e.prev=12,e.t0=e.catch(8),n=!0,r=e.t0;case 16:e.prev=16,e.prev=17,t||null==i.return||i.return();case 19:if(e.prev=19,!n){e.next=22;break}throw r;case 22:return e.finish(19);case 23:return e.finish(16);case 24:this.currentRoute_=null,this.requests_=[],this.implementation_=null;case 27:case"end":return e.stop()}},e,this,[[8,12,16,24],[17,,19,23]])})),function(){return s.apply(this,arguments)})},{key:"startNewRoute",value:function(e){var t={onStart:function(){},onEnd:function(){},onCancel:function(){},onError:function(e){},onSkip:function(){},onEnter:function(){}};return this.requests_.push({create:e,listeners:t}),this.currentStep_&&this.currentStep_.abort(),this.unblockMainLoop_(),t}},{key:"mainLoop_",value:(a=Eu(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.destroyer_.destroyed()){e.next=5;break}return e.next=3,this.doOneThing_();case 3:e.next=0;break;case 5:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})},{key:"doOneThing_",value:function(){return this.tryNewRoute_()?Promise.resolve():this.currentRoute_?this.takeNextStep_():(window.asserts.assert(null==this.waitForWork_,"We should not have a promise yet."),this.implementation_.onIdle(this.currentlyAt_),this.waitForWork_=new A,this.waitForWork_)}},{key:"tryNewRoute_",value:function(){if(window.asserts.assert(null==this.currentStep_,"We should never have a current step between taking steps."),0==this.requests_.length)return!1;if(this.currentRoute_&&!this.currentRoute_.interruptible)return!1;this.currentRoute_&&(this.currentRoute_.listeners.onCancel(),this.currentRoute_=null);var e=this.requests_.shift(),t=e.create(this.currentlyWith_);return t?(e.listeners.onStart(),this.currentRoute_={node:t.node,payload:t.payload,interruptible:t.interruptible,listeners:e.listeners}):e.listeners.onSkip(),!0}},{key:"takeNextStep_",value:(i=Eu(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.asserts.assert(this.currentRoute_,"We need a current route to take the next step."),this.currentlyAt_=this.implementation_.getNext(this.currentlyAt_,this.currentlyWith_,this.currentRoute_.node,this.currentRoute_.payload),this.currentRoute_.listeners.onEnter(this.currentlyAt_),e.prev=3,this.currentStep_=this.implementation_.enterNode(this.currentlyAt_,this.currentlyWith_,this.currentRoute_.payload),e.next=7,this.currentStep_.promise;case 7:this.currentStep_=null,this.currentlyAt_==this.currentRoute_.node&&(this.currentRoute_.listeners.onEnd(),this.currentRoute_=null),e.next=19;break;case 11:return e.prev=11,e.t0=e.catch(3),e.t0.code==Tu.Code.OPERATION_ABORTED?(window.asserts.assert(this.currentRoute_.interruptible,"Do not put abortable steps in non-interruptible routes!"),this.currentRoute_.listeners.onCancel()):this.currentRoute_.listeners.onError(e.t0),this.currentRoute_=null,this.currentStep_=null,e.next=18,this.implementation_.handleError(this.currentlyWith_,e.t0);case 18:this.currentlyAt_=e.sent;case 19:case"end":return e.stop()}},e,this,[[3,11]])})),function(){return i.apply(this,arguments)})},{key:"unblockMainLoop_",value:function(){this.waitForWork_&&(this.waitForWork_.resolve(),this.waitForWork_=null)}}])&&Su(t.prototype,n),r&&Su(t,r),e}());function ku(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Iu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Cu.Implementation,Cu.Listeners,Cu.Route,Cu.ActiveRoute_,Cu.Request_;
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Au=window.shaka,Lu=(window.goog,function(){function e(){ku(this,e)}var t,n,r;return t=e,r=[{key:"getLeafNodes_",value:function(e){var t=[];if(!e)return t;for(var n=e.childNodes,r=0;r<n.length;r++){var i="span"==n[r].nodeName&&"p"==e.nodeName;if(n[r].nodeType==Node.ELEMENT_NODE&&"br"!=n[r].nodeName&&!i){window.asserts.assert(n[r]instanceof Element,"Node should be Element!");var a=Au.text.TtmlTextParser.getLeafNodes_(n[r]);window.asserts.assert(a.length>0,"Only a null Element should return no leaves!"),t=t.concat(a)}}return t.length||t.push(e),t}},{key:"addNewLines_",value:function(e,t){for(var n=e.childNodes,r=0;r<n.length;r++)if("br"==n[r].nodeName&&r>0)n[r-1].textContent+="\n";else if(n[r].childNodes.length>0)Au.text.TtmlTextParser.addNewLines_(n[r],t);else if(t){var i=n[r].textContent.trim();i=i.replace(/\s+/g," "),n[r].textContent=i}}},{key:"parseCue_",value:function(e,t,n,r,i,a,s,o){if(!e.hasAttribute("begin")&&!e.hasAttribute("end")&&/^\s*$/.test(e.textContent))return null;Au.text.TtmlTextParser.addNewLines_(e,o);var u=Au.text.TtmlTextParser.parseTime_(e.getAttribute("begin"),n),l=Au.text.TtmlTextParser.parseTime_(e.getAttribute("end"),n),c=Au.text.TtmlTextParser.parseTime_(e.getAttribute("dur"),n),d=e.textContent;if(null==l&&null!=c&&(l=u+c),null==u||null==l)throw new Au.util.Error(Au.util.Error.Severity.CRITICAL,Au.util.Error.Category.TEXT,Au.util.Error.Code.INVALID_TEXT_CUE);u+=t,l+=t;var h=new Au.text.Cue(u,l,d),f=Au.text.TtmlTextParser.getElementFromCollection_(e,"region",a,"");if(f&&f.getAttribute("xml:id")){var p=f.getAttribute("xml:id"),m=s.filter(function(e){return e.id==p});h.region=m[0]}var v=Au.text.TtmlTextParser.getElementFromCollection_(e,"smpte:backgroundImage",r,"#");return Au.text.TtmlTextParser.addStyle_(h,e,f,v,i),h}},{key:"parseCueRegion_",value:function(e,t,n){var r=Au.text.TtmlTextParser,i=new qn,a=e.getAttribute("xml:id");if(!a)return Au.log.warning("TtmlTextParser parser encountered a region with no id. Region will be ignored."),null;i.id=a;var s=null;n&&(s=r.percentValues_.exec(n)||r.pixelValues_.exec(n));var o=s?Number(s[1]):null,u=s?Number(s[2]):null,l=null,c=null,d=r.getStyleAttributeFromRegion_(e,t,"extent");d&&null!=(l=(c=r.percentValues_.exec(d))||r.pixelValues_.exec(d))&&(i.width=null!=o?100*Number(l[1])/o:Number(l[1]),i.height=null!=u?100*Number(l[2])/u:Number(l[2]),i.widthUnits=c||null!=o?Au.text.CueRegion.units.PERCENTAGE:Au.text.CueRegion.units.PX,i.heightUnits=c||null!=u?Au.text.CueRegion.units.PERCENTAGE:Au.text.CueRegion.units.PX);var h=r.getStyleAttributeFromRegion_(e,t,"origin");return h&&null!=(l=(c=r.percentValues_.exec(h))||r.pixelValues_.exec(h))&&(i.viewportAnchorX=null!=u?100*Number(l[1])/u:Number(l[1]),i.viewportAnchorY=null!=o?100*Number(l[2])/o:Number(l[2]),i.viewportAnchorUnits=c||null!=o?Au.text.CueRegion.units.PERCENTAGE:Au.text.CueRegion.units.PX),i}},{key:"addStyle_",value:function(t,n,r,i,a){"rtl"==e.getStyleAttribute_(n,r,a,"direction")&&(t.direction=Gn.direction.HORIZONTAL_RIGHT_TO_LEFT);var s=e.getStyleAttribute_(n,r,a,"writingMode");"tb"==s||"tblr"==s?t.writingMode=Gn.writingMode.VERTICAL_LEFT_TO_RIGHT:"tbrl"==s?t.writingMode=Gn.writingMode.VERTICAL_RIGHT_TO_LEFT:"rltb"==s||"rl"==s?t.direction=Gn.direction.HORIZONTAL_RIGHT_TO_LEFT:s&&(t.direction=Gn.direction.HORIZONTAL_LEFT_TO_RIGHT);var o=e.getStyleAttribute_(n,r,a,"textAlign");o&&(t.positionAlign=e.textAlignToPositionAlign_[o],t.lineAlign=e.textAlignToLineAlign_[o],window.asserts.assert(o.toUpperCase()in Gn.textAlign,o.toUpperCase()+" Should be in Cue.textAlign values!"),t.textAlign=Gn.textAlign[o.toUpperCase()]);var u=e.getStyleAttribute_(n,r,a,"displayAlign");u&&(window.asserts.assert(u.toUpperCase()in Gn.displayAlign,u.toUpperCase()+" Should be in Cue.displayAlign values!"),t.displayAlign=Gn.displayAlign[u.toUpperCase()]);var l=e.getStyleAttribute_(n,r,a,"color");l&&(t.color=l);var c=e.getStyleAttribute_(n,r,a,"backgroundColor");c&&(t.backgroundColor=c);var d=e.getStyleAttribute_(n,r,a,"fontFamily");d&&(t.fontFamily=d);var h=e.getStyleAttribute_(n,r,a,"fontWeight");h&&"bold"==h&&(t.fontWeight=Gn.fontWeight.BOLD);var f=e.getStyleAttribute_(n,r,a,"wrapOption");f&&"noWrap"==f&&(t.wrapLine=!1);var p=e.getStyleAttribute_(n,r,a,"lineHeight");p&&p.match(e.unitValues_)&&(t.lineHeight=p);var m=e.getStyleAttribute_(n,r,a,"fontSize");m&&m.match(e.unitValues_)&&(t.fontSize=m);var v=e.getStyleAttribute_(n,r,a,"fontStyle");if(v&&(window.asserts.assert(v.toUpperCase()in Gn.fontStyle,v.toUpperCase()+" Should be in Cue.fontStyle values!"),t.fontStyle=Gn.fontStyle[v.toUpperCase()]),i){var y=i.getAttribute("imagetype"),g=i.getAttribute("encoding"),_=i.textContent;"PNG"==y&&"Base64"==g&&_&&(t.backgroundImage="data:image/png;base64,"+_)}var b=e.getStyleAttributeFromRegion_(r,a,"textDecoration");b&&e.addTextDecoration_(t,b);var w=e.getStyleAttributeFromElement_(n,a,"textDecoration");w&&e.addTextDecoration_(t,w)}},{key:"addTextDecoration_",value:function(e,t){for(var n=t.split(" "),r=0;r<n.length;r++)switch(n[r]){case"underline":e.textDecoration.includes(Gn.textDecoration.UNDERLINE)||e.textDecoration.push(Gn.textDecoration.UNDERLINE);break;case"noUnderline":e.textDecoration.includes(Gn.textDecoration.UNDERLINE)&&f.remove(e.textDecoration,Gn.textDecoration.UNDERLINE);break;case"lineThrough":e.textDecoration.includes(Gn.textDecoration.LINE_THROUGH)||e.textDecoration.push(Gn.textDecoration.LINE_THROUGH);break;case"noLineThrough":e.textDecoration.includes(Gn.textDecoration.LINE_THROUGH)&&f.remove(e.textDecoration,Gn.textDecoration.LINE_THROUGH);break;case"overline":e.textDecoration.includes(Gn.textDecoration.OVERLINE)||e.textDecoration.push(Gn.textDecoration.OVERLINE);break;case"noOverline":e.textDecoration.includes(Gn.textDecoration.OVERLINE)&&f.remove(e.textDecoration,Gn.textDecoration.OVERLINE)}}},{key:"getStyleAttribute_",value:function(e,t,n,r){var i=Au.text.TtmlTextParser,a=i.getStyleAttributeFromElement_(e,n,r);return a||i.getStyleAttributeFromRegion_(t,n,r)}},{key:"getStyleAttributeFromRegion_",value:function(e,t,n){for(var r=Au.text.TtmlTextParser.styleNs_,i=Au.text.TtmlTextParser.getLeafNodes_(e),a=0;a<i.length;a++){var s=fa.getAttributeNS(i[a],r,n);if(s)return s}var o=Au.text.TtmlTextParser.getElementFromCollection_(e,"style",t,"");return o?fa.getAttributeNS(o,r,n):null}},{key:"getStyleAttributeFromElement_",value:function(e,t,n){var r=Au.text.TtmlTextParser.styleNs_,i=(0,Au.text.TtmlTextParser.getElementFromCollection_)(e,"style",t,"");return i?fa.getAttributeNS(i,r,n):null}},{key:"getElementFromCollection_",value:function(e,t,n,r){if(!e||n.length<1)return null;var i=null,a=Au.text.TtmlTextParser.getInheritedAttribute_(e,t);if(a)for(var s=0;s<n.length;s++)if(r+n[s].getAttribute("xml:id")==a){i=n[s];break}return i}},{key:"getInheritedAttribute_",value:function(e,t){for(var n=null;e&&!(n=e.getAttribute(t));){var r=e.parentNode;if(!(r instanceof Element))break;e=r}return n}},{key:"parseTime_",value:function(e,t){var n=null,r=Au.text.TtmlTextParser;return r.timeColonFormatFrames_.test(e)?n=r.parseColonTimeWithFrames_(t,e):r.timeColonFormat_.test(e)?n=r.parseTimeFromRegex_(r.timeColonFormat_,e):r.timeColonFormatMilliseconds_.test(e)?n=r.parseTimeFromRegex_(r.timeColonFormatMilliseconds_,e):r.timeFramesFormat_.test(e)?n=r.parseFramesTime_(t,e):r.timeTickFormat_.test(e)?n=r.parseTickTime_(t,e):r.timeHMSFormat_.test(e)&&(n=r.parseTimeFromRegex_(r.timeHMSFormat_,e)),n}},{key:"parseFramesTime_",value:function(e,t){var n=Au.text.TtmlTextParser.timeFramesFormat_.exec(t);return Number(n[1])/e.frameRate}},{key:"parseTickTime_",value:function(e,t){var n=Au.text.TtmlTextParser.timeTickFormat_.exec(t);return Number(n[1])/e.tickRate}},{key:"parseColonTimeWithFrames_",value:function(e,t){var n=Au.text.TtmlTextParser.timeColonFormatFrames_.exec(t),r=Number(n[1]),i=Number(n[2]),a=Number(n[3]),s=Number(n[4]);return(a+=(s+=(Number(n[5])||0)/e.subFrameRate)/e.frameRate)+60*i+3600*r}},{key:"parseTimeFromRegex_",value:function(e,t){var n=e.exec(t);if(null==n||""==n[0])return null;var r=Number(n[1])||0,i=Number(n[2])||0,a=Number(n[3])||0;return(Number(n[4])||0)/1e3+a+60*i+3600*r}}],(n=[{key:"parseInit",value:function(e){window.asserts.assert(!1,"TTML does not have init segments")}},{key:"parseMedia",value:function(t,n){var r=e.parameterNs_,i=Bt.fromUTF8(t),a=[],s=new DOMParser,o=null;try{o=s.parseFromString(i,"text/xml")}catch(e){throw new Au.util.Error(Au.util.Error.Severity.CRITICAL,Au.util.Error.Category.TEXT,Au.util.Error.Code.INVALID_XML)}if(o){var u=null,l=null,c=null,d=null,h=null,f=null,p=o.getElementsByTagName("tt")[0];if(!p)throw new Au.util.Error(Au.util.Error.Severity.CRITICAL,Au.util.Error.Category.TEXT,Au.util.Error.Code.INVALID_XML);if(u=fa.getAttributeNS(p,r,"frameRate"),l=fa.getAttributeNS(p,r,"subFrameRate"),c=fa.getAttributeNS(p,r,"frameRateMultiplier"),d=fa.getAttributeNS(p,r,"tickRate"),h=p.getAttribute("xml:space")||"default",f=p.getAttribute("tts:extent"),"default"!=h&&"preserve"!=h)throw new Au.util.Error(Au.util.Error.Severity.CRITICAL,Au.util.Error.Category.TEXT,Au.util.Error.Code.INVALID_XML);for(var m="default"==h,v=new e.RateInfo_(u,l,c,d),y=e.getLeafNodes_(p.getElementsByTagName("metadata")[0]),g=e.getLeafNodes_(p.getElementsByTagName("styling")[0]),_=e.getLeafNodes_(p.getElementsByTagName("layout")[0]),b=[],w=0;w<_.length;w++){var E=e.parseCueRegion_(_[w],g,f);E&&b.push(E)}for(var S=e.getLeafNodes_(p.getElementsByTagName("body")[0]),T=0;T<S.length;T++){var C=e.parseCue_(S[T],n.periodStart,v,y,g,_,b,m);C&&a.push(C)}}return a}}])&&Iu(t.prototype,n),r&&Iu(t,r),e}());Lu.RateInfo_=function(){return function e(t,n,r,i){if(ku(this,e),this.frameRate=Number(t)||30,this.subFrameRate=Number(n)||1,this.tickRate=Number(i),0==this.tickRate&&(this.tickRate=t?this.frameRate*this.subFrameRate:1),r){var a=/^(\d+) (\d+)$/g.exec(r);if(a){var s=Number(a[1])/Number(a[2]);this.frameRate*=s}}}}(),Lu.percentValues_=/^(\d{1,2}|100)% (\d{1,2}|100)%$/,Lu.unitValues_=/^(\d+px|\d+em)$/,Lu.pixelValues_=/^(\d+)px (\d+)px$/,Lu.timeColonFormatFrames_=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Lu.timeColonFormat_=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,Lu.timeColonFormatMilliseconds_=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,Lu.timeFramesFormat_=/^(\d*(?:\.\d*)?)f$/,Lu.timeTickFormat_=/^(\d*(?:\.\d*)?)t$/,Lu.timeHMSFormat_=new RegExp(["^(?:(\\d*(?:\\.\\d*)?)h)?","(?:(\\d*(?:\\.\\d*)?)m)?","(?:(\\d*(?:\\.\\d*)?)s)?","(?:(\\d*(?:\\.\\d*)?)ms)?$"].join("")),Lu.textAlignToLineAlign_={left:Gn.lineAlign.START,center:Gn.lineAlign.CENTER,right:Gn.lineAlign.END,start:Gn.lineAlign.START,end:Gn.lineAlign.END},Lu.textAlignToPositionAlign_={left:Gn.positionAlign.LEFT,center:Gn.positionAlign.CENTER,right:Gn.positionAlign.RIGHT},Lu.parameterNs_="http://www.w3.org/ns/ttml#parameter",Lu.styleNs_="http://www.w3.org/ns/ttml#styling",$n.registerParser("application/ttml+xml",Lu);var xu=Lu;function Ru(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Nu=F.util.Mp4Parser,Mu=window.shaka,Pu=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parser_=new xu}var t,n,r;return t=e,(n=[{key:"parseInit",value:function(e){var t=!1;if((new Nu).box("moov",Nu.children).box("trak",Nu.children).box("mdia",Nu.children).box("minf",Nu.children).box("stbl",Nu.children).fullBox("stsd",Nu.sampleDescription).box("stpp",function(e){t=!0,e.parser.stop()}).parse(e),!t)throw new M(M.Severity.CRITICAL,M.Category.TEXT,M.Code.INVALID_MP4_TTML)}},{key:"parseMedia",value:function(e,t){var n=this,r=Mu.util.Mp4Parser,i=!1,a=[];if((new r).box("mdat",r.allData(function(e){i=!0,a=a.concat(n.parser_.parseMedia(e,t))})).parse(e),!i)throw new M(M.Severity.CRITICAL,M.Category.TEXT,M.Code.INVALID_MP4_TTML);return a}}])&&Ru(t.prototype,n),r&&Ru(t,r),e}();$n.registerParser('application/mp4; codecs="stpp"',Pu),$n.registerParser('application/mp4; codecs="stpp.TTML.im1t"',Pu);function Ou(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Du=window.shaka,Uu=(window.goog,function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"parseRegion_",value:function(t){var n=new vs(t),r=new qn;n.readWord(),n.skipWhitespace();for(var i=n.readWord();i;)e.parseRegionSetting_(r,i)||Du.log.warning("VTT parser encountered an invalid VTTRegion setting: ",i," The setting will be ignored."),n.skipWhitespace(),i=n.readWord();return r}},{key:"parseCue_",value:function(t,n,r){if(1==t.length&&!t[0])return null;if(/^NOTE($|[ \t])/.test(t[0]))return null;if("STYLE"==t[0])return null;var i=null;t[0].includes("--\x3e")||(i=t[0],t.splice(0,1));var a=new vs(t[0]),s=e.parseTime_(a),o=a.readRegex(/[ \t]+-->[ \t]+/g),u=e.parseTime_(a);if(null==s||null==o||null==u)throw new M(M.Severity.CRITICAL,M.Category.TEXT,M.Code.INVALID_TEXT_CUE);s+=n,u+=n;var l=t.slice(1).join("\n").trim(),c=new Gn(s,u,l);a.skipWhitespace();for(var d=a.readWord();d;)e.parseCueSetting(c,d,r)||Du.log.warning("VTT parser encountered an invalid VTT setting: ",d," The setting will be ignored."),a.skipWhitespace(),d=a.readWord();return null!=i&&(c.id=i),c}},{key:"parseCueSetting",value:function(t,n,r){var i=null;if(i=/^align:(start|middle|center|end|left|right)$/.exec(n))e.setTextAlign_(t,i[1]);else if(i=/^vertical:(lr|rl)$/.exec(n))e.setVerticalWritingMode_(t,i[1]);else if(i=/^size:([\d.]+)%$/.exec(n))t.size=Number(i[1]);else if(i=/^position:([\d.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(n))t.position=Number(i[1]),i[2]&&e.setPositionAlign_(t,i[2]);else{if(!(i=/^region:(.*)$/.exec(n)))return e.parsedLineValueAndInterpretation_(t,n);var a=e.getRegionById_(r,i[1]);a&&(t.region=a)}return!0}},{key:"getRegionById_",value:function(e,t){var n=e.filter(function(e){return e.id==t});return n.length?(window.asserts.assert(1==n.length,"VTTRegion ids should be unique!"),n[0]):(Du.log.warning("VTT parser could not find a region with id: ",t," The region will be ignored."),null)}},{key:"parseRegionSetting_",value:function(e,t){var n=null;if(n=/^id=(.*)$/.exec(t))e.id=n[1];else if(n=/^width=(\d{1,2}|100)%$/.exec(t))e.width=Number(n[1]);else if(n=/^lines=(\d+)$/.exec(t))e.height=Number(n[1]),e.heightUnits=Du.text.CueRegion.units.LINES;else if(n=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(t))e.regionAnchorX=Number(n[1]),e.regionAnchorY=Number(n[2]);else if(n=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(t))e.viewportAnchorX=Number(n[1]),e.viewportAnchorY=Number(n[2]);else{if(!(n=/^scroll=up$/.exec(t)))return!1;e.scroll=Du.text.CueRegion.scrollMode.UP}return!0}},{key:"setTextAlign_",value:function(e,t){"middle"==t?e.textAlign=Gn.textAlign.CENTER:(window.asserts.assert(t.toUpperCase()in Gn.textAlign,t.toUpperCase()+" Should be in Cue.textAlign values!"),e.textAlign=Gn.textAlign[t.toUpperCase()])}},{key:"setPositionAlign_",value:function(e,t){e.positionAlign="line-left"==t||"start"==t?Gn.positionAlign.LEFT:"line-right"==t||"end"==t?Gn.positionAlign.RIGHT:Gn.positionAlign.CENTER}},{key:"setVerticalWritingMode_",value:function(e,t){e.writingMode="lr"==t?Gn.writingMode.VERTICAL_LEFT_TO_RIGHT:Gn.writingMode.VERTICAL_RIGHT_TO_LEFT}},{key:"parsedLineValueAndInterpretation_",value:function(e,t){var n=null;if(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))e.lineInterpretation=Gn.lineInterpretation.PERCENTAGE,e.line=Number(n[1]),n[2]&&(window.asserts.assert(n[2].toUpperCase()in Gn.lineAlign,n[2].toUpperCase()+" Should be in Cue.lineAlign values!"),e.lineAlign=Gn.lineAlign[n[2].toUpperCase()]);else{if(!(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t)))return!1;e.lineInterpretation=Gn.lineInterpretation.LINE_NUMBER,e.line=Number(n[1]),n[2]&&(window.asserts.assert(n[2].toUpperCase()in Gn.lineAlign,n[2].toUpperCase()+" Should be in Cue.lineAlign values!"),e.lineAlign=Gn.lineAlign[n[2].toUpperCase()])}return!0}},{key:"parseTime_",value:function(e){var t=e.readRegex(/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3})/g);if(null==t)return null;var n=Number(t[1])||0,r=Number(t[2]),i=Number(t[3]),a=Number(t[4]);return r>59||i>59?null:a/1e3+i+60*r+3600*n}}],(n=[{key:"parseInit",value:function(e){window.asserts.assert(!1,"VTT does not have init segments")}},{key:"parseMedia",value:function(t,n){var r=Bt.fromUTF8(t),i=(r=r.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n")).split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(i[0]))throw new M(M.Severity.CRITICAL,M.Category.TEXT,M.Code.INVALID_TEXT_HEADER);var a=n.segmentStart;if(null==a&&(a=0,i[0].includes("X-TIMESTAMP-MAP"))){var s=i[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),o=i[0].match(/MPEGTS:(\d+)/m);if(s&&o){var u=new vs(s[1]),l=e.parseTime_(u);if(null==l)throw new M(M.Severity.CRITICAL,M.Category.TEXT,M.Code.INVALID_TEXT_HEADER);var c=Number(o[1]),d=e.MPEG_TIMESCALE_;a=n.periodStart+(c/d-l)}}for(var h=[],f=i[0].split("\n"),p=1;p<f.length;p++)if(/^Region:/.test(f[p])){var m=e.parseRegion_(f[p]);h.push(m)}for(var v=[],y=1;y<i.length;y++){f=i[y].split("\n");var g=e.parseCue_(f,a,h);g&&v.push(g)}return v}}])&&Ou(t.prototype,n),r&&Ou(t,r),e}());Uu.MPEG_TIMESCALE_=9e4,$n.registerParser("text/vtt",Uu),$n.registerParser('text/vtt; codecs="vtt"',Uu);var Fu=Uu;function Bu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Vu=F.util.Mp4Parser,ju=F.util.Error,Hu=window.shaka,Ku=(window.goog,function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.timescale_=null}var t,n,r;return t=e,r=[{key:"parseTFHD_",value:function(e,t){return t.skip(4),1&e&&t.skip(8),2&e&&t.skip(4),8&e?t.readUint32():null}},{key:"parseTRUN_",value:function(e,t,n){var r=n.readUint32();1&t&&n.skip(4),4&t&&n.skip(4);for(var i=[],a=0;a<r;a++){var s={duration:null,sampleSize:null,timeOffset:null};256&t&&(s.duration=n.readUint32()),512&t&&(s.sampleSize=n.readUint32()),1024&t&&n.skip(4),2048&t&&(s.timeOffset=0==e?n.readUint32():n.readInt32()),i.push(s)}return i}},{key:"parseVTTC_",value:function(e,t,n){var r,i,a;return(new Hu.util.Mp4Parser).box("payl",Hu.util.Mp4Parser.allData(function(e){r=Bt.fromUTF8(e)})).box("iden",Hu.util.Mp4Parser.allData(function(e){i=Bt.fromUTF8(e)})).box("sttg",Hu.util.Mp4Parser.allData(function(e){a=Bt.fromUTF8(e)})).parse(e),r?Hu.text.Mp4VttParser.assembleCue_(r,i,a,t,n):null}},{key:"assembleCue_",value:function(e,t,n,r,i){var a=new Gn(r,i,e);if(t&&(a.id=t),n)for(var s=new vs(n),o=s.readWord();o;)Fu.parseCueSetting(a,o,[])||Hu.log.warning("VTT parser encountered an invalid VTT setting: ",o," The setting will be ignored."),s.skipWhitespace(),o=s.readWord();return a}}],(n=[{key:"parseInit",value:function(e){var t=this,n=!1;if((new Vu).box("moov",Vu.children).box("trak",Vu.children).box("mdia",Vu.children).fullBox("mdhd",function(e){window.asserts.assert(0==e.version||1==e.version,"MDHD version can only be 0 or 1"),0==e.version?(e.reader.skip(4),e.reader.skip(4),t.timescale_=e.reader.readUint32(),e.reader.skip(4)):(e.reader.skip(8),e.reader.skip(8),t.timescale_=e.reader.readUint32(),e.reader.skip(8)),e.reader.skip(4)}).box("minf",Vu.children).box("stbl",Vu.children).fullBox("stsd",Vu.sampleDescription).box("wvtt",function(e){n=!0}).parse(e),!this.timescale_)throw new ju(ju.Severity.CRITICAL,ju.Category.TEXT,error.Code.INVALID_MP4_VTT);if(!n)throw new ju(ju.Severity.CRITICAL,ju.Category.TEXT,ju.Code.INVALID_MP4_VTT)}},{key:"parseMedia",value:function(t,n){if(!this.timescale_)throw Hu.log.error("No init segment for MP4+VTT!"),new ju(ju.Severity.CRITICAL,ju.Category.TEXT,ju.Code.INVALID_MP4_VTT);var r,i=0,a=[],s=[],o=!1,u=!1,l=!1,c=null;if((new Vu).box("moof",Vu.children).box("traf",Vu.children).fullBox("tfdt",function(e){o=!0,window.asserts.assert(0==e.version||1==e.version,"TFDT version can only be 0 or 1"),i=0==e.version?e.reader.readUint32():e.reader.readUint64()}).fullBox("tfhd",function(t){window.asserts.assert(null!=t.flags,"A TFHD box should have a valid flags value"),c=e.parseTFHD_(t.flags,t.reader)}).fullBox("trun",function(t){u=!0,window.asserts.assert(null!=t.version,"A TRUN box should have a valid version value"),window.asserts.assert(null!=t.flags,"A TRUN box should have a valid flags value"),a=e.parseTRUN_(t.version,t.flags,t.reader)}).box("mdat",Vu.allData(function(e){window.asserts.assert(!l,"VTT cues in mp4 with multiple MDAT are not currently supported"),l=!0,r=e})).parse(t),!l&&!o&&!u)throw new ju(ju.Severity.CRITICAL,ju.Category.TEXT,ju.Code.INVALID_MP4_VTT);var d=i,h=new DataView(r.buffer,r.byteOffset,r.byteLength),f=new xa(h,xa.Endianness.BIG_ENDIAN),p=!0,m=!1,v=void 0;try{for(var y,g=a[Symbol.iterator]();!(p=(y=g.next()).done);p=!0){var _=y.value,b=_.duration||c,w=_.timeOffset?i+_.timeOffset:d;d=w+(b||0);var E=0;do{var S=f.readUint32();E+=S;var T=f.readUint32(),C=Hu.util.Mp4Parser.typeToString(T),k=null;"vttc"==C?S>8&&(k=f.readBytes(S-8)):"vtte"==C?f.skip(S-8):(Hu.log.error("Unknown box "+C+"! Skipping!"),f.skip(S-8)),b?k&&(window.asserts.assert(null!=this.timescale_,"Timescale should not be null!"),s.push(Hu.text.Mp4VttParser.parseVTTC_(k,n.periodStart+w/this.timescale_,n.periodStart+d/this.timescale_))):Hu.log.error("WVTT sample duration unknown, and no default found!"),window.asserts.assert(!_.sampleSize||E<=_.sampleSize,"The samples do not fit evenly into the sample sizes given in the TRUN box!")}while(_.sampleSize&&E<_.sampleSize)}}catch(e){m=!0,v=e}finally{try{p||null==g.return||g.return()}finally{if(m)throw v}}return window.asserts.assert(!f.hasMoreData(),"MDAT which contain VTT cues and non-VTT data are not currently supported!"),s.filter(ke.isNotNull)}}])&&Bu(t.prototype,n),r&&Bu(t,r),e}());Ku.TimeSegment,$n.registerParser('application/mp4; codecs="wvtt"',Ku);function Gu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka=window.shaka||{};window.shaka;window.goog=window.goog||{};window.goog;var qu=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parent=t,this.controls=n,this.eventManager=new Ve,this.localization=this.controls.getLocalization(),this.player=this.controls.getPlayer(),this.video=this.controls.getVideo()}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){return this.eventManager.release(),this.parent=null,this.controls=null,this.eventManager=null,this.localization=null,this.player=null,this.video=null,Promise.resolve()}}])&&Gu(t.prototype,n),r&&Gu(t,r),e}();function Wu(e){return(Wu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zu(e,t,n,r,i,a,s){try{var o=e[a](s),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,i)}function Yu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $u(e,t,n){return t&&Xu(e.prototype,t),n&&Xu(e,n),e}function Zu(e,t){return!t||"object"!==Wu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qu(e,t,n){return(Qu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ju(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Ju(e){return(Ju=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function el(e,t){return(el=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tl=F.util.Dom;window.shaka=window.shaka||{};var nl=window.shaka;window.goog=window.goog||{};window.goog;var rl=function(e){function t(e,n){var r;Yu(this,t),(r=Zu(this,Ju(t).call(this,e,n))).config_=r.controls.getConfig(),r.controlsContainer_=r.controls.getControlsContainer(),r.children_=[],r.addOverflowMenuButton_(),r.addOverflowMenu_(),r.createChildren_();for(var i=r.controls.getVideoContainer().getElementsByClassName("shaka-back-to-overflow-button"),a=0;a<i.length;a++){var s=i[a];r.eventManager.listen(s,"click",function(){r.controls.hideSettingsMenus(),Oe.setDisplay(r.overflowMenu_,!0),r.overflowMenu_.childNodes.length&&r.overflowMenu_.childNodes[0].focus(),r.controls.overrideCssShowControls()})}return r.eventManager.listen(r.localization,Ne.LOCALE_UPDATED,function(){r.updateAriaLabel_()}),r.eventManager.listen(r.localization,Ne.LOCALE_CHANGED,function(){r.updateAriaLabel_()}),r.eventManager.listen(r.controls,"submenuopen",function(){Oe.setDisplay(r.overflowMenu_,!1)}),r.eventManager.listen(r.overflowMenu_,"touchstart",function(e){r.controls.setLastTouchEventTime(Date.now()),e.stopPropagation()}),r.eventManager.listen(r.overflowMenuButton_,"click",function(){r.onOverflowMenuButtonClick_()}),r.eventManager.listen(r.controlsContainer_,"touchstart",function(e){r.overflowMenu_.classList.contains("shaka-displayed")&&(Oe.setDisplay(r.overflowMenu_,!1),e.preventDefault())}),r.updateAriaLabel_(),r}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&el(e,t)}(t,qu),$u(t,[{key:"destroy",value:(n=regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.controlsContainer_=null,e.next=3,Promise.all(this.children_.map(function(e){return e.destroy()}));case 3:return this.children_=[],e.next=6,Qu(Ju(t.prototype),"destroy",this).call(this);case 6:case"end":return e.stop()}},e,this)}),r=function(){var e=this,t=arguments;return new Promise(function(r,i){var a=n.apply(e,t);function s(e){zu(a,r,i,s,o,"next",e)}function o(e){zu(a,r,i,s,o,"throw",e)}s(void 0)})},function(){return r.apply(this,arguments)})},{key:"addOverflowMenu_",value:function(){this.overflowMenu_=tl.createHTMLElement("div"),this.overflowMenu_.classList.add("shaka-overflow-menu"),this.overflowMenu_.classList.add("shaka-no-propagation"),this.overflowMenu_.classList.add("shaka-show-controls-on-mouse-over"),this.overflowMenu_.classList.add("shaka-settings-menu"),this.controlsContainer_.appendChild(this.overflowMenu_)}},{key:"addOverflowMenuButton_",value:function(){this.overflowMenuButton_=tl.createHTMLElement("button"),this.overflowMenuButton_.classList.add("shaka-overflow-menu-button"),this.overflowMenuButton_.classList.add("shaka-no-propagation"),this.overflowMenuButton_.classList.add("material-icons"),this.overflowMenuButton_.textContent=be.MaterialDesignIcons.OPEN_OVERFLOW,this.parent.appendChild(this.overflowMenuButton_)}},{key:"createChildren_",value:function(){for(var e=0;e<this.config_.overflowMenuButtons.length;e++){var n=this.config_.overflowMenuButtons[e];if(t.elementNamesToFactories_.get(n)){var r=t.elementNamesToFactories_.get(n);window.asserts.assert(this.controls,"Controls should not be null!"),this.children_.push(r.create(this.overflowMenu_,this.controls))}else nl.log.alwaysWarn("Unrecognized overflow menu element requested:",n)}}},{key:"onOverflowMenuButtonClick_",value:function(){if(this.controls.anySettingsMenusAreOpen())this.controls.hideSettingsMenus();else{Oe.setDisplay(this.overflowMenu_,!0),this.controls.overrideCssShowControls();var e=function(e){return 0==e.classList.contains("shaka-hidden")};if(Te.some(this.overflowMenu_.childNodes,e))Te.filter(this.overflowMenu_.childNodes,e)[0].focus()}}},{key:"updateAriaLabel_",value:function(){var e=Ee.Ids;this.overflowMenuButton_.setAttribute(ge.ARIA_LABEL,this.localization.resolve(e.MORE_SETTINGS))}}],[{key:"registerElement",value:function(e,n){t.elementNamesToFactories_.set(e,n)}}]),t}();rl.Factory=function(){function e(){Yu(this,e)}return $u(e,[{key:"create",value:function(e,t){return new rl(e,t)}}]),e}(),ft.registerElement("overflow_menu",new rl.Factory),rl.elementNamesToFactories_=new Map;for(var il=rl,al={LanguageMapping:{ach:{nativeName:"Lwo",englishName:"Acholi"},ady:{nativeName:"",englishName:"Adyghe"},af:{nativeName:"Afrikaans",englishName:"Afrikaans"},"af-NA":{nativeName:"Afrikaans (Namibia)",englishName:"Afrikaans (Namibia)"},"af-ZA":{nativeName:"Afrikaans (South Africa)",englishName:"Afrikaans (South Africa)"},ak:{nativeName:"Ti",englishName:"Akan"},ar:{nativeName:"",englishName:"Arabic"},"ar-AR":{nativeName:"",englishName:"Arabic"},"ar-MA":{nativeName:"",englishName:"Arabic (Morocco)"},"ar-SA":{nativeName:" ()",englishName:"Arabic (Saudi Arabia)"},"ay-BO":{nativeName:"Aymar aru",englishName:"Aymara"},az:{nativeName:"Azrbaycan dili",englishName:"Azerbaijani"},"az-AZ":{nativeName:"Azrbaycan dili",englishName:"Azerbaijani"},"be-BY":{nativeName:"",englishName:"Belarusian"},bg:{nativeName:"",englishName:"Bulgarian"},"bg-BG":{nativeName:"",englishName:"Bulgarian"},bn:{nativeName:"",englishName:"Bengali"},"bn-IN":{nativeName:" ()",englishName:"Bengali (India)"},"bn-BD":{nativeName:"()",englishName:"Bengali (Bangladesh)"},"bs-BA":{nativeName:"Bosanski",englishName:"Bosnian"},ca:{nativeName:"Catal",englishName:"Catalan"},"ca-ES":{nativeName:"Catal",englishName:"Catalan"},cak:{nativeName:"Maya Kaqchikel",englishName:"Kaqchikel"},"ck-US":{nativeName:" (tsalagi)",englishName:"Cherokee"},cs:{nativeName:"etina",englishName:"Czech"},"cs-CZ":{nativeName:"etina",englishName:"Czech"},cy:{nativeName:"Cymraeg",englishName:"Welsh"},"cy-GB":{nativeName:"Cymraeg",englishName:"Welsh"},da:{nativeName:"Dansk",englishName:"Danish"},"da-DK":{nativeName:"Dansk",englishName:"Danish"},de:{nativeName:"Deutsch",englishName:"German"},"de-AT":{nativeName:"Deutsch (sterreich)",englishName:"German (Austria)"},"de-DE":{nativeName:"Deutsch (Deutschland)",englishName:"German (Germany)"},"de-CH":{nativeName:"Deutsch (Schweiz)",englishName:"German (Switzerland)"},dsb:{nativeName:"Dolnoserbina",englishName:"Lower Sorbian"},el:{nativeName:"",englishName:"Greek"},"el-GR":{nativeName:"",englishName:"Greek (Greece)"},en:{nativeName:"English",englishName:"English"},"en-GB":{nativeName:"English (UK)",englishName:"English (UK)"},"en-AU":{nativeName:"English (Australia)",englishName:"English (Australia)"},"en-CA":{nativeName:"English (Canada)",englishName:"English (Canada)"},"en-IE":{nativeName:"English (Ireland)",englishName:"English (Ireland)"},"en-IN":{nativeName:"English (India)",englishName:"English (India)"},"en-PI":{nativeName:"English (Pirate)",englishName:"English (Pirate)"},"en-UD":{nativeName:"English (Upside Down)",englishName:"English (Upside Down)"},"en-US":{nativeName:"English (US)",englishName:"English (US)"},"en-ZA":{nativeName:"English (South Africa)",englishName:"English (South Africa)"},"en@pirate":{nativeName:"English (Pirate)",englishName:"English (Pirate)"},eo:{nativeName:"Esperanto",englishName:"Esperanto"},"eo-EO":{nativeName:"Esperanto",englishName:"Esperanto"},es:{nativeName:"Espaol",englishName:"Spanish"},"es-AR":{nativeName:"Espaol (Argentine)",englishName:"Spanish (Argentina)"},"es-419":{nativeName:"Espaol (Latinoamrica)",englishName:"Spanish (Latin America)"},"es-CL":{nativeName:"Espaol (Chile)",englishName:"Spanish (Chile)"},"es-CO":{nativeName:"Espaol (Colombia)",englishName:"Spanish (Colombia)"},"es-EC":{nativeName:"Espaol (Ecuador)",englishName:"Spanish (Ecuador)"},"es-ES":{nativeName:"Espaol (Espaa)",englishName:"Spanish (Spain)"},"es-LA":{nativeName:"Espaol (Latinoamrica)",englishName:"Spanish (Latin America)"},"es-NI":{nativeName:"Espaol (Nicaragua)",englishName:"Spanish (Nicaragua)"},"es-MX":{nativeName:"Espaol (Mxico)",englishName:"Spanish (Mexico)"},"es-US":{nativeName:"Espaol (Estados Unidos)",englishName:"Spanish (United States)"},"es-VE":{nativeName:"Espaol (Venezuela)",englishName:"Spanish (Venezuela)"},et:{nativeName:"eesti keel",englishName:"Estonian"},"et-EE":{nativeName:"Eesti (Estonia)",englishName:"Estonian (Estonia)"},eu:{nativeName:"Euskara",englishName:"Basque"},"eu-ES":{nativeName:"Euskara",englishName:"Basque"},fa:{nativeName:"",englishName:"Persian"},"fa-IR":{nativeName:"",englishName:"Persian"},"fb-LT":{nativeName:"Leet Speak",englishName:"Leet"},ff:{nativeName:"Fulah",englishName:"Fulah"},fi:{nativeName:"Suomi",englishName:"Finnish"},"fi-FI":{nativeName:"Suomi",englishName:"Finnish"},"fo-FO":{nativeName:"Froyskt",englishName:"Faroese"},fr:{nativeName:"Franais",englishName:"French"},"fr-CA":{nativeName:"Franais (Canada)",englishName:"French (Canada)"},"fr-FR":{nativeName:"Franais (France)",englishName:"French (France)"},"fr-BE":{nativeName:"Franais (Belgique)",englishName:"French (Belgium)"},"fr-CH":{nativeName:"Franais (Suisse)",englishName:"French (Switzerland)"},"fy-NL":{nativeName:"Frysk",englishName:"Frisian (West)"},ga:{nativeName:"Gaeilge",englishName:"Irish"},"ga-IE":{nativeName:"Gaeilge (Gaelic)",englishName:"Irish (Gaelic)"},gl:{nativeName:"Galego",englishName:"Galician"},"gl-ES":{nativeName:"Galego",englishName:"Galician"},"gn-PY":{nativeName:"Avae'",englishName:"Guarani"},"gu-IN":{nativeName:"",englishName:"Gujarati"},"gx-GR":{nativeName:" ",englishName:"Classical Greek"},he:{nativeName:"",englishName:"Hebrew"},"he-IL":{nativeName:"",englishName:"Hebrew"},hi:{nativeName:"",englishName:"Hindi"},"hi-IN":{nativeName:"",englishName:"Hindi"},hr:{nativeName:"Hrvatski",englishName:"Croatian"},"hr-HR":{nativeName:"Hrvatski",englishName:"Croatian"},hsb:{nativeName:"Hornjoserbina",englishName:"Upper Sorbian"},ht:{nativeName:"Kreyl",englishName:"Haitian Creole"},hu:{nativeName:"Magyar",englishName:"Hungarian"},"hu-HU":{nativeName:"Magyar",englishName:"Hungarian"},"hy-AM":{nativeName:"",englishName:"Armenian"},id:{nativeName:"Bahasa Indonesia",englishName:"Indonesian"},"id-ID":{nativeName:"Bahasa Indonesia",englishName:"Indonesian"},is:{nativeName:"slenska",englishName:"Icelandic"},"is-IS":{nativeName:"slenska (Iceland)",englishName:"Icelandic (Iceland)"},it:{nativeName:"Italiano",englishName:"Italian"},"it-IT":{nativeName:"Italiano",englishName:"Italian"},ja:{nativeName:"",englishName:"Japanese"},"ja-JP":{nativeName:"",englishName:"Japanese"},"jv-ID":{nativeName:"Basa Jawa",englishName:"Javanese"},"ka-GE":{nativeName:"",englishName:"Georgian"},"kk-KZ":{nativeName:"",englishName:"Kazakh"},km:{nativeName:"",englishName:"Khmer"},"km-KH":{nativeName:"",englishName:"Khmer"},kab:{nativeName:"Taqbaylit",englishName:"Kabyle"},kn:{nativeName:"",englishName:"Kannada"},"kn-IN":{nativeName:" (India)",englishName:"Kannada (India)"},ko:{nativeName:"",englishName:"Korean"},"ko-KR":{nativeName:" ()",englishName:"Korean (Korea)"},ku:{nativeName:"Kurd",englishName:"Kurdish"},"ku-TR":{nativeName:"Kurd",englishName:"Kurdish"},la:{nativeName:"Latin",englishName:"Latin"},"la-VA":{nativeName:"Latin",englishName:"Latin"},lb:{nativeName:"Ltzebuergesch",englishName:"Luxembourgish"},"li-NL":{nativeName:"Lmbrgs",englishName:"Limburgish"},lt:{nativeName:"Lietuvi",englishName:"Lithuanian"},"lt-LT":{nativeName:"Lietuvi",englishName:"Lithuanian"},lv:{nativeName:"Latvieu",englishName:"Latvian"},"lv-LV":{nativeName:"Latvieu",englishName:"Latvian"},mai:{nativeName:", ",englishName:"Maithili"},"mg-MG":{nativeName:"Malagasy",englishName:"Malagasy"},mk:{nativeName:"",englishName:"Macedonian"},"mk-MK":{nativeName:" ()",englishName:"Macedonian (Macedonian)"},ml:{nativeName:"",englishName:"Malayalam"},"ml-IN":{nativeName:"",englishName:"Malayalam"},"mn-MN":{nativeName:"",englishName:"Mongolian"},mr:{nativeName:"",englishName:"Marathi"},"mr-IN":{nativeName:"",englishName:"Marathi"},ms:{nativeName:"Bahasa Melayu",englishName:"Malay"},"ms-MY":{nativeName:"Bahasa Melayu",englishName:"Malay"},mt:{nativeName:"Malti",englishName:"Maltese"},"mt-MT":{nativeName:"Malti",englishName:"Maltese"},my:{nativeName:"",englishName:"Burmese"},nb:{nativeName:"Norsk (bokml)",englishName:"Norwegian (bokmal)"},"nb-NO":{nativeName:"Norsk (bokml)",englishName:"Norwegian (bokmal)"},ne:{nativeName:"",englishName:"Nepali"},"ne-NP":{nativeName:"",englishName:"Nepali"},nl:{nativeName:"Nederlands",englishName:"Dutch"},"nl-BE":{nativeName:"Nederlands (Belgi)",englishName:"Dutch (Belgium)"},"nl-NL":{nativeName:"Nederlands (Nederland)",englishName:"Dutch (Netherlands)"},"nn-NO":{nativeName:"Norsk (nynorsk)",englishName:"Norwegian (nynorsk)"},no:{nativeName:"Norsk",englishName:"Norwegian"},oc:{nativeName:"Occitan",englishName:"Occitan"},"or-IN":{nativeName:"",englishName:"Oriya"},pa:{nativeName:"",englishName:"Punjabi"},"pa-IN":{nativeName:" ( )",englishName:"Punjabi (India)"},pl:{nativeName:"Polski",englishName:"Polish"},"pl-PL":{nativeName:"Polski",englishName:"Polish"},"ps-AF":{nativeName:"",englishName:"Pashto"},pt:{nativeName:"Portugus",englishName:"Portuguese"},"pt-BR":{nativeName:"Portugus (Brasil)",englishName:"Portuguese (Brazil)"},"pt-PT":{nativeName:"Portugus (Portugal)",englishName:"Portuguese (Portugal)"},"qu-PE":{nativeName:"Qhichwa",englishName:"Quechua"},"rm-CH":{nativeName:"Rumantsch",englishName:"Romansh"},ro:{nativeName:"Romn",englishName:"Romanian"},"ro-RO":{nativeName:"Romn",englishName:"Romanian"},ru:{nativeName:"",englishName:"Russian"},"ru-RU":{nativeName:"",englishName:"Russian"},"sa-IN":{nativeName:"",englishName:"Sanskrit"},"se-NO":{nativeName:"Davvismegiella",englishName:"Northern Smi"},"si-LK":{nativeName:"",englishName:"Sinhala (Sri Lanka)"},sk:{nativeName:"Slovenina",englishName:"Slovak"},"sk-SK":{nativeName:"Slovenina (Slovakia)",englishName:"Slovak (Slovakia)"},sl:{nativeName:"Slovenina",englishName:"Slovenian"},"sl-SI":{nativeName:"Slovenina",englishName:"Slovenian"},"so-SO":{nativeName:"Soomaaliga",englishName:"Somali"},sq:{nativeName:"Shqip",englishName:"Albanian"},"sq-AL":{nativeName:"Shqip",englishName:"Albanian"},sr:{nativeName:"",englishName:"Serbian"},"sr-RS":{nativeName:" (Serbia)",englishName:"Serbian (Serbia)"},su:{nativeName:"Basa Sunda",englishName:"Sundanese"},sv:{nativeName:"Svenska",englishName:"Swedish"},"sv-SE":{nativeName:"Svenska",englishName:"Swedish"},sw:{nativeName:"Kiswahili",englishName:"Swahili"},"sw-KE":{nativeName:"Kiswahili",englishName:"Swahili (Kenya)"},ta:{nativeName:"",englishName:"Tamil"},"ta-IN":{nativeName:"",englishName:"Tamil"},te:{nativeName:"",englishName:"Telugu"},"te-IN":{nativeName:"",englishName:"Telugu"},tg:{nativeName:" ",englishName:"Tajik"},"tg-TJ":{nativeName:"",englishName:"Tajik"},th:{nativeName:"",englishName:"Thai"},"th-TH":{nativeName:" ()",englishName:"Thai (Thailand)"},tl:{nativeName:"Filipino",englishName:"Filipino"},"tl-PH":{nativeName:"Filipino",englishName:"Filipino"},tlh:{nativeName:"tlhIngan-Hol",englishName:"Klingon"},tr:{nativeName:"Trke",englishName:"Turkish"},"tr-TR":{nativeName:"Trke",englishName:"Turkish"},"tt-RU":{nativeName:"",englishName:"Tatar"},uk:{nativeName:"",englishName:"Ukrainian"},"uk-UA":{nativeName:"",englishName:"Ukrainian"},ur:{nativeName:"",englishName:"Urdu"},"ur-PK":{nativeName:"",englishName:"Urdu"},uz:{nativeName:"O'zbek",englishName:"Uzbek"},"uz-UZ":{nativeName:"O'zbek",englishName:"Uzbek"},vi:{nativeName:"Ting Vit",englishName:"Vietnamese"},"vi-VN":{nativeName:"Ting Vit",englishName:"Vietnamese"},"xh-ZA":{nativeName:"isiXhosa",englishName:"Xhosa"},yi:{nativeName:"",englishName:"Yiddish"},"yi-DE":{nativeName:" (German)",englishName:"Yiddish (German)"},zh:{nativeName:"",englishName:"Chinese"},"zh-HANS":{nativeName:"",englishName:"Chinese Simplified"},"zh-HANT":{nativeName:"",englishName:"Chinese Traditional"},"zh-CN":{nativeName:"",englishName:"Chinese Simplified (China)"},"zh-HK":{nativeName:"",englishName:"Chinese Traditional (Hong Kong)"},"zh-SG":{nativeName:"",englishName:"Chinese Simplified (Singapore)"},"zh-TW":{nativeName:"",englishName:"Chinese Traditional (Taiwan)"},"zu-ZA":{nativeName:"isiZulu",englishName:"Zulu"}}},sl=al,ol=0,ul=Object.keys(al.LanguageMapping)
/**
 * @license
 * Copyright 2013 Ali Al Dallal
 *
 * Licensed under the MIT license.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.

 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */;ol<ul.length;ol++){var ll=ul[ol];al.LanguageMapping[ll.toLowerCase()]=al.LanguageMapping[ll]}function cl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var dl=F.util.Dom,hl=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"updateLanguages",value:function(t,n,r,i,a,s,o){var u=t.filter(function(e){return 1==e.active})[0],l=Oe.getFirstDescendantWithClassName(n,"shaka-back-to-overflow-button");dl.removeAllChildren(n),n.appendChild(l);var c=!0,d=!1,h=void 0;try{for(var f,p=function(){var t=f.value,r=dl.createHTMLElement("button");r.addEventListener("click",function(){i(t)});var l=dl.createHTMLElement("span");l.textContent=e.getLanguageName(t,o),r.appendChild(l),a&&t==u.language&&(r.appendChild(Oe.checkmarkIcon()),l.classList.add("shaka-chosen-item"),r.setAttribute("aria-selected","true"),s.textContent=l.textContent),n.appendChild(r)},m=r[Symbol.iterator]();!(c=(f=m.next()).done);c=!0)p()}catch(e){d=!0,h=e}finally{try{c||null==m.return||m.return()}finally{if(d)throw h}}}},{key:"getLanguageName",value:function(e,t){if(!e&&!t)return"";var n=function(e){return t.resolve(e)};switch(e){case"mul":return n(Ee.Ids.MULTIPLE_LANGUAGES);case"und":return n(Ee.Ids.UNDETERMINED_LANGUAGE);case"zxx":return n(Ee.Ids.NOT_APPLICABLE)}var r=xe.getBase(e);return e in sl.LanguageMapping?sl.LanguageMapping[e].nativeName:r in sl.LanguageMapping?sl.LanguageMapping[r].nativeName+" ("+e+")":n(Ee.Ids.UNRECOGNIZED_LANGUAGE)+" ("+e+")"}}],(n=null)&&cl(t.prototype,n),r&&cl(t,r),e}();function fl(e){return(fl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ml(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vl(e,t,n){return t&&ml(e.prototype,t),n&&ml(e,n),e}function yl(e,t){return!t||"object"!==fl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gl(e){return(gl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _l(e,t){return(_l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bl=F.util.Dom;window.shaka=window.shaka||{};window.shaka;window.goog=window.goog||{};window.goog;var wl=function(e){function t(e,n){var r;return pl(this,t),(r=yl(this,gl(t).call(this,e,n))).addLanguagesButton_(),r.addAudioLangMenu_(),r.eventManager.listen(r.localization,Ne.LOCALE_UPDATED,function(){r.updateLocalizedStrings_()}),r.eventManager.listen(r.localization,Ne.LOCALE_CHANGED,function(){r.updateLocalizedStrings_()}),r.eventManager.listen(r.player,"trackschanged",function(){r.onTracksChanged_()}),r.eventManager.listen(r.player,"variantchanged",function(){r.updateAudioLanguages_()}),r.eventManager.listen(r.languagesButton_,"click",function(){r.onLanguagesClick_()}),r.updateLocalizedStrings_(),r.updateAudioLanguages_(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_l(e,t)}(t,qu),vl(t,[{key:"addAudioLangMenu_",value:function(){this.audioLangMenu_=bl.createHTMLElement("div"),this.audioLangMenu_.classList.add("shaka-audio-languages"),this.audioLangMenu_.classList.add("shaka-no-propagation"),this.audioLangMenu_.classList.add("shaka-show-controls-on-mouse-over"),this.audioLangMenu_.classList.add("shaka-settings-menu"),this.backFromLanguageButton_=bl.createHTMLElement("button"),this.backFromLanguageButton_.classList.add("shaka-back-to-overflow-button"),this.audioLangMenu_.appendChild(this.backFromLanguageButton_);var e=bl.createHTMLElement("i");e.classList.add("material-icons"),e.textContent=be.MaterialDesignIcons.BACK,this.backFromLanguageButton_.appendChild(e),this.backFromLanguageSpan_=bl.createHTMLElement("span"),this.backFromLanguageButton_.appendChild(this.backFromLanguageSpan_),this.controls.getControlsContainer().appendChild(this.audioLangMenu_)}},{key:"addLanguagesButton_",value:function(){this.languagesButton_=bl.createHTMLElement("button"),this.languagesButton_.classList.add("shaka-language-button");var e=bl.createHTMLElement("i");e.classList.add("material-icons"),e.textContent=be.MaterialDesignIcons.LANGUAGE,this.languagesButton_.appendChild(e);var t=bl.createHTMLElement("label");t.classList.add("shaka-overflow-button-label"),this.languageNameSpan_=bl.createHTMLElement("span"),this.languageNameSpan_.classList.add("languageSpan"),t.appendChild(this.languageNameSpan_),this.currentAudioLanguage_=bl.createHTMLElement("span"),this.currentAudioLanguage_.classList.add("shaka-current-selection-span");var n=this.player.getConfiguration().preferredAudioLanguage;this.currentAudioLanguage_.textContent=hl.getLanguageName(n,this.localization),t.appendChild(this.currentAudioLanguage_),this.languagesButton_.appendChild(t),this.parent.appendChild(this.languagesButton_)}},{key:"onLanguagesClick_",value:function(){this.controls.dispatchEvent(new b("submenuopen")),Oe.setDisplay(this.audioLangMenu_,!0),Oe.focusOnTheChosenItem(this.audioLangMenu_)}},{key:"updateAudioLanguages_",value:function(){var e=this,t=this.player.getVariantTracks(),n=this.player.getAudioLanguages();hl.updateLanguages(t,this.audioLangMenu_,n,function(t){return e.onAudioLanguageSelected_(t)},!0,this.currentAudioLanguage_,this.localization),Oe.focusOnTheChosenItem(this.audioLangMenu_),this.controls.dispatchEvent(new b("languageselectionupdated"))}},{key:"onTracksChanged_",value:function(){var e=this.player.getVariantTracks().length>0;Oe.setDisplay(this.languagesButton_,e),this.updateAudioLanguages_()}},{key:"onAudioLanguageSelected_",value:function(e){this.player.selectAudioLanguage(e)}},{key:"updateLocalizedStrings_",value:function(){var e=Ee.Ids;this.backFromLanguageButton_.setAttribute(ge.ARIA_LABEL,this.localization.resolve(e.BACK)),this.languagesButton_.setAttribute(ge.ARIA_LABEL,this.localization.resolve(e.LANGUAGE)),this.languageNameSpan_.textContent=this.localization.resolve(e.LANGUAGE),this.backFromLanguageSpan_.textContent=this.localization.resolve(e.LANGUAGE)}}]),t}();function El(e){return(El="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sl(e,t,n,r,i,a,s){try{var o=e[a](s),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,i)}function Tl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Cl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kl(e,t,n){return t&&Cl(e.prototype,t),n&&Cl(e,n),e}function Il(e,t){return!t||"object"!==El(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Al(e){return(Al=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ll(e,t){return(Ll=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wl.Factory=function(){function e(){pl(this,e)}return vl(e,[{key:"create",value:function(e,t){return new wl(e,t)}}]),e}(),il.registerElement("language",new wl.Factory);var xl=F.util.Dom;window.shaka=window.shaka||{};window.shaka;window.goog=window.goog||{};window.goog;var Rl=function(e){function t(e,n){var r;Tl(this,t),(r=Il(this,Al(t).call(this,e,n))).castProxy_=r.controls.getCastProxy(),r.castButton_=xl.createHTMLElement("button"),r.castButton_.classList.add("shaka-cast-button"),r.castButton_.setAttribute("aria-pressed","false"),r.castIcon_=xl.createHTMLElement("i"),r.castIcon_.classList.add("material-icons"),r.castIcon_.textContent=be.MaterialDesignIcons.CAST,r.castButton_.appendChild(r.castIcon_);var i=xl.createHTMLElement("label");return i.classList.add("shaka-overflow-button-label"),r.castNameSpan_=xl.createHTMLElement("span"),i.appendChild(r.castNameSpan_),r.castCurrentSelectionSpan_=xl.createHTMLElement("span"),r.castCurrentSelectionSpan_.classList.add("shaka-current-selection-span"),i.appendChild(r.castCurrentSelectionSpan_),r.castButton_.appendChild(i),r.parent.appendChild(r.castButton_),r.updateLocalizedStrings_(),r.onCastStatusChange_(),r.eventManager.listen(r.localization,Ne.LOCALE_UPDATED,function(){r.updateLocalizedStrings_()}),r.eventManager.listen(r.localization,Ne.LOCALE_CHANGED,function(){r.updateLocalizedStrings_()}),r.eventManager.listen(r.castButton_,"click",function(){r.onCastClick_()}),r.eventManager.listen(r.controls,"caststatuschanged",function(){r.onCastStatusChange_()}),r}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ll(e,t)}(t,qu),kl(t,[{key:"onCastClick_",value:(n=regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.castProxy_.isCasting()){e.next=4;break}this.castProxy_.suggestDisconnect(),e.next=15;break;case 4:return e.prev=4,this.castButton_.disabled=!0,e.next=8,this.castProxy_.cast();case 8:this.castButton_.disabled=!1,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),this.castButton_.disabled=!1,e.t0.code!=Error.Code.CAST_CANCELED_BY_USER&&this.controls.dispatchEvent(new FakeEvent("error",{detail:e.t0}));case 15:case"end":return e.stop()}},e,this,[[4,11]])}),r=function(){var e=this,t=arguments;return new Promise(function(r,i){var a=n.apply(e,t);function s(e){Sl(a,r,i,s,o,"next",e)}function o(e){Sl(a,r,i,s,o,"throw",e)}s(void 0)})},function(){return r.apply(this,arguments)})},{key:"onCastStatusChange_",value:function(){var e=this.castProxy_.canCast()&&this.controls.isCastAllowed(),t=this.castProxy_.isCasting(),n=be.MaterialDesignIcons;Oe.setDisplay(this.castButton_,e),this.castIcon_.textContent=t?n.EXIT_CAST:n.CAST,e&&(t?this.castButton_.setAttribute("aria-pressed","true"):this.castButton_.setAttribute("aria-pressed","false")),this.setCurrentCastSelection_()}},{key:"setCurrentCastSelection_",value:function(){this.castProxy_.isCasting()?this.castCurrentSelectionSpan_.textContent=this.castProxy_.receiverName():this.castCurrentSelectionSpan_.textContent=this.localization.resolve(Ee.Ids.OFF)}},{key:"updateLocalizedStrings_",value:function(){var e=Ee.Ids;this.castButton_.setAttribute(ge.ARIA_LABEL,this.localization.resolve(e.CAST)),this.castNameSpan_.textContent=this.localization.resolve(e.CAST),this.setCurrentCastSelection_()}}]),t}();Rl.Factory=function(){function e(){Tl(this,e)}return kl(e,[{key:"create",value:function(e,t){return new Rl(e,t)}}]),e}(),il.registerElement("cast",new Rl.Factory);function Nl(e){return(Nl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ml(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ol(e,t,n){return t&&Pl(e.prototype,t),n&&Pl(e,n),e}function Dl(e,t){return!t||"object"!==Nl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ul(e){return(Ul=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fl(e,t){return(Fl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bl=F.util.Dom;window.shaka=window.shaka||{};var Vl=window.shaka;window.goog=window.goog||{};window.goog;var jl=function(e){function t(e,n){var r;return Ml(this,t),(r=Dl(this,Ul(t).call(this,e,n))).button_=Bl.createHTMLElement("button"),r.button_.classList.add("material-icons"),r.button_.classList.add("shaka-fast-forward-button"),r.button_.textContent=Vl.ui.Enums.MaterialDesignIcons.FAST_FORWARD,r.parent.appendChild(r.button_),r.updateAriaLabel_(),r.eventManager.listen(r.localization,Ne.LOCALE_UPDATED,function(){r.updateAriaLabel_()}),r.eventManager.listen(r.localization,Ne.LOCALE_CHANGED,function(){r.updateAriaLabel_()}),r.eventManager.listen(r.button_,"click",function(){r.fastForward_()}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fl(e,t)}(t,qu),Ol(t,[{key:"updateAriaLabel_",value:function(){this.button_.setAttribute(Constants.ARIA_LABEL,this.localization.resolve(Locales.Ids.FAST_FORWARD))}},{key:"fastForward_",value:function(){if(this.video.duration){var e=this.player.getPlaybackRate(),t=e<0||e>4?1:2*e;this.player.trickPlay(t)}}}]),t}();function Hl(e){return(Hl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kl(e,t,n,r,i,a,s){try{var o=e[a](s),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,i)}function Gl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ql(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wl(e,t,n){return t&&ql(e.prototype,t),n&&ql(e,n),e}function zl(e,t){return!t||"object"!==Hl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Yl(e){return(Yl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xl(e,t){return(Xl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jl.Factory=function(){function e(){Ml(this,e)}return Ol(e,[{key:"create",value:function(e,t){return new jl(e,t)}}]),e}(),ft.registerElement("fast_forward",new jl.Factory);var $l=F.util.Dom;window.shaka=window.shaka||{};window.shaka;window.goog=window.goog||{};window.goog;var Zl=function(e){function t(e,n){var r;return Gl(this,t),(r=zl(this,Yl(t).call(this,e,n))).button_=$l.createHTMLElement("button"),r.button_.classList.add("shaka-fullscreen-button"),r.button_.classList.add("material-icons"),document.fullscreenEnabled||r.button_.classList.add("shaka-hidden"),r.button_.textContent=be.MaterialDesignIcons.FULLSCREEN,r.parent.appendChild(r.button_),r.updateAriaLabel_(),r.videoContainer_=r.controls.getVideoContainer(),r.eventManager.listen(r.localization,Ne.LOCALE_UPDATED,function(){r.updateAriaLabel_()}),r.eventManager.listen(r.localization,Ne.LOCALE_CHANGED,function(){r.updateAriaLabel_()}),r.eventManager.listen(r.button_,"click",function(){r.toggleFullScreen_()}),screen.orientation&&r.eventManager.listen(screen.orientation,"change",function(){r.onScreenRotation_()}),r.eventManager.listen(document,"fullscreenchange",function(){r.updateIcon_(),r.updateAriaLabel_()}),r}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xl(e,t)}(t,qu),Wl(t,[{key:"updateAriaLabel_",value:function(){var e=Ee.Ids,t=document.fullscreenElement?e.EXIT_FULL_SCREEN:e.FULL_SCREEN;this.button_.setAttribute(ge.ARIA_LABEL,this.localization.resolve(t))}},{key:"updateIcon_",value:function(){this.button_.textContent=document.fullscreenElement?be.MaterialDesignIcons.EXIT_FULLSCREEN:be.MaterialDesignIcons.FULLSCREEN}},{key:"toggleFullScreen_",value:(n=regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!document.fullscreenElement){e.next=4;break}document.exitFullscreen(),e.next=15;break;case 4:if(e.prev=4,!document.pictureInPictureElement){e.next=8;break}return e.next=8,document.exitPictureInPicture();case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),this.controls.dispatchEvent(new FakeEvent("error",{detail:e.t0}));case 13:return e.next=15,this.videoContainer_.requestFullscreen();case 15:case"end":return e.stop()}},e,this,[[4,10]])}),r=function(){var e=this,t=arguments;return new Promise(function(r,i){var a=n.apply(e,t);function s(e){Kl(a,r,i,s,o,"next",e)}function o(e){Kl(a,r,i,s,o,"throw",e)}s(void 0)})},function(){return r.apply(this,arguments)})},{key:"onScreenRotation_",value:function(){this.video&&0!=this.video.readyState&&!this.controls.getCastProxy().isCasting()&&(screen.orientation.type.includes("landscape")&&!document.fullscreenElement?this.videoContainer_.requestFullscreen():screen.orientation.type.includes("portrait")&&document.fullscreenElement&&document.exitFullscreen())}}]),t}();function Ql(e){return(Ql="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ec(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tc(e,t,n){return t&&ec(e.prototype,t),n&&ec(e,n),e}function nc(e){return(nc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ic(e,t){return(ic=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Zl.Factory=function(){function e(){Gl(this,e)}return Wl(e,[{key:"create",value:function(e,t){return new Zl(e,t)}}]),e}(),ft.registerElement("fullscreen",new Zl.Factory);
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ac=F.util.Dom;window.shaka=window.shaka||{};window.shaka;window.goog=window.goog||{};window.goog;var sc=function(e){function t(e,n){var r,i,a,s;return Jl(this,t),r=function(e,t){return!t||"object"!==Ql(t)&&"function"!=typeof t?rc(e):t}(this,nc(t).call(this,e,n)),i=rc(r),s=function(){var e=Ee.Ids,t=r.video.muted?e.UNMUTE:e.MUTE;r.button_.setAttribute(ge.ARIA_LABEL,r.localization.resolve(t))},(a="updateAriaLabel_")in i?Object.defineProperty(i,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[a]=s,r.button_=ac.createHTMLElement("button"),r.button_.classList.add("shaka-mute-button"),r.button_.classList.add("material-icons"),r.button_.textContent=be.MaterialDesignIcons.MUTE,r.parent.appendChild(r.button_),r.updateAriaLabel_(),r.eventManager.listen(r.localization,Ne.LOCALE_UPDATED,function(){r.updateAriaLabel_()}),r.eventManager.listen(r.localization,Ne.LOCALE_CHANGED,function(){r.updateAriaLabel_()}),r.eventManager.listen(r.button_,"click",function(){r.video.muted=!r.video.muted}),r.eventManager.listen(r.video,"volumechange",function(){r.updateAriaLabel_(),r.updateIcon_()}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ic(e,t)}(t,qu),tc(t,[{key:"updateIcon_",value:function(){this.button_.textContent=this.video.muted?be.MaterialDesignIcons.UNMUTE:be.MaterialDesignIcons.MUTE}}]),t}();function oc(e){return(oc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uc(e,t,n,r,i,a,s){try{var o=e[a](s),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,i)}function lc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}sc.Factory=function(){function e(){Jl(this,e)}return tc(e,[{key:"create",value:function(e,t){return new sc(e,t)}}]),e}(),ft.registerElement("mute",new sc.Factory);
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var cc=F.util.ConfigUtils,dc=F.util.Dom;window.shaka=window.shaka||{};var hc=window.shaka;window.goog=window.goog||{};window.goog;var fc=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.player_=t,this.config_=this.defaultConfig_(),n.dataset.shakaPlayerContainer="",n.ui=this,this.isMobile()&&n.classList.add("shaka-mobile"),this.controls_=new ft(t,n,r,this.config_),this.configure({})}var t,n,r,i,a;return t=e,n=[{key:"destroy",value:(i=regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.controls_.destroy();case 2:return this.controls_=null,e.next=5,this.player_.destroy();case 5:this.player_=null;case 6:case"end":return e.stop()}},e,this)}),a=function(){var e=this,t=arguments;return new Promise(function(n,r){var a=i.apply(e,t);function s(e){uc(a,n,r,s,o,"next",e)}function o(e){uc(a,n,r,s,o,"throw",e)}s(void 0)})},function(){return a.apply(this,arguments)})},{key:"isMobile",value:function(){return Et.isMobile()}},{key:"getConfiguration",value:function(){var e=this.defaultConfig_();return cc.mergeConfigObjects(e,this.config_,this.defaultConfig_(),{},""),e}},{key:"configure",value:function(e,t){window.asserts.assert("object"==oc(e)||2==arguments.length,"String configs should have values!"),2==arguments.length&&"string"==typeof e&&(e=cc.convertToConfigObject(e,t)),window.asserts.assert("object"==oc(e),"Should be an object!"),cc.mergeConfigObjects(this.config_,e,this.defaultConfig_(),{},""),this.config_.castReceiverAppId&&!this.config_.overflowMenuButtons.includes("cast")&&this.config_.overflowMenuButtons.push("cast"),window.asserts.assert(null!=this.player_,"Should have a player!"),this.controls_.configure(this.config_),this.controls_.dispatchEvent(new b("uiupdated"))}},{key:"getPlayer",value:function(){return hc.Deprecate.deprecateFeature(2,6,"ui.Overlay.getPlayer()","Please use getControls().getPlayer() instead."),this.controls_.getPlayer()}},{key:"getControls",value:function(){return this.controls_}},{key:"setEnabled",value:function(e){this.controls_.setEnabledShakaControls(e)}},{key:"defaultConfig_",value:function(){return{controlPanelElements:["time_and_duration","spacer","mute","volume","fullscreen","overflow_menu"],overflowMenuButtons:["captions","quality","language","picture_in_picture","cast"],addSeekBar:!0,castReceiverAppId:""}}}],r=[{key:"scanPageForShakaElements_",value:function(){if(co.installAll(),!F.Player.isBrowserSupported())return hc.log.error("Shaka Player does not support this browser. Please see https://tinyurl.com/y7s4j9tr for the list of supported browsers."),void e.dispatchLoadedEvent_("shaka-ui-load-failed");var t=document.querySelectorAll("[data-shaka-player-container]"),n=document.querySelectorAll("[data-shaka-player]");if(n.length||t.length)if(n.length&&!t.length){var r=!0,i=!1,a=void 0;try{for(var s,o=n[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var u=s.value;window.asserts.assert("video"==u.tagName.toLowerCase(),"Should be a video element!");var l=document.createElement("div");u.parentElement.replaceChild(l,u),l.appendChild(u);var c="";u.dataset&&u.dataset.shakaPlayerCastReceiverId&&(c=u.dataset.shakaPlayerCastReceiverId);var d=e.createUI_(dc.asHTMLElement(l),dc.asHTMLMediaElement(u));d.configure({castReceiverAppId:c}),dc.asHTMLMediaElement(u).controls&&d.getControls().setEnabledNativeControls(!0)}}catch(e){i=!0,a=e}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}}else{var h=!0,f=!1,p=void 0;try{for(var m,v=t[Symbol.iterator]();!(h=(m=v.next()).done);h=!0){var y=m.value;window.asserts.assert("div"==y.tagName.toLowerCase(),"Container should be a div!");var g="";y.dataset&&y.dataset.shakaPlayerCastReceiverId&&(g=y.dataset.shakaPlayerCastReceiverId);var _=null,b=!0,w=!1,E=void 0;try{for(var S,T=n[Symbol.iterator]();!(b=(S=T.next()).done);b=!0){var C=S.value;if(window.asserts.assert("video"==C.tagName.toLowerCase(),"Should be a video element!"),C.parentElement==y){_=C;break}}}catch(e){w=!0,E=e}finally{try{b||null==T.return||T.return()}finally{if(w)throw E}}_||((_=document.createElement("video")).setAttribute("playsinline",""),y.appendChild(_)),_.dataset&&_.dataset.shakaPlayerCastReceiverId&&(g=_.dataset.shakaPlayerCastReceiverId),e.createUI_(dc.asHTMLElement(y),dc.asHTMLMediaElement(_)).configure({castReceiverAppId:g})}}catch(e){f=!0,p=e}finally{try{h||null==v.return||v.return()}finally{if(f)throw p}}}e.dispatchLoadedEvent_("shaka-ui-loaded")}},{key:"dispatchLoadedEvent_",value:function(e){var t=document.createEvent("CustomEvent");t.initCustomEvent(e,!1,!1,null),document.dispatchEvent(t)}},{key:"createUI_",value:function(t,n){var r=new F.Player(n),i=new e(r,t,n);return n.controls||r.configure("textDisplayFactory",function(){return new qr(n,t)}),t.ui=i,n.ui=i,i}}],n&&lc(t.prototype,n),r&&lc(t,r),e}();function pc(e){return(pc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mc(e,t,n,r,i,a,s){try{var o=e[a](s),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,i)}function vc(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function s(e){mc(a,r,i,s,o,"next",e)}function o(e){mc(a,r,i,s,o,"throw",e)}s(void 0)})}}function yc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _c(e,t,n){return t&&gc(e.prototype,t),n&&gc(e,n),e}function bc(e,t){return!t||"object"!==pc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wc(e){return(wc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ec(e,t){return(Ec=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */"complete"==document.readyState?Promise.resolve().then(fc.scanPageForShakaElements_):window.addEventListener("load",fc.scanPageForShakaElements_);var Sc=F.util.Dom;window.shaka=window.shaka||{};window.shaka;window.goog=window.goog||{};window.goog;var Tc=function(e){function t(e,n){var r;yc(this,t),(r=bc(this,wc(t).call(this,e,n))).localVideo_=r.controls.getLocalVideo();var i=Ee.Ids;r.pipButton_=Sc.createHTMLElement("button"),r.pipButton_.classList.add("shaka-pip-button"),r.pipIcon_=Sc.createHTMLElement("i"),r.pipIcon_.classList.add("material-icons"),r.pipIcon_.textContent=be.MaterialDesignIcons.PIP,r.pipButton_.appendChild(r.pipIcon_);var a=Sc.createHTMLElement("label");return a.classList.add("shaka-overflow-button-label"),r.pipNameSpan_=Sc.createHTMLElement("span"),r.pipNameSpan_.textContent=r.localization.resolve(i.PICTURE_IN_PICTURE),a.appendChild(r.pipNameSpan_),r.currentPipState_=Sc.createHTMLElement("span"),r.currentPipState_.classList.add("shaka-current-selection-span"),a.appendChild(r.currentPipState_),r.pipButton_.appendChild(a),r.updateLocalizedStrings_(),r.parent.appendChild(r.pipButton_),r.isPipAllowed_()||Oe.setDisplay(r.pipButton_,!1),r.eventManager.listen(r.localization,Ne.LOCALE_UPDATED,function(){r.updateLocalizedStrings_()}),r.eventManager.listen(r.localization,Ne.LOCALE_CHANGED,function(){r.updateLocalizedStrings_()}),r.eventManager.listen(r.pipButton_,"click",function(){r.onPipClick_()}),r.eventManager.listen(r.localVideo_,"enterpictureinpicture",function(){r.onEnterPictureInPicture_()}),r.eventManager.listen(r.localVideo_,"leavepictureinpicture",function(){r.onLeavePictureInPicture_()}),r.eventManager.listen(r.controls,"caststatuschange",function(e){r.onCastStatusChange_(e)}),r.eventManager.listen(r.player,"trackschanged",function(){r.onTracksChanged_()}),r}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ec(e,t)}(t,qu),_c(t,[{key:"isPipAllowed_",value:function(){return document.pictureInPictureEnabled&&!this.video.disablePictureInPicture}},{key:"onPipClick_",value:(r=vc(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,document.pictureInPictureElement){e.next=7;break}return document.fullscreenElement&&document.exitFullscreen(),e.next=5,this.video.requestPictureInPicture();case 5:e.next=9;break;case 7:return e.next=9,document.exitPictureInPicture();case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),this.controls.dispatchEvent(new b("error",{detail:e.t0}));case 14:case"end":return e.stop()}},e,this,[[0,11]])})),function(){return r.apply(this,arguments)})},{key:"onEnterPictureInPicture_",value:function(){var e=Ee.Ids;this.pipIcon_.textContent=be.MaterialDesignIcons.EXIT_PIP,this.pipButton_.setAttribute(ge.ARIA_LABEL,this.localization.resolve(e.EXIT_PICTURE_IN_PICTURE)),this.currentPipState_.textContent=this.localization.resolve(e.ON)}},{key:"onLeavePictureInPicture_",value:function(){var e=Ee.Ids;this.pipIcon_.textContent=be.MaterialDesignIcons.PIP,this.pipButton_.setAttribute(ge.ARIA_LABEL,this.localization.resolve(e.ENTER_PICTURE_IN_PICTURE)),this.currentPipState_.textContent=this.localization.resolve(e.OFF)}},{key:"updateLocalizedStrings_",value:function(){var e=Ee.Ids;this.pipNameSpan_.textContent=this.localization.resolve(e.PICTURE_IN_PICTURE);var t=document.pictureInPictureElement?e.EXIT_PICTURE_IN_PICTURE:e.ENTER_PICTURE_IN_PICTURE;this.pipButton_.setAttribute(ge.ARIA_LABEL,this.localization.resolve(t));var n=document.pictureInPictureElement?e.ON:e.OFF;this.currentPipState_.textContent=this.localization.resolve(n)}},{key:"onCastStatusChange_",value:function(e){e.newStatus?this.isPipAllowed_()&&Oe.setDisplay(this.pipButton_,!1):this.isPipAllowed_()&&Oe.setDisplay(this.pipButton_,!0)}},{key:"onTracksChanged_",value:(n=vc(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isPipAllowed_()){e.next=4;break}Oe.setDisplay(this.pipButton_,!1),e.next=12;break;case 4:if(!this.player||!this.player.isAudioOnly()){e.next=11;break}if(Oe.setDisplay(this.pipButton_,!1),!document.pictureInPictureElement){e.next=9;break}return e.next=9,document.exitPictureInPicture();case 9:e.next=12;break;case 11:Oe.setDisplay(this.pipButton_,!0);case 12:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})}]),t}();function Cc(e){return(Cc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ic(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ac(e,t,n){return t&&Ic(e.prototype,t),n&&Ic(e,n),e}function Lc(e,t){return!t||"object"!==Cc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xc(e){return(xc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rc(e,t){return(Rc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tc.Factory=function(){function e(){yc(this,e)}return _c(e,[{key:"create",value:function(e,t){return new Tc(e,t)}}]),e}(),il.registerElement("picture_in_picture",new Tc.Factory);var Nc=F.util.Dom;window.shaka=window.shaka||{};window.shaka;window.goog=window.goog||{};window.goog;var Mc=function(e){function t(e,n){var r;kc(this,t),(r=Lc(this,xc(t).call(this,e,n))).button_=Nc.createHTMLElement("button"),r.button_.classList.add("shaka-play-pause-button"),r.button_.classList.add("material-icons"),r.parent.appendChild(r.button_),r.updateIcon_(),r.updateAriaLabel_();var i=Ne.LOCALE_UPDATED;r.eventManager.listen(r.localization,i,function(){r.updateAriaLabel_()});var a=Ne.LOCALE_CHANGED;return r.eventManager.listen(r.localization,a,function(){r.updateAriaLabel_()}),r.eventManager.listen(r.video,"play",function(){r.updateAriaLabel_(),r.updateIcon_()}),r.eventManager.listen(r.video,"pause",function(){r.updateAriaLabel_(),r.updateIcon_()}),r.eventManager.listen(r.button_,"click",function(){r.isPaused_()?r.video.play():r.video.pause()}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rc(e,t)}(t,qu),Ac(t,[{key:"isPaused_",value:function(){return this.video.paused&&!this.controls.isSeeking()}},{key:"updateAriaLabel_",value:function(){var e=Locales.Ids,t=this.isPaused_()?e.PLAY:e.PAUSE;this.button_.setAttribute(Constants.ARIA_LABEL,this.localization.resolve(t))}},{key:"updateIcon_",value:function(){var e=be.MaterialDesignIcons;this.button_.textContent=this.isPaused_()?e.PLAY:e.PAUSE}}]),t}();function Pc(e){return(Pc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Uc(e,t,n){return t&&Dc(e.prototype,t),n&&Dc(e,n),e}function Fc(e,t){return!t||"object"!==Pc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Bc(e){return(Bc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vc(e,t){return(Vc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mc.Factory=function(){function e(){kc(this,e)}return Ac(e,[{key:"create",value:function(e,t){return new Mc(e,t)}}]),e}(),ft.registerElement("play_pause",new Mc.Factory);var jc=F.util.Dom;window.shaka=window.shaka||{};window.shaka;window.goog=window.goog||{};window.goog;var Hc=function(e){function t(e,n){var r;return Oc(this,t),(r=Fc(this,Bc(t).call(this,e,n))).currentTime_=jc.createHTMLElement("button"),r.currentTime_.classList.add("shaka-current-time"),r.currentTime_.textContent="0:00",r.parent.appendChild(r.currentTime_),r.eventManager.listen(r.currentTime_,"click",function(){r.player.isLive()&&(r.video.currentTime=r.player.seekRange().end)}),r.eventManager.listen(r.controls,"timeandseekrangeupdated",function(){r.updateTime_()}),r.eventManager.listen(r.player,"trackschanged",function(){r.onTracksChanged_()}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vc(e,t)}(t,qu),Uc(t,[{key:"updateTime_",value:function(){var e=this.controls.isSeeking(),t=this.controls.getDisplayTime(),n=this.video.duration,r=this.player.seekRange(),i=r.end-r.start;if(this.player.isLive()){var a=Math.floor(r.end-t),s=i>=3600;(t=Math.max(0,a))>=1||e?(this.currentTime_.textContent="- "+this.buildTimeString_(t,s),this.currentTime_.disabled=!1):(this.currentTime_.textContent=this.localization.resolve(Ee.Ids.LIVE),this.currentTime_.disabled=!0)}else{var o=n>=3600;this.currentTime_.textContent=this.buildTimeString_(t,o),n&&(this.currentTime_.textContent+=" / "+this.buildTimeString_(n,o)),this.currentTime_.disabled=!0}}},{key:"buildTimeString_",value:function(e,t){var n=Math.floor(e/3600),r=Math.floor(e/60%60),i=Math.floor(e%60);i<10&&(i="0"+i);var a=r+":"+i;return t&&(r<10&&(a="0"+a),a=n+":"+a),a}},{key:"onTracksChanged_",value:function(){if(this.player.isLive()){var e=Ee.Ids.SKIP_TO_LIVE;this.currentTime_.setAttribute(ge.ARIA_LABEL,this.localization.resolve(e))}}}]),t}();function Kc(e){return(Kc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wc(e,t,n){return t&&qc(e.prototype,t),n&&qc(e,n),e}function zc(e,t){return!t||"object"!==Kc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Yc(e){return(Yc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xc(e,t){return(Xc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hc.Factory=function(){function e(){Oc(this,e)}return Uc(e,[{key:"create",value:function(e,t){return new Hc(e,t)}}]),e}(),ft.registerElement("time_and_duration",new Hc.Factory);var $c=F.util.Dom;window.shaka=window.shaka||{};window.shaka;window.goog=window.goog||{};window.goog;var Zc=function(e){function t(e,n){var r;return Gc(this,t),(r=zc(this,Yc(t).call(this,e,n))).addResolutionButton_(),r.addResolutionMenu_(),r.eventManager.listen(r.localization,Ne.LOCALE_UPDATED,function(){r.updateLocalizedStrings_()}),r.eventManager.listen(r.localization,Ne.LOCALE_CHANGED,function(){r.updateLocalizedStrings_()}),r.eventManager.listen(r.resolutionButton_,"click",function(){r.onResolutionClick_()}),r.eventManager.listen(r.player,"variantchanged",function(){r.updateResolutionSelection_()}),r.eventManager.listen(r.player,"trackschanged",function(){r.updateResolutionSelection_()}),r.eventManager.listen(r.player,"abrstatuschanged",function(){r.updateResolutionSelection_()}),r.updateResolutionSelection_(),r.updateLocalizedStrings_(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xc(e,t)}(t,qu),Wc(t,[{key:"addResolutionButton_",value:function(){this.resolutionButton_=$c.createHTMLElement("button"),this.resolutionButton_.classList.add("shaka-resolution-button");var e=$c.createHTMLElement("i");e.classList.add("material-icons"),e.textContent=be.MaterialDesignIcons.RESOLUTION,this.resolutionButton_.appendChild(e);var t=$c.createHTMLElement("label");t.classList.add("shaka-overflow-button-label"),this.resolutionNameSpan_=$c.createHTMLElement("span"),t.appendChild(this.resolutionNameSpan_),this.currentResolution_=$c.createHTMLElement("span"),this.currentResolution_.classList.add("shaka-current-selection-span"),t.appendChild(this.currentResolution_),this.resolutionButton_.appendChild(t),this.parent.appendChild(this.resolutionButton_)}},{key:"addResolutionMenu_",value:function(){this.resolutionMenu_=$c.createHTMLElement("div"),this.resolutionMenu_.classList.add("shaka-resolutions"),this.resolutionMenu_.classList.add("shaka-no-propagation"),this.resolutionMenu_.classList.add("shaka-show-controls-on-mouse-over"),this.resolutionMenu_.classList.add("shaka-settings-menu"),this.backFromResolutionButton_=$c.createHTMLElement("button"),this.backFromResolutionButton_.classList.add("shaka-back-to-overflow-button"),this.resolutionMenu_.appendChild(this.backFromResolutionButton_);var e=$c.createHTMLElement("i");e.classList.add("material-icons"),e.textContent=be.MaterialDesignIcons.BACK,this.backFromResolutionButton_.appendChild(e),this.backFromResolutionSpan_=$c.createHTMLElement("span"),this.backFromResolutionButton_.appendChild(this.backFromResolutionSpan_),this.controls.getControlsContainer().appendChild(this.resolutionMenu_)}},{key:"updateResolutionSelection_",value:function(){var e=this,t=this.player.getVariantTracks();if(t.length&&!t[0].height)return Oe.setDisplay(this.resolutionMenu_,!1),void Oe.setDisplay(this.resolutionButton_,!1);Oe.setDisplay(this.resolutionButton_,!0),t.sort(function(e,t){return e.height-t.height}),t.reverse();var n=t.find(function(e){return e.active});if(n){var r=n.language;t=t.filter(function(e){return e.language==r})}var i=Oe.getFirstDescendantWithClassName(this.resolutionMenu_,"shaka-back-to-overflow-button");$c.removeAllChildren(this.resolutionMenu_),this.resolutionMenu_.appendChild(i);var a=this.player.getConfiguration().abr.enabled,s=!0,o=!1,u=void 0;try{for(var l,c=function(){var t=l.value,r=$c.createHTMLElement("button");r.classList.add("explicit-resolution"),e.eventManager.listen(r,"click",function(){return e.onTrackSelected_(t)});var i=$c.createHTMLElement("span");i.textContent=t.height+"p",r.appendChild(i),a||t!=n||(r.setAttribute("aria-selected","true"),r.appendChild(Oe.checkmarkIcon()),i.classList.add("shaka-chosen-item"),e.currentResolution_.textContent=i.textContent),e.resolutionMenu_.appendChild(r)},d=t[Symbol.iterator]();!(s=(l=d.next()).done);s=!0)c()}catch(e){o=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(o)throw u}}var h=$c.createHTMLElement("button");h.classList.add("shaka-enable-abr-button"),this.eventManager.listen(h,"click",function(){e.player.configure({abr:{enabled:!0}}),e.updateResolutionSelection_()}),this.abrOnSpan_=$c.createHTMLElement("span"),this.abrOnSpan_.classList.add("shaka-auto-span"),this.abrOnSpan_.textContent=this.localization.resolve(Ee.Ids.AUTO_QUALITY),h.appendChild(this.abrOnSpan_),a&&(h.setAttribute("aria-selected","true"),h.appendChild(Oe.checkmarkIcon()),this.abrOnSpan_.classList.add("shaka-chosen-item"),this.currentResolution_.textContent=this.localization.resolve(Ee.Ids.AUTO_QUALITY)),this.resolutionMenu_.appendChild(h),Oe.focusOnTheChosenItem(this.resolutionMenu_),this.controls.dispatchEvent(new b("resolutionselectionupdated"))}},{key:"onResolutionClick_",value:function(){this.controls.dispatchEvent(new b("submenuopen")),Oe.setDisplay(this.resolutionMenu_,!0),Oe.focusOnTheChosenItem(this.resolutionMenu_)}},{key:"onTrackSelected_",value:function(e){this.player.configure({abr:{enabled:!1}}),this.player.selectVariantTrack(e,!0)}},{key:"updateLocalizedStrings_",value:function(){var e=Ee.Ids;this.resolutionButton_.setAttribute(ge.ARIA_LABEL,this.localization.resolve(e.RESOLUTION)),this.backFromResolutionButton_.setAttribute(ge.ARIA_LABEL,this.localization.resolve(e.RESOLUTION)),this.backFromResolutionSpan_.textContent=this.localization.resolve(e.RESOLUTION),this.resolutionNameSpan_.textContent=this.localization.resolve(e.RESOLUTION),this.abrOnSpan_.textContent=this.localization.resolve(e.AUTO_QUALITY),this.player.getConfiguration().abr.enabled&&(this.currentResolution_.textContent=this.localization.resolve(Ee.Ids.AUTO_QUALITY))}}]),t}();function Qc(e){return(Qc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ed(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function td(e,t,n){return t&&ed(e.prototype,t),n&&ed(e,n),e}function nd(e,t){return!t||"object"!==Qc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rd(e){return(rd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function id(e,t){return(id=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zc.Factory=function(){function e(){Gc(this,e)}return Wc(e,[{key:"create",value:function(e,t){return new Zc(e,t)}}]),e}(),il.registerElement("quality",new Zc.Factory);var ad=F.util.Dom;window.shaka=window.shaka||{};window.shaka;window.goog=window.goog||{};window.goog;var sd=function(e){function t(e,n){var r;return Jc(this,t),(r=nd(this,rd(t).call(this,e,n))).button_=ad.createHTMLElement("button"),r.button_.classList.add("material-icons"),r.button_.classList.add("shaka-rewind-button"),r.button_.textContent=be.MaterialDesignIcons.REWIND,r.parent.appendChild(r.button_),r.updateAriaLabel_(),r.eventManager.listen(r.localization,Ne.LOCALE_UPDATED,function(){r.updateAriaLabel_()}),r.eventManager.listen(r.localization,Ne.LOCALE_CHANGED,function(){r.updateAriaLabel_()}),r.eventManager.listen(r.button_,"click",function(){r.rewind_()}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&id(e,t)}(t,qu),td(t,[{key:"updateAriaLabel_",value:function(){this.button_.setAttribute(Constants.ARIA_LABEL,this.localization.resolve(Locales.Ids.REWIND))}},{key:"rewind_",value:function(){if(this.video.duration){var e=this.player.getPlaybackRate(),t=e>0||e<-4?-1:2*e;this.player.trickPlay(t)}}}]),t}();function od(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ud(e){return(ud="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ld(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cd(e,t){return!t||"object"!==ud(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dd(e){return(dd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hd(e,t){return(hd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sd.Factory=function(){function e(){Jc(this,e)}return td(e,[{key:"create",value:function(e,t){return new sd(e,t)}}]),e}(),ft.registerElement("rewind",new sd.Factory);var fd=F.util.Dom;window.shaka=window.shaka||{};window.shaka;window.goog=window.goog||{};window.goog;var pd=function(e){function t(e,n){var r;ld(this,t),r=cd(this,dd(t).call(this,e,n));var i=fd.createHTMLElement("div");return i.classList.add("shaka-spacer"),i.setAttribute("aria-hidden",!0),r.parent.appendChild(i),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hd(e,t)}(t,qu),t}();function md(e){return(md="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vd(e,t,n,r,i,a,s){try{var o=e[a](s),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,i)}function yd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _d(e,t,n){return t&&gd(e.prototype,t),n&&gd(e,n),e}function bd(e,t){return!t||"object"!==md(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wd(e){return(wd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ed(e,t){return(Ed=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pd.Factory=function(){function e(){ld(this,e)}var t,n,r;return t=e,(n=[{key:"create",value:function(e,t){return new pd(e,t)}}])&&od(t.prototype,n),r&&od(t,r),e}(),ft.registerElement("spacer",new pd.Factory);var Sd=F.util.Dom;window.shaka=window.shaka||{};window.shaka;window.goog=window.goog||{};window.goog;var Td=function(e){function t(e,n){var r;return yd(this,t),(r=bd(this,wd(t).call(this,e,n))).addCaptionButton_(),r.addTextLangMenu_(),r.eventManager.listen(r.localization,Ne.LOCALE_UPDATED,function(){r.updateLocalizedStrings_(),r.updateTextLanguages_()}),r.eventManager.listen(r.localization,Ne.LOCALE_CHANGED,function(){r.updateLocalizedStrings_(),r.updateTextLanguages_()}),r.eventManager.listen(r.player,"texttrackvisibility",function(){r.onCaptionStateChange_()}),r.eventManager.listen(r.captionButton_,"click",function(){r.onCaptionClick_()}),r.eventManager.listen(r.player,"textchanged",function(){r.updateTextLanguages_()}),r.eventManager.listen(r.player,"trackschanged",function(){r.onTracksChanged_()}),r.onCaptionStateChange_(),r.updateLocalizedStrings_(),r.updateTextLanguages_(),r}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ed(e,t)}(t,qu),_d(t,[{key:"addCaptionButton_",value:function(){this.captionButton_=Sd.createHTMLElement("button"),this.captionButton_.classList.add("shaka-caption-button"),this.captionIcon_=Sd.createHTMLElement("i"),this.captionIcon_.classList.add("material-icons"),this.captionIcon_.textContent=be.MaterialDesignIcons.CLOSED_CAPTIONS,this.player&&this.player.isTextTrackVisible()?this.captionButton_.setAttribute("aria-pressed","true"):this.captionButton_.setAttribute("aria-pressed","false"),this.captionButton_.appendChild(this.captionIcon_);var e=Sd.createHTMLElement("label");e.classList.add("shaka-overflow-button-label"),this.captionsNameSpan_=Sd.createHTMLElement("span"),e.appendChild(this.captionsNameSpan_),this.currentCaptions_=Sd.createHTMLElement("span"),this.currentCaptions_.classList.add("shaka-current-selection-span"),e.appendChild(this.currentCaptions_),this.captionButton_.appendChild(e),this.parent.appendChild(this.captionButton_)}},{key:"addTextLangMenu_",value:function(){this.textLangMenu_=Sd.createHTMLElement("div"),this.textLangMenu_.classList.add("shaka-text-languages"),this.textLangMenu_.classList.add("shaka-no-propagation"),this.textLangMenu_.classList.add("shaka-show-controls-on-mouse-over"),this.textLangMenu_.classList.add("shaka-settings-menu"),this.backFromCaptionsButton_=Sd.createHTMLElement("button"),this.backFromCaptionsButton_.classList.add("shaka-back-to-overflow-button"),this.textLangMenu_.appendChild(this.backFromCaptionsButton_);var e=Sd.createHTMLElement("i");e.classList.add("material-icons"),e.textContent=be.MaterialDesignIcons.BACK,this.backFromCaptionsButton_.appendChild(e),this.backFromCaptionsSpan_=Sd.createHTMLElement("span"),this.backFromCaptionsButton_.appendChild(this.backFromCaptionsSpan_);var t=Sd.createHTMLElement("button");t.setAttribute("aria-selected","true"),this.textLangMenu_.appendChild(t),t.appendChild(Oe.checkmarkIcon()),this.captionsOffSpan_=Sd.createHTMLElement("span"),this.captionsOffSpan_.classList.add("shaka-auto-span"),t.appendChild(this.captionsOffSpan_),this.controls.getControlsContainer().appendChild(this.textLangMenu_)}},{key:"onCaptionClick_",value:function(){this.controls.dispatchEvent(new b("submenuopen")),Oe.setDisplay(this.textLangMenu_,!0),Oe.focusOnTheChosenItem(this.textLangMenu_)}},{key:"onCaptionStateChange_",value:function(){this.player.isTextTrackVisible()?(this.captionIcon_.classList.add("shaka-captions-on"),this.captionIcon_.classList.remove("shaka-captions-off"),this.captionButton_.setAttribute("aria-pressed","true")):(this.captionIcon_.classList.add("shaka-captions-off"),this.captionIcon_.classList.remove("shaka-captions-on"),this.captionButton_.setAttribute("aria-pressed","false")),this.controls.dispatchEvent(new b("captionselectionupdated"))}},{key:"updateTextLanguages_",value:function(){var e=this,t=this.player.getTextTracks(),n=this.player.getTextLanguagesAndRoles().map(function(e){return e.language});hl.updateLanguages(t,this.textLangMenu_,n,function(t){return e.onTextLanguageSelected_(t)},this.player.isTextTrackVisible(),this.currentCaptions_,this.localization);var r=Sd.createHTMLElement("button");r.classList.add("shaka-turn-captions-off-button"),this.eventManager.listen(r,"click",function(){e.player.setTextTrackVisibility(!1).catch(function(){}),e.updateTextLanguages_()}),r.appendChild(this.captionsOffSpan_),this.textLangMenu_.appendChild(r),this.player.isTextTrackVisible()||(r.setAttribute("aria-selected","true"),r.appendChild(Oe.checkmarkIcon()),this.captionsOffSpan_.classList.add("shaka-chosen-item"),this.currentCaptions_.textContent=this.localization.resolve(Ee.Ids.OFF)),Oe.focusOnTheChosenItem(this.textLangMenu_),this.controls.dispatchEvent(new b("captionselectionupdated"))}},{key:"onTextLanguageSelected_",value:(n=regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.player.setTextTrackVisibility(!0);case 2:this.player&&this.player.selectTextLanguage(t);case 3:case"end":return e.stop()}},e,this)}),r=function(){var e=this,t=arguments;return new Promise(function(r,i){var a=n.apply(e,t);function s(e){vd(a,r,i,s,o,"next",e)}function o(e){vd(a,r,i,s,o,"throw",e)}s(void 0)})},function(e){return r.apply(this,arguments)})},{key:"updateLocalizedStrings_",value:function(){var e=Ee.Ids;this.captionButton_.setAttribute(ge.ARIA_LABEL,this.localization.resolve(e.CAPTIONS)),this.backFromCaptionsButton_.setAttribute(ge.ARIA_LABEL,this.localization.resolve(e.BACK)),this.captionsNameSpan_.textContent=this.localization.resolve(e.CAPTIONS),this.backFromCaptionsSpan_.textContent=this.localization.resolve(e.CAPTIONS),this.captionsOffSpan_.textContent=this.localization.resolve(e.OFF)}},{key:"onTracksChanged_",value:function(){var e=this.player.getTextTracks().length>0;Oe.setDisplay(this.captionButton_,e),this.updateTextLanguages_()}}]),t}();function Cd(e){return(Cd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Id(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ad(e,t,n){return t&&Id(e.prototype,t),n&&Id(e,n),e}function Ld(e,t){return!t||"object"!==Cd(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xd(e){return(xd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rd(e,t){return(Rd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Td.Factory=function(){function e(){yd(this,e)}return _d(e,[{key:"create",value:function(e,t){return new Td(e,t)}}]),e}(),il.registerElement("captions",new Td.Factory);var Nd=F.util.Dom;window.shaka=window.shaka||{};window.shaka;window.goog=window.goog||{};window.goog;var Md=function(e){function t(e,n){var r;return kd(this,t),(r=Ld(this,xd(t).call(this,e,n))).container_=Nd.createHTMLElement("div"),r.container_.classList.add("shaka-volume-bar-container"),r.bar_=document.createElement("input"),r.bar_.classList.add("shaka-volume-bar"),r.bar_.setAttribute("type","range"),r.bar_.setAttribute("step","any"),r.bar_.setAttribute("min","0"),r.bar_.setAttribute("max","1"),r.bar_.setAttribute("value","0"),r.container_.appendChild(r.bar_),r.parent.appendChild(r.container_),r.updateAriaLabel_(),r.eventManager.listen(r.video,"volumechange",function(){r.onVolumeStateChange_()}),r.eventManager.listen(r.bar_,"input",function(){r.onVolumeInput_()}),r.eventManager.listen(r.localization,Ne.LOCALE_UPDATED,function(){r.updateAriaLabel_()}),r.eventManager.listen(r.localization,Ne.LOCALE_CHANGED,function(){r.updateAriaLabel_()}),r.onVolumeStateChange_(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rd(e,t)}(t,qu),Ad(t,[{key:"onVolumeStateChange_",value:function(){this.video.muted?this.bar_.value=0:this.bar_.value=this.video.volume;var e=["to right"];e.push(ge.VOLUME_BAR_VOLUME_LEVEL_COLOR+100*this.bar_.value+"%"),e.push(ge.VOLUME_BAR_BASE_COLOR+100*this.bar_.value+"%"),e.push(ge.VOLUME_BAR_BASE_COLOR+"100%"),this.container_.style.background="linear-gradient("+e.join(",")+")"}},{key:"onVolumeInput_",value:function(){this.video.volume=parseFloat(this.bar_.value),0==this.video.volume?this.video.muted=!0:this.video.muted=!1}},{key:"updateAriaLabel_",value:function(){this.bar_.setAttribute(ge.ARIA_LABEL,this.localization.resolve(Ee.Ids.VOLUME))}}]),t}();function Pd(e){return(Pd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Od(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dd(e,t){return!t||"object"!==Pd(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ud(e){return(Ud=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fd(e,t){return(Fd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Md.Factory=function(){function e(){kd(this,e)}return Ad(e,[{key:"create",value:function(e,t){return new Md(e,t)}}]),e}(),ft.registerElement("volume",new Md.Factory);var Bd=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Dd(this,Ud(t).apply(this,arguments))}var n,a,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fd(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{id:"error-display",className:"hidden"},i.a.createElement("div",{id:"error-display-close-button"},"x"),i.a.createElement("a",{id:"error-display-link",href:"#"})),i.a.createElement("main",{className:"mdl-layout__content",id:"main-div"},i.a.createElement("div",{id:"video-bar",className:"hidden"},i.a.createElement("div",{"data-shaka-player-container":!0,"data-shaka-player-cast-receiver-id":"7B25EC44",className:"video-container"},i.a.createElement("video",{"data-shaka-player":!0,autoPlay:!0,playsInline:!0,id:"video"}))),i.a.createElement("div",{id:"contents"})))}}])&&Od(n.prototype,a),s&&Od(n,s),t}();function Vd(e){return i.a.createElement("div",{id:"main-layout",className:"mdl-layout mdl-js-layout mdl-layout--fixed-header"},i.a.createElement("header",{className:"app-header mdl-layout__header"},i.a.createElement("header",{className:"mdl-layout__header-row",id:"nav-button-container"},i.a.createElement("button",{id:"nav-button-front",className:"mdl-button mdl-js-button mdl-js-ripple-effect should-disable-on-fail",defaultselected:!0},"HOME"),i.a.createElement("button",{id:"nav-button-search",className:"mdl-button mdl-js-button mdl-js-ripple-effect should-disable-on-fail"},"SEARCH"),i.a.createElement("button",{id:"nav-button-custom",className:"mdl-button mdl-js-button mdl-js-ripple-effect should-disable-on-fail"},"CUSTOM CONTENT"),i.a.createElement("div",{className:"mdl-layout-spacer"}),i.a.createElement("div",{id:"version-block"},i.a.createElement("span",{id:"version-string"})))),i.a.createElement("div",{className:"mdl-layout__drawer hamburger-menu"},i.a.createElement("div",{id:"hamburger-menu-title",className:"mdl-layout-title"},"Demo",i.a.createElement("div",{className:"mdl-layout-spacer"}),i.a.createElement("button",{id:"drawer-close-button",className:"mdl-button mdl-js-button mdl-button--icon should-disable-on-fail"},i.a.createElement("i",{className:"material-icons"},"close"))),i.a.createElement("nav",{className:"mdl-navigation",id:"hamburger-menu-contents"})),i.a.createElement(Bd,null))}n.d(t,"default",function(){return Vd})}])});