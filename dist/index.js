!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports.shakaplayer=t(require("react")):e.shakaplayer=t(e.react)}(this,function(__WEBPACK_EXTERNAL_MODULE__0__){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=55)}([function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE__0__},function(e,t,n){"use strict";var i=function(){this.init=function(){var e={};this.on=function(t,n){e[t]||(e[t]=[]),e[t]=e[t].concat(n)},this.off=function(t,n){var i;return!!e[t]&&(i=e[t].indexOf(n),e[t]=e[t].slice(),e[t].splice(i,1),i>-1)},this.trigger=function(t){var n,i,r,a;if(n=e[t])if(2===arguments.length)for(r=n.length,i=0;i<r;++i)n[i].call(this,arguments[1]);else{for(a=[],i=arguments.length,i=1;i<arguments.length;++i)a.push(arguments[i]);for(r=n.length,i=0;i<r;++i)n[i].apply(this,a)}},this.dispose=function(){e={}}}};i.prototype.pipe=function(e){return this.on("data",function(t){e.push(t)}),this.on("done",function(t){e.flush(t)}),e},i.prototype.push=function(e){this.trigger("data",e)},i.prototype.flush=function(e){this.trigger("done",e)},e.exports=i},function(e,t,n){"use strict";e.exports={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21}},function(module,__webpack_exports__,__webpack_require__){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */__webpack_require__.d(__webpack_exports__,"a",function(){return ShakaDemoUtils});var ShakaDemoUtils=function(){function ShakaDemoUtils(){_classCallCheck(this,ShakaDemoUtils)}return _createClass(ShakaDemoUtils,null,[{key:"runThroughHashParams",value:function(e,t){var n=[],i=function(t,i){n.push(i),e(t,i)};i("audiolang","preferredAudioLanguage"),i("textlang","preferredTextLanguage"),i("channels","preferredAudioChannelCount"),n.push("abr.enabled"),n.push("streaming.jumpLargeGaps"),n.push("drm.advanced"),n.push("drm.servers");var r=[],a=[];!function e(t){for(var n in t){r.includes(n)&&!a.includes(n)&&a.push(n),r.push(n);var i=t[n];"number"!=typeof i&&"string"!=typeof i&&"boolean"!=typeof i&&e(i)}}(t);!function t(i,r){for(var s in i){var o=s,l=r+s;if(!n.includes(l)){a.includes(s)&&(o=l);var u=i[s];"number"==typeof u||"string"==typeof u||"boolean"==typeof u?e(o,l):t(u,l+".")}}}(t,"")}},{key:"browserSupportsUncompiledMode",value:function browserSupportsUncompiledMode(){try{return eval("async ()=>{}"),!0}catch(e){return!1}}}]),ShakaDemoUtils}()},function(e,t,n){"use strict";var i={codecs:n(34),mp4:n(36),flv:n(46),mp2t:n(51)};i.mp4.tools=n(19),i.flv.tools=n(52),i.mp2t.tools=n(53),e.exports=i},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){!function(){function t(e){var t=Array.isArray(e)?{label:e[0],value:e[1]}:"object"==typeof e&&"label"in e&&"value"in e?e:{label:e,value:e};this.label=t.label||t.value,this.value=t.value}function n(e,t){return"string"==typeof e?(t||document).querySelector(e):e||null}function i(e,t){return s.call((t||document).querySelectorAll(e))}function r(){i("input.awesomplete").forEach(function(e){new a(e)})}var a=function(e,t){var i=this;Awesomplete.count=(Awesomplete.count||0)+1,this.count=Awesomplete.count,this.isOpened=!1,this.input=n(e),this.input.setAttribute("autocomplete","off"),this.input.setAttribute("aria-owns","awesomplete_list_"+this.count),this.input.setAttribute("role","combobox"),t=t||{},function(e,t,n){for(var i in t){var r=t[i],a=e.input.getAttribute("data-"+i.toLowerCase());"number"==typeof r?e[i]=parseInt(a):!1===r?e[i]=null!==a:r instanceof Function?e[i]=null:e[i]=a,e[i]||0===e[i]||(e[i]=i in n?n[i]:r)}}(this,{minChars:2,maxItems:10,autoFirst:!1,data:a.DATA,filter:a.FILTER_CONTAINS,sort:!1!==t.sort&&a.SORT_BYLENGTH,item:a.ITEM,replace:a.REPLACE},t),this.index=-1,this.container=n.create("div",{className:"awesomplete",around:e}),this.ul=n.create("ul",{hidden:"hidden",role:"listbox",id:"awesomplete_list_"+this.count,inside:this.container}),this.status=n.create("span",{className:"visually-hidden",role:"status","aria-live":"assertive","aria-atomic":!0,inside:this.container,textContent:0!=this.minChars?"Type "+this.minChars+" or more characters for results.":"Begin typing for results."}),this._events={input:{input:this.evaluate.bind(this),blur:this.close.bind(this,{reason:"blur"}),keydown:function(e){var t=e.keyCode;i.opened&&(13===t&&i.selected?(e.preventDefault(),i.select()):27===t?i.close({reason:"esc"}):38!==t&&40!==t||(e.preventDefault(),i[38===t?"previous":"next"]()))}},form:{submit:this.close.bind(this,{reason:"submit"})},ul:{mousedown:function(e){e.preventDefault()},click:function(e){var t=e.target;if(t!==this){for(;t&&!/li/i.test(t.nodeName);)t=t.parentNode;t&&0===e.button&&(e.preventDefault(),i.select(t,e.target))}}}},n.bind(this.input,this._events.input),n.bind(this.input.form,this._events.form),n.bind(this.ul,this._events.ul),this.input.hasAttribute("list")?(this.list="#"+this.input.getAttribute("list"),this.input.removeAttribute("list")):this.list=this.input.getAttribute("data-list")||t.list||[],a.all.push(this)};a.prototype={set list(e){if(Array.isArray(e))this._list=e;else if("string"==typeof e&&e.indexOf(",")>-1)this._list=e.split(/\s*,\s*/);else if((e=n(e))&&e.children){var t=[];s.apply(e.children).forEach(function(e){if(!e.disabled){var n=e.textContent.trim(),i=e.value||n,r=e.label||n;""!==i&&t.push({label:r,value:i})}}),this._list=t}document.activeElement===this.input&&this.evaluate()},get selected(){return this.index>-1},get opened(){return this.isOpened},close:function(e){this.opened&&(this.ul.setAttribute("hidden",""),this.isOpened=!1,this.index=-1,this.status.setAttribute("hidden",""),n.fire(this.input,"awesomplete-close",e||{}))},open:function(){this.ul.removeAttribute("hidden"),this.isOpened=!0,this.status.removeAttribute("hidden"),this.autoFirst&&-1===this.index&&this.goto(0),n.fire(this.input,"awesomplete-open")},destroy:function(){n.unbind(this.input,this._events.input),n.unbind(this.input.form,this._events.form);var e=this.container.parentNode;e.insertBefore(this.input,this.container),e.removeChild(this.container),this.input.removeAttribute("autocomplete"),this.input.removeAttribute("aria-autocomplete");var t=a.all.indexOf(this);-1!==t&&a.all.splice(t,1)},next:function(){var e=this.ul.children.length;this.goto(this.index<e-1?this.index+1:e?0:-1)},previous:function(){var e=this.ul.children.length,t=this.index-1;this.goto(this.selected&&-1!==t?t:e-1)},goto:function(e){var t=this.ul.children;this.selected&&t[this.index].setAttribute("aria-selected","false"),this.index=e,e>-1&&t.length>0&&(t[e].setAttribute("aria-selected","true"),this.status.textContent=t[e].textContent+", list item "+(e+1)+" of "+t.length,this.input.setAttribute("aria-activedescendant",this.ul.id+"_item_"+this.index),this.ul.scrollTop=t[e].offsetTop-this.ul.clientHeight+t[e].clientHeight,n.fire(this.input,"awesomplete-highlight",{text:this.suggestions[this.index]}))},select:function(e,t){if(e?this.index=n.siblingIndex(e):e=this.ul.children[this.index],e){var i=this.suggestions[this.index];n.fire(this.input,"awesomplete-select",{text:i,origin:t||e})&&(this.replace(i),this.close({reason:"select"}),n.fire(this.input,"awesomplete-selectcomplete",{text:i}))}},evaluate:function(){var e=this,n=this.input.value;n.length>=this.minChars&&this._list&&this._list.length>0?(this.index=-1,this.ul.innerHTML="",this.suggestions=this._list.map(function(i){return new t(e.data(i,n))}).filter(function(t){return e.filter(t,n)}),!1!==this.sort&&(this.suggestions=this.suggestions.sort(this.sort)),this.suggestions=this.suggestions.slice(0,this.maxItems),this.suggestions.forEach(function(t,i){e.ul.appendChild(e.item(t,n,i))}),0===this.ul.children.length?(this.status.textContent="No results found",this.close({reason:"nomatches"})):(this.open(),this.status.textContent=this.ul.children.length+" results found")):(this.close({reason:"nomatches"}),this.status.textContent="No results found")}},a.all=[],a.FILTER_CONTAINS=function(e,t){return RegExp(n.regExpEscape(t.trim()),"i").test(e)},a.FILTER_STARTSWITH=function(e,t){return RegExp("^"+n.regExpEscape(t.trim()),"i").test(e)},a.SORT_BYLENGTH=function(e,t){return e.length!==t.length?e.length-t.length:e<t?-1:1},a.ITEM=function(e,t,i){return n.create("li",{innerHTML:""===t.trim()?e:e.replace(RegExp(n.regExpEscape(t.trim()),"gi"),"<mark>$&</mark>"),"aria-selected":"false",id:"awesomplete_list_"+this.count+"_item_"+i})},a.REPLACE=function(e){this.input.value=e.value},a.DATA=function(e){return e},Object.defineProperty(t.prototype=Object.create(String.prototype),"length",{get:function(){return this.label.length}}),t.prototype.toString=t.prototype.valueOf=function(){return""+this.label};var s=Array.prototype.slice;n.create=function(e,t){var i=document.createElement(e);for(var r in t){var a=t[r];if("inside"===r)n(a).appendChild(i);else if("around"===r){var s=n(a);s.parentNode.insertBefore(i,s),i.appendChild(s)}else r in i?i[r]=a:i.setAttribute(r,a)}return i},n.bind=function(e,t){if(e)for(var n in t){var i=t[n];n.split(/\s+/).forEach(function(t){e.addEventListener(t,i)})}},n.unbind=function(e,t){if(e)for(var n in t){var i=t[n];n.split(/\s+/).forEach(function(t){e.removeEventListener(t,i)})}},n.fire=function(e,t,n){var i=document.createEvent("HTMLEvents");for(var r in i.initEvent(t,!0,!0),n)i[r]=n[r];return e.dispatchEvent(i)},n.regExpEscape=function(e){return e.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")},n.siblingIndex=function(e){for(var t=0;e=e.previousElementSibling;t++);return t},"undefined"!=typeof Document&&("loading"!==document.readyState?r():document.addEventListener("DOMContentLoaded",r)),a.$=n,a.$$=i,"undefined"!=typeof self&&(self.Awesomplete=a),e.exports&&(e.exports=a)}()},function(e,t,n){"use strict";var i,r=n(1),a=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(i=function(){var e;i.prototype.init.call(this),this.push=function(t){var n,i,r,s,o,l,u=0,c=0;if("audio"===t.type)for(e?(s=e,(e=new Uint8Array(s.byteLength+t.data.byteLength)).set(s),e.set(t.data,s.byteLength)):e=t.data;u+5<e.length;)if(255===e[u]&&240==(246&e[u+1])){if(i=2*(1&~e[u+1]),n=(3&e[u+3])<<11|e[u+4]<<3|(224&e[u+5])>>5,l=9e4*(o=1024*(1+(3&e[u+6])))/a[(60&e[u+2])>>>2],r=u+n,e.byteLength<r)return;if(this.trigger("data",{pts:t.pts+c*l,dts:t.dts+c*l,sampleCount:o,audioobjecttype:1+(e[u+2]>>>6&3),channelcount:(1&e[u+2])<<2|(192&e[u+3])>>>6,samplerate:a[(60&e[u+2])>>>2],samplingfrequencyindex:(60&e[u+2])>>>2,samplesize:16,data:e.subarray(u+7+i,r)}),e.byteLength===r)return void(e=void 0);c++,e=e.subarray(r)}else u++},this.flush=function(){this.trigger("done")}}).prototype=new r,e.exports=i},function(e,t,n){"use strict";var i,r,a,s=n(1),o=n(35);(r=function(){var e,t,n=0;r.prototype.init.call(this),this.push=function(i){var r;for(t?((r=new Uint8Array(t.byteLength+i.data.byteLength)).set(t),r.set(i.data,t.byteLength),t=r):t=i.data;n<t.byteLength-3;n++)if(1===t[n+2]){e=n+5;break}for(;e<t.byteLength;)switch(t[e]){case 0:if(0!==t[e-1]){e+=2;break}if(0!==t[e-2]){e++;break}n+3!==e-2&&this.trigger("data",t.subarray(n+3,e-2));do{e++}while(1!==t[e]&&e<t.length);n=e-2,e+=3;break;case 1:if(0!==t[e-1]||0!==t[e-2]){e+=3;break}this.trigger("data",t.subarray(n+3,e-2)),n=e-2,e+=3;break;default:e+=3}t=t.subarray(n),e-=n,n=0},this.flush=function(){t&&t.byteLength>3&&this.trigger("data",t.subarray(n+3)),t=null,n=0,this.trigger("done")}}).prototype=new s,a={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(i=function(){var e,t,n,s,l,u,c,d=new r;i.prototype.init.call(this),e=this,this.push=function(e){"video"===e.type&&(t=e.trackId,n=e.pts,s=e.dts,d.push(e))},d.on("data",function(i){var r={trackId:t,pts:n,dts:s,data:i};switch(31&i[0]){case 5:r.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:r.nalUnitType="sei_rbsp",r.escapedRBSP=l(i.subarray(1));break;case 7:r.nalUnitType="seq_parameter_set_rbsp",r.escapedRBSP=l(i.subarray(1)),r.config=u(r.escapedRBSP);break;case 8:r.nalUnitType="pic_parameter_set_rbsp";break;case 9:r.nalUnitType="access_unit_delimiter_rbsp"}e.trigger("data",r)}),d.on("done",function(){e.trigger("done")}),this.flush=function(){d.flush()},c=function(e,t){var n,i=8,r=8;for(n=0;n<e;n++)0!==r&&(r=(i+t.readExpGolomb()+256)%256),i=0===r?i:r},l=function(e){for(var t,n,i=e.byteLength,r=[],a=1;a<i-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return e;t=i-r.length,n=new Uint8Array(t);var s=0;for(a=0;a<t;s++,a++)s===r[0]&&(s++,r.shift()),n[a]=e[s];return n},u=function(e){var t,n,i,r,s,l,u,d,h,f,p,m,v,g=0,y=0,_=0,b=0,w=1;if(n=(t=new o(e)).readUnsignedByte(),r=t.readUnsignedByte(),i=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),a[n]&&(3===(s=t.readUnsignedExpGolomb())&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(p=3!==s?8:12,v=0;v<p;v++)t.readBoolean()&&c(v<6?16:64,t);if(t.skipUnsignedExpGolomb(),0===(l=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();else if(1===l)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),u=t.readUnsignedExpGolomb(),v=0;v<u;v++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),d=t.readUnsignedExpGolomb(),h=t.readUnsignedExpGolomb(),0===(f=t.readBits(1))&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(g=t.readUnsignedExpGolomb(),y=t.readUnsignedExpGolomb(),_=t.readUnsignedExpGolomb(),b=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(t.readUnsignedByte()){case 1:m=[1,1];break;case 2:m=[12,11];break;case 3:m=[10,11];break;case 4:m=[16,11];break;case 5:m=[40,33];break;case 6:m=[24,11];break;case 7:m=[20,11];break;case 8:m=[32,11];break;case 9:m=[80,33];break;case 10:m=[18,11];break;case 11:m=[15,11];break;case 12:m=[64,33];break;case 13:m=[160,99];break;case 14:m=[4,3];break;case 15:m=[3,2];break;case 16:m=[2,1];break;case 255:m=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()]}m&&(w=m[0]/m[1])}return{profileIdc:n,levelIdc:i,profileCompatibility:r,width:Math.ceil((16*(d+1)-2*g-2*y)*w),height:(2-f)*(h+1)*16-2*_-2*b}}}).prototype=new s,e.exports={H264Stream:i,NalByteStream:r}},function(e,t,n){"use strict";var i,r,a,s,o,l=n(37).toUnsigned;i=function(e,t){var n,a,s,o,u,c=[];if(!t.length)return null;for(n=0;n<e.byteLength;)a=l(e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3]),s=r(e.subarray(n+4,n+8)),o=a>1?n+a:e.byteLength,s===t[0]&&(1===t.length?c.push(e.subarray(n+8,o)):(u=i(e.subarray(n+8,o),t.slice(1))).length&&(c=c.concat(u))),n=o;return c},r=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),t+=String.fromCharCode(e[2]),t+=String.fromCharCode(e[3])},a=function(e){return i(e,["moov","trak"]).reduce(function(e,t){var n,r,a,s,o;return(n=i(t,["tkhd"])[0])?(r=n[0],s=l(n[a=0===r?12:20]<<24|n[a+1]<<16|n[a+2]<<8|n[a+3]),(o=i(t,["mdia","mdhd"])[0])?(a=0===(r=o[0])?12:20,e[s]=l(o[a]<<24|o[a+1]<<16|o[a+2]<<8|o[a+3]),e):null):null},{})},s=function(e,t){var n,r,a;return n=i(t,["moof","traf"]),r=[].concat.apply([],n.map(function(t){return i(t,["tfhd"]).map(function(n){var r,a;return r=l(n[4]<<24|n[5]<<16|n[6]<<8|n[7]),a=e[r]||9e4,(i(t,["tfdt"]).map(function(e){var t,n;return t=e[0],n=l(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),1===t&&(n*=Math.pow(2,32),n+=l(e[8]<<24|e[9]<<16|e[10]<<8|e[11])),n})[0]||1/0)/a})})),a=Math.min.apply(null,r),isFinite(a)?a:0},o=function(e){var t=i(e,["moov","trak"]),n=[];return t.forEach(function(e){var t=i(e,["mdia","hdlr"]),a=i(e,["tkhd"]);t.forEach(function(e,t){var i,s,o=r(e.subarray(8,12)),l=a[t];"vide"===o&&(s=0===(i=new DataView(l.buffer,l.byteOffset,l.byteLength)).getUint8(0)?i.getUint32(12):i.getUint32(20),n.push(s))})}),n},e.exports={findBox:i,parseType:r,timescale:a,startTime:s,videoTrackIds:o}},function(e,t,n){"use strict";var i,r,a,s,o=n(1),l=n(15),u=n(38),c=n(39),d=n(42),h=n(11),f=n(7),p=n(8).H264Stream,m=n(44),v=n(12).isLikelyAacData,g=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],y=["width","height","profileIdc","levelIdc","profileCompatibility"],_=function(e,t){var n;if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},b=function(e,t,n,i,r,a){return{start:{dts:e,pts:e+(n-t)},end:{dts:e+(i-t),pts:e+(r-n)},prependedContentDuration:a,baseMediaDecodeTime:e}};(r=function(e,t){var n=[],i=0,a=0,s=0,o=1/0;t=t||{},r.prototype.init.call(this),this.push=function(t){d.collectDtsInfo(e,t),e&&g.forEach(function(n){e[n]=t[n]}),n.push(t)},this.setEarliestDts=function(t){a=t-e.timelineStartInfo.baseMediaDecodeTime},this.setVideoBaseMediaDecodeTime=function(e){o=e},this.setAudioAppendStart=function(e){s=e},this.flush=function(){var r,u,h,f;0!==n.length?(r=c.trimAdtsFramesByEarliestDts(n,e,a),e.baseMediaDecodeTime=d.calculateTrackBaseMediaDecodeTime(e,t.keepOriginalTimestamps),c.prefixWithSilence(e,r,s,o),e.samples=c.generateSampleTable(r),h=l.mdat(c.concatenateFrameData(r)),n=[],u=l.moof(i,[e]),f=new Uint8Array(u.byteLength+h.byteLength),i++,f.set(u),f.set(h,u.byteLength),d.clearDtsInfo(e),this.trigger("data",{track:e,boxes:f}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")}}).prototype=new o,(i=function(e,t){var n,r,a=0,s=[],o=[];t=t||{},i.prototype.init.call(this),delete e.minPTS,this.gopCache_=[],this.push=function(t){d.collectDtsInfo(e,t),"seq_parameter_set_rbsp"!==t.nalUnitType||n||(n=t.config,e.sps=[t.data],y.forEach(function(t){e[t]=n[t]},this)),"pic_parameter_set_rbsp"!==t.nalUnitType||r||(r=t.data,e.pps=[t.data]),s.push(t)},this.flush=function(){for(var n,i,r,c,h,f,p,m,v=0;s.length&&"access_unit_delimiter_rbsp"!==s[0].nalUnitType;)s.shift();if(0===s.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(n=u.groupNalsIntoFrames(s),(r=u.groupFramesIntoGops(n))[0][0].keyFrame||((i=this.getGopForFusion_(s[0],e))?(v=i.duration,r.unshift(i),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.pts=i.pts,r.dts=i.dts,r.duration+=i.duration):r=u.extendFirstKeyFrame(r)),o.length){var g;if(!(g=t.alignGopsAtEnd?this.alignGopsAtEnd_(r):this.alignGopsAtStart_(r)))return this.gopCache_.unshift({gop:r.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),s=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");d.clearDtsInfo(e),r=g}d.collectDtsInfo(e,r),e.samples=u.generateSampleTable(r),h=l.mdat(u.concatenateNalData(r)),e.baseMediaDecodeTime=d.calculateTrackBaseMediaDecodeTime(e,t.keepOriginalTimestamps),this.trigger("processedGopsInfo",r.map(function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}})),p=r[0],m=r[r.length-1],this.trigger("segmentTimingInfo",b(e.baseMediaDecodeTime,p.dts,p.pts,m.dts+m.duration,m.pts+m.duration,v)),this.gopCache_.unshift({gop:r.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),s=[],this.trigger("baseMediaDecodeTime",e.baseMediaDecodeTime),this.trigger("timelineStartInfo",e.timelineStartInfo),c=l.moof(a,[e]),f=new Uint8Array(c.byteLength+h.byteLength),a++,f.set(c),f.set(h,c.byteLength),this.trigger("data",{track:e,boxes:f}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.resetStream_=function(){d.clearDtsInfo(e),n=void 0,r=void 0},this.getGopForFusion_=function(t){var n,i,r,a,s,o=1/0;for(s=0;s<this.gopCache_.length;s++)r=(a=this.gopCache_[s]).gop,e.pps&&_(e.pps[0],a.pps[0])&&e.sps&&_(e.sps[0],a.sps[0])&&(r.dts<e.timelineStartInfo.dts||(n=t.dts-r.dts-r.duration)>=-1e4&&n<=45e3&&(!i||o>n)&&(i=a,o=n));return i?i.gop:null},this.alignGopsAtStart_=function(e){var t,n,i,r,a,s,l,u;for(a=e.byteLength,s=e.nalCount,l=e.duration,t=n=0;t<o.length&&n<e.length&&(i=o[t],r=e[n],i.pts!==r.pts);)r.pts>i.pts?t++:(n++,a-=r.byteLength,s-=r.nalCount,l-=r.duration);return 0===n?e:n===e.length?null:((u=e.slice(n)).byteLength=a,u.duration=l,u.nalCount=s,u.pts=u[0].pts,u.dts=u[0].dts,u)},this.alignGopsAtEnd_=function(e){var t,n,i,r,a,s,l;for(t=o.length-1,n=e.length-1,a=null,s=!1;t>=0&&n>=0;){if(i=o[t],r=e[n],i.pts===r.pts){s=!0;break}i.pts>r.pts?t--:(t===o.length-1&&(a=n),n--)}if(!s&&null===a)return null;if(0===(l=s?n:a))return e;var u=e.slice(l),c=u.reduce(function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e},{byteLength:0,duration:0,nalCount:0});return u.byteLength=c.byteLength,u.duration=c.duration,u.nalCount=c.nalCount,u.pts=u[0].pts,u.dts=u[0].dts,u},this.alignGopsWith=function(e){o=e}}).prototype=new o,(s=function(e,t){this.numberOfTracks=0,this.metadataStream=t,void 0!==(e=e||{}).remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,"boolean"==typeof e.keepOriginalTimestamps&&(this.keepOriginalTimestamps=e.keepOriginalTimestamps),this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,s.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBoxes.push(e.boxes),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track),void("audio"===e.track.type&&(this.audioTrack=e.track)))}}).prototype=new o,s.prototype.flush=function(e){var t,n,i,r,a=0,s={captions:[],captionStreams:{},metadata:[],info:{}},o=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}for(this.videoTrack?(o=this.videoTrack.timelineStartInfo.pts,y.forEach(function(e){s.info[e]=this.videoTrack[e]},this)):this.audioTrack&&(o=this.audioTrack.timelineStartInfo.pts,g.forEach(function(e){s.info[e]=this.audioTrack[e]},this)),1===this.pendingTracks.length?s.type=this.pendingTracks[0].type:s.type="combined",this.emittedTracks+=this.pendingTracks.length,i=l.initSegment(this.pendingTracks),s.initSegment=new Uint8Array(i.byteLength),s.initSegment.set(i),s.data=new Uint8Array(this.pendingBytes),r=0;r<this.pendingBoxes.length;r++)s.data.set(this.pendingBoxes[r],a),a+=this.pendingBoxes[r].byteLength;for(r=0;r<this.pendingCaptions.length;r++)(t=this.pendingCaptions[r]).startTime=t.startPts,this.keepOriginalTimestamps||(t.startTime-=o),t.startTime/=9e4,t.endTime=t.endPts,this.keepOriginalTimestamps||(t.endTime-=o),t.endTime/=9e4,s.captionStreams[t.stream]=!0,s.captions.push(t);for(r=0;r<this.pendingMetadata.length;r++)(n=this.pendingMetadata[r]).cueTime=n.pts,this.keepOriginalTimestamps||(n.cueTime-=o),n.cueTime/=9e4,s.metadata.push(n);s.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",s),this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},(a=function(e){var t,n,o=this,l=!0;a.prototype.init.call(this),e=e||{},this.baseMediaDecodeTime=e.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var t={};this.transmuxPipeline_=t,t.type="aac",t.metadataStream=new h.MetadataStream,t.aacStream=new m,t.audioTimestampRolloverStream=new h.TimestampRolloverStream("audio"),t.timedMetadataTimestampRolloverStream=new h.TimestampRolloverStream("timed-metadata"),t.adtsStream=new f,t.coalesceStream=new s(e,t.metadataStream),t.headOfPipeline=t.aacStream,t.aacStream.pipe(t.audioTimestampRolloverStream).pipe(t.adtsStream),t.aacStream.pipe(t.timedMetadataTimestampRolloverStream).pipe(t.metadataStream).pipe(t.coalesceStream),t.metadataStream.on("timestamp",function(e){t.aacStream.setTimestamp(e.timeStamp)}),t.aacStream.on("data",function(i){"timed-metadata"!==i.type||t.audioSegmentStream||(n=n||{timelineStartInfo:{baseMediaDecodeTime:o.baseMediaDecodeTime},codec:"adts",type:"audio"},t.coalesceStream.numberOfTracks++,t.audioSegmentStream=new r(n,e),t.adtsStream.pipe(t.audioSegmentStream).pipe(t.coalesceStream))}),t.coalesceStream.on("data",this.trigger.bind(this,"data")),t.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var a={};this.transmuxPipeline_=a,a.type="ts",a.metadataStream=new h.MetadataStream,a.packetStream=new h.TransportPacketStream,a.parseStream=new h.TransportParseStream,a.elementaryStream=new h.ElementaryStream,a.videoTimestampRolloverStream=new h.TimestampRolloverStream("video"),a.audioTimestampRolloverStream=new h.TimestampRolloverStream("audio"),a.timedMetadataTimestampRolloverStream=new h.TimestampRolloverStream("timed-metadata"),a.adtsStream=new f,a.h264Stream=new p,a.captionStream=new h.CaptionStream,a.coalesceStream=new s(e,a.metadataStream),a.headOfPipeline=a.packetStream,a.packetStream.pipe(a.parseStream).pipe(a.elementaryStream),a.elementaryStream.pipe(a.videoTimestampRolloverStream).pipe(a.h264Stream),a.elementaryStream.pipe(a.audioTimestampRolloverStream).pipe(a.adtsStream),a.elementaryStream.pipe(a.timedMetadataTimestampRolloverStream).pipe(a.metadataStream).pipe(a.coalesceStream),a.h264Stream.pipe(a.captionStream).pipe(a.coalesceStream),a.elementaryStream.on("data",function(s){var l;if("metadata"===s.type){for(l=s.tracks.length;l--;)t||"video"!==s.tracks[l].type?n||"audio"!==s.tracks[l].type||((n=s.tracks[l]).timelineStartInfo.baseMediaDecodeTime=o.baseMediaDecodeTime):(t=s.tracks[l]).timelineStartInfo.baseMediaDecodeTime=o.baseMediaDecodeTime;t&&!a.videoSegmentStream&&(a.coalesceStream.numberOfTracks++,a.videoSegmentStream=new i(t,e),a.videoSegmentStream.on("timelineStartInfo",function(e){n&&(n.timelineStartInfo=e,a.audioSegmentStream.setEarliestDts(e.dts))}),a.videoSegmentStream.on("processedGopsInfo",o.trigger.bind(o,"gopInfo")),a.videoSegmentStream.on("segmentTimingInfo",o.trigger.bind(o,"videoSegmentTimingInfo")),a.videoSegmentStream.on("baseMediaDecodeTime",function(e){n&&a.audioSegmentStream.setVideoBaseMediaDecodeTime(e)}),a.h264Stream.pipe(a.videoSegmentStream).pipe(a.coalesceStream)),n&&!a.audioSegmentStream&&(a.coalesceStream.numberOfTracks++,a.audioSegmentStream=new r(n,e),a.adtsStream.pipe(a.audioSegmentStream).pipe(a.coalesceStream))}}),a.coalesceStream.on("data",this.trigger.bind(this,"data")),a.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(i){var r=this.transmuxPipeline_;e.keepOriginalTimestamps||(this.baseMediaDecodeTime=i),n&&(n.timelineStartInfo.dts=void 0,n.timelineStartInfo.pts=void 0,d.clearDtsInfo(n),e.keepOriginalTimestamps||(n.timelineStartInfo.baseMediaDecodeTime=i),r.audioTimestampRolloverStream&&r.audioTimestampRolloverStream.discontinuity()),t&&(r.videoSegmentStream&&(r.videoSegmentStream.gopCache_=[],r.videoTimestampRolloverStream.discontinuity()),t.timelineStartInfo.dts=void 0,t.timelineStartInfo.pts=void 0,d.clearDtsInfo(t),r.captionStream.reset(),e.keepOriginalTimestamps||(t.timelineStartInfo.baseMediaDecodeTime=i)),r.timedMetadataTimestampRolloverStream&&r.timedMetadataTimestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){n&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.alignGopsWith=function(e){t&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.push=function(e){if(l){var t=v(e);t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),l=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){l=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new o,e.exports={Transmuxer:a,VideoSegmentStream:i,AudioSegmentStream:r,AUDIO_PROPERTIES:g,VIDEO_PROPERTIES:y,generateVideoSegmentTimingInfo:b}},function(e,t,n){"use strict";var i,r,a,s=n(1),o=n(16),l=n(2),u=n(18).TimestampRolloverStream,c=n(2);(i=function(){var e=new Uint8Array(188),t=0;i.prototype.init.call(this),this.push=function(n){var i,r=0,a=188;for(t?((i=new Uint8Array(n.byteLength+t)).set(e.subarray(0,t)),i.set(n,t),t=0):i=n;a<i.byteLength;)71!==i[r]||71!==i[a]?(r++,a++):(this.trigger("data",i.subarray(r,a)),r+=188,a+=188);r<i.byteLength&&(e.set(i.subarray(r),0),t=i.byteLength-r)},this.flush=function(){188===t&&71===e[0]&&(this.trigger("data",e),t=0),this.trigger("done")}}).prototype=new s,(r=function(){var e,t,n,i;r.prototype.init.call(this),i=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,e=function(e,i){var r=0;i.payloadUnitStartIndicator&&(r+=e[r]+1),"pat"===i.type?t(e.subarray(r),i):n(e.subarray(r),i)},t=function(e,t){t.section_number=e[7],t.last_section_number=e[8],i.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=i.pmtPid},n=function(e,t){var n,r;if(1&e[5]){for(i.programMapTable={video:null,audio:null,"timed-metadata":{}},n=3+((15&e[1])<<8|e[2])-4,r=12+((15&e[10])<<8|e[11]);r<n;){var a=e[r],s=(31&e[r+1])<<8|e[r+2];a===l.H264_STREAM_TYPE&&null===i.programMapTable.video?i.programMapTable.video=s:a===l.ADTS_STREAM_TYPE&&null===i.programMapTable.audio?i.programMapTable.audio=s:a===l.METADATA_STREAM_TYPE&&(i.programMapTable["timed-metadata"][s]=a),r+=5+((15&e[r+3])<<8|e[r+4])}t.programMapTable=i.programMapTable}},this.push=function(t){var n={},i=4;if(n.payloadUnitStartIndicator=!!(64&t[1]),n.pid=31&t[1],n.pid<<=8,n.pid|=t[2],(48&t[3])>>>4>1&&(i+=t[i]+1),0===n.pid)n.type="pat",e(t.subarray(i),n),this.trigger("data",n);else if(n.pid===this.pmtPid)for(n.type="pmt",e(t.subarray(i),n),this.trigger("data",n);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([t,i,n]):this.processPes_(t,i,n)},this.processPes_=function(e,t,n){n.pid===this.programMapTable.video?n.streamType=l.H264_STREAM_TYPE:n.pid===this.programMapTable.audio?n.streamType=l.ADTS_STREAM_TYPE:n.streamType=this.programMapTable["timed-metadata"][n.pid],n.type="pes",n.data=e.subarray(t),this.trigger("data",n)}}).prototype=new s,r.STREAM_TYPES={h264:27,adts:15},(a=function(){var e=this,t={data:[],size:0},n={data:[],size:0},i={data:[],size:0},r=function(t,n,i){var r,a,s=new Uint8Array(t.size),o={type:n},l=0,u=0;if(t.data.length&&!(t.size<9)){for(o.trackId=t.data[0].pid,l=0;l<t.data.length;l++)a=t.data[l],s.set(a.data,u),u+=a.data.byteLength;var c,d,h;c=s,(d=o).packetLength=6+(c[4]<<8|c[5]),d.dataAlignmentIndicator=0!=(4&c[6]),192&(h=c[7])&&(d.pts=(14&c[9])<<27|(255&c[10])<<20|(254&c[11])<<12|(255&c[12])<<5|(254&c[13])>>>3,d.pts*=4,d.pts+=(6&c[13])>>>1,d.dts=d.pts,64&h&&(d.dts=(14&c[14])<<27|(255&c[15])<<20|(254&c[16])<<12|(255&c[17])<<5|(254&c[18])>>>3,d.dts*=4,d.dts+=(6&c[18])>>>1)),d.data=c.subarray(9+c[8]),r="video"===n||o.packetLength<=t.size,(i||r)&&(t.size=0,t.data.length=0),r&&e.trigger("data",o)}};a.prototype.init.call(this),this.push=function(a){({pat:function(){},pes:function(){var e,s;switch(a.streamType){case l.H264_STREAM_TYPE:case c.H264_STREAM_TYPE:e=t,s="video";break;case l.ADTS_STREAM_TYPE:e=n,s="audio";break;case l.METADATA_STREAM_TYPE:e=i,s="timed-metadata";break;default:return}a.payloadUnitStartIndicator&&r(e,s,!0),e.data.push(a),e.size+=a.data.byteLength},pmt:function(){var t={type:"metadata",tracks:[]},n=a.programMapTable;null!==n.video&&t.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+n.video,codec:"avc",type:"video"}),null!==n.audio&&t.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+n.audio,codec:"adts",type:"audio"}),e.trigger("data",t)}})[a.type]()},this.flush=function(){r(t,"video"),r(n,"audio"),r(i,"timed-metadata"),this.trigger("done")}}).prototype=new s;var d={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:i,TransportParseStream:r,ElementaryStream:a,TimestampRolloverStream:u,CaptionStream:o.CaptionStream,Cea608Stream:o.Cea608Stream,MetadataStream:n(43)};for(var h in l)l.hasOwnProperty(h)&&(d[h]=l[h]);e.exports=d},function(e,t,n){"use strict";var i=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],r=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]};e.exports={isLikelyAacData:function(e){return e[0]==="I".charCodeAt(0)&&e[1]==="D".charCodeAt(0)&&e[2]==="3".charCodeAt(0)},parseId3TagSize:function(e,t){var n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?n+20:n+10},parseAdtsSize:function(e,t){var n=(224&e[t+5])>>5,i=e[t+4]<<3;return 6144&e[t+3]|i|n},parseType:function(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[t]&&240==(240&e[t+1])?"audio":null},parseSampleRate:function(e){for(var t=0;t+5<e.length;){if(255===e[t]&&240==(246&e[t+1]))return i[(60&e[t+2])>>>2];t++}return null},parseAacTimestamp:function(e){var t,n,i;t=10,64&e[5]&&(t+=4,t+=r(e.subarray(10,14)));do{if((n=r(e.subarray(t+4,t+8)))<1)return null;if("PRIV"===String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3])){i=e.subarray(t+10,t+n+10);for(var a=0;a<i.byteLength;a++)if(0===i[a]){if("com.apple.streaming.transportStreamTimestamp"===unescape(function(e,t,n){var i,r="";for(i=t;i<n;i++)r+="%"+("00"+e[i].toString(16)).slice(-2);return r}(i,0,a))){var s=i.subarray(a+1),o=(1&s[3])<<30|s[4]<<22|s[5]<<14|s[6]<<6|s[7]>>>2;return o*=4,o+=3&s[7]}break}}t+=10,t+=n}while(t<e.byteLength);return null}}},function(e,t,n){"use strict";var i;(i=function(e,t){var n,r=0,a=16384,s=function(e,t){var n,i=e.position+t;i<e.bytes.byteLength||((n=new Uint8Array(2*i)).set(e.bytes.subarray(0,e.position),0),e.bytes=n,e.view=new DataView(e.bytes.buffer))},o=i.widthBytes||new Uint8Array("width".length),l=i.heightBytes||new Uint8Array("height".length),u=i.videocodecidBytes||new Uint8Array("videocodecid".length);if(!i.widthBytes){for(n=0;n<"width".length;n++)o[n]="width".charCodeAt(n);for(n=0;n<"height".length;n++)l[n]="height".charCodeAt(n);for(n=0;n<"videocodecid".length;n++)u[n]="videocodecid".charCodeAt(n);i.widthBytes=o,i.heightBytes=l,i.videocodecidBytes=u}switch(this.keyFrame=!1,e){case i.VIDEO_TAG:this.length=16,a*=6;break;case i.AUDIO_TAG:this.length=13,this.keyFrame=!0;break;case i.METADATA_TAG:this.length=29,this.keyFrame=!0;break;default:throw new Error("Unknown FLV tag type")}this.bytes=new Uint8Array(a),this.view=new DataView(this.bytes.buffer),this.bytes[0]=e,this.position=this.length,this.keyFrame=t,this.pts=0,this.dts=0,this.writeBytes=function(e,t,n){var i,r=t||0;i=r+(n=n||e.byteLength),s(this,n),this.bytes.set(e.subarray(r,i),this.position),this.position+=n,this.length=Math.max(this.length,this.position)},this.writeByte=function(e){s(this,1),this.bytes[this.position]=e,this.position++,this.length=Math.max(this.length,this.position)},this.writeShort=function(e){s(this,2),this.view.setUint16(this.position,e),this.position+=2,this.length=Math.max(this.length,this.position)},this.negIndex=function(e){return this.bytes[this.length-e]},this.nalUnitSize=function(){return 0===r?0:this.length-(r+4)},this.startNalUnit=function(){if(r>0)throw new Error("Attempted to create new NAL wihout closing the old one");r=this.length,this.length+=4,this.position=this.length},this.endNalUnit=function(e){var t,n;this.length===r+4?this.length-=4:r>0&&(t=r+4,n=this.length-t,this.position=r,this.view.setUint32(this.position,n),this.position=this.length,e&&e.push(this.bytes.subarray(t,t+n))),r=0},this.writeMetaDataDouble=function(e,t){var n;if(s(this,2+e.length+9),this.view.setUint16(this.position,e.length),this.position+=2,"width"===e)this.bytes.set(o,this.position),this.position+=5;else if("height"===e)this.bytes.set(l,this.position),this.position+=6;else if("videocodecid"===e)this.bytes.set(u,this.position),this.position+=12;else for(n=0;n<e.length;n++)this.bytes[this.position]=e.charCodeAt(n),this.position++;this.position++,this.view.setFloat64(this.position,t),this.position+=8,this.length=Math.max(this.length,this.position),++r},this.writeMetaDataBoolean=function(e,t){var n;for(s(this,2),this.view.setUint16(this.position,e.length),this.position+=2,n=0;n<e.length;n++)s(this,1),this.bytes[this.position]=e.charCodeAt(n),this.position++;s(this,2),this.view.setUint8(this.position,1),this.position++,this.view.setUint8(this.position,t?1:0),this.position++,this.length=Math.max(this.length,this.position),++r},this.finalize=function(){var e,n;switch(this.bytes[0]){case i.VIDEO_TAG:this.bytes[11]=7|(this.keyFrame||t?16:32),this.bytes[12]=t?0:1,e=this.pts-this.dts,this.bytes[13]=(16711680&e)>>>16,this.bytes[14]=(65280&e)>>>8,this.bytes[15]=(255&e)>>>0;break;case i.AUDIO_TAG:this.bytes[11]=175,this.bytes[12]=t?0:1;break;case i.METADATA_TAG:this.position=11,this.view.setUint8(this.position,2),this.position++,this.view.setUint16(this.position,10),this.position+=2,this.bytes.set([111,110,77,101,116,97,68,97,116,97],this.position),this.position+=10,this.bytes[this.position]=8,this.position++,this.view.setUint32(this.position,r),this.position=this.length,this.bytes.set([0,0,9],this.position),this.position+=3,this.length=this.position}return n=this.length-11,this.bytes[1]=(16711680&n)>>>16,this.bytes[2]=(65280&n)>>>8,this.bytes[3]=(255&n)>>>0,this.bytes[4]=(16711680&this.dts)>>>16,this.bytes[5]=(65280&this.dts)>>>8,this.bytes[6]=(255&this.dts)>>>0,this.bytes[7]=(4278190080&this.dts)>>>24,this.bytes[8]=0,this.bytes[9]=0,this.bytes[10]=0,s(this,4),this.view.setUint32(this.length,this.length),this.length+=4,this.position+=4,this.bytes=this.bytes.subarray(0,this.length),this.frameTime=i.frameTime(this.bytes),this}}).AUDIO_TAG=8,i.VIDEO_TAG=9,i.METADATA_TAG=18,i.isAudioFrame=function(e){return i.AUDIO_TAG===e[0]},i.isVideoFrame=function(e){return i.VIDEO_TAG===e[0]},i.isMetaData=function(e){return i.METADATA_TAG===e[0]},i.isKeyFrame=function(e){return i.isVideoFrame(e)?23===e[11]:!!i.isAudioFrame(e)||!!i.isMetaData(e)},i.frameTime=function(e){var t=e[4]<<16;return t|=e[5]<<8,t|=e[6]<<0,t|=e[7]<<24},e.exports=i},function(e,t,n){"use strict";n.r(t),function(e){for(
/**!
 * @fileOverview Kickass library to create and place poppers near their reference elements.
 * @version 1.15.0
 * @license
 * Copyright (c) 2016 Federico Zivolo and contributors
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
var n="undefined"!=typeof window&&"undefined"!=typeof document,i=["Edge","Trident","Firefox"],r=0,a=0;a<i.length;a+=1)if(n&&navigator.userAgent.indexOf(i[a])>=0){r=1;break}var s=n&&window.Promise?function(e){var t=!1;return function(){t||(t=!0,window.Promise.resolve().then(function(){t=!1,e()}))}}:function(e){var t=!1;return function(){t||(t=!0,setTimeout(function(){t=!1,e()},r))}};function o(e){return e&&"[object Function]"==={}.toString.call(e)}function l(e,t){if(1!==e.nodeType)return[];var n=e.ownerDocument.defaultView.getComputedStyle(e,null);return t?n[t]:n}function u(e){return"HTML"===e.nodeName?e:e.parentNode||e.host}function c(e){if(!e)return document.body;switch(e.nodeName){case"HTML":case"BODY":return e.ownerDocument.body;case"#document":return e.body}var t=l(e),n=t.overflow,i=t.overflowX,r=t.overflowY;return/(auto|scroll|overlay)/.test(n+r+i)?e:c(u(e))}var d=n&&!(!window.MSInputMethodContext||!document.documentMode),h=n&&/MSIE 10/.test(navigator.userAgent);function f(e){return 11===e?d:10===e?h:d||h}function p(e){if(!e)return document.documentElement;for(var t=f(10)?document.body:null,n=e.offsetParent||null;n===t&&e.nextElementSibling;)n=(e=e.nextElementSibling).offsetParent;var i=n&&n.nodeName;return i&&"BODY"!==i&&"HTML"!==i?-1!==["TH","TD","TABLE"].indexOf(n.nodeName)&&"static"===l(n,"position")?p(n):n:e?e.ownerDocument.documentElement:document.documentElement}function m(e){return null!==e.parentNode?m(e.parentNode):e}function v(e,t){if(!(e&&e.nodeType&&t&&t.nodeType))return document.documentElement;var n=e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING,i=n?e:t,r=n?t:e,a=document.createRange();a.setStart(i,0),a.setEnd(r,0);var s,o,l=a.commonAncestorContainer;if(e!==l&&t!==l||i.contains(r))return"BODY"===(o=(s=l).nodeName)||"HTML"!==o&&p(s.firstElementChild)!==s?p(l):l;var u=m(e);return u.host?v(u.host,t):v(e,m(t).host)}function g(e){var t="top"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top")?"scrollTop":"scrollLeft",n=e.nodeName;if("BODY"===n||"HTML"===n){var i=e.ownerDocument.documentElement;return(e.ownerDocument.scrollingElement||i)[t]}return e[t]}function y(e,t){var n="x"===t?"Left":"Top",i="Left"===n?"Right":"Bottom";return parseFloat(e["border"+n+"Width"],10)+parseFloat(e["border"+i+"Width"],10)}function _(e,t,n,i){return Math.max(t["offset"+e],t["scroll"+e],n["client"+e],n["offset"+e],n["scroll"+e],f(10)?parseInt(n["offset"+e])+parseInt(i["margin"+("Height"===e?"Top":"Left")])+parseInt(i["margin"+("Height"===e?"Bottom":"Right")]):0)}function b(e){var t=e.body,n=e.documentElement,i=f(10)&&getComputedStyle(n);return{height:_("Height",t,n,i),width:_("Width",t,n,i)}}var w=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},E=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),S=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};function k(e){return T({},e,{right:e.left+e.width,bottom:e.top+e.height})}function C(e){var t={};try{if(f(10)){t=e.getBoundingClientRect();var n=g(e,"top"),i=g(e,"left");t.top+=n,t.left+=i,t.bottom+=n,t.right+=i}else t=e.getBoundingClientRect()}catch(e){}var r={left:t.left,top:t.top,width:t.right-t.left,height:t.bottom-t.top},a="HTML"===e.nodeName?b(e.ownerDocument):{},s=a.width||e.clientWidth||r.right-r.left,o=a.height||e.clientHeight||r.bottom-r.top,u=e.offsetWidth-s,c=e.offsetHeight-o;if(u||c){var d=l(e);u-=y(d,"x"),c-=y(d,"y"),r.width-=u,r.height-=c}return k(r)}function I(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=f(10),r="HTML"===t.nodeName,a=C(e),s=C(t),o=c(e),u=l(t),d=parseFloat(u.borderTopWidth,10),h=parseFloat(u.borderLeftWidth,10);n&&r&&(s.top=Math.max(s.top,0),s.left=Math.max(s.left,0));var p=k({top:a.top-s.top-d,left:a.left-s.left-h,width:a.width,height:a.height});if(p.marginTop=0,p.marginLeft=0,!i&&r){var m=parseFloat(u.marginTop,10),v=parseFloat(u.marginLeft,10);p.top-=d-m,p.bottom-=d-m,p.left-=h-v,p.right-=h-v,p.marginTop=m,p.marginLeft=v}return(i&&!n?t.contains(o):t===o&&"BODY"!==o.nodeName)&&(p=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=g(t,"top"),r=g(t,"left"),a=n?-1:1;return e.top+=i*a,e.bottom+=i*a,e.left+=r*a,e.right+=r*a,e}(p,t)),p}function A(e){if(!e||!e.parentElement||f())return document.documentElement;for(var t=e.parentElement;t&&"none"===l(t,"transform");)t=t.parentElement;return t||document.documentElement}function x(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a={top:0,left:0},s=r?A(e):v(e,t);if("viewport"===i)a=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.ownerDocument.documentElement,i=I(e,n),r=Math.max(n.clientWidth,window.innerWidth||0),a=Math.max(n.clientHeight,window.innerHeight||0),s=t?0:g(n),o=t?0:g(n,"left");return k({top:s-i.top+i.marginTop,left:o-i.left+i.marginLeft,width:r,height:a})}(s,r);else{var o=void 0;"scrollParent"===i?"BODY"===(o=c(u(t))).nodeName&&(o=e.ownerDocument.documentElement):o="window"===i?e.ownerDocument.documentElement:i;var d=I(o,s,r);if("HTML"!==o.nodeName||function e(t){var n=t.nodeName;if("BODY"===n||"HTML"===n)return!1;if("fixed"===l(t,"position"))return!0;var i=u(t);return!!i&&e(i)}(s))a=d;else{var h=b(e.ownerDocument),f=h.height,p=h.width;a.top+=d.top-d.marginTop,a.bottom=f+d.top,a.left+=d.left-d.marginLeft,a.right=p+d.left}}var m="number"==typeof(n=n||0);return a.left+=m?n:n.left||0,a.top+=m?n:n.top||0,a.right-=m?n:n.right||0,a.bottom-=m?n:n.bottom||0,a}function L(e,t,n,i,r){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(-1===e.indexOf("auto"))return e;var s=x(n,i,a,r),o={top:{width:s.width,height:t.top-s.top},right:{width:s.right-t.right,height:s.height},bottom:{width:s.width,height:s.bottom-t.bottom},left:{width:t.left-s.left,height:s.height}},l=Object.keys(o).map(function(e){return T({key:e},o[e],{area:(t=o[e],t.width*t.height)});var t}).sort(function(e,t){return t.area-e.area}),u=l.filter(function(e){var t=e.width,i=e.height;return t>=n.clientWidth&&i>=n.clientHeight}),c=u.length>0?u[0].key:l[0].key,d=e.split("-")[1];return c+(d?"-"+d:"")}function R(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return I(n,i?A(t):v(t,n),i)}function P(e){var t=e.ownerDocument.defaultView.getComputedStyle(e),n=parseFloat(t.marginTop||0)+parseFloat(t.marginBottom||0),i=parseFloat(t.marginLeft||0)+parseFloat(t.marginRight||0);return{width:e.offsetWidth+i,height:e.offsetHeight+n}}function D(e){var t={left:"right",right:"left",bottom:"top",top:"bottom"};return e.replace(/left|right|bottom|top/g,function(e){return t[e]})}function O(e,t,n){n=n.split("-")[0];var i=P(e),r={width:i.width,height:i.height},a=-1!==["right","left"].indexOf(n),s=a?"top":"left",o=a?"left":"top",l=a?"height":"width",u=a?"width":"height";return r[s]=t[s]+t[l]/2-i[l]/2,r[o]=n===o?t[o]-i[u]:t[D(o)],r}function M(e,t){return Array.prototype.find?e.find(t):e.filter(t)[0]}function N(e,t,n){return(void 0===n?e:e.slice(0,function(e,t,n){if(Array.prototype.findIndex)return e.findIndex(function(e){return e[t]===n});var i=M(e,function(e){return e[t]===n});return e.indexOf(i)}(e,"name",n))).forEach(function(e){e.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var n=e.function||e.fn;e.enabled&&o(n)&&(t.offsets.popper=k(t.offsets.popper),t.offsets.reference=k(t.offsets.reference),t=n(t,e))}),t}function U(e,t){return e.some(function(e){var n=e.name;return e.enabled&&n===t})}function F(e){for(var t=[!1,"ms","Webkit","Moz","O"],n=e.charAt(0).toUpperCase()+e.slice(1),i=0;i<t.length;i++){var r=t[i],a=r?""+r+n:e;if(void 0!==document.body.style[a])return a}return null}function B(e){var t=e.ownerDocument;return t?t.defaultView:window}function V(e,t,n,i){n.updateBound=i,B(e).addEventListener("resize",n.updateBound,{passive:!0});var r=c(e);return function e(t,n,i,r){var a="BODY"===t.nodeName,s=a?t.ownerDocument.defaultView:t;s.addEventListener(n,i,{passive:!0}),a||e(c(s.parentNode),n,i,r),r.push(s)}(r,"scroll",n.updateBound,n.scrollParents),n.scrollElement=r,n.eventsEnabled=!0,n}function H(){var e,t;this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=(e=this.reference,t=this.state,B(e).removeEventListener("resize",t.updateBound),t.scrollParents.forEach(function(e){e.removeEventListener("scroll",t.updateBound)}),t.updateBound=null,t.scrollParents=[],t.scrollElement=null,t.eventsEnabled=!1,t))}function G(e){return""!==e&&!isNaN(parseFloat(e))&&isFinite(e)}function j(e,t){Object.keys(t).forEach(function(n){var i="";-1!==["width","height","top","right","bottom","left"].indexOf(n)&&G(t[n])&&(i="px"),e.style[n]=t[n]+i})}var z=n&&/Firefox/i.test(navigator.userAgent);function W(e,t,n){var i=M(e,function(e){return e.name===t}),r=!!i&&e.some(function(e){return e.name===n&&e.enabled&&e.order<i.order});if(!r){var a="`"+t+"`",s="`"+n+"`";console.warn(s+" modifier is required by "+a+" modifier in order to work, be sure to include it before "+a+"!")}return r}var q=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],Y=q.slice(3);function K(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Y.indexOf(e),i=Y.slice(n+1).concat(Y.slice(0,n));return t?i.reverse():i}var X={FLIP:"flip",CLOCKWISE:"clockwise",COUNTERCLOCKWISE:"counterclockwise"};function $(e,t,n,i){var r=[0,0],a=-1!==["right","left"].indexOf(i),s=e.split(/(\+|\-)/).map(function(e){return e.trim()}),o=s.indexOf(M(s,function(e){return-1!==e.search(/,|\s/)}));s[o]&&-1===s[o].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var l=/\s*,\s*|\s+/,u=-1!==o?[s.slice(0,o).concat([s[o].split(l)[0]]),[s[o].split(l)[1]].concat(s.slice(o+1))]:[s];return(u=u.map(function(e,i){var r=(1===i?!a:a)?"height":"width",s=!1;return e.reduce(function(e,t){return""===e[e.length-1]&&-1!==["+","-"].indexOf(t)?(e[e.length-1]=t,s=!0,e):s?(e[e.length-1]+=t,s=!1,e):e.concat(t)},[]).map(function(e){return function(e,t,n,i){var r=e.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),a=+r[1],s=r[2];if(!a)return e;if(0===s.indexOf("%")){var o=void 0;switch(s){case"%p":o=n;break;case"%":case"%r":default:o=i}return k(o)[t]/100*a}if("vh"===s||"vw"===s)return("vh"===s?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*a;return a}(e,r,t,n)})})).forEach(function(e,t){e.forEach(function(n,i){G(n)&&(r[t]+=n*("-"===e[i-1]?-1:1))})}),r}var Z={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(e){var t=e.placement,n=t.split("-")[0],i=t.split("-")[1];if(i){var r=e.offsets,a=r.reference,s=r.popper,o=-1!==["bottom","top"].indexOf(n),l=o?"left":"top",u=o?"width":"height",c={start:S({},l,a[l]),end:S({},l,a[l]+a[u]-s[u])};e.offsets.popper=T({},s,c[i])}return e}},offset:{order:200,enabled:!0,fn:function(e,t){var n=t.offset,i=e.placement,r=e.offsets,a=r.popper,s=r.reference,o=i.split("-")[0],l=void 0;return l=G(+n)?[+n,0]:$(n,a,s,o),"left"===o?(a.top+=l[0],a.left-=l[1]):"right"===o?(a.top+=l[0],a.left+=l[1]):"top"===o?(a.left+=l[0],a.top-=l[1]):"bottom"===o&&(a.left+=l[0],a.top+=l[1]),e.popper=a,e},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(e,t){var n=t.boundariesElement||p(e.instance.popper);e.instance.reference===n&&(n=p(n));var i=F("transform"),r=e.instance.popper.style,a=r.top,s=r.left,o=r[i];r.top="",r.left="",r[i]="";var l=x(e.instance.popper,e.instance.reference,t.padding,n,e.positionFixed);r.top=a,r.left=s,r[i]=o,t.boundaries=l;var u=t.priority,c=e.offsets.popper,d={primary:function(e){var n=c[e];return c[e]<l[e]&&!t.escapeWithReference&&(n=Math.max(c[e],l[e])),S({},e,n)},secondary:function(e){var n="right"===e?"left":"top",i=c[n];return c[e]>l[e]&&!t.escapeWithReference&&(i=Math.min(c[n],l[e]-("right"===e?c.width:c.height))),S({},n,i)}};return u.forEach(function(e){var t=-1!==["left","top"].indexOf(e)?"primary":"secondary";c=T({},c,d[t](e))}),e.offsets.popper=c,e},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(e){var t=e.offsets,n=t.popper,i=t.reference,r=e.placement.split("-")[0],a=Math.floor,s=-1!==["top","bottom"].indexOf(r),o=s?"right":"bottom",l=s?"left":"top",u=s?"width":"height";return n[o]<a(i[l])&&(e.offsets.popper[l]=a(i[l])-n[u]),n[l]>a(i[o])&&(e.offsets.popper[l]=a(i[o])),e}},arrow:{order:500,enabled:!0,fn:function(e,t){var n;if(!W(e.instance.modifiers,"arrow","keepTogether"))return e;var i=t.element;if("string"==typeof i){if(!(i=e.instance.popper.querySelector(i)))return e}else if(!e.instance.popper.contains(i))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),e;var r=e.placement.split("-")[0],a=e.offsets,s=a.popper,o=a.reference,u=-1!==["left","right"].indexOf(r),c=u?"height":"width",d=u?"Top":"Left",h=d.toLowerCase(),f=u?"left":"top",p=u?"bottom":"right",m=P(i)[c];o[p]-m<s[h]&&(e.offsets.popper[h]-=s[h]-(o[p]-m)),o[h]+m>s[p]&&(e.offsets.popper[h]+=o[h]+m-s[p]),e.offsets.popper=k(e.offsets.popper);var v=o[h]+o[c]/2-m/2,g=l(e.instance.popper),y=parseFloat(g["margin"+d],10),_=parseFloat(g["border"+d+"Width"],10),b=v-e.offsets.popper[h]-y-_;return b=Math.max(Math.min(s[c]-m,b),0),e.arrowElement=i,e.offsets.arrow=(S(n={},h,Math.round(b)),S(n,f,""),n),e},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(e,t){if(U(e.instance.modifiers,"inner"))return e;if(e.flipped&&e.placement===e.originalPlacement)return e;var n=x(e.instance.popper,e.instance.reference,t.padding,t.boundariesElement,e.positionFixed),i=e.placement.split("-")[0],r=D(i),a=e.placement.split("-")[1]||"",s=[];switch(t.behavior){case X.FLIP:s=[i,r];break;case X.CLOCKWISE:s=K(i);break;case X.COUNTERCLOCKWISE:s=K(i,!0);break;default:s=t.behavior}return s.forEach(function(o,l){if(i!==o||s.length===l+1)return e;i=e.placement.split("-")[0],r=D(i);var u=e.offsets.popper,c=e.offsets.reference,d=Math.floor,h="left"===i&&d(u.right)>d(c.left)||"right"===i&&d(u.left)<d(c.right)||"top"===i&&d(u.bottom)>d(c.top)||"bottom"===i&&d(u.top)<d(c.bottom),f=d(u.left)<d(n.left),p=d(u.right)>d(n.right),m=d(u.top)<d(n.top),v=d(u.bottom)>d(n.bottom),g="left"===i&&f||"right"===i&&p||"top"===i&&m||"bottom"===i&&v,y=-1!==["top","bottom"].indexOf(i),_=!!t.flipVariations&&(y&&"start"===a&&f||y&&"end"===a&&p||!y&&"start"===a&&m||!y&&"end"===a&&v),b=!!t.flipVariationsByContent&&(y&&"start"===a&&p||y&&"end"===a&&f||!y&&"start"===a&&v||!y&&"end"===a&&m),w=_||b;(h||g||w)&&(e.flipped=!0,(h||g)&&(i=s[l+1]),w&&(a=function(e){return"end"===e?"start":"start"===e?"end":e}(a)),e.placement=i+(a?"-"+a:""),e.offsets.popper=T({},e.offsets.popper,O(e.instance.popper,e.offsets.reference,e.placement)),e=N(e.instance.modifiers,e,"flip"))}),e},behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:function(e){var t=e.placement,n=t.split("-")[0],i=e.offsets,r=i.popper,a=i.reference,s=-1!==["left","right"].indexOf(n),o=-1===["top","left"].indexOf(n);return r[s?"left":"top"]=a[n]-(o?r[s?"width":"height"]:0),e.placement=D(t),e.offsets.popper=k(r),e}},hide:{order:800,enabled:!0,fn:function(e){if(!W(e.instance.modifiers,"hide","preventOverflow"))return e;var t=e.offsets.reference,n=M(e.instance.modifiers,function(e){return"preventOverflow"===e.name}).boundaries;if(t.bottom<n.top||t.left>n.right||t.top>n.bottom||t.right<n.left){if(!0===e.hide)return e;e.hide=!0,e.attributes["x-out-of-boundaries"]=""}else{if(!1===e.hide)return e;e.hide=!1,e.attributes["x-out-of-boundaries"]=!1}return e}},computeStyle:{order:850,enabled:!0,fn:function(e,t){var n=t.x,i=t.y,r=e.offsets.popper,a=M(e.instance.modifiers,function(e){return"applyStyle"===e.name}).gpuAcceleration;void 0!==a&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var s=void 0!==a?a:t.gpuAcceleration,o=p(e.instance.popper),l=C(o),u={position:r.position},c=function(e,t){var n=e.offsets,i=n.popper,r=n.reference,a=Math.round,s=Math.floor,o=function(e){return e},l=a(r.width),u=a(i.width),c=-1!==["left","right"].indexOf(e.placement),d=-1!==e.placement.indexOf("-"),h=t?c||d||l%2==u%2?a:s:o,f=t?a:o;return{left:h(l%2==1&&u%2==1&&!d&&t?i.left-1:i.left),top:f(i.top),bottom:f(i.bottom),right:h(i.right)}}(e,window.devicePixelRatio<2||!z),d="bottom"===n?"top":"bottom",h="right"===i?"left":"right",f=F("transform"),m=void 0,v=void 0;if(v="bottom"===d?"HTML"===o.nodeName?-o.clientHeight+c.bottom:-l.height+c.bottom:c.top,m="right"===h?"HTML"===o.nodeName?-o.clientWidth+c.right:-l.width+c.right:c.left,s&&f)u[f]="translate3d("+m+"px, "+v+"px, 0)",u[d]=0,u[h]=0,u.willChange="transform";else{var g="bottom"===d?-1:1,y="right"===h?-1:1;u[d]=v*g,u[h]=m*y,u.willChange=d+", "+h}var _={"x-placement":e.placement};return e.attributes=T({},_,e.attributes),e.styles=T({},u,e.styles),e.arrowStyles=T({},e.offsets.arrow,e.arrowStyles),e},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(e){var t,n;return j(e.instance.popper,e.styles),t=e.instance.popper,n=e.attributes,Object.keys(n).forEach(function(e){!1!==n[e]?t.setAttribute(e,n[e]):t.removeAttribute(e)}),e.arrowElement&&Object.keys(e.arrowStyles).length&&j(e.arrowElement,e.arrowStyles),e},onLoad:function(e,t,n,i,r){var a=R(r,t,e,n.positionFixed),s=L(n.placement,a,t,e,n.modifiers.flip.boundariesElement,n.modifiers.flip.padding);return t.setAttribute("x-placement",s),j(t,{position:n.positionFixed?"fixed":"absolute"}),n},gpuAcceleration:void 0}}},Q=function(){function e(t,n){var i=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};w(this,e),this.scheduleUpdate=function(){return requestAnimationFrame(i.update)},this.update=s(this.update.bind(this)),this.options=T({},e.Defaults,r),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=t&&t.jquery?t[0]:t,this.popper=n&&n.jquery?n[0]:n,this.options.modifiers={},Object.keys(T({},e.Defaults.modifiers,r.modifiers)).forEach(function(t){i.options.modifiers[t]=T({},e.Defaults.modifiers[t]||{},r.modifiers?r.modifiers[t]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(e){return T({name:e},i.options.modifiers[e])}).sort(function(e,t){return e.order-t.order}),this.modifiers.forEach(function(e){e.enabled&&o(e.onLoad)&&e.onLoad(i.reference,i.popper,i.options,e,i.state)}),this.update();var a=this.options.eventsEnabled;a&&this.enableEventListeners(),this.state.eventsEnabled=a}return E(e,[{key:"update",value:function(){return function(){if(!this.state.isDestroyed){var e={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};e.offsets.reference=R(this.state,this.popper,this.reference,this.options.positionFixed),e.placement=L(this.options.placement,e.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),e.originalPlacement=e.placement,e.positionFixed=this.options.positionFixed,e.offsets.popper=O(this.popper,e.offsets.reference,e.placement),e.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",e=N(this.modifiers,e),this.state.isCreated?this.options.onUpdate(e):(this.state.isCreated=!0,this.options.onCreate(e))}}.call(this)}},{key:"destroy",value:function(){return function(){return this.state.isDestroyed=!0,U(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[F("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}.call(this)}},{key:"enableEventListeners",value:function(){return function(){this.state.eventsEnabled||(this.state=V(this.reference,this.options,this.state,this.scheduleUpdate))}.call(this)}},{key:"disableEventListeners",value:function(){return H.call(this)}}]),e}();Q.Utils=("undefined"!=typeof window?window:e).PopperUtils,Q.placements=q,Q.Defaults=Z,t.default=Q}.call(this,n(5))},function(e,t,n){"use strict";var i,r,a,s,o,l,u,c,d,h,f,p,m,v,g,y,_,b,w,E,S,T,k,C,I,A,x,L,R,P,D,O,M,N,U,F,B,V,H,G,j,z=Math.pow(2,32)-1;!function(){var e;if(k={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(e in k)k.hasOwnProperty(e)&&(k[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);C=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),A=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),I=new Uint8Array([0,0,0,1]),x=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),L=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),R={video:x,audio:L},O=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),D=new Uint8Array([0,0,0,0,0,0,0,0]),M=new Uint8Array([0,0,0,0,0,0,0,0]),N=M,U=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),F=M,P=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),i=function(e){var t,n,i=[],r=0;for(t=1;t<arguments.length;t++)i.push(arguments[t]);for(t=i.length;t--;)r+=i[t].byteLength;for(n=new Uint8Array(r+8),new DataView(n.buffer,n.byteOffset,n.byteLength).setUint32(0,n.byteLength),n.set(e,4),t=0,r=8;t<i.length;t++)n.set(i[t],r),r+=i[t].byteLength;return n},r=function(){return i(k.dinf,i(k.dref,O))},a=function(e){return i(k.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},s=function(){return i(k.ftyp,C,I,C,A)},y=function(e){return i(k.hdlr,R[e])},o=function(e){return i(k.mdat,e)},g=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(t[12]=e.samplerate>>>24&255,t[13]=e.samplerate>>>16&255,t[14]=e.samplerate>>>8&255,t[15]=255&e.samplerate),i(k.mdhd,t)},v=function(e){return i(k.mdia,g(e),y(e.type),u(e))},l=function(e){return i(k.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},u=function(e){return i(k.minf,"video"===e.type?i(k.vmhd,P):i(k.smhd,D),r(),b(e))},c=function(e,t){for(var n=[],r=t.length;r--;)n[r]=E(t[r]);return i.apply(null,[k.moof,l(e)].concat(n))},d=function(e){for(var t=e.length,n=[];t--;)n[t]=p(e[t]);return i.apply(null,[k.moov,f(4294967295)].concat(n).concat(h(e)))},h=function(e){for(var t=e.length,n=[];t--;)n[t]=S(e[t]);return i.apply(null,[k.mvex].concat(n))},f=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return i(k.mvhd,t)},_=function(e){var t,n,r=e.samples||[],a=new Uint8Array(4+r.length);for(n=0;n<r.length;n++)t=r[n].flags,a[n+4]=t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;return i(k.sdtp,a)},b=function(e){return i(k.stbl,w(e),i(k.stts,F),i(k.stsc,N),i(k.stsz,U),i(k.stco,M))},w=function(e){return i(k.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===e.type?B(e):V(e))},B=function(e){var t,n=e.sps||[],r=e.pps||[],a=[],s=[];for(t=0;t<n.length;t++)a.push((65280&n[t].byteLength)>>>8),a.push(255&n[t].byteLength),a=a.concat(Array.prototype.slice.call(n[t]));for(t=0;t<r.length;t++)s.push((65280&r[t].byteLength)>>>8),s.push(255&r[t].byteLength),s=s.concat(Array.prototype.slice.call(r[t]));return i(k.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),i(k.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([n.length]).concat(a).concat([r.length]).concat(s))),i(k.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))},V=function(e){return i(k.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),a(e))},m=function(e){var t=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return i(k.tkhd,t)},E=function(e){var t,n,r,a,s,o;return t=i(k.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),s=Math.floor(e.baseMediaDecodeTime/(z+1)),o=Math.floor(e.baseMediaDecodeTime%(z+1)),n=i(k.tfdt,new Uint8Array([1,0,0,0,s>>>24&255,s>>>16&255,s>>>8&255,255&s,o>>>24&255,o>>>16&255,o>>>8&255,255&o])),92,"audio"===e.type?(r=T(e,92),i(k.traf,t,n,r)):(a=_(e),r=T(e,a.length+92),i(k.traf,t,n,r,a))},p=function(e){return e.duration=e.duration||4294967295,i(k.trak,m(e),v(e))},S=function(e){var t=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(t[t.length-1]=0),i(k.trex,t)},j=function(e,t){var n=0,i=0,r=0,a=0;return e.length&&(void 0!==e[0].duration&&(n=1),void 0!==e[0].size&&(i=2),void 0!==e[0].flags&&(r=4),void 0!==e[0].compositionTimeOffset&&(a=8)),[0,0,n|i|r|a,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},G=function(e,t){var n,r,a,s;for(t+=20+16*(r=e.samples||[]).length,n=j(r,t),s=0;s<r.length;s++)a=r[s],n=n.concat([(4278190080&a.duration)>>>24,(16711680&a.duration)>>>16,(65280&a.duration)>>>8,255&a.duration,(4278190080&a.size)>>>24,(16711680&a.size)>>>16,(65280&a.size)>>>8,255&a.size,a.flags.isLeading<<2|a.flags.dependsOn,a.flags.isDependedOn<<6|a.flags.hasRedundancy<<4|a.flags.paddingValue<<1|a.flags.isNonSyncSample,61440&a.flags.degradationPriority,15&a.flags.degradationPriority,(4278190080&a.compositionTimeOffset)>>>24,(16711680&a.compositionTimeOffset)>>>16,(65280&a.compositionTimeOffset)>>>8,255&a.compositionTimeOffset]);return i(k.trun,new Uint8Array(n))},H=function(e,t){var n,r,a,s;for(t+=20+8*(r=e.samples||[]).length,n=j(r,t),s=0;s<r.length;s++)a=r[s],n=n.concat([(4278190080&a.duration)>>>24,(16711680&a.duration)>>>16,(65280&a.duration)>>>8,255&a.duration,(4278190080&a.size)>>>24,(16711680&a.size)>>>16,(65280&a.size)>>>8,255&a.size]);return i(k.trun,new Uint8Array(n))},T=function(e,t){return"audio"===e.type?H(e,t):G(e,t)},e.exports={ftyp:s,mdat:o,moof:c,moov:d,initSegment:function(e){var t,n=s(),i=d(e);return(t=new Uint8Array(n.byteLength+i.byteLength)).set(n),t.set(i,n.byteLength),t}}},function(e,t,n){"use strict";var i=n(1),r=n(17),a=function(){a.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new c(0,0),new c(0,1),new c(1,0),new c(1,1)],this.reset(),this.ccStreams_.forEach(function(e){e.on("data",this.trigger.bind(this,"data")),e.on("done",this.trigger.bind(this,"done"))},this)};a.prototype=new i,a.prototype.push=function(e){var t,n,i;if("sei_rbsp"===e.nalUnitType&&(t=r.parseSei(e.escapedRBSP)).payloadType===r.USER_DATA_REGISTERED_ITU_T_T35&&(n=r.parseUserData(t)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));i=r.parseCaptionPackets(e.pts,n),this.captionPackets_=this.captionPackets_.concat(i),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},a.prototype.flush=function(){this.captionPackets_.length?(this.captionPackets_.forEach(function(e,t){e.presortIndex=t}),this.captionPackets_.sort(function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts}),this.captionPackets_.forEach(function(e){e.type<2&&this.dispatchCea608Packet(e)},this),this.captionPackets_.length=0,this.ccStreams_.forEach(function(e){e.flush()},this)):this.ccStreams_.forEach(function(e){e.flush()},this)},a.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(e){e.reset()})},a.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCea608Channel_[e.type]=null:this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},a.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},a.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)},a.prototype.setsTextOrXDSActive=function(e){return 256==(28928&e.ccData)||4138==(30974&e.ccData)||6186==(30974&e.ccData)};var s={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},o=function(e){return null===e?"":(e=s[e]||e,String.fromCharCode(e))},l=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],u=function(){for(var e=[],t=15;t--;)e.push("");return e},c=function(e,t){c.prototype.init.call(this),this.field_=e||0,this.dataChannel_=t||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,n,i,r,a;if((t=32639&e.ccData)!==this.lastControlCode_){if(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),i=t>>>8,r=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),n=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=n,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=u();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=u();else if(t===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=u()),this.mode_="paintOn",this.startPts_=e.pts;else if(this.isSpecialCharacter(i,r))a=o((i=(3&i)<<8)|r),this[this.mode_](e.pts,a),this.column_++;else if(this.isExtCharacter(i,r))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),a=o((i=(3&i)<<8)|r),this[this.mode_](e.pts,a),this.column_++;else if(this.isMidRowCode(i,r))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&r)&&this.addFormatting(e.pts,["i"]),1==(1&r)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(i,r))this.column_+=3&r;else if(this.isPAC(i,r)){var s=l.indexOf(7968&t);"rollUp"===this.mode_&&(s-this.rollUpRows_+1<0&&(s=this.rollUpRows_-1),this.setRollUp(e.pts,s)),s!==this.row_&&(this.clearFormatting(e.pts),this.row_=s),1&r&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(r)&&14==(14&r)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(i)&&(0===r&&(r=null),a=o(i),a+=o(r),this[this.mode_](e.pts,a),this.column_+=a.length)}else this.lastControlCode_=null}};c.prototype=new i,c.prototype.flushDisplayed=function(e){var t=this.displayed_.map(function(e){try{return e.trim()}catch(e){return console.error("Skipping malformed caption."),""}}).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},c.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=u(),this.nonDisplayed_=u(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},c.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},c.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&t>=48&&t<=63},c.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&t>=32&&t<=63},c.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&t>=32&&t<=47},c.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&t>=33&&t<=35},c.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&t>=64&&t<=127},c.prototype.isColorPAC=function(e){return e>=64&&e<=79||e>=96&&e<=127},c.prototype.isNormalChar=function(e){return e>=32&&e<=127},c.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=u(),this.displayed_=u()),void 0!==t&&t!==this.row_)for(var n=0;n<this.rollUpRows_;n++)this.displayed_[t-n]=this.displayed_[this.row_-n],this.displayed_[this.row_-n]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},c.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var n=t.reduce(function(e,t){return e+"<"+t+">"},"");this[this.mode_](e,n)},c.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce(function(e,t){return e+"</"+t+">"},"");this.formatting_=[],this[this.mode_](e,t)}},c.prototype.popOn=function(e,t){var n=this.nonDisplayed_[this.row_];n+=t,this.nonDisplayed_[this.row_]=n},c.prototype.rollUp=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n},c.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<15;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},c.prototype.paintOn=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n},e.exports={CaptionStream:a,Cea608Stream:c}},function(e,t,n){"use strict";e.exports={parseSei:function(e){for(var t=0,n={payloadType:-1,payloadSize:0},i=0,r=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)i+=255,t++;for(i+=e[t++];255===e[t];)r+=255,t++;if(r+=e[t++],!n.payload&&4===i){n.payloadType=i,n.payloadSize=r,n.payload=e.subarray(t,t+r);break}t+=r,i=0,r=0}return n},parseUserData:function(e){return 181!==e.payload[0]?null:49!=(e.payload[1]<<8|e.payload[2])?null:"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])?null:3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)},parseCaptionPackets:function(e,t){var n,i,r,a,s=[];if(!(64&t[0]))return s;for(i=31&t[0],n=0;n<i;n++)a={type:3&t[2+(r=3*n)],pts:e},4&t[r+2]&&(a.ccData=t[r+3]<<8|t[r+4],s.push(a));return s},discardEmulationPreventionBytes:function(e){for(var t,n,i=e.byteLength,r=[],a=1;a<i-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return e;t=i-r.length,n=new Uint8Array(t);var s=0;for(a=0;a<t;s++,a++)s===r[0]&&(s++,r.shift()),n[a]=e[s];return n},USER_DATA_REGISTERED_ITU_T_T35:4}},function(e,t,n){"use strict";var i=n(1),r=function(e,t){var n=1;for(e>t&&(n=-1);Math.abs(t-e)>4294967296;)e+=8589934592*n;return e},a=function(e){var t,n;a.prototype.init.call(this),this.type_=e,this.push=function(e){e.type===this.type_&&(void 0===n&&(n=e.dts),e.dts=r(e.dts,n),e.pts=r(e.pts,n),t=e.dts,this.trigger("data",e))},this.flush=function(){n=t,this.trigger("done")},this.discontinuity=function(){n=void 0,t=void 0}};a.prototype=new i,e.exports={TimestampRolloverStream:a,handleRollover:r}},function(e,t,n){"use strict";var i,r,a=n(9).parseType,s=function(e){return new Date(1e3*e-20828448e5)},o=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}},l=function(e){var t,n,i=new DataView(e.buffer,e.byteOffset,e.byteLength),r=[];for(t=0;t+4<e.length;t+=n)if(n=i.getUint32(t),t+=4,n<=0)r.push("<span style='color:red;'>MALFORMED DATA</span>");else switch(31&e[t]){case 1:r.push("slice_layer_without_partitioning_rbsp");break;case 5:r.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:r.push("sei_rbsp");break;case 7:r.push("seq_parameter_set_rbsp");break;case 8:r.push("pic_parameter_set_rbsp");break;case 9:r.push("access_unit_delimiter_rbsp");break;default:r.push("UNKNOWN NAL - "+e[t]&31)}return r},u={avc1:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{dataReferenceIndex:t.getUint16(6),width:t.getUint16(24),height:t.getUint16(26),horizresolution:t.getUint16(28)+t.getUint16(30)/16,vertresolution:t.getUint16(32)+t.getUint16(34)/16,frameCount:t.getUint16(40),depth:t.getUint16(74),config:i(e.subarray(78,e.byteLength))}},avcC:function(e){var t,n,i,r,a=new DataView(e.buffer,e.byteOffset,e.byteLength),s={configurationVersion:e[0],avcProfileIndication:e[1],profileCompatibility:e[2],avcLevelIndication:e[3],lengthSizeMinusOne:3&e[4],sps:[],pps:[]},o=31&e[5];for(i=6,r=0;r<o;r++)n=a.getUint16(i),i+=2,s.sps.push(new Uint8Array(e.subarray(i,i+n))),i+=n;for(t=e[i],i++,r=0;r<t;r++)n=a.getUint16(i),i+=2,s.pps.push(new Uint8Array(e.subarray(i,i+n))),i+=n;return s},btrt:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{bufferSizeDB:t.getUint32(0),maxBitrate:t.getUint32(4),avgBitrate:t.getUint32(8)}},esds:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),esId:e[6]<<8|e[7],streamPriority:31&e[8],decoderConfig:{objectProfileIndication:e[11],streamType:e[12]>>>2&63,bufferSize:e[13]<<16|e[14]<<8|e[15],maxBitrate:e[16]<<24|e[17]<<16|e[18]<<8|e[19],avgBitrate:e[20]<<24|e[21]<<16|e[22]<<8|e[23],decoderConfigDescriptor:{tag:e[24],length:e[25],audioObjectType:e[26]>>>3&31,samplingFrequencyIndex:(7&e[26])<<1|e[27]>>>7&1,channelConfiguration:e[27]>>>3&15}}}},ftyp:function(e){for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={majorBrand:a(e.subarray(0,4)),minorVersion:t.getUint32(4),compatibleBrands:[]},i=8;i<e.byteLength;)n.compatibleBrands.push(a(e.subarray(i,i+4))),i+=4;return n},dinf:function(e){return{boxes:i(e)}},dref:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),dataReferences:i(e.subarray(8))}},hdlr:function(e){var t={version:new DataView(e.buffer,e.byteOffset,e.byteLength).getUint8(0),flags:new Uint8Array(e.subarray(1,4)),handlerType:a(e.subarray(8,12)),name:""},n=8;for(n=24;n<e.byteLength;n++){if(0===e[n]){n++;break}t.name+=String.fromCharCode(e[n])}return t.name=decodeURIComponent(escape(t.name)),t},mdat:function(e){return{byteLength:e.byteLength,nals:l(e)}},mdhd:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i=4,r={version:n.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),language:""};return 1===r.version?(i+=4,r.creationTime=s(n.getUint32(i)),i+=8,r.modificationTime=s(n.getUint32(i)),i+=4,r.timescale=n.getUint32(i),i+=8,r.duration=n.getUint32(i)):(r.creationTime=s(n.getUint32(i)),i+=4,r.modificationTime=s(n.getUint32(i)),i+=4,r.timescale=n.getUint32(i),i+=4,r.duration=n.getUint32(i)),i+=4,t=n.getUint16(i),r.language+=String.fromCharCode(96+(t>>10)),r.language+=String.fromCharCode(96+((992&t)>>5)),r.language+=String.fromCharCode(96+(31&t)),r},mdia:function(e){return{boxes:i(e)}},mfhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sequenceNumber:e[4]<<24|e[5]<<16|e[6]<<8|e[7]}},minf:function(e){return{boxes:i(e)}},mp4a:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={dataReferenceIndex:t.getUint16(6),channelcount:t.getUint16(16),samplesize:t.getUint16(18),samplerate:t.getUint16(24)+t.getUint16(26)/65536};return e.byteLength>28&&(n.streamDescriptor=i(e.subarray(28))[0]),n},moof:function(e){return{boxes:i(e)}},moov:function(e){return{boxes:i(e)}},mvex:function(e){return{boxes:i(e)}},mvhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,i={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===i.version?(n+=4,i.creationTime=s(t.getUint32(n)),n+=8,i.modificationTime=s(t.getUint32(n)),n+=4,i.timescale=t.getUint32(n),n+=8,i.duration=t.getUint32(n)):(i.creationTime=s(t.getUint32(n)),n+=4,i.modificationTime=s(t.getUint32(n)),n+=4,i.timescale=t.getUint32(n),n+=4,i.duration=t.getUint32(n)),n+=4,i.rate=t.getUint16(n)+t.getUint16(n+2)/16,n+=4,i.volume=t.getUint8(n)+t.getUint8(n+1)/8,n+=2,n+=2,n+=8,i.matrix=new Uint32Array(e.subarray(n,n+36)),n+=36,n+=24,i.nextTrackId=t.getUint32(n),i},pdin:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),rate:t.getUint32(4),initialDelay:t.getUint32(8)}},sdtp:function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]};for(t=4;t<e.byteLength;t++)n.samples.push({dependsOn:(48&e[t])>>4,isDependedOn:(12&e[t])>>2,hasRedundancy:3&e[t]});return n},sidx:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:n.getUint32(4),timescale:n.getUint32(8),earliestPresentationTime:n.getUint32(12),firstOffset:n.getUint32(16)},r=n.getUint16(22);for(t=24;r;t+=12,r--)i.references.push({referenceType:(128&e[t])>>>7,referencedSize:2147483647&n.getUint32(t),subsegmentDuration:n.getUint32(t+4),startsWithSap:!!(128&e[t+8]),sapType:(112&e[t+8])>>>4,sapDeltaTime:268435455&n.getUint32(t+8)});return i},smhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),balance:e[4]+e[5]/256}},stbl:function(e){return{boxes:i(e)}},stco:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),chunkOffsets:[]},r=n.getUint32(4);for(t=8;r;t+=4,r--)i.chunkOffsets.push(n.getUint32(t));return i},stsc:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i=n.getUint32(4),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleToChunks:[]};for(t=8;i;t+=12,i--)r.sampleToChunks.push({firstChunk:n.getUint32(t),samplesPerChunk:n.getUint32(t+4),sampleDescriptionIndex:n.getUint32(t+8)});return r},stsd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleDescriptions:i(e.subarray(8))}},stsz:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleSize:n.getUint32(4),entries:[]};for(t=12;t<e.byteLength;t+=4)i.entries.push(n.getUint32(t));return i},stts:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),timeToSamples:[]},r=n.getUint32(4);for(t=8;r;t+=8,r--)i.timeToSamples.push({sampleCount:n.getUint32(t),sampleDelta:n.getUint32(t+4)});return i},styp:function(e){return u.ftyp(e)},tfdt:function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4)),baseMediaDecodeTime:e[4]<<24|e[5]<<16|e[6]<<8|e[7]};return 1===t.version&&(t.baseMediaDecodeTime*=Math.pow(2,32),t.baseMediaDecodeTime+=e[8]<<24|e[9]<<16|e[10]<<8|e[11]),t},tfhd:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:n.getUint32(4)},r=1&i.flags[2],a=2&i.flags[2],s=8&i.flags[2],o=16&i.flags[2],l=32&i.flags[2],u=65536&i.flags[0],c=131072&i.flags[0];return t=8,r&&(t+=4,i.baseDataOffset=n.getUint32(12),t+=4),a&&(i.sampleDescriptionIndex=n.getUint32(t),t+=4),s&&(i.defaultSampleDuration=n.getUint32(t),t+=4),o&&(i.defaultSampleSize=n.getUint32(t),t+=4),l&&(i.defaultSampleFlags=n.getUint32(t)),u&&(i.durationIsEmpty=!0),!r&&c&&(i.baseDataOffsetIsMoof=!0),i},tkhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,i={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===i.version?(n+=4,i.creationTime=s(t.getUint32(n)),n+=8,i.modificationTime=s(t.getUint32(n)),n+=4,i.trackId=t.getUint32(n),n+=4,n+=8,i.duration=t.getUint32(n)):(i.creationTime=s(t.getUint32(n)),n+=4,i.modificationTime=s(t.getUint32(n)),n+=4,i.trackId=t.getUint32(n),n+=4,n+=4,i.duration=t.getUint32(n)),n+=4,n+=8,i.layer=t.getUint16(n),n+=2,i.alternateGroup=t.getUint16(n),n+=2,i.volume=t.getUint8(n)+t.getUint8(n+1)/8,n+=2,n+=2,i.matrix=new Uint32Array(e.subarray(n,n+36)),n+=36,i.width=t.getUint16(n)+t.getUint16(n+2)/16,n+=4,i.height=t.getUint16(n)+t.getUint16(n+2)/16,i},traf:function(e){return{boxes:i(e)}},trak:function(e){return{boxes:i(e)}},trex:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:t.getUint32(4),defaultSampleDescriptionIndex:t.getUint32(8),defaultSampleDuration:t.getUint32(12),defaultSampleSize:t.getUint32(16),sampleDependsOn:3&e[20],sampleIsDependedOn:(192&e[21])>>6,sampleHasRedundancy:(48&e[21])>>4,samplePaddingValue:(14&e[21])>>1,sampleIsDifferenceSample:!!(1&e[21]),sampleDegradationPriority:t.getUint16(22)}},trun:function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},i=new DataView(e.buffer,e.byteOffset,e.byteLength),r=1&n.flags[2],a=4&n.flags[2],s=1&n.flags[1],l=2&n.flags[1],u=4&n.flags[1],c=8&n.flags[1],d=i.getUint32(4),h=8;for(r&&(n.dataOffset=i.getInt32(h),h+=4),a&&d&&(t={flags:o(e.subarray(h,h+4))},h+=4,s&&(t.duration=i.getUint32(h),h+=4),l&&(t.size=i.getUint32(h),h+=4),c&&(t.compositionTimeOffset=i.getUint32(h),h+=4),n.samples.push(t),d--);d--;)t={},s&&(t.duration=i.getUint32(h),h+=4),l&&(t.size=i.getUint32(h),h+=4),u&&(t.flags=o(e.subarray(h,h+4)),h+=4),c&&(t.compositionTimeOffset=i.getUint32(h),h+=4),n.samples.push(t);return n},"url ":function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4))}},vmhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),graphicsmode:t.getUint16(4),opcolor:new Uint16Array([t.getUint16(6),t.getUint16(8),t.getUint16(10)])}}};i=function(e){for(var t,n,i,r,s,o=0,l=[],c=new ArrayBuffer(e.length),d=new Uint8Array(c),h=0;h<e.length;++h)d[h]=e[h];for(t=new DataView(c);o<e.byteLength;)n=t.getUint32(o),i=a(e.subarray(o+4,o+8)),r=n>1?o+n:e.byteLength,(s=(u[i]||function(e){return{data:e}})(e.subarray(o+8,r))).size=n,s.type=i,l.push(s),o=r;return l},r=function(e,t){var n;return t=t||0,n=new Array(2*t+1).join(" "),e.map(function(e,i){return n+e.type+"\n"+Object.keys(e).filter(function(e){return"type"!==e&&"boxes"!==e}).map(function(t){var i=n+"  "+t+": ",r=e[t];if(r instanceof Uint8Array||r instanceof Uint32Array){var a=Array.prototype.slice.call(new Uint8Array(r.buffer,r.byteOffset,r.byteLength)).map(function(e){return" "+("00"+e.toString(16)).slice(-2)}).join("").match(/.{1,24}/g);return a?1===a.length?i+"<"+a.join("").slice(1)+">":i+"<\n"+a.map(function(e){return n+"  "+e}).join("\n")+"\n"+n+"  >":i+"<>"}return i+JSON.stringify(r,null,2).split("\n").map(function(e,t){return 0===t?e:n+"  "+e}).join("\n")}).join("\n")+(e.boxes?"\n"+r(e.boxes,t+1):"")}).join("\n")},e.exports={inspect:i,textify:r,parseTfdt:u.tfdt,parseHdlr:u.hdlr,parseTfhd:u.tfhd,parseTrun:u.trun,parseSidx:u.sidx}},function(e){e.exports={FULL_SCREEN:"Full screen",EXIT_FULL_SCREEN:"Exit full screen",FAST_FORWARD:"Fast-forward",REWIND:"Rewind",MUTE:"Mute",UNMUTE:"Unmute",PAUSE:"Pause",PLAY:"Play",SEEK:"Seek",VOLUME:"Volume",SKIP_TO_LIVE:"Skip ahead to live",LIVE:"Live",MORE_SETTINGS:"More settings",BACK:"Back",CAPTIONS:"Captions",RESOLUTION:"Resolution",AUTO_QUALITY:"Auto",CAST:"Cast...",LANGUAGE:"Language",UNRECOGNIZED_LANGUAGE:"Unrecognized",UNDETERMINED_LANGUAGE:"Undetermined",MULTIPLE_LANGUAGES:"Multiple languages",NOT_APPLICABLE:"Not applicable",ENTER_PICTURE_IN_PICTURE:"Enter Picture-in-Picture",EXIT_PICTURE_IN_PICTURE:"Exit Picture-in-Picture",PICTURE_IN_PICTURE:"Picture-in-Picture",ON:"On",OFF:"Off"}},function(e,t,n){},function(e,t,n){},function(e,t,n){var i;e.exports=function e(t,n,r){function a(o,l){if(!n[o]){if(!t[o]){var u="function"==typeof i&&i;if(!l&&u)return i(o,!0);if(s)return s(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[o]={exports:{}};t[o][0].call(d.exports,function(e){var n=t[o][1][e];return a(n||e)},d,d.exports,e,t,n,r)}return n[o].exports}for(var s="function"==typeof i&&i,o=0;o<r.length;o++)a(r[o]);return a}({1:[function(e,t,n){"use strict";var i,r=e(36),a=e(2);(i=function(){var e=new Uint8Array,t=0;i.prototype.init.call(this),this.setTimestamp=function(e){t=e},this.push=function(n){var i,r,s,o,l=0,u=0;for(e.length?(o=e.length,(e=new Uint8Array(n.byteLength+o)).set(e.subarray(0,o)),e.set(n,o)):e=n;e.length-u>=3;)if(e[u]!=="I".charCodeAt(0)||e[u+1]!=="D".charCodeAt(0)||e[u+2]!=="3".charCodeAt(0))if(255!=(255&e[u])||240!=(240&e[u+1]))u++;else{if(e.length-u<7)break;if(l=a.parseAdtsSize(e,u),u+l>e.length)break;s={type:"audio",data:e.subarray(u,u+l),pts:t,dts:t},this.trigger("data",s),u+=l}else{if(e.length-u<10)break;if(l=a.parseId3TagSize(e,u),u+l>e.length)break;r={type:"timed-metadata",data:e.subarray(u,u+l)},this.trigger("data",r),u+=l}i=e.length-u,e=i>0?e.subarray(u):new Uint8Array}}).prototype=new r,t.exports=i},{2:2,36:36}],2:[function(e,t,n){"use strict";var i=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],r=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},a=function(e,t,n){return unescape(function(e,t,n){var i,r="";for(i=t;i<n;i++)r+="%"+("00"+e[i].toString(16)).slice(-2);return r}(e,t,n))};t.exports={isLikelyAacData:function(e){return e[0]==="I".charCodeAt(0)&&e[1]==="D".charCodeAt(0)&&e[2]==="3".charCodeAt(0)},parseId3TagSize:function(e,t){var n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?n+20:n+10},parseAdtsSize:function(e,t){var n=(224&e[t+5])>>5,i=e[t+4]<<3;return 6144&e[t+3]|i|n},parseType:function(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[t]&&240==(240&e[t+1])?"audio":null},parseSampleRate:function(e){for(var t=0;t+5<e.length;){if(255===e[t]&&240==(246&e[t+1]))return i[(60&e[t+2])>>>2];t++}return null},parseAacTimestamp:function(e){var t,n,i;t=10,64&e[5]&&(t+=4,t+=r(e.subarray(10,14)));do{if((n=r(e.subarray(t+4,t+8)))<1)return null;if("PRIV"===String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3])){i=e.subarray(t+10,t+n+10);for(var s=0;s<i.byteLength;s++)if(0===i[s]){var o=a(i,0,s);if("com.apple.streaming.transportStreamTimestamp"===o){var l=i.subarray(s+1),u=(1&l[3])<<30|l[4]<<22|l[5]<<14|l[6]<<6|l[7]>>>2;return u*=4,u+=3&l[7]}break}}t+=10,t+=n}while(t<e.byteLength);return null}}},{}],3:[function(e,t,n){"use strict";var i,r=e(36),a=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(i=function(){var e;i.prototype.init.call(this),this.push=function(t){var n,i,r,s,o,l,u=0,c=0;if("audio"===t.type)for(e?(s=e,(e=new Uint8Array(s.byteLength+t.data.byteLength)).set(s),e.set(t.data,s.byteLength)):e=t.data;u+5<e.length;)if(255===e[u]&&240==(246&e[u+1])){if(i=2*(1&~e[u+1]),n=(3&e[u+3])<<11|e[u+4]<<3|(224&e[u+5])>>5,o=1024*(1+(3&e[u+6])),l=9e4*o/a[(60&e[u+2])>>>2],r=u+n,e.byteLength<r)return;if(this.trigger("data",{pts:t.pts+c*l,dts:t.dts+c*l,sampleCount:o,audioobjecttype:1+(e[u+2]>>>6&3),channelcount:(1&e[u+2])<<2|(192&e[u+3])>>>6,samplerate:a[(60&e[u+2])>>>2],samplingfrequencyindex:(60&e[u+2])>>>2,samplesize:16,data:e.subarray(u+7+i,r)}),e.byteLength===r)return void(e=void 0);c++,e=e.subarray(r)}else u++},this.flush=function(){this.trigger("done")}}).prototype=new r,t.exports=i},{36:36}],4:[function(e,t,n){"use strict";var i,r,a,s=e(36),o=e(35);(r=function(){var e,t,n=0;r.prototype.init.call(this),this.push=function(i){var r;for(t?((r=new Uint8Array(t.byteLength+i.data.byteLength)).set(t),r.set(i.data,t.byteLength),t=r):t=i.data;n<t.byteLength-3;n++)if(1===t[n+2]){e=n+5;break}for(;e<t.byteLength;)switch(t[e]){case 0:if(0!==t[e-1]){e+=2;break}if(0!==t[e-2]){e++;break}n+3!==e-2&&this.trigger("data",t.subarray(n+3,e-2));do{e++}while(1!==t[e]&&e<t.length);n=e-2,e+=3;break;case 1:if(0!==t[e-1]||0!==t[e-2]){e+=3;break}this.trigger("data",t.subarray(n+3,e-2)),n=e-2,e+=3;break;default:e+=3}t=t.subarray(n),e-=n,n=0},this.flush=function(){t&&t.byteLength>3&&this.trigger("data",t.subarray(n+3)),t=null,n=0,this.trigger("done")}}).prototype=new s,a={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(i=function(){var e,t,n,s,l,u,c,d=new r;i.prototype.init.call(this),e=this,this.push=function(e){"video"===e.type&&(t=e.trackId,n=e.pts,s=e.dts,d.push(e))},d.on("data",function(i){var r={trackId:t,pts:n,dts:s,data:i};switch(31&i[0]){case 5:r.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:r.nalUnitType="sei_rbsp",r.escapedRBSP=l(i.subarray(1));break;case 7:r.nalUnitType="seq_parameter_set_rbsp",r.escapedRBSP=l(i.subarray(1)),r.config=u(r.escapedRBSP);break;case 8:r.nalUnitType="pic_parameter_set_rbsp";break;case 9:r.nalUnitType="access_unit_delimiter_rbsp"}e.trigger("data",r)}),d.on("done",function(){e.trigger("done")}),this.flush=function(){d.flush()},c=function(e,t){var n,i,r=8,a=8;for(n=0;n<e;n++)0!==a&&(i=t.readExpGolomb(),a=(r+i+256)%256),r=0===a?r:a},l=function(e){for(var t,n,i=e.byteLength,r=[],a=1;a<i-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return e;t=i-r.length,n=new Uint8Array(t);var s=0;for(a=0;a<t;s++,a++)s===r[0]&&(s++,r.shift()),n[a]=e[s];return n},u=function(e){var t,n,i,r,s,l,u,d,h,f,p,m,v,g=0,y=0,_=0,b=0,w=1;if(t=new o(e),n=t.readUnsignedByte(),r=t.readUnsignedByte(),i=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),a[n]&&(3===(s=t.readUnsignedExpGolomb())&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(p=3!==s?8:12,v=0;v<p;v++)t.readBoolean()&&c(v<6?16:64,t);if(t.skipUnsignedExpGolomb(),0===(l=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();else if(1===l)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),u=t.readUnsignedExpGolomb(),v=0;v<u;v++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),d=t.readUnsignedExpGolomb(),h=t.readUnsignedExpGolomb(),0===(f=t.readBits(1))&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(g=t.readUnsignedExpGolomb(),y=t.readUnsignedExpGolomb(),_=t.readUnsignedExpGolomb(),b=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(t.readUnsignedByte()){case 1:m=[1,1];break;case 2:m=[12,11];break;case 3:m=[10,11];break;case 4:m=[16,11];break;case 5:m=[40,33];break;case 6:m=[24,11];break;case 7:m=[20,11];break;case 8:m=[32,11];break;case 9:m=[80,33];break;case 10:m=[18,11];break;case 11:m=[15,11];break;case 12:m=[64,33];break;case 13:m=[160,99];break;case 14:m=[4,3];break;case 15:m=[3,2];break;case 16:m=[2,1];break;case 255:m=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()]}m&&(w=m[0]/m[1])}return{profileIdc:n,levelIdc:i,profileCompatibility:r,width:Math.ceil((16*(d+1)-2*g-2*y)*w),height:(2-f)*(h+1)*16-2*_-2*b}}}).prototype=new s,t.exports={H264Stream:i,NalByteStream:r}},{35:35,36:36}],5:[function(e,t,n){t.exports={adts:e(3),h264:e(4)}},{3:3,4:4}],6:[function(e,t,n){var i=[33,16,5,32,164,27],r=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],a=function(e){for(var t=[];e--;)t.push(0);return t},s={96000:[i,[227,64],a(154),[56]],88200:[i,[231],a(170),[56]],64000:[i,[248,192],a(240),[56]],48000:[i,[255,192],a(268),[55,148,128],a(54),[112]],44100:[i,[255,192],a(268),[55,163,128],a(84),[112]],32000:[i,[255,192],a(268),[55,234],a(226),[112]],24000:[i,[255,192],a(268),[55,255,128],a(268),[111,112],a(126),[224]],16000:[i,[255,192],a(268),[55,255,128],a(268),[111,255],a(269),[223,108],a(195),[1,192]],12000:[r,a(268),[3,127,248],a(268),[6,255,240],a(268),[13,255,224],a(268),[27,253,128],a(259),[56]],11025:[r,a(268),[3,127,248],a(268),[6,255,240],a(268),[13,255,224],a(268),[27,255,192],a(268),[55,175,128],a(108),[112]],8000:[r,a(268),[3,121,16],a(47),[7]]};t.exports=function(e){return Object.keys(e).reduce(function(t,n){return t[n]=new Uint8Array(e[n].reduce(function(e,t){return e.concat(t)},[])),t},{})}(s)},{}],7:[function(e,t,n){"use strict";var i=e(36),r=function(e){this.numberOfTracks=0,this.metadataStream=e.metadataStream,this.videoTags=[],this.audioTags=[],this.videoTrack=null,this.audioTrack=null,this.pendingCaptions=[],this.pendingMetadata=[],this.pendingTracks=0,this.processedTracks=0,r.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):("video"===e.track.type&&(this.videoTrack=e.track,this.videoTags=e.tags,this.pendingTracks++),void("audio"===e.track.type&&(this.audioTrack=e.track,this.audioTags=e.tags,this.pendingTracks++)))}};r.prototype=new i,r.prototype.flush=function(e){var t,n,i,r,a={tags:{},captions:[],captionStreams:{},metadata:[]};if(this.pendingTracks<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(0===this.pendingTracks&&++this.processedTracks<this.numberOfTracks)return}if(this.processedTracks+=this.pendingTracks,this.pendingTracks=0,!(this.processedTracks<this.numberOfTracks)){for(this.videoTrack?r=this.videoTrack.timelineStartInfo.pts:this.audioTrack&&(r=this.audioTrack.timelineStartInfo.pts),a.tags.videoTags=this.videoTags,a.tags.audioTags=this.audioTags,i=0;i<this.pendingCaptions.length;i++)(n=this.pendingCaptions[i]).startTime=n.startPts-r,n.startTime/=9e4,n.endTime=n.endPts-r,n.endTime/=9e4,a.captionStreams[n.stream]=!0,a.captions.push(n);for(i=0;i<this.pendingMetadata.length;i++)(t=this.pendingMetadata[i]).cueTime=t.pts-r,t.cueTime/=9e4,a.metadata.push(t);a.metadata.dispatchType=this.metadataStream.dispatchType,this.videoTrack=null,this.audioTrack=null,this.videoTags=[],this.audioTags=[],this.pendingCaptions.length=0,this.pendingMetadata.length=0,this.pendingTracks=0,this.processedTracks=0,this.trigger("data",a),this.trigger("done")}},t.exports=r},{36:36}],8:[function(e,t,n){"use strict";var i=e(9);t.exports=function(e,t,n){var r,a,s,o=new Uint8Array(9),l=new DataView(o.buffer);return e=e||0,t=void 0===t||t,n=void 0===n||n,l.setUint8(0,70),l.setUint8(1,76),l.setUint8(2,86),l.setUint8(3,1),l.setUint8(4,(t?4:0)|(n?1:0)),l.setUint32(5,o.byteLength),e<=0?((a=new Uint8Array(o.byteLength+4)).set(o),a.set([0,0,0,0],o.byteLength),a):((r=new i(i.METADATA_TAG)).pts=r.dts=0,r.writeMetaDataDouble("duration",e),s=r.finalize().length,(a=new Uint8Array(o.byteLength+s)).set(o),a.set(l.byteLength,s),a)}},{9:9}],9:[function(e,t,n){"use strict";var i;(i=function(e,t){var n,r=0,a=16384,s=function(e,t){var n,i=e.position+t;i<e.bytes.byteLength||((n=new Uint8Array(2*i)).set(e.bytes.subarray(0,e.position),0),e.bytes=n,e.view=new DataView(e.bytes.buffer))},o=i.widthBytes||new Uint8Array("width".length),l=i.heightBytes||new Uint8Array("height".length),u=i.videocodecidBytes||new Uint8Array("videocodecid".length);if(!i.widthBytes){for(n=0;n<"width".length;n++)o[n]="width".charCodeAt(n);for(n=0;n<"height".length;n++)l[n]="height".charCodeAt(n);for(n=0;n<"videocodecid".length;n++)u[n]="videocodecid".charCodeAt(n);i.widthBytes=o,i.heightBytes=l,i.videocodecidBytes=u}switch(this.keyFrame=!1,e){case i.VIDEO_TAG:this.length=16,a*=6;break;case i.AUDIO_TAG:this.length=13,this.keyFrame=!0;break;case i.METADATA_TAG:this.length=29,this.keyFrame=!0;break;default:throw new Error("Unknown FLV tag type")}this.bytes=new Uint8Array(a),this.view=new DataView(this.bytes.buffer),this.bytes[0]=e,this.position=this.length,this.keyFrame=t,this.pts=0,this.dts=0,this.writeBytes=function(e,t,n){var i,r=t||0;n=n||e.byteLength,i=r+n,s(this,n),this.bytes.set(e.subarray(r,i),this.position),this.position+=n,this.length=Math.max(this.length,this.position)},this.writeByte=function(e){s(this,1),this.bytes[this.position]=e,this.position++,this.length=Math.max(this.length,this.position)},this.writeShort=function(e){s(this,2),this.view.setUint16(this.position,e),this.position+=2,this.length=Math.max(this.length,this.position)},this.negIndex=function(e){return this.bytes[this.length-e]},this.nalUnitSize=function(){return 0===r?0:this.length-(r+4)},this.startNalUnit=function(){if(r>0)throw new Error("Attempted to create new NAL wihout closing the old one");r=this.length,this.length+=4,this.position=this.length},this.endNalUnit=function(e){var t,n;this.length===r+4?this.length-=4:r>0&&(t=r+4,n=this.length-t,this.position=r,this.view.setUint32(this.position,n),this.position=this.length,e&&e.push(this.bytes.subarray(t,t+n))),r=0},this.writeMetaDataDouble=function(e,t){var n;if(s(this,2+e.length+9),this.view.setUint16(this.position,e.length),this.position+=2,"width"===e)this.bytes.set(o,this.position),this.position+=5;else if("height"===e)this.bytes.set(l,this.position),this.position+=6;else if("videocodecid"===e)this.bytes.set(u,this.position),this.position+=12;else for(n=0;n<e.length;n++)this.bytes[this.position]=e.charCodeAt(n),this.position++;this.position++,this.view.setFloat64(this.position,t),this.position+=8,this.length=Math.max(this.length,this.position),++r},this.writeMetaDataBoolean=function(e,t){var n;for(s(this,2),this.view.setUint16(this.position,e.length),this.position+=2,n=0;n<e.length;n++)s(this,1),this.bytes[this.position]=e.charCodeAt(n),this.position++;s(this,2),this.view.setUint8(this.position,1),this.position++,this.view.setUint8(this.position,t?1:0),this.position++,this.length=Math.max(this.length,this.position),++r},this.finalize=function(){var e,n;switch(this.bytes[0]){case i.VIDEO_TAG:this.bytes[11]=7|(this.keyFrame||t?16:32),this.bytes[12]=t?0:1,e=this.pts-this.dts,this.bytes[13]=(16711680&e)>>>16,this.bytes[14]=(65280&e)>>>8,this.bytes[15]=(255&e)>>>0;break;case i.AUDIO_TAG:this.bytes[11]=175,this.bytes[12]=t?0:1;break;case i.METADATA_TAG:this.position=11,this.view.setUint8(this.position,2),this.position++,this.view.setUint16(this.position,10),this.position+=2,this.bytes.set([111,110,77,101,116,97,68,97,116,97],this.position),this.position+=10,this.bytes[this.position]=8,this.position++,this.view.setUint32(this.position,r),this.position=this.length,this.bytes.set([0,0,9],this.position),this.position+=3,this.length=this.position}return n=this.length-11,this.bytes[1]=(16711680&n)>>>16,this.bytes[2]=(65280&n)>>>8,this.bytes[3]=(255&n)>>>0,this.bytes[4]=(16711680&this.dts)>>>16,this.bytes[5]=(65280&this.dts)>>>8,this.bytes[6]=(255&this.dts)>>>0,this.bytes[7]=(4278190080&this.dts)>>>24,this.bytes[8]=0,this.bytes[9]=0,this.bytes[10]=0,s(this,4),this.view.setUint32(this.length,this.length),this.length+=4,this.position+=4,this.bytes=this.bytes.subarray(0,this.length),this.frameTime=i.frameTime(this.bytes),this}}).AUDIO_TAG=8,i.VIDEO_TAG=9,i.METADATA_TAG=18,i.isAudioFrame=function(e){return i.AUDIO_TAG===e[0]},i.isVideoFrame=function(e){return i.VIDEO_TAG===e[0]},i.isMetaData=function(e){return i.METADATA_TAG===e[0]},i.isKeyFrame=function(e){return i.isVideoFrame(e)?23===e[11]:!!i.isAudioFrame(e)||!!i.isMetaData(e)},i.frameTime=function(e){var t=e[4]<<16;return t|=e[5]<<8,t|=e[6]<<0,t|=e[7]<<24},t.exports=i},{}],10:[function(e,t,n){t.exports={tag:e(9),Transmuxer:e(12),getFlvHeader:e(8)}},{12:12,8:8,9:9}],11:[function(e,t,n){"use strict";t.exports=function(){var e=this;this.list=[],this.push=function(e){this.list.push({bytes:e.bytes,dts:e.dts,pts:e.pts,keyFrame:e.keyFrame,metaDataTag:e.metaDataTag})},Object.defineProperty(this,"length",{get:function(){return e.list.length}})}},{}],12:[function(e,t,n){"use strict";var i,r,a,s,o,l,u=e(36),c=e(9),d=e(16),h=e(3),f=e(4).H264Stream,p=e(7),m=e(11);s=function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts?e.timelineStartInfo.pts=t.pts:e.timelineStartInfo.pts=Math.min(e.timelineStartInfo.pts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts?e.timelineStartInfo.dts=t.dts:e.timelineStartInfo.dts=Math.min(e.timelineStartInfo.dts,t.dts))},o=function(e,t){var n=new c(c.METADATA_TAG);return n.dts=t,n.pts=t,n.writeMetaDataDouble("videocodecid",7),n.writeMetaDataDouble("width",e.width),n.writeMetaDataDouble("height",e.height),n},l=function(e,t){var n,i=new c(c.VIDEO_TAG,!0);for(i.dts=t,i.pts=t,i.writeByte(1),i.writeByte(e.profileIdc),i.writeByte(e.profileCompatibility),i.writeByte(e.levelIdc),i.writeByte(255),i.writeByte(225),i.writeShort(e.sps[0].length),i.writeBytes(e.sps[0]),i.writeByte(e.pps.length),n=0;n<e.pps.length;++n)i.writeShort(e.pps[n].length),i.writeBytes(e.pps[n]);return i},(a=function(e){var t,n=[],i=[];a.prototype.init.call(this),this.push=function(t){s(e,t),e&&(e.audioobjecttype=t.audioobjecttype,e.channelcount=t.channelcount,e.samplerate=t.samplerate,e.samplingfrequencyindex=t.samplingfrequencyindex,e.samplesize=t.samplesize,e.extraData=e.audioobjecttype<<11|e.samplingfrequencyindex<<7|e.channelcount<<3),t.pts=Math.round(t.pts/90),t.dts=Math.round(t.dts/90),n.push(t)},this.flush=function(){var r,a,s,o=new m;if(0!==n.length){for(s=-1/0;n.length;)r=n.shift(),i.length&&r.pts>=i[0]&&(s=i.shift(),this.writeMetaDataTags(o,s)),(e.extraData!==t||r.pts-s>=1e3)&&(this.writeMetaDataTags(o,r.pts),t=e.extraData,s=r.pts),(a=new c(c.AUDIO_TAG)).pts=r.pts,a.dts=r.dts,a.writeBytes(r.data),o.push(a.finalize());i.length=0,t=null,this.trigger("data",{track:e,tags:o.list}),this.trigger("done","AudioSegmentStream")}else this.trigger("done","AudioSegmentStream")},this.writeMetaDataTags=function(t,n){var i;(i=new c(c.METADATA_TAG)).pts=n,i.dts=n,i.writeMetaDataDouble("audiocodecid",10),i.writeMetaDataBoolean("stereo",2===e.channelcount),i.writeMetaDataDouble("audiosamplerate",e.samplerate),i.writeMetaDataDouble("audiosamplesize",16),t.push(i.finalize()),(i=new c(c.AUDIO_TAG,!0)).pts=n,i.dts=n,i.view.setUint16(i.position,e.extraData),i.position+=2,i.length=Math.max(i.length,i.position),t.push(i.finalize())},this.onVideoKeyFrame=function(e){i.push(e)}}).prototype=new u,(r=function(e){var t,n,i=[];r.prototype.init.call(this),this.finishFrame=function(i,r){if(r){if(t&&e&&e.newMetadata&&(r.keyFrame||0===i.length)){var a=o(t,r.dts).finalize(),s=l(e,r.dts).finalize();a.metaDataTag=s.metaDataTag=!0,i.push(a),i.push(s),e.newMetadata=!1,this.trigger("keyframe",r.dts)}r.endNalUnit(),i.push(r.finalize()),n=null}},this.push=function(t){s(e,t),t.pts=Math.round(t.pts/90),t.dts=Math.round(t.dts/90),i.push(t)},this.flush=function(){for(var r,a=new m;i.length&&"access_unit_delimiter_rbsp"!==i[0].nalUnitType;)i.shift();if(0!==i.length){for(;i.length;)"seq_parameter_set_rbsp"===(r=i.shift()).nalUnitType?(e.newMetadata=!0,t=r.config,e.width=t.width,e.height=t.height,e.sps=[r.data],e.profileIdc=t.profileIdc,e.levelIdc=t.levelIdc,e.profileCompatibility=t.profileCompatibility,n.endNalUnit()):"pic_parameter_set_rbsp"===r.nalUnitType?(e.newMetadata=!0,e.pps=[r.data],n.endNalUnit()):"access_unit_delimiter_rbsp"===r.nalUnitType?(n&&this.finishFrame(a,n),(n=new c(c.VIDEO_TAG)).pts=r.pts,n.dts=r.dts):("slice_layer_without_partitioning_rbsp_idr"===r.nalUnitType&&(n.keyFrame=!0),n.endNalUnit()),n.startNalUnit(),n.writeBytes(r.data);n&&this.finishFrame(a,n),this.trigger("data",{track:e,tags:a.list}),this.trigger("done","VideoSegmentStream")}else this.trigger("done","VideoSegmentStream")}}).prototype=new u,(i=function(e){var t,n,s,o,l,u,c,m,v,g,y,_,b=this;i.prototype.init.call(this),e=e||{},this.metadataStream=new d.MetadataStream,e.metadataStream=this.metadataStream,t=new d.TransportPacketStream,n=new d.TransportParseStream,s=new d.ElementaryStream,o=new d.TimestampRolloverStream("video"),l=new d.TimestampRolloverStream("audio"),u=new d.TimestampRolloverStream("timed-metadata"),c=new h,m=new f,_=new p(e),t.pipe(n).pipe(s),s.pipe(o).pipe(m),s.pipe(l).pipe(c),s.pipe(u).pipe(this.metadataStream).pipe(_),y=new d.CaptionStream,m.pipe(y).pipe(_),s.on("data",function(e){var t,n,i;if("metadata"===e.type){for(t=e.tracks.length;t--;)"video"===e.tracks[t].type?n=e.tracks[t]:"audio"===e.tracks[t].type&&(i=e.tracks[t]);n&&!v&&(_.numberOfTracks++,v=new r(n),m.pipe(v).pipe(_)),i&&!g&&(_.numberOfTracks++,g=new a(i),c.pipe(g).pipe(_),v&&v.on("keyframe",g.onVideoKeyFrame))}}),this.push=function(e){t.push(e)},this.flush=function(){t.flush()},this.resetCaptions=function(){y.reset()},_.on("data",function(e){b.trigger("data",e)}),_.on("done",function(){b.trigger("done")})}).prototype=new u,t.exports=i},{11:11,16:16,3:3,36:36,4:4,7:7,9:9}],13:[function(e,t,n){"use strict";var i={codecs:e(5),mp4:e(24),flv:e(10),mp2t:e(15)};i.mp4.tools=e(31),i.flv.tools=e(30),i.mp2t.tools=e(32),t.exports=i},{10:10,15:15,24:24,30:30,31:31,32:32,5:5}],14:[function(e,t,n){"use strict";var i=e(36),r=e(29),a=function(){a.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new c(0,0),new c(0,1),new c(1,0),new c(1,1)],this.reset(),this.ccStreams_.forEach(function(e){e.on("data",this.trigger.bind(this,"data")),e.on("done",this.trigger.bind(this,"done"))},this)};a.prototype=new i,a.prototype.push=function(e){var t,n,i;if("sei_rbsp"===e.nalUnitType&&(t=r.parseSei(e.escapedRBSP)).payloadType===r.USER_DATA_REGISTERED_ITU_T_T35&&(n=r.parseUserData(t))){if(e.dts<this.latestDts_)return void(this.ignoreNextEqualDts_=!0);if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return void(--this.numSameDts_||(this.ignoreNextEqualDts_=!1));i=r.parseCaptionPackets(e.pts,n),this.captionPackets_=this.captionPackets_.concat(i),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},a.prototype.flush=function(){this.captionPackets_.length?(this.captionPackets_.forEach(function(e,t){e.presortIndex=t}),this.captionPackets_.sort(function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts}),this.captionPackets_.forEach(function(e){e.type<2&&this.dispatchCea608Packet(e)},this),this.captionPackets_.length=0,this.ccStreams_.forEach(function(e){e.flush()},this)):this.ccStreams_.forEach(function(e){e.flush()},this)},a.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(e){e.reset()})},a.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCea608Channel_[e.type]=null:this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},a.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},a.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)},a.prototype.setsTextOrXDSActive=function(e){return 256==(28928&e.ccData)||4138==(30974&e.ccData)||6186==(30974&e.ccData)};var s={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},o=function(e){return null===e?"":(e=s[e]||e,String.fromCharCode(e))},l=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],u=function(){for(var e=[],t=15;t--;)e.push("");return e},c=function(e,t){c.prototype.init.call(this),this.field_=e||0,this.dataChannel_=t||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,n,i,r,a;if((t=32639&e.ccData)!==this.lastControlCode_){if(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),i=t>>>8,r=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),n=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=n,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=u();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=u();else if(t===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=u()),this.mode_="paintOn",this.startPts_=e.pts;else if(this.isSpecialCharacter(i,r))a=o((i=(3&i)<<8)|r),this[this.mode_](e.pts,a),this.column_++;else if(this.isExtCharacter(i,r))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),a=o((i=(3&i)<<8)|r),this[this.mode_](e.pts,a),this.column_++;else if(this.isMidRowCode(i,r))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&r)&&this.addFormatting(e.pts,["i"]),1==(1&r)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(i,r))this.column_+=3&r;else if(this.isPAC(i,r)){var s=l.indexOf(7968&t);"rollUp"===this.mode_&&(s-this.rollUpRows_+1<0&&(s=this.rollUpRows_-1),this.setRollUp(e.pts,s)),s!==this.row_&&(this.clearFormatting(e.pts),this.row_=s),1&r&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(r)&&14==(14&r)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(i)&&(0===r&&(r=null),a=o(i),a+=o(r),this[this.mode_](e.pts,a),this.column_+=a.length)}else this.lastControlCode_=null}};c.prototype=new i,c.prototype.flushDisplayed=function(e){var t=this.displayed_.map(function(e){try{return e.trim()}catch(e){return console.error("Skipping malformed caption."),""}}).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},c.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=u(),this.nonDisplayed_=u(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},c.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},c.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&t>=48&&t<=63},c.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&t>=32&&t<=63},c.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&t>=32&&t<=47},c.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&t>=33&&t<=35},c.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&t>=64&&t<=127},c.prototype.isColorPAC=function(e){return e>=64&&e<=79||e>=96&&e<=127},c.prototype.isNormalChar=function(e){return e>=32&&e<=127},c.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=u(),this.displayed_=u()),void 0!==t&&t!==this.row_)for(var n=0;n<this.rollUpRows_;n++)this.displayed_[t-n]=this.displayed_[this.row_-n],this.displayed_[this.row_-n]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},c.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var n=t.reduce(function(e,t){return e+"<"+t+">"},"");this[this.mode_](e,n)},c.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce(function(e,t){return e+"</"+t+">"},"");this.formatting_=[],this[this.mode_](e,t)}},c.prototype.popOn=function(e,t){var n=this.nonDisplayed_[this.row_];n+=t,this.nonDisplayed_[this.row_]=n},c.prototype.rollUp=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n},c.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<15;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},c.prototype.paintOn=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n},t.exports={CaptionStream:a,Cea608Stream:c}},{29:29,36:36}],15:[function(e,t,n){t.exports=e(16)},{16:16}],16:[function(e,t,n){"use strict";var i,r,a,s=e(36),o=e(14),l=e(19),u=e(20).TimestampRolloverStream,c=e(19);(i=function(){var e=new Uint8Array(188),t=0;i.prototype.init.call(this),this.push=function(n){var i,r=0,a=188;for(t?((i=new Uint8Array(n.byteLength+t)).set(e.subarray(0,t)),i.set(n,t),t=0):i=n;a<i.byteLength;)71!==i[r]||71!==i[a]?(r++,a++):(this.trigger("data",i.subarray(r,a)),r+=188,a+=188);r<i.byteLength&&(e.set(i.subarray(r),0),t=i.byteLength-r)},this.flush=function(){188===t&&71===e[0]&&(this.trigger("data",e),t=0),this.trigger("done")}}).prototype=new s,(r=function(){var e,t,n,i;r.prototype.init.call(this),i=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,e=function(e,i){var r=0;i.payloadUnitStartIndicator&&(r+=e[r]+1),"pat"===i.type?t(e.subarray(r),i):n(e.subarray(r),i)},t=function(e,t){t.section_number=e[7],t.last_section_number=e[8],i.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=i.pmtPid},n=function(e,t){var n,r,a,s;if(1&e[5]){for(i.programMapTable={video:null,audio:null,"timed-metadata":{}},n=(15&e[1])<<8|e[2],r=3+n-4,a=(15&e[10])<<8|e[11],s=12+a;s<r;){var o=e[s],u=(31&e[s+1])<<8|e[s+2];o===l.H264_STREAM_TYPE&&null===i.programMapTable.video?i.programMapTable.video=u:o===l.ADTS_STREAM_TYPE&&null===i.programMapTable.audio?i.programMapTable.audio=u:o===l.METADATA_STREAM_TYPE&&(i.programMapTable["timed-metadata"][u]=o),s+=5+((15&e[s+3])<<8|e[s+4])}t.programMapTable=i.programMapTable}},this.push=function(t){var n={},i=4;if(n.payloadUnitStartIndicator=!!(64&t[1]),n.pid=31&t[1],n.pid<<=8,n.pid|=t[2],(48&t[3])>>>4>1&&(i+=t[i]+1),0===n.pid)n.type="pat",e(t.subarray(i),n),this.trigger("data",n);else if(n.pid===this.pmtPid)for(n.type="pmt",e(t.subarray(i),n),this.trigger("data",n);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([t,i,n]):this.processPes_(t,i,n)},this.processPes_=function(e,t,n){n.pid===this.programMapTable.video?n.streamType=l.H264_STREAM_TYPE:n.pid===this.programMapTable.audio?n.streamType=l.ADTS_STREAM_TYPE:n.streamType=this.programMapTable["timed-metadata"][n.pid],n.type="pes",n.data=e.subarray(t),this.trigger("data",n)}}).prototype=new s,r.STREAM_TYPES={h264:27,adts:15},(a=function(){var e=this,t={data:[],size:0},n={data:[],size:0},i={data:[],size:0},r=function(t,n,i){var r,a=new Uint8Array(t.size),s={type:n},o=0,l=0,u=!1;if(t.data.length&&!(t.size<9)){for(s.trackId=t.data[0].pid,o=0;o<t.data.length;o++)r=t.data[o],a.set(r.data,l),l+=r.data.byteLength;(function(e,t){var n;t.packetLength=6+(e[4]<<8|e[5]),t.dataAlignmentIndicator=0!=(4&e[6]),192&(n=e[7])&&(t.pts=(14&e[9])<<27|(255&e[10])<<20|(254&e[11])<<12|(255&e[12])<<5|(254&e[13])>>>3,t.pts*=4,t.pts+=(6&e[13])>>>1,t.dts=t.pts,64&n&&(t.dts=(14&e[14])<<27|(255&e[15])<<20|(254&e[16])<<12|(255&e[17])<<5|(254&e[18])>>>3,t.dts*=4,t.dts+=(6&e[18])>>>1)),t.data=e.subarray(9+e[8])})(a,s),u="video"===n||s.packetLength<=t.size,(i||u)&&(t.size=0,t.data.length=0),u&&e.trigger("data",s)}};a.prototype.init.call(this),this.push=function(a){({pat:function(){},pes:function(){var e,s;switch(a.streamType){case l.H264_STREAM_TYPE:case c.H264_STREAM_TYPE:e=t,s="video";break;case l.ADTS_STREAM_TYPE:e=n,s="audio";break;case l.METADATA_STREAM_TYPE:e=i,s="timed-metadata";break;default:return}a.payloadUnitStartIndicator&&r(e,s,!0),e.data.push(a),e.size+=a.data.byteLength},pmt:function(){var t={type:"metadata",tracks:[]},n=a.programMapTable;null!==n.video&&t.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+n.video,codec:"avc",type:"video"}),null!==n.audio&&t.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+n.audio,codec:"adts",type:"audio"}),e.trigger("data",t)}})[a.type]()},this.flush=function(){r(t,"video"),r(n,"audio"),r(i,"timed-metadata"),this.trigger("done")}}).prototype=new s;var d={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:i,TransportParseStream:r,ElementaryStream:a,TimestampRolloverStream:u,CaptionStream:o.CaptionStream,Cea608Stream:o.Cea608Stream,MetadataStream:e(17)};for(var h in l)l.hasOwnProperty(h)&&(d[h]=l[h]);t.exports=d},{14:14,17:17,19:19,20:20,36:36}],17:[function(e,t,n){"use strict";var i,r=e(36),a=e(19),s=function(e,t,n){var i,r="";for(i=t;i<n;i++)r+="%"+("00"+e[i].toString(16)).slice(-2);return r},o=function(e,t,n){return decodeURIComponent(s(e,t,n))},l=function(e,t,n){return unescape(s(e,t,n))},u=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},c={TXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=o(e.data,1,t),e.value=o(e.data,t+1,e.data.length).replace(/\0*$/,"");break}e.data=e.value}},WXXX:function(e){var t;if(3===e.data[0])for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=o(e.data,1,t),e.url=o(e.data,t+1,e.data.length);break}},PRIV:function(e){var t;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=l(e.data,0,t);break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}};(i=function(e){var t,n={debug:!(!e||!e.debug),descriptor:e&&e.descriptor},r=0,s=[],o=0;if(i.prototype.init.call(this),this.dispatchType=a.METADATA_STREAM_TYPE.toString(16),n.descriptor)for(t=0;t<n.descriptor.length;t++)this.dispatchType+=("00"+n.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,i,a,l,d,h;if("timed-metadata"===e.type){if(e.dataAlignmentIndicator&&(o=0,s.length=0),0===s.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))return void(n.debug&&console.log("Skipping unrecognized metadata packet"));if(s.push(e),o+=e.data.byteLength,1===s.length&&(r=u(e.data.subarray(6,10)),r+=10),!(o<r)){for(t={data:new Uint8Array(r),frames:[],pts:s[0].pts,dts:s[0].dts},d=0;d<r;)t.data.set(s[0].data.subarray(0,r-d),d),d+=s[0].data.byteLength,o-=s[0].data.byteLength,s.shift();i=10,64&t.data[5]&&(i+=4,i+=u(t.data.subarray(10,14)),r-=u(t.data.subarray(16,20)));do{if((a=u(t.data.subarray(i+4,i+8)))<1)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");if(h=String.fromCharCode(t.data[i],t.data[i+1],t.data[i+2],t.data[i+3]),(l={id:h,data:t.data.subarray(i+10,i+a+10)}).key=l.id,c[l.id]&&(c[l.id](l),"com.apple.streaming.transportStreamTimestamp"===l.owner)){var f=l.data,p=(1&f[3])<<30|f[4]<<22|f[5]<<14|f[6]<<6|f[7]>>>2;p*=4,p+=3&f[7],l.timeStamp=p,void 0===t.pts&&void 0===t.dts&&(t.pts=l.timeStamp,t.dts=l.timeStamp),this.trigger("timestamp",l)}t.frames.push(l),i+=10,i+=a}while(i<r);this.trigger("data",t)}}}}).prototype=new r,t.exports=i},{19:19,36:36}],18:[function(e,t,n){"use strict";var i=e(19),r=function(e){var t=31&e[1];return t<<=8,t|=e[2]},a=function(e){return!!(64&e[1])},s=function(e){var t=0;return(48&e[3])>>>4>1&&(t+=e[4]+1),t},o=function(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}};t.exports={parseType:function(e,t){var n=r(e);return 0===n?"pat":n===t?"pmt":t?"pes":null},parsePat:function(e){var t=a(e),n=4+s(e);return t&&(n+=e[n]+1),(31&e[n+10])<<8|e[n+11]},parsePmt:function(e){var t={},n=a(e),i=4+s(e);if(n&&(i+=e[i]+1),1&e[i+5]){var r,o;r=(15&e[i+1])<<8|e[i+2],o=3+r-4;for(var l=12+((15&e[i+10])<<8|e[i+11]);l<o;){var u=i+l;t[(31&e[u+1])<<8|e[u+2]]=e[u],l+=5+((15&e[u+3])<<8|e[u+4])}return t}},parsePayloadUnitStartIndicator:a,parsePesType:function(e,t){switch(t[r(e)]){case i.H264_STREAM_TYPE:return"video";case i.ADTS_STREAM_TYPE:return"audio";case i.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(e){if(!a(e))return null;var t=4+s(e);if(t>=e.byteLength)return null;var n,i=null;return 192&(n=e[t+7])&&((i={}).pts=(14&e[t+9])<<27|(255&e[t+10])<<20|(254&e[t+11])<<12|(255&e[t+12])<<5|(254&e[t+13])>>>3,i.pts*=4,i.pts+=(6&e[t+13])>>>1,i.dts=i.pts,64&n&&(i.dts=(14&e[t+14])<<27|(255&e[t+15])<<20|(254&e[t+16])<<12|(255&e[t+17])<<5|(254&e[t+18])>>>3,i.dts*=4,i.dts+=(6&e[t+18])>>>1)),i},videoPacketContainsKeyFrame:function(e){for(var t=4+s(e),n=e.subarray(t),i=0,r=0,a=!1;r<n.byteLength-3;r++)if(1===n[r+2]){i=r+5;break}for(;i<n.byteLength;)switch(n[i]){case 0:if(0!==n[i-1]){i+=2;break}if(0!==n[i-2]){i++;break}r+3!==i-2&&"slice_layer_without_partitioning_rbsp_idr"===o(31&n[r+3])&&(a=!0);do{i++}while(1!==n[i]&&i<n.length);r=i-2,i+=3;break;case 1:if(0!==n[i-1]||0!==n[i-2]){i+=3;break}"slice_layer_without_partitioning_rbsp_idr"===o(31&n[r+3])&&(a=!0),r=i-2,i+=3;break;default:i+=3}return n=n.subarray(r),i-=r,r=0,n&&n.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===o(31&n[r+3])&&(a=!0),a}}},{19:19}],19:[function(e,t,n){"use strict";t.exports={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21}},{}],20:[function(e,t,n){"use strict";var i=e(36),r=function(e,t){var n=1;for(e>t&&(n=-1);Math.abs(t-e)>4294967296;)e+=8589934592*n;return e},a=function(e){var t,n;a.prototype.init.call(this),this.type_=e,this.push=function(e){e.type===this.type_&&(void 0===n&&(n=e.dts),e.dts=r(e.dts,n),e.pts=r(e.pts,n),t=e.dts,this.trigger("data",e))},this.flush=function(){n=t,this.trigger("done")},this.discontinuity=function(){n=void 0,t=void 0}};a.prototype=new i,t.exports={TimestampRolloverStream:a,handleRollover:r}},{36:36}],21:[function(e,t,n){var i=e(6),r=e(34);t.exports={prefixWithSilence:function(e,t,n,a){var s,o,l,u=0,c=0,d=0,h=0;if(t.length&&(s=r.audioTsToVideoTs(e.baseMediaDecodeTime,e.samplerate),u=Math.ceil(9e4/(e.samplerate/1024)),n&&a&&(c=s-Math.max(n,a),d=Math.floor(c/u),h=d*u),!(d<1||h>45e3))){for((o=i[e.samplerate])||(o=t[0].data),l=0;l<d;l++)t.splice(l,0,{data:o});e.baseMediaDecodeTime-=Math.floor(r.videoTsToAudioTs(h,e.samplerate))}},trimAdtsFramesByEarliestDts:function(e,t,n){return t.minSegmentDts>=n?e:(t.minSegmentDts=1/0,e.filter(function(e){return e.dts>=n&&(t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!0)}))},generateSampleTable:function(e){var t,n,i=[];for(t=0;t<e.length;t++)n=e[t],i.push({size:n.data.byteLength,duration:1024});return i},concatenateFrameData:function(e){var t,n,i=0,r=new Uint8Array(function(e){var t,n,i=0;for(t=0;t<e.length;t++)n=e[t],i+=n.data.byteLength;return i}(e));for(t=0;t<e.length;t++)n=e[t],r.set(n.data,i),i+=n.data.byteLength;return r}}},{34:34,6:6}],22:[function(e,t,n){"use strict";var i=e(29).discardEmulationPreventionBytes,r=e(14).CaptionStream,a=e(26),s=e(31),o=function(e,t){for(var n=e,i=0;i<t.length;i++){var r=t[i];if(n<r.size)return r;n-=r.size}return null},l=function(e,t,n){var r,a,s,l,u=new DataView(e.buffer,e.byteOffset,e.byteLength),c=[];for(a=0;a+4<e.length;a+=s)if(s=u.getUint32(a),a+=4,!(s<=0))switch(31&e[a]){case 6:var d=e.subarray(a+1,a+1+s),h=o(a,t);r={nalUnitType:"sei_rbsp",size:s,data:d,escapedRBSP:i(d),trackId:n},h?(r.pts=h.pts,r.dts=h.dts,l=h):(r.pts=l.pts,r.dts=l.dts),c.push(r)}return c},u=function(e,t){var n=a.findBox(e,["moof","traf"]),i=a.findBox(e,["mdat"]),r={},o=[];return i.forEach(function(e,t){var i=n[t];o.push({mdat:e,traf:i})}),o.forEach(function(e){var n,i,o=e.mdat,u=e.traf,c=a.findBox(u,["tfhd"]),d=s.parseTfhd(c[0]),h=d.trackId,f=a.findBox(u,["tfdt"]),p=f.length>0?s.parseTfdt(f[0]).baseMediaDecodeTime:0,m=a.findBox(u,["trun"]);t===h&&m.length>0&&(n=function(e,t,n){var i=t,r=n.defaultSampleDuration||0,a=n.defaultSampleSize||0,o=n.trackId,l=[];return e.forEach(function(e){var t=s.parseTrun(e),n=t.samples;n.forEach(function(e){void 0===e.duration&&(e.duration=r),void 0===e.size&&(e.size=a),e.trackId=o,e.dts=i,void 0===e.compositionTimeOffset&&(e.compositionTimeOffset=0),e.pts=i+e.compositionTimeOffset,i+=e.duration}),l=l.concat(n)}),l}(m,p,d),i=l(o,n,h),r[h]||(r[h]=[]),r[h]=r[h].concat(i))}),r};t.exports=function(){var e,t,n,i,a,s=!1;this.isInitialized=function(){return s},this.init=function(){e=new r,s=!0,e.on("data",function(e){e.startTime=e.startPts/i,e.endTime=e.endPts/i,a.captions.push(e),a.captionStreams[e.stream]=!0})},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&"object"==typeof t&&0===Object.keys(t).length||n===e[0]&&i===t[n])},this.parse=function(e,r,s){var o;if(!this.isInitialized())return null;if(!r||!s)return null;if(this.isNewInit(r,s))n=r[0],i=s[n];else if(!n||!i)return t.push(e),null;for(;t.length>0;){var l=t.shift();this.parse(l,r,s)}return null!==(o=function(e,t,n){return t?{seiNals:u(e,t)[t],timescale:n}:null}(e,n,i))&&o.seiNals?(this.pushNals(o.seiNals),this.flushStream(),a):null},this.pushNals=function(t){if(!this.isInitialized()||!t||0===t.length)return null;t.forEach(function(t){e.push(t)})},this.flushStream=function(){if(!this.isInitialized())return null;e.flush()},this.clearParsedCaptions=function(){a.captions=[],a.captionStreams={}},this.resetCaptionStream=function(){if(!this.isInitialized())return null;e.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){t=[],n=null,i=null,a?this.clearParsedCaptions():a={captions:[],captionStreams:{}},this.resetCaptionStream()},this.reset()}},{14:14,26:26,29:29,31:31}],23:[function(e,t,n){var i=function(e,t){var n={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return n.dataOffset=t,n.compositionTimeOffset=e.pts-e.dts,n.duration=e.duration,n.size=4*e.length,n.size+=e.byteLength,e.keyFrame&&(n.flags.dependsOn=2,n.flags.isNonSyncSample=0),n};t.exports={groupNalsIntoFrames:function(e){var t,n,i=[],r=[];for(i.byteLength=0,t=0;t<e.length;t++)"access_unit_delimiter_rbsp"===(n=e[t]).nalUnitType?(i.length&&(i.duration=n.dts-i.dts,r.push(i)),(i=[n]).byteLength=n.data.byteLength,i.pts=n.pts,i.dts=n.dts):("slice_layer_without_partitioning_rbsp_idr"===n.nalUnitType&&(i.keyFrame=!0),i.duration=n.dts-i.dts,i.byteLength+=n.data.byteLength,i.push(n));return r.length&&(!i.duration||i.duration<=0)&&(i.duration=r[r.length-1].duration),r.push(i),r},groupFramesIntoGops:function(e){var t,n,i=[],r=[];for(i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=e[0].pts,i.dts=e[0].dts,r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,t=0;t<e.length;t++)(n=e[t]).keyFrame?(i.length&&(r.push(i),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration),(i=[n]).nalCount=n.length,i.byteLength=n.byteLength,i.pts=n.pts,i.dts=n.dts,i.duration=n.duration):(i.duration+=n.duration,i.nalCount+=n.length,i.byteLength+=n.byteLength,i.push(n));return r.length&&i.duration<=0&&(i.duration=r[r.length-1].duration),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration,r.push(i),r},extendFirstKeyFrame:function(e){var t;return!e[0][0].keyFrame&&e.length>1&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e},generateSampleTable:function(e,t){var n,r,a,s,o,l=t||0,u=[];for(n=0;n<e.length;n++)for(s=e[n],r=0;r<s.length;r++)o=s[r],a=i(o,l),l+=a.size,u.push(a);return u},concatenateNalData:function(e){var t,n,i,r,a,s,o=0,l=e.byteLength,u=e.nalCount,c=new Uint8Array(l+4*u),d=new DataView(c.buffer);for(t=0;t<e.length;t++)for(r=e[t],n=0;n<r.length;n++)for(a=r[n],i=0;i<a.length;i++)s=a[i],d.setUint32(o,s.data.byteLength),o+=4,c.set(s.data,o),o+=s.data.byteLength;return c}}},{}],24:[function(e,t,n){t.exports={generator:e(25),probe:e(26),Transmuxer:e(28).Transmuxer,AudioSegmentStream:e(28).AudioSegmentStream,VideoSegmentStream:e(28).VideoSegmentStream,CaptionParser:e(22)}},{22:22,25:25,26:26,28:28}],25:[function(e,t,n){"use strict";var i,r,a,s,o,l,u,c,d,h,f,p,m,v,g,y,_,b,w,E,S,T,k,C,I,A,x,L,R,P,D,O,M,N,U,F,B=Math.pow(2,32)-1;!function(){var e;if(k={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(e in k)k.hasOwnProperty(e)&&(k[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);C=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),A=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),I=new Uint8Array([0,0,0,1]),x=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),L=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),R={video:x,audio:L},O=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),D=new Uint8Array([0,0,0,0,0,0,0,0]),M=new Uint8Array([0,0,0,0,0,0,0,0]),N=M,U=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),F=M,P=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),i=function(e){var t,n,i=[],r=0;for(t=1;t<arguments.length;t++)i.push(arguments[t]);for(t=i.length;t--;)r+=i[t].byteLength;for(n=new Uint8Array(r+8),new DataView(n.buffer,n.byteOffset,n.byteLength).setUint32(0,n.byteLength),n.set(e,4),t=0,r=8;t<i.length;t++)n.set(i[t],r),r+=i[t].byteLength;return n},r=function(){return i(k.dinf,i(k.dref,O))},a=function(e){return i(k.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},s=function(){return i(k.ftyp,C,I,C,A)},y=function(e){return i(k.hdlr,R[e])},o=function(e){return i(k.mdat,e)},g=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(t[12]=e.samplerate>>>24&255,t[13]=e.samplerate>>>16&255,t[14]=e.samplerate>>>8&255,t[15]=255&e.samplerate),i(k.mdhd,t)},v=function(e){return i(k.mdia,g(e),y(e.type),u(e))},l=function(e){return i(k.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},u=function(e){return i(k.minf,"video"===e.type?i(k.vmhd,P):i(k.smhd,D),r(),b(e))},c=function(e,t){for(var n=[],r=t.length;r--;)n[r]=E(t[r]);return i.apply(null,[k.moof,l(e)].concat(n))},d=function(e){for(var t=e.length,n=[];t--;)n[t]=p(e[t]);return i.apply(null,[k.moov,f(4294967295)].concat(n).concat(h(e)))},h=function(e){for(var t=e.length,n=[];t--;)n[t]=S(e[t]);return i.apply(null,[k.mvex].concat(n))},f=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return i(k.mvhd,t)},_=function(e){var t,n,r=e.samples||[],a=new Uint8Array(4+r.length);for(n=0;n<r.length;n++)t=r[n].flags,a[n+4]=t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;return i(k.sdtp,a)},b=function(e){return i(k.stbl,w(e),i(k.stts,F),i(k.stsc,N),i(k.stsz,U),i(k.stco,M))},function(){var e,t;w=function(n){return i(k.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===n.type?e(n):t(n))},e=function(e){var t,n=e.sps||[],r=e.pps||[],a=[],s=[];for(t=0;t<n.length;t++)a.push((65280&n[t].byteLength)>>>8),a.push(255&n[t].byteLength),a=a.concat(Array.prototype.slice.call(n[t]));for(t=0;t<r.length;t++)s.push((65280&r[t].byteLength)>>>8),s.push(255&r[t].byteLength),s=s.concat(Array.prototype.slice.call(r[t]));return i(k.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),i(k.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([n.length]).concat(a).concat([r.length]).concat(s))),i(k.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))},t=function(e){return i(k.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),a(e))}}(),m=function(e){var t=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return i(k.tkhd,t)},E=function(e){var t,n,r,a,s,o;return t=i(k.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),s=Math.floor(e.baseMediaDecodeTime/(B+1)),o=Math.floor(e.baseMediaDecodeTime%(B+1)),n=i(k.tfdt,new Uint8Array([1,0,0,0,s>>>24&255,s>>>16&255,s>>>8&255,255&s,o>>>24&255,o>>>16&255,o>>>8&255,255&o])),"audio"===e.type?(r=T(e,92),i(k.traf,t,n,r)):(a=_(e),r=T(e,a.length+92),i(k.traf,t,n,r,a))},p=function(e){return e.duration=e.duration||4294967295,i(k.trak,m(e),v(e))},S=function(e){var t=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(t[t.length-1]=0),i(k.trex,t)},function(){var e,t,n;n=function(e,t){var n=0,i=0,r=0,a=0;return e.length&&(void 0!==e[0].duration&&(n=1),void 0!==e[0].size&&(i=2),void 0!==e[0].flags&&(r=4),void 0!==e[0].compositionTimeOffset&&(a=8)),[0,0,n|i|r|a,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},t=function(e,t){var r,a,s,o;for(a=e.samples||[],t+=20+16*a.length,r=n(a,t),o=0;o<a.length;o++)s=a[o],r=r.concat([(4278190080&s.duration)>>>24,(16711680&s.duration)>>>16,(65280&s.duration)>>>8,255&s.duration,(4278190080&s.size)>>>24,(16711680&s.size)>>>16,(65280&s.size)>>>8,255&s.size,s.flags.isLeading<<2|s.flags.dependsOn,s.flags.isDependedOn<<6|s.flags.hasRedundancy<<4|s.flags.paddingValue<<1|s.flags.isNonSyncSample,61440&s.flags.degradationPriority,15&s.flags.degradationPriority,(4278190080&s.compositionTimeOffset)>>>24,(16711680&s.compositionTimeOffset)>>>16,(65280&s.compositionTimeOffset)>>>8,255&s.compositionTimeOffset]);return i(k.trun,new Uint8Array(r))},e=function(e,t){var r,a,s,o;for(a=e.samples||[],t+=20+8*a.length,r=n(a,t),o=0;o<a.length;o++)s=a[o],r=r.concat([(4278190080&s.duration)>>>24,(16711680&s.duration)>>>16,(65280&s.duration)>>>8,255&s.duration,(4278190080&s.size)>>>24,(16711680&s.size)>>>16,(65280&s.size)>>>8,255&s.size]);return i(k.trun,new Uint8Array(r))},T=function(n,i){return"audio"===n.type?e(n,i):t(n,i)}}(),t.exports={ftyp:s,mdat:o,moof:c,moov:d,initSegment:function(e){var t,n=s(),i=d(e);return(t=new Uint8Array(n.byteLength+i.byteLength)).set(n),t.set(i,n.byteLength),t}}},{}],26:[function(e,t,n){"use strict";var i,r,a,s,o,l=e(33).toUnsigned;i=function(e,t){var n,a,s,o,u,c=[];if(!t.length)return null;for(n=0;n<e.byteLength;)a=l(e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3]),s=r(e.subarray(n+4,n+8)),o=a>1?n+a:e.byteLength,s===t[0]&&(1===t.length?c.push(e.subarray(n+8,o)):(u=i(e.subarray(n+8,o),t.slice(1))).length&&(c=c.concat(u))),n=o;return c},r=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),t+=String.fromCharCode(e[2]),t+=String.fromCharCode(e[3])},a=function(e){return i(e,["moov","trak"]).reduce(function(e,t){var n,r,a,s,o;return(n=i(t,["tkhd"])[0])?(r=n[0],s=l(n[a=0===r?12:20]<<24|n[a+1]<<16|n[a+2]<<8|n[a+3]),(o=i(t,["mdia","mdhd"])[0])?(r=o[0],a=0===r?12:20,e[s]=l(o[a]<<24|o[a+1]<<16|o[a+2]<<8|o[a+3]),e):null):null},{})},s=function(e,t){var n,r,a;return n=i(t,["moof","traf"]),r=[].concat.apply([],n.map(function(t){return i(t,["tfhd"]).map(function(n){var r,a;return r=l(n[4]<<24|n[5]<<16|n[6]<<8|n[7]),a=e[r]||9e4,(i(t,["tfdt"]).map(function(e){var t,n;return t=e[0],n=l(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),1===t&&(n*=Math.pow(2,32),n+=l(e[8]<<24|e[9]<<16|e[10]<<8|e[11])),n})[0]||1/0)/a})})),a=Math.min.apply(null,r),isFinite(a)?a:0},o=function(e){var t=i(e,["moov","trak"]),n=[];return t.forEach(function(e){var t=i(e,["mdia","hdlr"]),a=i(e,["tkhd"]);t.forEach(function(e,t){var i,s,o,l=r(e.subarray(8,12)),u=a[t];"vide"===l&&(i=new DataView(u.buffer,u.byteOffset,u.byteLength),s=i.getUint8(0),o=0===s?i.getUint32(12):i.getUint32(20),n.push(o))})}),n},t.exports={findBox:i,parseType:r,timescale:a,startTime:s,videoTrackIds:o}},{33:33}],27:[function(e,t,n){t.exports={clearDtsInfo:function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},calculateTrackBaseMediaDecodeTime:function(e,t){var n,i,r=e.minSegmentDts;return t||(r-=e.timelineStartInfo.dts),n=e.timelineStartInfo.baseMediaDecodeTime,n+=r,n=Math.max(0,n),"audio"===e.type&&(i=e.samplerate/9e4,n*=i,n=Math.floor(n)),n},collectDtsInfo:function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))}}},{}],28:[function(e,t,n){"use strict";var i,r,a,s,o=e(36),l=e(25),u=e(23),c=e(21),d=e(27),h=e(16),f=e(3),p=e(4).H264Stream,m=e(1),v=e(2).isLikelyAacData,g=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],y=["width","height","profileIdc","levelIdc","profileCompatibility"],_=function(e,t){var n;if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},b=function(e,t,n,i,r,a){return{start:{dts:e,pts:e+(n-t)},end:{dts:e+(i-t),pts:e+(r-n)},prependedContentDuration:a,baseMediaDecodeTime:e}};(r=function(e,t){var n=[],i=0,a=0,s=0,o=1/0;t=t||{},r.prototype.init.call(this),this.push=function(t){d.collectDtsInfo(e,t),e&&g.forEach(function(n){e[n]=t[n]}),n.push(t)},this.setEarliestDts=function(t){a=t-e.timelineStartInfo.baseMediaDecodeTime},this.setVideoBaseMediaDecodeTime=function(e){o=e},this.setAudioAppendStart=function(e){s=e},this.flush=function(){var r,u,h,f;0!==n.length?(r=c.trimAdtsFramesByEarliestDts(n,e,a),e.baseMediaDecodeTime=d.calculateTrackBaseMediaDecodeTime(e,t.keepOriginalTimestamps),c.prefixWithSilence(e,r,s,o),e.samples=c.generateSampleTable(r),h=l.mdat(c.concatenateFrameData(r)),n=[],u=l.moof(i,[e]),f=new Uint8Array(u.byteLength+h.byteLength),i++,f.set(u),f.set(h,u.byteLength),d.clearDtsInfo(e),this.trigger("data",{track:e,boxes:f}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")}}).prototype=new o,(i=function(e,t){var n,r,a=0,s=[],o=[];t=t||{},i.prototype.init.call(this),delete e.minPTS,this.gopCache_=[],this.push=function(t){d.collectDtsInfo(e,t),"seq_parameter_set_rbsp"!==t.nalUnitType||n||(n=t.config,e.sps=[t.data],y.forEach(function(t){e[t]=n[t]},this)),"pic_parameter_set_rbsp"!==t.nalUnitType||r||(r=t.data,e.pps=[t.data]),s.push(t)},this.flush=function(){for(var n,i,r,c,h,f,p,m,v=0;s.length&&"access_unit_delimiter_rbsp"!==s[0].nalUnitType;)s.shift();if(0===s.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(n=u.groupNalsIntoFrames(s),(r=u.groupFramesIntoGops(n))[0][0].keyFrame||((i=this.getGopForFusion_(s[0],e))?(v=i.duration,r.unshift(i),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.pts=i.pts,r.dts=i.dts,r.duration+=i.duration):r=u.extendFirstKeyFrame(r)),o.length){var g;if(!(g=t.alignGopsAtEnd?this.alignGopsAtEnd_(r):this.alignGopsAtStart_(r)))return this.gopCache_.unshift({gop:r.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),s=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");d.clearDtsInfo(e),r=g}d.collectDtsInfo(e,r),e.samples=u.generateSampleTable(r),h=l.mdat(u.concatenateNalData(r)),e.baseMediaDecodeTime=d.calculateTrackBaseMediaDecodeTime(e,t.keepOriginalTimestamps),this.trigger("processedGopsInfo",r.map(function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}})),p=r[0],m=r[r.length-1],this.trigger("segmentTimingInfo",b(e.baseMediaDecodeTime,p.dts,p.pts,m.dts+m.duration,m.pts+m.duration,v)),this.gopCache_.unshift({gop:r.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),s=[],this.trigger("baseMediaDecodeTime",e.baseMediaDecodeTime),this.trigger("timelineStartInfo",e.timelineStartInfo),c=l.moof(a,[e]),f=new Uint8Array(c.byteLength+h.byteLength),a++,f.set(c),f.set(h,c.byteLength),this.trigger("data",{track:e,boxes:f}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.resetStream_=function(){d.clearDtsInfo(e),n=void 0,r=void 0},this.getGopForFusion_=function(t){var n,i,r,a,s,o=1/0;for(s=0;s<this.gopCache_.length;s++)a=this.gopCache_[s],r=a.gop,e.pps&&_(e.pps[0],a.pps[0])&&e.sps&&_(e.sps[0],a.sps[0])&&(r.dts<e.timelineStartInfo.dts||(n=t.dts-r.dts-r.duration)>=-1e4&&n<=45e3&&(!i||o>n)&&(i=a,o=n));return i?i.gop:null},this.alignGopsAtStart_=function(e){var t,n,i,r,a,s,l,u;for(a=e.byteLength,s=e.nalCount,l=e.duration,t=n=0;t<o.length&&n<e.length&&(i=o[t],r=e[n],i.pts!==r.pts);)r.pts>i.pts?t++:(n++,a-=r.byteLength,s-=r.nalCount,l-=r.duration);return 0===n?e:n===e.length?null:((u=e.slice(n)).byteLength=a,u.duration=l,u.nalCount=s,u.pts=u[0].pts,u.dts=u[0].dts,u)},this.alignGopsAtEnd_=function(e){var t,n,i,r,a,s,l;for(t=o.length-1,n=e.length-1,a=null,s=!1;t>=0&&n>=0;){if(i=o[t],r=e[n],i.pts===r.pts){s=!0;break}i.pts>r.pts?t--:(t===o.length-1&&(a=n),n--)}if(!s&&null===a)return null;if(0===(l=s?n:a))return e;var u=e.slice(l),c=u.reduce(function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e},{byteLength:0,duration:0,nalCount:0});return u.byteLength=c.byteLength,u.duration=c.duration,u.nalCount=c.nalCount,u.pts=u[0].pts,u.dts=u[0].dts,u},this.alignGopsWith=function(e){o=e}}).prototype=new o,(s=function(e,t){this.numberOfTracks=0,this.metadataStream=t,void 0!==(e=e||{}).remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,"boolean"==typeof e.keepOriginalTimestamps&&(this.keepOriginalTimestamps=e.keepOriginalTimestamps),this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,s.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBoxes.push(e.boxes),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track),void("audio"===e.track.type&&(this.audioTrack=e.track)))}}).prototype=new o,s.prototype.flush=function(e){var t,n,i,r,a=0,s={captions:[],captionStreams:{},metadata:[],info:{}},o=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return void(++this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}for(this.videoTrack?(o=this.videoTrack.timelineStartInfo.pts,y.forEach(function(e){s.info[e]=this.videoTrack[e]},this)):this.audioTrack&&(o=this.audioTrack.timelineStartInfo.pts,g.forEach(function(e){s.info[e]=this.audioTrack[e]},this)),1===this.pendingTracks.length?s.type=this.pendingTracks[0].type:s.type="combined",this.emittedTracks+=this.pendingTracks.length,i=l.initSegment(this.pendingTracks),s.initSegment=new Uint8Array(i.byteLength),s.initSegment.set(i),s.data=new Uint8Array(this.pendingBytes),r=0;r<this.pendingBoxes.length;r++)s.data.set(this.pendingBoxes[r],a),a+=this.pendingBoxes[r].byteLength;for(r=0;r<this.pendingCaptions.length;r++)(t=this.pendingCaptions[r]).startTime=t.startPts,this.keepOriginalTimestamps||(t.startTime-=o),t.startTime/=9e4,t.endTime=t.endPts,this.keepOriginalTimestamps||(t.endTime-=o),t.endTime/=9e4,s.captionStreams[t.stream]=!0,s.captions.push(t);for(r=0;r<this.pendingMetadata.length;r++)(n=this.pendingMetadata[r]).cueTime=n.pts,this.keepOriginalTimestamps||(n.cueTime-=o),n.cueTime/=9e4,s.metadata.push(n);s.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",s),this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},(a=function(e){var t,n,o=this,l=!0;a.prototype.init.call(this),e=e||{},this.baseMediaDecodeTime=e.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var t={};this.transmuxPipeline_=t,t.type="aac",t.metadataStream=new h.MetadataStream,t.aacStream=new m,t.audioTimestampRolloverStream=new h.TimestampRolloverStream("audio"),t.timedMetadataTimestampRolloverStream=new h.TimestampRolloverStream("timed-metadata"),t.adtsStream=new f,t.coalesceStream=new s(e,t.metadataStream),t.headOfPipeline=t.aacStream,t.aacStream.pipe(t.audioTimestampRolloverStream).pipe(t.adtsStream),t.aacStream.pipe(t.timedMetadataTimestampRolloverStream).pipe(t.metadataStream).pipe(t.coalesceStream),t.metadataStream.on("timestamp",function(e){t.aacStream.setTimestamp(e.timeStamp)}),t.aacStream.on("data",function(i){"timed-metadata"!==i.type||t.audioSegmentStream||(n=n||{timelineStartInfo:{baseMediaDecodeTime:o.baseMediaDecodeTime},codec:"adts",type:"audio"},t.coalesceStream.numberOfTracks++,t.audioSegmentStream=new r(n,e),t.adtsStream.pipe(t.audioSegmentStream).pipe(t.coalesceStream))}),t.coalesceStream.on("data",this.trigger.bind(this,"data")),t.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var a={};this.transmuxPipeline_=a,a.type="ts",a.metadataStream=new h.MetadataStream,a.packetStream=new h.TransportPacketStream,a.parseStream=new h.TransportParseStream,a.elementaryStream=new h.ElementaryStream,a.videoTimestampRolloverStream=new h.TimestampRolloverStream("video"),a.audioTimestampRolloverStream=new h.TimestampRolloverStream("audio"),a.timedMetadataTimestampRolloverStream=new h.TimestampRolloverStream("timed-metadata"),a.adtsStream=new f,a.h264Stream=new p,a.captionStream=new h.CaptionStream,a.coalesceStream=new s(e,a.metadataStream),a.headOfPipeline=a.packetStream,a.packetStream.pipe(a.parseStream).pipe(a.elementaryStream),a.elementaryStream.pipe(a.videoTimestampRolloverStream).pipe(a.h264Stream),a.elementaryStream.pipe(a.audioTimestampRolloverStream).pipe(a.adtsStream),a.elementaryStream.pipe(a.timedMetadataTimestampRolloverStream).pipe(a.metadataStream).pipe(a.coalesceStream),a.h264Stream.pipe(a.captionStream).pipe(a.coalesceStream),a.elementaryStream.on("data",function(s){var l;if("metadata"===s.type){for(l=s.tracks.length;l--;)t||"video"!==s.tracks[l].type?n||"audio"!==s.tracks[l].type||((n=s.tracks[l]).timelineStartInfo.baseMediaDecodeTime=o.baseMediaDecodeTime):(t=s.tracks[l]).timelineStartInfo.baseMediaDecodeTime=o.baseMediaDecodeTime;t&&!a.videoSegmentStream&&(a.coalesceStream.numberOfTracks++,a.videoSegmentStream=new i(t,e),a.videoSegmentStream.on("timelineStartInfo",function(e){n&&(n.timelineStartInfo=e,a.audioSegmentStream.setEarliestDts(e.dts))}),a.videoSegmentStream.on("processedGopsInfo",o.trigger.bind(o,"gopInfo")),a.videoSegmentStream.on("segmentTimingInfo",o.trigger.bind(o,"videoSegmentTimingInfo")),a.videoSegmentStream.on("baseMediaDecodeTime",function(e){n&&a.audioSegmentStream.setVideoBaseMediaDecodeTime(e)}),a.h264Stream.pipe(a.videoSegmentStream).pipe(a.coalesceStream)),n&&!a.audioSegmentStream&&(a.coalesceStream.numberOfTracks++,a.audioSegmentStream=new r(n,e),a.adtsStream.pipe(a.audioSegmentStream).pipe(a.coalesceStream))}}),a.coalesceStream.on("data",this.trigger.bind(this,"data")),a.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(i){var r=this.transmuxPipeline_;e.keepOriginalTimestamps||(this.baseMediaDecodeTime=i),n&&(n.timelineStartInfo.dts=void 0,n.timelineStartInfo.pts=void 0,d.clearDtsInfo(n),e.keepOriginalTimestamps||(n.timelineStartInfo.baseMediaDecodeTime=i),r.audioTimestampRolloverStream&&r.audioTimestampRolloverStream.discontinuity()),t&&(r.videoSegmentStream&&(r.videoSegmentStream.gopCache_=[],r.videoTimestampRolloverStream.discontinuity()),t.timelineStartInfo.dts=void 0,t.timelineStartInfo.pts=void 0,d.clearDtsInfo(t),r.captionStream.reset(),e.keepOriginalTimestamps||(t.timelineStartInfo.baseMediaDecodeTime=i)),r.timedMetadataTimestampRolloverStream&&r.timedMetadataTimestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){n&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.alignGopsWith=function(e){t&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.push=function(e){if(l){var t=v(e);t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),l=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){l=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new o,t.exports={Transmuxer:a,VideoSegmentStream:i,AudioSegmentStream:r,AUDIO_PROPERTIES:g,VIDEO_PROPERTIES:y,generateVideoSegmentTimingInfo:b}},{1:1,16:16,2:2,21:21,23:23,25:25,27:27,3:3,36:36,4:4}],29:[function(e,t,n){"use strict";t.exports={parseSei:function(e){for(var t=0,n={payloadType:-1,payloadSize:0},i=0,r=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)i+=255,t++;for(i+=e[t++];255===e[t];)r+=255,t++;if(r+=e[t++],!n.payload&&4===i){n.payloadType=i,n.payloadSize=r,n.payload=e.subarray(t,t+r);break}t+=r,i=0,r=0}return n},parseUserData:function(e){return 181!==e.payload[0]?null:49!=(e.payload[1]<<8|e.payload[2])?null:"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])?null:3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)},parseCaptionPackets:function(e,t){var n,i,r,a,s=[];if(!(64&t[0]))return s;for(i=31&t[0],n=0;n<i;n++)a={type:3&t[2+(r=3*n)],pts:e},4&t[r+2]&&(a.ccData=t[r+3]<<8|t[r+4],s.push(a));return s},discardEmulationPreventionBytes:function(e){for(var t,n,i=e.byteLength,r=[],a=1;a<i-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return e;t=i-r.length,n=new Uint8Array(t);var s=0;for(a=0;a<t;s++,a++)s===r[0]&&(s++,r.shift()),n[a]=e[s];return n},USER_DATA_REGISTERED_ITU_T_T35:4}},{}],30:[function(e,t,n){"use strict";var i={8:"audio",9:"video",18:"metadata"},r=function(e){return"0x"+("00"+e.toString(16)).slice(-2).toUpperCase()},a=function(e){for(var t,n=[];e.byteLength>0;)t=0,n.push(r(e[t++])),e=e.subarray(1);return n.join(" ")},s=function(e,t){var n=e[0]&parseInt("00001111",2);return(t=t||{}).frameType=["Unknown","Keyframe (for AVC, a seekable frame)","Inter frame (for AVC, a nonseekable frame)","Disposable inter frame (H.263 only)","Generated keyframe (reserved for server use only)","Video info/command frame"][(e[0]&parseInt("11110000",2))>>>4],t.codecID=n,7===n?function(e,t){var n=e[1]&parseInt("01111111",2)<<16|e[2]<<8|e[3];return(t=t||{}).avcPacketType=["AVC Sequence Header","AVC NALU","AVC End-of-Sequence"][e[0]],t.CompositionTime=e[1]&parseInt("10000000",2)?-n:n,1===e[0]?t.nalUnitTypeRaw=a(e.subarray(4,100)):t.data=a(e.subarray(4)),t}(e.subarray(1),t):t},o=function(e,t){var n=(e[0]&parseInt("11110000",2))>>>4;return(t=t||{}).soundFormat=["Linear PCM, platform endian","ADPCM","MP3","Linear PCM, little endian","Nellymoser 16-kHz mono","Nellymoser 8-kHz mono","Nellymoser","G.711 A-law logarithmic PCM","G.711 mu-law logarithmic PCM","reserved","AAC","Speex","MP3 8-Khz","Device-specific sound"][n],t.soundRate=["5.5-kHz","11-kHz","22-kHz","44-kHz"][(e[0]&parseInt("00001100",2))>>>2],t.soundSize=(e[0]&parseInt("00000010",2))>>>1?"16-bit":"8-bit",t.soundType=e[0]&parseInt("00000001",2)?"Stereo":"Mono",10===n?function(e,t){return(t=t||{}).aacPacketType=["AAC Sequence Header","AAC Raw"][e[0]],t.data=a(e.subarray(1)),t}(e.subarray(1),t):t},l=function(e){var t=function(e){return{tagType:i[e[0]],dataSize:e[1]<<16|e[2]<<8|e[3],timestamp:e[7]<<24|e[4]<<16|e[5]<<8|e[6],streamID:e[8]<<16|e[9]<<8|e[10]}}(e);switch(e[0]){case 8:o(e.subarray(11),t);break;case 9:s(e.subarray(11),t)}return t};t.exports={inspectTag:l,inspect:function(e){var t,n,i=9,r=[];for(i+=4;i<e.byteLength;)t=e[i+1]<<16,t|=e[i+2]<<8,t|=e[i+3],t+=11,n=e.subarray(i,i+t),r.push(l(n)),i+=t+4;return r},textify:function(e){return JSON.stringify(e,null,2)}}},{}],31:[function(e,t,n){"use strict";var i,r,a=e(26).parseType,s=function(e){return new Date(1e3*e-20828448e5)},o=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}},l=function(e){var t,n,i=new DataView(e.buffer,e.byteOffset,e.byteLength),r=[];for(t=0;t+4<e.length;t+=n)if(n=i.getUint32(t),t+=4,n<=0)r.push("<span style='color:red;'>MALFORMED DATA</span>");else switch(31&e[t]){case 1:r.push("slice_layer_without_partitioning_rbsp");break;case 5:r.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:r.push("sei_rbsp");break;case 7:r.push("seq_parameter_set_rbsp");break;case 8:r.push("pic_parameter_set_rbsp");break;case 9:r.push("access_unit_delimiter_rbsp");break;default:r.push("UNKNOWN NAL - "+e[t]&31)}return r},u={avc1:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{dataReferenceIndex:t.getUint16(6),width:t.getUint16(24),height:t.getUint16(26),horizresolution:t.getUint16(28)+t.getUint16(30)/16,vertresolution:t.getUint16(32)+t.getUint16(34)/16,frameCount:t.getUint16(40),depth:t.getUint16(74),config:i(e.subarray(78,e.byteLength))}},avcC:function(e){var t,n,i,r,a=new DataView(e.buffer,e.byteOffset,e.byteLength),s={configurationVersion:e[0],avcProfileIndication:e[1],profileCompatibility:e[2],avcLevelIndication:e[3],lengthSizeMinusOne:3&e[4],sps:[],pps:[]},o=31&e[5];for(i=6,r=0;r<o;r++)n=a.getUint16(i),i+=2,s.sps.push(new Uint8Array(e.subarray(i,i+n))),i+=n;for(t=e[i],i++,r=0;r<t;r++)n=a.getUint16(i),i+=2,s.pps.push(new Uint8Array(e.subarray(i,i+n))),i+=n;return s},btrt:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{bufferSizeDB:t.getUint32(0),maxBitrate:t.getUint32(4),avgBitrate:t.getUint32(8)}},esds:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),esId:e[6]<<8|e[7],streamPriority:31&e[8],decoderConfig:{objectProfileIndication:e[11],streamType:e[12]>>>2&63,bufferSize:e[13]<<16|e[14]<<8|e[15],maxBitrate:e[16]<<24|e[17]<<16|e[18]<<8|e[19],avgBitrate:e[20]<<24|e[21]<<16|e[22]<<8|e[23],decoderConfigDescriptor:{tag:e[24],length:e[25],audioObjectType:e[26]>>>3&31,samplingFrequencyIndex:(7&e[26])<<1|e[27]>>>7&1,channelConfiguration:e[27]>>>3&15}}}},ftyp:function(e){for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={majorBrand:a(e.subarray(0,4)),minorVersion:t.getUint32(4),compatibleBrands:[]},i=8;i<e.byteLength;)n.compatibleBrands.push(a(e.subarray(i,i+4))),i+=4;return n},dinf:function(e){return{boxes:i(e)}},dref:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),dataReferences:i(e.subarray(8))}},hdlr:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),handlerType:a(e.subarray(8,12)),name:""},i=8;for(i=24;i<e.byteLength;i++){if(0===e[i]){i++;break}n.name+=String.fromCharCode(e[i])}return n.name=decodeURIComponent(escape(n.name)),n},mdat:function(e){return{byteLength:e.byteLength,nals:l(e)}},mdhd:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i=4,r={version:n.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),language:""};return 1===r.version?(i+=4,r.creationTime=s(n.getUint32(i)),i+=8,r.modificationTime=s(n.getUint32(i)),i+=4,r.timescale=n.getUint32(i),i+=8,r.duration=n.getUint32(i)):(r.creationTime=s(n.getUint32(i)),i+=4,r.modificationTime=s(n.getUint32(i)),i+=4,r.timescale=n.getUint32(i),i+=4,r.duration=n.getUint32(i)),i+=4,t=n.getUint16(i),r.language+=String.fromCharCode(96+(t>>10)),r.language+=String.fromCharCode(96+((992&t)>>5)),r.language+=String.fromCharCode(96+(31&t)),r},mdia:function(e){return{boxes:i(e)}},mfhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sequenceNumber:e[4]<<24|e[5]<<16|e[6]<<8|e[7]}},minf:function(e){return{boxes:i(e)}},mp4a:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={dataReferenceIndex:t.getUint16(6),channelcount:t.getUint16(16),samplesize:t.getUint16(18),samplerate:t.getUint16(24)+t.getUint16(26)/65536};return e.byteLength>28&&(n.streamDescriptor=i(e.subarray(28))[0]),n},moof:function(e){return{boxes:i(e)}},moov:function(e){return{boxes:i(e)}},mvex:function(e){return{boxes:i(e)}},mvhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,i={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===i.version?(n+=4,i.creationTime=s(t.getUint32(n)),n+=8,i.modificationTime=s(t.getUint32(n)),n+=4,i.timescale=t.getUint32(n),n+=8,i.duration=t.getUint32(n)):(i.creationTime=s(t.getUint32(n)),n+=4,i.modificationTime=s(t.getUint32(n)),n+=4,i.timescale=t.getUint32(n),n+=4,i.duration=t.getUint32(n)),n+=4,i.rate=t.getUint16(n)+t.getUint16(n+2)/16,n+=4,i.volume=t.getUint8(n)+t.getUint8(n+1)/8,n+=2,n+=2,n+=8,i.matrix=new Uint32Array(e.subarray(n,n+36)),n+=36,n+=24,i.nextTrackId=t.getUint32(n),i},pdin:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),rate:t.getUint32(4),initialDelay:t.getUint32(8)}},sdtp:function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]};for(t=4;t<e.byteLength;t++)n.samples.push({dependsOn:(48&e[t])>>4,isDependedOn:(12&e[t])>>2,hasRedundancy:3&e[t]});return n},sidx:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:n.getUint32(4),timescale:n.getUint32(8),earliestPresentationTime:n.getUint32(12),firstOffset:n.getUint32(16)},r=n.getUint16(22);for(t=24;r;t+=12,r--)i.references.push({referenceType:(128&e[t])>>>7,referencedSize:2147483647&n.getUint32(t),subsegmentDuration:n.getUint32(t+4),startsWithSap:!!(128&e[t+8]),sapType:(112&e[t+8])>>>4,sapDeltaTime:268435455&n.getUint32(t+8)});return i},smhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),balance:e[4]+e[5]/256}},stbl:function(e){return{boxes:i(e)}},stco:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),chunkOffsets:[]},r=n.getUint32(4);for(t=8;r;t+=4,r--)i.chunkOffsets.push(n.getUint32(t));return i},stsc:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i=n.getUint32(4),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleToChunks:[]};for(t=8;i;t+=12,i--)r.sampleToChunks.push({firstChunk:n.getUint32(t),samplesPerChunk:n.getUint32(t+4),sampleDescriptionIndex:n.getUint32(t+8)});return r},stsd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleDescriptions:i(e.subarray(8))}},stsz:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleSize:n.getUint32(4),entries:[]};for(t=12;t<e.byteLength;t+=4)i.entries.push(n.getUint32(t));return i},stts:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),timeToSamples:[]},r=n.getUint32(4);for(t=8;r;t+=8,r--)i.timeToSamples.push({sampleCount:n.getUint32(t),sampleDelta:n.getUint32(t+4)});return i},styp:function(e){return u.ftyp(e)},tfdt:function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4)),baseMediaDecodeTime:e[4]<<24|e[5]<<16|e[6]<<8|e[7]};return 1===t.version&&(t.baseMediaDecodeTime*=Math.pow(2,32),t.baseMediaDecodeTime+=e[8]<<24|e[9]<<16|e[10]<<8|e[11]),t},tfhd:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:n.getUint32(4)},r=1&i.flags[2],a=2&i.flags[2],s=8&i.flags[2],o=16&i.flags[2],l=32&i.flags[2],u=65536&i.flags[0],c=131072&i.flags[0];return t=8,r&&(t+=4,i.baseDataOffset=n.getUint32(12),t+=4),a&&(i.sampleDescriptionIndex=n.getUint32(t),t+=4),s&&(i.defaultSampleDuration=n.getUint32(t),t+=4),o&&(i.defaultSampleSize=n.getUint32(t),t+=4),l&&(i.defaultSampleFlags=n.getUint32(t)),u&&(i.durationIsEmpty=!0),!r&&c&&(i.baseDataOffsetIsMoof=!0),i},tkhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,i={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===i.version?(n+=4,i.creationTime=s(t.getUint32(n)),n+=8,i.modificationTime=s(t.getUint32(n)),n+=4,i.trackId=t.getUint32(n),n+=4,n+=8,i.duration=t.getUint32(n)):(i.creationTime=s(t.getUint32(n)),n+=4,i.modificationTime=s(t.getUint32(n)),n+=4,i.trackId=t.getUint32(n),n+=4,n+=4,i.duration=t.getUint32(n)),n+=4,n+=8,i.layer=t.getUint16(n),n+=2,i.alternateGroup=t.getUint16(n),n+=2,i.volume=t.getUint8(n)+t.getUint8(n+1)/8,n+=2,n+=2,i.matrix=new Uint32Array(e.subarray(n,n+36)),n+=36,i.width=t.getUint16(n)+t.getUint16(n+2)/16,n+=4,i.height=t.getUint16(n)+t.getUint16(n+2)/16,i},traf:function(e){return{boxes:i(e)}},trak:function(e){return{boxes:i(e)}},trex:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:t.getUint32(4),defaultSampleDescriptionIndex:t.getUint32(8),defaultSampleDuration:t.getUint32(12),defaultSampleSize:t.getUint32(16),sampleDependsOn:3&e[20],sampleIsDependedOn:(192&e[21])>>6,sampleHasRedundancy:(48&e[21])>>4,samplePaddingValue:(14&e[21])>>1,sampleIsDifferenceSample:!!(1&e[21]),sampleDegradationPriority:t.getUint16(22)}},trun:function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},i=new DataView(e.buffer,e.byteOffset,e.byteLength),r=1&n.flags[2],a=4&n.flags[2],s=1&n.flags[1],l=2&n.flags[1],u=4&n.flags[1],c=8&n.flags[1],d=i.getUint32(4),h=8;for(r&&(n.dataOffset=i.getInt32(h),h+=4),a&&d&&(t={flags:o(e.subarray(h,h+4))},h+=4,s&&(t.duration=i.getUint32(h),h+=4),l&&(t.size=i.getUint32(h),h+=4),c&&(t.compositionTimeOffset=i.getUint32(h),h+=4),n.samples.push(t),d--);d--;)t={},s&&(t.duration=i.getUint32(h),h+=4),l&&(t.size=i.getUint32(h),h+=4),u&&(t.flags=o(e.subarray(h,h+4)),h+=4),c&&(t.compositionTimeOffset=i.getUint32(h),h+=4),n.samples.push(t);return n},"url ":function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4))}},vmhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),graphicsmode:t.getUint16(4),opcolor:new Uint16Array([t.getUint16(6),t.getUint16(8),t.getUint16(10)])}}};i=function(e){for(var t,n,i,r,s,o=0,l=[],c=new ArrayBuffer(e.length),d=new Uint8Array(c),h=0;h<e.length;++h)d[h]=e[h];for(t=new DataView(c);o<e.byteLength;)n=t.getUint32(o),i=a(e.subarray(o+4,o+8)),r=n>1?o+n:e.byteLength,(s=(u[i]||function(e){return{data:e}})(e.subarray(o+8,r))).size=n,s.type=i,l.push(s),o=r;return l},r=function(e,t){var n;return t=t||0,n=new Array(2*t+1).join(" "),e.map(function(e,i){return n+e.type+"\n"+Object.keys(e).filter(function(e){return"type"!==e&&"boxes"!==e}).map(function(t){var i=n+"  "+t+": ",r=e[t];if(r instanceof Uint8Array||r instanceof Uint32Array){var a=Array.prototype.slice.call(new Uint8Array(r.buffer,r.byteOffset,r.byteLength)).map(function(e){return" "+("00"+e.toString(16)).slice(-2)}).join("").match(/.{1,24}/g);return a?1===a.length?i+"<"+a.join("").slice(1)+">":i+"<\n"+a.map(function(e){return n+"  "+e}).join("\n")+"\n"+n+"  >":i+"<>"}return i+JSON.stringify(r,null,2).split("\n").map(function(e,t){return 0===t?e:n+"  "+e}).join("\n")}).join("\n")+(e.boxes?"\n"+r(e.boxes,t+1):"")}).join("\n")},t.exports={inspect:i,textify:r,parseTfdt:u.tfdt,parseHdlr:u.hdlr,parseTfhd:u.tfhd,parseTrun:u.trun,parseSidx:u.sidx}},{26:26}],32:[function(e,t,n){"use strict";var i=e(19),r=e(20).handleRollover,a={};a.ts=e(18),a.aac=e(2);var s=function(e,t){for(var n,i=0,r=188;r<e.byteLength;)if(71!==e[i]||71!==e[r])i++,r++;else{switch(n=e.subarray(i,r),a.ts.parseType(n,t.pid)){case"pat":t.pid||(t.pid=a.ts.parsePat(n));break;case"pmt":t.table||(t.table=a.ts.parsePmt(n))}if(t.pid&&t.table)return;i+=188,r+=188}},o=function(e,t,n){for(var i,r,s,o,l=0,u=188,c=!1;u<=e.byteLength;)if(71!==e[l]||71!==e[u]&&u!==e.byteLength)l++,u++;else{switch(i=e.subarray(l,u),a.ts.parseType(i,t.pid)){case"pes":r=a.ts.parsePesType(i,t.table),s=a.ts.parsePayloadUnitStartIndicator(i),"audio"===r&&s&&(o=a.ts.parsePesTime(i))&&(o.type="audio",n.audio.push(o),c=!0)}if(c)break;l+=188,u+=188}for(u=e.byteLength,l=u-188,c=!1;l>=0;)if(71!==e[l]||71!==e[u]&&u!==e.byteLength)l--,u--;else{switch(i=e.subarray(l,u),a.ts.parseType(i,t.pid)){case"pes":r=a.ts.parsePesType(i,t.table),s=a.ts.parsePayloadUnitStartIndicator(i),"audio"===r&&s&&(o=a.ts.parsePesTime(i))&&(o.type="audio",n.audio.push(o),c=!0)}if(c)break;l-=188,u-=188}},l=function(e,t,n){for(var i,r,s,o,l,u,c,d=0,h=188,f=!1,p={data:[],size:0};h<e.byteLength;)if(71!==e[d]||71!==e[h])d++,h++;else{switch(i=e.subarray(d,h),a.ts.parseType(i,t.pid)){case"pes":if(r=a.ts.parsePesType(i,t.table),s=a.ts.parsePayloadUnitStartIndicator(i),"video"===r&&(s&&!f&&(o=a.ts.parsePesTime(i))&&(o.type="video",n.video.push(o),f=!0),!n.firstKeyFrame)){if(s&&0!==p.size){for(l=new Uint8Array(p.size),u=0;p.data.length;)c=p.data.shift(),l.set(c,u),u+=c.byteLength;if(a.ts.videoPacketContainsKeyFrame(l)){var m=a.ts.parsePesTime(l);m?(n.firstKeyFrame=m,n.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}p.size=0}p.data.push(i),p.size+=i.byteLength}}if(f&&n.firstKeyFrame)break;d+=188,h+=188}for(h=e.byteLength,d=h-188,f=!1;d>=0;)if(71!==e[d]||71!==e[h])d--,h--;else{switch(i=e.subarray(d,h),a.ts.parseType(i,t.pid)){case"pes":r=a.ts.parsePesType(i,t.table),s=a.ts.parsePayloadUnitStartIndicator(i),"video"===r&&s&&(o=a.ts.parsePesTime(i))&&(o.type="video",n.video.push(o),f=!0)}if(f)break;d-=188,h-=188}},u=function(e){var t={pid:null,table:null},n={};for(var r in s(e,t),t.table)if(t.table.hasOwnProperty(r)){var a=t.table[r];switch(a){case i.H264_STREAM_TYPE:n.video=[],l(e,t,n),0===n.video.length&&delete n.video;break;case i.ADTS_STREAM_TYPE:n.audio=[],o(e,t,n),0===n.audio.length&&delete n.audio}}return n};t.exports={inspect:function(e,t){var n,i=a.aac.isLikelyAacData(e);return(n=i?function(e){for(var t,n=!1,i=0,r=null,s=null,o=0,l=0;e.length-l>=3;){switch(a.aac.parseType(e,l)){case"timed-metadata":if(e.length-l<10){n=!0;break}if((o=a.aac.parseId3TagSize(e,l))>e.length){n=!0;break}null===s&&(t=e.subarray(l,l+o),s=a.aac.parseAacTimestamp(t)),l+=o;break;case"audio":if(e.length-l<7){n=!0;break}if((o=a.aac.parseAdtsSize(e,l))>e.length){n=!0;break}null===r&&(t=e.subarray(l,l+o),r=a.aac.parseSampleRate(t)),i++,l+=o;break;default:l++}if(n)return null}if(null===r||null===s)return null;var u=9e4/r;return{audio:[{type:"audio",dts:s,pts:s},{type:"audio",dts:s+1024*i*u,pts:s+1024*i*u}]}}(e):u(e))&&(n.audio||n.video)?(function(e,t){if(e.audio&&e.audio.length){var n=t;void 0===n&&(n=e.audio[0].dts),e.audio.forEach(function(e){e.dts=r(e.dts,n),e.pts=r(e.pts,n),e.dtsTime=e.dts/9e4,e.ptsTime=e.pts/9e4})}if(e.video&&e.video.length){var i=t;if(void 0===i&&(i=e.video[0].dts),e.video.forEach(function(e){e.dts=r(e.dts,i),e.pts=r(e.pts,i),e.dtsTime=e.dts/9e4,e.ptsTime=e.pts/9e4}),e.firstKeyFrame){var a=e.firstKeyFrame;a.dts=r(a.dts,i),a.pts=r(a.pts,i),a.dtsTime=a.dts/9e4,a.ptsTime=a.dts/9e4}}}(n,t),n):null},parseAudioPes_:o}},{18:18,19:19,2:2,20:20}],33:[function(e,t,n){t.exports={toUnsigned:function(e){return e>>>0}}},{}],34:[function(e,t,n){var i,r,a,s,o,l;i=function(e){return 9e4*e},r=function(e,t){return e*t},a=function(e){return e/9e4},s=function(e,t){return e/t},o=function(e,t){return i(s(e,t))},l=function(e,t){return r(a(e),t)},t.exports={secondsToVideoTs:i,secondsToAudioTs:r,videoTsToSeconds:a,audioTsToSeconds:s,audioTsToVideoTs:o,videoTsToAudioTs:l}},{}],35:[function(e,t,n){"use strict";var i;i=function(e){var t=e.byteLength,n=0,i=0;this.length=function(){return 8*t},this.bitsAvailable=function(){return 8*t+i},this.loadWord=function(){var r=e.byteLength-t,a=new Uint8Array(4),s=Math.min(4,t);if(0===s)throw new Error("no bytes available");a.set(e.subarray(r,r+s)),n=new DataView(a.buffer).getUint32(0),i=8*s,t-=s},this.skipBits=function(e){var r;i>e?(n<<=e,i-=e):(e-=i,r=Math.floor(e/8),e-=8*r,t-=r,this.loadWord(),n<<=e,i-=e)},this.readBits=function(e){var r=Math.min(i,e),a=n>>>32-r;return(i-=r)>0?n<<=r:t>0&&this.loadWord(),(r=e-r)>0?a<<r|this.readBits(r):a},this.skipLeadingZeros=function(){var e;for(e=0;e<i;++e)if(0!=(n&2147483648>>>e))return n<<=e,i-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()},t.exports=i},{}],36:[function(e,t,n){"use strict";var i=function(){this.init=function(){var e={};this.on=function(t,n){e[t]||(e[t]=[]),e[t]=e[t].concat(n)},this.off=function(t,n){var i;return!!e[t]&&(i=e[t].indexOf(n),e[t]=e[t].slice(),e[t].splice(i,1),i>-1)},this.trigger=function(t){var n,i,r,a;if(n=e[t])if(2===arguments.length)for(r=n.length,i=0;i<r;++i)n[i].call(this,arguments[1]);else{for(a=[],i=arguments.length,i=1;i<arguments.length;++i)a.push(arguments[i]);for(r=n.length,i=0;i<r;++i)n[i].apply(this,a)}},this.dispose=function(){e={}}}};i.prototype.pipe=function(e){return this.on("data",function(t){e.push(t)}),this.on("done",function(t){e.flush(t)}),e},i.prototype.push=function(e){this.trigger("data",e)},i.prototype.flush=function(e){this.trigger("done",e)},t.exports=i},{}]},{},[13])(13)},function(e,t){
/**
 * material-design-lite - Material Design Components in CSS, JS and HTML
 * @version v1.3.0
 * @license Apache-2.0
 * @copyright 2015 Google, Inc.
 * @link https://github.com/google/material-design-lite
 */
!function(){"use strict";function e(e,t){if(e){if(t.element_.classList.contains(t.CssClasses_.MDL_JS_RIPPLE_EFFECT)){var n=document.createElement("span");n.classList.add(t.CssClasses_.MDL_RIPPLE_CONTAINER),n.classList.add(t.CssClasses_.MDL_JS_RIPPLE_EFFECT);var i=document.createElement("span");i.classList.add(t.CssClasses_.MDL_RIPPLE),n.appendChild(i),e.appendChild(n)}e.addEventListener("click",function(n){if("#"===e.getAttribute("href").charAt(0)){n.preventDefault();var i=e.href.split("#")[1],r=t.element_.querySelector("#"+i);t.resetTabState_(),t.resetPanelState_(),e.classList.add(t.CssClasses_.ACTIVE_CLASS),r.classList.add(t.CssClasses_.ACTIVE_CLASS)}})}}function t(e,t,n,i){function r(){var r=e.href.split("#")[1],a=i.content_.querySelector("#"+r);i.resetTabState_(t),i.resetPanelState_(n),e.classList.add(i.CssClasses_.IS_ACTIVE),a.classList.add(i.CssClasses_.IS_ACTIVE)}if(i.tabBar_.classList.contains(i.CssClasses_.JS_RIPPLE_EFFECT)){var a=document.createElement("span");a.classList.add(i.CssClasses_.RIPPLE_CONTAINER),a.classList.add(i.CssClasses_.JS_RIPPLE_EFFECT);var s=document.createElement("span");s.classList.add(i.CssClasses_.RIPPLE),a.appendChild(s),e.appendChild(a)}i.tabBar_.classList.contains(i.CssClasses_.TAB_MANUAL_SWITCH)||e.addEventListener("click",function(t){"#"===e.getAttribute("href").charAt(0)&&(t.preventDefault(),r())}),e.show=r}var n={upgradeDom:function(e,t){},upgradeElement:function(e,t){},upgradeElements:function(e){},upgradeAllRegistered:function(){},registerUpgradedCallback:function(e,t){},register:function(e){},downgradeElements:function(e){}};(n=function(){function e(e,t){for(var n=0;n<o.length;n++)if(o[n].className===e)return void 0!==t&&(o[n]=t),o[n];return!1}function t(e){var t=e.getAttribute("data-upgraded");return null===t?[""]:t.split(",")}function n(e,n){return-1!==t(e).indexOf(n)}function i(e,t,n){if("CustomEvent"in window&&"function"==typeof window.CustomEvent)return new CustomEvent(e,{bubbles:t,cancelable:n});var i=document.createEvent("Events");return i.initEvent(e,t,n),i}function r(t,n){if(void 0===t&&void 0===n)for(var i=0;i<o.length;i++)r(o[i].className,o[i].cssClass);else{var s=t;if(void 0===n){var l=e(s);l&&(n=l.cssClass)}for(var u=document.querySelectorAll("."+n),c=0;c<u.length;c++)a(u[c],s)}}function a(r,a){if(!("object"==typeof r&&r instanceof Element))throw new Error("Invalid argument provided to upgrade MDL element.");var s=i("mdl-componentupgrading",!0,!0);if(r.dispatchEvent(s),!s.defaultPrevented){var c=t(r),d=[];if(a)n(r,a)||d.push(e(a));else{var h=r.classList;o.forEach(function(e){h.contains(e.cssClass)&&-1===d.indexOf(e)&&!n(r,e.className)&&d.push(e)})}for(var f,p=0,m=d.length;p<m;p++){if(!(f=d[p]))throw new Error("Unable to find a registered component for the given class.");c.push(f.className),r.setAttribute("data-upgraded",c.join(","));var v=new f.classConstructor(r);v[u]=f,l.push(v);for(var g=0,y=f.callbacks.length;g<y;g++)f.callbacks[g](r);f.widget&&(r[f.className]=v);var _=i("mdl-componentupgraded",!0,!1);r.dispatchEvent(_)}}}function s(e){if(e){var t=l.indexOf(e);l.splice(t,1);var n=e.element_.getAttribute("data-upgraded").split(","),r=n.indexOf(e[u].classAsString);n.splice(r,1),e.element_.setAttribute("data-upgraded",n.join(","));var a=i("mdl-componentdowngraded",!0,!1);e.element_.dispatchEvent(a)}}var o=[],l=[],u="mdlComponentConfigInternal_";return{upgradeDom:r,upgradeElement:a,upgradeElements:function e(t){Array.isArray(t)||(t=t instanceof Element?[t]:Array.prototype.slice.call(t));for(var n,i=0,r=t.length;i<r;i++)(n=t[i])instanceof HTMLElement&&(a(n),n.children.length>0&&e(n.children))},upgradeAllRegistered:function(){for(var e=0;e<o.length;e++)r(o[e].className)},registerUpgradedCallback:function(t,n){var i=e(t);i&&i.callbacks.push(n)},register:function(t){var n=!0;void 0===t.widget&&void 0===t.widget||(n=t.widget||t.widget);var i={classConstructor:t.constructor||t.constructor,className:t.classAsString||t.classAsString,cssClass:t.cssClass||t.cssClass,widget:n,callbacks:[]};if(o.forEach(function(e){if(e.cssClass===i.cssClass)throw new Error("The provided cssClass has already been registered: "+e.cssClass);if(e.className===i.className)throw new Error("The provided className has already been registered")}),t.constructor.prototype.hasOwnProperty(u))throw new Error("MDL component classes must not have "+u+" defined as a property.");e(t.classAsString,i)||o.push(i)},downgradeElements:function(e){var t=function(e){l.filter(function(t){return t.element_===e}).forEach(s)};if(e instanceof Array||e instanceof NodeList)for(var n=0;n<e.length;n++)t(e[n]);else{if(!(e instanceof Node))throw new Error("Invalid argument provided to downgrade MDL nodes.");t(e)}}}}()).ComponentConfigPublic,n.ComponentConfig,n.Component,n.upgradeDom=n.upgradeDom,n.upgradeElement=n.upgradeElement,n.upgradeElements=n.upgradeElements,n.upgradeAllRegistered=n.upgradeAllRegistered,n.registerUpgradedCallback=n.registerUpgradedCallback,n.register=n.register,n.downgradeElements=n.downgradeElements,window.componentHandler=n,window.componentHandler=n,window.addEventListener("load",function(){"classList"in document.createElement("div")&&"querySelector"in document&&"addEventListener"in window&&Array.prototype.forEach?(document.documentElement.classList.add("mdl-js"),n.upgradeAllRegistered()):(n.upgradeElement=function(){},n.register=function(){})}),Date.now||(Date.now=function(){return(new Date).getTime()},Date.now=Date.now);for(var i=["webkit","moz"],r=0;r<i.length&&!window.requestAnimationFrame;++r){var a=i[r];window.requestAnimationFrame=window[a+"RequestAnimationFrame"],window.cancelAnimationFrame=window[a+"CancelAnimationFrame"]||window[a+"CancelRequestAnimationFrame"],window.requestAnimationFrame=window.requestAnimationFrame,window.cancelAnimationFrame=window.cancelAnimationFrame}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var s=0;window.requestAnimationFrame=function(e){var t=Date.now(),n=Math.max(s+16,t);return setTimeout(function(){e(s=n)},n-t)},window.cancelAnimationFrame=clearTimeout,window.requestAnimationFrame=window.requestAnimationFrame,window.cancelAnimationFrame=window.cancelAnimationFrame}var o=function(e){this.element_=e,this.init()};window.MaterialButton=o,o.prototype.Constant_={},o.prototype.CssClasses_={RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_CONTAINER:"mdl-button__ripple-container",RIPPLE:"mdl-ripple"},o.prototype.blurHandler_=function(e){e&&this.element_.blur()},o.prototype.disable=function(){this.element_.disabled=!0},o.prototype.disable=o.prototype.disable,o.prototype.enable=function(){this.element_.disabled=!1},o.prototype.enable=o.prototype.enable,o.prototype.init=function(){if(this.element_){if(this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){var e=document.createElement("span");e.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleElement_=document.createElement("span"),this.rippleElement_.classList.add(this.CssClasses_.RIPPLE),e.appendChild(this.rippleElement_),this.boundRippleBlurHandler=this.blurHandler_.bind(this),this.rippleElement_.addEventListener("mouseup",this.boundRippleBlurHandler),this.element_.appendChild(e)}this.boundButtonBlurHandler=this.blurHandler_.bind(this),this.element_.addEventListener("mouseup",this.boundButtonBlurHandler),this.element_.addEventListener("mouseleave",this.boundButtonBlurHandler)}},n.register({constructor:o,classAsString:"MaterialButton",cssClass:"mdl-js-button",widget:!0});var l=function(e){this.element_=e,this.init()};window.MaterialCheckbox=l,l.prototype.Constant_={TINY_TIMEOUT:.001},l.prototype.CssClasses_={INPUT:"mdl-checkbox__input",BOX_OUTLINE:"mdl-checkbox__box-outline",FOCUS_HELPER:"mdl-checkbox__focus-helper",TICK_OUTLINE:"mdl-checkbox__tick-outline",RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",RIPPLE_CONTAINER:"mdl-checkbox__ripple-container",RIPPLE_CENTER:"mdl-ripple--center",RIPPLE:"mdl-ripple",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_CHECKED:"is-checked",IS_UPGRADED:"is-upgraded"},l.prototype.onChange_=function(e){this.updateClasses_()},l.prototype.onFocus_=function(e){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},l.prototype.onBlur_=function(e){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},l.prototype.onMouseUp_=function(e){this.blur_()},l.prototype.updateClasses_=function(){this.checkDisabled(),this.checkToggleState()},l.prototype.blur_=function(){window.setTimeout(function(){this.inputElement_.blur()}.bind(this),this.Constant_.TINY_TIMEOUT)},l.prototype.checkToggleState=function(){this.inputElement_.checked?this.element_.classList.add(this.CssClasses_.IS_CHECKED):this.element_.classList.remove(this.CssClasses_.IS_CHECKED)},l.prototype.checkToggleState=l.prototype.checkToggleState,l.prototype.checkDisabled=function(){this.inputElement_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},l.prototype.checkDisabled=l.prototype.checkDisabled,l.prototype.disable=function(){this.inputElement_.disabled=!0,this.updateClasses_()},l.prototype.disable=l.prototype.disable,l.prototype.enable=function(){this.inputElement_.disabled=!1,this.updateClasses_()},l.prototype.enable=l.prototype.enable,l.prototype.check=function(){this.inputElement_.checked=!0,this.updateClasses_()},l.prototype.check=l.prototype.check,l.prototype.uncheck=function(){this.inputElement_.checked=!1,this.updateClasses_()},l.prototype.uncheck=l.prototype.uncheck,l.prototype.init=function(){if(this.element_){this.inputElement_=this.element_.querySelector("."+this.CssClasses_.INPUT);var e=document.createElement("span");e.classList.add(this.CssClasses_.BOX_OUTLINE);var t=document.createElement("span");t.classList.add(this.CssClasses_.FOCUS_HELPER);var n=document.createElement("span");if(n.classList.add(this.CssClasses_.TICK_OUTLINE),e.appendChild(n),this.element_.appendChild(t),this.element_.appendChild(e),this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){this.element_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS),this.rippleContainerElement_=document.createElement("span"),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_EFFECT),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CENTER),this.boundRippleMouseUp=this.onMouseUp_.bind(this),this.rippleContainerElement_.addEventListener("mouseup",this.boundRippleMouseUp);var i=document.createElement("span");i.classList.add(this.CssClasses_.RIPPLE),this.rippleContainerElement_.appendChild(i),this.element_.appendChild(this.rippleContainerElement_)}this.boundInputOnChange=this.onChange_.bind(this),this.boundInputOnFocus=this.onFocus_.bind(this),this.boundInputOnBlur=this.onBlur_.bind(this),this.boundElementMouseUp=this.onMouseUp_.bind(this),this.inputElement_.addEventListener("change",this.boundInputOnChange),this.inputElement_.addEventListener("focus",this.boundInputOnFocus),this.inputElement_.addEventListener("blur",this.boundInputOnBlur),this.element_.addEventListener("mouseup",this.boundElementMouseUp),this.updateClasses_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED)}},n.register({constructor:l,classAsString:"MaterialCheckbox",cssClass:"mdl-js-checkbox",widget:!0});var u=function(e){this.element_=e,this.init()};window.MaterialIconToggle=u,u.prototype.Constant_={TINY_TIMEOUT:.001},u.prototype.CssClasses_={INPUT:"mdl-icon-toggle__input",JS_RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",RIPPLE_CONTAINER:"mdl-icon-toggle__ripple-container",RIPPLE_CENTER:"mdl-ripple--center",RIPPLE:"mdl-ripple",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_CHECKED:"is-checked"},u.prototype.onChange_=function(e){this.updateClasses_()},u.prototype.onFocus_=function(e){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},u.prototype.onBlur_=function(e){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},u.prototype.onMouseUp_=function(e){this.blur_()},u.prototype.updateClasses_=function(){this.checkDisabled(),this.checkToggleState()},u.prototype.blur_=function(){window.setTimeout(function(){this.inputElement_.blur()}.bind(this),this.Constant_.TINY_TIMEOUT)},u.prototype.checkToggleState=function(){this.inputElement_.checked?this.element_.classList.add(this.CssClasses_.IS_CHECKED):this.element_.classList.remove(this.CssClasses_.IS_CHECKED)},u.prototype.checkToggleState=u.prototype.checkToggleState,u.prototype.checkDisabled=function(){this.inputElement_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},u.prototype.checkDisabled=u.prototype.checkDisabled,u.prototype.disable=function(){this.inputElement_.disabled=!0,this.updateClasses_()},u.prototype.disable=u.prototype.disable,u.prototype.enable=function(){this.inputElement_.disabled=!1,this.updateClasses_()},u.prototype.enable=u.prototype.enable,u.prototype.check=function(){this.inputElement_.checked=!0,this.updateClasses_()},u.prototype.check=u.prototype.check,u.prototype.uncheck=function(){this.inputElement_.checked=!1,this.updateClasses_()},u.prototype.uncheck=u.prototype.uncheck,u.prototype.init=function(){if(this.element_){if(this.inputElement_=this.element_.querySelector("."+this.CssClasses_.INPUT),this.element_.classList.contains(this.CssClasses_.JS_RIPPLE_EFFECT)){this.element_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS),this.rippleContainerElement_=document.createElement("span"),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleContainerElement_.classList.add(this.CssClasses_.JS_RIPPLE_EFFECT),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CENTER),this.boundRippleMouseUp=this.onMouseUp_.bind(this),this.rippleContainerElement_.addEventListener("mouseup",this.boundRippleMouseUp);var e=document.createElement("span");e.classList.add(this.CssClasses_.RIPPLE),this.rippleContainerElement_.appendChild(e),this.element_.appendChild(this.rippleContainerElement_)}this.boundInputOnChange=this.onChange_.bind(this),this.boundInputOnFocus=this.onFocus_.bind(this),this.boundInputOnBlur=this.onBlur_.bind(this),this.boundElementOnMouseUp=this.onMouseUp_.bind(this),this.inputElement_.addEventListener("change",this.boundInputOnChange),this.inputElement_.addEventListener("focus",this.boundInputOnFocus),this.inputElement_.addEventListener("blur",this.boundInputOnBlur),this.element_.addEventListener("mouseup",this.boundElementOnMouseUp),this.updateClasses_(),this.element_.classList.add("is-upgraded")}},n.register({constructor:u,classAsString:"MaterialIconToggle",cssClass:"mdl-js-icon-toggle",widget:!0});var c=function(e){this.element_=e,this.init()};window.MaterialMenu=c,c.prototype.Constant_={TRANSITION_DURATION_SECONDS:.3,TRANSITION_DURATION_FRACTION:.8,CLOSE_TIMEOUT:150},c.prototype.Keycodes_={ENTER:13,ESCAPE:27,SPACE:32,UP_ARROW:38,DOWN_ARROW:40},c.prototype.CssClasses_={CONTAINER:"mdl-menu__container",OUTLINE:"mdl-menu__outline",ITEM:"mdl-menu__item",ITEM_RIPPLE_CONTAINER:"mdl-menu__item-ripple-container",RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",RIPPLE:"mdl-ripple",IS_UPGRADED:"is-upgraded",IS_VISIBLE:"is-visible",IS_ANIMATING:"is-animating",BOTTOM_LEFT:"mdl-menu--bottom-left",BOTTOM_RIGHT:"mdl-menu--bottom-right",TOP_LEFT:"mdl-menu--top-left",TOP_RIGHT:"mdl-menu--top-right",UNALIGNED:"mdl-menu--unaligned"},c.prototype.init=function(){if(this.element_){var e=document.createElement("div");e.classList.add(this.CssClasses_.CONTAINER),this.element_.parentElement.insertBefore(e,this.element_),this.element_.parentElement.removeChild(this.element_),e.appendChild(this.element_),this.container_=e;var t=document.createElement("div");t.classList.add(this.CssClasses_.OUTLINE),this.outline_=t,e.insertBefore(t,this.element_);var n=this.element_.getAttribute("for")||this.element_.getAttribute("data-mdl-for"),i=null;n&&((i=document.getElementById(n))&&(this.forElement_=i,i.addEventListener("click",this.handleForClick_.bind(this)),i.addEventListener("keydown",this.handleForKeyboardEvent_.bind(this))));var r=this.element_.querySelectorAll("."+this.CssClasses_.ITEM);this.boundItemKeydown_=this.handleItemKeyboardEvent_.bind(this),this.boundItemClick_=this.handleItemClick_.bind(this);for(var a=0;a<r.length;a++)r[a].addEventListener("click",this.boundItemClick_),r[a].tabIndex="-1",r[a].addEventListener("keydown",this.boundItemKeydown_);if(this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT))for(this.element_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS),a=0;a<r.length;a++){var s=r[a],o=document.createElement("span");o.classList.add(this.CssClasses_.ITEM_RIPPLE_CONTAINER);var l=document.createElement("span");l.classList.add(this.CssClasses_.RIPPLE),o.appendChild(l),s.appendChild(o),s.classList.add(this.CssClasses_.RIPPLE_EFFECT)}this.element_.classList.contains(this.CssClasses_.BOTTOM_LEFT)&&this.outline_.classList.add(this.CssClasses_.BOTTOM_LEFT),this.element_.classList.contains(this.CssClasses_.BOTTOM_RIGHT)&&this.outline_.classList.add(this.CssClasses_.BOTTOM_RIGHT),this.element_.classList.contains(this.CssClasses_.TOP_LEFT)&&this.outline_.classList.add(this.CssClasses_.TOP_LEFT),this.element_.classList.contains(this.CssClasses_.TOP_RIGHT)&&this.outline_.classList.add(this.CssClasses_.TOP_RIGHT),this.element_.classList.contains(this.CssClasses_.UNALIGNED)&&this.outline_.classList.add(this.CssClasses_.UNALIGNED),e.classList.add(this.CssClasses_.IS_UPGRADED)}},c.prototype.handleForClick_=function(e){if(this.element_&&this.forElement_){var t=this.forElement_.getBoundingClientRect(),n=this.forElement_.parentElement.getBoundingClientRect();this.element_.classList.contains(this.CssClasses_.UNALIGNED)||(this.element_.classList.contains(this.CssClasses_.BOTTOM_RIGHT)?(this.container_.style.right=n.right-t.right+"px",this.container_.style.top=this.forElement_.offsetTop+this.forElement_.offsetHeight+"px"):this.element_.classList.contains(this.CssClasses_.TOP_LEFT)?(this.container_.style.left=this.forElement_.offsetLeft+"px",this.container_.style.bottom=n.bottom-t.top+"px"):this.element_.classList.contains(this.CssClasses_.TOP_RIGHT)?(this.container_.style.right=n.right-t.right+"px",this.container_.style.bottom=n.bottom-t.top+"px"):(this.container_.style.left=this.forElement_.offsetLeft+"px",this.container_.style.top=this.forElement_.offsetTop+this.forElement_.offsetHeight+"px"))}this.toggle(e)},c.prototype.handleForKeyboardEvent_=function(e){if(this.element_&&this.container_&&this.forElement_){var t=this.element_.querySelectorAll("."+this.CssClasses_.ITEM+":not([disabled])");t&&t.length>0&&this.container_.classList.contains(this.CssClasses_.IS_VISIBLE)&&(e.keyCode===this.Keycodes_.UP_ARROW?(e.preventDefault(),t[t.length-1].focus()):e.keyCode===this.Keycodes_.DOWN_ARROW&&(e.preventDefault(),t[0].focus()))}},c.prototype.handleItemKeyboardEvent_=function(e){if(this.element_&&this.container_){var t=this.element_.querySelectorAll("."+this.CssClasses_.ITEM+":not([disabled])");if(t&&t.length>0&&this.container_.classList.contains(this.CssClasses_.IS_VISIBLE)){var n=Array.prototype.slice.call(t).indexOf(e.target);if(e.keyCode===this.Keycodes_.UP_ARROW)e.preventDefault(),n>0?t[n-1].focus():t[t.length-1].focus();else if(e.keyCode===this.Keycodes_.DOWN_ARROW)e.preventDefault(),t.length>n+1?t[n+1].focus():t[0].focus();else if(e.keyCode===this.Keycodes_.SPACE||e.keyCode===this.Keycodes_.ENTER){e.preventDefault();var i=new MouseEvent("mousedown");e.target.dispatchEvent(i),i=new MouseEvent("mouseup"),e.target.dispatchEvent(i),e.target.click()}else e.keyCode===this.Keycodes_.ESCAPE&&(e.preventDefault(),this.hide())}}},c.prototype.handleItemClick_=function(e){e.target.hasAttribute("disabled")?e.stopPropagation():(this.closing_=!0,window.setTimeout(function(e){this.hide(),this.closing_=!1}.bind(this),this.Constant_.CLOSE_TIMEOUT))},c.prototype.applyClip_=function(e,t){this.element_.classList.contains(this.CssClasses_.UNALIGNED)?this.element_.style.clip="":this.element_.classList.contains(this.CssClasses_.BOTTOM_RIGHT)?this.element_.style.clip="rect(0 "+t+"px 0 "+t+"px)":this.element_.classList.contains(this.CssClasses_.TOP_LEFT)?this.element_.style.clip="rect("+e+"px 0 "+e+"px 0)":this.element_.classList.contains(this.CssClasses_.TOP_RIGHT)?this.element_.style.clip="rect("+e+"px "+t+"px "+e+"px "+t+"px)":this.element_.style.clip=""},c.prototype.removeAnimationEndListener_=function(e){e.target.classList.remove(c.prototype.CssClasses_.IS_ANIMATING)},c.prototype.addAnimationEndListener_=function(){this.element_.addEventListener("transitionend",this.removeAnimationEndListener_),this.element_.addEventListener("webkitTransitionEnd",this.removeAnimationEndListener_)},c.prototype.show=function(e){if(this.element_&&this.container_&&this.outline_){var t=this.element_.getBoundingClientRect().height,n=this.element_.getBoundingClientRect().width;this.container_.style.width=n+"px",this.container_.style.height=t+"px",this.outline_.style.width=n+"px",this.outline_.style.height=t+"px";for(var i=this.Constant_.TRANSITION_DURATION_SECONDS*this.Constant_.TRANSITION_DURATION_FRACTION,r=this.element_.querySelectorAll("."+this.CssClasses_.ITEM),a=0;a<r.length;a++){var s;s=this.element_.classList.contains(this.CssClasses_.TOP_LEFT)||this.element_.classList.contains(this.CssClasses_.TOP_RIGHT)?(t-r[a].offsetTop-r[a].offsetHeight)/t*i+"s":r[a].offsetTop/t*i+"s",r[a].style.transitionDelay=s}this.applyClip_(t,n),window.requestAnimationFrame(function(){this.element_.classList.add(this.CssClasses_.IS_ANIMATING),this.element_.style.clip="rect(0 "+n+"px "+t+"px 0)",this.container_.classList.add(this.CssClasses_.IS_VISIBLE)}.bind(this)),this.addAnimationEndListener_();var o=function(t){t===e||this.closing_||t.target.parentNode===this.element_||(document.removeEventListener("click",o),this.hide())}.bind(this);document.addEventListener("click",o)}},c.prototype.show=c.prototype.show,c.prototype.hide=function(){if(this.element_&&this.container_&&this.outline_){for(var e=this.element_.querySelectorAll("."+this.CssClasses_.ITEM),t=0;t<e.length;t++)e[t].style.removeProperty("transition-delay");var n=this.element_.getBoundingClientRect(),i=n.height,r=n.width;this.element_.classList.add(this.CssClasses_.IS_ANIMATING),this.applyClip_(i,r),this.container_.classList.remove(this.CssClasses_.IS_VISIBLE),this.addAnimationEndListener_()}},c.prototype.hide=c.prototype.hide,c.prototype.toggle=function(e){this.container_.classList.contains(this.CssClasses_.IS_VISIBLE)?this.hide():this.show(e)},c.prototype.toggle=c.prototype.toggle,n.register({constructor:c,classAsString:"MaterialMenu",cssClass:"mdl-js-menu",widget:!0});var d=function(e){this.element_=e,this.init()};window.MaterialProgress=d,d.prototype.Constant_={},d.prototype.CssClasses_={INDETERMINATE_CLASS:"mdl-progress__indeterminate"},d.prototype.setProgress=function(e){this.element_.classList.contains(this.CssClasses_.INDETERMINATE_CLASS)||(this.progressbar_.style.width=e+"%")},d.prototype.setProgress=d.prototype.setProgress,d.prototype.setBuffer=function(e){this.bufferbar_.style.width=e+"%",this.auxbar_.style.width=100-e+"%"},d.prototype.setBuffer=d.prototype.setBuffer,d.prototype.init=function(){if(this.element_){var e=document.createElement("div");e.className="progressbar bar bar1",this.element_.appendChild(e),this.progressbar_=e,(e=document.createElement("div")).className="bufferbar bar bar2",this.element_.appendChild(e),this.bufferbar_=e,(e=document.createElement("div")).className="auxbar bar bar3",this.element_.appendChild(e),this.auxbar_=e,this.progressbar_.style.width="0%",this.bufferbar_.style.width="100%",this.auxbar_.style.width="0%",this.element_.classList.add("is-upgraded")}},n.register({constructor:d,classAsString:"MaterialProgress",cssClass:"mdl-js-progress",widget:!0});var h=function(e){this.element_=e,this.init()};window.MaterialRadio=h,h.prototype.Constant_={TINY_TIMEOUT:.001},h.prototype.CssClasses_={IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_CHECKED:"is-checked",IS_UPGRADED:"is-upgraded",JS_RADIO:"mdl-js-radio",RADIO_BTN:"mdl-radio__button",RADIO_OUTER_CIRCLE:"mdl-radio__outer-circle",RADIO_INNER_CIRCLE:"mdl-radio__inner-circle",RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",RIPPLE_CONTAINER:"mdl-radio__ripple-container",RIPPLE_CENTER:"mdl-ripple--center",RIPPLE:"mdl-ripple"},h.prototype.onChange_=function(e){for(var t=document.getElementsByClassName(this.CssClasses_.JS_RADIO),n=0;n<t.length;n++){t[n].querySelector("."+this.CssClasses_.RADIO_BTN).getAttribute("name")===this.btnElement_.getAttribute("name")&&void 0!==t[n].MaterialRadio&&t[n].MaterialRadio.updateClasses_()}},h.prototype.onFocus_=function(e){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},h.prototype.onBlur_=function(e){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},h.prototype.onMouseup_=function(e){this.blur_()},h.prototype.updateClasses_=function(){this.checkDisabled(),this.checkToggleState()},h.prototype.blur_=function(){window.setTimeout(function(){this.btnElement_.blur()}.bind(this),this.Constant_.TINY_TIMEOUT)},h.prototype.checkDisabled=function(){this.btnElement_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},h.prototype.checkDisabled=h.prototype.checkDisabled,h.prototype.checkToggleState=function(){this.btnElement_.checked?this.element_.classList.add(this.CssClasses_.IS_CHECKED):this.element_.classList.remove(this.CssClasses_.IS_CHECKED)},h.prototype.checkToggleState=h.prototype.checkToggleState,h.prototype.disable=function(){this.btnElement_.disabled=!0,this.updateClasses_()},h.prototype.disable=h.prototype.disable,h.prototype.enable=function(){this.btnElement_.disabled=!1,this.updateClasses_()},h.prototype.enable=h.prototype.enable,h.prototype.check=function(){this.btnElement_.checked=!0,this.onChange_(null)},h.prototype.check=h.prototype.check,h.prototype.uncheck=function(){this.btnElement_.checked=!1,this.onChange_(null)},h.prototype.uncheck=h.prototype.uncheck,h.prototype.init=function(){if(this.element_){this.btnElement_=this.element_.querySelector("."+this.CssClasses_.RADIO_BTN),this.boundChangeHandler_=this.onChange_.bind(this),this.boundFocusHandler_=this.onChange_.bind(this),this.boundBlurHandler_=this.onBlur_.bind(this),this.boundMouseUpHandler_=this.onMouseup_.bind(this);var e=document.createElement("span");e.classList.add(this.CssClasses_.RADIO_OUTER_CIRCLE);var t,n=document.createElement("span");if(n.classList.add(this.CssClasses_.RADIO_INNER_CIRCLE),this.element_.appendChild(e),this.element_.appendChild(n),this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){this.element_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS),(t=document.createElement("span")).classList.add(this.CssClasses_.RIPPLE_CONTAINER),t.classList.add(this.CssClasses_.RIPPLE_EFFECT),t.classList.add(this.CssClasses_.RIPPLE_CENTER),t.addEventListener("mouseup",this.boundMouseUpHandler_);var i=document.createElement("span");i.classList.add(this.CssClasses_.RIPPLE),t.appendChild(i),this.element_.appendChild(t)}this.btnElement_.addEventListener("change",this.boundChangeHandler_),this.btnElement_.addEventListener("focus",this.boundFocusHandler_),this.btnElement_.addEventListener("blur",this.boundBlurHandler_),this.element_.addEventListener("mouseup",this.boundMouseUpHandler_),this.updateClasses_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED)}},n.register({constructor:h,classAsString:"MaterialRadio",cssClass:"mdl-js-radio",widget:!0});var f=function(e){this.element_=e,this.isIE_=window.navigator.msPointerEnabled,this.init()};window.MaterialSlider=f,f.prototype.Constant_={},f.prototype.CssClasses_={IE_CONTAINER:"mdl-slider__ie-container",SLIDER_CONTAINER:"mdl-slider__container",BACKGROUND_FLEX:"mdl-slider__background-flex",BACKGROUND_LOWER:"mdl-slider__background-lower",BACKGROUND_UPPER:"mdl-slider__background-upper",IS_LOWEST_VALUE:"is-lowest-value",IS_UPGRADED:"is-upgraded"},f.prototype.onInput_=function(e){this.updateValueStyles_()},f.prototype.onChange_=function(e){this.updateValueStyles_()},f.prototype.onMouseUp_=function(e){e.target.blur()},f.prototype.onContainerMouseDown_=function(e){if(e.target===this.element_.parentElement){e.preventDefault();var t=new MouseEvent("mousedown",{target:e.target,buttons:e.buttons,clientX:e.clientX,clientY:this.element_.getBoundingClientRect().y});this.element_.dispatchEvent(t)}},f.prototype.updateValueStyles_=function(){var e=(this.element_.value-this.element_.min)/(this.element_.max-this.element_.min);0===e?this.element_.classList.add(this.CssClasses_.IS_LOWEST_VALUE):this.element_.classList.remove(this.CssClasses_.IS_LOWEST_VALUE),this.isIE_||(this.backgroundLower_.style.flex=e,this.backgroundLower_.style.webkitFlex=e,this.backgroundUpper_.style.flex=1-e,this.backgroundUpper_.style.webkitFlex=1-e)},f.prototype.disable=function(){this.element_.disabled=!0},f.prototype.disable=f.prototype.disable,f.prototype.enable=function(){this.element_.disabled=!1},f.prototype.enable=f.prototype.enable,f.prototype.change=function(e){void 0!==e&&(this.element_.value=e),this.updateValueStyles_()},f.prototype.change=f.prototype.change,f.prototype.init=function(){if(this.element_){if(this.isIE_){var e=document.createElement("div");e.classList.add(this.CssClasses_.IE_CONTAINER),this.element_.parentElement.insertBefore(e,this.element_),this.element_.parentElement.removeChild(this.element_),e.appendChild(this.element_)}else{var t=document.createElement("div");t.classList.add(this.CssClasses_.SLIDER_CONTAINER),this.element_.parentElement.insertBefore(t,this.element_),this.element_.parentElement.removeChild(this.element_),t.appendChild(this.element_);var n=document.createElement("div");n.classList.add(this.CssClasses_.BACKGROUND_FLEX),t.appendChild(n),this.backgroundLower_=document.createElement("div"),this.backgroundLower_.classList.add(this.CssClasses_.BACKGROUND_LOWER),n.appendChild(this.backgroundLower_),this.backgroundUpper_=document.createElement("div"),this.backgroundUpper_.classList.add(this.CssClasses_.BACKGROUND_UPPER),n.appendChild(this.backgroundUpper_)}this.boundInputHandler=this.onInput_.bind(this),this.boundChangeHandler=this.onChange_.bind(this),this.boundMouseUpHandler=this.onMouseUp_.bind(this),this.boundContainerMouseDownHandler=this.onContainerMouseDown_.bind(this),this.element_.addEventListener("input",this.boundInputHandler),this.element_.addEventListener("change",this.boundChangeHandler),this.element_.addEventListener("mouseup",this.boundMouseUpHandler),this.element_.parentElement.addEventListener("mousedown",this.boundContainerMouseDownHandler),this.updateValueStyles_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED)}},n.register({constructor:f,classAsString:"MaterialSlider",cssClass:"mdl-js-slider",widget:!0});var p=function(e){if(this.element_=e,this.textElement_=this.element_.querySelector("."+this.cssClasses_.MESSAGE),this.actionElement_=this.element_.querySelector("."+this.cssClasses_.ACTION),!this.textElement_)throw new Error("There must be a message element for a snackbar.");if(!this.actionElement_)throw new Error("There must be an action element for a snackbar.");this.active=!1,this.actionHandler_=void 0,this.message_=void 0,this.actionText_=void 0,this.queuedNotifications_=[],this.setActionHidden_(!0)};window.MaterialSnackbar=p,p.prototype.Constant_={ANIMATION_LENGTH:250},p.prototype.cssClasses_={SNACKBAR:"mdl-snackbar",MESSAGE:"mdl-snackbar__text",ACTION:"mdl-snackbar__action",ACTIVE:"mdl-snackbar--active"},p.prototype.displaySnackbar_=function(){this.element_.setAttribute("aria-hidden","true"),this.actionHandler_&&(this.actionElement_.textContent=this.actionText_,this.actionElement_.addEventListener("click",this.actionHandler_),this.setActionHidden_(!1)),this.textElement_.textContent=this.message_,this.element_.classList.add(this.cssClasses_.ACTIVE),this.element_.setAttribute("aria-hidden","false"),setTimeout(this.cleanup_.bind(this),this.timeout_)},p.prototype.showSnackbar=function(e){if(void 0===e)throw new Error("Please provide a data object with at least a message to display.");if(void 0===e.message)throw new Error("Please provide a message to be displayed.");if(e.actionHandler&&!e.actionText)throw new Error("Please provide action text with the handler.");this.active?this.queuedNotifications_.push(e):(this.active=!0,this.message_=e.message,e.timeout?this.timeout_=e.timeout:this.timeout_=2750,e.actionHandler&&(this.actionHandler_=e.actionHandler),e.actionText&&(this.actionText_=e.actionText),this.displaySnackbar_())},p.prototype.showSnackbar=p.prototype.showSnackbar,p.prototype.checkQueue_=function(){this.queuedNotifications_.length>0&&this.showSnackbar(this.queuedNotifications_.shift())},p.prototype.cleanup_=function(){this.element_.classList.remove(this.cssClasses_.ACTIVE),setTimeout(function(){this.element_.setAttribute("aria-hidden","true"),this.textElement_.textContent="",Boolean(this.actionElement_.getAttribute("aria-hidden"))||(this.setActionHidden_(!0),this.actionElement_.textContent="",this.actionElement_.removeEventListener("click",this.actionHandler_)),this.actionHandler_=void 0,this.message_=void 0,this.actionText_=void 0,this.active=!1,this.checkQueue_()}.bind(this),this.Constant_.ANIMATION_LENGTH)},p.prototype.setActionHidden_=function(e){e?this.actionElement_.setAttribute("aria-hidden","true"):this.actionElement_.removeAttribute("aria-hidden")},n.register({constructor:p,classAsString:"MaterialSnackbar",cssClass:"mdl-js-snackbar",widget:!0});var m=function(e){this.element_=e,this.init()};window.MaterialSpinner=m,m.prototype.Constant_={MDL_SPINNER_LAYER_COUNT:4},m.prototype.CssClasses_={MDL_SPINNER_LAYER:"mdl-spinner__layer",MDL_SPINNER_CIRCLE_CLIPPER:"mdl-spinner__circle-clipper",MDL_SPINNER_CIRCLE:"mdl-spinner__circle",MDL_SPINNER_GAP_PATCH:"mdl-spinner__gap-patch",MDL_SPINNER_LEFT:"mdl-spinner__left",MDL_SPINNER_RIGHT:"mdl-spinner__right"},m.prototype.createLayer=function(e){var t=document.createElement("div");t.classList.add(this.CssClasses_.MDL_SPINNER_LAYER),t.classList.add(this.CssClasses_.MDL_SPINNER_LAYER+"-"+e);var n=document.createElement("div");n.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),n.classList.add(this.CssClasses_.MDL_SPINNER_LEFT);var i=document.createElement("div");i.classList.add(this.CssClasses_.MDL_SPINNER_GAP_PATCH);var r=document.createElement("div");r.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),r.classList.add(this.CssClasses_.MDL_SPINNER_RIGHT);for(var a=[n,i,r],s=0;s<a.length;s++){var o=document.createElement("div");o.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE),a[s].appendChild(o)}t.appendChild(n),t.appendChild(i),t.appendChild(r),this.element_.appendChild(t)},m.prototype.createLayer=m.prototype.createLayer,m.prototype.stop=function(){this.element_.classList.remove("is-active")},m.prototype.stop=m.prototype.stop,m.prototype.start=function(){this.element_.classList.add("is-active")},m.prototype.start=m.prototype.start,m.prototype.init=function(){if(this.element_){for(var e=1;e<=this.Constant_.MDL_SPINNER_LAYER_COUNT;e++)this.createLayer(e);this.element_.classList.add("is-upgraded")}},n.register({constructor:m,classAsString:"MaterialSpinner",cssClass:"mdl-js-spinner",widget:!0});var v=function(e){this.element_=e,this.init()};window.MaterialSwitch=v,v.prototype.Constant_={TINY_TIMEOUT:.001},v.prototype.CssClasses_={INPUT:"mdl-switch__input",TRACK:"mdl-switch__track",THUMB:"mdl-switch__thumb",FOCUS_HELPER:"mdl-switch__focus-helper",RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",RIPPLE_CONTAINER:"mdl-switch__ripple-container",RIPPLE_CENTER:"mdl-ripple--center",RIPPLE:"mdl-ripple",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_CHECKED:"is-checked"},v.prototype.onChange_=function(e){this.updateClasses_()},v.prototype.onFocus_=function(e){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},v.prototype.onBlur_=function(e){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},v.prototype.onMouseUp_=function(e){this.blur_()},v.prototype.updateClasses_=function(){this.checkDisabled(),this.checkToggleState()},v.prototype.blur_=function(){window.setTimeout(function(){this.inputElement_.blur()}.bind(this),this.Constant_.TINY_TIMEOUT)},v.prototype.checkDisabled=function(){this.inputElement_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},v.prototype.checkDisabled=v.prototype.checkDisabled,v.prototype.checkToggleState=function(){this.inputElement_.checked?this.element_.classList.add(this.CssClasses_.IS_CHECKED):this.element_.classList.remove(this.CssClasses_.IS_CHECKED)},v.prototype.checkToggleState=v.prototype.checkToggleState,v.prototype.disable=function(){this.inputElement_.disabled=!0,this.updateClasses_()},v.prototype.disable=v.prototype.disable,v.prototype.enable=function(){this.inputElement_.disabled=!1,this.updateClasses_()},v.prototype.enable=v.prototype.enable,v.prototype.on=function(){this.inputElement_.checked=!0,this.updateClasses_()},v.prototype.on=v.prototype.on,v.prototype.off=function(){this.inputElement_.checked=!1,this.updateClasses_()},v.prototype.off=v.prototype.off,v.prototype.init=function(){if(this.element_){this.inputElement_=this.element_.querySelector("."+this.CssClasses_.INPUT);var e=document.createElement("div");e.classList.add(this.CssClasses_.TRACK);var t=document.createElement("div");t.classList.add(this.CssClasses_.THUMB);var n=document.createElement("span");if(n.classList.add(this.CssClasses_.FOCUS_HELPER),t.appendChild(n),this.element_.appendChild(e),this.element_.appendChild(t),this.boundMouseUpHandler=this.onMouseUp_.bind(this),this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){this.element_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS),this.rippleContainerElement_=document.createElement("span"),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_EFFECT),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CENTER),this.rippleContainerElement_.addEventListener("mouseup",this.boundMouseUpHandler);var i=document.createElement("span");i.classList.add(this.CssClasses_.RIPPLE),this.rippleContainerElement_.appendChild(i),this.element_.appendChild(this.rippleContainerElement_)}this.boundChangeHandler=this.onChange_.bind(this),this.boundFocusHandler=this.onFocus_.bind(this),this.boundBlurHandler=this.onBlur_.bind(this),this.inputElement_.addEventListener("change",this.boundChangeHandler),this.inputElement_.addEventListener("focus",this.boundFocusHandler),this.inputElement_.addEventListener("blur",this.boundBlurHandler),this.element_.addEventListener("mouseup",this.boundMouseUpHandler),this.updateClasses_(),this.element_.classList.add("is-upgraded")}},n.register({constructor:v,classAsString:"MaterialSwitch",cssClass:"mdl-js-switch",widget:!0});var g=function(e){this.element_=e,this.init()};window.MaterialTabs=g,g.prototype.Constant_={},g.prototype.CssClasses_={TAB_CLASS:"mdl-tabs__tab",PANEL_CLASS:"mdl-tabs__panel",ACTIVE_CLASS:"is-active",UPGRADED_CLASS:"is-upgraded",MDL_JS_RIPPLE_EFFECT:"mdl-js-ripple-effect",MDL_RIPPLE_CONTAINER:"mdl-tabs__ripple-container",MDL_RIPPLE:"mdl-ripple",MDL_JS_RIPPLE_EFFECT_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events"},g.prototype.initTabs_=function(){this.element_.classList.contains(this.CssClasses_.MDL_JS_RIPPLE_EFFECT)&&this.element_.classList.add(this.CssClasses_.MDL_JS_RIPPLE_EFFECT_IGNORE_EVENTS),this.tabs_=this.element_.querySelectorAll("."+this.CssClasses_.TAB_CLASS),this.panels_=this.element_.querySelectorAll("."+this.CssClasses_.PANEL_CLASS);for(var t=0;t<this.tabs_.length;t++)new e(this.tabs_[t],this);this.element_.classList.add(this.CssClasses_.UPGRADED_CLASS)},g.prototype.resetTabState_=function(){for(var e=0;e<this.tabs_.length;e++)this.tabs_[e].classList.remove(this.CssClasses_.ACTIVE_CLASS)},g.prototype.resetPanelState_=function(){for(var e=0;e<this.panels_.length;e++)this.panels_[e].classList.remove(this.CssClasses_.ACTIVE_CLASS)},g.prototype.init=function(){this.element_&&this.initTabs_()},n.register({constructor:g,classAsString:"MaterialTabs",cssClass:"mdl-js-tabs"});var y=function(e){this.element_=e,this.maxRows=this.Constant_.NO_MAX_ROWS,this.init()};window.MaterialTextfield=y,y.prototype.Constant_={NO_MAX_ROWS:-1,MAX_ROWS_ATTRIBUTE:"maxrows"},y.prototype.CssClasses_={LABEL:"mdl-textfield__label",INPUT:"mdl-textfield__input",IS_DIRTY:"is-dirty",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_INVALID:"is-invalid",IS_UPGRADED:"is-upgraded",HAS_PLACEHOLDER:"has-placeholder"},y.prototype.onKeyDown_=function(e){var t=e.target.value.split("\n").length;13===e.keyCode&&t>=this.maxRows&&e.preventDefault()},y.prototype.onFocus_=function(e){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},y.prototype.onBlur_=function(e){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},y.prototype.onReset_=function(e){this.updateClasses_()},y.prototype.updateClasses_=function(){this.checkDisabled(),this.checkValidity(),this.checkDirty(),this.checkFocus()},y.prototype.checkDisabled=function(){this.input_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},y.prototype.checkDisabled=y.prototype.checkDisabled,y.prototype.checkFocus=function(){Boolean(this.element_.querySelector(":focus"))?this.element_.classList.add(this.CssClasses_.IS_FOCUSED):this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},y.prototype.checkFocus=y.prototype.checkFocus,y.prototype.checkValidity=function(){this.input_.validity&&(this.input_.validity.valid?this.element_.classList.remove(this.CssClasses_.IS_INVALID):this.element_.classList.add(this.CssClasses_.IS_INVALID))},y.prototype.checkValidity=y.prototype.checkValidity,y.prototype.checkDirty=function(){this.input_.value&&this.input_.value.length>0?this.element_.classList.add(this.CssClasses_.IS_DIRTY):this.element_.classList.remove(this.CssClasses_.IS_DIRTY)},y.prototype.checkDirty=y.prototype.checkDirty,y.prototype.disable=function(){this.input_.disabled=!0,this.updateClasses_()},y.prototype.disable=y.prototype.disable,y.prototype.enable=function(){this.input_.disabled=!1,this.updateClasses_()},y.prototype.enable=y.prototype.enable,y.prototype.change=function(e){this.input_.value=e||"",this.updateClasses_()},y.prototype.change=y.prototype.change,y.prototype.init=function(){if(this.element_&&(this.label_=this.element_.querySelector("."+this.CssClasses_.LABEL),this.input_=this.element_.querySelector("."+this.CssClasses_.INPUT),this.input_)){this.input_.hasAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE)&&(this.maxRows=parseInt(this.input_.getAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE),10),isNaN(this.maxRows)&&(this.maxRows=this.Constant_.NO_MAX_ROWS)),this.input_.hasAttribute("placeholder")&&this.element_.classList.add(this.CssClasses_.HAS_PLACEHOLDER),this.boundUpdateClassesHandler=this.updateClasses_.bind(this),this.boundFocusHandler=this.onFocus_.bind(this),this.boundBlurHandler=this.onBlur_.bind(this),this.boundResetHandler=this.onReset_.bind(this),this.input_.addEventListener("input",this.boundUpdateClassesHandler),this.input_.addEventListener("focus",this.boundFocusHandler),this.input_.addEventListener("blur",this.boundBlurHandler),this.input_.addEventListener("reset",this.boundResetHandler),this.maxRows!==this.Constant_.NO_MAX_ROWS&&(this.boundKeyDownHandler=this.onKeyDown_.bind(this),this.input_.addEventListener("keydown",this.boundKeyDownHandler));var e=this.element_.classList.contains(this.CssClasses_.IS_INVALID);this.updateClasses_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED),e&&this.element_.classList.add(this.CssClasses_.IS_INVALID),this.input_.hasAttribute("autofocus")&&(this.element_.focus(),this.checkFocus())}},n.register({constructor:y,classAsString:"MaterialTextfield",cssClass:"mdl-js-textfield",widget:!0});var _=function(e){this.element_=e,this.init()};window.MaterialTooltip=_,_.prototype.Constant_={},_.prototype.CssClasses_={IS_ACTIVE:"is-active",BOTTOM:"mdl-tooltip--bottom",LEFT:"mdl-tooltip--left",RIGHT:"mdl-tooltip--right",TOP:"mdl-tooltip--top"},_.prototype.handleMouseEnter_=function(e){var t=e.target.getBoundingClientRect(),n=t.left+t.width/2,i=t.top+t.height/2,r=this.element_.offsetWidth/2*-1,a=this.element_.offsetHeight/2*-1;this.element_.classList.contains(this.CssClasses_.LEFT)||this.element_.classList.contains(this.CssClasses_.RIGHT)?(n=t.width/2,i+a<0?(this.element_.style.top="0",this.element_.style.marginTop="0"):(this.element_.style.top=i+"px",this.element_.style.marginTop=a+"px")):n+r<0?(this.element_.style.left="0",this.element_.style.marginLeft="0"):(this.element_.style.left=n+"px",this.element_.style.marginLeft=r+"px"),this.element_.classList.contains(this.CssClasses_.TOP)?this.element_.style.top=t.top-this.element_.offsetHeight-10+"px":this.element_.classList.contains(this.CssClasses_.RIGHT)?this.element_.style.left=t.left+t.width+10+"px":this.element_.classList.contains(this.CssClasses_.LEFT)?this.element_.style.left=t.left-this.element_.offsetWidth-10+"px":this.element_.style.top=t.top+t.height+10+"px",this.element_.classList.add(this.CssClasses_.IS_ACTIVE)},_.prototype.hideTooltip_=function(){this.element_.classList.remove(this.CssClasses_.IS_ACTIVE)},_.prototype.init=function(){if(this.element_){var e=this.element_.getAttribute("for")||this.element_.getAttribute("data-mdl-for");e&&(this.forElement_=document.getElementById(e)),this.forElement_&&(this.forElement_.hasAttribute("tabindex")||this.forElement_.setAttribute("tabindex","0"),this.boundMouseEnterHandler=this.handleMouseEnter_.bind(this),this.boundMouseLeaveAndScrollHandler=this.hideTooltip_.bind(this),this.forElement_.addEventListener("mouseenter",this.boundMouseEnterHandler,!1),this.forElement_.addEventListener("touchend",this.boundMouseEnterHandler,!1),this.forElement_.addEventListener("mouseleave",this.boundMouseLeaveAndScrollHandler,!1),window.addEventListener("scroll",this.boundMouseLeaveAndScrollHandler,!0),window.addEventListener("touchstart",this.boundMouseLeaveAndScrollHandler))}},n.register({constructor:_,classAsString:"MaterialTooltip",cssClass:"mdl-tooltip"});var b=function(e){this.element_=e,this.init()};window.MaterialLayout=b,b.prototype.Constant_={MAX_WIDTH:"(max-width: 1024px)",TAB_SCROLL_PIXELS:100,RESIZE_TIMEOUT:100,MENU_ICON:"&#xE5D2;",CHEVRON_LEFT:"chevron_left",CHEVRON_RIGHT:"chevron_right"},b.prototype.Keycodes_={ENTER:13,ESCAPE:27,SPACE:32},b.prototype.Mode_={STANDARD:0,SEAMED:1,WATERFALL:2,SCROLL:3},b.prototype.CssClasses_={CONTAINER:"mdl-layout__container",HEADER:"mdl-layout__header",DRAWER:"mdl-layout__drawer",CONTENT:"mdl-layout__content",DRAWER_BTN:"mdl-layout__drawer-button",ICON:"material-icons",JS_RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_CONTAINER:"mdl-layout__tab-ripple-container",RIPPLE:"mdl-ripple",RIPPLE_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",HEADER_SEAMED:"mdl-layout__header--seamed",HEADER_WATERFALL:"mdl-layout__header--waterfall",HEADER_SCROLL:"mdl-layout__header--scroll",FIXED_HEADER:"mdl-layout--fixed-header",OBFUSCATOR:"mdl-layout__obfuscator",TAB_BAR:"mdl-layout__tab-bar",TAB_CONTAINER:"mdl-layout__tab-bar-container",TAB:"mdl-layout__tab",TAB_BAR_BUTTON:"mdl-layout__tab-bar-button",TAB_BAR_LEFT_BUTTON:"mdl-layout__tab-bar-left-button",TAB_BAR_RIGHT_BUTTON:"mdl-layout__tab-bar-right-button",TAB_MANUAL_SWITCH:"mdl-layout__tab-manual-switch",PANEL:"mdl-layout__tab-panel",HAS_DRAWER:"has-drawer",HAS_TABS:"has-tabs",HAS_SCROLLING_HEADER:"has-scrolling-header",CASTING_SHADOW:"is-casting-shadow",IS_COMPACT:"is-compact",IS_SMALL_SCREEN:"is-small-screen",IS_DRAWER_OPEN:"is-visible",IS_ACTIVE:"is-active",IS_UPGRADED:"is-upgraded",IS_ANIMATING:"is-animating",ON_LARGE_SCREEN:"mdl-layout--large-screen-only",ON_SMALL_SCREEN:"mdl-layout--small-screen-only"},b.prototype.contentScrollHandler_=function(){if(!this.header_.classList.contains(this.CssClasses_.IS_ANIMATING)){var e=!this.element_.classList.contains(this.CssClasses_.IS_SMALL_SCREEN)||this.element_.classList.contains(this.CssClasses_.FIXED_HEADER);this.content_.scrollTop>0&&!this.header_.classList.contains(this.CssClasses_.IS_COMPACT)?(this.header_.classList.add(this.CssClasses_.CASTING_SHADOW),this.header_.classList.add(this.CssClasses_.IS_COMPACT),e&&this.header_.classList.add(this.CssClasses_.IS_ANIMATING)):this.content_.scrollTop<=0&&this.header_.classList.contains(this.CssClasses_.IS_COMPACT)&&(this.header_.classList.remove(this.CssClasses_.CASTING_SHADOW),this.header_.classList.remove(this.CssClasses_.IS_COMPACT),e&&this.header_.classList.add(this.CssClasses_.IS_ANIMATING))}},b.prototype.keyboardEventHandler_=function(e){e.keyCode===this.Keycodes_.ESCAPE&&this.drawer_.classList.contains(this.CssClasses_.IS_DRAWER_OPEN)&&this.toggleDrawer()},b.prototype.screenSizeHandler_=function(){this.screenSizeMediaQuery_.matches?this.element_.classList.add(this.CssClasses_.IS_SMALL_SCREEN):(this.element_.classList.remove(this.CssClasses_.IS_SMALL_SCREEN),this.drawer_&&(this.drawer_.classList.remove(this.CssClasses_.IS_DRAWER_OPEN),this.obfuscator_.classList.remove(this.CssClasses_.IS_DRAWER_OPEN)))},b.prototype.drawerToggleHandler_=function(e){if(e&&"keydown"===e.type){if(e.keyCode!==this.Keycodes_.SPACE&&e.keyCode!==this.Keycodes_.ENTER)return;e.preventDefault()}this.toggleDrawer()},b.prototype.headerTransitionEndHandler_=function(){this.header_.classList.remove(this.CssClasses_.IS_ANIMATING)},b.prototype.headerClickHandler_=function(){this.header_.classList.contains(this.CssClasses_.IS_COMPACT)&&(this.header_.classList.remove(this.CssClasses_.IS_COMPACT),this.header_.classList.add(this.CssClasses_.IS_ANIMATING))},b.prototype.resetTabState_=function(e){for(var t=0;t<e.length;t++)e[t].classList.remove(this.CssClasses_.IS_ACTIVE)},b.prototype.resetPanelState_=function(e){for(var t=0;t<e.length;t++)e[t].classList.remove(this.CssClasses_.IS_ACTIVE)},b.prototype.toggleDrawer=function(){var e=this.element_.querySelector("."+this.CssClasses_.DRAWER_BTN);this.drawer_.classList.toggle(this.CssClasses_.IS_DRAWER_OPEN),this.obfuscator_.classList.toggle(this.CssClasses_.IS_DRAWER_OPEN),this.drawer_.classList.contains(this.CssClasses_.IS_DRAWER_OPEN)?(this.drawer_.setAttribute("aria-hidden","false"),e.setAttribute("aria-expanded","true")):(this.drawer_.setAttribute("aria-hidden","true"),e.setAttribute("aria-expanded","false"))},b.prototype.toggleDrawer=b.prototype.toggleDrawer,b.prototype.init=function(){if(this.element_){var e=document.createElement("div");e.classList.add(this.CssClasses_.CONTAINER);var n=this.element_.querySelector(":focus");this.element_.parentElement.insertBefore(e,this.element_),this.element_.parentElement.removeChild(this.element_),e.appendChild(this.element_),n&&n.focus();for(var i=this.element_.childNodes,r=i.length,a=0;a<r;a++){var s=i[a];s.classList&&s.classList.contains(this.CssClasses_.HEADER)&&(this.header_=s),s.classList&&s.classList.contains(this.CssClasses_.DRAWER)&&(this.drawer_=s),s.classList&&s.classList.contains(this.CssClasses_.CONTENT)&&(this.content_=s)}window.addEventListener("pageshow",function(e){e.persisted&&(this.element_.style.overflowY="hidden",requestAnimationFrame(function(){this.element_.style.overflowY=""}.bind(this)))}.bind(this),!1),this.header_&&(this.tabBar_=this.header_.querySelector("."+this.CssClasses_.TAB_BAR));var o=this.Mode_.STANDARD;if(this.header_&&(this.header_.classList.contains(this.CssClasses_.HEADER_SEAMED)?o=this.Mode_.SEAMED:this.header_.classList.contains(this.CssClasses_.HEADER_WATERFALL)?(o=this.Mode_.WATERFALL,this.header_.addEventListener("transitionend",this.headerTransitionEndHandler_.bind(this)),this.header_.addEventListener("click",this.headerClickHandler_.bind(this))):this.header_.classList.contains(this.CssClasses_.HEADER_SCROLL)&&(o=this.Mode_.SCROLL,e.classList.add(this.CssClasses_.HAS_SCROLLING_HEADER)),o===this.Mode_.STANDARD?(this.header_.classList.add(this.CssClasses_.CASTING_SHADOW),this.tabBar_&&this.tabBar_.classList.add(this.CssClasses_.CASTING_SHADOW)):o===this.Mode_.SEAMED||o===this.Mode_.SCROLL?(this.header_.classList.remove(this.CssClasses_.CASTING_SHADOW),this.tabBar_&&this.tabBar_.classList.remove(this.CssClasses_.CASTING_SHADOW)):o===this.Mode_.WATERFALL&&(this.content_.addEventListener("scroll",this.contentScrollHandler_.bind(this)),this.contentScrollHandler_())),this.drawer_){var l=this.element_.querySelector("."+this.CssClasses_.DRAWER_BTN);if(!l){(l=document.createElement("div")).setAttribute("aria-expanded","false"),l.setAttribute("role","button"),l.setAttribute("tabindex","0"),l.classList.add(this.CssClasses_.DRAWER_BTN);var u=document.createElement("i");u.classList.add(this.CssClasses_.ICON),u.innerHTML=this.Constant_.MENU_ICON,l.appendChild(u)}this.drawer_.classList.contains(this.CssClasses_.ON_LARGE_SCREEN)?l.classList.add(this.CssClasses_.ON_LARGE_SCREEN):this.drawer_.classList.contains(this.CssClasses_.ON_SMALL_SCREEN)&&l.classList.add(this.CssClasses_.ON_SMALL_SCREEN),l.addEventListener("click",this.drawerToggleHandler_.bind(this)),l.addEventListener("keydown",this.drawerToggleHandler_.bind(this)),this.element_.classList.add(this.CssClasses_.HAS_DRAWER),this.element_.classList.contains(this.CssClasses_.FIXED_HEADER)?this.header_.insertBefore(l,this.header_.firstChild):this.element_.insertBefore(l,this.content_);var c=document.createElement("div");c.classList.add(this.CssClasses_.OBFUSCATOR),this.element_.appendChild(c),c.addEventListener("click",this.drawerToggleHandler_.bind(this)),this.obfuscator_=c,this.drawer_.addEventListener("keydown",this.keyboardEventHandler_.bind(this)),this.drawer_.setAttribute("aria-hidden","true")}if(this.screenSizeMediaQuery_=window.matchMedia(this.Constant_.MAX_WIDTH),this.screenSizeMediaQuery_.addListener(this.screenSizeHandler_.bind(this)),this.screenSizeHandler_(),this.header_&&this.tabBar_){this.element_.classList.add(this.CssClasses_.HAS_TABS);var d=document.createElement("div");d.classList.add(this.CssClasses_.TAB_CONTAINER),this.header_.insertBefore(d,this.tabBar_),this.header_.removeChild(this.tabBar_);var h=document.createElement("div");h.classList.add(this.CssClasses_.TAB_BAR_BUTTON),h.classList.add(this.CssClasses_.TAB_BAR_LEFT_BUTTON);var f=document.createElement("i");f.classList.add(this.CssClasses_.ICON),f.textContent=this.Constant_.CHEVRON_LEFT,h.appendChild(f),h.addEventListener("click",function(){this.tabBar_.scrollLeft-=this.Constant_.TAB_SCROLL_PIXELS}.bind(this));var p=document.createElement("div");p.classList.add(this.CssClasses_.TAB_BAR_BUTTON),p.classList.add(this.CssClasses_.TAB_BAR_RIGHT_BUTTON);var m=document.createElement("i");m.classList.add(this.CssClasses_.ICON),m.textContent=this.Constant_.CHEVRON_RIGHT,p.appendChild(m),p.addEventListener("click",function(){this.tabBar_.scrollLeft+=this.Constant_.TAB_SCROLL_PIXELS}.bind(this)),d.appendChild(h),d.appendChild(this.tabBar_),d.appendChild(p);var v=function(){this.tabBar_.scrollLeft>0?h.classList.add(this.CssClasses_.IS_ACTIVE):h.classList.remove(this.CssClasses_.IS_ACTIVE),this.tabBar_.scrollLeft<this.tabBar_.scrollWidth-this.tabBar_.offsetWidth?p.classList.add(this.CssClasses_.IS_ACTIVE):p.classList.remove(this.CssClasses_.IS_ACTIVE)}.bind(this);this.tabBar_.addEventListener("scroll",v),v();var g=function(){this.resizeTimeoutId_&&clearTimeout(this.resizeTimeoutId_),this.resizeTimeoutId_=setTimeout(function(){v(),this.resizeTimeoutId_=null}.bind(this),this.Constant_.RESIZE_TIMEOUT)}.bind(this);window.addEventListener("resize",g),this.tabBar_.classList.contains(this.CssClasses_.JS_RIPPLE_EFFECT)&&this.tabBar_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS);for(var y=this.tabBar_.querySelectorAll("."+this.CssClasses_.TAB),_=this.content_.querySelectorAll("."+this.CssClasses_.PANEL),b=0;b<y.length;b++)new t(y[b],y,_,this)}this.element_.classList.add(this.CssClasses_.IS_UPGRADED)}},window.MaterialLayoutTab=t,n.register({constructor:b,classAsString:"MaterialLayout",cssClass:"mdl-js-layout"});var w=function(e){this.element_=e,this.init()};window.MaterialDataTable=w,w.prototype.Constant_={},w.prototype.CssClasses_={DATA_TABLE:"mdl-data-table",SELECTABLE:"mdl-data-table--selectable",SELECT_ELEMENT:"mdl-data-table__select",IS_SELECTED:"is-selected",IS_UPGRADED:"is-upgraded"},w.prototype.selectRow_=function(e,t,n){return t?function(){e.checked?t.classList.add(this.CssClasses_.IS_SELECTED):t.classList.remove(this.CssClasses_.IS_SELECTED)}.bind(this):n?function(){var t;if(e.checked)for(t=0;t<n.length;t++)n[t].querySelector("td").querySelector(".mdl-checkbox").MaterialCheckbox.check(),n[t].classList.add(this.CssClasses_.IS_SELECTED);else for(t=0;t<n.length;t++)n[t].querySelector("td").querySelector(".mdl-checkbox").MaterialCheckbox.uncheck(),n[t].classList.remove(this.CssClasses_.IS_SELECTED)}.bind(this):void 0},w.prototype.createCheckbox_=function(e,t){var i=document.createElement("label"),r=["mdl-checkbox","mdl-js-checkbox","mdl-js-ripple-effect",this.CssClasses_.SELECT_ELEMENT];i.className=r.join(" ");var a=document.createElement("input");return a.type="checkbox",a.classList.add("mdl-checkbox__input"),e?(a.checked=e.classList.contains(this.CssClasses_.IS_SELECTED),a.addEventListener("change",this.selectRow_(a,e))):t&&a.addEventListener("change",this.selectRow_(a,null,t)),i.appendChild(a),n.upgradeElement(i,"MaterialCheckbox"),i},w.prototype.init=function(){if(this.element_){var e=this.element_.querySelector("th"),t=Array.prototype.slice.call(this.element_.querySelectorAll("tbody tr")),n=Array.prototype.slice.call(this.element_.querySelectorAll("tfoot tr")),i=t.concat(n);if(this.element_.classList.contains(this.CssClasses_.SELECTABLE)){var r=document.createElement("th"),a=this.createCheckbox_(null,i);r.appendChild(a),e.parentElement.insertBefore(r,e);for(var s=0;s<i.length;s++){var o=i[s].querySelector("td");if(o){var l=document.createElement("td");if("TBODY"===i[s].parentNode.nodeName.toUpperCase()){var u=this.createCheckbox_(i[s]);l.appendChild(u)}i[s].insertBefore(l,o)}}this.element_.classList.add(this.CssClasses_.IS_UPGRADED)}}},n.register({constructor:w,classAsString:"MaterialDataTable",cssClass:"mdl-js-data-table"});var E=function(e){this.element_=e,this.init()};window.MaterialRipple=E,E.prototype.Constant_={INITIAL_SCALE:"scale(0.0001, 0.0001)",INITIAL_SIZE:"1px",INITIAL_OPACITY:"0.4",FINAL_OPACITY:"0",FINAL_SCALE:""},E.prototype.CssClasses_={RIPPLE_CENTER:"mdl-ripple--center",RIPPLE_EFFECT_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",RIPPLE:"mdl-ripple",IS_ANIMATING:"is-animating",IS_VISIBLE:"is-visible"},E.prototype.downHandler_=function(e){if(!this.rippleElement_.style.width&&!this.rippleElement_.style.height){var t=this.element_.getBoundingClientRect();this.boundHeight=t.height,this.boundWidth=t.width,this.rippleSize_=2*Math.sqrt(t.width*t.width+t.height*t.height)+2,this.rippleElement_.style.width=this.rippleSize_+"px",this.rippleElement_.style.height=this.rippleSize_+"px"}if(this.rippleElement_.classList.add(this.CssClasses_.IS_VISIBLE),"mousedown"===e.type&&this.ignoringMouseDown_)this.ignoringMouseDown_=!1;else{if("touchstart"===e.type&&(this.ignoringMouseDown_=!0),this.getFrameCount()>0)return;this.setFrameCount(1);var n,i,r=e.currentTarget.getBoundingClientRect();if(0===e.clientX&&0===e.clientY)n=Math.round(r.width/2),i=Math.round(r.height/2);else{var a=void 0!==e.clientX?e.clientX:e.touches[0].clientX,s=void 0!==e.clientY?e.clientY:e.touches[0].clientY;n=Math.round(a-r.left),i=Math.round(s-r.top)}this.setRippleXY(n,i),this.setRippleStyles(!0),window.requestAnimationFrame(this.animFrameHandler.bind(this))}},E.prototype.upHandler_=function(e){e&&2!==e.detail&&window.setTimeout(function(){this.rippleElement_.classList.remove(this.CssClasses_.IS_VISIBLE)}.bind(this),0)},E.prototype.init=function(){if(this.element_){var e=this.element_.classList.contains(this.CssClasses_.RIPPLE_CENTER);this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT_IGNORE_EVENTS)||(this.rippleElement_=this.element_.querySelector("."+this.CssClasses_.RIPPLE),this.frameCount_=0,this.rippleSize_=0,this.x_=0,this.y_=0,this.ignoringMouseDown_=!1,this.boundDownHandler=this.downHandler_.bind(this),this.element_.addEventListener("mousedown",this.boundDownHandler),this.element_.addEventListener("touchstart",this.boundDownHandler),this.boundUpHandler=this.upHandler_.bind(this),this.element_.addEventListener("mouseup",this.boundUpHandler),this.element_.addEventListener("mouseleave",this.boundUpHandler),this.element_.addEventListener("touchend",this.boundUpHandler),this.element_.addEventListener("blur",this.boundUpHandler),this.getFrameCount=function(){return this.frameCount_},this.setFrameCount=function(e){this.frameCount_=e},this.getRippleElement=function(){return this.rippleElement_},this.setRippleXY=function(e,t){this.x_=e,this.y_=t},this.setRippleStyles=function(t){if(null!==this.rippleElement_){var n,i,r="translate("+this.x_+"px, "+this.y_+"px)";t?(i=this.Constant_.INITIAL_SCALE,this.Constant_.INITIAL_SIZE):(i=this.Constant_.FINAL_SCALE,this.rippleSize_+"px",e&&(r="translate("+this.boundWidth/2+"px, "+this.boundHeight/2+"px)")),n="translate(-50%, -50%) "+r+i,this.rippleElement_.style.webkitTransform=n,this.rippleElement_.style.msTransform=n,this.rippleElement_.style.transform=n,t?this.rippleElement_.classList.remove(this.CssClasses_.IS_ANIMATING):this.rippleElement_.classList.add(this.CssClasses_.IS_ANIMATING)}},this.animFrameHandler=function(){this.frameCount_-- >0?window.requestAnimationFrame(this.animFrameHandler.bind(this)):this.setRippleStyles(!1)})}},n.register({constructor:E,classAsString:"MaterialRipple",cssClass:"mdl-js-ripple-effect",widget:!1})}()},function(e,t,n){e.exports=function(){"use strict";var e=window.CustomEvent;function t(e){for(;e;){if("dialog"===e.localName)return e;e=e.parentElement}return null}function n(e){e&&e.blur&&e!==document.body&&e.blur()}function i(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1}function r(e){return!(!e||!e.hasAttribute("method"))&&"dialog"===e.getAttribute("method").toLowerCase()}function a(e){if(this.dialog_=e,this.replacedStyleTop_=!1,this.openAsModal_=!1,e.hasAttribute("role")||e.setAttribute("role","dialog"),e.show=this.show.bind(this),e.showModal=this.showModal.bind(this),e.close=this.close.bind(this),"returnValue"in e||(e.returnValue=""),"MutationObserver"in window){var t=new MutationObserver(this.maybeHideModal.bind(this));t.observe(e,{attributes:!0,attributeFilter:["open"]})}else{var n,i=!1,r=function(){i?this.downgradeModal():this.maybeHideModal(),i=!1}.bind(this),a=function(t){if(t.target===e){var a="DOMNodeRemoved";i|=t.type.substr(0,a.length)===a,window.clearTimeout(n),n=window.setTimeout(r,0)}};["DOMAttrModified","DOMNodeRemoved","DOMNodeRemovedFromDocument"].forEach(function(t){e.addEventListener(t,a)})}Object.defineProperty(e,"open",{set:this.setOpen.bind(this),get:e.hasAttribute.bind(e,"open")}),this.backdrop_=document.createElement("div"),this.backdrop_.className="backdrop",this.backdrop_.addEventListener("click",this.backdropClick_.bind(this))}e&&"object"!=typeof e||((e=function(e,t){t=t||{};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!!t.bubbles,!!t.cancelable,t.detail||null),n}).prototype=window.Event.prototype),a.prototype={get dialog(){return this.dialog_},maybeHideModal:function(){this.dialog_.hasAttribute("open")&&document.body.contains(this.dialog_)||this.downgradeModal()},downgradeModal:function(){this.openAsModal_&&(this.openAsModal_=!1,this.dialog_.style.zIndex="",this.replacedStyleTop_&&(this.dialog_.style.top="",this.replacedStyleTop_=!1),this.backdrop_.parentNode&&this.backdrop_.parentNode.removeChild(this.backdrop_),s.dm.removeDialog(this))},setOpen:function(e){e?this.dialog_.hasAttribute("open")||this.dialog_.setAttribute("open",""):(this.dialog_.removeAttribute("open"),this.maybeHideModal())},backdropClick_:function(e){if(this.dialog_.hasAttribute("tabindex"))this.dialog_.focus();else{var t=document.createElement("div");this.dialog_.insertBefore(t,this.dialog_.firstChild),t.tabIndex=-1,t.focus(),this.dialog_.removeChild(t)}var n=document.createEvent("MouseEvents");n.initMouseEvent(e.type,e.bubbles,e.cancelable,window,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget),this.dialog_.dispatchEvent(n),e.stopPropagation()},focus_:function(){var e=this.dialog_.querySelector("[autofocus]:not([disabled])");if(!e&&this.dialog_.tabIndex>=0&&(e=this.dialog_),!e){var t=["button","input","keygen","select","textarea"].map(function(e){return e+":not([disabled])"});t.push('[tabindex]:not([disabled]):not([tabindex=""])'),e=this.dialog_.querySelector(t.join(", "))}n(document.activeElement),e&&e.focus()},updateZIndex:function(e,t){if(e<t)throw new Error("dialogZ should never be < backdropZ");this.dialog_.style.zIndex=e,this.backdrop_.style.zIndex=t},show:function(){this.dialog_.open||(this.setOpen(!0),this.focus_())},showModal:function(){if(this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'showModal' on dialog: The element is already open, and therefore cannot be opened modally.");if(!document.body.contains(this.dialog_))throw new Error("Failed to execute 'showModal' on dialog: The element is not in a Document.");if(!s.dm.pushDialog(this))throw new Error("Failed to execute 'showModal' on dialog: There are too many open modal dialogs.");(function(e){for(;e&&e!==document.body;){var t=window.getComputedStyle(e),n=function(e,n){return!(void 0===t[e]||t[e]===n)};if(t.opacity<1||n("zIndex","auto")||n("transform","none")||n("mixBlendMode","normal")||n("filter","none")||n("perspective","none")||"isolate"===t.isolation||"fixed"===t.position||"touch"===t.webkitOverflowScrolling)return!0;e=e.parentElement}return!1})(this.dialog_.parentElement)&&console.warn("A dialog is being shown inside a stacking context. This may cause it to be unusable. For more information, see this link: https://github.com/GoogleChrome/dialog-polyfill/#stacking-context"),this.setOpen(!0),this.openAsModal_=!0,s.needsCentering(this.dialog_)?(s.reposition(this.dialog_),this.replacedStyleTop_=!0):this.replacedStyleTop_=!1,this.dialog_.parentNode.insertBefore(this.backdrop_,this.dialog_.nextSibling),this.focus_()},close:function(t){if(!this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'close' on dialog: The element does not have an 'open' attribute, and therefore cannot be closed.");this.setOpen(!1),void 0!==t&&(this.dialog_.returnValue=t);var n=new e("close",{bubbles:!1,cancelable:!1});this.dialog_.dispatchEvent(n)}};var s={reposition:function(e){var t=document.body.scrollTop||document.documentElement.scrollTop,n=t+(window.innerHeight-e.offsetHeight)/2;e.style.top=Math.max(t,n)+"px"},isInlinePositionSetByStylesheet:function(e){for(var t=0;t<document.styleSheets.length;++t){var n=document.styleSheets[t],r=null;try{r=n.cssRules}catch(e){}if(r)for(var a=0;a<r.length;++a){var s=r[a],o=null;try{o=document.querySelectorAll(s.selectorText)}catch(e){}if(o&&i(o,e)){var l=s.style.getPropertyValue("top"),u=s.style.getPropertyValue("bottom");if(l&&"auto"!==l||u&&"auto"!==u)return!0}}}return!1},needsCentering:function(e){return!("absolute"!==window.getComputedStyle(e).position||"auto"!==e.style.top&&""!==e.style.top||"auto"!==e.style.bottom&&""!==e.style.bottom||s.isInlinePositionSetByStylesheet(e))},forceRegisterDialog:function(e){if((window.HTMLDialogElement||e.showModal)&&console.warn("This browser already supports <dialog>, the polyfill may not work correctly",e),"dialog"!==e.localName)throw new Error("Failed to register dialog: The element is not a dialog.");new a(e)},registerDialog:function(e){e.showModal||s.forceRegisterDialog(e)},DialogManager:function(){this.pendingDialogStack=[];var e=this.checkDOM_.bind(this);this.overlay=document.createElement("div"),this.overlay.className="_dialog_overlay",this.overlay.addEventListener("click",function(t){this.forwardTab_=void 0,t.stopPropagation(),e([])}.bind(this)),this.handleKey_=this.handleKey_.bind(this),this.handleFocus_=this.handleFocus_.bind(this),this.zIndexLow_=1e5,this.zIndexHigh_=100150,this.forwardTab_=void 0,"MutationObserver"in window&&(this.mo_=new MutationObserver(function(t){var n=[];t.forEach(function(e){for(var t,i=0;t=e.removedNodes[i];++i)t instanceof Element&&("dialog"===t.localName&&n.push(t),n=n.concat(t.querySelectorAll("dialog")))}),n.length&&e(n)}))}};if(s.DialogManager.prototype.blockDocument=function(){document.documentElement.addEventListener("focus",this.handleFocus_,!0),document.addEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.observe(document,{childList:!0,subtree:!0})},s.DialogManager.prototype.unblockDocument=function(){document.documentElement.removeEventListener("focus",this.handleFocus_,!0),document.removeEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.disconnect()},s.DialogManager.prototype.updateStacking=function(){for(var e,t=this.zIndexHigh_,n=0;e=this.pendingDialogStack[n];++n)e.updateZIndex(--t,--t),0===n&&(this.overlay.style.zIndex=--t);var i=this.pendingDialogStack[0];i?(i.dialog.parentNode||document.body).appendChild(this.overlay):this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay)},s.DialogManager.prototype.containedByTopDialog_=function(e){for(;e=t(e);){for(var n,i=0;n=this.pendingDialogStack[i];++i)if(n.dialog===e)return 0===i;e=e.parentElement}return!1},s.DialogManager.prototype.handleFocus_=function(e){if(!this.containedByTopDialog_(e.target)&&document.activeElement!==document.documentElement&&(e.preventDefault(),e.stopPropagation(),n(e.target),void 0!==this.forwardTab_)){var t=this.pendingDialogStack[0];return t.dialog.compareDocumentPosition(e.target)&Node.DOCUMENT_POSITION_PRECEDING&&(this.forwardTab_?t.focus_():e.target!==document.documentElement&&document.documentElement.focus()),!1}},s.DialogManager.prototype.handleKey_=function(t){if(this.forwardTab_=void 0,27===t.keyCode){t.preventDefault(),t.stopPropagation();var n=new e("cancel",{bubbles:!1,cancelable:!0}),i=this.pendingDialogStack[0];i&&i.dialog.dispatchEvent(n)&&i.dialog.close()}else 9===t.keyCode&&(this.forwardTab_=!t.shiftKey)},s.DialogManager.prototype.checkDOM_=function(e){this.pendingDialogStack.slice().forEach(function(t){-1!==e.indexOf(t.dialog)?t.downgradeModal():t.maybeHideModal()})},s.DialogManager.prototype.pushDialog=function(e){var t=(this.zIndexHigh_-this.zIndexLow_)/2-1;return!(this.pendingDialogStack.length>=t||(1===this.pendingDialogStack.unshift(e)&&this.blockDocument(),this.updateStacking(),0))},s.DialogManager.prototype.removeDialog=function(e){var t=this.pendingDialogStack.indexOf(e);-1!==t&&(this.pendingDialogStack.splice(t,1),0===this.pendingDialogStack.length&&this.unblockDocument(),this.updateStacking())},s.dm=new s.DialogManager,s.formSubmitter=null,s.useValue=null,void 0===window.HTMLDialogElement){var o=document.createElement("form");if(o.setAttribute("method","dialog"),"dialog"!==o.method){var l=Object.getOwnPropertyDescriptor(HTMLFormElement.prototype,"method");if(l){var u=l.get;l.get=function(){return r(this)?"dialog":u.call(this)};var c=l.set;l.set=function(e){return"string"==typeof e&&"dialog"===e.toLowerCase()?this.setAttribute("method",e):c.call(this,e)},Object.defineProperty(HTMLFormElement.prototype,"method",l)}}document.addEventListener("click",function(e){if(s.formSubmitter=null,s.useValue=null,!e.defaultPrevented){var n=e.target;if(n&&r(n.form)){var i="submit"===n.type&&["button","input"].indexOf(n.localName)>-1;if(!i){if("input"!==n.localName||"image"!==n.type)return;s.useValue=e.offsetX+","+e.offsetY}var a=t(n);a&&(s.formSubmitter=n)}}},!1);var d=HTMLFormElement.prototype.submit;HTMLFormElement.prototype.submit=function(){if(!r(this))return d.call(this);var e=t(this);e&&e.close()},document.addEventListener("submit",function(e){var n=e.target;if(r(n)){e.preventDefault();var i=t(n);if(i){var a=s.formSubmitter;a&&a.form===n?i.close(s.useValue||a.value):i.close(),s.formSubmitter=null}}},!0)}return s}()},function(e,t,n){(function(t){e.exports=function(){"use strict";function e(e){return e&&"[object Function]"==={}.toString.call(e)}function n(e,t){if(1!==e.nodeType)return[];var n=e.ownerDocument.defaultView,i=n.getComputedStyle(e,null);return t?i[t]:i}function i(e){return"HTML"===e.nodeName?e:e.parentNode||e.host}function r(e){if(!e)return document.body;switch(e.nodeName){case"HTML":case"BODY":return e.ownerDocument.body;case"#document":return e.body}var t=n(e),a=t.overflow,s=t.overflowX,o=t.overflowY;return/(auto|scroll|overlay)/.test(a+o+s)?e:r(i(e))}function a(e){return 11===e?K:10===e?X:K||X}function s(e){if(!e)return document.documentElement;for(var t=a(10)?document.body:null,i=e.offsetParent||null;i===t&&e.nextElementSibling;)i=(e=e.nextElementSibling).offsetParent;var r=i&&i.nodeName;return r&&"BODY"!==r&&"HTML"!==r?-1!==["TH","TD","TABLE"].indexOf(i.nodeName)&&"static"===n(i,"position")?s(i):i:e?e.ownerDocument.documentElement:document.documentElement}function o(e){return null===e.parentNode?e:o(e.parentNode)}function l(e,t){if(!(e&&e.nodeType&&t&&t.nodeType))return document.documentElement;var n=e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING,i=n?e:t,r=n?t:e,a=document.createRange();a.setStart(i,0),a.setEnd(r,0);var u=a.commonAncestorContainer;if(e!==u&&t!==u||i.contains(r))return function(e){var t=e.nodeName;return"BODY"!==t&&("HTML"===t||s(e.firstElementChild)===e)}(u)?u:s(u);var c=o(e);return c.host?l(c.host,t):l(e,o(t).host)}function u(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"top",n="top"===t?"scrollTop":"scrollLeft",i=e.nodeName;if("BODY"===i||"HTML"===i){var r=e.ownerDocument.documentElement,a=e.ownerDocument.scrollingElement||r;return a[n]}return e[n]}function c(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=u(t,"top"),r=u(t,"left"),a=n?-1:1;return e.top+=i*a,e.bottom+=i*a,e.left+=r*a,e.right+=r*a,e}function d(e,t){var n="x"===t?"Left":"Top",i="Left"==n?"Right":"Bottom";return parseFloat(e["border"+n+"Width"],10)+parseFloat(e["border"+i+"Width"],10)}function h(e,t,n,i){return G(t["offset"+e],t["scroll"+e],n["client"+e],n["offset"+e],n["scroll"+e],a(10)?parseInt(n["offset"+e])+parseInt(i["margin"+("Height"===e?"Top":"Left")])+parseInt(i["margin"+("Height"===e?"Bottom":"Right")]):0)}function f(e){var t=e.body,n=e.documentElement,i=a(10)&&getComputedStyle(n);return{height:h("Height",t,n,i),width:h("Width",t,n,i)}}function p(e){return J({},e,{right:e.left+e.width,bottom:e.top+e.height})}function m(e){var t={};try{if(a(10)){t=e.getBoundingClientRect();var i=u(e,"top"),r=u(e,"left");t.top+=i,t.left+=r,t.bottom+=i,t.right+=r}else t=e.getBoundingClientRect()}catch(e){}var s={left:t.left,top:t.top,width:t.right-t.left,height:t.bottom-t.top},o="HTML"===e.nodeName?f(e.ownerDocument):{},l=o.width||e.clientWidth||s.right-s.left,c=o.height||e.clientHeight||s.bottom-s.top,h=e.offsetWidth-l,m=e.offsetHeight-c;if(h||m){var v=n(e);h-=d(v,"x"),m-=d(v,"y"),s.width-=h,s.height-=m}return p(s)}function v(e,t){var i=2<arguments.length&&void 0!==arguments[2]&&arguments[2],s=a(10),o="HTML"===t.nodeName,l=m(e),u=m(t),d=r(e),h=n(t),f=parseFloat(h.borderTopWidth,10),v=parseFloat(h.borderLeftWidth,10);i&&o&&(u.top=G(u.top,0),u.left=G(u.left,0));var g=p({top:l.top-u.top-f,left:l.left-u.left-v,width:l.width,height:l.height});if(g.marginTop=0,g.marginLeft=0,!s&&o){var y=parseFloat(h.marginTop,10),_=parseFloat(h.marginLeft,10);g.top-=f-y,g.bottom-=f-y,g.left-=v-_,g.right-=v-_,g.marginTop=y,g.marginLeft=_}return(s&&!i?t.contains(d):t===d&&"BODY"!==d.nodeName)&&(g=c(g,t)),g}function g(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=e.ownerDocument.documentElement,i=v(e,n),r=G(n.clientWidth,window.innerWidth||0),a=G(n.clientHeight,window.innerHeight||0),s=t?0:u(n),o=t?0:u(n,"left"),l={top:s-i.top+i.marginTop,left:o-i.left+i.marginLeft,width:r,height:a};return p(l)}function y(e){var t=e.nodeName;if("BODY"===t||"HTML"===t)return!1;if("fixed"===n(e,"position"))return!0;var r=i(e);return!!r&&y(r)}function _(e){if(!e||!e.parentElement||a())return document.documentElement;for(var t=e.parentElement;t&&"none"===n(t,"transform");)t=t.parentElement;return t||document.documentElement}function b(e,t,n,a){var s=4<arguments.length&&void 0!==arguments[4]&&arguments[4],o={top:0,left:0},u=s?_(e):l(e,t);if("viewport"===a)o=g(u,s);else{var c;"scrollParent"===a?"BODY"===(c=r(i(t))).nodeName&&(c=e.ownerDocument.documentElement):c="window"===a?e.ownerDocument.documentElement:a;var d=v(c,u,s);if("HTML"!==c.nodeName||y(u))o=d;else{var h=f(e.ownerDocument),p=h.height,m=h.width;o.top+=d.top-d.marginTop,o.bottom=p+d.top,o.left+=d.left-d.marginLeft,o.right=m+d.left}}var b="number"==typeof(n=n||0);return o.left+=b?n:n.left||0,o.top+=b?n:n.top||0,o.right-=b?n:n.right||0,o.bottom-=b?n:n.bottom||0,o}function w(e){var t=e.width,n=e.height;return t*n}function E(e,t,n,i,r){var a=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;if(-1===e.indexOf("auto"))return e;var s=b(n,i,a,r),o={top:{width:s.width,height:t.top-s.top},right:{width:s.right-t.right,height:s.height},bottom:{width:s.width,height:s.bottom-t.bottom},left:{width:t.left-s.left,height:s.height}},l=Object.keys(o).map(function(e){return J({key:e},o[e],{area:w(o[e])})}).sort(function(e,t){return t.area-e.area}),u=l.filter(function(e){var t=e.width,i=e.height;return t>=n.clientWidth&&i>=n.clientHeight}),c=0<u.length?u[0].key:l[0].key,d=e.split("-")[1];return c+(d?"-"+d:"")}function S(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,r=i?_(t):l(t,n);return v(n,r,i)}function T(e){var t=e.ownerDocument.defaultView,n=t.getComputedStyle(e),i=parseFloat(n.marginTop||0)+parseFloat(n.marginBottom||0),r=parseFloat(n.marginLeft||0)+parseFloat(n.marginRight||0),a={width:e.offsetWidth+r,height:e.offsetHeight+i};return a}function k(e){var t={left:"right",right:"left",bottom:"top",top:"bottom"};return e.replace(/left|right|bottom|top/g,function(e){return t[e]})}function C(e,t,n){n=n.split("-")[0];var i=T(e),r={width:i.width,height:i.height},a=-1!==["right","left"].indexOf(n),s=a?"top":"left",o=a?"left":"top",l=a?"height":"width",u=a?"width":"height";return r[s]=t[s]+t[l]/2-i[l]/2,r[o]=n===o?t[o]-i[u]:t[k(o)],r}function I(e,t){return Array.prototype.find?e.find(t):e.filter(t)[0]}function A(t,n,i){var r=void 0===i?t:t.slice(0,function(e,t,n){if(Array.prototype.findIndex)return e.findIndex(function(e){return e[t]===n});var i=I(e,function(e){return e[t]===n});return e.indexOf(i)}(t,"name",i));return r.forEach(function(t){t.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var i=t.function||t.fn;t.enabled&&e(i)&&(n.offsets.popper=p(n.offsets.popper),n.offsets.reference=p(n.offsets.reference),n=i(n,t))}),n}function x(e,t){return e.some(function(e){var n=e.name,i=e.enabled;return i&&n===t})}function L(e){for(var t=[!1,"ms","Webkit","Moz","O"],n=e.charAt(0).toUpperCase()+e.slice(1),i=0;i<t.length;i++){var r=t[i],a=r?""+r+n:e;if(void 0!==document.body.style[a])return a}return null}function R(e){var t=e.ownerDocument;return t?t.defaultView:window}function P(e,t,n,i){n.updateBound=i,R(e).addEventListener("resize",n.updateBound,{passive:!0});var a=r(e);return function e(t,n,i,a){var s="BODY"===t.nodeName,o=s?t.ownerDocument.defaultView:t;o.addEventListener(n,i,{passive:!0}),s||e(r(o.parentNode),n,i,a),a.push(o)}(a,"scroll",n.updateBound,n.scrollParents),n.scrollElement=a,n.eventsEnabled=!0,n}function D(){var e,t;this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=(e=this.reference,t=this.state,R(e).removeEventListener("resize",t.updateBound),t.scrollParents.forEach(function(e){e.removeEventListener("scroll",t.updateBound)}),t.updateBound=null,t.scrollParents=[],t.scrollElement=null,t.eventsEnabled=!1,t))}function O(e){return""!==e&&!isNaN(parseFloat(e))&&isFinite(e)}function M(e,t){Object.keys(t).forEach(function(n){var i="";-1!==["width","height","top","right","bottom","left"].indexOf(n)&&O(t[n])&&(i="px"),e.style[n]=t[n]+i})}function N(e,t,n){var i=I(e,function(e){var n=e.name;return n===t}),r=!!i&&e.some(function(e){return e.name===n&&e.enabled&&e.order<i.order});if(!r){var a="`"+t+"`";console.warn("`"+n+"` modifier is required by "+a+" modifier in order to work, be sure to include it before "+a+"!")}return r}function U(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=ne.indexOf(e),i=ne.slice(n+1).concat(ne.slice(0,n));return t?i.reverse():i}function F(e,t,n,i){var r=[0,0],a=-1!==["right","left"].indexOf(i),s=e.split(/(\+|\-)/).map(function(e){return e.trim()}),o=s.indexOf(I(s,function(e){return-1!==e.search(/,|\s/)}));s[o]&&-1===s[o].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var l=/\s*,\s*|\s+/,u=-1===o?[s]:[s.slice(0,o).concat([s[o].split(l)[0]]),[s[o].split(l)[1]].concat(s.slice(o+1))];return(u=u.map(function(e,i){var r=(1===i?!a:a)?"height":"width",s=!1;return e.reduce(function(e,t){return""===e[e.length-1]&&-1!==["+","-"].indexOf(t)?(e[e.length-1]=t,s=!0,e):s?(e[e.length-1]+=t,s=!1,e):e.concat(t)},[]).map(function(e){return function(e,t,n,i){var r=e.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),a=+r[1],s=r[2];if(!a)return e;if(0===s.indexOf("%")){var o;switch(s){case"%p":o=n;break;case"%":case"%r":default:o=i}var l=p(o);return l[t]/100*a}return"vh"===s||"vw"===s?("vh"===s?G(document.documentElement.clientHeight,window.innerHeight||0):G(document.documentElement.clientWidth,window.innerWidth||0))/100*a:a}(e,r,t,n)})})).forEach(function(e,t){e.forEach(function(n,i){O(n)&&(r[t]+=n*("-"===e[i-1]?-1:1))})}),r}for(var B=Math.min,V=Math.floor,H=Math.round,G=Math.max,j="undefined"!=typeof window&&"undefined"!=typeof document,z=["Edge","Trident","Firefox"],W=0,q=0;q<z.length;q+=1)if(j&&0<=navigator.userAgent.indexOf(z[q])){W=1;break}var Y=j&&window.Promise?function(e){var t=!1;return function(){t||(t=!0,window.Promise.resolve().then(function(){t=!1,e()}))}}:function(e){var t=!1;return function(){t||(t=!0,setTimeout(function(){t=!1,e()},W))}},K=j&&!(!window.MSInputMethodContext||!document.documentMode),X=j&&/MSIE 10/.test(navigator.userAgent),$=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Z=function(){function e(e,t){for(var n,i=0;i<t.length;i++)(n=t[i]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Q=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},J=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ee=j&&/Firefox/i.test(navigator.userAgent),te=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],ne=te.slice(3),ie={FLIP:"flip",CLOCKWISE:"clockwise",COUNTERCLOCKWISE:"counterclockwise"},re=function(){function t(n,i){var r=this,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};$(this,t),this.scheduleUpdate=function(){return requestAnimationFrame(r.update)},this.update=Y(this.update.bind(this)),this.options=J({},t.Defaults,a),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=n&&n.jquery?n[0]:n,this.popper=i&&i.jquery?i[0]:i,this.options.modifiers={},Object.keys(J({},t.Defaults.modifiers,a.modifiers)).forEach(function(e){r.options.modifiers[e]=J({},t.Defaults.modifiers[e]||{},a.modifiers?a.modifiers[e]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(e){return J({name:e},r.options.modifiers[e])}).sort(function(e,t){return e.order-t.order}),this.modifiers.forEach(function(t){t.enabled&&e(t.onLoad)&&t.onLoad(r.reference,r.popper,r.options,t,r.state)}),this.update();var s=this.options.eventsEnabled;s&&this.enableEventListeners(),this.state.eventsEnabled=s}return Z(t,[{key:"update",value:function(){return function(){if(!this.state.isDestroyed){var e={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};e.offsets.reference=S(this.state,this.popper,this.reference,this.options.positionFixed),e.placement=E(this.options.placement,e.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),e.originalPlacement=e.placement,e.positionFixed=this.options.positionFixed,e.offsets.popper=C(this.popper,e.offsets.reference,e.placement),e.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",e=A(this.modifiers,e),this.state.isCreated?this.options.onUpdate(e):(this.state.isCreated=!0,this.options.onCreate(e))}}.call(this)}},{key:"destroy",value:function(){return function(){return this.state.isDestroyed=!0,x(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[L("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}.call(this)}},{key:"enableEventListeners",value:function(){return function(){this.state.eventsEnabled||(this.state=P(this.reference,this.options,this.state,this.scheduleUpdate))}.call(this)}},{key:"disableEventListeners",value:function(){return D.call(this)}}]),t}();return re.Utils=("undefined"==typeof window?t:window).PopperUtils,re.placements=te,re.Defaults={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(e){var t=e.placement,n=t.split("-")[0],i=t.split("-")[1];if(i){var r=e.offsets,a=r.reference,s=r.popper,o=-1!==["bottom","top"].indexOf(n),l=o?"left":"top",u=o?"width":"height",c={start:Q({},l,a[l]),end:Q({},l,a[l]+a[u]-s[u])};e.offsets.popper=J({},s,c[i])}return e}},offset:{order:200,enabled:!0,fn:function(e,t){var n,i=t.offset,r=e.placement,a=e.offsets,s=a.popper,o=a.reference,l=r.split("-")[0];return n=O(+i)?[+i,0]:F(i,s,o,l),"left"===l?(s.top+=n[0],s.left-=n[1]):"right"===l?(s.top+=n[0],s.left+=n[1]):"top"===l?(s.left+=n[0],s.top-=n[1]):"bottom"===l&&(s.left+=n[0],s.top+=n[1]),e.popper=s,e},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(e,t){var n=t.boundariesElement||s(e.instance.popper);e.instance.reference===n&&(n=s(n));var i=L("transform"),r=e.instance.popper.style,a=r.top,o=r.left,l=r[i];r.top="",r.left="",r[i]="";var u=b(e.instance.popper,e.instance.reference,t.padding,n,e.positionFixed);r.top=a,r.left=o,r[i]=l,t.boundaries=u;var c=t.priority,d=e.offsets.popper,h={primary:function(e){var n=d[e];return d[e]<u[e]&&!t.escapeWithReference&&(n=G(d[e],u[e])),Q({},e,n)},secondary:function(e){var n="right"===e?"left":"top",i=d[n];return d[e]>u[e]&&!t.escapeWithReference&&(i=B(d[n],u[e]-("right"===e?d.width:d.height))),Q({},n,i)}};return c.forEach(function(e){var t=-1===["left","top"].indexOf(e)?"secondary":"primary";d=J({},d,h[t](e))}),e.offsets.popper=d,e},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(e){var t=e.offsets,n=t.popper,i=t.reference,r=e.placement.split("-")[0],a=V,s=-1!==["top","bottom"].indexOf(r),o=s?"right":"bottom",l=s?"left":"top",u=s?"width":"height";return n[o]<a(i[l])&&(e.offsets.popper[l]=a(i[l])-n[u]),n[l]>a(i[o])&&(e.offsets.popper[l]=a(i[o])),e}},arrow:{order:500,enabled:!0,fn:function(e,t){var i;if(!N(e.instance.modifiers,"arrow","keepTogether"))return e;var r=t.element;if("string"==typeof r){if(!(r=e.instance.popper.querySelector(r)))return e}else if(!e.instance.popper.contains(r))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),e;var a=e.placement.split("-")[0],s=e.offsets,o=s.popper,l=s.reference,u=-1!==["left","right"].indexOf(a),c=u?"height":"width",d=u?"Top":"Left",h=d.toLowerCase(),f=u?"left":"top",m=u?"bottom":"right",v=T(r)[c];l[m]-v<o[h]&&(e.offsets.popper[h]-=o[h]-(l[m]-v)),l[h]+v>o[m]&&(e.offsets.popper[h]+=l[h]+v-o[m]),e.offsets.popper=p(e.offsets.popper);var g=l[h]+l[c]/2-v/2,y=n(e.instance.popper),_=parseFloat(y["margin"+d],10),b=parseFloat(y["border"+d+"Width"],10),w=g-e.offsets.popper[h]-_-b;return w=G(B(o[c]-v,w),0),e.arrowElement=r,e.offsets.arrow=(Q(i={},h,H(w)),Q(i,f,""),i),e},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(e,t){if(x(e.instance.modifiers,"inner"))return e;if(e.flipped&&e.placement===e.originalPlacement)return e;var n=b(e.instance.popper,e.instance.reference,t.padding,t.boundariesElement,e.positionFixed),i=e.placement.split("-")[0],r=k(i),a=e.placement.split("-")[1]||"",s=[];switch(t.behavior){case ie.FLIP:s=[i,r];break;case ie.CLOCKWISE:s=U(i);break;case ie.COUNTERCLOCKWISE:s=U(i,!0);break;default:s=t.behavior}return s.forEach(function(o,l){if(i!==o||s.length===l+1)return e;i=e.placement.split("-")[0],r=k(i);var u=e.offsets.popper,c=e.offsets.reference,d=V,h="left"===i&&d(u.right)>d(c.left)||"right"===i&&d(u.left)<d(c.right)||"top"===i&&d(u.bottom)>d(c.top)||"bottom"===i&&d(u.top)<d(c.bottom),f=d(u.left)<d(n.left),p=d(u.right)>d(n.right),m=d(u.top)<d(n.top),v=d(u.bottom)>d(n.bottom),g="left"===i&&f||"right"===i&&p||"top"===i&&m||"bottom"===i&&v,y=-1!==["top","bottom"].indexOf(i),_=!!t.flipVariations&&(y&&"start"===a&&f||y&&"end"===a&&p||!y&&"start"===a&&m||!y&&"end"===a&&v),b=!!t.flipVariationsByContent&&(y&&"start"===a&&p||y&&"end"===a&&f||!y&&"start"===a&&v||!y&&"end"===a&&m),w=_||b;(h||g||w)&&(e.flipped=!0,(h||g)&&(i=s[l+1]),w&&(a=function(e){return"end"===e?"start":"start"===e?"end":e}(a)),e.placement=i+(a?"-"+a:""),e.offsets.popper=J({},e.offsets.popper,C(e.instance.popper,e.offsets.reference,e.placement)),e=A(e.instance.modifiers,e,"flip"))}),e},behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:function(e){var t=e.placement,n=t.split("-")[0],i=e.offsets,r=i.popper,a=i.reference,s=-1!==["left","right"].indexOf(n),o=-1===["top","left"].indexOf(n);return r[s?"left":"top"]=a[n]-(o?r[s?"width":"height"]:0),e.placement=k(t),e.offsets.popper=p(r),e}},hide:{order:800,enabled:!0,fn:function(e){if(!N(e.instance.modifiers,"hide","preventOverflow"))return e;var t=e.offsets.reference,n=I(e.instance.modifiers,function(e){return"preventOverflow"===e.name}).boundaries;if(t.bottom<n.top||t.left>n.right||t.top>n.bottom||t.right<n.left){if(!0===e.hide)return e;e.hide=!0,e.attributes["x-out-of-boundaries"]=""}else{if(!1===e.hide)return e;e.hide=!1,e.attributes["x-out-of-boundaries"]=!1}return e}},computeStyle:{order:850,enabled:!0,fn:function(e,t){var n=t.x,i=t.y,r=e.offsets.popper,a=I(e.instance.modifiers,function(e){return"applyStyle"===e.name}).gpuAcceleration;void 0!==a&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var o,l,u=void 0===a?t.gpuAcceleration:a,c=s(e.instance.popper),d=m(c),h={position:r.position},f=function(e,t){var n=e.offsets,i=n.popper,r=n.reference,a=H,s=function(e){return e},o=a(r.width),l=a(i.width),u=-1!==["left","right"].indexOf(e.placement),c=-1!==e.placement.indexOf("-"),d=t?u||c||o%2==l%2?a:V:s,h=t?a:s;return{left:d(1==o%2&&1==l%2&&!c&&t?i.left-1:i.left),top:h(i.top),bottom:h(i.bottom),right:d(i.right)}}(e,2>window.devicePixelRatio||!ee),p="bottom"===n?"top":"bottom",v="right"===i?"left":"right",g=L("transform");if(l="bottom"==p?"HTML"===c.nodeName?-c.clientHeight+f.bottom:-d.height+f.bottom:f.top,o="right"==v?"HTML"===c.nodeName?-c.clientWidth+f.right:-d.width+f.right:f.left,u&&g)h[g]="translate3d("+o+"px, "+l+"px, 0)",h[p]=0,h[v]=0,h.willChange="transform";else{var y="bottom"==p?-1:1,_="right"==v?-1:1;h[p]=l*y,h[v]=o*_,h.willChange=p+", "+v}var b={"x-placement":e.placement};return e.attributes=J({},b,e.attributes),e.styles=J({},h,e.styles),e.arrowStyles=J({},e.offsets.arrow,e.arrowStyles),e},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(e){return M(e.instance.popper,e.styles),function(e,t){Object.keys(t).forEach(function(n){var i=t[n];!1===i?e.removeAttribute(n):e.setAttribute(n,t[n])})}(e.instance.popper,e.attributes),e.arrowElement&&Object.keys(e.arrowStyles).length&&M(e.arrowElement,e.arrowStyles),e},onLoad:function(e,t,n,i,r){var a=S(r,t,e,n.positionFixed),s=E(n.placement,a,t,e,n.modifiers.flip.boundariesElement,n.modifiers.flip.padding);return t.setAttribute("x-placement",s),M(t,{position:n.positionFixed?"fixed":"absolute"}),n},gpuAcceleration:void 0}}},re}()}).call(this,n(5))},function(e,t,n){e.exports=function(e){"use strict";function t(){return(t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}e=e&&e.hasOwnProperty("default")?e.default:e;var n="undefined"!=typeof window&&"undefined"!=typeof document,i=n?navigator.userAgent:"",r=/MSIE |Trident\//.test(i),a=/UCBrowser\//.test(i),s=n&&/iPhone|iPad|iPod/.test(navigator.platform)&&!window.MSStream,o={a11y:!0,allowHTML:!0,animateFill:!0,animation:"shift-away",appendTo:function(){return document.body},aria:"describedby",arrow:!1,arrowType:"sharp",boundary:"scrollParent",content:"",delay:0,distance:10,duration:[325,275],flip:!0,flipBehavior:"flip",flipOnUpdate:!1,followCursor:!1,hideOnClick:!0,ignoreAttributes:!1,inertia:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,lazy:!0,maxWidth:350,multiple:!1,offset:0,onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},placement:"top",popperOptions:{},role:"tooltip",showOnInit:!1,size:"regular",sticky:!1,target:"",theme:"dark",touch:!0,touchHold:!1,trigger:"mouseenter focus",triggerTarget:null,updateDuration:0,wait:null,zIndex:9999},l=["arrow","arrowType","boundary","distance","flip","flipBehavior","flipOnUpdate","offset","placement","popperOptions"],u=n?Element.prototype:{},c=u.matches||u.matchesSelector||u.webkitMatchesSelector||u.mozMatchesSelector||u.msMatchesSelector;function d(e){return[].slice.call(e)}function h(e,t){return f(e,function(e){return c.call(e,t)})}function f(e,t){for(;e;){if(t(e))return e;e=e.parentElement}return null}var p={passive:!0},m=4,v="x-placement",g="x-out-of-boundaries",y="tippy-iOS",_="tippy-active",b="tippy-popper",w="tippy-tooltip",E="tippy-content",S="tippy-backdrop",T="tippy-arrow",k="tippy-roundarrow",C=".".concat(b),I=".".concat(w),A=".".concat(E),x=".".concat(S),L=".".concat(T),R=".".concat(k),P=!1;function D(){P||(P=!0,s&&document.body.classList.add(y),window.performance&&document.addEventListener("mousemove",M))}var O=0;function M(){var e=performance.now();e-O<20&&(P=!1,document.removeEventListener("mousemove",M),s||document.body.classList.remove(y)),O=e}function N(){var e=document.activeElement;e&&e.blur&&e._tippy&&e.blur()}var U=Object.keys(o);function F(e,t){return{}.hasOwnProperty.call(e,t)}function B(e,t,n){if(Array.isArray(e)){var i=e[t];return null==i?n:i}return e}function V(e,t){return 0===t?e:function(i){clearTimeout(n),n=setTimeout(function(){e(i)},t)};var n}function H(e,t){return e&&e.modifiers&&e.modifiers[t]}function G(e,t){return e.indexOf(t)>-1}function j(e){return e instanceof Element}function z(e){return!(!e||!F(e,"isVirtual"))||j(e)}function W(e,t){return"function"==typeof e?e.apply(null,t):e}function q(e,t){e.filter(function(e){return"flip"===e.name})[0].enabled=t}function Y(){return document.createElement("div")}function K(e,t){e.forEach(function(e){e&&(e.style.transitionDuration="".concat(t,"ms"))})}function X(e,t){e.forEach(function(e){e&&e.setAttribute("data-state",t)})}function $(e,n){var i=t({},n,{content:W(n.content,[e])},n.ignoreAttributes?{}:function(e){return U.reduce(function(t,n){var i=(e.getAttribute("data-tippy-".concat(n))||"").trim();if(!i)return t;if("content"===n)t[n]=i;else try{t[n]=JSON.parse(i)}catch(e){t[n]=i}return t},{})}(e));return(i.arrow||a)&&(i.animateFill=!1),i}function Z(e,t){Object.keys(e).forEach(function(e){if(!F(t,e))throw new Error("[tippy]: `".concat(e,"` is not a valid option"))})}function Q(e,t){e.innerHTML=j(t)?t.innerHTML:t}function J(e,t){j(t.content)?(Q(e,""),e.appendChild(t.content)):"function"!=typeof t.content&&(e[t.allowHTML?"innerHTML":"textContent"]=t.content)}function ee(e){return{tooltip:e.querySelector(I),backdrop:e.querySelector(x),content:e.querySelector(A),arrow:e.querySelector(L)||e.querySelector(R)}}function te(e){e.setAttribute("data-inertia","")}function ne(e){var t=Y();return"round"===e?(t.className=k,Q(t,'<svg viewBox="0 0 18 7" xmlns="http://www.w3.org/2000/svg"><path d="M0 7s2.021-.015 5.253-4.218C6.584 1.051 7.797.007 9 0c1.203-.007 2.416 1.035 3.761 2.782C16.012 7.005 18 7 18 7H0z"/></svg>')):t.className=T,t}function ie(){var e=Y();return e.className=S,e.setAttribute("data-state","hidden"),e}function re(e,t){e.setAttribute("tabindex","-1"),t.setAttribute("data-interactive","")}function ae(e,t,n){var i=a&&void 0!==document.body.style.webkitTransition?"webkitTransitionEnd":"transitionend";e[t+"EventListener"](i,n)}function se(e){var t=e.getAttribute(v);return t?t.split("-")[0]:""}function oe(e,t,n){n.split(" ").forEach(function(n){e.classList[t](n+"-theme")})}function le(e,t){var n=Y();n.className=b,n.id="tippy-".concat(e),n.style.zIndex=""+t.zIndex,n.style.position="absolute",n.style.top="0",n.style.left="0",t.role&&n.setAttribute("role",t.role);var i=Y();i.className=w,i.style.maxWidth=t.maxWidth+("number"==typeof t.maxWidth?"px":""),i.setAttribute("data-size",t.size),i.setAttribute("data-animation",t.animation),i.setAttribute("data-state","hidden"),oe(i,"add",t.theme);var r=Y();return r.className=E,r.setAttribute("data-state","hidden"),t.interactive&&re(n,i),t.arrow&&i.appendChild(ne(t.arrowType)),t.animateFill&&(i.appendChild(ie()),i.setAttribute("data-animatefill","")),t.inertia&&te(i),J(r,t),i.appendChild(r),n.appendChild(i),n}function ue(e,t,n){var i=ee(e),r=i.tooltip,a=i.content,s=i.backdrop,o=i.arrow;e.style.zIndex=""+n.zIndex,r.setAttribute("data-size",n.size),r.setAttribute("data-animation",n.animation),r.style.maxWidth=n.maxWidth+("number"==typeof n.maxWidth?"px":""),n.role?e.setAttribute("role",n.role):e.removeAttribute("role"),t.content!==n.content&&J(a,n),!t.animateFill&&n.animateFill?(r.appendChild(ie()),r.setAttribute("data-animatefill","")):t.animateFill&&!n.animateFill&&(r.removeChild(s),r.removeAttribute("data-animatefill")),!t.arrow&&n.arrow?r.appendChild(ne(n.arrowType)):t.arrow&&!n.arrow&&r.removeChild(o),t.arrow&&n.arrow&&t.arrowType!==n.arrowType&&r.replaceChild(ne(n.arrowType),o),!t.interactive&&n.interactive?re(e,r):t.interactive&&!n.interactive&&function(e,t){e.removeAttribute("tabindex"),t.removeAttribute("data-interactive")}(e,r),!t.inertia&&n.inertia?te(r):t.inertia&&!n.inertia&&function(e){e.removeAttribute("data-inertia")}(r),t.theme!==n.theme&&(oe(r,"remove",t.theme),oe(r,"add",n.theme))}var ce=1,de=[];function he(n,i){var a,s,u,y,b,w=$(n,i);if(!w.multiple&&n._tippy)return null;var E,S,T,k,I,A=!1,x=!1,L=!1,R=!1,D=[],O=V(ge,w.interactiveDebounce),M=ce++,N=le(M,w),U=ee(N),z={id:M,reference:n,popper:N,popperChildren:U,popperInstance:null,props:w,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},clearDelayTimeouts:Ae,set:xe,setContent:function(e){xe({content:e})},show:Le,hide:Re,enable:function(){z.state.isEnabled=!0},disable:function(){z.state.isEnabled=!1},destroy:function(e){if(!z.state.isDestroyed){x=!0,z.state.isMounted&&Re(0),pe(),delete n._tippy;var t=z.props.target;t&&e&&j(n)&&d(n.querySelectorAll(t)).forEach(function(e){e._tippy&&e._tippy.destroy()}),z.popperInstance&&z.popperInstance.destroy(),x=!1,z.state.isDestroyed=!0}}};return n._tippy=z,N._tippy=z,fe(),w.lazy||Te(),w.showOnInit&&ke(),!w.a11y||w.target||!j(I=J())||c.call(I,"a[href],area[href],button,details,input,textarea,select,iframe,[tabindex]")&&!I.hasAttribute("disabled")||J().setAttribute("tabindex","0"),N.addEventListener("mouseenter",function(e){z.props.interactive&&z.state.isVisible&&"mouseenter"===a&&ke(e,!0)}),N.addEventListener("mouseleave",function(){z.props.interactive&&"mouseenter"===a&&document.addEventListener("mousemove",O)}),z;function Y(){document.removeEventListener("mousemove",me)}function Q(){document.body.removeEventListener("mouseleave",Ce),document.removeEventListener("mousemove",O),de=de.filter(function(e){return e!==O})}function J(){return z.props.triggerTarget||n}function te(){document.addEventListener("click",Ie,!0)}function ne(){return[z.popperChildren.tooltip,z.popperChildren.backdrop,z.popperChildren.content]}function ie(){var e=z.props.followCursor;return e&&"focus"!==a||P&&"initial"===e}function re(e,t){var n=z.popperChildren.tooltip;function i(e){e.target===n&&(ae(n,"remove",i),t())}if(0===e)return t();ae(n,"remove",T),ae(n,"add",i),T=i}function oe(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];J().addEventListener(e,t,n),D.push({eventType:e,handler:t,options:n})}function fe(){z.props.touchHold&&!z.props.target&&(oe("touchstart",ve,p),oe("touchend",ye,p)),z.props.trigger.trim().split(" ").forEach(function(e){if("manual"!==e)if(z.props.target)switch(e){case"mouseenter":oe("mouseover",be),oe("mouseout",we);break;case"focus":oe("focusin",be),oe("focusout",we);break;case"click":oe(e,be)}else switch(oe(e,ve),e){case"mouseenter":oe("mouseleave",ye);break;case"focus":oe(r?"focusout":"blur",_e)}})}function pe(){D.forEach(function(e){var t=e.eventType,n=e.handler,i=e.options;J().removeEventListener(t,n,i)}),D=[]}function me(e){var i=s=e,r=i.clientX,a=i.clientY;if(k){var o=f(e.target,function(e){return e===n}),l=n.getBoundingClientRect(),u=z.props.followCursor,c="horizontal"===u,d="vertical"===u,h=G(["top","bottom"],se(N)),p=N.getAttribute(v),m=!!p&&!!p.split("-")[1],g=h?N.offsetWidth:N.offsetHeight,y=g/2,_=h?0:m?g:y,b=h?m?g:y:0;!o&&z.props.interactive||(z.popperInstance.reference=t({},z.popperInstance.reference,{clientWidth:0,clientHeight:0,getBoundingClientRect:function(){return{width:h?g:0,height:h?0:g,top:(c?l.top:a)-_,bottom:(c?l.bottom:a)+_,left:(d?l.left:r)-b,right:(d?l.right:r)+b}}}),z.popperInstance.update()),"initial"===u&&z.state.isVisible&&Y()}}function ve(e){z.state.isEnabled&&!Ee(e)&&(z.state.isVisible||(a=e.type,e instanceof MouseEvent&&(s=e,de.forEach(function(t){return t(e)}))),"click"===e.type&&!1!==z.props.hideOnClick&&z.state.isVisible?Ce():ke(e))}function ge(e){var t=h(e.target,C)===N,i=f(e.target,function(e){return e===n});t||i||function(e,t,n,i){if(!e)return!0;var r=n.clientX,a=n.clientY,s=i.interactiveBorder,o=i.distance,l=t.top-a>("top"===e?s+o:s),u=a-t.bottom>("bottom"===e?s+o:s),c=t.left-r>("left"===e?s+o:s),d=r-t.right>("right"===e?s+o:s);return l||u||c||d}(se(N),N.getBoundingClientRect(),e,z.props)&&(Q(),Ce())}function ye(e){if(!Ee(e))return z.props.interactive?(document.body.addEventListener("mouseleave",Ce),document.addEventListener("mousemove",O),void de.push(O)):void Ce()}function _e(e){e.target===J()&&(z.props.interactive&&e.relatedTarget&&N.contains(e.relatedTarget)||Ce())}function be(e){h(e.target,z.props.target)&&ke(e)}function we(e){h(e.target,z.props.target)&&Ce()}function Ee(e){var t="ontouchstart"in window,n=G(e.type,"touch"),i=z.props.touchHold;return t&&P&&i&&!n||P&&!i&&n}function Se(){!R&&S&&(R=!0,N.offsetHeight,S())}function Te(){var i=z.props.popperOptions,r=z.popperChildren,a=r.tooltip,s=r.arrow,o=H(i,"preventOverflow");function l(e){z.props.flip&&!z.props.flipOnUpdate&&(e.flipped&&(z.popperInstance.options.placement=e.placement),q(z.popperInstance.modifiers,!1)),a.setAttribute(v,e.placement),!1!==e.attributes[g]?a.setAttribute(g,""):a.removeAttribute(g),E&&E!==e.placement&&L&&(a.style.transition="none",requestAnimationFrame(function(){a.style.transition=""})),E=e.placement,L=z.state.isVisible;var n=se(N),i=a.style;i.top=i.bottom=i.left=i.right="",i[n]=-(z.props.distance-10)+"px";var r=o&&void 0!==o.padding?o.padding:m,s="number"==typeof r,l=t({top:s?r:r.top,bottom:s?r:r.bottom,left:s?r:r.left,right:s?r:r.right},!s&&r);l[n]=s?r+z.props.distance:(r[n]||0)+z.props.distance,z.popperInstance.modifiers.filter(function(e){return"preventOverflow"===e.name})[0].padding=l,k=l}var u=t({eventsEnabled:!1,placement:z.props.placement},i,{modifiers:t({},i?i.modifiers:{},{preventOverflow:t({boundariesElement:z.props.boundary,padding:m},o),arrow:t({element:s,enabled:!!s},H(i,"arrow")),flip:t({enabled:z.props.flip,padding:z.props.distance+m,behavior:z.props.flipBehavior},H(i,"flip")),offset:t({offset:z.props.offset},H(i,"offset"))}),onCreate:function(e){l(e),Se(),i&&i.onCreate&&i.onCreate(e)},onUpdate:function(e){l(e),Se(),i&&i.onUpdate&&i.onUpdate(e)}});z.popperInstance=new e(n,N,u)}function ke(e,n){if(Ae(),!z.state.isVisible){if(z.props.target)return function(e){if(e){var n=h(e.target,z.props.target);n&&!n._tippy&&he(n,t({},z.props,{content:W(i.content,[n]),appendTo:i.appendTo,target:"",showOnInit:!0}))}}(e);if(A=!0,e&&!n&&z.props.onTrigger(z,e),z.props.wait)return z.props.wait(z,e);ie()&&!z.state.isMounted&&(z.popperInstance||Te(),document.addEventListener("mousemove",me)),te();var r=B(z.props.delay,0,o.delay);r?u=setTimeout(function(){Le()},r):Le()}}function Ce(){if(Ae(),!z.state.isVisible)return Y();A=!1;var e=B(z.props.delay,1,o.delay);e?y=setTimeout(function(){z.state.isVisible&&Re()},e):b=requestAnimationFrame(function(){Re()})}function Ie(e){if(!z.props.interactive||!N.contains(e.target)){if(J().contains(e.target)){if(P)return;if(z.state.isVisible&&G(z.props.trigger,"click"))return}!0===z.props.hideOnClick&&(Ae(),Re())}}function Ae(){clearTimeout(u),clearTimeout(y),cancelAnimationFrame(b)}function xe(e){Z(e=e||{},o),pe();var i=z.props,r=$(n,t({},z.props,e,{ignoreAttributes:!0}));r.ignoreAttributes=F(e,"ignoreAttributes")?e.ignoreAttributes||!1:i.ignoreAttributes,z.props=r,fe(),Q(),O=V(ge,r.interactiveDebounce),ue(N,i,r),z.popperChildren=ee(N),z.popperInstance&&(l.some(function(t){return F(e,t)&&e[t]!==i[t]})?(z.popperInstance.destroy(),Te(),z.state.isVisible&&z.popperInstance.enableEventListeners(),z.props.followCursor&&s&&me(s)):z.popperInstance.update())}function Le(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B(z.props.duration,0,o.duration[1]);if(!z.state.isDestroyed&&z.state.isEnabled&&(!P||z.props.touch)&&!J().hasAttribute("disabled")&&!1!==z.props.onShow(z)){te(),N.style.visibility="visible",z.state.isVisible=!0,z.props.interactive&&J().classList.add(_);var t=ne();K(t.concat(N),0),S=function(){if(z.state.isVisible){var n=ie();n&&s?me(s):n||z.popperInstance.update(),z.popperChildren.backdrop&&(z.popperChildren.content.style.transitionDelay=Math.round(e/12)+"ms"),z.props.sticky&&(K([N],r?0:z.props.updateDuration),function e(){z.popperInstance.scheduleUpdate(),z.state.isMounted?requestAnimationFrame(e):K([N],0)}()),K([N],z.props.updateDuration),K(t,e),X(t,"visible"),function(e,t){re(e,function(){z.props.aria&&J().setAttribute("aria-".concat(z.props.aria),N.id),z.props.onShown(z),z.state.isShown=!0})}(e)}},function(){R=!1;var e=ie();z.popperInstance?(q(z.popperInstance.modifiers,z.props.flip),e||(z.popperInstance.reference=n,z.popperInstance.enableEventListeners()),z.popperInstance.scheduleUpdate()):(Te(),e||z.popperInstance.enableEventListeners());var t=z.props.appendTo,i="parent"===t?n.parentNode:W(t,[n]);i.contains(N)||(i.appendChild(N),z.props.onMount(z),z.state.isMounted=!0)}()}}function Re(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B(z.props.duration,1,o.duration[1]);if(!z.state.isDestroyed&&(z.state.isEnabled||x)&&(!1!==z.props.onHide(z)||x)){document.removeEventListener("click",Ie,!0),N.style.visibility="hidden",z.state.isVisible=!1,z.state.isShown=!1,L=!1,z.props.interactive&&J().classList.remove(_);var t=ne();K(t,e),X(t,"hidden"),function(e,t){re(e,function(){!z.state.isVisible&&N.parentNode&&N.parentNode.contains(N)&&(A||Y(),z.props.aria&&J().removeAttribute("aria-".concat(z.props.aria)),z.popperInstance.disableEventListeners(),z.popperInstance.options.placement=z.props.placement,N.parentNode.removeChild(N),z.props.onHidden(z),z.state.isMounted=!1)})}(e)}}}var fe=!1;function pe(e,n){Z(n||{},o),fe||(document.addEventListener("touchstart",D,p),window.addEventListener("blur",N),fe=!0);var i,r=t({},o,n);i=e,"[object Object]"!=={}.toString.call(i)||i.addEventListener||function(e){var t={isVirtual:!0,attributes:e.attributes||{},contains:function(){},setAttribute:function(t,n){e.attributes[t]=n},getAttribute:function(t){return e.attributes[t]},removeAttribute:function(t){delete e.attributes[t]},hasAttribute:function(t){return t in e.attributes},addEventListener:function(){},removeEventListener:function(){},classList:{classNames:{},add:function(t){e.classList.classNames[t]=!0},remove:function(t){delete e.classList.classNames[t]},contains:function(t){return t in e.classList.classNames}}};for(var n in t)e[n]=t[n]}(e);var a=function(e){if(z(e))return[e];if(e instanceof NodeList)return d(e);if(Array.isArray(e))return e;try{return d(document.querySelectorAll(e))}catch(e){return[]}}(e).reduce(function(e,t){var n=t&&he(t,r);return n&&e.push(n),e},[]);return z(e)?a[0]:a}return pe.version="4.3.4",pe.defaults=o,pe.setDefaults=function(e){Object.keys(e).forEach(function(t){o[t]=e[t]})},pe.hideAll=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.exclude,n=e.duration;d(document.querySelectorAll(C)).forEach(function(e){var i,r=e._tippy;if(r){var a=!1;t&&(a=(i=t)._tippy&&!c.call(i,C)?r.reference===t:e===t.popper),a||r.hide(n)}})},pe.group=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.delay,r=void 0===i?e[0].props.delay:i,a=n.duration,s=void 0===a?0:a,o=!1;function l(e){o=e,h()}function u(t){t._originalProps.onShow(t),e.forEach(function(e){e.set({duration:s}),e.state.isVisible&&e.hide()}),l(!0)}function c(e){e._originalProps.onHide(e),l(!1)}function d(e){e._originalProps.onShown(e),e.set({duration:e._originalProps.duration})}function h(){e.forEach(function(e){e.set({onShow:u,onShown:d,onHide:c,delay:o?[0,Array.isArray(r)?r[1]:r]:r,duration:o?s:e._originalProps.duration})})}e.forEach(function(e){e._originalProps?e.set(e._originalProps):e._originalProps=t({},e.props)}),h()},n&&setTimeout(function(){d(document.querySelectorAll("[data-tippy]")).forEach(function(e){var t=e.getAttribute("data-tippy");t&&pe(e,{content:t})})}),pe}(n(14))},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.goog=window.goog||{};window.goog;window.asserts=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,r;return t=e,r=[{key:"assert",value:function(e,t){}}],(i=null)&&n(t.prototype,i),r&&n(t,r),e}(),window.asserts.ENABLE_ASSERTS&&console.assert&&(window.asserts.assert=function(e,t){return console.assert(e,t)})},function(e,t,n){(function(t,n){var i;e.exports=function e(t,n,r){function a(o,l){if(!n[o]){if(!t[o]){var u="function"==typeof i&&i;if(!l&&u)return i(o,!0);if(s)return s(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[o]={exports:{}};t[o][0].call(d.exports,function(e){var n=t[o][1][e];return a(n||e)},d,d.exports,e,t,n,r)}return n[o].exports}for(var s="function"==typeof i&&i,o=0;o<r.length;o++)a(r[o]);return a}({1:[function(e,t,n){var i=e("./utils").addDataAttr,r=e("./browser");t.exports=function(e,t){i(t,r.currentScript(e)),void 0===t.isFileProtocol&&(t.isFileProtocol=/^(file|(chrome|safari)(-extension)?|resource|qrc|app):/.test(e.location.protocol)),t.async=t.async||!1,t.fileAsync=t.fileAsync||!1,t.poll=t.poll||(t.isFileProtocol?1e3:1500),t.env=t.env||("127.0.0.1"==e.location.hostname||"0.0.0.0"==e.location.hostname||"localhost"==e.location.hostname||e.location.port&&e.location.port.length>0||t.isFileProtocol?"development":"production");var n=/!dumpLineNumbers:(comments|mediaquery|all)/.exec(e.location.hash);n&&(t.dumpLineNumbers=n[1]),void 0===t.useFileCache&&(t.useFileCache=!0),void 0===t.onReady&&(t.onReady=!0),t.relativeUrls&&(t.rewriteUrls="all")}},{"./browser":3,"./utils":11}],2:[function(e,t,n){e("promise/polyfill");var i=e("../less/default-options")();if(window.less)for(key in window.less)window.less.hasOwnProperty(key)&&(i[key]=window.less[key]);e("./add-default-options")(window,i),i.plugins=i.plugins||[],window.LESS_PLUGINS&&(i.plugins=i.plugins.concat(window.LESS_PLUGINS));var r,a,s,o=t.exports=e("./index")(window,i);function l(e){e.filename&&console.warn(e),i.async||a.removeChild(s)}window.less=o,i.onReady&&(/!watch/.test(window.location.hash)&&o.watch(),i.async||(r="body { display: none !important }",a=document.head||document.getElementsByTagName("head")[0],(s=document.createElement("style")).type="text/css",s.styleSheet?s.styleSheet.cssText=r:s.appendChild(document.createTextNode(r)),a.appendChild(s)),o.registerStylesheetsImmediately(),o.pageLoadFinished=o.refresh("development"===o.env).then(l,l))},{"../less/default-options":17,"./add-default-options":1,"./index":8,"promise/polyfill":104}],3:[function(e,t,n){var i=e("./utils");t.exports={createCSS:function(e,t,n){var r=n.href||"",a="less:"+(n.title||i.extractId(r)),s=e.getElementById(a),o=!1,l=e.createElement("style");l.setAttribute("type","text/css"),n.media&&l.setAttribute("media",n.media),l.id=a,l.styleSheet||(l.appendChild(e.createTextNode(t)),o=null!==s&&s.childNodes.length>0&&l.childNodes.length>0&&s.firstChild.nodeValue===l.firstChild.nodeValue);var u=e.getElementsByTagName("head")[0];if(null===s||!1===o){var c=n&&n.nextSibling||null;c?c.parentNode.insertBefore(l,c):u.appendChild(l)}if(s&&!1===o&&s.parentNode.removeChild(s),l.styleSheet)try{l.styleSheet.cssText=t}catch(e){throw new Error("Couldn't reassign styleSheet.cssText.")}},currentScript:function(e){var t,n=e.document;return n.currentScript||(t=n.getElementsByTagName("script"))[t.length-1]}}},{"./utils":11}],4:[function(e,t,n){t.exports=function(e,t,n){var i=null;if("development"!==t.env)try{i=void 0===e.localStorage?null:e.localStorage}catch(e){}return{setCSS:function(e,t,r,a){if(i){n.info("saving "+e+" to cache.");try{i.setItem(e,a),i.setItem(e+":timestamp",t),r&&i.setItem(e+":vars",JSON.stringify(r))}catch(t){n.error('failed to save "'+e+'" to local storage for caching.')}}},getCSS:function(e,t,n){var r=i&&i.getItem(e),a=i&&i.getItem(e+":timestamp"),s=i&&i.getItem(e+":vars");if(n=n||{},s=s||"{}",a&&t.lastModified&&new Date(t.lastModified).valueOf()===new Date(a).valueOf()&&JSON.stringify(n)===s)return r}}}},{}],5:[function(e,t,n){var i=e("./utils"),r=e("./browser");t.exports=function(e,t,n){return{add:function(a,s){n.errorReporting&&"html"!==n.errorReporting?"console"===n.errorReporting?function(e,i){var r=e.filename||i,a=[],s=(e.type||"Syntax")+"Error: "+(e.message||"There is an error in your .less file")+" in "+r,o=function(e,t,n){void 0!==e.extract[t]&&a.push("{line} {content}".replace(/\{line\}/,(parseInt(e.line,10)||0)+(t-1)).replace(/\{class\}/,n).replace(/\{content\}/,e.extract[t]))};e.line&&(o(e,0,""),o(e,1,"line"),o(e,2,""),s+=" on line "+e.line+", column "+(e.column+1)+":\n"+a.join("\n")),e.stack&&(e.extract||n.logLevel>=4)&&(s+="\nStack Trace\n"+e.stack),t.logger.error(s)}(a,s):"function"==typeof n.errorReporting&&n.errorReporting("add",a,s):function(t,a){var s,o,l="less-error-message:"+i.extractId(a||""),u=e.document.createElement("div"),c=[],d=t.filename||a,h=d.match(/([^\/]+(\?.*)?)$/)[1];u.id=l,u.className="less-error-message",o="<h3>"+(t.type||"Syntax")+"Error: "+(t.message||"There is an error in your .less file")+'</h3><p>in <a href="'+d+'">'+h+"</a> ";var f=function(e,t,n){void 0!==e.extract[t]&&c.push('<li><label>{line}</label><pre class="{class}">{content}</pre></li>'.replace(/\{line\}/,(parseInt(e.line,10)||0)+(t-1)).replace(/\{class\}/,n).replace(/\{content\}/,e.extract[t]))};t.line&&(f(t,0,""),f(t,1,"line"),f(t,2,""),o+="on line "+t.line+", column "+(t.column+1)+":</p><ul>"+c.join("")+"</ul>"),t.stack&&(t.extract||n.logLevel>=4)&&(o+="<br/>Stack Trace</br />"+t.stack.split("\n").slice(1).join("<br/>")),u.innerHTML=o,r.createCSS(e.document,[".less-error-message ul, .less-error-message li {","list-style-type: none;","margin-right: 15px;","padding: 4px 0;","margin: 0;","}",".less-error-message label {","font-size: 12px;","margin-right: 15px;","padding: 4px 0;","color: #cc7777;","}",".less-error-message pre {","color: #dd6666;","padding: 4px 0;","margin: 0;","display: inline-block;","}",".less-error-message pre.line {","color: #ff0000;","}",".less-error-message h3 {","font-size: 20px;","font-weight: bold;","padding: 15px 0 5px 0;","margin: 0;","}",".less-error-message a {","color: #10a","}",".less-error-message .error {","color: red;","font-weight: bold;","padding-bottom: 2px;","border-bottom: 1px dashed red;","}"].join("\n"),{title:"error-message"}),u.style.cssText=["font-family: Arial, sans-serif","border: 1px solid #e00","background-color: #eee","border-radius: 5px","-webkit-border-radius: 5px","-moz-border-radius: 5px","color: #e00","padding: 15px","margin-bottom: 15px"].join(";"),"development"===n.env&&(s=setInterval(function(){var t=e.document,n=t.body;n&&(t.getElementById(l)?n.replaceChild(u,t.getElementById(l)):n.insertBefore(u,n.firstChild),clearInterval(s))},10))}(a,s)},remove:function(t){n.errorReporting&&"html"!==n.errorReporting?"console"===n.errorReporting||"function"==typeof n.errorReporting&&n.errorReporting("remove",t):function(t){var n=e.document.getElementById("less-error-message:"+i.extractId(t));n&&n.parentNode.removeChild(n)}(t)}}}},{"./browser":3,"./utils":11}],6:[function(e,t,n){t.exports=function(t,n){var i=e("../less/environment/abstract-file-manager.js"),r={},a=function(){};return(a.prototype=new i).alwaysMakePathsAbsolute=function(){return!0},a.prototype.join=function(e,t){return e?this.extractUrlParts(t,e).path:t},a.prototype.doXHR=function(e,i,r,a){var s=new XMLHttpRequest,o=!t.isFileProtocol||t.fileAsync;function l(t,n,i){t.status>=200&&t.status<300?n(t.responseText,t.getResponseHeader("Last-Modified")):"function"==typeof i&&i(t.status,e)}"function"==typeof s.overrideMimeType&&s.overrideMimeType("text/css"),n.debug("XHR: Getting '"+e+"'"),s.open("GET",e,o),s.setRequestHeader("Accept",i||"text/x-less, text/css; q=0.9, */*; q=0.5"),s.send(null),t.isFileProtocol&&!t.fileAsync?0===s.status||s.status>=200&&s.status<300?r(s.responseText):a(s.status,e):o?s.onreadystatechange=function(){4==s.readyState&&l(s,r,a)}:l(s,r,a)},a.prototype.supports=function(e,t,n,i){return!0},a.prototype.clearFileCache=function(){r={}},a.prototype.loadFile=function(e,t,n,i){t&&!this.isPathAbsolute(e)&&(e=t+e),e=n.ext?this.tryAppendExtension(e,n.ext):e,n=n||{};var a=this.extractUrlParts(e,window.location.href),s=a.url,o=this;return new Promise(function(e,t){if(n.useFileCache&&r[s])try{var i=r[s];return e({contents:i,filename:s,webInfo:{lastModified:new Date}})}catch(e){return t({filename:s,message:"Error loading file "+s+" error was "+e.message})}o.doXHR(s,n.mime,function(t,n){r[s]=t,e({contents:t,filename:s,webInfo:{lastModified:n}})},function(e,n){t({type:"File",message:"'"+n+"' wasn't found ("+e+")",href:s})})})},a}},{"../less/environment/abstract-file-manager.js":18}],7:[function(e,t,n){t.exports=function(){var t=e("./../less/functions/function-registry");function n(){throw{type:"Runtime",message:"Image size functions are not supported in browser version of less"}}var i={"image-size":function(e){return n(),-1},"image-width":function(e){return n(),-1},"image-height":function(e){return n(),-1}};t.addMultiple(i)}},{"./../less/functions/function-registry":27}],8:[function(e,t,n){var i=e("./utils").addDataAttr,r=e("./browser");t.exports=function(t,n){var a=t.document,s=e("../less")();s.options=n;var o=s.environment,l=e("./file-manager")(n,s.logger),u=new l;o.addFileManager(u),s.FileManager=l,s.PluginLoader=e("./plugin-loader"),e("./log-listener")(s,n);var c=e("./error-reporting")(t,s,n),d=s.cache=n.cache||e("./cache")(t,n,s.logger);e("./image-size")(s.environment),n.functions&&s.functions.functionRegistry.addMultiple(n.functions);var h=/^text\/(x-)?less$/;function f(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function p(e,t){var n=Array.prototype.slice.call(arguments,2);return function(){var i=n.concat(Array.prototype.slice.call(arguments,0));return e.apply(t,i)}}function m(e){for(var t,i=a.getElementsByTagName("style"),r=0;r<i.length;r++)if((t=i[r]).type.match(h)){var o=f(n);o.modifyVars=e;var l=t.innerHTML||"";o.filename=a.location.href.replace(/#.*$/,""),s.render(l,o,p(function(e,t,n){t?c.add(t,"inline"):(e.type="text/css",e.styleSheet?e.styleSheet.cssText=n.css:e.innerHTML=n.css)},null,t))}}function v(e,t,r,a,l){var h=f(n);i(h,e),h.mime=e.type,l&&(h.modifyVars=l),u.loadFile(e.href,null,h,o).then(function(n){!function(n){var i=n.contents,o=n.filename,l=n.webInfo,f={currentDirectory:u.getPath(o),filename:o,rootFilename:o,rewriteUrls:h.rewriteUrls};if(f.entryPath=f.currentDirectory,f.rootpath=h.rootpath||f.currentDirectory,l){l.remaining=a;var p=d.getCSS(o,l,h.modifyVars);if(!r&&p)return l.local=!0,void t(null,p,i,e,l,o)}c.remove(o),h.rootFileInfo=f,s.render(i,h,function(n,r){n?(n.href=o,t(n)):(d.setCSS(e.href,l.lastModified,h.modifyVars,r.css),t(null,r.css,i,e,l,o))})}(n)}).catch(function(e){console.log(e),t(e)})}function g(e,t,n){for(var i=0;i<s.sheets.length;i++)v(s.sheets[i],e,t,s.sheets.length-(i+1),n)}return s.watch=function(){return s.watchMode||(s.env="development","development"===s.env&&(s.watchTimer=setInterval(function(){s.watchMode&&(u.clearFileCache(),g(function(e,n,i,a,s){e?c.add(e,e.href||a.href):n&&r.createCSS(t.document,n,a)}))},n.poll))),this.watchMode=!0,!0},s.unwatch=function(){return clearInterval(s.watchTimer),this.watchMode=!1,!1},s.registerStylesheetsImmediately=function(){var e=a.getElementsByTagName("link");s.sheets=[];for(var t=0;t<e.length;t++)("stylesheet/less"===e[t].rel||e[t].rel.match(/stylesheet/)&&e[t].type.match(h))&&s.sheets.push(e[t])},s.registerStylesheets=function(){return new Promise(function(e,t){s.registerStylesheetsImmediately(),e()})},s.modifyVars=function(e){return s.refresh(!0,e,!1)},s.refresh=function(e,n,i){return(e||i)&&!1!==i&&u.clearFileCache(),new Promise(function(i,a){var o,l,u,d;o=l=new Date,0===(d=s.sheets.length)?(l=new Date,u=l-o,s.logger.info("Less has finished and no sheets were loaded."),i({startTime:o,endTime:l,totalMilliseconds:u,sheets:s.sheets.length})):g(function(e,n,h,f,p){if(e)return c.add(e,e.href||f.href),void a(e);p.local?s.logger.info("Loading "+f.href+" from cache."):s.logger.info("Rendered "+f.href+" successfully."),r.createCSS(t.document,n,f),s.logger.info("CSS for "+f.href+" generated in "+(new Date-l)+"ms"),0==--d&&(u=new Date-o,s.logger.info("Less has finished. CSS generated in "+u+"ms"),i({startTime:o,endTime:l,totalMilliseconds:u,sheets:s.sheets.length})),l=new Date},e,n),m(n)})},s.refreshStyles=m,s}},{"../less":37,"./browser":3,"./cache":4,"./error-reporting":5,"./file-manager":6,"./image-size":7,"./log-listener":9,"./plugin-loader":10,"./utils":11}],9:[function(e,t,n){t.exports=function(e,t){t.logLevel=void 0!==t.logLevel?t.logLevel:"development"===t.env?3:1,t.loggers||(t.loggers=[{debug:function(e){t.logLevel>=4&&console.log(e)},info:function(e){t.logLevel>=3&&console.log(e)},warn:function(e){t.logLevel>=2&&console.warn(e)},error:function(e){t.logLevel>=1&&console.error(e)}}]);for(var n=0;n<t.loggers.length;n++)e.logger.addListener(t.loggers[n])}},{}],10:[function(e,t,n){var i=e("../less/environment/abstract-plugin-loader.js"),r=function(e){this.less=e};(r.prototype=new i).loadPlugin=function(e,t,n,i,r){return new Promise(function(a,s){r.loadFile(e,t,n,i).then(a).catch(s)})},t.exports=r},{"../less/environment/abstract-plugin-loader.js":19}],11:[function(e,t,n){t.exports={extractId:function(e){return e.replace(/^[a-z-]+:\/+?[^\/]+/,"").replace(/[\?\&]livereload=\w+/,"").replace(/^\//,"").replace(/\.[a-zA-Z]+$/,"").replace(/[^\.\w-]+/g,"-").replace(/\./g,":")},addDataAttr:function(e,t){for(var n in t.dataset)if(t.dataset.hasOwnProperty(n))if("env"===n||"dumpLineNumbers"===n||"rootpath"===n||"errorReporting"===n)e[n]=t.dataset[n];else try{e[n]=JSON.parse(t.dataset[n])}catch(e){}}}},{}],12:[function(e,t,n){t.exports={Math:{ALWAYS:0,PARENS_DIVISION:1,PARENS:2,STRICT_LEGACY:3},RewriteUrls:{OFF:0,LOCAL:1,ALL:2}}},{}],13:[function(e,t,n){var i={};t.exports=i;var r=e("./constants"),a=function(e,t,n){if(e)for(var i=0;i<n.length;i++)e.hasOwnProperty(n[i])&&(t[n[i]]=e[n[i]])},s=["paths","rewriteUrls","rootpath","strictImports","insecure","dumpLineNumbers","compress","syncImport","chunkInput","mime","useFileCache","processImports","pluginManager"];i.Parse=function(e){a(e,this,s),"string"==typeof this.paths&&(this.paths=[this.paths])};var o=["paths","compress","ieCompat","math","strictUnits","sourceMap","importMultiple","urlArgs","javascriptEnabled","pluginManager","importantScope","rewriteUrls"];function l(e){return!/^(?:[a-z-]+:|\/|#)/i.test(e)}function u(e){return"."===e.charAt(0)}i.Eval=function(e,t){a(e,this,o),"string"==typeof this.paths&&(this.paths=[this.paths]),this.frames=t||[],this.importantScope=this.importantScope||[]},i.Eval.prototype.enterCalc=function(){this.calcStack||(this.calcStack=[]),this.calcStack.push(!0),this.inCalc=!0},i.Eval.prototype.exitCalc=function(){this.calcStack.pop(),this.calcStack||(this.inCalc=!1)},i.Eval.prototype.inParenthesis=function(){this.parensStack||(this.parensStack=[]),this.parensStack.push(!0)},i.Eval.prototype.outOfParenthesis=function(){this.parensStack.pop()},i.Eval.prototype.inCalc=!1,i.Eval.prototype.mathOn=!0,i.Eval.prototype.isMathOn=function(e){return!!this.mathOn&&!!("/"!==e||this.math===r.Math.ALWAYS||this.parensStack&&this.parensStack.length)&&(!(this.math>r.Math.PARENS_DIVISION)||this.parensStack&&this.parensStack.length)},i.Eval.prototype.pathRequiresRewrite=function(e){var t=this.rewriteUrls===r.RewriteUrls.LOCAL?u:l;return t(e)},i.Eval.prototype.rewritePath=function(e,t){var n;return t=t||"",n=this.normalizePath(t+e),u(e)&&l(t)&&!1===u(n)&&(n="./"+n),n},i.Eval.prototype.normalizePath=function(e){var t,n=e.split("/").reverse();for(e=[];0!==n.length;)switch(t=n.pop()){case".":break;case"..":0===e.length||".."===e[e.length-1]?e.push(t):e.pop();break;default:e.push(t)}return e.join("/")}},{"./constants":12}],14:[function(e,t,n){t.exports={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}},{}],15:[function(e,t,n){t.exports={colors:e("./colors"),unitConversions:e("./unit-conversions")}},{"./colors":14,"./unit-conversions":16}],16:[function(e,t,n){t.exports={length:{m:1,cm:.01,mm:.001,in:.0254,px:.0254/96,pt:.0254/72,pc:.0254/72*12},duration:{s:1,ms:.001},angle:{rad:1/(2*Math.PI),deg:1/360,grad:.0025,turn:1}}},{}],17:[function(e,t,n){t.exports=function(){return{javascriptEnabled:!1,depends:!1,compress:!1,lint:!1,paths:[],color:!0,strictImports:!1,insecure:!1,rootpath:"",rewriteUrls:!1,ieCompat:!1,math:0,strictUnits:!1,globalVars:null,modifyVars:null,urlArgs:""}}},{}],18:[function(e,t,n){var i=function(){};i.prototype.getPath=function(e){var t=e.lastIndexOf("?");return t>0&&(e=e.slice(0,t)),(t=e.lastIndexOf("/"))<0&&(t=e.lastIndexOf("\\")),t<0?"":e.slice(0,t+1)},i.prototype.tryAppendExtension=function(e,t){return/(\.[a-z]*$)|([\?;].*)$/.test(e)?e:e+t},i.prototype.tryAppendLessExtension=function(e){return this.tryAppendExtension(e,".less")},i.prototype.supportsSync=function(){return!1},i.prototype.alwaysMakePathsAbsolute=function(){return!1},i.prototype.isPathAbsolute=function(e){return/^(?:[a-z-]+:|\/|\\|#)/i.test(e)},i.prototype.join=function(e,t){return e?e+t:t},i.prototype.pathDiff=function(e,t){var n,i,r,a,s=this.extractUrlParts(e),o=this.extractUrlParts(t),l="";if(s.hostPart!==o.hostPart)return"";for(i=Math.max(o.directories.length,s.directories.length),n=0;n<i&&o.directories[n]===s.directories[n];n++);for(a=o.directories.slice(n),r=s.directories.slice(n),n=0;n<a.length-1;n++)l+="../";for(n=0;n<r.length-1;n++)l+=r[n]+"/";return l},i.prototype.extractUrlParts=function(e,t){var n,i,r=/^((?:[a-z-]+:)?\/{2}(?:[^\/\?#]*\/)|([\/\\]))?((?:[^\/\\\?#]*[\/\\])*)([^\/\\\?#]*)([#\?].*)?$/i,a=e.match(r),s={},o=[],l=[];if(!a)throw new Error("Could not parse sheet href - '"+e+"'");if(t&&(!a[1]||a[2])){if(!(i=t.match(r)))throw new Error("Could not parse page url - '"+t+"'");a[1]=a[1]||i[1]||"",a[2]||(a[3]=i[3]+a[3])}if(a[3])for(o=a[3].replace(/\\/g,"/").split("/"),n=0;n<o.length;n++)".."===o[n]?l.pop():"."!==o[n]&&l.push(o[n]);return s.hostPart=a[1],s.directories=l,s.rawPath=(a[1]||"")+o.join("/"),s.path=(a[1]||"")+l.join("/"),s.filename=a[4],s.fileUrl=s.path+(a[4]||""),s.url=s.fileUrl+(a[5]||""),s},t.exports=i},{}],19:[function(e,t,n){var i=e("../functions/function-registry"),r=e("../less-error"),a=function(){this.require=function(){return null}};a.prototype.evalPlugin=function(e,t,n,a,s){var o,l,u,c,d,h;c=t.pluginManager,s&&(d="string"==typeof s?s:s.filename);var f=(new this.less.FileManager).extractUrlParts(d).filename;if(d&&(l=c.get(d))){if(h=this.trySetOptions(l,d,f,a))return h;try{l.use&&l.use.call(this.context,l)}catch(e){return e.message=e.message||"Error during @plugin call",new r(e,n,d)}return l}u={exports:{},pluginManager:c,fileInfo:s},o=i.create();try{new Function("module","require","registerPlugin","functions","tree","less","fileInfo",e)(u,this.require(d),function(e){l=e},o,this.less.tree,this.less,s)}catch(e){return new r(e,n,d)}if(l||(l=u.exports),(l=this.validatePlugin(l,d,f))instanceof r)return l;if(!l)return new r({message:"Not a valid plugin"},n,d);if(l.imports=n,l.filename=d,(!l.minVersion||this.compareVersion("3.0.0",l.minVersion)<0)&&(h=this.trySetOptions(l,d,f,a)))return h;if(c.addPlugin(l,s.filename,o),l.functions=o.getLocalFunctions(),h=this.trySetOptions(l,d,f,a))return h;try{l.use&&l.use.call(this.context,l)}catch(e){return e.message=e.message||"Error during @plugin call",new r(e,n,d)}return l},a.prototype.trySetOptions=function(e,t,n,i){if(i&&!e.setOptions)return new r({message:"Options have been provided but the plugin "+n+" does not support any options."});try{e.setOptions&&e.setOptions(i)}catch(e){return new r(e)}},a.prototype.validatePlugin=function(e,t,n){return e?("function"==typeof e&&(e=new e),e.minVersion&&this.compareVersion(e.minVersion,this.less.version)<0?new r({message:"Plugin "+n+" requires version "+this.versionToString(e.minVersion)}):e):null},a.prototype.compareVersion=function(e,t){"string"==typeof e&&(e=e.match(/^(\d+)\.?(\d+)?\.?(\d+)?/)).shift();for(var n=0;n<e.length;n++)if(e[n]!==t[n])return parseInt(e[n])>parseInt(t[n])?-1:1;return 0},a.prototype.versionToString=function(e){for(var t="",n=0;n<e.length;n++)t+=(t?".":"")+e[n];return t},a.prototype.printUsage=function(e){for(var t=0;t<e.length;t++){var n=e[t];n.printUsage&&n.printUsage()}},t.exports=a},{"../functions/function-registry":27,"../less-error":38}],20:[function(e,t,n){var i=e("../logger"),r=function(e,t){this.fileManagers=t||[],e=e||{};for(var n=[],i=n.concat(["encodeBase64","mimeLookup","charsetLookup","getSourceMapGenerator"]),r=0;r<i.length;r++){var a=i[r],s=e[a];s?this[a]=s.bind(e):r<n.length&&this.warn("missing required function in environment - "+a)}};r.prototype.getFileManager=function(e,t,n,r,a){e||i.warn("getFileManager called with no filename.. Please report this issue. continuing."),null==t&&i.warn("getFileManager called with null directory.. Please report this issue. continuing.");var s=this.fileManagers;n.pluginManager&&(s=[].concat(s).concat(n.pluginManager.getFileManagers()));for(var o=s.length-1;o>=0;o--){var l=s[o];if(l[a?"supportsSync":"supports"](e,t,n,r))return l}return null},r.prototype.addFileManager=function(e){this.fileManagers.push(e)},r.prototype.clearFileManagers=function(){this.fileManagers=[]},t.exports=r},{"../logger":39}],21:[function(e,t,n){var i=e("./function-registry"),r=e("../tree/anonymous"),a=e("../tree/keyword");i.addMultiple({boolean:function(e){return e?a.True:a.False},if:function(e,t,n){return e?t:n||new r}})},{"../tree/anonymous":50,"../tree/keyword":70,"./function-registry":27}],22:[function(e,t,n){var i=e("../tree/color"),r=e("./function-registry");function a(e,t,n){var r,a,s,o,l=t.alpha,u=n.alpha,c=[];s=u+l*(1-u);for(var d=0;d<3;d++)r=t.rgb[d]/255,a=n.rgb[d]/255,o=e(r,a),s&&(o=(u*a+l*(r-u*(r+a-o)))/s),c[d]=255*o;return new i(c,s)}var s={multiply:function(e,t){return e*t},screen:function(e,t){return e+t-e*t},overlay:function(e,t){return(e*=2)<=1?s.multiply(e,t):s.screen(e-1,t)},softlight:function(e,t){var n=1,i=e;return t>.5&&(i=1,n=e>.25?Math.sqrt(e):((16*e-12)*e+4)*e),e-(1-2*t)*i*(n-e)},hardlight:function(e,t){return s.overlay(t,e)},difference:function(e,t){return Math.abs(e-t)},exclusion:function(e,t){return e+t-2*e*t},average:function(e,t){return(e+t)/2},negation:function(e,t){return 1-Math.abs(e+t-1)}};for(var o in s)s.hasOwnProperty(o)&&(a[o]=a.bind(null,s[o]));r.addMultiple(a)},{"../tree/color":55,"./function-registry":27}],23:[function(e,t,n){var i,r=e("../tree/dimension"),a=e("../tree/color"),s=e("../tree/quoted"),o=e("../tree/anonymous"),l=e("./function-registry");function u(e){return Math.min(1,Math.max(0,e))}function c(e,t){var n=i.hsla(t.h,t.s,t.l,t.a);if(n)return e.value&&/^(rgb|hsl)/.test(e.value)?n.value=e.value:n.value="rgb",n}function d(e){if(e instanceof r)return parseFloat(e.unit.is("%")?e.value/100:e.value);if("number"==typeof e)return e;throw{type:"Argument",message:"color functions take numbers as parameters"}}i={rgb:function(e,t,n){var r=i.rgba(e,t,n,1);if(r)return r.value="rgb",r},rgba:function(e,t,n,i){try{if(e instanceof a)return i=t?d(t):e.alpha,new a(e.rgb,i,"rgba");var s=[e,t,n].map(function(e){return n=255,(t=e)instanceof r&&t.unit.is("%")?parseFloat(t.value*n/100):d(t);var t,n});return i=d(i),new a(s,i,"rgba")}catch(e){}},hsl:function(e,t,n){var r=i.hsla(e,t,n,1);if(r)return r.value="hsl",r},hsla:function(e,t,n,i){try{if(e instanceof a)return i=t?d(t):e.alpha,new a(e.rgb,i,"hsla");var r,s;function o(e){return 6*(e=e<0?e+1:e>1?e-1:e)<1?r+(s-r)*e*6:2*e<1?s:3*e<2?r+(s-r)*(2/3-e)*6:r}e=d(e)%360/360,t=u(d(t)),n=u(d(n)),i=u(d(i)),r=2*n-(s=n<=.5?n*(t+1):n+t-n*t);var l=[255*o(e+1/3),255*o(e),255*o(e-1/3)];return i=d(i),new a(l,i,"hsla")}catch(e){}},hsv:function(e,t,n){return i.hsva(e,t,n,1)},hsva:function(e,t,n,r){var a,s;e=d(e)%360/360*360,t=d(t),n=d(n),r=d(r),a=Math.floor(e/60%6);var o=[n,n*(1-t),n*(1-(s=e/60-a)*t),n*(1-(1-s)*t)],l=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]];return i.rgba(255*o[l[a][0]],255*o[l[a][1]],255*o[l[a][2]],r)},hue:function(e){return new r(e.toHSL().h)},saturation:function(e){return new r(100*e.toHSL().s,"%")},lightness:function(e){return new r(100*e.toHSL().l,"%")},hsvhue:function(e){return new r(e.toHSV().h)},hsvsaturation:function(e){return new r(100*e.toHSV().s,"%")},hsvvalue:function(e){return new r(100*e.toHSV().v,"%")},red:function(e){return new r(e.rgb[0])},green:function(e){return new r(e.rgb[1])},blue:function(e){return new r(e.rgb[2])},alpha:function(e){return new r(e.toHSL().a)},luma:function(e){return new r(e.luma()*e.alpha*100,"%")},luminance:function(e){var t=.2126*e.rgb[0]/255+.7152*e.rgb[1]/255+.0722*e.rgb[2]/255;return new r(t*e.alpha*100,"%")},saturate:function(e,t,n){if(!e.rgb)return null;var i=e.toHSL();return void 0!==n&&"relative"===n.value?i.s+=i.s*t.value/100:i.s+=t.value/100,i.s=u(i.s),c(e,i)},desaturate:function(e,t,n){var i=e.toHSL();return void 0!==n&&"relative"===n.value?i.s-=i.s*t.value/100:i.s-=t.value/100,i.s=u(i.s),c(e,i)},lighten:function(e,t,n){var i=e.toHSL();return void 0!==n&&"relative"===n.value?i.l+=i.l*t.value/100:i.l+=t.value/100,i.l=u(i.l),c(e,i)},darken:function(e,t,n){var i=e.toHSL();return void 0!==n&&"relative"===n.value?i.l-=i.l*t.value/100:i.l-=t.value/100,i.l=u(i.l),c(e,i)},fadein:function(e,t,n){var i=e.toHSL();return void 0!==n&&"relative"===n.value?i.a+=i.a*t.value/100:i.a+=t.value/100,i.a=u(i.a),c(e,i)},fadeout:function(e,t,n){var i=e.toHSL();return void 0!==n&&"relative"===n.value?i.a-=i.a*t.value/100:i.a-=t.value/100,i.a=u(i.a),c(e,i)},fade:function(e,t){var n=e.toHSL();return n.a=t.value/100,n.a=u(n.a),c(e,n)},spin:function(e,t){var n=e.toHSL(),i=(n.h+t.value)%360;return n.h=i<0?360+i:i,c(e,n)},mix:function(e,t,n){e.toHSL&&t.toHSL||(console.log(t.type),console.dir(t)),n||(n=new r(50));var i=n.value/100,s=2*i-1,o=e.toHSL().a-t.toHSL().a,l=((s*o==-1?s:(s+o)/(1+s*o))+1)/2,u=1-l,c=[e.rgb[0]*l+t.rgb[0]*u,e.rgb[1]*l+t.rgb[1]*u,e.rgb[2]*l+t.rgb[2]*u],d=e.alpha*i+t.alpha*(1-i);return new a(c,d)},greyscale:function(e){return i.desaturate(e,new r(100))},contrast:function(e,t,n,r){if(!e.rgb)return null;if(void 0===n&&(n=i.rgba(255,255,255,1)),void 0===t&&(t=i.rgba(0,0,0,1)),t.luma()>n.luma()){var a=n;n=t,t=a}return r=void 0===r?.43:d(r),e.luma()<r?n:t},argb:function(e){return new o(e.toARGB())},color:function(e){if(e instanceof s&&/^#([A-Fa-f0-9]{8}|[A-Fa-f0-9]{6}|[A-Fa-f0-9]{3,4})$/i.test(e.value)){var t=e.value.slice(1);return new a(t,void 0,"#"+t)}if(e instanceof a||(e=a.fromKeyword(e.value)))return e.value=void 0,e;throw{type:"Argument",message:"argument must be a color keyword or 3|4|6|8 digit hex e.g. #FFF"}},tint:function(e,t){return i.mix(i.rgb(255,255,255),e,t)},shade:function(e,t){return i.mix(i.rgb(0,0,0),e,t)}},l.addMultiple(i)},{"../tree/anonymous":50,"../tree/color":55,"../tree/dimension":62,"../tree/quoted":80,"./function-registry":27}],24:[function(e,t,n){t.exports=function(t){var n=e("../tree/quoted"),i=e("../tree/url"),r=e("../utils"),a=e("./function-registry"),s=function(e,t){return new i(t,e.index,e.currentFileInfo).eval(e.context)},o=e("../logger");a.add("data-uri",function(e,a){a||(a=e,e=null);var l=e&&e.value,u=a.value,c=this.currentFileInfo,d=c.rewriteUrls?c.currentDirectory:c.entryPath,h=u.indexOf("#"),f="";-1!==h&&(f=u.slice(h),u=u.slice(0,h));var p=r.clone(this.context);p.rawBuffer=!0;var m=t.getFileManager(u,d,p,t,!0);if(!m)return s(this,a);var v=!1;if(e)v=/;base64$/.test(l);else{if("image/svg+xml"===(l=t.mimeLookup(u)))v=!1;else{var g=t.charsetLookup(l);v=["US-ASCII","UTF-8"].indexOf(g)<0}v&&(l+=";base64")}var y=m.loadFileSync(u,d,p,t);if(!y.contents)return o.warn("Skipped data-uri embedding of "+u+" because file not found"),s(this,a||e);var _=y.contents;if(v&&!t.encodeBase64)return s(this,a);_=v?t.encodeBase64(_):encodeURIComponent(_);var b="data:"+l+","+_+f;return b.length>=32768&&!1!==this.context.ieCompat?(o.warn("Skipped data-uri embedding of "+u+" because its size ("+b.length+" characters) exceeds IE8-safe 32768 characters!"),s(this,a||e)):new i(new n('"'+b+'"',b,!1,this.index,this.currentFileInfo),this.index,this.currentFileInfo)})}},{"../logger":39,"../tree/quoted":80,"../tree/url":85,"../utils":89,"./function-registry":27}],25:[function(e,t,n){var i=e("../tree/keyword"),r=e("./function-registry"),a={eval:function(){var e=this.value_,t=this.error_;if(t)throw t;if(null!=e)return e?i.True:i.False},value:function(e){this.value_=e},error:function(e){this.error_=e},reset:function(){this.value_=this.error_=null}};r.add("default",a.eval.bind(a)),t.exports=a},{"../tree/keyword":70,"./function-registry":27}],26:[function(e,t,n){var i=e("../tree/expression"),r=function(e,t,n,i){this.name=e.toLowerCase(),this.index=n,this.context=t,this.currentFileInfo=i,this.func=t.frames[0].functionRegistry.get(this.name)};r.prototype.isValid=function(){return Boolean(this.func)},r.prototype.call=function(e){return Array.isArray(e)&&(e=e.filter(function(e){return"Comment"!==e.type}).map(function(e){if("Expression"===e.type){var t=e.value.filter(function(e){return"Comment"!==e.type});return 1===t.length?t[0]:new i(t)}return e})),this.func.apply(this,e)},t.exports=r},{"../tree/expression":64}],27:[function(e,t,n){t.exports=function e(t){return{_data:{},add:function(e,t){e=e.toLowerCase(),this._data.hasOwnProperty(e),this._data[e]=t},addMultiple:function(e){Object.keys(e).forEach(function(t){this.add(t,e[t])}.bind(this))},get:function(e){return this._data[e]||t&&t.get(e)},getLocalFunctions:function(){return this._data},inherit:function(){return e(this)},create:function(t){return e(t)}}}(null)},{}],28:[function(e,t,n){t.exports=function(t){var n={functionRegistry:e("./function-registry"),functionCaller:e("./function-caller")};return e("./boolean"),e("./default"),e("./color"),e("./color-blending"),e("./data-uri")(t),e("./list"),e("./math"),e("./number"),e("./string"),e("./svg")(t),e("./types"),n}},{"./boolean":21,"./color":23,"./color-blending":22,"./data-uri":24,"./default":25,"./function-caller":26,"./function-registry":27,"./list":29,"./math":31,"./number":32,"./string":33,"./svg":34,"./types":35}],29:[function(e,t,n){var i=e("../tree/comment"),r=e("../tree/dimension"),a=e("../tree/declaration"),s=e("../tree/expression"),o=e("../tree/ruleset"),l=e("../tree/selector"),u=e("../tree/element"),c=e("./function-registry"),d=function(e){var t=Array.isArray(e.value)?e.value:Array(e);return t};c.addMultiple({_SELF:function(e){return e},extract:function(e,t){return t=t.value-1,d(e)[t]},length:function(e){return new r(d(e).length)},range:function(e,t,n){var i,a,o=1,l=[];t?(a=t,i=e.value,n&&(o=n.value)):(i=1,a=e);for(var u=i;u<=a.value;u+=o)l.push(new r(u,a.unit));return new s(l)},each:function(e,t){var n,s,c=[];s=e.value?Array.isArray(e.value)?e.value:[e.value]:e.ruleset?e.ruleset.rules:e.rules?e.rules:Array.isArray(e)?e:[e];var d="@value",h="@key",f="@index";t.params?(d=t.params[0]&&t.params[0].name,h=t.params[1]&&t.params[1].name,f=t.params[2]&&t.params[2].name,t=t.rules):t=t.ruleset;for(var p=0;p<s.length;p++){var m,v,g=s[p];g instanceof a?(m="string"==typeof g.name?g.name:g.name[0].value,v=g.value):(m=new r(p+1),v=g),g instanceof i||(n=t.rules.slice(0),d&&n.push(new a(d,v,!1,!1,this.index,this.currentFileInfo)),f&&n.push(new a(f,new r(p+1),!1,!1,this.index,this.currentFileInfo)),h&&n.push(new a(h,m,!1,!1,this.index,this.currentFileInfo)),c.push(new o([new l([new u("","&")])],n,t.strictImports,t.visibilityInfo())))}return new o([new l([new u("","&")])],c,t.strictImports,t.visibilityInfo()).eval(this.context)}})},{"../tree/comment":57,"../tree/declaration":60,"../tree/dimension":62,"../tree/element":63,"../tree/expression":64,"../tree/ruleset":81,"../tree/selector":82,"./function-registry":27}],30:[function(e,t,n){var i=e("../tree/dimension"),r=function(){};r._math=function(e,t,n){if(!(n instanceof i))throw{type:"Argument",message:"argument must be a number"};return null==t?t=n.unit:n=n.unify(),new i(e(parseFloat(n.value)),t)},t.exports=r},{"../tree/dimension":62}],31:[function(e,t,n){var i=e("./function-registry"),r=e("./math-helper.js"),a={ceil:null,floor:null,sqrt:null,abs:null,tan:"",sin:"",cos:"",atan:"rad",asin:"rad",acos:"rad"};for(var s in a)a.hasOwnProperty(s)&&(a[s]=r._math.bind(null,Math[s],a[s]));a.round=function(e,t){var n=void 0===t?0:t.value;return r._math(function(e){return e.toFixed(n)},null,e)},i.addMultiple(a)},{"./function-registry":27,"./math-helper.js":30}],32:[function(e,t,n){var i=e("../tree/dimension"),r=e("../tree/anonymous"),a=e("./function-registry"),s=e("./math-helper.js"),o=function(e,t){switch((t=Array.prototype.slice.call(t)).length){case 0:throw{type:"Argument",message:"one or more arguments required"}}var n,a,s,o,l,u,c,d,h=[],f={};for(n=0;n<t.length;n++)if((s=t[n])instanceof i)if(o=""===s.unit.toString()&&void 0!==d?new i(s.value,d).unify():s.unify(),u=""===o.unit.toString()&&void 0!==c?c:o.unit.toString(),c=""!==u&&void 0===c||""!==u&&""===h[0].unify().unit.toString()?u:c,d=""!==u&&void 0===d?s.unit.toString():d,void 0!==(a=void 0!==f[""]&&""!==u&&u===c?f[""]:f[u]))l=""===h[a].unit.toString()&&void 0!==d?new i(h[a].value,d).unify():h[a].unify(),(e&&o.value<l.value||!e&&o.value>l.value)&&(h[a]=s);else{if(void 0!==c&&u!==c)throw{type:"Argument",message:"incompatible types"};f[u]=h.length,h.push(s)}else Array.isArray(t[n].value)&&Array.prototype.push.apply(t,Array.prototype.slice.call(t[n].value));return 1==h.length?h[0]:(t=h.map(function(e){return e.toCSS(this.context)}).join(this.context.compress?",":", "),new r((e?"min":"max")+"("+t+")"))};a.addMultiple({min:function(){return o(!0,arguments)},max:function(){return o(!1,arguments)},convert:function(e,t){return e.convertTo(t.value)},pi:function(){return new i(Math.PI)},mod:function(e,t){return new i(e.value%t.value,e.unit)},pow:function(e,t){if("number"==typeof e&&"number"==typeof t)e=new i(e),t=new i(t);else if(!(e instanceof i&&t instanceof i))throw{type:"Argument",message:"arguments must be numbers"};return new i(Math.pow(e.value,t.value),e.unit)},percentage:function(e){var t=s._math(function(e){return 100*e},"%",e);return t}})},{"../tree/anonymous":50,"../tree/dimension":62,"./function-registry":27,"./math-helper.js":30}],33:[function(e,t,n){var i=e("../tree/quoted"),r=e("../tree/anonymous"),a=e("../tree/javascript"),s=e("./function-registry");s.addMultiple({e:function(e){return new r(e instanceof a?e.evaluated:e.value)},escape:function(e){return new r(encodeURI(e.value).replace(/=/g,"%3D").replace(/:/g,"%3A").replace(/#/g,"%23").replace(/;/g,"%3B").replace(/\(/g,"%28").replace(/\)/g,"%29"))},replace:function(e,t,n,r){var a=e.value;return n="Quoted"===n.type?n.value:n.toCSS(),a=a.replace(new RegExp(t.value,r?r.value:""),n),new i(e.quote||"",a,e.escaped)},"%":function(e){for(var t=Array.prototype.slice.call(arguments,1),n=e.value,r=0;r<t.length;r++)n=n.replace(/%[sda]/i,function(e){var n="Quoted"===t[r].type&&e.match(/s/i)?t[r].value:t[r].toCSS();return e.match(/[A-Z]$/)?encodeURIComponent(n):n});return n=n.replace(/%%/g,"%"),new i(e.quote||"",n,e.escaped)}})},{"../tree/anonymous":50,"../tree/javascript":68,"../tree/quoted":80,"./function-registry":27}],34:[function(e,t,n){t.exports=function(t){var n=e("../tree/dimension"),i=e("../tree/color"),r=e("../tree/expression"),a=e("../tree/quoted"),s=e("../tree/url"),o=e("./function-registry");o.add("svg-gradient",function(e){var t,o,l,u,c,d,h,f,p="linear",m='x="0" y="0" width="1" height="1"',v={compress:!1},g=e.toCSS(v);function y(){throw{type:"Argument",message:"svg-gradient expects direction, start_color [start_position], [color position,]..., end_color [end_position] or direction, color list"}}switch(2==arguments.length?(arguments[1].value.length<2&&y(),t=arguments[1].value):arguments.length<3?y():t=Array.prototype.slice.call(arguments,1),g){case"to bottom":o='x1="0%" y1="0%" x2="0%" y2="100%"';break;case"to right":o='x1="0%" y1="0%" x2="100%" y2="0%"';break;case"to bottom right":o='x1="0%" y1="0%" x2="100%" y2="100%"';break;case"to top right":o='x1="0%" y1="100%" x2="100%" y2="0%"';break;case"ellipse":case"ellipse at center":p="radial",o='cx="50%" cy="50%" r="75%"',m='x="-50" y="-50" width="101" height="101"';break;default:throw{type:"Argument",message:"svg-gradient direction must be 'to bottom', 'to right', 'to bottom right', 'to top right' or 'ellipse at center'"}}for(l='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1 1"><'+p+'Gradient id="g" '+o+">",u=0;u<t.length;u+=1)t[u]instanceof r?(c=t[u].value[0],d=t[u].value[1]):(c=t[u],d=void 0),c instanceof i&&((0===u||u+1===t.length)&&void 0===d||d instanceof n)||y(),h=d?d.toCSS(v):0===u?"0%":"100%",f=c.alpha,l+='<stop offset="'+h+'" stop-color="'+c.toRGB()+'"'+(f<1?' stop-opacity="'+f+'"':"")+"/>";return l+="</"+p+"Gradient><rect "+m+' fill="url(#g)" /></svg>',l=encodeURIComponent(l),new s(new a("'"+(l="data:image/svg+xml,"+l)+"'",l,!1,this.index,this.currentFileInfo),this.index,this.currentFileInfo)})}},{"../tree/color":55,"../tree/dimension":62,"../tree/expression":64,"../tree/quoted":80,"../tree/url":85,"./function-registry":27}],35:[function(e,t,n){var i=e("../tree/keyword"),r=e("../tree/detached-ruleset"),a=e("../tree/dimension"),s=e("../tree/color"),o=e("../tree/quoted"),l=e("../tree/anonymous"),u=e("../tree/url"),c=e("../tree/operation"),d=e("./function-registry"),h=function(e,t){return e instanceof t?i.True:i.False},f=function(e,t){if(void 0===t)throw{type:"Argument",message:"missing the required second argument to isunit."};if("string"!=typeof(t="string"==typeof t.value?t.value:t))throw{type:"Argument",message:"Second argument to isunit should be a unit or a string."};return e instanceof a&&e.unit.is(t)?i.True:i.False};d.addMultiple({isruleset:function(e){return h(e,r)},iscolor:function(e){return h(e,s)},isnumber:function(e){return h(e,a)},isstring:function(e){return h(e,o)},iskeyword:function(e){return h(e,i)},isurl:function(e){return h(e,u)},ispixel:function(e){return f(e,"px")},ispercentage:function(e){return f(e,"%")},isem:function(e){return f(e,"em")},isunit:f,unit:function(e,t){if(!(e instanceof a))throw{type:"Argument",message:"the first argument to unit must be a number"+(e instanceof c?". Have you forgotten parenthesis?":"")};return t=t?t instanceof i?t.value:t.toCSS():"",new a(e.value,t)},"get-unit":function(e){return new l(e.unit)}})},{"../tree/anonymous":50,"../tree/color":55,"../tree/detached-ruleset":61,"../tree/dimension":62,"../tree/keyword":70,"../tree/operation":77,"../tree/quoted":80,"../tree/url":85,"./function-registry":27}],36:[function(e,t,n){var i=e("./contexts"),r=e("./parser/parser"),a=e("./less-error"),s=e("./utils"),o=("undefined"==typeof Promise?e("promise"):Promise,e("./logger"));t.exports=function(e){var t=function(e,t,n){this.less=e,this.rootFilename=n.filename,this.paths=t.paths||[],this.contents={},this.contentsIgnoredChars={},this.mime=t.mime,this.error=null,this.context=t,this.queue=[],this.files={}};return t.prototype.push=function(t,n,l,u,c){var d=this,h=this.context.pluginManager.Loader;this.queue.push(t);var f=function(e,n,i){d.queue.splice(d.queue.indexOf(t),1);var r=i===d.rootFilename;u.optional&&e?(c(null,{rules:[]},!1,null),o.info("The file "+i+" was skipped because it was not found and the import was marked optional.")):(d.files[i]||u.inline||(d.files[i]={root:n,options:u}),e&&!d.error&&(d.error=e),c(e,n,r,i))},p={rewriteUrls:this.context.rewriteUrls,entryPath:l.entryPath,rootpath:l.rootpath,rootFilename:l.rootFilename},m=e.getFileManager(t,l.currentDirectory,this.context,e);if(m){var v,g=function(e){var t,n=e.filename,s=e.contents.replace(/^\uFEFF/,"");p.currentDirectory=m.getPath(n),p.rewriteUrls&&(p.rootpath=m.join(d.context.rootpath||"",m.pathDiff(p.currentDirectory,p.entryPath)),!m.isPathAbsolute(p.rootpath)&&m.alwaysMakePathsAbsolute()&&(p.rootpath=m.join(p.entryPath,p.rootpath))),p.filename=n;var o=new i.Parse(d.context);o.processImports=!1,d.contents[n]=s,(l.reference||u.reference)&&(p.reference=!0),u.isPlugin?(t=h.evalPlugin(s,o,d,u.pluginArgs,p))instanceof a?f(t,null,n):f(null,t,n):u.inline?f(null,s,n):!d.files[n]||d.files[n].options.multiple||u.multiple?new r(o,d,p).parse(s,function(e,t){f(e,t,n)}):f(null,d.files[n].root,n)},y=s.clone(this.context);n&&(y.ext=u.isPlugin?".js":".less"),(v=u.isPlugin?h.loadPlugin(t,l.currentDirectory,y,e,m):m.loadFile(t,l.currentDirectory,y,e,function(e,t){e?f(e):g(t)}))&&v.then(g,f)}else f({message:"Could not find a file-manager for "+t})},t}},{"./contexts":13,"./less-error":38,"./logger":39,"./parser/parser":44,"./utils":89,promise:void 0}],37:[function(e,t,n){t.exports=function(t,n){var i,r,a,s,o,l,u={version:[3,9,0],data:e("./data"),tree:e("./tree"),Environment:o=e("./environment/environment"),AbstractFileManager:e("./environment/abstract-file-manager"),AbstractPluginLoader:e("./environment/abstract-plugin-loader"),environment:t=new o(t,n),visitors:e("./visitors"),Parser:e("./parser/parser"),functions:e("./functions")(t),contexts:e("./contexts"),SourceMapOutput:i=e("./source-map-output")(t),SourceMapBuilder:r=e("./source-map-builder")(i,t),ParseTree:a=e("./parse-tree")(r),ImportManager:s=e("./import-manager")(t),render:e("./render")(t,a,s),parse:e("./parse")(t,a,s),LessError:e("./less-error"),transformTree:e("./transform-tree"),utils:e("./utils"),PluginManager:e("./plugin-manager"),logger:e("./logger")},c=function(e){return function(){var t=Object.create(e.prototype);return e.apply(t,Array.prototype.slice.call(arguments,0)),t}},d=Object.create(u);for(var h in u.tree)if("function"==typeof(l=u.tree[h]))d[h.toLowerCase()]=c(l);else for(var f in d[h]=Object.create(null),l)d[h][f.toLowerCase()]=c(l[f]);return d}},{"./contexts":13,"./data":15,"./environment/abstract-file-manager":18,"./environment/abstract-plugin-loader":19,"./environment/environment":20,"./functions":28,"./import-manager":36,"./less-error":38,"./logger":39,"./parse":41,"./parse-tree":40,"./parser/parser":44,"./plugin-manager":45,"./render":46,"./source-map-builder":47,"./source-map-output":48,"./transform-tree":49,"./tree":67,"./utils":89,"./visitors":93}],38:[function(e,t,n){var i=e("./utils"),r=t.exports=function(e,t,n){Error.call(this);var r=e.filename||n;if(this.message=e.message,this.stack=e.stack,t&&r){var a=t.contents[r],s=i.getLocation(e.index,a),o=s.line,l=s.column,u=e.call&&i.getLocation(e.call,a).line,c=a?a.split("\n"):"";if(this.type=e.type||"Syntax",this.filename=r,this.index=e.index,this.line="number"==typeof o?o+1:null,this.column=l,!this.line&&this.stack){var d=this.stack.match(/(<anonymous>|Function):(\d+):(\d+)/);d&&(d[2]&&(this.line=parseInt(d[2])-2),d[3]&&(this.column=parseInt(d[3])))}this.callLine=u+1,this.callExtract=c[u],this.extract=[c[this.line-2],c[this.line-1],c[this.line]]}};if(void 0===Object.create){var a=function(){};a.prototype=Error.prototype,r.prototype=new a}else r.prototype=Object.create(Error.prototype);r.prototype.constructor=r,r.prototype.toString=function(e){e=e||{};var t="",n=this.extract||[],i=[],r=function(e){return e};if(e.stylize){var a=typeof e.stylize;if("function"!==a)throw Error("options.stylize should be a function, got a "+a+"!");r=e.stylize}if(null!==this.line){if("string"==typeof n[0]&&i.push(r(this.line-1+" "+n[0],"grey")),"string"==typeof n[1]){var s=this.line+" ";n[1]&&(s+=n[1].slice(0,this.column)+r(r(r(n[1].substr(this.column,1),"bold")+n[1].slice(this.column+1),"red"),"inverse")),i.push(s)}"string"==typeof n[2]&&i.push(r(this.line+1+" "+n[2],"grey")),i=i.join("\n")+r("","reset")+"\n"}return t+=r(this.type+"Error: "+this.message,"red"),this.filename&&(t+=r(" in ","red")+this.filename),this.line&&(t+=r(" on line "+this.line+", column "+(this.column+1)+":","grey")),t+="\n"+i,this.callLine&&(t+=r("from ","red")+(this.filename||"")+"/n",t+=r(this.callLine,"grey")+" "+this.callExtract+"/n"),t}},{"./utils":89}],39:[function(e,t,n){t.exports={error:function(e){this._fireEvent("error",e)},warn:function(e){this._fireEvent("warn",e)},info:function(e){this._fireEvent("info",e)},debug:function(e){this._fireEvent("debug",e)},addListener:function(e){this._listeners.push(e)},removeListener:function(e){for(var t=0;t<this._listeners.length;t++)if(this._listeners[t]===e)return void this._listeners.splice(t,1)},_fireEvent:function(e,t){for(var n=0;n<this._listeners.length;n++){var i=this._listeners[n][e];i&&i(t)}},_listeners:[]}},{}],40:[function(e,t,n){var i=e("./less-error"),r=e("./transform-tree"),a=e("./logger");t.exports=function(e){var t=function(e,t){this.root=e,this.imports=t};return t.prototype.toCSS=function(t){var n,s,o={};try{n=r(this.root,t)}catch(e){throw new i(e,this.imports)}try{var l=Boolean(t.compress);l&&a.warn("The compress option has been deprecated. We recommend you use a dedicated css minifier, for instance see less-plugin-clean-css.");var u={compress:l,dumpLineNumbers:t.dumpLineNumbers,strictUnits:Boolean(t.strictUnits),numPrecision:8};t.sourceMap?(s=new e(t.sourceMap),o.css=s.toCSS(n,u,this.imports)):o.css=n.toCSS(u)}catch(e){throw new i(e,this.imports)}if(t.pluginManager)for(var c=t.pluginManager.getPostProcessors(),d=0;d<c.length;d++)o.css=c[d].process(o.css,{sourceMap:s,options:t,imports:this.imports});for(var h in t.sourceMap&&(o.map=s.getExternalSourceMap()),o.imports=[],this.imports.files)this.imports.files.hasOwnProperty(h)&&h!==this.imports.rootFilename&&o.imports.push(h);return o},t}},{"./less-error":38,"./logger":39,"./transform-tree":49}],41:[function(e,t,n){var i,r=e("./contexts"),a=e("./parser/parser"),s=e("./plugin-manager"),o=e("./less-error"),l=e("./utils");t.exports=function(t,n,u){var c=function(t,n,d){if("function"==typeof n?(d=n,n=l.copyOptions(this.options,{})):n=l.copyOptions(this.options,n||{}),!d){i||(i="undefined"==typeof Promise?e("promise"):Promise);var h=this;return new i(function(e,i){c.call(h,t,n,function(t,n){t?i(t):e(n)})})}var f,p,m=new s(this,!n.reUsePluginManager);if(n.pluginManager=m,f=new r.Parse(n),n.rootFileInfo)p=n.rootFileInfo;else{var v=n.filename||"input",g=v.replace(/[^\/\\]*$/,"");(p={filename:v,rewriteUrls:f.rewriteUrls,rootpath:f.rootpath||"",currentDirectory:g,entryPath:g,rootFilename:v}).rootpath&&"/"!==p.rootpath.slice(-1)&&(p.rootpath+="/")}var y=new u(this,f,p);this.importManager=y,n.plugins&&n.plugins.forEach(function(e){var t,n;if(e.fileContent){if(n=e.fileContent.replace(/^\uFEFF/,""),(t=m.Loader.evalPlugin(n,f,y,e.options,e.filename))instanceof o)return d(t)}else m.addPlugin(e)}),new a(f,y,p).parse(t,function(e,t){if(e)return d(e);d(null,t,y,n)},n)};return c}},{"./contexts":13,"./less-error":38,"./parser/parser":44,"./plugin-manager":45,"./utils":89,promise:void 0}],42:[function(e,t,n){t.exports=function(e,t){var n,i,r,a,s,o,l,u,c,d=e.length,h=0,f=0,p=[],m=0;function v(t){var n=s-m;n<512&&!t||!n||(p.push(e.slice(m,s+1)),m=s+1)}for(s=0;s<d;s++)if(!((l=e.charCodeAt(s))>=97&&l<=122||l<34))switch(l){case 40:f++,i=s;continue;case 41:if(--f<0)return t("missing opening `(`",s);continue;case 59:f||v();continue;case 123:h++,n=s;continue;case 125:if(--h<0)return t("missing opening `{`",s);h||f||v();continue;case 92:if(s<d-1){s++;continue}return t("unescaped `\\`",s);case 34:case 39:case 96:for(c=0,o=s,s+=1;s<d;s++)if(!((u=e.charCodeAt(s))>96)){if(u==l){c=1;break}if(92==u){if(s==d-1)return t("unescaped `\\`",s);s++}}if(c)continue;return t("unmatched `"+String.fromCharCode(l)+"`",o);case 47:if(f||s==d-1)continue;if(47==(u=e.charCodeAt(s+1)))for(s+=2;s<d&&(!((u=e.charCodeAt(s))<=13)||10!=u&&13!=u);s++);else if(42==u){for(r=o=s,s+=2;s<d-1&&(125==(u=e.charCodeAt(s))&&(a=s),42!=u||47!=e.charCodeAt(s+1));s++);if(s==d-1)return t("missing closing `*/`",o);s++}continue;case 42:if(s<d-1&&47==e.charCodeAt(s+1))return t("unmatched `/*`",s);continue}return 0!==h?t(r>n&&a>r?"missing closing `}` or `*/`":"missing closing `}`",n):0!==f?t("missing closing `)`",i):(v(!0),p)}},{}],43:[function(e,t,n){var i=e("./chunker");t.exports=function(){var e,t,n,r,a,s,o,l=[],u={},c=32,d=9,h=10,f=13,p=47;function m(n){for(var i,r,l,v=u.i,g=t,y=u.i-o,_=u.i+s.length-y,b=u.i+=n,w=e;u.i<_;u.i++){if(i=w.charCodeAt(u.i),u.autoCommentAbsorb&&i===p){if("/"===(r=w.charAt(u.i+1))){l={index:u.i,isLineComment:!0};var E=w.indexOf("\n",u.i+2);E<0&&(E=_),u.i=E,l.text=w.substr(l.index,u.i-l.index),u.commentStore.push(l);continue}if("*"===r){var S=w.indexOf("*/",u.i+2);if(S>=0){l={index:u.i,text:w.substr(u.i,S+2-u.i),isLineComment:!1},u.i+=l.text.length-1,u.commentStore.push(l);continue}}break}if(i!==c&&i!==h&&i!==d&&i!==f)break}if(s=s.slice(n+u.i-b+y),o=u.i,!s.length){if(t<a.length-1)return s=a[++t],m(0),!0;u.finished=!0}return v!==u.i||g!==t}return u.save=function(){o=u.i,l.push({current:s,i:u.i,j:t})},u.restore=function(e){(u.i>n||u.i===n&&e&&!r)&&(n=u.i,r=e);var i=l.pop();s=i.current,o=u.i=i.i,t=i.j},u.forget=function(){l.pop()},u.isWhitespace=function(t){var n=u.i+(t||0),i=e.charCodeAt(n);return i===c||i===f||i===d||i===h},u.$re=function(e){u.i>o&&(s=s.slice(u.i-o),o=u.i);var t=e.exec(s);return t?(m(t[0].length),"string"==typeof t?t:1===t.length?t[0]:t):null},u.$char=function(t){return e.charAt(u.i)!==t?null:(m(1),t)},u.$str=function(t){for(var n=t.length,i=0;i<n;i++)if(e.charAt(u.i+i)!==t.charAt(i))return null;return m(n),t},u.$quoted=function(t){var n=t||u.i,i=e.charAt(n);if("'"===i||'"'===i){for(var r=e.length,a=n,s=1;s+a<r;s++){var o=e.charAt(s+a);switch(o){case"\\":s++;continue;case"\r":case"\n":break;case i:var l=e.substr(a,s+1);return t||0===t?[i,l]:(m(s+1),l)}}return null}},u.$parseUntil=function(t){var n,i="",r=null,a=!1,s=0,o=[],l=[],c=e.length,d=u.i,h=u.i,f=u.i,p=!0;n="string"==typeof t?function(e){return e===t}:function(e){return t.test(e)};do{var v=e.charAt(f);if(0===s&&n(v))(r=e.substr(h,f-h))?l.push(r):l.push(" "),r=l,m(f-d),p=!1;else{if(a){"*"===v&&"/"===e.charAt(f+1)&&(f++,s--,a=!1),f++;continue}switch(v){case"\\":f++,v=e.charAt(f),l.push(e.substr(h,f-h+1)),h=f+1;break;case"/":"*"===e.charAt(f+1)&&(f++,a=!0,s++);break;case"'":case'"':(i=u.$quoted(f))?(l.push(e.substr(h,f-h),i),f+=i[1].length-1,h=f+1):(m(f-d),r=v,p=!1);break;case"{":o.push("}"),s++;break;case"(":o.push(")"),s++;break;case"[":o.push("]"),s++;break;case"}":case")":case"]":var g=o.pop();v===g?s--:(m(f-d),r=g,p=!1)}++f>c&&(p=!1)}}while(p);return r||null},u.autoCommentAbsorb=!0,u.commentStore=[],u.finished=!1,u.peek=function(t){if("string"==typeof t){for(var n=0;n<t.length;n++)if(e.charAt(u.i+n)!==t.charAt(n))return!1;return!0}return t.test(s)},u.peekChar=function(t){return e.charAt(u.i)===t},u.currentChar=function(){return e.charAt(u.i)},u.prevChar=function(){return e.charAt(u.i-1)},u.getInput=function(){return e},u.peekNotNumeric=function(){var t=e.charCodeAt(u.i);return t>57||t<43||t===p||44===t},u.start=function(r,l,c){e=r,u.i=t=o=n=0,a=l?i(r,c):[r],s=a[0],m(0)},u.end=function(){var t,i=u.i>=e.length;return u.i<n&&(t=r,u.i=n),{isFinished:i,furthest:u.i,furthestPossibleErrorMessage:t,furthestReachedEnd:u.i>=e.length-1,furthestChar:e[u.i]}},u}},{"./chunker":42}],44:[function(e,t,n){var i=e("../less-error"),r=e("../tree"),a=e("../visitors"),s=e("./parser-input"),o=e("../utils"),l=e("../functions/function-registry"),u=function e(t,n,u){var c,d=s();function h(e,t){throw new i({index:d.i,filename:u.filename,type:t||"Syntax",message:e},n)}function f(e,t){var n=e instanceof Function?e.call(c):d.$re(e);if(n)return n;h(t||("string"==typeof e?"expected '"+e+"' got '"+d.currentChar()+"'":"unexpected token"))}function p(e,t){if(d.$char(e))return e;h(t||"expected '"+e+"' got '"+d.currentChar()+"'")}function m(e){var t=u.filename;return{lineNumber:o.getLocation(e,d.getInput()).line+1,fileName:t}}return{parserInput:d,imports:n,fileInfo:u,parseNode:function(e,t,r,a,s){var o,l=[],u=d;try{u.start(e,!1,function(e,t){s({message:e,index:t+r})});for(var h,f,p=0;h=t[p];p++)f=u.i,(o=c[h]())?(o._index=f+r,o._fileInfo=a,l.push(o)):l.push(null);var m=u.end();m.isFinished?s(null,l):s(!0,null)}catch(e){throw new i({index:e.index+r,message:e.message},n,a.filename)}},parse:function(s,o,c){var h,f,p,m,v=null,g="";if(f=c&&c.globalVars?e.serializeVars(c.globalVars)+"\n":"",p=c&&c.modifyVars?"\n"+e.serializeVars(c.modifyVars):"",t.pluginManager)for(var y=t.pluginManager.getPreProcessors(),_=0;_<y.length;_++)s=y[_].process(s,{context:t,imports:n,fileInfo:u});(f||c&&c.banner)&&(g=(c&&c.banner?c.banner:"")+f,(m=n.contentsIgnoredChars)[u.filename]=m[u.filename]||0,m[u.filename]+=g.length),s=s.replace(/\r\n?/g,"\n"),s=g+s.replace(/^\uFEFF/,"")+p,n.contents[u.filename]=s;try{d.start(s,t.chunkInput,function(e,t){throw new i({index:t,type:"Parse",message:e,filename:u.filename},n)}),r.Node.prototype.parse=this,h=new r.Ruleset(null,this.parsers.primary()),r.Node.prototype.rootNode=h,h.root=!0,h.firstRoot=!0,h.functionRegistry=l.inherit()}catch(e){return o(new i(e,n,u.filename))}var b=d.end();if(!b.isFinished){var w=b.furthestPossibleErrorMessage;w||(w="Unrecognised input","}"===b.furthestChar?w+=". Possibly missing opening '{'":")"===b.furthestChar?w+=". Possibly missing opening '('":b.furthestReachedEnd&&(w+=". Possibly missing something")),v=new i({type:"Parse",message:w,index:b.furthest,filename:u.filename},n)}var E=function(e){return(e=v||e||n.error)?(e instanceof i||(e=new i(e,n,u.filename)),o(e)):o(null,h)};if(!1===t.processImports)return E();new a.ImportVisitor(n,E).run(h)},parsers:c={primary:function(){for(var e,t=this.mixin,n=[];;){for(;e=this.comment();)n.push(e);if(d.finished)break;if(d.peek("}"))break;if(e=this.extendRule())n=n.concat(e);else if(e=t.definition()||this.declaration()||this.ruleset()||t.call(!1,!1)||this.variableCall()||this.entities.call()||this.atrule())n.push(e);else{for(var i=!1;d.$char(";");)i=!0;if(!i)break}}return n},comment:function(){if(d.commentStore.length){var e=d.commentStore.shift();return new r.Comment(e.text,e.isLineComment,e.index,u)}},entities:{mixinLookup:function(){return c.mixin.call(!0,!0)},quoted:function(e){var t,n=d.i,i=!1;if(d.save(),d.$char("~"))i=!0;else if(e)return void d.restore();if(t=d.$quoted())return d.forget(),new r.Quoted(t.charAt(0),t.substr(1,t.length-2),i,n,u);d.restore()},keyword:function(){var e=d.$char("%")||d.$re(/^\[?(?:[\w-]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+\]?/);if(e)return r.Color.fromKeyword(e)||new r.Keyword(e)},call:function(){var e,t,n,i=d.i;if(!d.peek(/^url\(/i))if(d.save(),e=d.$re(/^([\w-]+|%|progid:[\w\.]+)\(/)){if(e=e[1],(n=this.customFuncCall(e))&&(t=n.parse())&&n.stop)return d.forget(),t;if(t=this.arguments(t),d.$char(")"))return d.forget(),new r.Call(e,t,i,u);d.restore("Could not parse call arguments or missing ')'")}else d.forget()},customFuncCall:function(e){return{alpha:t(c.ieAlpha,!0),boolean:t(n),if:t(n)}[e.toLowerCase()];function t(e,t){return{parse:e,stop:t}}function n(){return[f(c.condition,"expected condition")]}},arguments:function(e){var t,n,i=e||[],a=[];for(d.save();;){if(e)e=!1;else{if(!(n=c.detachedRuleset()||this.assignment()||c.expression()))break;n.value&&1==n.value.length&&(n=n.value[0]),i.push(n)}d.$char(",")||(d.$char(";")||t)&&(t=!0,n=i.length<1?i[0]:new r.Value(i),a.push(n),i=[])}return d.forget(),t?a:i},literal:function(){return this.dimension()||this.color()||this.quoted()||this.unicodeDescriptor()},assignment:function(){var e,t;if(d.save(),e=d.$re(/^\w+(?=\s?=)/i))if(d.$char("=")){if(t=c.entity())return d.forget(),new r.Assignment(e,t);d.restore()}else d.restore();else d.restore()},url:function(){var e,t=d.i;if(d.autoCommentAbsorb=!1,d.$str("url("))return e=this.quoted()||this.variable()||this.property()||d.$re(/^(?:(?:\\[\(\)'"])|[^\(\)'"])+/)||"",d.autoCommentAbsorb=!0,p(")"),new r.URL(null!=e.value||e instanceof r.Variable||e instanceof r.Property?e:new r.Anonymous(e,t),t,u);d.autoCommentAbsorb=!0},variable:function(){var e,t,n=d.i;if(d.save(),"@"===d.currentChar()&&(t=d.$re(/^@@?[\w-]+/))){if("("===(e=d.currentChar())||"["===e&&!d.prevChar().match(/^\s/)){var i=c.variableCall(t);if(i)return d.forget(),i}return d.forget(),new r.Variable(t,n,u)}d.restore()},variableCurly:function(){var e,t=d.i;if("@"===d.currentChar()&&(e=d.$re(/^@\{([\w-]+)\}/)))return new r.Variable("@"+e[1],t,u)},property:function(){var e,t=d.i;if("$"===d.currentChar()&&(e=d.$re(/^\$[\w-]+/)))return new r.Property(e,t,u)},propertyCurly:function(){var e,t=d.i;if("$"===d.currentChar()&&(e=d.$re(/^\$\{([\w-]+)\}/)))return new r.Property("$"+e[1],t,u)},color:function(){var e;if("#"===d.currentChar()&&(e=d.$re(/^#([A-Fa-f0-9]{8}|[A-Fa-f0-9]{6}|[A-Fa-f0-9]{3,4})/)))return new r.Color(e[1],void 0,e[0])},colorKeyword:function(){d.save();var e=d.autoCommentAbsorb;d.autoCommentAbsorb=!1;var t=d.$re(/^[_A-Za-z-][_A-Za-z0-9-]+/);if(d.autoCommentAbsorb=e,t){d.restore();var n=r.Color.fromKeyword(t);return n?(d.$str(t),n):void 0}d.forget()},dimension:function(){if(!d.peekNotNumeric()){var e=d.$re(/^([+-]?\d*\.?\d+)(%|[a-z_]+)?/i);return e?new r.Dimension(e[1],e[2]):void 0}},unicodeDescriptor:function(){var e;if(e=d.$re(/^U\+[0-9a-fA-F?]+(\-[0-9a-fA-F?]+)?/))return new r.UnicodeDescriptor(e[0])},javascript:function(){var e,t=d.i;d.save();var n=d.$char("~"),i=d.$char("`");if(i){if(e=d.$re(/^[^`]*`/))return d.forget(),new r.JavaScript(e.substr(0,e.length-1),Boolean(n),t,u);d.restore("invalid javascript definition")}else d.restore()}},variable:function(){var e;if("@"===d.currentChar()&&(e=d.$re(/^(@[\w-]+)\s*:/)))return e[1]},variableCall:function(e){var t,n,i=d.i,a=!!e,s=e;if(d.save(),s||"@"===d.currentChar()&&(s=d.$re(/^(@[\w-]+)(\(\s*\))?/))){if(!(t=this.mixin.ruleLookups())&&(a&&"()"!==d.$str("()")||"()"!==s[2]))return void d.restore("Missing '[...]' lookup in variable call");a||(s=s[1]),t&&c.important()&&(n=!0);var o=new r.VariableCall(s,i,u);return!a&&c.end()?(d.forget(),o):(d.forget(),new r.NamespaceValue(o,t,n,i,u))}d.restore()},extend:function(e){var t,n,i,a,s,o=d.i;if(d.$str(e?"&:extend(":":extend(")){do{for(i=null,t=null;!(i=d.$re(/^(all)(?=\s*(\)|,))/))&&(n=this.element());)t?t.push(n):t=[n];i=i&&i[1],t||h("Missing target selector for :extend()."),s=new r.Extend(new r.Selector(t),i,o,u),a?a.push(s):a=[s]}while(d.$char(","));return f(/^\)/),e&&f(/^;/),a}},extendRule:function(){return this.extend(!0)},mixin:{call:function(e,t){var n,i,a,s,o=d.currentChar(),l=!1,h=d.i;if("."===o||"#"===o){if(d.save(),i=this.elements()){if(d.$char("(")&&(a=this.args(!0).args,p(")"),s=!0),!1!==t&&(n=this.ruleLookups()),!0===t&&!n)return void d.restore();if(e&&!n&&!s)return void d.restore();if(!e&&c.important()&&(l=!0),e||c.end()){d.forget();var f=new r.mixin.Call(i,a,h,u,!n&&l);return n?new r.NamespaceValue(f,n,l):f}}d.restore()}},elements:function(){for(var e,t,n,i,a,s=/^[#.](?:[\w-]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+/;a=d.i,t=d.$re(s);)i=new r.Element(n,t,!1,a,u),e?e.push(i):e=[i],n=d.$char(">");return e},args:function(e){var t,n,i,a,s,o,l,u=c.entities,f={args:null,variadic:!1},p=[],m=[],v=[],g=!0;for(d.save();;){if(e)o=c.detachedRuleset()||c.expression();else{if(d.commentStore.length=0,d.$str("...")){f.variadic=!0,d.$char(";")&&!t&&(t=!0),(t?m:v).push({variadic:!0});break}o=u.variable()||u.property()||u.literal()||u.keyword()||this.call(!0)}if(!o||!g)break;a=null,o.throwAwayComments&&o.throwAwayComments(),s=o;var y=null;if(e?o.value&&1==o.value.length&&(y=o.value[0]):y=o,y&&(y instanceof r.Variable||y instanceof r.Property))if(d.$char(":")){if(p.length>0&&(t&&h("Cannot mix ; and , as delimiter types"),n=!0),!(s=c.detachedRuleset()||c.expression())){if(!e)return d.restore(),f.args=[],f;h("could not understand value for named argument")}a=i=y.name}else if(d.$str("...")){if(!e){f.variadic=!0,d.$char(";")&&!t&&(t=!0),(t?m:v).push({name:o.name,variadic:!0});break}l=!0}else e||(i=a=y.name,s=null);s&&p.push(s),v.push({name:a,value:s,expand:l}),d.$char(",")?g=!0:((g=";"===d.$char(";"))||t)&&(n&&h("Cannot mix ; and , as delimiter types"),t=!0,p.length>1&&(s=new r.Value(p)),m.push({name:i,value:s,expand:l}),i=null,p=[],n=!1)}return d.forget(),f.args=t?m:v,f},definition:function(){var e,t,n,i,a=[],s=!1;if(!("."!==d.currentChar()&&"#"!==d.currentChar()||d.peek(/^[^{]*\}/)))if(d.save(),t=d.$re(/^([#.](?:[\w-]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+)\s*\(/)){e=t[1];var o=this.args(!1);if(a=o.args,s=o.variadic,!d.$char(")"))return void d.restore("Missing closing ')'");if(d.commentStore.length=0,d.$str("when")&&(i=f(c.conditions,"expected condition")),n=c.block())return d.forget(),new r.mixin.Definition(e,a,n,i,s);d.restore()}else d.forget()},ruleLookups:function(){var e,t=[];if("["===d.currentChar()){for(;;){if(d.save(),!(e=this.lookupValue())&&""!==e){d.restore();break}t.push(e),d.forget()}return t.length>0?t:void 0}},lookupValue:function(){if(d.save(),d.$char("[")){var e=d.$re(/^(?:[@$]{0,2})[_a-zA-Z0-9-]*/);if(d.$char("]"))return e||""===e?(d.forget(),e):void d.restore();d.restore()}else d.restore()}},entity:function(){var e=this.entities;return this.comment()||e.literal()||e.variable()||e.url()||e.property()||e.call()||e.keyword()||this.mixin.call(!0)||e.javascript()},end:function(){return d.$char(";")||d.peek("}")},ieAlpha:function(){var e;if(d.$re(/^opacity=/i))return(e=d.$re(/^\d+/))||(e="@{"+(e=f(c.entities.variable,"Could not parse alpha")).name.slice(1)+"}"),p(")"),new r.Quoted("","alpha(opacity="+e+")")},element:function(){var e,t,n,i=d.i;if(t=this.combinator(),(e=d.$re(/^(?:\d+\.\d+|\d+)%/)||d.$re(/^(?:[.#]?|:*)(?:[\w-]|[^\x00-\x9f]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+/)||d.$char("*")||d.$char("&")||this.attribute()||d.$re(/^\([^&()@]+\)/)||d.$re(/^[\.#:](?=@)/)||this.entities.variableCurly())||(d.save(),d.$char("(")?(n=this.selector(!1))&&d.$char(")")?(e=new r.Paren(n),d.forget()):d.restore("Missing closing ')'"):d.forget()),e)return new r.Element(t,e,e instanceof r.Variable,i,u)},combinator:function(){var e=d.currentChar();if("/"===e){d.save();var t=d.$re(/^\/[a-z]+\//i);if(t)return d.forget(),new r.Combinator(t);d.restore()}if(">"===e||"+"===e||"~"===e||"|"===e||"^"===e){for(d.i++,"^"===e&&"^"===d.currentChar()&&(e="^^",d.i++);d.isWhitespace();)d.i++;return new r.Combinator(e)}return d.isWhitespace(-1)?new r.Combinator(" "):new r.Combinator(null)},selector:function(e){var t,n,i,a,s,o,l,c=d.i;for(e=!1!==e;(e&&(n=this.extend())||e&&(o=d.$str("when"))||(a=this.element()))&&(o?l=f(this.conditions,"expected condition"):l?h("CSS guard can only be used at the end of selector"):n?s=s?s.concat(n):n:(s&&h("Extend can only be used at the end of selector"),i=d.currentChar(),t?t.push(a):t=[a],a=null),"{"!==i&&"}"!==i&&";"!==i&&","!==i&&")"!==i););if(t)return new r.Selector(t,s,l,c,u);s&&h("Extend must be used to extend a selector, it cannot be used on its own")},selectors:function(){for(var e,t;(e=this.selector())&&(t?t.push(e):t=[e],d.commentStore.length=0,e.condition&&t.length>1&&h("Guards are only currently allowed on a single selector."),d.$char(","));)e.condition&&h("Guards are only currently allowed on a single selector."),d.commentStore.length=0;return t},attribute:function(){if(d.$char("[")){var e,t,n,i=this.entities;return(e=i.variableCurly())||(e=f(/^(?:[_A-Za-z0-9-\*]*\|)?(?:[_A-Za-z0-9-]|\\.)+/)),(n=d.$re(/^[|~*$^]?=/))&&(t=i.quoted()||d.$re(/^[0-9]+%/)||d.$re(/^[\w-]+/)||i.variableCurly()),p("]"),new r.Attribute(e,n,t)}},block:function(){var e;if(d.$char("{")&&(e=this.primary())&&d.$char("}"))return e},blockRuleset:function(){var e=this.block();return e&&(e=new r.Ruleset(null,e)),e},detachedRuleset:function(){var e,t,n;if(d.save(),!d.$re(/^[.#]\(/)||(e=this.mixin.args(!1),t=e.args,n=e.variadic,d.$char(")"))){var i=this.blockRuleset();if(i)return d.forget(),t?new r.mixin.Definition(null,t,i,null,n):new r.DetachedRuleset(i);d.restore()}else d.restore()},ruleset:function(){var e,n,i;if(d.save(),t.dumpLineNumbers&&(i=m(d.i)),(e=this.selectors())&&(n=this.block())){d.forget();var a=new r.Ruleset(e,n,t.strictImports);return t.dumpLineNumbers&&(a.debugInfo=i),a}d.restore()},declaration:function(){var e,t,n,i,a,s,o=d.i,l=d.currentChar();if("."!==l&&"#"!==l&&"&"!==l&&":"!==l)if(d.save(),e=this.variable()||this.ruleProperty()){if((s="string"==typeof e)&&(t=this.detachedRuleset())&&(n=!0),d.commentStore.length=0,!t){if(a=!s&&e.length>1&&e.pop().value,t=e[0].value&&"--"===e[0].value.slice(0,2)?this.permissiveValue():this.anonymousValue())return d.forget(),new r.Declaration(e,t,!1,a,o,u);t||(t=this.value()),t?i=this.important():s&&(t=this.permissiveValue())}if(t&&(this.end()||n))return d.forget(),new r.Declaration(e,t,i,a,o,u);d.restore()}else d.restore()},anonymousValue:function(){var e=d.i,t=d.$re(/^([^.#@\$+\/'"*`(;{}-]*);/);if(t)return new r.Anonymous(t[1],e)},permissiveValue:function(e){var t,n,i,a,s=e||";",o=d.i,l=[];function c(){var e=d.currentChar();return"string"==typeof s?e===s:s.test(e)}if(!c()){a=[];do{(n=this.comment())?a.push(n):(n=this.entity())&&a.push(n)}while(n);if(i=c(),a.length>0){if(a=new r.Expression(a),i)return a;l.push(a)," "===d.prevChar()&&l.push(new r.Anonymous(" ",o))}if(d.save(),a=d.$parseUntil(s)){if("string"==typeof a&&h("Expected '"+a+"'","Parse"),1===a.length&&" "===a[0])return d.forget(),new r.Anonymous("",o);var f;for(t=0;t<a.length;t++)if(f=a[t],Array.isArray(f))l.push(new r.Quoted(f[0],f[1],!0,o,u));else{t===a.length-1&&(f=f.trim());var p=new r.Quoted("'",f,!0,o,u);p.variableRegex=/@([\w-]+)/g,p.propRegex=/\$([\w-]+)/g,l.push(p)}return d.forget(),new r.Expression(l,!0)}d.restore()}},import:function(){var e,t,n=d.i,i=d.$re(/^@import?\s+/);if(i){var a=(i?this.importOptions():null)||{};if(e=this.entities.quoted()||this.entities.url())return t=this.mediaFeatures(),d.$char(";")||(d.i=n,h("missing semi-colon or unrecognised media features on import")),t=t&&new r.Value(t),new r.Import(e,t,a,n,u);d.i=n,h("malformed import statement")}},importOptions:function(){var e,t,n,i={};if(!d.$char("("))return null;do{if(e=this.importOption()){switch(n=!0,t=e){case"css":t="less",n=!1;break;case"once":t="multiple",n=!1}if(i[t]=n,!d.$char(","))break}}while(e);return p(")"),i},importOption:function(){var e=d.$re(/^(less|css|multiple|once|inline|reference|optional)/);if(e)return e[1]},mediaFeature:function(){var e,t,n=this.entities,i=[];d.save();do{(e=n.keyword()||n.variable()||n.mixinLookup())?i.push(e):d.$char("(")&&(t=this.property(),e=this.value(),d.$char(")")?t&&e?i.push(new r.Paren(new r.Declaration(t,e,null,null,d.i,u,!0))):e?i.push(new r.Paren(e)):h("badly formed media feature definition"):h("Missing closing ')'","Parse"))}while(e);if(d.forget(),i.length>0)return new r.Expression(i)},mediaFeatures:function(){var e,t=this.entities,n=[];do{if(e=this.mediaFeature()){if(n.push(e),!d.$char(","))break}else if((e=t.variable()||t.mixinLookup())&&(n.push(e),!d.$char(",")))break}while(e);return n.length>0?n:null},media:function(){var e,n,i,a,s=d.i;if(t.dumpLineNumbers&&(a=m(s)),d.save(),d.$str("@media"))return e=this.mediaFeatures(),(n=this.block())||h("media definitions require block statements after any features"),d.forget(),i=new r.Media(n,e,s,u),t.dumpLineNumbers&&(i.debugInfo=a),i;d.restore()},plugin:function(){var e,t,n,i=d.i,a=d.$re(/^@plugin?\s+/);if(a){if(t=this.pluginArgs(),n=t?{pluginArgs:t,isPlugin:!0}:{isPlugin:!0},e=this.entities.quoted()||this.entities.url())return d.$char(";")||(d.i=i,h("missing semi-colon on @plugin")),new r.Import(e,null,n,i,u);d.i=i,h("malformed @plugin statement")}},pluginArgs:function(){if(d.save(),!d.$char("("))return d.restore(),null;var e=d.$re(/^\s*([^\);]+)\)\s*/);return e[1]?(d.forget(),e[1].trim()):(d.restore(),null)},atrule:function(){var e,n,i,a,s,o,l,c=d.i,f=!0,p=!0;if("@"===d.currentChar()){if(n=this.import()||this.plugin()||this.media())return n;if(d.save(),e=d.$re(/^@[a-z-]+/)){switch(a=e,"-"==e.charAt(1)&&e.indexOf("-",2)>0&&(a="@"+e.slice(e.indexOf("-",2)+1)),a){case"@charset":s=!0,f=!1;break;case"@namespace":o=!0,f=!1;break;case"@keyframes":case"@counter-style":s=!0;break;case"@document":case"@supports":l=!0,p=!1;break;default:l=!0}if(d.commentStore.length=0,s?(n=this.entity())||h("expected "+e+" identifier"):o?(n=this.expression())||h("expected "+e+" expression"):l&&(n=this.permissiveValue(/^[{;]/),f="{"===d.currentChar(),n?n.value||(n=null):f||";"===d.currentChar()||h(e+" rule is missing block or ending semi-colon")),f&&(i=this.blockRuleset()),i||!f&&n&&d.$char(";"))return d.forget(),new r.AtRule(e,n,i,c,u,t.dumpLineNumbers?m(c):null,p);d.restore("at-rule options not recognised")}}},value:function(){var e,t=[],n=d.i;do{if((e=this.expression())&&(t.push(e),!d.$char(",")))break}while(e);if(t.length>0)return new r.Value(t,n)},important:function(){if("!"===d.currentChar())return d.$re(/^! *important/)},sub:function(){var e,t;if(d.save(),d.$char("("))return(e=this.addition())&&d.$char(")")?(d.forget(),(t=new r.Expression([e])).parens=!0,t):void d.restore("Expected ')'");d.restore()},multiplication:function(){var e,t,n,i,a;if(e=this.operand()){for(a=d.isWhitespace(-1);!d.peek(/^\/[*\/]/);){if(d.save(),!(n=d.$char("/")||d.$char("*")||d.$str("./"))){d.forget();break}if(!(t=this.operand())){d.restore();break}d.forget(),e.parensInOp=!0,t.parensInOp=!0,i=new r.Operation(n,[i||e,t],a),a=d.isWhitespace(-1)}return i||e}},addition:function(){var e,t,n,i,a;if(e=this.multiplication()){for(a=d.isWhitespace(-1);(n=d.$re(/^[-+]\s+/)||!a&&(d.$char("+")||d.$char("-")))&&(t=this.multiplication());)e.parensInOp=!0,t.parensInOp=!0,i=new r.Operation(n,[i||e,t],a),a=d.isWhitespace(-1);return i||e}},conditions:function(){var e,t,n,i=d.i;if(e=this.condition(!0)){for(;d.peek(/^,\s*(not\s*)?\(/)&&d.$char(",")&&(t=this.condition(!0));)n=new r.Condition("or",n||e,t,i);return n||e}},condition:function(e){var t,n,i;if(t=this.conditionAnd(e)){if(n=d.$str("or")){if(!(i=this.condition(e)))return;t=new r.Condition(n,t,i)}return t}},conditionAnd:function(e){var t,n,i,a,s=this;if(a=s.negatedCondition(e)||s.parenthesisCondition(e),t=a||e?a:s.atomicCondition(e)){if(n=d.$str("and")){if(!(i=this.conditionAnd(e)))return;t=new r.Condition(n,t,i)}return t}},negatedCondition:function(e){if(d.$str("not")){var t=this.parenthesisCondition(e);return t&&(t.negate=!t.negate),t}},parenthesisCondition:function(e){var t;if(d.save(),d.$str("(")){if(t=function(t){var n;if(d.save(),n=t.condition(e)){if(d.$char(")"))return d.forget(),n;d.restore()}else d.restore()}(this))return d.forget(),t;if(t=this.atomicCondition(e)){if(d.$char(")"))return d.forget(),t;d.restore("expected ')' got '"+d.currentChar()+"'")}else d.restore()}else d.restore()},atomicCondition:function(e){var t,n,i,a,s=this.entities,o=d.i;function l(){return this.addition()||s.keyword()||s.quoted()||s.mixinLookup()}if(l=l.bind(this),t=l())return d.$char(">")?a=d.$char("=")?">=":">":d.$char("<")?a=d.$char("=")?"<=":"<":d.$char("=")&&(a=d.$char(">")?"=>":d.$char("<")?"=<":"="),a?(n=l())?i=new r.Condition(a,t,n,o,!1):h("expected expression"):i=new r.Condition("=",t,new r.Keyword("true"),o,!1),i},operand:function(){var e,t=this.entities;d.peek(/^-[@\$\(]/)&&(e=d.$char("-"));var n=this.sub()||t.dimension()||t.color()||t.variable()||t.property()||t.call()||t.quoted(!0)||t.colorKeyword()||t.mixinLookup();return e&&(n.parensInOp=!0,n=new r.Negative(n)),n},expression:function(){var e,t,n=[],i=d.i;do{(e=this.comment())?n.push(e):(e=this.addition()||this.entity())&&(n.push(e),d.peek(/^\/[\/*]/)||(t=d.$char("/"))&&n.push(new r.Anonymous(t,i)))}while(e);if(n.length>0)return new r.Expression(n)},property:function(){var e=d.$re(/^(\*?-?[_a-zA-Z0-9-]+)\s*:/);if(e)return e[1]},ruleProperty:function(){var e,t,n=[],i=[];d.save();var a=d.$re(/^([_a-zA-Z0-9-]+)\s*:/);if(a)return n=[new r.Keyword(a[1])],d.forget(),n;function s(e){var t=d.i,r=d.$re(e);if(r)return i.push(t),n.push(r[1])}for(s(/^(\*?)/);s(/^((?:[\w-]+)|(?:[@\$]\{[\w-]+\}))/););if(n.length>1&&s(/^((?:\+_|\+)?)\s*:/)){for(d.forget(),""===n[0]&&(n.shift(),i.shift()),t=0;t<n.length;t++)e=n[t],n[t]="@"!==e.charAt(0)&&"$"!==e.charAt(0)?new r.Keyword(e):"@"===e.charAt(0)?new r.Variable("@"+e.slice(2,-1),i[t],u):new r.Property("$"+e.slice(2,-1),i[t],u);return n}d.restore()}}}};u.serializeVars=function(e){var t="";for(var n in e)if(Object.hasOwnProperty.call(e,n)){var i=e[n];t+=("@"===n[0]?"":"@")+n+": "+i+(";"===String(i).slice(-1)?"":";")}return t},t.exports=u},{"../functions/function-registry":27,"../less-error":38,"../tree":67,"../utils":89,"../visitors":93,"./parser-input":43}],45:[function(e,t,n){var i,r=function(e){this.less=e,this.visitors=[],this.preProcessors=[],this.postProcessors=[],this.installedPlugins=[],this.fileManagers=[],this.iterator=-1,this.pluginCache={},this.Loader=new e.PluginLoader(e)};r.prototype.addPlugins=function(e){if(e)for(var t=0;t<e.length;t++)this.addPlugin(e[t])},r.prototype.addPlugin=function(e,t,n){this.installedPlugins.push(e),t&&(this.pluginCache[t]=e),e.install&&e.install(this.less,this,n||this.less.functions.functionRegistry)},r.prototype.get=function(e){return this.pluginCache[e]},r.prototype.addVisitor=function(e){this.visitors.push(e)},r.prototype.addPreProcessor=function(e,t){var n;for(n=0;n<this.preProcessors.length&&!(this.preProcessors[n].priority>=t);n++);this.preProcessors.splice(n,0,{preProcessor:e,priority:t})},r.prototype.addPostProcessor=function(e,t){var n;for(n=0;n<this.postProcessors.length&&!(this.postProcessors[n].priority>=t);n++);this.postProcessors.splice(n,0,{postProcessor:e,priority:t})},r.prototype.addFileManager=function(e){this.fileManagers.push(e)},r.prototype.getPreProcessors=function(){for(var e=[],t=0;t<this.preProcessors.length;t++)e.push(this.preProcessors[t].preProcessor);return e},r.prototype.getPostProcessors=function(){for(var e=[],t=0;t<this.postProcessors.length;t++)e.push(this.postProcessors[t].postProcessor);return e},r.prototype.getVisitors=function(){return this.visitors},r.prototype.visitor=function(){var e=this;return{first:function(){return e.iterator=-1,e.visitors[e.iterator]},get:function(){return e.iterator+=1,e.visitors[e.iterator]}}},r.prototype.getFileManagers=function(){return this.fileManagers},t.exports=function(e,t){return!t&&i||(i=new r(e)),i}},{}],46:[function(e,t,n){var i,r=e("./utils");t.exports=function(t,n,a){var s=function(t,a,o){if("function"==typeof a?(o=a,a=r.copyOptions(this.options,{})):a=r.copyOptions(this.options,a||{}),!o){i||(i="undefined"==typeof Promise?e("promise"):Promise);var l=this;return new i(function(e,n){s.call(l,t,a,function(t,i){t?n(t):e(i)})})}this.parse(t,a,function(e,t,i,r){if(e)return o(e);var a;try{var s=new n(t,i);a=s.toCSS(r)}catch(e){return o(e)}o(null,a)})};return s}},{"./utils":89,promise:void 0}],47:[function(e,t,n){t.exports=function(e,t){var n=function(e){this.options=e};return n.prototype.toCSS=function(t,n,i){var r=new e({contentsIgnoredCharsMap:i.contentsIgnoredChars,rootNode:t,contentsMap:i.contents,sourceMapFilename:this.options.sourceMapFilename,sourceMapURL:this.options.sourceMapURL,outputFilename:this.options.sourceMapOutputFilename,sourceMapBasepath:this.options.sourceMapBasepath,sourceMapRootpath:this.options.sourceMapRootpath,outputSourceFiles:this.options.outputSourceFiles,sourceMapGenerator:this.options.sourceMapGenerator,sourceMapFileInline:this.options.sourceMapFileInline}),a=r.toCSS(n);return this.sourceMap=r.sourceMap,this.sourceMapURL=r.sourceMapURL,this.options.sourceMapInputFilename&&(this.sourceMapInputFilename=r.normalizeFilename(this.options.sourceMapInputFilename)),void 0!==this.options.sourceMapBasepath&&void 0!==this.sourceMapURL&&(this.sourceMapURL=r.removeBasepath(this.sourceMapURL)),a+this.getCSSAppendage()},n.prototype.getCSSAppendage=function(){var e=this.sourceMapURL;if(this.options.sourceMapFileInline){if(void 0===this.sourceMap)return"";e="data:application/json;base64,"+t.encodeBase64(this.sourceMap)}return e?"/*# sourceMappingURL="+e+" */":""},n.prototype.getExternalSourceMap=function(){return this.sourceMap},n.prototype.setExternalSourceMap=function(e){this.sourceMap=e},n.prototype.isInline=function(){return this.options.sourceMapFileInline},n.prototype.getSourceMapURL=function(){return this.sourceMapURL},n.prototype.getOutputFilename=function(){return this.options.sourceMapOutputFilename},n.prototype.getInputFilename=function(){return this.sourceMapInputFilename},n}},{}],48:[function(e,t,n){t.exports=function(e){var t=function(t){this._css=[],this._rootNode=t.rootNode,this._contentsMap=t.contentsMap,this._contentsIgnoredCharsMap=t.contentsIgnoredCharsMap,t.sourceMapFilename&&(this._sourceMapFilename=t.sourceMapFilename.replace(/\\/g,"/")),this._outputFilename=t.outputFilename,this.sourceMapURL=t.sourceMapURL,t.sourceMapBasepath&&(this._sourceMapBasepath=t.sourceMapBasepath.replace(/\\/g,"/")),t.sourceMapRootpath?(this._sourceMapRootpath=t.sourceMapRootpath.replace(/\\/g,"/"),"/"!==this._sourceMapRootpath.charAt(this._sourceMapRootpath.length-1)&&(this._sourceMapRootpath+="/")):this._sourceMapRootpath="",this._outputSourceFiles=t.outputSourceFiles,this._sourceMapGeneratorConstructor=e.getSourceMapGenerator(),this._lineNumber=0,this._column=0};return t.prototype.removeBasepath=function(e){return this._sourceMapBasepath&&0===e.indexOf(this._sourceMapBasepath)&&("\\"!==(e=e.substring(this._sourceMapBasepath.length)).charAt(0)&&"/"!==e.charAt(0)||(e=e.substring(1))),e},t.prototype.normalizeFilename=function(e){return e=e.replace(/\\/g,"/"),e=this.removeBasepath(e),(this._sourceMapRootpath||"")+e},t.prototype.add=function(e,t,n,i){if(e){var r,a,s,o,l;if(t&&t.filename){var u=this._contentsMap[t.filename];this._contentsIgnoredCharsMap[t.filename]&&((n-=this._contentsIgnoredCharsMap[t.filename])<0&&(n=0),u=u.slice(this._contentsIgnoredCharsMap[t.filename])),u=u.substring(0,n),a=u.split("\n"),o=a[a.length-1]}if(r=e.split("\n"),s=r[r.length-1],t&&t.filename)if(i)for(l=0;l<r.length;l++)this._sourceMapGenerator.addMapping({generated:{line:this._lineNumber+l+1,column:0===l?this._column:0},original:{line:a.length+l,column:0===l?o.length:0},source:this.normalizeFilename(t.filename)});else this._sourceMapGenerator.addMapping({generated:{line:this._lineNumber+1,column:this._column},original:{line:a.length,column:o.length},source:this.normalizeFilename(t.filename)});1===r.length?this._column+=s.length:(this._lineNumber+=r.length-1,this._column=s.length),this._css.push(e)}},t.prototype.isEmpty=function(){return 0===this._css.length},t.prototype.toCSS=function(e){if(this._sourceMapGenerator=new this._sourceMapGeneratorConstructor({file:this._outputFilename,sourceRoot:null}),this._outputSourceFiles)for(var t in this._contentsMap)if(this._contentsMap.hasOwnProperty(t)){var n=this._contentsMap[t];this._contentsIgnoredCharsMap[t]&&(n=n.slice(this._contentsIgnoredCharsMap[t])),this._sourceMapGenerator.setSourceContent(this.normalizeFilename(t),n)}if(this._rootNode.genCSS(e,this),this._css.length>0){var i,r=JSON.stringify(this._sourceMapGenerator.toJSON());this.sourceMapURL?i=this.sourceMapURL:this._sourceMapFilename&&(i=this._sourceMapFilename),this.sourceMapURL=i,this.sourceMap=r}return this._css.join("")},t}},{}],49:[function(e,t,n){var i=e("./contexts"),r=e("./visitors"),a=e("./tree");t.exports=function(e,t){var n,s=(t=t||{}).variables,o=new i.Eval(t);"object"!=typeof s||Array.isArray(s)||(s=Object.keys(s).map(function(e){var t=s[e];return t instanceof a.Value||(t instanceof a.Expression||(t=new a.Expression([t])),t=new a.Value([t])),new a.Declaration("@"+e,t,!1,null,0)}),o.frames=[new a.Ruleset(null,s)]);var l,u,c=[new r.JoinSelectorVisitor,new r.MarkVisibleSelectorsVisitor(!0),new r.ExtendVisitor,new r.ToCSSVisitor({compress:Boolean(t.compress)})],d=[];if(t.pluginManager){u=t.pluginManager.visitor();for(var h=0;h<2;h++)for(u.first();l=u.get();)l.isPreEvalVisitor?0!==h&&-1!==d.indexOf(l)||(d.push(l),l.run(e)):0!==h&&-1!==c.indexOf(l)||(l.isPreVisitor?c.unshift(l):c.push(l))}n=e.eval(o);for(var h=0;h<c.length;h++)c[h].run(n);if(t.pluginManager)for(u.first();l=u.get();)-1===c.indexOf(l)&&-1===d.indexOf(l)&&l.run(n);return n}},{"./contexts":13,"./tree":67,"./visitors":93}],50:[function(e,t,n){var i=e("./node"),r=function(e,t,n,i,r,a){this.value=e,this._index=t,this._fileInfo=n,this.mapLines=i,this.rulesetLike=void 0!==r&&r,this.allowRoot=!0,this.copyVisibilityInfo(a)};(r.prototype=new i).type="Anonymous",r.prototype.eval=function(){return new r(this.value,this._index,this._fileInfo,this.mapLines,this.rulesetLike,this.visibilityInfo())},r.prototype.compare=function(e){return e.toCSS&&this.toCSS()===e.toCSS()?0:void 0},r.prototype.isRulesetLike=function(){return this.rulesetLike},r.prototype.genCSS=function(e,t){this.nodeVisible=Boolean(this.value),this.nodeVisible&&t.add(this.value,this._fileInfo,this._index,this.mapLines)},t.exports=r},{"./node":76}],51:[function(e,t,n){var i=e("./node"),r=function(e,t){this.key=e,this.value=t};(r.prototype=new i).type="Assignment",r.prototype.accept=function(e){this.value=e.visit(this.value)},r.prototype.eval=function(e){return this.value.eval?new r(this.key,this.value.eval(e)):this},r.prototype.genCSS=function(e,t){t.add(this.key+"="),this.value.genCSS?this.value.genCSS(e,t):t.add(this.value)},t.exports=r},{"./node":76}],52:[function(e,t,n){var i=e("./node"),r=e("./selector"),a=e("./ruleset"),s=e("./anonymous"),o=function(e,t,n,a,o,l,u,c){var d;if(this.name=e,this.value=t instanceof i?t:t?new s(t):t,n){for(Array.isArray(n)?this.rules=n:(this.rules=[n],this.rules[0].selectors=new r([],null,null,a,o).createEmptySelectors()),d=0;d<this.rules.length;d++)this.rules[d].allowImports=!0;this.setParent(this.rules,this)}this._index=a,this._fileInfo=o,this.debugInfo=l,this.isRooted=u||!1,this.copyVisibilityInfo(c),this.allowRoot=!0};(o.prototype=new i).type="AtRule",o.prototype.accept=function(e){var t=this.value,n=this.rules;n&&(this.rules=e.visitArray(n)),t&&(this.value=e.visit(t))},o.prototype.isRulesetLike=function(){return this.rules||!this.isCharset()},o.prototype.isCharset=function(){return"@charset"===this.name},o.prototype.genCSS=function(e,t){var n=this.value,i=this.rules;t.add(this.name,this.fileInfo(),this.getIndex()),n&&(t.add(" "),n.genCSS(e,t)),i?this.outputRuleset(e,t,i):t.add(";")},o.prototype.eval=function(e){var t,n,i=this.value,r=this.rules;return t=e.mediaPath,n=e.mediaBlocks,e.mediaPath=[],e.mediaBlocks=[],i&&(i=i.eval(e)),r&&((r=[r[0].eval(e)])[0].root=!0),e.mediaPath=t,e.mediaBlocks=n,new o(this.name,i,r,this.getIndex(),this.fileInfo(),this.debugInfo,this.isRooted,this.visibilityInfo())},o.prototype.variable=function(e){if(this.rules)return a.prototype.variable.call(this.rules[0],e)},o.prototype.find=function(){if(this.rules)return a.prototype.find.apply(this.rules[0],arguments)},o.prototype.rulesets=function(){if(this.rules)return a.prototype.rulesets.apply(this.rules[0])},o.prototype.outputRuleset=function(e,t,n){var i,r=n.length;if(e.tabLevel=1+(0|e.tabLevel),e.compress){for(t.add("{"),i=0;i<r;i++)n[i].genCSS(e,t);return t.add("}"),void e.tabLevel--}var a="\n"+Array(e.tabLevel).join("  "),s=a+"  ";if(r){for(t.add(" {"+s),n[0].genCSS(e,t),i=1;i<r;i++)t.add(s),n[i].genCSS(e,t);t.add(a+"}")}else t.add(" {"+a+"}");e.tabLevel--},t.exports=o},{"./anonymous":50,"./node":76,"./ruleset":81,"./selector":82}],53:[function(e,t,n){var i=e("./node"),r=function(e,t,n){this.key=e,this.op=t,this.value=n};(r.prototype=new i).type="Attribute",r.prototype.eval=function(e){return new r(this.key.eval?this.key.eval(e):this.key,this.op,this.value&&this.value.eval?this.value.eval(e):this.value)},r.prototype.genCSS=function(e,t){t.add(this.toCSS(e))},r.prototype.toCSS=function(e){var t=this.key.toCSS?this.key.toCSS(e):this.key;return this.op&&(t+=this.op,t+=this.value.toCSS?this.value.toCSS(e):this.value),"["+t+"]"},t.exports=r},{"./node":76}],54:[function(e,t,n){var i=e("./node"),r=e("./anonymous"),a=e("../functions/function-caller"),s=function(e,t,n,i){this.name=e,this.args=t,this.calc="calc"===e,this._index=n,this._fileInfo=i};(s.prototype=new i).type="Call",s.prototype.accept=function(e){this.args&&(this.args=e.visitArray(this.args))},s.prototype.eval=function(e){var t=e.mathOn;e.mathOn=!this.calc,(this.calc||e.inCalc)&&e.enterCalc();var n=this.args.map(function(t){return t.eval(e)});(this.calc||e.inCalc)&&e.exitCalc(),e.mathOn=t;var o,l=new a(this.name,e,this.getIndex(),this.fileInfo());if(l.isValid()){try{o=l.call(n)}catch(e){throw{type:e.type||"Runtime",message:"error evaluating function `"+this.name+"`"+(e.message?": "+e.message:""),index:this.getIndex(),filename:this.fileInfo().filename,line:e.lineNumber,column:e.columnNumber}}if(null!=o)return o instanceof i||(o=new r(o&&!0!==o?o.toString():null)),o._index=this._index,o._fileInfo=this._fileInfo,o}return new s(this.name,n,this.getIndex(),this.fileInfo())},s.prototype.genCSS=function(e,t){t.add(this.name+"(",this.fileInfo(),this.getIndex());for(var n=0;n<this.args.length;n++)this.args[n].genCSS(e,t),n+1<this.args.length&&t.add(", ");t.add(")")},t.exports=s},{"../functions/function-caller":26,"./anonymous":50,"./node":76}],55:[function(e,t,n){var i=e("./node"),r=e("../data/colors"),a=function(e,t,n){var i=this;Array.isArray(e)?this.rgb=e:e.length>=6?(this.rgb=[],e.match(/.{2}/g).map(function(e,t){t<3?i.rgb.push(parseInt(e,16)):i.alpha=parseInt(e,16)/255})):(this.rgb=[],e.split("").map(function(e,t){t<3?i.rgb.push(parseInt(e+e,16)):i.alpha=parseInt(e+e,16)/255})),this.alpha=this.alpha||("number"==typeof t?t:1),void 0!==n&&(this.value=n)};function s(e,t){return Math.min(Math.max(e,0),t)}function o(e){return"#"+e.map(function(e){return((e=s(Math.round(e),255))<16?"0":"")+e.toString(16)}).join("")}(a.prototype=new i).type="Color",a.prototype.luma=function(){var e=this.rgb[0]/255,t=this.rgb[1]/255,n=this.rgb[2]/255;return e=e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4),t=t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4),n=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4),.2126*e+.7152*t+.0722*n},a.prototype.genCSS=function(e,t){t.add(this.toCSS(e))},a.prototype.toCSS=function(e,t){var n,i,r,a=e&&e.compress&&!t,o=[];if(i=this.fround(e,this.alpha),this.value)if(0===this.value.indexOf("rgb"))i<1&&(r="rgba");else{if(0!==this.value.indexOf("hsl"))return this.value;r=i<1?"hsla":"hsl"}else i<1&&(r="rgba");switch(r){case"rgba":o=this.rgb.map(function(e){return s(Math.round(e),255)}).concat(s(i,1));break;case"hsla":o.push(s(i,1));case"hsl":n=this.toHSL(),o=[this.fround(e,n.h),this.fround(e,100*n.s)+"%",this.fround(e,100*n.l)+"%"].concat(o)}if(r)return r+"("+o.join(","+(a?"":" "))+")";if(n=this.toRGB(),a){var l=n.split("");l[1]===l[2]&&l[3]===l[4]&&l[5]===l[6]&&(n="#"+l[1]+l[3]+l[5])}return n},a.prototype.operate=function(e,t,n){for(var i=new Array(3),r=this.alpha*(1-n.alpha)+n.alpha,s=0;s<3;s++)i[s]=this._operate(e,t,this.rgb[s],n.rgb[s]);return new a(i,r)},a.prototype.toRGB=function(){return o(this.rgb)},a.prototype.toHSL=function(){var e,t,n=this.rgb[0]/255,i=this.rgb[1]/255,r=this.rgb[2]/255,a=this.alpha,s=Math.max(n,i,r),o=Math.min(n,i,r),l=(s+o)/2,u=s-o;if(s===o)e=t=0;else{switch(t=l>.5?u/(2-s-o):u/(s+o),s){case n:e=(i-r)/u+(i<r?6:0);break;case i:e=(r-n)/u+2;break;case r:e=(n-i)/u+4}e/=6}return{h:360*e,s:t,l:l,a:a}},a.prototype.toHSV=function(){var e,t,n=this.rgb[0]/255,i=this.rgb[1]/255,r=this.rgb[2]/255,a=this.alpha,s=Math.max(n,i,r),o=Math.min(n,i,r),l=s,u=s-o;if(t=0===s?0:u/s,s===o)e=0;else{switch(s){case n:e=(i-r)/u+(i<r?6:0);break;case i:e=(r-n)/u+2;break;case r:e=(n-i)/u+4}e/=6}return{h:360*e,s:t,v:l,a:a}},a.prototype.toARGB=function(){return o([255*this.alpha].concat(this.rgb))},a.prototype.compare=function(e){return e.rgb&&e.rgb[0]===this.rgb[0]&&e.rgb[1]===this.rgb[1]&&e.rgb[2]===this.rgb[2]&&e.alpha===this.alpha?0:void 0},a.fromKeyword=function(e){var t,n=e.toLowerCase();if(r.hasOwnProperty(n)?t=new a(r[n].slice(1)):"transparent"===n&&(t=new a([0,0,0],0)),t)return t.value=e,t},t.exports=a},{"../data/colors":14,"./node":76}],56:[function(e,t,n){var i=e("./node"),r=function(e){" "===e?(this.value=" ",this.emptyOrWhitespace=!0):(this.value=e?e.trim():"",this.emptyOrWhitespace=""===this.value)};(r.prototype=new i).type="Combinator";var a={"":!0," ":!0,"|":!0};r.prototype.genCSS=function(e,t){var n=e.compress||a[this.value]?"":" ";t.add(n+this.value+n)},t.exports=r},{"./node":76}],57:[function(e,t,n){var i=e("./node"),r=e("./debug-info"),a=function(e,t,n,i){this.value=e,this.isLineComment=t,this._index=n,this._fileInfo=i,this.allowRoot=!0};(a.prototype=new i).type="Comment",a.prototype.genCSS=function(e,t){this.debugInfo&&t.add(r(e,this),this.fileInfo(),this.getIndex()),t.add(this.value)},a.prototype.isSilent=function(e){var t=e.compress&&"!"!==this.value[2];return this.isLineComment||t},t.exports=a},{"./debug-info":59,"./node":76}],58:[function(e,t,n){var i=e("./node"),r=function(e,t,n,i,r){this.op=e.trim(),this.lvalue=t,this.rvalue=n,this._index=i,this.negate=r};(r.prototype=new i).type="Condition",r.prototype.accept=function(e){this.lvalue=e.visit(this.lvalue),this.rvalue=e.visit(this.rvalue)},r.prototype.eval=function(e){var t=function(e,t,n){switch(e){case"and":return t&&n;case"or":return t||n;default:switch(i.compare(t,n)){case-1:return"<"===e||"=<"===e||"<="===e;case 0:return"="===e||">="===e||"=<"===e||"<="===e;case 1:return">"===e||">="===e;default:return!1}}}(this.op,this.lvalue.eval(e),this.rvalue.eval(e));return this.negate?!t:t},t.exports=r},{"./node":76}],59:[function(e,t,n){var i=function(e,t,n){var r="";if(e.dumpLineNumbers&&!e.compress)switch(e.dumpLineNumbers){case"comments":r=i.asComment(t);break;case"mediaquery":r=i.asMediaQuery(t);break;case"all":r=i.asComment(t)+(n||"")+i.asMediaQuery(t)}return r};i.asComment=function(e){return"/* line "+e.debugInfo.lineNumber+", "+e.debugInfo.fileName+" */\n"},i.asMediaQuery=function(e){var t=e.debugInfo.fileName;return/^[a-z]+:\/\//i.test(t)||(t="file://"+t),"@media -sass-debug-info{filename{font-family:"+t.replace(/([.:\/\\])/g,function(e){return"\\"==e&&(e="/"),"\\"+e})+"}line{font-family:\\00003"+e.debugInfo.lineNumber+"}}\n"},t.exports=i},{}],60:[function(e,t,n){var i=e("./node"),r=e("./value"),a=e("./keyword"),s=e("./anonymous"),o=e("../constants").Math,l=function(e,t,n,a,o,l,u,c){this.name=e,this.value=t instanceof i?t:new r([t?new s(t):null]),this.important=n?" "+n.trim():"",this.merge=a,this._index=o,this._fileInfo=l,this.inline=u||!1,this.variable=void 0!==c?c:e.charAt&&"@"===e.charAt(0),this.allowRoot=!0,this.setParent(this.value,this)};(l.prototype=new i).type="Declaration",l.prototype.genCSS=function(e,t){t.add(this.name+(e.compress?":":": "),this.fileInfo(),this.getIndex());try{this.value.genCSS(e,t)}catch(e){throw e.index=this._index,e.filename=this._fileInfo.filename,e}t.add(this.important+(this.inline||e.lastRule&&e.compress?"":";"),this._fileInfo,this._index)},l.prototype.eval=function(e){var t,n,i=!1,r=this.name,s=this.variable;"string"!=typeof r&&(r=1===r.length&&r[0]instanceof a?r[0].value:function(e,t){var n,i="",r=t.length,a={add:function(e){i+=e}};for(n=0;n<r;n++)t[n].eval(e).genCSS(e,a);return i}(e,r),s=!1),"font"===r&&e.math===o.ALWAYS&&(i=!0,t=e.math,e.math=o.PARENS_DIVISION);try{if(e.importantScope.push({}),n=this.value.eval(e),!this.variable&&"DetachedRuleset"===n.type)throw{message:"Rulesets cannot be evaluated on a property.",index:this.getIndex(),filename:this.fileInfo().filename};var u=this.important,c=e.importantScope.pop();return!u&&c.important&&(u=c.important),new l(r,n,u,this.merge,this.getIndex(),this.fileInfo(),this.inline,s)}catch(e){throw"number"!=typeof e.index&&(e.index=this.getIndex(),e.filename=this.fileInfo().filename),e}finally{i&&(e.math=t)}},l.prototype.makeImportant=function(){return new l(this.name,this.value,"!important",this.merge,this.getIndex(),this.fileInfo(),this.inline)},t.exports=l},{"../constants":12,"./anonymous":50,"./keyword":70,"./node":76,"./value":86}],61:[function(e,t,n){var i=e("./node"),r=e("../contexts"),a=e("../utils"),s=function(e,t){this.ruleset=e,this.frames=t,this.setParent(this.ruleset,this)};(s.prototype=new i).type="DetachedRuleset",s.prototype.evalFirst=!0,s.prototype.accept=function(e){this.ruleset=e.visit(this.ruleset)},s.prototype.eval=function(e){var t=this.frames||a.copyArray(e.frames);return new s(this.ruleset,t)},s.prototype.callEval=function(e){return this.ruleset.eval(this.frames?new r.Eval(e,this.frames.concat(e.frames)):e)},t.exports=s},{"../contexts":13,"../utils":89,"./node":76}],62:[function(e,t,n){var i=e("./node"),r=e("../data/unit-conversions"),a=e("./unit"),s=e("./color"),o=function(e,t){if(this.value=parseFloat(e),isNaN(this.value))throw new Error("Dimension is not a number.");this.unit=t&&t instanceof a?t:new a(t?[t]:void 0),this.setParent(this.unit,this)};(o.prototype=new i).type="Dimension",o.prototype.accept=function(e){this.unit=e.visit(this.unit)},o.prototype.eval=function(e){return this},o.prototype.toColor=function(){return new s([this.value,this.value,this.value])},o.prototype.genCSS=function(e,t){if(e&&e.strictUnits&&!this.unit.isSingular())throw new Error("Multiple units in dimension. Correct the units or use the unit function. Bad unit: "+this.unit.toString());var n=this.fround(e,this.value),i=String(n);if(0!==n&&n<1e-6&&n>-1e-6&&(i=n.toFixed(20).replace(/0+$/,"")),e&&e.compress){if(0===n&&this.unit.isLength())return void t.add(i);n>0&&n<1&&(i=i.substr(1))}t.add(i),this.unit.genCSS(e,t)},o.prototype.operate=function(e,t,n){var i=this._operate(e,t,this.value,n.value),r=this.unit.clone();if("+"===t||"-"===t)if(0===r.numerator.length&&0===r.denominator.length)r=n.unit.clone(),this.unit.backupUnit&&(r.backupUnit=this.unit.backupUnit);else if(0===n.unit.numerator.length&&0===r.denominator.length);else{if(n=n.convertTo(this.unit.usedUnits()),e.strictUnits&&n.unit.toString()!==r.toString())throw new Error("Incompatible units. Change the units or use the unit function. Bad units: '"+r.toString()+"' and '"+n.unit.toString()+"'.");i=this._operate(e,t,this.value,n.value)}else"*"===t?(r.numerator=r.numerator.concat(n.unit.numerator).sort(),r.denominator=r.denominator.concat(n.unit.denominator).sort(),r.cancel()):"/"===t&&(r.numerator=r.numerator.concat(n.unit.denominator).sort(),r.denominator=r.denominator.concat(n.unit.numerator).sort(),r.cancel());return new o(i,r)},o.prototype.compare=function(e){var t,n;if(e instanceof o){if(this.unit.isEmpty()||e.unit.isEmpty())t=this,n=e;else if(t=this.unify(),n=e.unify(),0!==t.unit.compare(n.unit))return;return i.numericCompare(t.value,n.value)}},o.prototype.unify=function(){return this.convertTo({length:"px",duration:"s",angle:"rad"})},o.prototype.convertTo=function(e){var t,n,i,a,s,l=this.value,u=this.unit.clone(),c={};if("string"==typeof e){for(t in r)r[t].hasOwnProperty(e)&&((c={})[t]=e);e=c}for(n in s=function(e,t){return i.hasOwnProperty(e)?(t?l/=i[e]/i[a]:l*=i[e]/i[a],a):e},e)e.hasOwnProperty(n)&&(a=e[n],i=r[n],u.map(s));return u.cancel(),new o(l,u)},t.exports=o},{"../data/unit-conversions":16,"./color":55,"./node":76,"./unit":84}],63:[function(e,t,n){var i=e("./node"),r=e("./paren"),a=e("./combinator"),s=function(e,t,n,i,r,s){this.combinator=e instanceof a?e:new a(e),this.value="string"==typeof t?t.trim():t||"",this.isVariable=n,this._index=i,this._fileInfo=r,this.copyVisibilityInfo(s),this.setParent(this.combinator,this)};(s.prototype=new i).type="Element",s.prototype.accept=function(e){var t=this.value;this.combinator=e.visit(this.combinator),"object"==typeof t&&(this.value=e.visit(t))},s.prototype.eval=function(e){return new s(this.combinator,this.value.eval?this.value.eval(e):this.value,this.isVariable,this.getIndex(),this.fileInfo(),this.visibilityInfo())},s.prototype.clone=function(){return new s(this.combinator,this.value,this.isVariable,this.getIndex(),this.fileInfo(),this.visibilityInfo())},s.prototype.genCSS=function(e,t){t.add(this.toCSS(e),this.fileInfo(),this.getIndex())},s.prototype.toCSS=function(e){e=e||{};var t=this.value,n=e.firstSelector;return t instanceof r&&(e.firstSelector=!0),t=t.toCSS?t.toCSS(e):t,e.firstSelector=n,""===t&&"&"===this.combinator.value.charAt(0)?"":this.combinator.toCSS(e)+t},t.exports=s},{"./combinator":56,"./node":76,"./paren":78}],64:[function(e,t,n){var i=e("./node"),r=e("./paren"),a=e("./comment"),s=e("./dimension"),o=e("../constants").Math,l=function(e,t){if(this.value=e,this.noSpacing=t,!e)throw new Error("Expression requires an array parameter")};(l.prototype=new i).type="Expression",l.prototype.accept=function(e){this.value=e.visitArray(this.value)},l.prototype.eval=function(e){var t,n=e.isMathOn(),i=this.parens&&(e.math!==o.STRICT_LEGACY||!this.parensInOp),a=!1;return i&&e.inParenthesis(),this.value.length>1?t=new l(this.value.map(function(t){return t.eval?t.eval(e):t}),this.noSpacing):1===this.value.length?(!this.value[0].parens||this.value[0].parensInOp||e.inCalc||(a=!0),t=this.value[0].eval(e)):t=this,i&&e.outOfParenthesis(),!this.parens||!this.parensInOp||n||a||t instanceof s||(t=new r(t)),t},l.prototype.genCSS=function(e,t){for(var n=0;n<this.value.length;n++)this.value[n].genCSS(e,t),!this.noSpacing&&n+1<this.value.length&&t.add(" ")},l.prototype.throwAwayComments=function(){this.value=this.value.filter(function(e){return!(e instanceof a)})},t.exports=l},{"../constants":12,"./comment":57,"./dimension":62,"./node":76,"./paren":78}],65:[function(e,t,n){var i=e("./node"),r=e("./selector"),a=function e(t,n,i,r,a){switch(this.selector=t,this.option=n,this.object_id=e.next_id++,this.parent_ids=[this.object_id],this._index=i,this._fileInfo=r,this.copyVisibilityInfo(a),this.allowRoot=!0,n){case"all":this.allowBefore=!0,this.allowAfter=!0;break;default:this.allowBefore=!1,this.allowAfter=!1}this.setParent(this.selector,this)};a.next_id=0,(a.prototype=new i).type="Extend",a.prototype.accept=function(e){this.selector=e.visit(this.selector)},a.prototype.eval=function(e){return new a(this.selector.eval(e),this.option,this.getIndex(),this.fileInfo(),this.visibilityInfo())},a.prototype.clone=function(e){return new a(this.selector,this.option,this.getIndex(),this.fileInfo(),this.visibilityInfo())},a.prototype.findSelfSelectors=function(e){var t,n,i=[];for(t=0;t<e.length;t++)n=e[t].elements,t>0&&n.length&&""===n[0].combinator.value&&(n[0].combinator.value=" "),i=i.concat(e[t].elements);this.selfSelectors=[new r(i)],this.selfSelectors[0].copyVisibilityInfo(this.visibilityInfo())},t.exports=a},{"./node":76,"./selector":82}],66:[function(e,t,n){var i=e("./node"),r=e("./media"),a=e("./url"),s=e("./quoted"),o=e("./ruleset"),l=e("./anonymous"),u=e("../utils"),c=e("../less-error"),d=function(e,t,n,i,r,a){if(this.options=n,this._index=i,this._fileInfo=r,this.path=e,this.features=t,this.allowRoot=!0,void 0!==this.options.less||this.options.inline)this.css=!this.options.less||this.options.inline;else{var s=this.getPath();s&&/[#\.\&\?]css([\?;].*)?$/.test(s)&&(this.css=!0)}this.copyVisibilityInfo(a),this.setParent(this.features,this),this.setParent(this.path,this)};(d.prototype=new i).type="Import",d.prototype.accept=function(e){this.features&&(this.features=e.visit(this.features)),this.path=e.visit(this.path),this.options.isPlugin||this.options.inline||!this.root||(this.root=e.visit(this.root))},d.prototype.genCSS=function(e,t){this.css&&void 0===this.path._fileInfo.reference&&(t.add("@import ",this._fileInfo,this._index),this.path.genCSS(e,t),this.features&&(t.add(" "),this.features.genCSS(e,t)),t.add(";"))},d.prototype.getPath=function(){return this.path instanceof a?this.path.value.value:this.path.value},d.prototype.isVariableImport=function(){var e=this.path;return e instanceof a&&(e=e.value),!(e instanceof s)||e.containsVariables()},d.prototype.evalForImport=function(e){var t=this.path;return t instanceof a&&(t=t.value),new d(t.eval(e),this.features,this.options,this._index,this._fileInfo,this.visibilityInfo())},d.prototype.evalPath=function(e){var t=this.path.eval(e),n=this._fileInfo;if(!(t instanceof a)){var i=t.value;n&&i&&e.pathRequiresRewrite(i)?t.value=e.rewritePath(i,n.rootpath):t.value=e.normalizePath(t.value)}return t},d.prototype.eval=function(e){var t=this.doEval(e);return(this.options.reference||this.blocksVisibility())&&(t.length||0===t.length?t.forEach(function(e){e.addVisibilityBlock()}):t.addVisibilityBlock()),t},d.prototype.doEval=function(e){var t,n,i=this.features&&this.features.eval(e);if(this.options.isPlugin){if(this.root&&this.root.eval)try{this.root.eval(e)}catch(e){throw e.message="Plugin error during evaluation",new c(e,this.root.imports,this.root.filename)}return(n=e.frames[0]&&e.frames[0].functionRegistry)&&this.root&&this.root.functions&&n.addMultiple(this.root.functions),[]}if(this.skip&&("function"==typeof this.skip&&(this.skip=this.skip()),this.skip))return[];if(this.options.inline){var a=new l(this.root,0,{filename:this.importedFilename,reference:this.path._fileInfo&&this.path._fileInfo.reference},!0,!0);return this.features?new r([a],this.features.value):[a]}if(this.css){var s=new d(this.evalPath(e),i,this.options,this._index);if(!s.css&&this.error)throw this.error;return s}return(t=new o(null,u.copyArray(this.root.rules))).evalImports(e),this.features?new r(t.rules,this.features.value):t.rules},t.exports=d},{"../less-error":38,"../utils":89,"./anonymous":50,"./media":71,"./node":76,"./quoted":80,"./ruleset":81,"./url":85}],67:[function(e,t,n){var i=Object.create(null);i.Node=e("./node"),i.Color=e("./color"),i.AtRule=e("./atrule"),i.DetachedRuleset=e("./detached-ruleset"),i.Operation=e("./operation"),i.Dimension=e("./dimension"),i.Unit=e("./unit"),i.Keyword=e("./keyword"),i.Variable=e("./variable"),i.Property=e("./property"),i.Ruleset=e("./ruleset"),i.Element=e("./element"),i.Attribute=e("./attribute"),i.Combinator=e("./combinator"),i.Selector=e("./selector"),i.Quoted=e("./quoted"),i.Expression=e("./expression"),i.Declaration=e("./declaration"),i.Call=e("./call"),i.URL=e("./url"),i.Import=e("./import"),i.mixin={Call:e("./mixin-call"),Definition:e("./mixin-definition")},i.Comment=e("./comment"),i.Anonymous=e("./anonymous"),i.Value=e("./value"),i.JavaScript=e("./javascript"),i.Assignment=e("./assignment"),i.Condition=e("./condition"),i.Paren=e("./paren"),i.Media=e("./media"),i.UnicodeDescriptor=e("./unicode-descriptor"),i.Negative=e("./negative"),i.Extend=e("./extend"),i.VariableCall=e("./variable-call"),i.NamespaceValue=e("./namespace-value"),t.exports=i},{"./anonymous":50,"./assignment":51,"./atrule":52,"./attribute":53,"./call":54,"./color":55,"./combinator":56,"./comment":57,"./condition":58,"./declaration":60,"./detached-ruleset":61,"./dimension":62,"./element":63,"./expression":64,"./extend":65,"./import":66,"./javascript":68,"./keyword":70,"./media":71,"./mixin-call":72,"./mixin-definition":73,"./namespace-value":74,"./negative":75,"./node":76,"./operation":77,"./paren":78,"./property":79,"./quoted":80,"./ruleset":81,"./selector":82,"./unicode-descriptor":83,"./unit":84,"./url":85,"./value":86,"./variable":88,"./variable-call":87}],68:[function(e,t,n){var i=e("./js-eval-node"),r=e("./dimension"),a=e("./quoted"),s=e("./anonymous"),o=function(e,t,n,i){this.escaped=t,this.expression=e,this._index=n,this._fileInfo=i};(o.prototype=new i).type="JavaScript",o.prototype.eval=function(e){var t=this.evaluateJavaScript(this.expression,e),n=typeof t;return"number"!==n||isNaN(t)?"string"===n?new a('"'+t+'"',t,this.escaped,this._index):Array.isArray(t)?new s(t.join(", ")):new s(t):new r(t)},t.exports=o},{"./anonymous":50,"./dimension":62,"./js-eval-node":69,"./quoted":80}],69:[function(e,t,n){var i=e("./node"),r=e("./variable"),a=function(){};(a.prototype=new i).evaluateJavaScript=function(e,t){var n,i=this,a={};if(!t.javascriptEnabled)throw{message:"Inline JavaScript is not enabled. Is it set in your options?",filename:this.fileInfo().filename,index:this.getIndex()};e=e.replace(/@\{([\w-]+)\}/g,function(e,n){return i.jsify(new r("@"+n,i.getIndex(),i.fileInfo()).eval(t))});try{e=new Function("return ("+e+")")}catch(t){throw{message:"JavaScript evaluation error: "+t.message+" from `"+e+"`",filename:this.fileInfo().filename,index:this.getIndex()}}var s=t.frames[0].variables();for(var o in s)s.hasOwnProperty(o)&&(a[o.slice(1)]={value:s[o].value,toJS:function(){return this.value.eval(t).toCSS()}});try{n=e.call(a)}catch(e){throw{message:"JavaScript evaluation error: '"+e.name+": "+e.message.replace(/["]/g,"'")+"'",filename:this.fileInfo().filename,index:this.getIndex()}}return n},a.prototype.jsify=function(e){return Array.isArray(e.value)&&e.value.length>1?"["+e.value.map(function(e){return e.toCSS()}).join(", ")+"]":e.toCSS()},t.exports=a},{"./node":76,"./variable":88}],70:[function(e,t,n){var i=e("./node"),r=function(e){this.value=e};(r.prototype=new i).type="Keyword",r.prototype.genCSS=function(e,t){if("%"===this.value)throw{type:"Syntax",message:"Invalid % without number"};t.add(this.value)},r.True=new r("true"),r.False=new r("false"),t.exports=r},{"./node":76}],71:[function(e,t,n){var i=e("./ruleset"),r=e("./value"),a=e("./selector"),s=e("./anonymous"),o=e("./expression"),l=e("./atrule"),u=e("../utils"),c=function(e,t,n,s,o){this._index=n,this._fileInfo=s;var l=new a([],null,null,this._index,this._fileInfo).createEmptySelectors();this.features=new r(t),this.rules=[new i(l,e)],this.rules[0].allowImports=!0,this.copyVisibilityInfo(o),this.allowRoot=!0,this.setParent(l,this),this.setParent(this.features,this),this.setParent(this.rules,this)};(c.prototype=new l).type="Media",c.prototype.isRulesetLike=function(){return!0},c.prototype.accept=function(e){this.features&&(this.features=e.visit(this.features)),this.rules&&(this.rules=e.visitArray(this.rules))},c.prototype.genCSS=function(e,t){t.add("@media ",this._fileInfo,this._index),this.features.genCSS(e,t),this.outputRuleset(e,t,this.rules)},c.prototype.eval=function(e){e.mediaBlocks||(e.mediaBlocks=[],e.mediaPath=[]);var t=new c(null,[],this._index,this._fileInfo,this.visibilityInfo());return this.debugInfo&&(this.rules[0].debugInfo=this.debugInfo,t.debugInfo=this.debugInfo),t.features=this.features.eval(e),e.mediaPath.push(t),e.mediaBlocks.push(t),this.rules[0].functionRegistry=e.frames[0].functionRegistry.inherit(),e.frames.unshift(this.rules[0]),t.rules=[this.rules[0].eval(e)],e.frames.shift(),e.mediaPath.pop(),0===e.mediaPath.length?t.evalTop(e):t.evalNested(e)},c.prototype.evalTop=function(e){var t=this;if(e.mediaBlocks.length>1){var n=new a([],null,null,this.getIndex(),this.fileInfo()).createEmptySelectors();(t=new i(n,e.mediaBlocks)).multiMedia=!0,t.copyVisibilityInfo(this.visibilityInfo()),this.setParent(t,this)}return delete e.mediaBlocks,delete e.mediaPath,t},c.prototype.evalNested=function(e){var t,n,a=e.mediaPath.concat([this]);for(t=0;t<a.length;t++)n=a[t].features instanceof r?a[t].features.value:a[t].features,a[t]=Array.isArray(n)?n:[n];return this.features=new r(this.permute(a).map(function(e){for(e=e.map(function(e){return e.toCSS?e:new s(e)}),t=e.length-1;t>0;t--)e.splice(t,0,new s("and"));return new o(e)})),this.setParent(this.features,this),new i([],[])},c.prototype.permute=function(e){if(0===e.length)return[];if(1===e.length)return e[0];for(var t=[],n=this.permute(e.slice(1)),i=0;i<n.length;i++)for(var r=0;r<e[0].length;r++)t.push([e[0][r]].concat(n[i]));return t},c.prototype.bubbleSelectors=function(e){e&&(this.rules=[new i(u.copyArray(e),[this.rules[0]])],this.setParent(this.rules,this))},t.exports=c},{"../utils":89,"./anonymous":50,"./atrule":52,"./expression":64,"./ruleset":81,"./selector":82,"./value":86}],72:[function(e,t,n){var i=e("./node"),r=e("./selector"),a=e("./mixin-definition"),s=e("../functions/default"),o=function(e,t,n,i,a){this.selector=new r(e),this.arguments=t||[],this._index=n,this._fileInfo=i,this.important=a,this.allowRoot=!0,this.setParent(this.selector,this)};(o.prototype=new i).type="MixinCall",o.prototype.accept=function(e){this.selector&&(this.selector=e.visit(this.selector)),this.arguments.length&&(this.arguments=e.visitArray(this.arguments))},o.prototype.eval=function(e){var t,n,i,r,o,l,u,c,d,h,f,p,m,v,g,y=[],_=[],b=!1,w=[],E=[],S=-1,T=0,k=1,C=2;function I(t,n){var i,r,a;for(i=0;i<2;i++){for(E[i]=!0,s.value(i),r=0;r<n.length&&E[i];r++)(a=n[r]).matchCondition&&(E[i]=E[i]&&a.matchCondition(null,e));t.matchCondition&&(E[i]=E[i]&&t.matchCondition(y,e))}return E[0]||E[1]?E[0]!=E[1]?E[1]?k:C:T:S}for(this.selector=this.selector.eval(e),l=0;l<this.arguments.length;l++)if(r=this.arguments[l],o=r.value.eval(e),r.expand&&Array.isArray(o.value))for(o=o.value,u=0;u<o.length;u++)y.push({value:o[u]});else y.push({name:r.name,value:o});for(g=function(t){return t.matchArgs(null,e)},l=0;l<e.frames.length;l++)if((t=e.frames[l].find(this.selector,null,g)).length>0){for(h=!0,u=0;u<t.length;u++){for(n=t[u].rule,i=t[u].path,d=!1,c=0;c<e.frames.length;c++)if(!(n instanceof a)&&n===(e.frames[c].originalRuleset||e.frames[c])){d=!0;break}d||n.matchArgs(y,e)&&((f={mixin:n,group:I(n,i)}).group!==S&&w.push(f),b=!0)}for(s.reset(),m=[0,0,0],u=0;u<w.length;u++)m[w[u].group]++;if(m[T]>0)p=C;else if(p=k,m[k]+m[C]>1)throw{type:"Runtime",message:"Ambiguous use of `default()` found when matching for `"+this.format(y)+"`",index:this.getIndex(),filename:this.fileInfo().filename};for(u=0;u<w.length;u++)if((f=w[u].group)===T||f===p)try{(n=w[u].mixin)instanceof a||(v=n.originalRuleset||n,(n=new a("",[],n.rules,null,!1,null,v.visibilityInfo())).originalRuleset=v);var A=n.evalCall(e,y,this.important).rules;this._setVisibilityToReplacement(A),Array.prototype.push.apply(_,A)}catch(e){throw{message:e.message,index:this.getIndex(),filename:this.fileInfo().filename,stack:e.stack}}if(b)return _}throw h?{type:"Runtime",message:"No matching definition was found for `"+this.format(y)+"`",index:this.getIndex(),filename:this.fileInfo().filename}:{type:"Name",message:this.selector.toCSS().trim()+" is undefined",index:this.getIndex(),filename:this.fileInfo().filename}},o.prototype._setVisibilityToReplacement=function(e){var t;if(this.blocksVisibility())for(t=0;t<e.length;t++)e[t].addVisibilityBlock()},o.prototype.format=function(e){return this.selector.toCSS().trim()+"("+(e?e.map(function(e){var t="";return e.name&&(t+=e.name+":"),e.value.toCSS?t+=e.value.toCSS():t+="???",t}).join(", "):"")+")"},t.exports=o},{"../functions/default":25,"./mixin-definition":73,"./node":76,"./selector":82}],73:[function(e,t,n){var i=e("./selector"),r=e("./element"),a=e("./ruleset"),s=e("./declaration"),o=e("./detached-ruleset"),l=e("./expression"),u=e("../contexts"),c=e("../utils"),d=function(e,t,n,a,s,o,l){this.name=e||"anonymous mixin",this.selectors=[new i([new r(null,e,!1,this._index,this._fileInfo)])],this.params=t,this.condition=a,this.variadic=s,this.arity=t.length,this.rules=n,this._lookups={};var u=[];this.required=t.reduce(function(e,t){return!t.name||t.name&&!t.value?e+1:(u.push(t.name),e)},0),this.optionalParameters=u,this.frames=o,this.copyVisibilityInfo(l),this.allowRoot=!0};(d.prototype=new a).type="MixinDefinition",d.prototype.evalFirst=!0,d.prototype.accept=function(e){this.params&&this.params.length&&(this.params=e.visitArray(this.params)),this.rules=e.visitArray(this.rules),this.condition&&(this.condition=e.visit(this.condition))},d.prototype.evalParams=function(e,t,n,i){var r,d,h,f,p,m,v,g,y=new a(null,null),_=c.copyArray(this.params),b=0;if(t.frames&&t.frames[0]&&t.frames[0].functionRegistry&&(y.functionRegistry=t.frames[0].functionRegistry.inherit()),t=new u.Eval(t,[y].concat(t.frames)),n)for(n=c.copyArray(n),b=n.length,h=0;h<b;h++)if(d=n[h],m=d&&d.name){for(v=!1,f=0;f<_.length;f++)if(!i[f]&&m===_[f].name){i[f]=d.value.eval(e),y.prependRule(new s(m,d.value.eval(e))),v=!0;break}if(v){n.splice(h,1),h--;continue}throw{type:"Runtime",message:"Named argument for "+this.name+" "+n[h].name+" not found"}}for(g=0,h=0;h<_.length;h++)if(!i[h]){if(d=n&&n[g],m=_[h].name)if(_[h].variadic){for(r=[],f=g;f<b;f++)r.push(n[f].value.eval(e));y.prependRule(new s(m,new l(r).eval(e)))}else{if(p=d&&d.value)p=Array.isArray(p)?new o(new a("",p)):p.eval(e);else{if(!_[h].value)throw{type:"Runtime",message:"wrong number of arguments for "+this.name+" ("+b+" for "+this.arity+")"};p=_[h].value.eval(t),y.resetCache()}y.prependRule(new s(m,p)),i[h]=p}if(_[h].variadic&&n)for(f=g;f<b;f++)i[f]=n[f].value.eval(e);g++}return y},d.prototype.makeImportant=function(){var e=this.rules?this.rules.map(function(e){return e.makeImportant?e.makeImportant(!0):e}):this.rules,t=new d(this.name,this.params,e,this.condition,this.variadic,this.frames);return t},d.prototype.eval=function(e){return new d(this.name,this.params,this.rules,this.condition,this.variadic,this.frames||c.copyArray(e.frames))},d.prototype.evalCall=function(e,t,n){var i,r,o=[],d=this.frames?this.frames.concat(e.frames):e.frames,h=this.evalParams(e,new u.Eval(e,d),t,o);return h.prependRule(new s("@arguments",new l(o).eval(e))),i=c.copyArray(this.rules),(r=new a(null,i)).originalRuleset=this,r=r.eval(new u.Eval(e,[this,h].concat(d))),n&&(r=r.makeImportant()),r},d.prototype.matchCondition=function(e,t){return!(this.condition&&!this.condition.eval(new u.Eval(t,[this.evalParams(t,new u.Eval(t,this.frames?this.frames.concat(t.frames):t.frames),e,[])].concat(this.frames||[]).concat(t.frames))))},d.prototype.matchArgs=function(e,t){var n,i=e&&e.length||0,r=this.optionalParameters,a=e?e.reduce(function(e,t){return r.indexOf(t.name)<0?e+1:e},0):0;if(this.variadic){if(a<this.required-1)return!1}else{if(a<this.required)return!1;if(i>this.params.length)return!1}n=Math.min(a,this.arity);for(var s=0;s<n;s++)if(!this.params[s].name&&!this.params[s].variadic&&e[s].value.eval(t).toCSS()!=this.params[s].value.eval(t).toCSS())return!1;return!0},t.exports=d},{"../contexts":13,"../utils":89,"./declaration":60,"./detached-ruleset":61,"./element":63,"./expression":64,"./ruleset":81,"./selector":82}],74:[function(e,t,n){var i=e("./node"),r=e("./variable"),a=e("./ruleset"),s=e("./selector"),o=function(e,t,n,i,r){this.value=e,this.lookups=t,this.important=n,this._index=i,this._fileInfo=r};(o.prototype=new i).type="NamespaceValue",o.prototype.eval=function(e){var t,n,i=this.value.eval(e);for(t=0;t<this.lookups.length;t++){if(n=this.lookups[t],Array.isArray(i)&&(i=new a([new s],i)),""===n)i=i.lastDeclaration();else if("@"===n.charAt(0)){if("@"===n.charAt(1)&&(n="@"+new r(n.substr(1)).eval(e).value),i.variables&&(i=i.variable(n)),!i)throw{type:"Name",message:"variable "+n+" not found",filename:this.fileInfo().filename,index:this.getIndex()}}else{if(n="$@"===n.substring(0,2)?"$"+new r(n.substr(1)).eval(e).value:"$"===n.charAt(0)?n:"$"+n,i.properties&&(i=i.property(n)),!i)throw{type:"Name",message:'property "'+n.substr(1)+'" not found',filename:this.fileInfo().filename,index:this.getIndex()};i=i[i.length-1]}i.value&&(i=i.eval(e).value),i.ruleset&&(i=i.ruleset.eval(e))}return i},t.exports=o},{"./node":76,"./ruleset":81,"./selector":82,"./variable":88}],75:[function(e,t,n){var i=e("./node"),r=e("./operation"),a=e("./dimension"),s=function(e){this.value=e};(s.prototype=new i).type="Negative",s.prototype.genCSS=function(e,t){t.add("-"),this.value.genCSS(e,t)},s.prototype.eval=function(e){return e.isMathOn()?new r("*",[new a(-1),this.value]).eval(e):new s(this.value.eval(e))},t.exports=s},{"./dimension":62,"./node":76,"./operation":77}],76:[function(e,t,n){var i=function(){this.parent=null,this.visibilityBlocks=void 0,this.nodeVisible=void 0,this.rootNode=null,this.parsed=null;var e=this;Object.defineProperty(this,"currentFileInfo",{get:function(){return e.fileInfo()}}),Object.defineProperty(this,"index",{get:function(){return e.getIndex()}})};i.prototype.setParent=function(e,t){function n(e){e&&e instanceof i&&(e.parent=t)}Array.isArray(e)?e.forEach(n):n(e)},i.prototype.getIndex=function(){return this._index||this.parent&&this.parent.getIndex()||0},i.prototype.fileInfo=function(){return this._fileInfo||this.parent&&this.parent.fileInfo()||{}},i.prototype.isRulesetLike=function(){return!1},i.prototype.toCSS=function(e){var t=[];return this.genCSS(e,{add:function(e,n,i){t.push(e)},isEmpty:function(){return 0===t.length}}),t.join("")},i.prototype.genCSS=function(e,t){t.add(this.value)},i.prototype.accept=function(e){this.value=e.visit(this.value)},i.prototype.eval=function(){return this},i.prototype._operate=function(e,t,n,i){switch(t){case"+":return n+i;case"-":return n-i;case"*":return n*i;case"/":return n/i}},i.prototype.fround=function(e,t){var n=e&&e.numPrecision;return n?Number((t+2e-16).toFixed(n)):t},i.compare=function(e,t){if(e.compare&&"Quoted"!==t.type&&"Anonymous"!==t.type)return e.compare(t);if(t.compare)return-t.compare(e);if(e.type===t.type){if(e=e.value,t=t.value,!Array.isArray(e))return e===t?0:void 0;if(e.length===t.length){for(var n=0;n<e.length;n++)if(0!==i.compare(e[n],t[n]))return;return 0}}},i.numericCompare=function(e,t){return e<t?-1:e===t?0:e>t?1:void 0},i.prototype.blocksVisibility=function(){return null==this.visibilityBlocks&&(this.visibilityBlocks=0),0!==this.visibilityBlocks},i.prototype.addVisibilityBlock=function(){null==this.visibilityBlocks&&(this.visibilityBlocks=0),this.visibilityBlocks=this.visibilityBlocks+1},i.prototype.removeVisibilityBlock=function(){null==this.visibilityBlocks&&(this.visibilityBlocks=0),this.visibilityBlocks=this.visibilityBlocks-1},i.prototype.ensureVisibility=function(){this.nodeVisible=!0},i.prototype.ensureInvisibility=function(){this.nodeVisible=!1},i.prototype.isVisible=function(){return this.nodeVisible},i.prototype.visibilityInfo=function(){return{visibilityBlocks:this.visibilityBlocks,nodeVisible:this.nodeVisible}},i.prototype.copyVisibilityInfo=function(e){e&&(this.visibilityBlocks=e.visibilityBlocks,this.nodeVisible=e.nodeVisible)},t.exports=i},{}],77:[function(e,t,n){var i=e("./node"),r=e("./color"),a=e("./dimension"),s=e("../constants").Math,o=function(e,t,n){this.op=e.trim(),this.operands=t,this.isSpaced=n};(o.prototype=new i).type="Operation",o.prototype.accept=function(e){this.operands=e.visit(this.operands)},o.prototype.eval=function(e){var t,n=this.operands[0].eval(e),i=this.operands[1].eval(e);if(e.isMathOn(this.op)){if(t="./"===this.op?"/":this.op,n instanceof a&&i instanceof r&&(n=n.toColor()),i instanceof a&&n instanceof r&&(i=i.toColor()),!n.operate){if(n instanceof o&&"/"===n.op&&e.math===s.PARENS_DIVISION)return new o(this.op,[n,i],this.isSpaced);throw{type:"Operation",message:"Operation on an invalid type"}}return n.operate(e,t,i)}return new o(this.op,[n,i],this.isSpaced)},o.prototype.genCSS=function(e,t){this.operands[0].genCSS(e,t),this.isSpaced&&t.add(" "),t.add(this.op),this.isSpaced&&t.add(" "),this.operands[1].genCSS(e,t)},t.exports=o},{"../constants":12,"./color":55,"./dimension":62,"./node":76}],78:[function(e,t,n){var i=e("./node"),r=function(e){this.value=e};(r.prototype=new i).type="Paren",r.prototype.genCSS=function(e,t){t.add("("),this.value.genCSS(e,t),t.add(")")},r.prototype.eval=function(e){return new r(this.value.eval(e))},t.exports=r},{"./node":76}],79:[function(e,t,n){var i=e("./node"),r=e("./declaration"),a=function(e,t,n){this.name=e,this._index=t,this._fileInfo=n};(a.prototype=new i).type="Property",a.prototype.eval=function(e){var t,n=this.name,i=e.pluginManager.less.visitors.ToCSSVisitor.prototype._mergeRules;if(this.evaluating)throw{type:"Name",message:"Recursive property reference for "+n,filename:this.fileInfo().filename,index:this.getIndex()};if(this.evaluating=!0,t=this.find(e.frames,function(t){var a,s=t.property(n);if(s){for(var o=0;o<s.length;o++)a=s[o],s[o]=new r(a.name,a.value,a.important,a.merge,a.index,a.currentFileInfo,a.inline,a.variable);if(i(s),(a=s[s.length-1]).important){var l=e.importantScope[e.importantScope.length-1];l.important=a.important}return a=a.value.eval(e)}}))return this.evaluating=!1,t;throw{type:"Name",message:"Property '"+n+"' is undefined",filename:this.currentFileInfo.filename,index:this.index}},a.prototype.find=function(e,t){for(var n,i=0;i<e.length;i++)if(n=t.call(e,e[i]))return n;return null},t.exports=a},{"./declaration":60,"./node":76}],80:[function(e,t,n){var i=e("./node"),r=e("./variable"),a=e("./property"),s=function(e,t,n,i,r){this.escaped=null==n||n,this.value=t||"",this.quote=e.charAt(0),this._index=i,this._fileInfo=r,this.variableRegex=/@\{([\w-]+)\}/g,this.propRegex=/\$\{([\w-]+)\}/g};(s.prototype=new i).type="Quoted",s.prototype.genCSS=function(e,t){this.escaped||t.add(this.quote,this.fileInfo(),this.getIndex()),t.add(this.value),this.escaped||t.add(this.quote)},s.prototype.containsVariables=function(){return this.value.match(this.variableRegex)},s.prototype.eval=function(e){var t=this,n=this.value;function i(e,t,n){var i=e;do{i=(e=i).replace(t,n)}while(e!==i);return i}return n=i(n,this.variableRegex,function(n,i){var a=new r("@"+i,t.getIndex(),t.fileInfo()).eval(e,!0);return a instanceof s?a.value:a.toCSS()}),n=i(n,this.propRegex,function(n,i){var r=new a("$"+i,t.getIndex(),t.fileInfo()).eval(e,!0);return r instanceof s?r.value:r.toCSS()}),new s(this.quote+n+this.quote,n,this.escaped,this.getIndex(),this.fileInfo())},s.prototype.compare=function(e){return"Quoted"!==e.type||this.escaped||e.escaped?e.toCSS&&this.toCSS()===e.toCSS()?0:void 0:i.numericCompare(this.value,e.value)},t.exports=s},{"./node":76,"./property":79,"./variable":88}],81:[function(e,t,n){var i=e("./node"),r=e("./declaration"),a=e("./keyword"),s=e("./comment"),o=e("./paren"),l=e("./selector"),u=e("./element"),c=e("./anonymous"),d=e("../contexts"),h=e("../functions/function-registry"),f=e("../functions/default"),p=e("./debug-info"),m=e("../utils"),v=function(e,t,n,i){this.selectors=e,this.rules=t,this._lookups={},this._variables=null,this._properties=null,this.strictImports=n,this.copyVisibilityInfo(i),this.allowRoot=!0,this.setParent(this.selectors,this),this.setParent(this.rules,this)};(v.prototype=new i).type="Ruleset",v.prototype.isRuleset=!0,v.prototype.isRulesetLike=function(){return!0},v.prototype.accept=function(e){this.paths?this.paths=e.visitArray(this.paths,!0):this.selectors&&(this.selectors=e.visitArray(this.selectors)),this.rules&&this.rules.length&&(this.rules=e.visitArray(this.rules))},v.prototype.eval=function(e){var t,n,a,s,o,l=!1;if(this.selectors&&(n=this.selectors.length)){for(t=new Array(n),f.error({type:"Syntax",message:"it is currently only allowed in parametric mixin guards,"}),s=0;s<n;s++){a=this.selectors[s].eval(e);for(var u=0;u<a.elements.length;u++)if(a.elements[u].isVariable){o=!0;break}t[s]=a,a.evaldCondition&&(l=!0)}if(o){var c=new Array(n);for(s=0;s<n;s++)a=t[s],c[s]=a.toCSS(e);this.parse.parseNode(c.join(","),["selectors"],t[0].getIndex(),t[0].fileInfo(),function(e,n){n&&(t=m.flattenArray(n))})}f.reset()}else l=!0;var d,p,g=this.rules?m.copyArray(this.rules):null,y=new v(t,g,this.strictImports,this.visibilityInfo());y.originalRuleset=this,y.root=this.root,y.firstRoot=this.firstRoot,y.allowImports=this.allowImports,this.debugInfo&&(y.debugInfo=this.debugInfo),l||(g.length=0),y.functionRegistry=function(e){for(var t,n=0,i=e.length;n!==i;++n)if(t=e[n].functionRegistry)return t;return h}(e.frames).inherit();var _=e.frames;_.unshift(y);var b=e.selectors;b||(e.selectors=b=[]),b.unshift(this.selectors),(y.root||y.allowImports||!y.strictImports)&&y.evalImports(e);var w=y.rules;for(s=0;d=w[s];s++)d.evalFirst&&(w[s]=d.eval(e));var E=e.mediaBlocks&&e.mediaBlocks.length||0;for(s=0;d=w[s];s++)"MixinCall"===d.type?(g=d.eval(e).filter(function(e){return!(e instanceof r&&e.variable&&y.variable(e.name))}),w.splice.apply(w,[s,1].concat(g)),s+=g.length-1,y.resetCache()):"VariableCall"===d.type&&(g=d.eval(e).rules.filter(function(e){return!(e instanceof r&&e.variable)}),w.splice.apply(w,[s,1].concat(g)),s+=g.length-1,y.resetCache());for(s=0;d=w[s];s++)d.evalFirst||(w[s]=d=d.eval?d.eval(e):d);for(s=0;d=w[s];s++)if(d instanceof v&&d.selectors&&1===d.selectors.length&&d.selectors[0]&&d.selectors[0].isJustParentSelector()){w.splice(s--,1);for(var u=0;p=d.rules[u];u++)p instanceof i&&(p.copyVisibilityInfo(d.visibilityInfo()),p instanceof r&&p.variable||w.splice(++s,0,p))}if(_.shift(),b.shift(),e.mediaBlocks)for(s=E;s<e.mediaBlocks.length;s++)e.mediaBlocks[s].bubbleSelectors(t);return y},v.prototype.evalImports=function(e){var t,n,i=this.rules;if(i)for(t=0;t<i.length;t++)"Import"===i[t].type&&((n=i[t].eval(e))&&(n.length||0===n.length)?(i.splice.apply(i,[t,1].concat(n)),t+=n.length-1):i.splice(t,1,n),this.resetCache())},v.prototype.makeImportant=function(){var e=new v(this.selectors,this.rules.map(function(e){return e.makeImportant?e.makeImportant():e}),this.strictImports,this.visibilityInfo());return e},v.prototype.matchArgs=function(e){return!e||0===e.length},v.prototype.matchCondition=function(e,t){var n=this.selectors[this.selectors.length-1];return!(!n.evaldCondition||n.condition&&!n.condition.eval(new d.Eval(t,t.frames)))},v.prototype.resetCache=function(){this._rulesets=null,this._variables=null,this._properties=null,this._lookups={}},v.prototype.variables=function(){return this._variables||(this._variables=this.rules?this.rules.reduce(function(e,t){if(t instanceof r&&!0===t.variable&&(e[t.name]=t),"Import"===t.type&&t.root&&t.root.variables){var n=t.root.variables();for(var i in n)n.hasOwnProperty(i)&&(e[i]=t.root.variable(i))}return e},{}):{}),this._variables},v.prototype.properties=function(){return this._properties||(this._properties=this.rules?this.rules.reduce(function(e,t){if(t instanceof r&&!0!==t.variable){var n=1===t.name.length&&t.name[0]instanceof a?t.name[0].value:t.name;e["$"+n]?e["$"+n].push(t):e["$"+n]=[t]}return e},{}):{}),this._properties},v.prototype.variable=function(e){var t=this.variables()[e];if(t)return this.parseValue(t)},v.prototype.property=function(e){var t=this.properties()[e];if(t)return this.parseValue(t)},v.prototype.lastDeclaration=function(){for(var e=this.rules.length;e>0;e--){var t=this.rules[e-1];if(t instanceof r)return this.parseValue(t)}},v.prototype.parseValue=function(e){var t=this;function n(e){return e.value instanceof c&&!e.parsed?("string"==typeof e.value.value?this.parse.parseNode(e.value.value,["value","important"],e.value.getIndex(),e.fileInfo(),function(t,n){t&&(e.parsed=!0),n&&(e.value=n[0],e.important=n[1]||"",e.parsed=!0)}):e.parsed=!0,e):e}if(Array.isArray(e)){var i=[];return e.forEach(function(e){i.push(n.call(t,e))}),i}return n.call(t,e)},v.prototype.rulesets=function(){if(!this.rules)return[];var e,t,n=[],i=this.rules;for(e=0;t=i[e];e++)t.isRuleset&&n.push(t);return n},v.prototype.prependRule=function(e){var t=this.rules;t?t.unshift(e):this.rules=[e],this.setParent(e,this)},v.prototype.find=function(e,t,n){t=t||this;var i,r,a=[],s=e.toCSS();return s in this._lookups?this._lookups[s]:(this.rulesets().forEach(function(s){if(s!==t)for(var o=0;o<s.selectors.length;o++)if(i=e.match(s.selectors[o])){if(e.elements.length>i){if(!n||n(s)){r=s.find(new l(e.elements.slice(i)),t,n);for(var u=0;u<r.length;++u)r[u].path.push(s);Array.prototype.push.apply(a,r)}}else a.push({rule:s,path:[]});break}}),this._lookups[s]=a,a)},v.prototype.genCSS=function(e,t){var n,i,r,a,o,l=[];e.tabLevel=e.tabLevel||0,this.root||e.tabLevel++;var u,c=e.compress?"":Array(e.tabLevel+1).join("  "),d=e.compress?"":Array(e.tabLevel).join("  "),h=0,f=0;for(n=0;a=this.rules[n];n++)a instanceof s?(f===n&&f++,l.push(a)):a.isCharset&&a.isCharset()?(l.splice(h,0,a),h++,f++):"Import"===a.type?(l.splice(f,0,a),f++):l.push(a);if(l=[].concat(l),!this.root){(r=p(e,this,d))&&(t.add(r),t.add(d));var m,v=this.paths,g=v.length;for(u=e.compress?",":",\n"+d,n=0;n<g;n++)if(o=v[n],m=o.length)for(n>0&&t.add(u),e.firstSelector=!0,o[0].genCSS(e,t),e.firstSelector=!1,i=1;i<m;i++)o[i].genCSS(e,t);t.add((e.compress?"{":" {\n")+c)}for(n=0;a=l[n];n++){n+1===l.length&&(e.lastRule=!0);var y=e.lastRule;a.isRulesetLike(a)&&(e.lastRule=!1),a.genCSS?a.genCSS(e,t):a.value&&t.add(a.value.toString()),e.lastRule=y,!e.lastRule&&a.isVisible()?t.add(e.compress?"":"\n"+c):e.lastRule=!1}this.root||(t.add(e.compress?"}":"\n"+d+"}"),e.tabLevel--),t.isEmpty()||e.compress||!this.firstRoot||t.add("\n")},v.prototype.joinSelectors=function(e,t,n){for(var i=0;i<n.length;i++)this.joinSelector(e,t,n[i])},v.prototype.joinSelector=function(e,t,n){function i(e,t){var n,i;if(0===e.length)n=new o(e[0]);else{var r=new Array(e.length);for(i=0;i<e.length;i++)r[i]=new u(null,e[i],t.isVariable,t._index,t._fileInfo);n=new o(new l(r))}return n}function r(e,t,n,i){var r,a,s;if(r=[],e.length>0?(r=m.copyArray(e),a=r.pop(),s=i.createDerived(m.copyArray(a.elements))):s=i.createDerived([]),t.length>0){var o=n.combinator,l=t[0].elements[0];o.emptyOrWhitespace&&!l.combinator.emptyOrWhitespace&&(o=l.combinator),s.elements.push(new u(o,l.value,n.isVariable,n._index,n._fileInfo)),s.elements=s.elements.concat(t[0].elements.slice(1))}if(0!==s.elements.length&&r.push(s),t.length>1){var c=t.slice(1);c=c.map(function(e){return e.createDerived(e.elements,[])}),r=r.concat(c)}return r}function a(e,t,n,i,a){var s;for(s=0;s<e.length;s++){var o=r(e[s],t,n,i);a.push(o)}return a}function s(e,t){var n,i;if(0!==e.length)if(0!==t.length)for(n=0;i=t[n];n++)i.length>0?i[i.length-1]=i[i.length-1].createDerived(i[i.length-1].elements.concat(e)):i.push(new l(e));else t.push([new l(e)])}function c(e,t){var n=t.createDerived(t.elements,t.extendList,t.evaldCondition);return n.copyVisibilityInfo(e),n}var d,h;if(!function e(t,n,c){var d,h,f,p,m,v,g,y,_,b,w,E,S,T=!1;function k(e){var t;return e.value instanceof o&&(t=e.value.value)instanceof l?t:null}for(p=[],m=[[]],d=0;y=c.elements[d];d++)if("&"!==y.value){var C=k(y);if(null!=C){s(p,m);var I,A=[],x=[];for(I=e(A,n,C),T=T||I,f=0;f<A.length;f++){var L=(w=i(A[f],y),S=void 0,S=new u(null,w,(E=y).isVariable,E._index,E._fileInfo),new l([S]));a(m,[L],y,c,x)}m=x,p=[]}else p.push(y)}else{for(T=!0,v=[],s(p,m),h=0;h<m.length;h++)if(g=m[h],0===n.length)g.length>0&&g[0].elements.push(new u(y.combinator,"",y.isVariable,y._index,y._fileInfo)),v.push(g);else for(f=0;f<n.length;f++){var R=r(g,n[f],y,c);v.push(R)}m=v,p=[]}for(s(p,m),d=0;d<m.length;d++)(_=m[d].length)>0&&(t.push(m[d]),b=m[d][_-1],m[d][_-1]=b.createDerived(b.elements,c.extendList));return T}(h=[],t,n))if(t.length>0)for(h=[],d=0;d<t.length;d++){var f=t[d].map(c.bind(this,n.visibilityInfo()));f.push(n),h.push(f)}else h=[[n]];for(d=0;d<h.length;d++)e.push(h[d])},t.exports=v},{"../contexts":13,"../functions/default":25,"../functions/function-registry":27,"../utils":89,"./anonymous":50,"./comment":57,"./debug-info":59,"./declaration":60,"./element":63,"./keyword":70,"./node":76,"./paren":78,"./selector":82}],82:[function(e,t,n){var i=e("./node"),r=e("./element"),a=e("../less-error"),s=function(e,t,n,i,r,a){this.extendList=t,this.condition=n,this.evaldCondition=!n,this._index=i,this._fileInfo=r,this.elements=this.getElements(e),this.mixinElements_=void 0,this.copyVisibilityInfo(a),this.setParent(this.elements,this)};(s.prototype=new i).type="Selector",s.prototype.accept=function(e){this.elements&&(this.elements=e.visitArray(this.elements)),this.extendList&&(this.extendList=e.visitArray(this.extendList)),this.condition&&(this.condition=e.visit(this.condition))},s.prototype.createDerived=function(e,t,n){e=this.getElements(e);var i=new s(e,t||this.extendList,null,this.getIndex(),this.fileInfo(),this.visibilityInfo());return i.evaldCondition=null!=n?n:this.evaldCondition,i.mediaEmpty=this.mediaEmpty,i},s.prototype.getElements=function(e){return e?("string"==typeof e&&this.parse.parseNode(e,["selector"],this._index,this._fileInfo,function(t,n){if(t)throw new a({index:t.index,message:t.message},this.parse.imports,this._fileInfo.filename);e=n[0].elements}),e):[new r("","&",!1,this._index,this._fileInfo)]},s.prototype.createEmptySelectors=function(){var e=new r("","&",!1,this._index,this._fileInfo),t=[new s([e],null,null,this._index,this._fileInfo)];return t[0].mediaEmpty=!0,t},s.prototype.match=function(e){var t,n,i=this.elements,r=i.length;if(e=e.mixinElements(),0===(t=e.length)||r<t)return 0;for(n=0;n<t;n++)if(i[n].value!==e[n])return 0;return t},s.prototype.mixinElements=function(){if(this.mixinElements_)return this.mixinElements_;var e=this.elements.map(function(e){return e.combinator.value+(e.value.value||e.value)}).join("").match(/[,&#\*\.\w-]([\w-]|(\\.))*/g);return e?"&"===e[0]&&e.shift():e=[],this.mixinElements_=e},s.prototype.isJustParentSelector=function(){return!this.mediaEmpty&&1===this.elements.length&&"&"===this.elements[0].value&&(" "===this.elements[0].combinator.value||""===this.elements[0].combinator.value)},s.prototype.eval=function(e){var t=this.condition&&this.condition.eval(e),n=this.elements,i=this.extendList;return n=n&&n.map(function(t){return t.eval(e)}),i=i&&i.map(function(t){return t.eval(e)}),this.createDerived(n,i,t)},s.prototype.genCSS=function(e,t){var n;for(e&&e.firstSelector||""!==this.elements[0].combinator.value||t.add(" ",this.fileInfo(),this.getIndex()),n=0;n<this.elements.length;n++)this.elements[n].genCSS(e,t)},s.prototype.getIsOutput=function(){return this.evaldCondition},t.exports=s},{"../less-error":38,"./element":63,"./node":76}],83:[function(e,t,n){var i=e("./node"),r=function(e){this.value=e};(r.prototype=new i).type="UnicodeDescriptor",t.exports=r},{"./node":76}],84:[function(e,t,n){var i=e("./node"),r=e("../data/unit-conversions"),a=e("../utils"),s=function(e,t,n){this.numerator=e?a.copyArray(e).sort():[],this.denominator=t?a.copyArray(t).sort():[],n?this.backupUnit=n:e&&e.length&&(this.backupUnit=e[0])};(s.prototype=new i).type="Unit",s.prototype.clone=function(){return new s(a.copyArray(this.numerator),a.copyArray(this.denominator),this.backupUnit)},s.prototype.genCSS=function(e,t){var n=e&&e.strictUnits;1===this.numerator.length?t.add(this.numerator[0]):!n&&this.backupUnit?t.add(this.backupUnit):!n&&this.denominator.length&&t.add(this.denominator[0])},s.prototype.toString=function(){var e,t=this.numerator.join("*");for(e=0;e<this.denominator.length;e++)t+="/"+this.denominator[e];return t},s.prototype.compare=function(e){return this.is(e.toString())?0:void 0},s.prototype.is=function(e){return this.toString().toUpperCase()===e.toUpperCase()},s.prototype.isLength=function(){return RegExp("^(px|em|ex|ch|rem|in|cm|mm|pc|pt|ex|vw|vh|vmin|vmax)$","gi").test(this.toCSS())},s.prototype.isEmpty=function(){return 0===this.numerator.length&&0===this.denominator.length},s.prototype.isSingular=function(){return this.numerator.length<=1&&0===this.denominator.length},s.prototype.map=function(e){var t;for(t=0;t<this.numerator.length;t++)this.numerator[t]=e(this.numerator[t],!1);for(t=0;t<this.denominator.length;t++)this.denominator[t]=e(this.denominator[t],!0)},s.prototype.usedUnits=function(){var e,t,n,i={};for(n in t=function(t){return e.hasOwnProperty(t)&&!i[n]&&(i[n]=t),t},r)r.hasOwnProperty(n)&&(e=r[n],this.map(t));return i},s.prototype.cancel=function(){var e,t,n={};for(t=0;t<this.numerator.length;t++)e=this.numerator[t],n[e]=(n[e]||0)+1;for(t=0;t<this.denominator.length;t++)e=this.denominator[t],n[e]=(n[e]||0)-1;for(e in this.numerator=[],this.denominator=[],n)if(n.hasOwnProperty(e)){var i=n[e];if(i>0)for(t=0;t<i;t++)this.numerator.push(e);else if(i<0)for(t=0;t<-i;t++)this.denominator.push(e)}this.numerator.sort(),this.denominator.sort()},t.exports=s},{"../data/unit-conversions":16,"../utils":89,"./node":76}],85:[function(e,t,n){var i=e("./node"),r=function(e,t,n,i){this.value=e,this._index=t,this._fileInfo=n,this.isEvald=i};(r.prototype=new i).type="Url",r.prototype.accept=function(e){this.value=e.visit(this.value)},r.prototype.genCSS=function(e,t){t.add("url("),this.value.genCSS(e,t),t.add(")")},r.prototype.eval=function(e){var t,n=this.value.eval(e);if(!this.isEvald&&("string"==typeof(t=this.fileInfo()&&this.fileInfo().rootpath)&&"string"==typeof n.value&&e.pathRequiresRewrite(n.value)?(n.quote||(t=t.replace(/[\(\)'"\s]/g,function(e){return"\\"+e})),n.value=e.rewritePath(n.value,t)):n.value=e.normalizePath(n.value),e.urlArgs&&!n.value.match(/^\s*data:/))){var i=-1===n.value.indexOf("?")?"?":"&",a=i+e.urlArgs;-1!==n.value.indexOf("#")?n.value=n.value.replace("#",a+"#"):n.value+=a}return new r(n,this.getIndex(),this.fileInfo(),!0)},t.exports=r},{"./node":76}],86:[function(e,t,n){var i=e("./node"),r=function(e){if(!e)throw new Error("Value requires an array argument");Array.isArray(e)?this.value=e:this.value=[e]};(r.prototype=new i).type="Value",r.prototype.accept=function(e){this.value&&(this.value=e.visitArray(this.value))},r.prototype.eval=function(e){return 1===this.value.length?this.value[0].eval(e):new r(this.value.map(function(t){return t.eval(e)}))},r.prototype.genCSS=function(e,t){var n;for(n=0;n<this.value.length;n++)this.value[n].genCSS(e,t),n+1<this.value.length&&t.add(e&&e.compress?",":", ")},t.exports=r},{"./node":76}],87:[function(e,t,n){var i=e("./node"),r=e("./variable"),a=e("./ruleset"),s=e("./detached-ruleset"),o=e("../less-error"),l=function(e,t,n){this.variable=e,this._index=t,this._fileInfo=n,this.allowRoot=!0};(l.prototype=new i).type="VariableCall",l.prototype.eval=function(e){var t,n=new r(this.variable,this.getIndex(),this.fileInfo()).eval(e),i=new o({message:"Could not evaluate variable call "+this.variable});if(!n.ruleset){if(n.rules)t=n;else if(Array.isArray(n))t=new a("",n);else{if(!Array.isArray(n.value))throw i;t=new a("",n.value)}n=new s(t)}if(n.ruleset)return n.callEval(e);throw i},t.exports=l},{"../less-error":38,"./detached-ruleset":61,"./node":76,"./ruleset":81,"./variable":88}],88:[function(e,t,n){var i=e("./node"),r=e("./call"),a=function(e,t,n){this.name=e,this._index=t,this._fileInfo=n};(a.prototype=new i).type="Variable",a.prototype.eval=function(e){var t,n=this.name;if(0===n.indexOf("@@")&&(n="@"+new a(n.slice(1),this.getIndex(),this.fileInfo()).eval(e).value),this.evaluating)throw{type:"Name",message:"Recursive variable definition for "+n,filename:this.fileInfo().filename,index:this.getIndex()};if(this.evaluating=!0,t=this.find(e.frames,function(t){var i=t.variable(n);if(i){if(i.important){var a=e.importantScope[e.importantScope.length-1];a.important=i.important}return e.inCalc?new r("_SELF",[i.value]).eval(e):i.value.eval(e)}}))return this.evaluating=!1,t;throw{type:"Name",message:"variable "+n+" is undefined",filename:this.fileInfo().filename,index:this.getIndex()}},a.prototype.find=function(e,t){for(var n,i=0;i<e.length;i++)if(n=t.call(e,e[i]))return n;return null},t.exports=a},{"./call":54,"./node":76}],89:[function(e,t,n){var i=e("./constants"),r=e("clone"),a={getLocation:function(e,t){for(var n=e+1,i=null,r=-1;--n>=0&&"\n"!==t.charAt(n);)r++;return"number"==typeof e&&(i=(t.slice(0,e).match(/\n/g)||"").length),{line:i,column:r}},copyArray:function(e){var t,n=e.length,i=new Array(n);for(t=0;t<n;t++)i[t]=e[t];return i},clone:function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},copyOptions:function(e,t){if(t&&t._defaults)return t;var n=a.defaults(e,t);if(n.strictMath&&(n.math=i.Math.STRICT_LEGACY),n.relativeUrls&&(n.rewriteUrls=i.RewriteUrls.ALL),"string"==typeof n.math)switch(n.math.toLowerCase()){case"always":n.math=i.Math.ALWAYS;break;case"parens-division":n.math=i.Math.PARENS_DIVISION;break;case"strict":case"parens":n.math=i.Math.PARENS;break;case"strict-legacy":n.math=i.Math.STRICT_LEGACY}if("string"==typeof n.rewriteUrls)switch(n.rewriteUrls.toLowerCase()){case"off":n.rewriteUrls=i.RewriteUrls.OFF;break;case"local":n.rewriteUrls=i.RewriteUrls.LOCAL;break;case"all":n.rewriteUrls=i.RewriteUrls.ALL}return n},defaults:function(e,t){var n=t||{};if(!t._defaults){n={};var i=r(e);n._defaults=i;var a=t?r(t):{};Object.assign(n,i,a)}return n},merge:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},flattenArray:function(e,t){t=t||[];for(var n=0,i=e.length;n<i;n++){var r=e[n];Array.isArray(r)?a.flattenArray(r,t):void 0!==r&&t.push(r)}return t}};t.exports=a},{"./constants":12,clone:100}],90:[function(e,t,n){var i=e("../tree"),r=e("./visitor"),a=e("../logger"),s=e("../utils"),o=function(){this._visitor=new r(this),this.contexts=[],this.allExtendsStack=[[]]};o.prototype={run:function(e){return(e=this._visitor.visit(e)).allExtends=this.allExtendsStack[0],e},visitDeclaration:function(e,t){t.visitDeeper=!1},visitMixinDefinition:function(e,t){t.visitDeeper=!1},visitRuleset:function(e,t){if(!e.root){var n,r,a,o,l=[],u=e.rules,c=u?u.length:0;for(n=0;n<c;n++)e.rules[n]instanceof i.Extend&&(l.push(u[n]),e.extendOnEveryPath=!0);var d=e.paths;for(n=0;n<d.length;n++){var h=d[n],f=h[h.length-1],p=f.extendList;for((o=p?s.copyArray(p).concat(l):l)&&(o=o.map(function(e){return e.clone()})),r=0;r<o.length;r++)this.foundExtends=!0,(a=o[r]).findSelfSelectors(h),a.ruleset=e,0===r&&(a.firstExtendOnThisSelectorPath=!0),this.allExtendsStack[this.allExtendsStack.length-1].push(a)}this.contexts.push(e.selectors)}},visitRulesetOut:function(e){e.root||(this.contexts.length=this.contexts.length-1)},visitMedia:function(e,t){e.allExtends=[],this.allExtendsStack.push(e.allExtends)},visitMediaOut:function(e){this.allExtendsStack.length=this.allExtendsStack.length-1},visitAtRule:function(e,t){e.allExtends=[],this.allExtendsStack.push(e.allExtends)},visitAtRuleOut:function(e){this.allExtendsStack.length=this.allExtendsStack.length-1}};var l=function(){this._visitor=new r(this)};l.prototype={run:function(e){var t=new o;if(this.extendIndices={},t.run(e),!t.foundExtends)return e;e.allExtends=e.allExtends.concat(this.doExtendChaining(e.allExtends,e.allExtends)),this.allExtendsStack=[e.allExtends];var n=this._visitor.visit(e);return this.checkExtendsForNonMatched(e.allExtends),n},checkExtendsForNonMatched:function(e){var t=this.extendIndices;e.filter(function(e){return!e.hasFoundMatches&&1==e.parent_ids.length}).forEach(function(e){var n="_unknown_";try{n=e.selector.toCSS({})}catch(e){}t[e.index+" "+n]||(t[e.index+" "+n]=!0,a.warn("extend '"+n+"' has no matches"))})},doExtendChaining:function(e,t,n){var r,a,s,o,l,u,c,d,h=[],f=this;for(n=n||0,r=0;r<e.length;r++)for(a=0;a<t.length;a++)u=e[r],c=t[a],u.parent_ids.indexOf(c.object_id)>=0||(l=[c.selfSelectors[0]],(s=f.findMatch(u,l)).length&&(u.hasFoundMatches=!0,u.selfSelectors.forEach(function(e){var t=c.visibilityInfo();o=f.extendSelector(s,l,e,u.isVisible()),(d=new i.Extend(c.selector,c.option,0,c.fileInfo(),t)).selfSelectors=o,o[o.length-1].extendList=[d],h.push(d),d.ruleset=c.ruleset,d.parent_ids=d.parent_ids.concat(c.parent_ids,u.parent_ids),c.firstExtendOnThisSelectorPath&&(d.firstExtendOnThisSelectorPath=!0,c.ruleset.paths.push(o))})));if(h.length){if(this.extendChainCount++,n>100){var p="{unable to calculate}",m="{unable to calculate}";try{p=h[0].selfSelectors[0].toCSS(),m=h[0].selector.toCSS()}catch(e){}throw{message:"extend circular reference detected. One of the circular extends is currently:"+p+":extend("+m+")"}}return h.concat(f.doExtendChaining(h,t,n+1))}return h},visitDeclaration:function(e,t){t.visitDeeper=!1},visitMixinDefinition:function(e,t){t.visitDeeper=!1},visitSelector:function(e,t){t.visitDeeper=!1},visitRuleset:function(e,t){if(!e.root){var n,i,r,a,s=this.allExtendsStack[this.allExtendsStack.length-1],o=[],l=this;for(r=0;r<s.length;r++)for(i=0;i<e.paths.length;i++)if(a=e.paths[i],!e.extendOnEveryPath){var u=a[a.length-1].extendList;u&&u.length||(n=this.findMatch(s[r],a)).length&&(s[r].hasFoundMatches=!0,s[r].selfSelectors.forEach(function(e){var t;t=l.extendSelector(n,a,e,s[r].isVisible()),o.push(t)}))}e.paths=e.paths.concat(o)}},findMatch:function(e,t){var n,i,r,a,s,o,l,u=e.selector.elements,c=[],d=[];for(n=0;n<t.length;n++)for(i=t[n],r=0;r<i.elements.length;r++)for(a=i.elements[r],(e.allowBefore||0===n&&0===r)&&c.push({pathIndex:n,index:r,matched:0,initialCombinator:a.combinator}),o=0;o<c.length;o++)l=c[o],""===(s=a.combinator.value)&&0===r&&(s=" "),!this.isElementValuesEqual(u[l.matched].value,a.value)||l.matched>0&&u[l.matched].combinator.value!==s?l=null:l.matched++,l&&(l.finished=l.matched===u.length,l.finished&&!e.allowAfter&&(r+1<i.elements.length||n+1<t.length)&&(l=null)),l?l.finished&&(l.length=u.length,l.endPathIndex=n,l.endPathElementIndex=r+1,c.length=0,d.push(l)):(c.splice(o,1),o--);return d},isElementValuesEqual:function(e,t){if("string"==typeof e||"string"==typeof t)return e===t;if(e instanceof i.Attribute)return e.op===t.op&&e.key===t.key&&(e.value&&t.value?(e=e.value.value||e.value,t=t.value.value||t.value,e===t):!e.value&&!t.value);if(e=e.value,t=t.value,e instanceof i.Selector){if(!(t instanceof i.Selector)||e.elements.length!==t.elements.length)return!1;for(var n=0;n<e.elements.length;n++){if(e.elements[n].combinator.value!==t.elements[n].combinator.value&&(0!==n||(e.elements[n].combinator.value||" ")!==(t.elements[n].combinator.value||" ")))return!1;if(!this.isElementValuesEqual(e.elements[n].value,t.elements[n].value))return!1}return!0}return!1},extendSelector:function(e,t,n,r){var a,s,o,l,u,c=0,d=0,h=[];for(a=0;a<e.length;a++)l=e[a],s=t[l.pathIndex],o=new i.Element(l.initialCombinator,n.elements[0].value,n.elements[0].isVariable,n.elements[0].getIndex(),n.elements[0].fileInfo()),l.pathIndex>c&&d>0&&(h[h.length-1].elements=h[h.length-1].elements.concat(t[c].elements.slice(d)),d=0,c++),u=s.elements.slice(d,l.index).concat([o]).concat(n.elements.slice(1)),c===l.pathIndex&&a>0?h[h.length-1].elements=h[h.length-1].elements.concat(u):(h=h.concat(t.slice(c,l.pathIndex))).push(new i.Selector(u)),c=l.endPathIndex,(d=l.endPathElementIndex)>=t[c].elements.length&&(d=0,c++);return c<t.length&&d>0&&(h[h.length-1].elements=h[h.length-1].elements.concat(t[c].elements.slice(d)),c++),h=(h=h.concat(t.slice(c,t.length))).map(function(e){var t=e.createDerived(e.elements);return r?t.ensureVisibility():t.ensureInvisibility(),t})},visitMedia:function(e,t){var n=e.allExtends.concat(this.allExtendsStack[this.allExtendsStack.length-1]);n=n.concat(this.doExtendChaining(n,e.allExtends)),this.allExtendsStack.push(n)},visitMediaOut:function(e){var t=this.allExtendsStack.length-1;this.allExtendsStack.length=t},visitAtRule:function(e,t){var n=e.allExtends.concat(this.allExtendsStack[this.allExtendsStack.length-1]);n=n.concat(this.doExtendChaining(n,e.allExtends)),this.allExtendsStack.push(n)},visitAtRuleOut:function(e){var t=this.allExtendsStack.length-1;this.allExtendsStack.length=t}},t.exports=l},{"../logger":39,"../tree":67,"../utils":89,"./visitor":97}],91:[function(e,t,n){function i(e){this.imports=[],this.variableImports=[],this._onSequencerEmpty=e,this._currentDepth=0}i.prototype.addImport=function(e){var t=this,n={callback:e,args:null,isReady:!1};return this.imports.push(n),function(){n.args=Array.prototype.slice.call(arguments,0),n.isReady=!0,t.tryRun()}},i.prototype.addVariableImport=function(e){this.variableImports.push(e)},i.prototype.tryRun=function(){this._currentDepth++;try{for(;;){for(;this.imports.length>0;){var e=this.imports[0];if(!e.isReady)return;this.imports=this.imports.slice(1),e.callback.apply(null,e.args)}if(0===this.variableImports.length)break;var t=this.variableImports[0];this.variableImports=this.variableImports.slice(1),t()}}finally{this._currentDepth--}0===this._currentDepth&&this._onSequencerEmpty&&this._onSequencerEmpty()},t.exports=i},{}],92:[function(e,t,n){var i=e("../contexts"),r=e("./visitor"),a=e("./import-sequencer"),s=e("../utils"),o=function(e,t){this._visitor=new r(this),this._importer=e,this._finish=t,this.context=new i.Eval,this.importCount=0,this.onceFileDetectionMap={},this.recursionDetector={},this._sequencer=new a(this._onSequencerEmpty.bind(this))};o.prototype={isReplacing:!1,run:function(e){try{this._visitor.visit(e)}catch(e){this.error=e}this.isFinished=!0,this._sequencer.tryRun()},_onSequencerEmpty:function(){this.isFinished&&this._finish(this.error)},visitImport:function(e,t){var n=e.options.inline;if(!e.css||n){var r=new i.Eval(this.context,s.copyArray(this.context.frames)),a=r.frames[0];this.importCount++,e.isVariableImport()?this._sequencer.addVariableImport(this.processImportNode.bind(this,e,r,a)):this.processImportNode(e,r,a)}t.visitDeeper=!1},processImportNode:function(e,t,n){var i,r=e.options.inline;try{i=e.evalForImport(t)}catch(t){t.filename||(t.index=e.getIndex(),t.filename=e.fileInfo().filename),e.css=!0,e.error=t}if(!i||i.css&&!r)this.importCount--,this.isFinished&&this._sequencer.tryRun();else{i.options.multiple&&(t.importMultiple=!0);for(var a=void 0===i.css,s=0;s<n.rules.length;s++)if(n.rules[s]===e){n.rules[s]=i;break}var o=this.onImported.bind(this,i,t),l=this._sequencer.addImport(o);this._importer.push(i.getPath(),a,i.fileInfo(),i.options,l)}},onImported:function(e,t,n,i,r,a){n&&(n.filename||(n.index=e.getIndex(),n.filename=e.fileInfo().filename),this.error=n);var s=this,o=e.options.inline,l=e.options.isPlugin,u=e.options.optional,c=r||a in s.recursionDetector;if(t.importMultiple||(e.skip=!!c||function(){return a in s.onceFileDetectionMap||(s.onceFileDetectionMap[a]=!0,!1)}),!a&&u&&(e.skip=!0),i&&(e.root=i,e.importedFilename=a,!o&&!l&&(t.importMultiple||!c))){s.recursionDetector[a]=!0;var d=this.context;this.context=t;try{this._visitor.visit(i)}catch(n){this.error=n}this.context=d}s.importCount--,s.isFinished&&s._sequencer.tryRun()},visitDeclaration:function(e,t){"DetachedRuleset"===e.value.type?this.context.frames.unshift(e):t.visitDeeper=!1},visitDeclarationOut:function(e){"DetachedRuleset"===e.value.type&&this.context.frames.shift()},visitAtRule:function(e,t){this.context.frames.unshift(e)},visitAtRuleOut:function(e){this.context.frames.shift()},visitMixinDefinition:function(e,t){this.context.frames.unshift(e)},visitMixinDefinitionOut:function(e){this.context.frames.shift()},visitRuleset:function(e,t){this.context.frames.unshift(e)},visitRulesetOut:function(e){this.context.frames.shift()},visitMedia:function(e,t){this.context.frames.unshift(e.rules[0])},visitMediaOut:function(e){this.context.frames.shift()}},t.exports=o},{"../contexts":13,"../utils":89,"./import-sequencer":91,"./visitor":97}],93:[function(e,t,n){var i={Visitor:e("./visitor"),ImportVisitor:e("./import-visitor"),MarkVisibleSelectorsVisitor:e("./set-tree-visibility-visitor"),ExtendVisitor:e("./extend-visitor"),JoinSelectorVisitor:e("./join-selector-visitor"),ToCSSVisitor:e("./to-css-visitor")};t.exports=i},{"./extend-visitor":90,"./import-visitor":92,"./join-selector-visitor":94,"./set-tree-visibility-visitor":95,"./to-css-visitor":96,"./visitor":97}],94:[function(e,t,n){var i=e("./visitor"),r=function(){this.contexts=[[]],this._visitor=new i(this)};r.prototype={run:function(e){return this._visitor.visit(e)},visitDeclaration:function(e,t){t.visitDeeper=!1},visitMixinDefinition:function(e,t){t.visitDeeper=!1},visitRuleset:function(e,t){var n,i=this.contexts[this.contexts.length-1],r=[];this.contexts.push(r),e.root||((n=e.selectors)&&(n=n.filter(function(e){return e.getIsOutput()}),e.selectors=n.length?n:n=null,n&&e.joinSelectors(r,i,n)),n||(e.rules=null),e.paths=r)},visitRulesetOut:function(e){this.contexts.length=this.contexts.length-1},visitMedia:function(e,t){var n=this.contexts[this.contexts.length-1];e.rules[0].root=0===n.length||n[0].multiMedia},visitAtRule:function(e,t){var n=this.contexts[this.contexts.length-1];e.rules&&e.rules.length&&(e.rules[0].root=e.isRooted||0===n.length||null)}},t.exports=r},{"./visitor":97}],95:[function(e,t,n){var i=function(e){this.visible=e};i.prototype.run=function(e){this.visit(e)},i.prototype.visitArray=function(e){if(!e)return e;var t,n=e.length;for(t=0;t<n;t++)this.visit(e[t]);return e},i.prototype.visit=function(e){return e?e.constructor===Array?this.visitArray(e):!e.blocksVisibility||e.blocksVisibility()?e:(this.visible?e.ensureVisibility():e.ensureInvisibility(),e.accept(this),e):e},t.exports=i},{}],96:[function(e,t,n){var i=e("../tree"),r=e("./visitor"),a=function(e){this._visitor=new r(this),this._context=e};a.prototype={containsSilentNonBlockedChild:function(e){var t;if(!e)return!1;for(var n=0;n<e.length;n++)if((t=e[n]).isSilent&&t.isSilent(this._context)&&!t.blocksVisibility())return!0;return!1},keepOnlyVisibleChilds:function(e){e&&e.rules&&(e.rules=e.rules.filter(function(e){return e.isVisible()}))},isEmpty:function(e){return!e||!e.rules||0===e.rules.length},hasVisibleSelector:function(e){return!(!e||!e.paths)&&e.paths.length>0},resolveVisibility:function(e,t){if(!e.blocksVisibility()){if(this.isEmpty(e)&&!this.containsSilentNonBlockedChild(t))return;return e}var n=e.rules[0];if(this.keepOnlyVisibleChilds(n),!this.isEmpty(n))return e.ensureVisibility(),e.removeVisibilityBlock(),e},isVisibleRuleset:function(e){return!!e.firstRoot||!this.isEmpty(e)&&!(!e.root&&!this.hasVisibleSelector(e))}};var s=function(e){this._visitor=new r(this),this._context=e,this.utils=new a(e)};s.prototype={isReplacing:!0,run:function(e){return this._visitor.visit(e)},visitDeclaration:function(e,t){if(!e.blocksVisibility()&&!e.variable)return e},visitMixinDefinition:function(e,t){e.frames=[]},visitExtend:function(e,t){},visitComment:function(e,t){if(!e.blocksVisibility()&&!e.isSilent(this._context))return e},visitMedia:function(e,t){var n=e.rules[0].rules;return e.accept(this._visitor),t.visitDeeper=!1,this.utils.resolveVisibility(e,n)},visitImport:function(e,t){if(!e.blocksVisibility())return e},visitAtRule:function(e,t){return e.rules&&e.rules.length?this.visitAtRuleWithBody(e,t):this.visitAtRuleWithoutBody(e,t)},visitAnonymous:function(e,t){if(!e.blocksVisibility())return e.accept(this._visitor),e},visitAtRuleWithBody:function(e,t){var n=function(e){var t=e.rules;return function(e){var t=e.rules;return 1===t.length&&(!t[0].paths||0===t[0].paths.length)}(e)?t[0].rules:t}(e);return e.accept(this._visitor),t.visitDeeper=!1,this.utils.isEmpty(e)||this._mergeRules(e.rules[0].rules),this.utils.resolveVisibility(e,n)},visitAtRuleWithoutBody:function(e,t){if(!e.blocksVisibility()){if("@charset"===e.name){if(this.charset){if(e.debugInfo){var n=new i.Comment("/* "+e.toCSS(this._context).replace(/\n/g,"")+" */\n");return n.debugInfo=e.debugInfo,this._visitor.visit(n)}return}this.charset=!0}return e}},checkValidNodes:function(e,t){if(e)for(var n=0;n<e.length;n++){var r=e[n];if(t&&r instanceof i.Declaration&&!r.variable)throw{message:"Properties must be inside selector blocks. They cannot be in the root",index:r.getIndex(),filename:r.fileInfo()&&r.fileInfo().filename};if(r instanceof i.Call)throw{message:"Function '"+r.name+"' is undefined",index:r.getIndex(),filename:r.fileInfo()&&r.fileInfo().filename};if(r.type&&!r.allowRoot)throw{message:r.type+" node returned by a function is not valid here",index:r.getIndex(),filename:r.fileInfo()&&r.fileInfo().filename}}},visitRuleset:function(e,t){var n,i=[];if(this.checkValidNodes(e.rules,e.firstRoot),e.root)e.accept(this._visitor),t.visitDeeper=!1;else{this._compileRulesetPaths(e);for(var r=e.rules,a=r?r.length:0,s=0;s<a;)(n=r[s])&&n.rules?(i.push(this._visitor.visit(n)),r.splice(s,1),a--):s++;a>0?e.accept(this._visitor):e.rules=null,t.visitDeeper=!1}return e.rules&&(this._mergeRules(e.rules),this._removeDuplicateRules(e.rules)),this.utils.isVisibleRuleset(e)&&(e.ensureVisibility(),i.splice(0,0,e)),1===i.length?i[0]:i},_compileRulesetPaths:function(e){e.paths&&(e.paths=e.paths.filter(function(e){var t;for(" "===e[0].elements[0].combinator.value&&(e[0].elements[0].combinator=new i.Combinator("")),t=0;t<e.length;t++)if(e[t].isVisible()&&e[t].getIsOutput())return!0;return!1}))},_removeDuplicateRules:function(e){if(e){var t,n,r,a={};for(r=e.length-1;r>=0;r--)if((n=e[r])instanceof i.Declaration)if(a[n.name]){(t=a[n.name])instanceof i.Declaration&&(t=a[n.name]=[a[n.name].toCSS(this._context)]);var s=n.toCSS(this._context);-1!==t.indexOf(s)?e.splice(r,1):t.push(s)}else a[n.name]=n}},_mergeRules:function(e){if(e){for(var t={},n=[],r=0;r<e.length;r++){var a=e[r];if(a.merge){var s=a.name;t[s]?e.splice(r--,1):n.push(t[s]=[]),t[s].push(a)}}n.forEach(function(e){if(e.length>0){var t=e[0],n=[],r=[new i.Expression(n)];e.forEach(function(e){"+"===e.merge&&n.length>0&&r.push(new i.Expression(n=[])),n.push(e.value),t.important=t.important||e.important}),t.value=new i.Value(r)}})}}},t.exports=s},{"../tree":67,"./visitor":97}],97:[function(e,t,n){var i=e("../tree"),r={visitDeeper:!0},a=!1;function s(e){return e}var o=function(e){this._implementation=e,this._visitInCache={},this._visitOutCache={},a||(function e(t,n){var i,r;for(i in t)switch(typeof(r=t[i])){case"function":r.prototype&&r.prototype.type&&(r.prototype.typeIndex=n++);break;case"object":n=e(r,n)}return n}(i,1),a=!0)};o.prototype={visit:function(e){if(!e)return e;var t=e.typeIndex;if(!t)return e.value&&e.value.typeIndex&&this.visit(e.value),e;var n,i=this._implementation,a=this._visitInCache[t],o=this._visitOutCache[t],l=r;if(l.visitDeeper=!0,a||(n="visit"+e.type,a=i[n]||s,o=i[n+"Out"]||s,this._visitInCache[t]=a,this._visitOutCache[t]=o),a!==s){var u=a.call(i,e,l);e&&i.isReplacing&&(e=u)}return l.visitDeeper&&e&&e.accept&&e.accept(this),o!=s&&o.call(i,e),e},visitArray:function(e,t){if(!e)return e;var n,i=e.length;if(t||!this._implementation.isReplacing){for(n=0;n<i;n++)this.visit(e[n]);return e}var r=[];for(n=0;n<i;n++){var a=this.visit(e[n]);void 0!==a&&(a.splice?a.length&&this.flatten(a,r):r.push(a))}return r},flatten:function(e,t){var n,i,r,a,s,o;for(t||(t=[]),i=0,n=e.length;i<n;i++)if(void 0!==(r=e[i]))if(r.splice)for(s=0,a=r.length;s<a;s++)void 0!==(o=r[s])&&(o.splice?o.length&&this.flatten(o,t):t.push(o));else t.push(r);return t}},t.exports=o},{"../tree":67}],98:[function(e,t,n){"use strict";var i=e("./raw"),r=[],a=[],s=i.makeRequestCallFromTimer(function(){if(a.length)throw a.shift()});function o(e){var t;(t=r.length?r.pop():new l).task=e,i(t)}function l(){this.task=null}t.exports=o,l.prototype.call=function(){try{this.task.call()}catch(e){o.onerror?o.onerror(e):(a.push(e),s())}finally{this.task=null,r[r.length]=this}}},{"./raw":99}],99:[function(e,n,i){(function(e){"use strict";function t(e){r.length||i(),r[r.length]=e}n.exports=t;var i,r=[],a=0,s=1024;function o(){for(;a<r.length;){var e=a;if(a+=1,r[e].call(),a>s){for(var t=0,n=r.length-a;t<n;t++)r[t]=r[t+a];r.length-=a,a=0}}r.length=0,a=0}var l,u,c,d=void 0!==e?e:self,h=d.MutationObserver||d.WebKitMutationObserver;function f(e){return function(){var t=setTimeout(i,0),n=setInterval(i,50);function i(){clearTimeout(t),clearInterval(n),e()}}}"function"==typeof h?(l=1,u=new h(o),c=document.createTextNode(""),u.observe(c,{characterData:!0}),i=function(){l=-l,c.data=l}):i=f(o),t.requestFlush=i,t.makeRequestCallFromTimer=f}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],100:[function(e,t,i){var r=function(){"use strict";function e(e,t){return null!=t&&e instanceof t}var t,i,r;try{t=Map}catch(e){t=function(){}}try{i=Set}catch(e){i=function(){}}try{r=Promise}catch(e){r=function(){}}function a(s,l,u,c,d){"object"==typeof l&&(u=l.depth,c=l.prototype,d=l.includeNonEnumerable,l=l.circular);var h=[],f=[],p=void 0!==n;return void 0===l&&(l=!0),void 0===u&&(u=1/0),function s(u,m){if(null===u)return null;if(0===m)return u;var v,g;if("object"!=typeof u)return u;if(e(u,t))v=new t;else if(e(u,i))v=new i;else if(e(u,r))v=new r(function(e,t){u.then(function(t){e(s(t,m-1))},function(e){t(s(e,m-1))})});else if(a.__isArray(u))v=[];else if(a.__isRegExp(u))v=new RegExp(u.source,o(u)),u.lastIndex&&(v.lastIndex=u.lastIndex);else if(a.__isDate(u))v=new Date(u.getTime());else{if(p&&n.isBuffer(u))return v=n.allocUnsafe?n.allocUnsafe(u.length):new n(u.length),u.copy(v),v;e(u,Error)?v=Object.create(u):void 0===c?(g=Object.getPrototypeOf(u),v=Object.create(g)):(v=Object.create(c),g=c)}if(l){var y=h.indexOf(u);if(-1!=y)return f[y];h.push(u),f.push(v)}for(var _ in e(u,t)&&u.forEach(function(e,t){var n=s(t,m-1),i=s(e,m-1);v.set(n,i)}),e(u,i)&&u.forEach(function(e){var t=s(e,m-1);v.add(t)}),u){var b;g&&(b=Object.getOwnPropertyDescriptor(g,_)),b&&null==b.set||(v[_]=s(u[_],m-1))}if(Object.getOwnPropertySymbols)for(var w=Object.getOwnPropertySymbols(u),_=0;_<w.length;_++){var E=w[_],S=Object.getOwnPropertyDescriptor(u,E);(!S||S.enumerable||d)&&(v[E]=s(u[E],m-1),S.enumerable||Object.defineProperty(v,E,{enumerable:!1}))}if(d)for(var T=Object.getOwnPropertyNames(u),_=0;_<T.length;_++){var k=T[_],S=Object.getOwnPropertyDescriptor(u,k);S&&S.enumerable||(v[k]=s(u[k],m-1),Object.defineProperty(v,k,{enumerable:!1}))}return v}(s,u)}function s(e){return Object.prototype.toString.call(e)}function o(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return a.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},a.__objToStr=s,a.__isDate=function(e){return"object"==typeof e&&"[object Date]"===s(e)},a.__isArray=function(e){return"object"==typeof e&&"[object Array]"===s(e)},a.__isRegExp=function(e){return"object"==typeof e&&"[object RegExp]"===s(e)},a.__getRegExpFlags=o,a}();"object"==typeof t&&t.exports&&(t.exports=r)},{}],101:[function(e,t,n){"use strict";var i=e("asap/raw");function r(){}var a=null,s={};function o(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("Promise constructor's argument is not a function");this._40=0,this._65=0,this._55=null,this._72=null,e!==r&&f(e,this)}function l(e,t){for(;3===e._65;)e=e._55;if(o._37&&o._37(e),0===e._65)return 0===e._40?(e._40=1,void(e._72=t)):1===e._40?(e._40=2,void(e._72=[e._72,t])):void e._72.push(t);!function(e,t){i(function(){var n=1===e._65?t.onFulfilled:t.onRejected;if(null!==n){var i=function(e,t){try{return e(t)}catch(e){return a=e,s}}(n,e._55);i===s?c(t.promise,a):u(t.promise,i)}else 1===e._65?u(t.promise,e._55):c(t.promise,e._55)})}(e,t)}function u(e,t){if(t===e)return c(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"==typeof t||"function"==typeof t)){var n=function(e){try{return e.then}catch(e){return a=e,s}}(t);if(n===s)return c(e,a);if(n===e.then&&t instanceof o)return e._65=3,e._55=t,void d(e);if("function"==typeof n)return void f(n.bind(t),e)}e._65=1,e._55=t,d(e)}function c(e,t){e._65=2,e._55=t,o._87&&o._87(e,t),d(e)}function d(e){if(1===e._40&&(l(e,e._72),e._72=null),2===e._40){for(var t=0;t<e._72.length;t++)l(e,e._72[t]);e._72=null}}function h(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function f(e,t){var n=!1,i=function(e,t,n){try{e(t,n)}catch(e){return a=e,s}}(e,function(e){n||(n=!0,u(t,e))},function(e){n||(n=!0,c(t,e))});n||i!==s||(n=!0,c(t,a))}t.exports=o,o._37=null,o._87=null,o._61=r,o.prototype.then=function(e,t){if(this.constructor!==o)return function(e,t,n){return new e.constructor(function(i,a){var s=new o(r);s.then(i,a),l(e,new h(t,n,s))})}(this,e,t);var n=new o(r);return l(this,new h(e,t,n)),n}},{"asap/raw":99}],102:[function(e,t,n){"use strict";var i=e("./core.js");t.exports=i;var r=c(!0),a=c(!1),s=c(null),o=c(void 0),l=c(0),u=c("");function c(e){var t=new i(i._61);return t._65=1,t._55=e,t}i.resolve=function(e){if(e instanceof i)return e;if(null===e)return s;if(void 0===e)return o;if(!0===e)return r;if(!1===e)return a;if(0===e)return l;if(""===e)return u;if("object"==typeof e||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new i(t.bind(e))}catch(e){return new i(function(t,n){n(e)})}return c(e)},i.all=function(e){var t=Array.prototype.slice.call(e);return new i(function(e,n){if(0===t.length)return e([]);var r=t.length;function a(s,o){if(o&&("object"==typeof o||"function"==typeof o)){if(o instanceof i&&o.then===i.prototype.then){for(;3===o._65;)o=o._55;return 1===o._65?a(s,o._55):(2===o._65&&n(o._55),void o.then(function(e){a(s,e)},n))}var l=o.then;if("function"==typeof l){var u=new i(l.bind(o));return void u.then(function(e){a(s,e)},n)}}t[s]=o,0==--r&&e(t)}for(var s=0;s<t.length;s++)a(s,t[s])})},i.reject=function(e){return new i(function(t,n){n(e)})},i.race=function(e){return new i(function(t,n){e.forEach(function(e){i.resolve(e).then(t,n)})})},i.prototype.catch=function(e){return this.then(null,e)}},{"./core.js":101}],103:[function(e,t,n){"function"!=typeof Promise.prototype.done&&(Promise.prototype.done=function(e,t){var n=arguments.length?this.then.apply(this,arguments):this;n.then(null,function(e){setTimeout(function(){throw e},0)})})},{}],104:[function(e,t,n){e("asap"),"undefined"==typeof Promise&&(Promise=e("./lib/core.js"),e("./lib/es6-extensions.js")),e("./polyfill-done.js")},{"./lib/core.js":101,"./lib/es6-extensions.js":102,"./polyfill-done.js":103,asap:98}]},{},[2])(2)}).call(this,n(5),n(30).Buffer)},function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var i=n(31),r=n(32),a=n(33);function s(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=l.prototype:(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,n){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return u(this,e,t,n)}function u(e,t,n,i){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,i){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,n):new Uint8Array(t,n,i);l.TYPED_ARRAY_SUPPORT?(e=t).__proto__=l.prototype:e=h(e,t);return e}(e,t,n,i):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|p(t,n),r=(e=o(e,i)).write(t,n);r!==i&&(e=e.slice(0,r));return e}(e,t,n):function(e,t){if(l.isBuffer(t)){var n=0|f(t.length);return 0===(e=o(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(i=t.length)!=i?o(e,0):h(e,t);if("Buffer"===t.type&&a(t.data))return h(e,t.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(c(t),e=o(e,t<0?0:0|f(t)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function h(e,t){var n=t.length<0?0:0|f(t.length);e=o(e,n);for(var i=0;i<n;i+=1)e[i]=255&t[i];return e}function f(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function p(e,t){if(l.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return V(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return H(e).length;default:if(i)return V(e).length;t=(""+t).toLowerCase(),i=!0}}function m(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function v(e,t,n,i,r){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(r)return-1;n=e.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof t&&(t=l.from(t,i)),l.isBuffer(t))return 0===t.length?-1:g(e,t,n,i,r);if("number"==typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):g(e,[t],n,i,r);throw new TypeError("val must be string, number or Buffer")}function g(e,t,n,i,r){var a,s=1,o=e.length,l=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;s=2,o/=2,l/=2,n/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(r){var c=-1;for(a=n;a<o;a++)if(u(e,a)===u(t,-1===c?0:a-c)){if(-1===c&&(c=a),a-c+1===l)return c*s}else-1!==c&&(a-=a-c),c=-1}else for(n+l>o&&(n=o-l),a=n;a>=0;a--){for(var d=!0,h=0;h<l;h++)if(u(e,a+h)!==u(t,h)){d=!1;break}if(d)return a}return-1}function y(e,t,n,i){n=Number(n)||0;var r=e.length-n;i?(i=Number(i))>r&&(i=r):i=r;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");i>a/2&&(i=a/2);for(var s=0;s<i;++s){var o=parseInt(t.substr(2*s,2),16);if(isNaN(o))return s;e[n+s]=o}return s}function _(e,t,n,i){return G(V(t,e.length-n),e,n,i)}function b(e,t,n,i){return G(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,i)}function w(e,t,n,i){return b(e,t,n,i)}function E(e,t,n,i){return G(H(t),e,n,i)}function S(e,t,n,i){return G(function(e,t){for(var n,i,r,a=[],s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),i=n>>8,r=n%256,a.push(r),a.push(i);return a}(t,e.length-n),e,n,i)}function T(e,t,n){return 0===t&&n===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,n))}function k(e,t,n){n=Math.min(e.length,n);for(var i=[],r=t;r<n;){var a,s,o,l,u=e[r],c=null,d=u>239?4:u>223?3:u>191?2:1;if(r+d<=n)switch(d){case 1:u<128&&(c=u);break;case 2:128==(192&(a=e[r+1]))&&(l=(31&u)<<6|63&a)>127&&(c=l);break;case 3:a=e[r+1],s=e[r+2],128==(192&a)&&128==(192&s)&&(l=(15&u)<<12|(63&a)<<6|63&s)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:a=e[r+1],s=e[r+2],o=e[r+3],128==(192&a)&&128==(192&s)&&128==(192&o)&&(l=(15&u)<<18|(63&a)<<12|(63&s)<<6|63&o)>65535&&l<1114112&&(c=l)}null===c?(c=65533,d=1):c>65535&&(c-=65536,i.push(c>>>10&1023|55296),c=56320|1023&c),i.push(c),r+=d}return function(e){var t=e.length;if(t<=C)return String.fromCharCode.apply(String,e);var n="",i=0;for(;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=C));return n}(i)}t.Buffer=l,t.SlowBuffer=function(e){+e!=e&&(e=0);return l.alloc(+e)},t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,n){return u(null,e,t,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,n){return function(e,t,n,i){return c(t),t<=0?o(e,t):void 0!==n?"string"==typeof i?o(e,t).fill(n,i):o(e,t).fill(n):o(e,t)}(null,e,t,n)},l.allocUnsafe=function(e){return d(null,e)},l.allocUnsafeSlow=function(e){return d(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,i=t.length,r=0,a=Math.min(n,i);r<a;++r)if(e[r]!==t[r]){n=e[r],i=t[r];break}return n<i?-1:i<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var i=l.allocUnsafe(t),r=0;for(n=0;n<e.length;++n){var s=e[n];if(!l.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,r),r+=s.length}return i},l.byteLength=p,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?k(this,0,e):function(e,t,n){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return x(this,t,n);case"utf8":case"utf-8":return k(this,t,n);case"ascii":return I(this,t,n);case"latin1":case"binary":return A(this,t,n);case"base64":return T(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,n,i,r){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),t<0||n>e.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&t>=n)return 0;if(i>=r)return-1;if(t>=n)return 1;if(this===e)return 0;for(var a=(r>>>=0)-(i>>>=0),s=(n>>>=0)-(t>>>=0),o=Math.min(a,s),u=this.slice(i,r),c=e.slice(t,n),d=0;d<o;++d)if(u[d]!==c[d]){a=u[d],s=c[d];break}return a<s?-1:s<a?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return v(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return v(this,e,t,n,!1)},l.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-t;if((void 0===n||n>r)&&(n=r),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var a=!1;;)switch(i){case"hex":return y(this,e,t,n);case"utf8":case"utf-8":return _(this,e,t,n);case"ascii":return b(this,e,t,n);case"latin1":case"binary":return w(this,e,t,n);case"base64":return E(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var C=4096;function I(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(127&e[r]);return i}function A(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(e[r]);return i}function x(e,t,n){var i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var r="",a=t;a<n;++a)r+=B(e[a]);return r}function L(e,t,n){for(var i=e.slice(t,n),r="",a=0;a<i.length;a+=2)r+=String.fromCharCode(i[a]+256*i[a+1]);return r}function R(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function P(e,t,n,i,r,a){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<a)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function D(e,t,n,i){t<0&&(t=65535+t+1);for(var r=0,a=Math.min(e.length-n,2);r<a;++r)e[n+r]=(t&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function O(e,t,n,i){t<0&&(t=4294967295+t+1);for(var r=0,a=Math.min(e.length-n,4);r<a;++r)e[n+r]=t>>>8*(i?r:3-r)&255}function M(e,t,n,i,r,a){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function N(e,t,n,i,a){return a||M(e,0,n,4),r.write(e,t,n,i,23,4),n+4}function U(e,t,n,i,a){return a||M(e,0,n,8),r.write(e,t,n,i,52,8),n+8}l.prototype.slice=function(e,t){var n,i=this.length;if((e=~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),(t=void 0===t?i:~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=l.prototype;else{var r=t-e;n=new l(r,void 0);for(var a=0;a<r;++a)n[a]=this[a+e]}return n},l.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var i=this[e],r=1,a=0;++a<t&&(r*=256);)i+=this[e+a]*r;return i},l.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var i=this[e+--t],r=1;t>0&&(r*=256);)i+=this[e+--t]*r;return i},l.prototype.readUInt8=function(e,t){return t||R(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||R(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||R(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||R(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||R(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var i=this[e],r=1,a=0;++a<t&&(r*=256);)i+=this[e+a]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*t)),i},l.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var i=t,r=1,a=this[e+--i];i>0&&(r*=256);)a+=this[e+--i]*r;return a>=(r*=128)&&(a-=Math.pow(2,8*t)),a},l.prototype.readInt8=function(e,t){return t||R(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||R(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){t||R(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return t||R(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||R(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||R(e,4,this.length),r.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||R(e,4,this.length),r.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||R(e,8,this.length),r.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||R(e,8,this.length),r.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,n,i){(e=+e,t|=0,n|=0,i)||P(this,e,t,n,Math.pow(2,8*n)-1,0);var r=1,a=0;for(this[t]=255&e;++a<n&&(r*=256);)this[t+a]=e/r&255;return t+n},l.prototype.writeUIntBE=function(e,t,n,i){(e=+e,t|=0,n|=0,i)||P(this,e,t,n,Math.pow(2,8*n)-1,0);var r=n-1,a=1;for(this[t+r]=255&e;--r>=0&&(a*=256);)this[t+r]=e/a&255;return t+n},l.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):D(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):D(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):O(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):O(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t|=0,!i){var r=Math.pow(2,8*n-1);P(this,e,t,n,r-1,-r)}var a=0,s=1,o=0;for(this[t]=255&e;++a<n&&(s*=256);)e<0&&0===o&&0!==this[t+a-1]&&(o=1),this[t+a]=(e/s>>0)-o&255;return t+n},l.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t|=0,!i){var r=Math.pow(2,8*n-1);P(this,e,t,n,r-1,-r)}var a=n-1,s=1,o=0;for(this[t+a]=255&e;--a>=0&&(s*=256);)e<0&&0===o&&0!==this[t+a+1]&&(o=1),this[t+a]=(e/s>>0)-o&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):D(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):D(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):O(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):O(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,n){return N(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return N(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return U(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return U(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,i){if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var r,a=i-n;if(this===e&&n<t&&t<i)for(r=a-1;r>=0;--r)e[r+t]=this[r+n];else if(a<1e3||!l.TYPED_ARRAY_SUPPORT)for(r=0;r<a;++r)e[r+t]=this[r+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},l.prototype.fill=function(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===e.length){var r=e.charCodeAt(0);r<256&&(e=r)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!l.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var s=l.isBuffer(e)?e:V(new l(e,i).toString()),o=s.length;for(a=0;a<n-t;++a)this[a+t]=s[a%o]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function B(e){return e<16?"0"+e.toString(16):e.toString(16)}function V(e,t){var n;t=t||1/0;for(var i=e.length,r=null,a=[],s=0;s<i;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!r){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(s+1===i){(t-=3)>-1&&a.push(239,191,189);continue}r=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(t-=3)>-1&&a.push(239,191,189);if(r=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function H(e){return i.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(F,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function G(e,t,n,i){for(var r=0;r<i&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}}).call(this,n(5))},function(e,t,n){"use strict";t.byteLength=function(e){var t=u(e),n=t[0],i=t[1];return 3*(n+i)/4-i},t.toByteArray=function(e){for(var t,n=u(e),i=n[0],s=n[1],o=new a(function(e,t,n){return 3*(t+n)/4-n}(0,i,s)),l=0,c=s>0?i-4:i,d=0;d<c;d+=4)t=r[e.charCodeAt(d)]<<18|r[e.charCodeAt(d+1)]<<12|r[e.charCodeAt(d+2)]<<6|r[e.charCodeAt(d+3)],o[l++]=t>>16&255,o[l++]=t>>8&255,o[l++]=255&t;2===s&&(t=r[e.charCodeAt(d)]<<2|r[e.charCodeAt(d+1)]>>4,o[l++]=255&t);1===s&&(t=r[e.charCodeAt(d)]<<10|r[e.charCodeAt(d+1)]<<4|r[e.charCodeAt(d+2)]>>2,o[l++]=t>>8&255,o[l++]=255&t);return o},t.fromByteArray=function(e){for(var t,n=e.length,r=n%3,a=[],s=0,o=n-r;s<o;s+=16383)a.push(c(e,s,s+16383>o?o:s+16383));1===r?(t=e[n-1],a.push(i[t>>2]+i[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],a.push(i[t>>10]+i[t>>4&63]+i[t<<2&63]+"="));return a.join("")};for(var i=[],r=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,l=s.length;o<l;++o)i[o]=s[o],r[s.charCodeAt(o)]=o;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e,t,n){for(var r,a,s=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),s.push(i[(a=r)>>18&63]+i[a>>12&63]+i[a>>6&63]+i[63&a]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,i,r){var a,s,o=8*r-i-1,l=(1<<o)-1,u=l>>1,c=-7,d=n?r-1:0,h=n?-1:1,f=e[t+d];for(d+=h,a=f&(1<<-c)-1,f>>=-c,c+=o;c>0;a=256*a+e[t+d],d+=h,c-=8);for(s=a&(1<<-c)-1,a>>=-c,c+=i;c>0;s=256*s+e[t+d],d+=h,c-=8);if(0===a)a=1-u;else{if(a===l)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,i),a-=u}return(f?-1:1)*s*Math.pow(2,a-i)},t.write=function(e,t,n,i,r,a){var s,o,l,u=8*a-r-1,c=(1<<u)-1,d=c>>1,h=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:a-1,p=i?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),(t+=s+d>=1?h/l:h*Math.pow(2,1-d))*l>=2&&(s++,l/=2),s+d>=c?(o=0,s=c):s+d>=1?(o=(t*l-1)*Math.pow(2,r),s+=d):(o=t*Math.pow(2,d-1)*Math.pow(2,r),s=0));r>=8;e[n+f]=255&o,f+=p,o/=256,r-=8);for(s=s<<r|o,u+=r;u>0;e[n+f]=255&s,f+=p,s/=256,u-=8);e[n+f-p]|=128*m}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){e.exports={adts:n(7),h264:n(8)}},function(e,t,n){"use strict";var i;i=function(e){var t=e.byteLength,n=0,i=0;this.length=function(){return 8*t},this.bitsAvailable=function(){return 8*t+i},this.loadWord=function(){var r=e.byteLength-t,a=new Uint8Array(4),s=Math.min(4,t);if(0===s)throw new Error("no bytes available");a.set(e.subarray(r,r+s)),n=new DataView(a.buffer).getUint32(0),i=8*s,t-=s},this.skipBits=function(e){var r;i>e?(n<<=e,i-=e):(e-=i,e-=8*(r=Math.floor(e/8)),t-=r,this.loadWord(),n<<=e,i-=e)},this.readBits=function(e){var r=Math.min(i,e),a=n>>>32-r;return(i-=r)>0?n<<=r:t>0&&this.loadWord(),(r=e-r)>0?a<<r|this.readBits(r):a},this.skipLeadingZeros=function(){var e;for(e=0;e<i;++e)if(0!=(n&2147483648>>>e))return n<<=e,i-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()},e.exports=i},function(e,t,n){e.exports={generator:n(15),probe:n(9),Transmuxer:n(10).Transmuxer,AudioSegmentStream:n(10).AudioSegmentStream,VideoSegmentStream:n(10).VideoSegmentStream,CaptionParser:n(45)}},function(e,t){e.exports={toUnsigned:function(e){return e>>>0}}},function(e,t){var n=function(e,t){var n={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return n.dataOffset=t,n.compositionTimeOffset=e.pts-e.dts,n.duration=e.duration,n.size=4*e.length,n.size+=e.byteLength,e.keyFrame&&(n.flags.dependsOn=2,n.flags.isNonSyncSample=0),n};e.exports={groupNalsIntoFrames:function(e){var t,n,i=[],r=[];for(i.byteLength=0,t=0;t<e.length;t++)"access_unit_delimiter_rbsp"===(n=e[t]).nalUnitType?(i.length&&(i.duration=n.dts-i.dts,r.push(i)),(i=[n]).byteLength=n.data.byteLength,i.pts=n.pts,i.dts=n.dts):("slice_layer_without_partitioning_rbsp_idr"===n.nalUnitType&&(i.keyFrame=!0),i.duration=n.dts-i.dts,i.byteLength+=n.data.byteLength,i.push(n));return r.length&&(!i.duration||i.duration<=0)&&(i.duration=r[r.length-1].duration),r.push(i),r},groupFramesIntoGops:function(e){var t,n,i=[],r=[];for(i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=e[0].pts,i.dts=e[0].dts,r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,t=0;t<e.length;t++)(n=e[t]).keyFrame?(i.length&&(r.push(i),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration),(i=[n]).nalCount=n.length,i.byteLength=n.byteLength,i.pts=n.pts,i.dts=n.dts,i.duration=n.duration):(i.duration+=n.duration,i.nalCount+=n.length,i.byteLength+=n.byteLength,i.push(n));return r.length&&i.duration<=0&&(i.duration=r[r.length-1].duration),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration,r.push(i),r},extendFirstKeyFrame:function(e){var t;return!e[0][0].keyFrame&&e.length>1&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e},generateSampleTable:function(e,t){var i,r,a,s,o,l=t||0,u=[];for(i=0;i<e.length;i++)for(s=e[i],r=0;r<s.length;r++)o=s[r],l+=(a=n(o,l)).size,u.push(a);return u},concatenateNalData:function(e){var t,n,i,r,a,s,o=0,l=e.byteLength,u=e.nalCount,c=new Uint8Array(l+4*u),d=new DataView(c.buffer);for(t=0;t<e.length;t++)for(r=e[t],n=0;n<r.length;n++)for(a=r[n],i=0;i<a.length;i++)s=a[i],d.setUint32(o,s.data.byteLength),o+=4,c.set(s.data,o),o+=s.data.byteLength;return c}}},function(e,t,n){var i=n(40),r=n(41);e.exports={prefixWithSilence:function(e,t,n,a){var s,o,l,u,c=0,d=0,h=0;if(t.length&&(s=r.audioTsToVideoTs(e.baseMediaDecodeTime,e.samplerate),o=Math.ceil(9e4/(e.samplerate/1024)),n&&a&&(c=s-Math.max(n,a),h=(d=Math.floor(c/o))*o),!(d<1||h>45e3))){for((l=i[e.samplerate])||(l=t[0].data),u=0;u<d;u++)t.splice(u,0,{data:l});e.baseMediaDecodeTime-=Math.floor(r.videoTsToAudioTs(h,e.samplerate))}},trimAdtsFramesByEarliestDts:function(e,t,n){return t.minSegmentDts>=n?e:(t.minSegmentDts=1/0,e.filter(function(e){return e.dts>=n&&(t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!0)}))},generateSampleTable:function(e){var t,n,i=[];for(t=0;t<e.length;t++)n=e[t],i.push({size:n.data.byteLength,duration:1024});return i},concatenateFrameData:function(e){var t,n,i=0,r=new Uint8Array(function(e){var t,n=0;for(t=0;t<e.length;t++)n+=e[t].data.byteLength;return n}(e));for(t=0;t<e.length;t++)n=e[t],r.set(n.data,i),i+=n.data.byteLength;return r}}},function(e,t){var n,i=[33,16,5,32,164,27],r=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],a=function(e){for(var t=[];e--;)t.push(0);return t},s={96000:[i,[227,64],a(154),[56]],88200:[i,[231],a(170),[56]],64000:[i,[248,192],a(240),[56]],48000:[i,[255,192],a(268),[55,148,128],a(54),[112]],44100:[i,[255,192],a(268),[55,163,128],a(84),[112]],32000:[i,[255,192],a(268),[55,234],a(226),[112]],24000:[i,[255,192],a(268),[55,255,128],a(268),[111,112],a(126),[224]],16000:[i,[255,192],a(268),[55,255,128],a(268),[111,255],a(269),[223,108],a(195),[1,192]],12000:[r,a(268),[3,127,248],a(268),[6,255,240],a(268),[13,255,224],a(268),[27,253,128],a(259),[56]],11025:[r,a(268),[3,127,248],a(268),[6,255,240],a(268),[13,255,224],a(268),[27,255,192],a(268),[55,175,128],a(108),[112]],8000:[r,a(268),[3,121,16],a(47),[7]]};e.exports=(n=s,Object.keys(n).reduce(function(e,t){return e[t]=new Uint8Array(n[t].reduce(function(e,t){return e.concat(t)},[])),e},{}))},function(e,t){var n,i,r,a,s,o;n=function(e){return 9e4*e},i=function(e,t){return e*t},r=function(e){return e/9e4},a=function(e,t){return e/t},s=function(e,t){return n(a(e,t))},o=function(e,t){return i(r(e),t)},e.exports={secondsToVideoTs:n,secondsToAudioTs:i,videoTsToSeconds:r,audioTsToSeconds:a,audioTsToVideoTs:s,videoTsToAudioTs:o}},function(e,t){e.exports={clearDtsInfo:function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},calculateTrackBaseMediaDecodeTime:function(e,t){var n,i=e.minSegmentDts;return t||(i-=e.timelineStartInfo.dts),n=e.timelineStartInfo.baseMediaDecodeTime,n+=i,n=Math.max(0,n),"audio"===e.type&&(n*=e.samplerate/9e4,n=Math.floor(n)),n},collectDtsInfo:function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))}}},function(e,t,n){"use strict";var i,r=n(1),a=n(2),s=function(e,t,n){var i,r="";for(i=t;i<n;i++)r+="%"+("00"+e[i].toString(16)).slice(-2);return r},o=function(e,t,n){return decodeURIComponent(s(e,t,n))},l=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},u={TXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=o(e.data,1,t),e.value=o(e.data,t+1,e.data.length).replace(/\0*$/,"");break}e.data=e.value}},WXXX:function(e){var t;if(3===e.data[0])for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=o(e.data,1,t),e.url=o(e.data,t+1,e.data.length);break}},PRIV:function(e){var t,n;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=(n=e.data,unescape(s(n,0,t)));break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}};(i=function(e){var t,n={debug:!(!e||!e.debug),descriptor:e&&e.descriptor},r=0,s=[],o=0;if(i.prototype.init.call(this),this.dispatchType=a.METADATA_STREAM_TYPE.toString(16),n.descriptor)for(t=0;t<n.descriptor.length;t++)this.dispatchType+=("00"+n.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,i,a,c,d;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(o=0,s.length=0),0===s.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))n.debug&&console.log("Skipping unrecognized metadata packet");else if(s.push(e),o+=e.data.byteLength,1===s.length&&(r=l(e.data.subarray(6,10)),r+=10),!(o<r)){for(t={data:new Uint8Array(r),frames:[],pts:s[0].pts,dts:s[0].dts},d=0;d<r;)t.data.set(s[0].data.subarray(0,r-d),d),d+=s[0].data.byteLength,o-=s[0].data.byteLength,s.shift();i=10,64&t.data[5]&&(i+=4,i+=l(t.data.subarray(10,14)),r-=l(t.data.subarray(16,20)));do{if((a=l(t.data.subarray(i+4,i+8)))<1)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");if((c={id:String.fromCharCode(t.data[i],t.data[i+1],t.data[i+2],t.data[i+3]),data:t.data.subarray(i+10,i+a+10)}).key=c.id,u[c.id]&&(u[c.id](c),"com.apple.streaming.transportStreamTimestamp"===c.owner)){var h=c.data,f=(1&h[3])<<30|h[4]<<22|h[5]<<14|h[6]<<6|h[7]>>>2;f*=4,f+=3&h[7],c.timeStamp=f,void 0===t.pts&&void 0===t.dts&&(t.pts=c.timeStamp,t.dts=c.timeStamp),this.trigger("timestamp",c)}t.frames.push(c),i+=10,i+=a}while(i<r);this.trigger("data",t)}}}).prototype=new r,e.exports=i},function(e,t,n){"use strict";var i,r=n(1),a=n(12);(i=function(){var e=new Uint8Array,t=0;i.prototype.init.call(this),this.setTimestamp=function(e){t=e},this.push=function(n){var i,r,s,o,l=0,u=0;for(e.length?(o=e.length,(e=new Uint8Array(n.byteLength+o)).set(e.subarray(0,o)),e.set(n,o)):e=n;e.length-u>=3;)if(e[u]!=="I".charCodeAt(0)||e[u+1]!=="D".charCodeAt(0)||e[u+2]!=="3".charCodeAt(0))if(255!=(255&e[u])||240!=(240&e[u+1]))u++;else{if(e.length-u<7)break;if(u+(l=a.parseAdtsSize(e,u))>e.length)break;s={type:"audio",data:e.subarray(u,u+l),pts:t,dts:t},this.trigger("data",s),u+=l}else{if(e.length-u<10)break;if(u+(l=a.parseId3TagSize(e,u))>e.length)break;r={type:"timed-metadata",data:e.subarray(u,u+l)},this.trigger("data",r),u+=l}i=e.length-u,e=i>0?e.subarray(u):new Uint8Array}}).prototype=new r,e.exports=i},function(e,t,n){"use strict";var i=n(17).discardEmulationPreventionBytes,r=n(16).CaptionStream,a=n(9),s=n(19),o=function(e,t){for(var n=e,i=0;i<t.length;i++){var r=t[i];if(n<r.size)return r;n-=r.size}return null},l=function(e,t){var n=a.findBox(e,["moof","traf"]),r=a.findBox(e,["mdat"]),l={},u=[];return r.forEach(function(e,t){var i=n[t];u.push({mdat:e,traf:i})}),u.forEach(function(e){var n,r=e.mdat,u=e.traf,c=a.findBox(u,["tfhd"]),d=s.parseTfhd(c[0]),h=d.trackId,f=a.findBox(u,["tfdt"]),p=f.length>0?s.parseTfdt(f[0]).baseMediaDecodeTime:0,m=a.findBox(u,["trun"]);t===h&&m.length>0&&(n=function(e,t,n){var r,a,s,l,u=new DataView(e.buffer,e.byteOffset,e.byteLength),c=[];for(a=0;a+4<e.length;a+=s)if(s=u.getUint32(a),a+=4,!(s<=0))switch(31&e[a]){case 6:var d=e.subarray(a+1,a+1+s),h=o(a,t);r={nalUnitType:"sei_rbsp",size:s,data:d,escapedRBSP:i(d),trackId:n},h?(r.pts=h.pts,r.dts=h.dts,l=h):(r.pts=l.pts,r.dts=l.dts),c.push(r)}return c}(r,function(e,t,n){var i=t,r=n.defaultSampleDuration||0,a=n.defaultSampleSize||0,o=n.trackId,l=[];return e.forEach(function(e){var t=s.parseTrun(e).samples;t.forEach(function(e){void 0===e.duration&&(e.duration=r),void 0===e.size&&(e.size=a),e.trackId=o,e.dts=i,void 0===e.compositionTimeOffset&&(e.compositionTimeOffset=0),e.pts=i+e.compositionTimeOffset,i+=e.duration}),l=l.concat(t)}),l}(m,p,d),h),l[h]||(l[h]=[]),l[h]=l[h].concat(n))}),l};e.exports=function(){var e,t,n,i,a,s=!1;this.isInitialized=function(){return s},this.init=function(){e=new r,s=!0,e.on("data",function(e){e.startTime=e.startPts/i,e.endTime=e.endPts/i,a.captions.push(e),a.captionStreams[e.stream]=!0})},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&"object"==typeof t&&0===Object.keys(t).length||n===e[0]&&i===t[n])},this.parse=function(e,r,s){var o;if(!this.isInitialized())return null;if(!r||!s)return null;if(this.isNewInit(r,s))n=r[0],i=s[n];else if(!n||!i)return t.push(e),null;for(;t.length>0;){var u=t.shift();this.parse(u,r,s)}return null!==(o=function(e,t,n){return t?{seiNals:l(e,t)[t],timescale:n}:null}(e,n,i))&&o.seiNals?(this.pushNals(o.seiNals),this.flushStream(),a):null},this.pushNals=function(t){if(!this.isInitialized()||!t||0===t.length)return null;t.forEach(function(t){e.push(t)})},this.flushStream=function(){if(!this.isInitialized())return null;e.flush()},this.clearParsedCaptions=function(){a.captions=[],a.captionStreams={}},this.resetCaptionStream=function(){if(!this.isInitialized())return null;e.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){t=[],n=null,i=null,a?this.clearParsedCaptions():a={captions:[],captionStreams:{}},this.resetCaptionStream()},this.reset()}},function(e,t,n){e.exports={tag:n(13),Transmuxer:n(47),getFlvHeader:n(50)}},function(e,t,n){"use strict";var i,r,a,s,o,l,u=n(1),c=n(13),d=n(11),h=n(7),f=n(8).H264Stream,p=n(48),m=n(49);s=function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts?e.timelineStartInfo.pts=t.pts:e.timelineStartInfo.pts=Math.min(e.timelineStartInfo.pts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts?e.timelineStartInfo.dts=t.dts:e.timelineStartInfo.dts=Math.min(e.timelineStartInfo.dts,t.dts))},o=function(e,t){var n=new c(c.METADATA_TAG);return n.dts=t,n.pts=t,n.writeMetaDataDouble("videocodecid",7),n.writeMetaDataDouble("width",e.width),n.writeMetaDataDouble("height",e.height),n},l=function(e,t){var n,i=new c(c.VIDEO_TAG,!0);for(i.dts=t,i.pts=t,i.writeByte(1),i.writeByte(e.profileIdc),i.writeByte(e.profileCompatibility),i.writeByte(e.levelIdc),i.writeByte(255),i.writeByte(225),i.writeShort(e.sps[0].length),i.writeBytes(e.sps[0]),i.writeByte(e.pps.length),n=0;n<e.pps.length;++n)i.writeShort(e.pps[n].length),i.writeBytes(e.pps[n]);return i},(a=function(e){var t,n=[],i=[];a.prototype.init.call(this),this.push=function(t){s(e,t),e&&(e.audioobjecttype=t.audioobjecttype,e.channelcount=t.channelcount,e.samplerate=t.samplerate,e.samplingfrequencyindex=t.samplingfrequencyindex,e.samplesize=t.samplesize,e.extraData=e.audioobjecttype<<11|e.samplingfrequencyindex<<7|e.channelcount<<3),t.pts=Math.round(t.pts/90),t.dts=Math.round(t.dts/90),n.push(t)},this.flush=function(){var r,a,s,o=new m;if(0!==n.length){for(s=-1/0;n.length;)r=n.shift(),i.length&&r.pts>=i[0]&&(s=i.shift(),this.writeMetaDataTags(o,s)),(e.extraData!==t||r.pts-s>=1e3)&&(this.writeMetaDataTags(o,r.pts),t=e.extraData,s=r.pts),(a=new c(c.AUDIO_TAG)).pts=r.pts,a.dts=r.dts,a.writeBytes(r.data),o.push(a.finalize());i.length=0,t=null,this.trigger("data",{track:e,tags:o.list}),this.trigger("done","AudioSegmentStream")}else this.trigger("done","AudioSegmentStream")},this.writeMetaDataTags=function(t,n){var i;(i=new c(c.METADATA_TAG)).pts=n,i.dts=n,i.writeMetaDataDouble("audiocodecid",10),i.writeMetaDataBoolean("stereo",2===e.channelcount),i.writeMetaDataDouble("audiosamplerate",e.samplerate),i.writeMetaDataDouble("audiosamplesize",16),t.push(i.finalize()),(i=new c(c.AUDIO_TAG,!0)).pts=n,i.dts=n,i.view.setUint16(i.position,e.extraData),i.position+=2,i.length=Math.max(i.length,i.position),t.push(i.finalize())},this.onVideoKeyFrame=function(e){i.push(e)}}).prototype=new u,(r=function(e){var t,n,i=[];r.prototype.init.call(this),this.finishFrame=function(i,r){if(r){if(t&&e&&e.newMetadata&&(r.keyFrame||0===i.length)){var a=o(t,r.dts).finalize(),s=l(e,r.dts).finalize();a.metaDataTag=s.metaDataTag=!0,i.push(a),i.push(s),e.newMetadata=!1,this.trigger("keyframe",r.dts)}r.endNalUnit(),i.push(r.finalize()),n=null}},this.push=function(t){s(e,t),t.pts=Math.round(t.pts/90),t.dts=Math.round(t.dts/90),i.push(t)},this.flush=function(){for(var r,a=new m;i.length&&"access_unit_delimiter_rbsp"!==i[0].nalUnitType;)i.shift();if(0!==i.length){for(;i.length;)"seq_parameter_set_rbsp"===(r=i.shift()).nalUnitType?(e.newMetadata=!0,t=r.config,e.width=t.width,e.height=t.height,e.sps=[r.data],e.profileIdc=t.profileIdc,e.levelIdc=t.levelIdc,e.profileCompatibility=t.profileCompatibility,n.endNalUnit()):"pic_parameter_set_rbsp"===r.nalUnitType?(e.newMetadata=!0,e.pps=[r.data],n.endNalUnit()):"access_unit_delimiter_rbsp"===r.nalUnitType?(n&&this.finishFrame(a,n),(n=new c(c.VIDEO_TAG)).pts=r.pts,n.dts=r.dts):("slice_layer_without_partitioning_rbsp_idr"===r.nalUnitType&&(n.keyFrame=!0),n.endNalUnit()),n.startNalUnit(),n.writeBytes(r.data);n&&this.finishFrame(a,n),this.trigger("data",{track:e,tags:a.list}),this.trigger("done","VideoSegmentStream")}else this.trigger("done","VideoSegmentStream")}}).prototype=new u,(i=function(e){var t,n,s,o,l,u,c,m,v,g,y,_,b=this;i.prototype.init.call(this),e=e||{},this.metadataStream=new d.MetadataStream,e.metadataStream=this.metadataStream,t=new d.TransportPacketStream,n=new d.TransportParseStream,s=new d.ElementaryStream,o=new d.TimestampRolloverStream("video"),l=new d.TimestampRolloverStream("audio"),u=new d.TimestampRolloverStream("timed-metadata"),c=new h,m=new f,_=new p(e),t.pipe(n).pipe(s),s.pipe(o).pipe(m),s.pipe(l).pipe(c),s.pipe(u).pipe(this.metadataStream).pipe(_),y=new d.CaptionStream,m.pipe(y).pipe(_),s.on("data",function(e){var t,n,i;if("metadata"===e.type){for(t=e.tracks.length;t--;)"video"===e.tracks[t].type?n=e.tracks[t]:"audio"===e.tracks[t].type&&(i=e.tracks[t]);n&&!v&&(_.numberOfTracks++,v=new r(n),m.pipe(v).pipe(_)),i&&!g&&(_.numberOfTracks++,g=new a(i),c.pipe(g).pipe(_),v&&v.on("keyframe",g.onVideoKeyFrame))}}),this.push=function(e){t.push(e)},this.flush=function(){t.flush()},this.resetCaptions=function(){y.reset()},_.on("data",function(e){b.trigger("data",e)}),_.on("done",function(){b.trigger("done")})}).prototype=new u,e.exports=i},function(e,t,n){"use strict";var i=n(1),r=function(e){this.numberOfTracks=0,this.metadataStream=e.metadataStream,this.videoTags=[],this.audioTags=[],this.videoTrack=null,this.audioTrack=null,this.pendingCaptions=[],this.pendingMetadata=[],this.pendingTracks=0,this.processedTracks=0,r.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):("video"===e.track.type&&(this.videoTrack=e.track,this.videoTags=e.tags,this.pendingTracks++),void("audio"===e.track.type&&(this.audioTrack=e.track,this.audioTags=e.tags,this.pendingTracks++)))}};r.prototype=new i,r.prototype.flush=function(e){var t,n,i,r,a={tags:{},captions:[],captionStreams:{},metadata:[]};if(this.pendingTracks<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(0===this.pendingTracks&&(this.processedTracks++,this.processedTracks<this.numberOfTracks))return}if(this.processedTracks+=this.pendingTracks,this.pendingTracks=0,!(this.processedTracks<this.numberOfTracks)){for(this.videoTrack?r=this.videoTrack.timelineStartInfo.pts:this.audioTrack&&(r=this.audioTrack.timelineStartInfo.pts),a.tags.videoTags=this.videoTags,a.tags.audioTags=this.audioTags,i=0;i<this.pendingCaptions.length;i++)(n=this.pendingCaptions[i]).startTime=n.startPts-r,n.startTime/=9e4,n.endTime=n.endPts-r,n.endTime/=9e4,a.captionStreams[n.stream]=!0,a.captions.push(n);for(i=0;i<this.pendingMetadata.length;i++)(t=this.pendingMetadata[i]).cueTime=t.pts-r,t.cueTime/=9e4,a.metadata.push(t);a.metadata.dispatchType=this.metadataStream.dispatchType,this.videoTrack=null,this.audioTrack=null,this.videoTags=[],this.audioTags=[],this.pendingCaptions.length=0,this.pendingMetadata.length=0,this.pendingTracks=0,this.processedTracks=0,this.trigger("data",a),this.trigger("done")}},e.exports=r},function(e,t,n){"use strict";e.exports=function(){var e=this;this.list=[],this.push=function(e){this.list.push({bytes:e.bytes,dts:e.dts,pts:e.pts,keyFrame:e.keyFrame,metaDataTag:e.metaDataTag})},Object.defineProperty(this,"length",{get:function(){return e.list.length}})}},function(e,t,n){"use strict";var i=n(13);e.exports=function(e,t,n){var r,a,s,o=new Uint8Array(9),l=new DataView(o.buffer);return e=e||0,t=void 0===t||t,n=void 0===n||n,l.setUint8(0,70),l.setUint8(1,76),l.setUint8(2,86),l.setUint8(3,1),l.setUint8(4,(t?4:0)|(n?1:0)),l.setUint32(5,o.byteLength),e<=0?((a=new Uint8Array(o.byteLength+4)).set(o),a.set([0,0,0,0],o.byteLength),a):((r=new i(i.METADATA_TAG)).pts=r.dts=0,r.writeMetaDataDouble("duration",e),s=r.finalize().length,(a=new Uint8Array(o.byteLength+s)).set(o),a.set(l.byteLength,s),a)}},function(e,t,n){e.exports=n(11)},function(e,t,n){"use strict";var i={8:"audio",9:"video",18:"metadata"},r=function(e){for(var t,n=[];e.byteLength>0;)t=0,n.push("0x"+("00"+e[t++].toString(16)).slice(-2).toUpperCase()),e=e.subarray(1);return n.join(" ")},a=function(e,t){var n=e[0]&parseInt("00001111",2);return(t=t||{}).frameType=["Unknown","Keyframe (for AVC, a seekable frame)","Inter frame (for AVC, a nonseekable frame)","Disposable inter frame (H.263 only)","Generated keyframe (reserved for server use only)","Video info/command frame"][(e[0]&parseInt("11110000",2))>>>4],t.codecID=n,7===n?function(e,t){var n=e[1]&parseInt("01111111",2)<<16|e[2]<<8|e[3];return(t=t||{}).avcPacketType=["AVC Sequence Header","AVC NALU","AVC End-of-Sequence"][e[0]],t.CompositionTime=e[1]&parseInt("10000000",2)?-n:n,1===e[0]?t.nalUnitTypeRaw=r(e.subarray(4,100)):t.data=r(e.subarray(4)),t}(e.subarray(1),t):t},s=function(e,t){var n=(e[0]&parseInt("11110000",2))>>>4;return(t=t||{}).soundFormat=["Linear PCM, platform endian","ADPCM","MP3","Linear PCM, little endian","Nellymoser 16-kHz mono","Nellymoser 8-kHz mono","Nellymoser","G.711 A-law logarithmic PCM","G.711 mu-law logarithmic PCM","reserved","AAC","Speex","MP3 8-Khz","Device-specific sound"][n],t.soundRate=["5.5-kHz","11-kHz","22-kHz","44-kHz"][(e[0]&parseInt("00001100",2))>>>2],t.soundSize=(e[0]&parseInt("00000010",2))>>>1?"16-bit":"8-bit",t.soundType=e[0]&parseInt("00000001",2)?"Stereo":"Mono",10===n?function(e,t){return(t=t||{}).aacPacketType=["AAC Sequence Header","AAC Raw"][e[0]],t.data=r(e.subarray(1)),t}(e.subarray(1),t):t},o=function(e){var t=function(e){return{tagType:i[e[0]],dataSize:e[1]<<16|e[2]<<8|e[3],timestamp:e[7]<<24|e[4]<<16|e[5]<<8|e[6],streamID:e[8]<<16|e[9]<<8|e[10]}}(e);switch(e[0]){case 8:s(e.subarray(11),t);break;case 9:a(e.subarray(11),t)}return t};e.exports={inspectTag:o,inspect:function(e){var t,n,i=9,r=[];for(i+=4;i<e.byteLength;)t=e[i+1]<<16,t|=e[i+2]<<8,t|=e[i+3],t+=11,n=e.subarray(i,i+t),r.push(o(n)),i+=t+4;return r},textify:function(e){return JSON.stringify(e,null,2)}}},function(e,t,n){"use strict";var i=n(2),r=n(18).handleRollover,a={};a.ts=n(54),a.aac=n(12);var s=function(e,t,n){for(var i,r,s,o,l=0,u=188,c=!1;u<=e.byteLength;)if(71!==e[l]||71!==e[u]&&u!==e.byteLength)l++,u++;else{switch(i=e.subarray(l,u),a.ts.parseType(i,t.pid)){case"pes":r=a.ts.parsePesType(i,t.table),s=a.ts.parsePayloadUnitStartIndicator(i),"audio"===r&&s&&(o=a.ts.parsePesTime(i))&&(o.type="audio",n.audio.push(o),c=!0)}if(c)break;l+=188,u+=188}for(l=(u=e.byteLength)-188,c=!1;l>=0;)if(71!==e[l]||71!==e[u]&&u!==e.byteLength)l--,u--;else{switch(i=e.subarray(l,u),a.ts.parseType(i,t.pid)){case"pes":r=a.ts.parsePesType(i,t.table),s=a.ts.parsePayloadUnitStartIndicator(i),"audio"===r&&s&&(o=a.ts.parsePesTime(i))&&(o.type="audio",n.audio.push(o),c=!0)}if(c)break;l-=188,u-=188}},o=function(e,t,n){for(var i,r,s,o,l,u,c,d=0,h=188,f=!1,p={data:[],size:0};h<e.byteLength;)if(71!==e[d]||71!==e[h])d++,h++;else{switch(i=e.subarray(d,h),a.ts.parseType(i,t.pid)){case"pes":if(r=a.ts.parsePesType(i,t.table),s=a.ts.parsePayloadUnitStartIndicator(i),"video"===r&&(s&&!f&&(o=a.ts.parsePesTime(i))&&(o.type="video",n.video.push(o),f=!0),!n.firstKeyFrame)){if(s&&0!==p.size){for(l=new Uint8Array(p.size),u=0;p.data.length;)c=p.data.shift(),l.set(c,u),u+=c.byteLength;if(a.ts.videoPacketContainsKeyFrame(l)){var m=a.ts.parsePesTime(l);m?(n.firstKeyFrame=m,n.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}p.size=0}p.data.push(i),p.size+=i.byteLength}}if(f&&n.firstKeyFrame)break;d+=188,h+=188}for(d=(h=e.byteLength)-188,f=!1;d>=0;)if(71!==e[d]||71!==e[h])d--,h--;else{switch(i=e.subarray(d,h),a.ts.parseType(i,t.pid)){case"pes":r=a.ts.parsePesType(i,t.table),s=a.ts.parsePayloadUnitStartIndicator(i),"video"===r&&s&&(o=a.ts.parsePesTime(i))&&(o.type="video",n.video.push(o),f=!0)}if(f)break;d-=188,h-=188}},l=function(e){var t={pid:null,table:null},n={};for(var r in function(e,t){for(var n,i=0,r=188;r<e.byteLength;)if(71!==e[i]||71!==e[r])i++,r++;else{switch(n=e.subarray(i,r),a.ts.parseType(n,t.pid)){case"pat":t.pid||(t.pid=a.ts.parsePat(n));break;case"pmt":t.table||(t.table=a.ts.parsePmt(n))}if(t.pid&&t.table)return;i+=188,r+=188}}(e,t),t.table){if(t.table.hasOwnProperty(r))switch(t.table[r]){case i.H264_STREAM_TYPE:n.video=[],o(e,t,n),0===n.video.length&&delete n.video;break;case i.ADTS_STREAM_TYPE:n.audio=[],s(e,t,n),0===n.audio.length&&delete n.audio}}return n};e.exports={inspect:function(e,t){var n;return(n=a.aac.isLikelyAacData(e)?function(e){for(var t,n=!1,i=0,r=null,s=null,o=0,l=0;e.length-l>=3;){switch(a.aac.parseType(e,l)){case"timed-metadata":if(e.length-l<10){n=!0;break}if((o=a.aac.parseId3TagSize(e,l))>e.length){n=!0;break}null===s&&(t=e.subarray(l,l+o),s=a.aac.parseAacTimestamp(t)),l+=o;break;case"audio":if(e.length-l<7){n=!0;break}if((o=a.aac.parseAdtsSize(e,l))>e.length){n=!0;break}null===r&&(t=e.subarray(l,l+o),r=a.aac.parseSampleRate(t)),i++,l+=o;break;default:l++}if(n)return null}if(null===r||null===s)return null;var u=9e4/r;return{audio:[{type:"audio",dts:s,pts:s},{type:"audio",dts:s+1024*i*u,pts:s+1024*i*u}]}}(e):l(e))&&(n.audio||n.video)?(function(e,t){if(e.audio&&e.audio.length){var n=t;void 0===n&&(n=e.audio[0].dts),e.audio.forEach(function(e){e.dts=r(e.dts,n),e.pts=r(e.pts,n),e.dtsTime=e.dts/9e4,e.ptsTime=e.pts/9e4})}if(e.video&&e.video.length){var i=t;if(void 0===i&&(i=e.video[0].dts),e.video.forEach(function(e){e.dts=r(e.dts,i),e.pts=r(e.pts,i),e.dtsTime=e.dts/9e4,e.ptsTime=e.pts/9e4}),e.firstKeyFrame){var a=e.firstKeyFrame;a.dts=r(a.dts,i),a.pts=r(a.pts,i),a.dtsTime=a.dts/9e4,a.ptsTime=a.dts/9e4}}}(n,t),n):null},parseAudioPes_:s}},function(e,t,n){"use strict";var i=n(2),r=function(e){var t=31&e[1];return t<<=8,t|=e[2]},a=function(e){return!!(64&e[1])},s=function(e){var t=0;return(48&e[3])>>>4>1&&(t+=e[4]+1),t},o=function(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}};e.exports={parseType:function(e,t){var n=r(e);return 0===n?"pat":n===t?"pmt":t?"pes":null},parsePat:function(e){var t=a(e),n=4+s(e);return t&&(n+=e[n]+1),(31&e[n+10])<<8|e[n+11]},parsePmt:function(e){var t={},n=a(e),i=4+s(e);if(n&&(i+=e[i]+1),1&e[i+5]){var r;r=3+((15&e[i+1])<<8|e[i+2])-4;for(var o=12+((15&e[i+10])<<8|e[i+11]);o<r;){var l=i+o;t[(31&e[l+1])<<8|e[l+2]]=e[l],o+=5+((15&e[l+3])<<8|e[l+4])}return t}},parsePayloadUnitStartIndicator:a,parsePesType:function(e,t){switch(t[r(e)]){case i.H264_STREAM_TYPE:return"video";case i.ADTS_STREAM_TYPE:return"audio";case i.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(e){if(!a(e))return null;var t=4+s(e);if(t>=e.byteLength)return null;var n,i=null;return 192&(n=e[t+7])&&((i={}).pts=(14&e[t+9])<<27|(255&e[t+10])<<20|(254&e[t+11])<<12|(255&e[t+12])<<5|(254&e[t+13])>>>3,i.pts*=4,i.pts+=(6&e[t+13])>>>1,i.dts=i.pts,64&n&&(i.dts=(14&e[t+14])<<27|(255&e[t+15])<<20|(254&e[t+16])<<12|(255&e[t+17])<<5|(254&e[t+18])>>>3,i.dts*=4,i.dts+=(6&e[t+18])>>>1)),i},videoPacketContainsKeyFrame:function(e){for(var t=4+s(e),n=e.subarray(t),i=0,r=0,a=!1;r<n.byteLength-3;r++)if(1===n[r+2]){i=r+5;break}for(;i<n.byteLength;)switch(n[i]){case 0:if(0!==n[i-1]){i+=2;break}if(0!==n[i-2]){i++;break}r+3!==i-2&&"slice_layer_without_partitioning_rbsp_idr"===o(31&n[r+3])&&(a=!0);do{i++}while(1!==n[i]&&i<n.length);r=i-2,i+=3;break;case 1:if(0!==n[i-1]||0!==n[i-2]){i+=3;break}"slice_layer_without_partitioning_rbsp_idr"===o(31&n[r+3])&&(a=!0),r=i-2,i+=3;break;default:i+=3}return n=n.subarray(r),i-=r,r=0,n&&n.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===o(31&n[r+3])&&(a=!0),a}}},function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),a=(n(21),n(22),n(23),n(24),n(25),n(6)),s=n.n(a),o=(n(26),n(27),o||{});o.global=window,o.isDef=function(e){return void 0!==e},o.exportPath_=function(e,t,n){var i,r=e.split("."),a=n||o.global;r[0]in a||!a.execScript||a.execScript("var "+r[0]);for(;r.length&&(i=r.shift());)!r.length&&o.isDef(t)?a[i]=t:a=a[i]?a[i]:a[i]={}},o.define=function(e,t){var n=t;o.exportPath_(e,n)},o.DEBUG=!0,o.define("goog.LOCALE","en"),o.define("goog.TRUSTED_SITE",!0),o.define("goog.STRICT_MODE_COMPATIBLE",!1),o.provide=function(e){if(o.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');delete o.implicitNamespaces_[e];for(var t=e;(t=t.substring(0,t.lastIndexOf(".")))&&!o.getObjectByName(t);)o.implicitNamespaces_[t]=!0;o.exportPath_(e)},o.forwardDeclare=function(e){},o.isProvided_=function(e){return!o.implicitNamespaces_[e]&&o.isDefAndNotNull(o.getObjectByName(e))},o.implicitNamespaces_={},o.getObjectByName=function(e,t){for(var n,i=e.split("."),r=t||o.global;n=i.shift();){if(!o.isDefAndNotNull(r[n]))return null;r=r[n]}return r},o.globalize=function(e,t){for(var n in t=t||o.global,e)t[n]=e[n]},o.addDependency=function(e,t,n){if(o.DEPENDENCIES_ENABLED){for(var i,r,a=e.replace(/\\/g,"/"),s=o.dependencies_,l=0;i=t[l];l++)s.nameToPath[i]=a;for(var u=0;r=n[u];u++)a in s.requires||(s.requires[a]={}),s.requires[a][r]=!0}},o.define("goog.ENABLE_DEBUG_LOADER",!0),o.logToConsole_=function(e){o.global.console&&o.global.console.error(e)},o.require=function(e){if(o.isProvided_(e))return null;if(o.ENABLE_DEBUG_LOADER){var t=o.getPathFromDeps_(e);if(t)return o.included_[t]=!0,o.writeScripts_(),null}var n="goog.require could not find: "+e;throw o.logToConsole_(n),Error(n)},o.basePath="",o.global.CLOSURE_BASE_PATH,o.global.CLOSURE_NO_DEPS=!0,o.global.CLOSURE_IMPORT_SCRIPT,o.DEPENDENCIES_ENABLED=o.ENABLE_DEBUG_LOADER,o.DEPENDENCIES_ENABLED&&(o.included_={},o.dependencies_={nameToPath:{},requires:{},visited:{},written:{}},o.inHtmlDocument_=function(){var e=o.global.document;return void 0!==e&&"write"in e},o.findBasePath_=function(){if(o.global.CLOSURE_BASE_PATH)o.basePath=o.global.CLOSURE_BASE_PATH;else if(o.inHtmlDocument_())for(var e=o.global.document.getElementsByTagName("script"),t=e.length-1;t>=0;--t){var n=e[t].src,i=n.lastIndexOf("?"),r=-1==i?n.length:i;if("base.js"==n.substr(r-7,7))return void(o.basePath=n.substr(0,r-7))}},o.importScript_=function(e,t){(o.global.CLOSURE_IMPORT_SCRIPT||o.writeScriptTag_)(e,t)&&(o.dependencies_.written[e]=!0)},o.writeScriptTag_=function(e,t){if(o.inHtmlDocument_()){var n=o.global.document;if("complete"==n.readyState){if(/\bdeps.js$/.test(e))return!1;throw Error('Cannot write "'+e+'" after document load')}return void 0===t?n.write('<script type="text/javascript" src="'+e+'"><\/script>'):n.write('<script type="text/javascript">'+t+"<\/script>"),!0}return!1},o.writeScripts_=function(){var e=[],t={},n=o.dependencies_;function i(r){if(!(r in n.written))if(r in n.visited)r in t||(t[r]=!0,e.push(r));else{if(n.visited[r]=!0,r in n.requires)for(var a in n.requires[r])if(!o.isProvided_(a)){if(!(a in n.nameToPath))throw Error("Undefined nameToPath for "+a);i(n.nameToPath[a])}r in t||(t[r]=!0,e.push(r))}}for(var r in o.included_)n.written[r]||i(r);for(var a=0;a<e.length;a++){r=e[a];o.dependencies_.written[r]=!0}for(a=0;a<e.length;a++){(r=e[a])&&o.importScript_(o.basePath+r)}},o.getPathFromDeps_=function(e){return e in o.dependencies_.nameToPath?o.dependencies_.nameToPath[e]:null},o.findBasePath_(),o.global.CLOSURE_NO_DEPS||o.importScript_(o.basePath+"deps.js")),o.isDefAndNotNull=function(e){return null!=e},o.isString=function(e){return"string"==typeof e},o.exportSymbol=function(e,t,n){o.exportPath_(e,t,n)},o.exportProperty=function(e,t,n){e[t]=n},o.inherits=function(e,t){function n(){}n.prototype=t.prototype,e.superClass_=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.base=function(e,n,i){var r=Array.prototype.slice.call(arguments,2);return t.prototype[n].apply(e,r)}},o.global.COMPILED=!1;var l=o,u=(n(28),n(29),{UNKNOWN:"Unknown",CUSTOM:"Custom",SHAKA:"Shaka",AXINOM:"Axinom",UNIFIED_STREAMING:"Unified Streaming",DASH_IF:"DASH-IF",WOWZA:"Wowza",BITCODIN:"Bitcodin",NIMBLE_STREAMER:"Nimble Streamer",AZURE_MEDIA_SERVICES:"Azure Media Services",GPAC:"GPAC",UPLYNK:"Verizon Digital Media Services"}),c={CLEAR_KEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps.1_0",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha",CLEAR:"no drm protection"},d={MULTIKEY:"multiple keys",MULTIPERIOD:"multiple Periods",ENCRYPTED_WITH_CLEAR:"mixing encrypted and unencrypted periods",AESCTR_16_BYTE_IV:"encrypted with AES CTR Mode using a 16 byte IV",AESCTR_8_BYTE_IV:"encrypted with AES CTR Mode using a 8 byte IV",TRICK_MODE:"Special trick mode track",XLINK:"XLink",SUBTITLES:"Subtitles",CAPTIONS:"Captions",EMBEDDED_TEXT:"embedded text",MULTIPLE_LANGUAGES:"multiple languages",AUDIO_ONLY:"audio only",OFFLINE:"Downloadable",STORED:"Downloaded",LIVE:"Live",WEBM:"WebM",MP4:"MP4",MP2TS:"MPEG-2 TS",TTML:"TTML",WEBVTT:"WebVTT",HIGH_DEFINITION:"High definition",ULTRA_HIGH_DEFINITION:"Ultra-high definition",SURROUND:"Surround sound",DASH:"DASH",HLS:"HLS"};function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var p=window.shaka,m=(window.goog,function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"defaultEquals",value:function(e,t){return!("number"!=typeof e||"number"!=typeof t||!isNaN(e)||!isNaN(t))||e===t}},{key:"remove",value:function(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}},{key:"count",value:function(e,t){var n=0,i=!0,r=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){n+=t(s.value)?1:0}}catch(e){r=!0,a=e}finally{try{i||null==o.return||o.return()}finally{if(r)throw a}}return n}},{key:"hasSameElements",value:function(e,t,n){if(n||(n=p.util.ArrayUtils.defaultEquals),e.length!=t.length)return!1;var i=t.slice(),r=!0,a=!1,s=void 0;try{for(var o,l=function(){var e=o.value,t=i.findIndex(function(t){return n(e,t)});if(-1==t)return{v:!1};i[t]=i[i.length-1],i.pop()},u=e[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var c=l();if("object"===h(c))return c.v}}catch(e){a=!0,s=e}finally{try{r||null==u.return||u.return()}finally{if(a)throw s}}return 0==i.length}}],(n=null)&&f(t.prototype,n),i&&f(t,i),e}());
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;function v(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var g=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.operations_=[]}var t,n,i;return t=e,(n=[{key:"manage",value:function(e){var t=this;this.operations_.push(e.finally(function(){m.remove(t.operations_,e)}))}},{key:"destroy",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var r,a=this.operations_[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var s=r.value;s.promise.catch(function(){}),e.push(s.abort())}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return this.operations_=[],Promise.all(e)}}])&&v(t.prototype,n),i&&v(t,i),e}();function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var b=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"cloneObject",value:function(e){var t=new Set;return function e(n){switch(y(n)){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return n;case"object":default:if(!n)return n;if(n.buffer&&n.buffer.constructor==ArrayBuffer)return n;if(t.has(n))return null;var i=n.constructor==Array;if(n.constructor!=Object&&!i)return null;t.add(n);var r=i?[]:{};for(var a in n)r[a]=e(n[a]);return i&&(r.length=n.length),r}}(e)}}],(n=null)&&_(t.prototype,n),i&&_(t,i),e}();function w(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var E=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var i in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n)Object.defineProperty(this,i,{value:n[i],writable:!0,enumerable:!0});this.bubbles=!1,this.cancelable=!1,this.defaultPrevented=!1,this.timeStamp=window.performance&&window.performance.now?window.performance.now():Date.now(),this.type=t,this.isTrusted=!1,this.currentTarget=null,this.target=null,this.stopped=!1}var t,n,i;return t=e,(n=[{key:"preventDefault",value:function(){this.cancelable&&(this.defaultPrevented=!0)}},{key:"stopImmediatePropagation",value:function(){this.stopped=!0}},{key:"stopPropagation",value:function(){}}])&&w(t.prototype,n),i&&w(t,i),e}();function S(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function T(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var k=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.map_={}}var t,n,i;return t=e,(n=[{key:"push",value:function(e,t){this.map_.hasOwnProperty(e)?this.map_[e].push(t):this.map_[e]=[t]}},{key:"get",value:function(e){var t=this.map_[e];return t?t.slice():null}},{key:"getAll",value:function(){var e=[];for(var t in this.map_)e.push.apply(e,S(this.map_[t]));return e}},{key:"remove",value:function(e,t){var n=this.map_[e];if(n)for(var i=0;i<n.length;++i)n[i]==t&&(n.splice(i,1),--i)}},{key:"clear",value:function(){this.map_={}}},{key:"forEach",value:function(e){for(var t in this.map_)e(t,this.map_[t])}}])&&T(t.prototype,n),i&&T(t,i),e}();function C(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka=window.shaka||{};var I=window.shaka;I.util;window.goog=window.goog||{};window.goog;var A=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.listeners_=new k,this.dispatchTarget=this}var t,n,i;return t=e,(n=[{key:"addEventListener",value:function(e,t,n){this.listeners_.push(e,t)}},{key:"removeEventListener",value:function(e,t,n){this.listeners_.remove(e,t)}},{key:"dispatchEvent",value:function(e){window.asserts.assert(e instanceof E,"FakeEventTarget can only dispatch FakeEvents!");var t=this.listeners_.get(e.type)||[],n=!0,i=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;e.target=this.dispatchTarget,e.currentTarget=this.dispatchTarget;try{o.handleEvent?o.handleEvent(e):o.call(this,e)}catch(e){I.log.error("Uncaught exception in event handler",e,e?e.message:null,e?e.stack:null)}if(e.stopped)break}}catch(e){i=!0,r=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}return e.defaultPrevented}}])&&C(t.prototype,n),i&&C(t,i),e}();function x(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var L=function(){function e(){var t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=new Promise(function(e,i){t=e,n=i});return i.resolve=t,i.reject=n,i}var t,n,i;return t=e,(n=[{key:"resolve",value:function(e){}},{key:"reject",value:function(e){}}])&&x(t.prototype,n),i&&x(t,i),e}();function R(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */window.shaka;var D=window.goog,O=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),P(this,"severity",{RECOVERABLE:1,CRITICAL:2}),P(this,"category",{NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9}),P(this,"code",{UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,UNKNOWN_DATA_URI_ENCODING:1005,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,UNPLAYABLE_PERIOD:4011,RESTRICTIONS_CANNOT_BE_MET:4012,NO_PERIODS:4014,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_COULD_NOT_GUESS_MIME_TYPE:4021,HLS_MASTER_PLAYLIST_NOT_PROVIDED:4022,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,HLS_COULD_NOT_PARSE_SEGMENT_START_TIME:4030,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,HLS_AES_128_ENCRYPTION_NOT_SUPPORTED:4034,INVALID_STREAMS_CHOSEN:5005,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,CAST_RECEIVER_APP_ID_MISSING:8007,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,STORE_ALREADY_IN_PROGRESS:9006,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013});for(var r=arguments.length,a=new Array(r>3?r-3:0),s=3;s<r;s++)a[s-3]=arguments[s];if(this.data=a,this.handled=!1,D.DEBUG){var o="UNKNOWN",l="UNKNOWN";for(var u in e.Category)e.Category[u]==this.category&&(o=u);for(var c in e.Code)e.Code[c]==this.code&&(l=c);if(this.message="Shaka Error "+o+"."+l+" ("+this.data.toString()+")",e.createStack)try{throw new Error(this.message)}catch(e){this.stack=e.stack}}}var t,n,i;return t=e,(n=[{key:"toString",value:function(){return"Error "+JSON.stringify(this,null,"  ")}}])&&R(t.prototype,n),i&&R(t,i),e}();D.DEBUG&&(O.createStack=!0);var M=O;function N(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var U=new M,F=(window.shaka,function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.promise=t,this.onAbort_=n,this.aborted_=!1}var t,n,i;return t=e,i=[{key:"failed",value:function(t){return new e(Promise.reject(t),function(){return Promise.resolve()})}},{key:"aborted",value:function(){var t=Promise.reject(new M(U.severity.CRITICAL,U.category.PLAYER,U.code.OPERATION_ABORTED));return t.catch(function(){}),new e(t,function(){return Promise.resolve()})}},{key:"completed",value:function(t){return new e(Promise.resolve(t),function(){return Promise.resolve()})}},{key:"notAbortable",value:function(t){return new e(t,function(){return t.catch(function(){})})}},{key:"all",value:function(t){return new e(Promise.all(t.map(function(e){return e.promise})),function(){return Promise.all(t.map(function(e){return e.abort()}))})}},{key:"wrapChainCallback_",value:function(e,t,n){try{var i=e(t);return i&&i.promise&&i.abort?(n.resolve(i.promise),function(){return i.abort()}):(n.resolve(i),function(){return Promise.resolve(i).then(function(){}).catch(function(){})})}catch(e){return n.reject(e),function(){return Promise.resolve()}}}}],(n=[{key:"abort",value:function(){return this.aborted_=!0,this.onAbort_()}},{key:"finally",value:function(e){return this.promise.then(function(t){return e(!0)},function(t){return e(!1)}),this}},{key:"chain",value:function(t,n){var i=this,r=new L,a=function(){return r.reject(new M(U.severity.CRITICAL,U.category.PLAYER,U.code.OPERATION_ABORTED)),i.abort()};return this.promise.then(function(n){i.aborted_?r.reject(new M(U.severity.CRITICAL,U.category.PLAYER,U.code.OPERATION_ABORTED)):t?a=e.wrapChainCallback_(t,n,r):r.resolve(n)},function(t){n?a=e.wrapChainCallback_(n,t,r):r.reject(t)}),new e(r,function(){return a()})}}])&&N(t.prototype,n),i&&N(t,i),e}());F.prototype.promise={};var B=F;function V(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var H=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.onTick_=t,this.cancelPending_=null}var t,n,i;return t=e,(n=[{key:"tickAfter",value:function(e){var t=this;this.stop();var n=!0,i=null;this.cancelPending_=function(){window.clearTimeout(i),n=!1};return i=window.setTimeout(function(){n&&t.onTick_()},1e3*e),this}},{key:"stop",value:function(){this.cancelPending_&&(this.cancelPending_(),this.cancelPending_=null)}}])&&V(t.prototype,n),i&&V(t,i),e}();function G(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var j=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.onTick_=t,this.ticker_=null}var t,n,i;return t=e,(n=[{key:"tickNow",value:function(){return this.stop(),this.onTick_(),this}},{key:"tickAfter",value:function(e){var t=this;return this.stop(),this.ticker_=new H(function(){t.onTick_()}).tickAfter(e),this}},{key:"tickEvery",value:function(e){var t=this;return this.stop(),this.ticker_=new H(function(){t.ticker_.tickAfter(e),t.onTick_()}).tickAfter(e),this}},{key:"stop",value:function(){this.ticker_&&(this.ticker_.stop(),this.ticker_=null)}}])&&G(t.prototype,n),i&&G(t,i),e}();function z(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(i,r)}function W(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var q=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=e.defaultRetryParameters();this.maxAttempts_=null==t.maxAttempts?i.maxAttempts:t.maxAttempts,window.asserts.assert(this.maxAttempts_>=1,"maxAttempts should be >= 1"),this.baseDelay_=null==t.baseDelay?i.baseDelay:t.baseDelay,window.asserts.assert(this.baseDelay_>=0,"baseDelay should be >= 0"),this.fuzzFactor_=null==t.fuzzFactor?i.fuzzFactor:t.fuzzFactor,window.asserts.assert(this.fuzzFactor_>=0,"fuzzFactor should be >= 0"),this.backoffFactor_=null==t.backoffFactor?i.backoffFactor:t.backoffFactor,window.asserts.assert(this.backoffFactor_>=0,"backoffFactor should be >= 0"),this.numAttempts_=0,this.nextUnfuzzedDelay_=this.baseDelay_,this.autoReset_=n,this.autoReset_&&(window.asserts.assert(this.maxAttempts_>=2,"maxAttempts must be >= 2 for autoReset == true"),this.numAttempts_=1)}var t,n,i;return t=e,n=[{key:"attempt",value:function(){var t,n=(t=regeneratorRuntime.mark(function t(){var n,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.numAttempts_>=this.maxAttempts_)){t.next=6;break}if(!this.autoReset_){t.next=5;break}this.reset_(),t.next=6;break;case 5:throw new Error(Error.Severity.CRITICAL,Error.Category.PLAYER,Error.Code.ATTEMPTS_EXHAUSTED);case 6:if(n=this.numAttempts_,this.numAttempts_++,0!=n){t.next=11;break}return window.asserts.assert(!this.autoReset_,"Failed to delay with auto-reset!"),t.abrupt("return");case 11:return i=e.fuzz_(this.nextUnfuzzedDelay_,this.fuzzFactor_),t.next=14,new Promise(function(t){e.defer(i,t)});case 14:this.nextUnfuzzedDelay_*=this.backoffFactor_;case 15:case"end":return t.stop()}},t,this)}),function(){var e=this,n=arguments;return new Promise(function(i,r){var a=t.apply(e,n);function s(e){z(a,i,r,s,o,"next",e)}function o(e){z(a,i,r,s,o,"throw",e)}s(void 0)})});return function(){return n.apply(this,arguments)}}()},{key:"reset_",value:function(){window.asserts.assert(this.autoReset_,"Should only be used for auto-reset!"),this.numAttempts_=1,this.nextUnfuzzedDelay_=this.baseDelay_}}],i=[{key:"defaultRetryParameters",value:function(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0}}},{key:"fuzz_",value:function(e,t){return e*(1+(2*Math.random()-1)*t)}},{key:"defer",value:function(e,t){new j(t).tickAfter(e/1e3)}}],n&&W(t.prototype,n),i&&W(t,i),e}(),Y=new RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$"),K={SCHEME:1,USER_INFO:2,DOMAIN:3,PORT:4,PATH:5,QUERY_DATA:6,FRAGMENT:7},X=function(e){return e.match(Y)};function $(e){var t;e instanceof $?(this.setScheme(e.getScheme()),this.setUserInfo(e.getUserInfo()),this.setDomain(e.getDomain()),this.setPort(e.getPort()),this.setPath(e.getPath()),this.setQueryData(e.getQueryData().clone()),this.setFragment(e.getFragment())):e&&(t=X(String(e)))?(this.setScheme(t[K.SCHEME]||"",!0),this.setUserInfo(t[K.USER_INFO]||"",!0),this.setDomain(t[K.DOMAIN]||"",!0),this.setPort(t[K.PORT]),this.setPath(t[K.PATH]||"",!0),this.setQueryData(t[K.QUERY_DATA]||"",!0),this.setFragment(t[K.FRAGMENT]||"",!0)):this.queryData_=new $.QueryData(null,null)}function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ee(e,t,n){return t&&J(e.prototype,t),n&&J(e,n),e}function te(e,t){return!t||"object"!==Z(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ie(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&re(e,t)}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$.prototype.scheme_="",$.prototype.userInfo_="",$.prototype.domain_="",$.prototype.port_=null,$.prototype.path_="",$.prototype.queryData_,$.prototype.fragment_="",$.prototype.toString=function(){var e=[],t=this.getScheme();t&&e.push($.encodeSpecialChars_(t,$.reDisallowedInSchemeOrUserInfo_,!0),":");var n=this.getDomain();if(n){e.push("//");var i=this.getUserInfo();i&&e.push($.encodeSpecialChars_(i,$.reDisallowedInSchemeOrUserInfo_,!0),"@"),e.push($.removeDoubleEncoding_(encodeURIComponent(n)));var r=this.getPort();null!=r&&e.push(":",String(r))}var a=this.getPath();a&&(this.hasDomain()&&"/"!=a.charAt(0)&&e.push("/"),e.push($.encodeSpecialChars_(a,"/"==a.charAt(0)?$.reDisallowedInAbsolutePath_:$.reDisallowedInRelativePath_,!0)));var s=this.getEncodedQuery();s&&e.push("?",s);var o=this.getFragment();return o&&e.push("#",$.encodeSpecialChars_(o,$.reDisallowedInFragment_)),e.join("")},$.prototype.resolve=function(e){var t=this.clone();"data"===t.scheme_&&(t=new $);var n=e.hasScheme();n?t.setScheme(e.getScheme()):n=e.hasUserInfo(),n?t.setUserInfo(e.getUserInfo()):n=e.hasDomain(),n?t.setDomain(e.getDomain()):n=e.hasPort();var i=e.getPath();if(n)t.setPort(e.getPort());else if(n=e.hasPath()){if("/"!=i.charAt(0))if(this.hasDomain()&&!this.hasPath())i="/"+i;else{var r=t.getPath().lastIndexOf("/");-1!=r&&(i=t.getPath().substr(0,r+1)+i)}i=$.removeDotSegments(i)}return n?t.setPath(i):n=e.hasQuery(),n?t.setQueryData(e.getQueryData().clone()):n=e.hasFragment(),n&&t.setFragment(e.getFragment()),t},$.prototype.clone=function(){return new $(this)},$.prototype.getScheme=function(){return this.scheme_},$.prototype.setScheme=function(e,t){return this.scheme_=t?$.decodeOrEmpty_(e,!0):e,this.scheme_&&(this.scheme_=this.scheme_.replace(/:$/,"")),this},$.prototype.hasScheme=function(){return!!this.scheme_},$.prototype.getUserInfo=function(){return this.userInfo_},$.prototype.setUserInfo=function(e,t){return this.userInfo_=t?$.decodeOrEmpty_(e):e,this},$.prototype.hasUserInfo=function(){return!!this.userInfo_},$.prototype.getDomain=function(){return this.domain_},$.prototype.setDomain=function(e,t){return this.domain_=t?$.decodeOrEmpty_(e,!0):e,this},$.prototype.hasDomain=function(){return!!this.domain_},$.prototype.getPort=function(){return this.port_},$.prototype.setPort=function(e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);this.port_=e}else this.port_=null;return this},$.prototype.hasPort=function(){return null!=this.port_},$.prototype.getPath=function(){return this.path_},$.prototype.setPath=function(e,t){return this.path_=t?$.decodeOrEmpty_(e,!0):e,this},$.prototype.hasPath=function(){return!!this.path_},$.prototype.hasQuery=function(){return""!==this.queryData_.toString()},$.prototype.setQueryData=function(e,t){return e instanceof $.QueryData?this.queryData_=e:(t||(e=$.encodeSpecialChars_(e,$.reDisallowedInQuery_)),this.queryData_=new $.QueryData(e,null)),this},$.prototype.getEncodedQuery=function(){return this.queryData_.toString()},$.prototype.getDecodedQuery=function(){return this.queryData_.toDecodedString()},$.prototype.getQueryData=function(){return this.queryData_},$.prototype.getFragment=function(){return this.fragment_},$.prototype.setFragment=function(e,t){return this.fragment_=t?$.decodeOrEmpty_(e):e,this},$.prototype.hasFragment=function(){return!!this.fragment_},$.removeDotSegments=function(e){if(".."==e||"."==e)return"";if(-1==e.indexOf("./")&&-1==e.indexOf("/."))return e;for(var t=0==e.lastIndexOf("/",0),n=e.split("/"),i=[],r=0;r<n.length;){var a=n[r++];"."==a?t&&r==n.length&&i.push(""):".."==a?((i.length>1||1==i.length&&""!=i[0])&&i.pop(),t&&r==n.length&&i.push("")):(i.push(a),t=!0)}return i.join("/")},$.decodeOrEmpty_=function(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""},$.encodeSpecialChars_=function(e,t,n){if(l.isString(e)){var i=encodeURI(e).replace(t,$.encodeChar_);return n&&(i=$.removeDoubleEncoding_(i)),i}return null},$.encodeChar_=function(e){var t=e.charCodeAt(0);return"%"+(t>>4&15).toString(16)+(15&t).toString(16)},$.removeDoubleEncoding_=function(e){return e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")},$.reDisallowedInSchemeOrUserInfo_=/[#\/\?@]/g,$.reDisallowedInRelativePath_=/[\#\?:]/g,$.reDisallowedInAbsolutePath_=/[\#\?]/g,$.reDisallowedInQuery_=/[\#\?@]/g,$.reDisallowedInFragment_=/#/g,$.QueryData=function(e,t){this.encodedQuery_=e||null},$.QueryData.prototype.ensureKeyMapInitialized_=function(){if(!this.keyMap_&&(this.keyMap_={},this.count_=0,this.encodedQuery_))for(var e=this.encodedQuery_.split("&"),t=0;t<e.length;t++){var n=e[t].indexOf("="),i=null,r=null;n>=0?(i=e[t].substring(0,n),r=e[t].substring(n+1)):i=e[t],i=decodeURIComponent(i.replace(/\+/g," ")),r=r||"",this.add(i,decodeURIComponent(r.replace(/\+/g," ")))}},$.QueryData.prototype.keyMap_=null,$.QueryData.prototype.count_=null,$.QueryData.prototype.getCount=function(){return this.ensureKeyMapInitialized_(),this.count_},$.QueryData.prototype.add=function(e,t){this.ensureKeyMapInitialized_(),this.encodedQuery_=null;var n=this.keyMap_.hasOwnProperty(e)&&this.keyMap_[e];return n||(this.keyMap_[e]=n=[]),n.push(t),this.count_++,this},$.QueryData.prototype.toString=function(){if(this.encodedQuery_)return this.encodedQuery_;if(!this.keyMap_)return"";var e=[];for(var t in this.keyMap_)for(var n=encodeURIComponent(t),i=this.keyMap_[t],r=0;r<i.length;r++){var a=n;""!==i[r]&&(a+="="+encodeURIComponent(i[r])),e.push(a)}return this.encodedQuery_=e.join("&")},$.QueryData.prototype.toDecodedString=function(){return $.decodeOrEmpty_(this.toString())},$.QueryData.prototype.clone=function(){var e=new $.QueryData;if(e.encodedQuery_=this.encodedQuery_,this.keyMap_){var t={};for(var n in this.keyMap_)t[n]=this.keyMap_[n].concat();e.keyMap_=t,e.count_=this.count_}return e};var ae=new M,se=(window.shaka,window.goog,function(e){function t(e){var n;return Q(this,t),(n=te(this,ne(t).call(this))).destroyed_=!1,n.operationManager_=new g,n.requestFilters_=new Set,n.responseFilters_=new Set,n.onProgressUpdated_=e||null,n}return ie(t,A),ee(t,[{key:"registerRequestFilter",value:function(e){this.requestFilters_.add(e)}},{key:"unregisterRequestFilter",value:function(e){this.requestFilters_.delete(e)}},{key:"clearAllRequestFilters",value:function(){this.requestFilters_.clear()}},{key:"registerResponseFilter",value:function(e){this.responseFilters_.add(e)}},{key:"unregisterResponseFilter",value:function(e){this.responseFilters_.delete(e)}},{key:"clearAllResponseFilters",value:function(){this.responseFilters_.clear()}},{key:"destroy",value:function(){return this.destroyed_=!0,this.requestFilters_.clear(),this.responseFilters_.clear(),this.operationManager_.destroy()}},{key:"request",value:function(e,n){var i=this,r=new t.NumBytesRemainingClass;if(this.destroyed_){var a=Promise.reject(new M(M.Severity.CRITICAL,M.Category.PLAYER,M.Code.OPERATION_ABORTED));return a.catch(function(){}),new t.PendingRequest(a,function(){return Promise.resolve()},r)}window.asserts.assert(n.uris&&n.uris.length,"Request without URIs!"),n.method=n.method||"GET",n.headers=n.headers||{},n.retryParameters=n.retryParameters?b.cloneObject(n.retryParameters):t.defaultRetryParameters(),n.uris=b.cloneObject(n.uris);var s=this.filterRequest_(e,n),o=s.chain(function(){return i.makeRequestWithRetry_(e,n,r)}),l=o.chain(function(t){return i.filterResponse_(e,t)}),u=Date.now(),c=0;s.promise.then(function(){c=Date.now()-u},function(){});var d=0;o.promise.then(function(){d=Date.now()},function(){});var h=l.chain(function(n){var r=Date.now()-d,a=n.response;return a.timeMs+=c,a.timeMs+=r,n.gotProgress||!i.onProgressUpdated_||a.fromCache||e!=t.RequestType.SEGMENT||i.onProgressUpdated_(a.timeMs,a.data.byteLength),a},function(e){throw e&&(window.asserts.assert(e instanceof M,"Wrong error type"),e.severity=ae.severity.CRITICAL),e}),f=new t.PendingRequest(h.promise,h.onAbort_,r);return this.operationManager_.manage(f),f}},{key:"filterRequest_",value:function(e,t){var n=B.completed(void 0),i=!0,r=!1,a=void 0;try{for(var s,o=function(){var i=s.value;n=n.chain(function(){return i(e,t)})},l=this.requestFilters_[Symbol.iterator]();!(i=(s=l.next()).done);i=!0)o()}catch(e){r=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(r)throw a}}return n.chain(void 0,function(e){if(e&&e.code==M.Code.OPERATION_ABORTED)throw e;throw new M(M.Severity.CRITICAL,M.Category.NETWORK,M.Code.REQUEST_FILTER_ERROR,e)})}},{key:"makeRequestWithRetry_",value:function(e,t,n){var i=new q(t.retryParameters,!1);return this.send_(e,t,i,0,null,n)}},{key:"send_",value:function(e,n,i,r,a,s){var o=this,l=new $(n.uris[r]),u=l.getScheme(),c=!1;u||(u=t.getLocationProtocol_(),window.asserts.assert(":"==u[u.length-1],"location.protocol expected to end with a colon!"),u=u.slice(0,-1),l.setScheme(u),n.uris[r]=l.toString());var d,h=t.schemes_[u],f=h?h.plugin:null;return f?B.notAbortable(i.attempt()).chain(function(){if(o.destroyed_)return B.aborted();d=Date.now();var i=t.RequestType.SEGMENT;return f(n.uris[r],n,e,function(t,n,r){o.onProgressUpdated_&&e==i&&(o.onProgressUpdated_(t,n),c=!0,s.setBytes(r))})}).chain(function(e){return null==e.timeMs&&(e.timeMs=Date.now()-d),{response:e,gotProgress:c}},function(t){if(o.destroyed_)return B.aborted();if(t.code==ae.code.OPERATION_ABORTED)throw t;if(t.code==ae.code.ATTEMPTS_EXHAUSTED)throw window.asserts.assert(a,"Should have last error"),a;if(t.severity==ae.severity.RECOVERABLE){var l=new E("retry",{error:t instanceof M?t:null});o.dispatchEvent(l),r=(r+1)%n.uris.length;var u=t;return o.send_(e,n,i,r,u,s)}throw t}):B.failed(new M(M.Severity.CRITICAL,M.Category.NETWORK,M.Code.UNSUPPORTED_SCHEME,l))}},{key:"filterResponse_",value:function(e,t){var n=B.completed(void 0),i=!0,r=!1,a=void 0;try{for(var s,o=function(){var i=s.value;n=n.chain(function(){return i(e,t.response)})},l=this.responseFilters_[Symbol.iterator]();!(i=(s=l.next()).done);i=!0)o()}catch(e){r=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(r)throw a}}return n.chain(function(){return t},function(e){if(e&&e.code==M.Code.OPERATION_ABORTED)throw e;var t=M.Severity.CRITICAL;throw e instanceof M&&(t=e.severity),new M(t,M.Category.NETWORK,M.Code.RESPONSE_FILTER_ERROR,e)})}}],[{key:"registerScheme",value:function(e,n,i){window.asserts.assert(null==i||i>0,"explicit priority must be > 0"),i=i||t.PluginPriority.APPLICATION;var r=t.schemes_[e];(!r||i>=r.priority)&&(t.schemes_[e]={priority:i,plugin:n})}},{key:"unregisterScheme",value:function(e){delete t.schemes_[e]}},{key:"defaultRetryParameters",value:function(){return q.defaultRetryParameters()}},{key:"makeRequest",value:function(e,t){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null}}},{key:"getLocationProtocol_",value:function(){return window.location.protocol}}]),t}());se.NumBytesRemainingClass=function(){function e(){Q(this,e),this.bytesToLoad_=0}return ee(e,[{key:"setBytes",value:function(e){this.bytesToLoad_=e}},{key:"getBytes",value:function(){return this.bytesToLoad_}}]),e}(),se.PendingRequest=function(e){function t(e,n,i){var r;return Q(this,t),(r=te(this,ne(t).call(this,e,n))).bytesRemaining_=i,r}return ie(t,B),ee(t,[{key:"getBytesRemaining",value:function(){return this.bytesRemaining_.getBytes()}}]),t}(),se.RequestType={MANIFEST:0,SEGMENT:1,LICENSE:2,APP:3,TIMING:4},se.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:3},se.SchemeObject={},se.schemes_={},se.ResponseAndGotProgress={};var oe=se;function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ue(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka=window.shaka||{};window.shaka;var ce=function(){},de=function(){function e(t,n,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t,this.shortName="",this.iconUri=n,this.manifestUri=i,this.source=r,this.focus=!1,this.disabled=!1,this.extraText=[],this.certificateUri=null,this.description="",this.isFeatured=!1,this.drm=[c.CLEAR],this.features=[],this.licenseServers=new Map,this.licenseRequestHeaders=new Map,this.requestFilter=null,this.responseFilter=null,this.drmCallback=null,this.clearKeys=new Map,this.extraConfig=null,this.storeCallback=ce,this.unstoreCallback=ce,this.storedContent=ce,this.storedProgress=1}var t,n,i;return t=e,i=[{key:"caseLessAlphaComparator_",value:function(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0}},{key:"makeBlankAsset",value:function(){return new e("","","",u.CUSTOM)}},{key:"fromJSON",value:function(t){var n={};for(var i in t){var r=t[i];if(r&&"object"==le(r)&&"map"===r.__type__){var a=new Map;for(var s in r)"__type__"!==s&&a.set(s,r[s]);n[i]=a}else n[i]=r}var o=e.makeBlankAsset();return Object.assign(o,n),o}}],(n=[{key:"addDescription",value:function(e){return this.description=e,this}},{key:"addCertificateUri",value:function(e){return this.certificateUri=e,this}},{key:"addFeature",value:function(t){return this.features.push(t),this.features.sort(e.caseLessAlphaComparator_),this}},{key:"addKeySystem",value:function(t){return 1===this.drm.length&&this.drm[0]===c.CLEAR&&(this.drm=[]),this.drm.push(t),this.drm.sort(e.caseLessAlphaComparator_),this}},{key:"setExtraConfig",value:function(e){return this.extraConfig=e,this}},{key:"setRequestFilter",value:function(e){return this.requestFilter=e,this}},{key:"setResponseFilter",value:function(e){return this.responseFilter=e,this}},{key:"addLicenseServer",value:function(e,t){return this.licenseServers.set(e,t),this}},{key:"addLicenseRequestHeader",value:function(e,t){return this.licenseRequestHeaders.set(e,t),this}},{key:"addExtraText",value:function(e){return this.extraText.push(e),this}},{key:"markAsFocused",value:function(){return this.focus=!0,this}},{key:"markAsFeatured",value:function(e){return this.isFeatured=!0,this.shortName=e||this.shortName,this}},{key:"markAsDisabled",value:function(){return this.disabled=!0,this}},{key:"toJSON",value:function(){var e={};for(var t in this){var n=this[t];if(n instanceof Map){var i={__type__:"map"},r=!0,a=!1,s=void 0;try{for(var o,l=n.entries()[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var u=o.value;i[u[0]]=u[1]}}catch(e){a=!0,s=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw s}}e[t]=i}else e[t]=n}return e}},{key:"applyFilters",value:function(e){var t=this;if(e.clearAllRequestFilters(),e.clearAllResponseFilters(),this.licenseRequestHeaders.size){e.registerRequestFilter(function(e,n){return t.addLicenseRequestHeaders_(t.licenseRequestHeaders,e,n)})}this.requestFilter&&e.registerRequestFilter(this.requestFilter),this.responseFilter&&e.registerResponseFilter(this.responseFilter)}},{key:"getConfiguration",value:function(){var e={drm:{},manifest:{dash:{}}};if(this.licenseServers.size&&(e.drm.servers={},this.licenseServers.forEach(function(t,n){e.drm.servers[n]=t})),this.drmCallback&&(e.manifest.dash.customScheme=this.drmCallback),this.clearKeys.size&&(e.drm.clearKeys={},this.clearKeys.forEach(function(t,n){e.drm.clearKeys[n]=t})),this.extraConfig)for(var t in this.extraConfig)e[t]=this.extraConfig[t];return e}},{key:"addLicenseRequestHeaders_",value:function(e,t,n){t===oe.RequestType.LICENSE&&e.forEach(function(e,t){n.headers[t]=e})}},{key:"isStored",value:function(){return null!=this.storedContent}}])&&ue(t.prototype,n),i&&ue(t,i),e}();window.shaka=window.shaka||{};var he=window.shaka,fe={};fe.Source=u,fe.Feature=d,fe.KeySystem=c,fe.ExtraText={},fe.lastUplynkPrefix="",fe.UplynkResponseFilter=function(e,t){e===oe.RequestType.MANIFEST&&(t.headers["x-uplynk-prefix"]?fe.lastUplynkPrefix=t.headers["x-uplynk-prefix"]:fe.lastUplynkPrefix="")},fe.UplynkRequestFilter=function(e,t){e===he.net.NetworkingEngine.RequestType.LICENSE&&(t.uris[0].includes("wv")&&fe.lastUplynkPrefix?t.uris[0]=fe.lastUplynkPrefix.concat("/wv"):t.uris[0].includes("ck")&&fe.lastUplynkPrefix?t.uris[0]=fe.lastUplynkPrefix.concat("/ck"):t.uris[0].includes("pr")&&fe.lastUplynkPrefix&&(t.uris[0]=fe.lastUplynkPrefix.concat("/pr")))},fe.testAssets=[new de("Big Buck Bunny: the Dark Truths of a Video Dev Cartoon (DASH)","https://storage.googleapis.com/shaka-asset-icons/dark_truth.png","https://storage.googleapis.com/shaka-demo-assets/bbb-dark-truths/dash.mpd",u.SHAKA).addFeature(d.DASH).addFeature(d.HIGH_DEFINITION).addFeature(d.MP4).addFeature(d.WEBM).addFeature(d.OFFLINE),new de("Big Buck Bunny: the Dark Truths of a Video Dev Cartoon (HLS)","https://storage.googleapis.com/shaka-asset-icons/dark_truth.png","https://storage.googleapis.com/shaka-demo-assets/bbb-dark-truths-hls/hls.m3u8",u.SHAKA).addDescription("A serious documentary about a problem plaguing video developers.").markAsFeatured("Big Buck Bunny: the Dark Truths").addFeature(d.HLS).addFeature(d.HIGH_DEFINITION).addFeature(d.MP4).addFeature(d.OFFLINE),new de("Angel One (multicodec, multilingual)","https://storage.googleapis.com/shaka-asset-icons/angel_one.png","https://storage.googleapis.com/shaka-demo-assets/angel-one/dash.mpd",u.SHAKA).addDescription("A clip from a classic Star Trek TNG episode, presented in MPEG-DASH.").markAsFeatured("Angel One").addFeature(d.DASH).addFeature(d.MP4).addFeature(d.MULTIPLE_LANGUAGES).addFeature(d.SUBTITLES).addFeature(d.WEBM).addFeature(d.WEBVTT).addFeature(d.OFFLINE),new de("Angel One (multicodec, multilingual, Widevine)","https://storage.googleapis.com/shaka-asset-icons/angel_one.png","https://storage.googleapis.com/shaka-demo-assets/angel-one-widevine/dash.mpd",u.SHAKA).addKeySystem(c.WIDEVINE).addFeature(d.DASH).addFeature(d.MP4).addFeature(d.MULTIPLE_LANGUAGES).addFeature(d.SUBTITLES).addFeature(d.MULTIKEY).addFeature(d.WEBM).addFeature(d.WEBVTT).addFeature(d.OFFLINE).addLicenseServer("com.widevine.alpha","https://cwip-shaka-proxy.appspot.com/no_auth"),new de("Angel One (multicodec, multilingual, ClearKey server)","https://storage.googleapis.com/shaka-asset-icons/angel_one.png","https://storage.googleapis.com/shaka-demo-assets/angel-one-clearkey/dash.mpd",u.SHAKA).addKeySystem(c.CLEAR_KEY).addFeature(d.DASH).addFeature(d.MP4).addFeature(d.MULTIPLE_LANGUAGES).addFeature(d.SUBTITLES).addFeature(d.WEBM).addFeature(d.WEBVTT).addFeature(d.OFFLINE).addLicenseServer("org.w3.clearkey","https://cwip-shaka-proxy.appspot.com/clearkey?_u3wDe7erb7v8Lqt8A3QDQ=ABEiM0RVZneImaq7zN3u_w"),new de("Angel One (HLS, MP4, multilingual)","https://storage.googleapis.com/shaka-asset-icons/angel_one.png","https://storage.googleapis.com/shaka-demo-assets/angel-one-hls/hls.m3u8",u.SHAKA).addFeature(d.HLS).addFeature(d.MP4).addFeature(d.MULTIPLE_LANGUAGES).addFeature(d.SUBTITLES).addFeature(d.SURROUND).addFeature(d.WEBVTT).addFeature(d.OFFLINE),new de("Angel One (HLS, MP4, multilingual, Widevine)","https://storage.googleapis.com/shaka-asset-icons/angel_one.png","https://storage.googleapis.com/shaka-demo-assets/angel-one-widevine-hls/hls.m3u8",u.SHAKA).addKeySystem(c.WIDEVINE).addFeature(d.HLS).addFeature(d.MP4).addFeature(d.MULTIPLE_LANGUAGES).addFeature(d.SUBTITLES).addFeature(d.SURROUND).addFeature(d.MULTIKEY).addFeature(d.WEBVTT).addFeature(d.OFFLINE).addLicenseServer("com.widevine.alpha","https://cwip-shaka-proxy.appspot.com/no_auth"),new de("Sintel 4k (multicodec)","https://storage.googleapis.com/shaka-asset-icons/sintel.png","https://storage.googleapis.com/shaka-demo-assets/sintel/dash.mpd",u.SHAKA).addFeature(d.DASH).addFeature(d.HIGH_DEFINITION).addFeature(d.MP4).addFeature(d.SUBTITLES).addFeature(d.ULTRA_HIGH_DEFINITION).addFeature(d.WEBM).addFeature(d.WEBVTT).addFeature(d.OFFLINE),new de("Sintel w/ trick mode (MP4 only, 720p)","https://storage.googleapis.com/shaka-asset-icons/sintel.png","https://storage.googleapis.com/shaka-demo-assets/sintel-trickplay/dash.mpd",u.SHAKA).addFeature(d.DASH).addFeature(d.MP4).addFeature(d.SUBTITLES).addFeature(d.TRICK_MODE).addFeature(d.WEBVTT).addFeature(d.OFFLINE),new de("Sintel 4k (WebM only)","https://storage.googleapis.com/shaka-asset-icons/sintel.png","https://storage.googleapis.com/shaka-demo-assets/sintel-webm-only/dash.mpd",u.SHAKA).addFeature(d.DASH).addFeature(d.HIGH_DEFINITION).addFeature(d.SUBTITLES).addFeature(d.ULTRA_HIGH_DEFINITION).addFeature(d.WEBM).addFeature(d.WEBVTT).addFeature(d.OFFLINE),new de("Sintel 4k (MP4 only)","https://storage.googleapis.com/shaka-asset-icons/sintel.png","https://storage.googleapis.com/shaka-demo-assets/sintel-mp4-only/dash.mpd",u.SHAKA).addFeature(d.DASH).addFeature(d.HIGH_DEFINITION).addFeature(d.MP4).addFeature(d.SUBTITLES).addFeature(d.ULTRA_HIGH_DEFINITION).addFeature(d.WEBVTT).addFeature(d.OFFLINE),new de("Sintel 4k (multicodec, Widevine)","https://storage.googleapis.com/shaka-asset-icons/sintel.png","https://storage.googleapis.com/shaka-demo-assets/sintel-widevine/dash.mpd",u.SHAKA).addDescription("A Blender Foundation short film, protected by Widevine encryption.").markAsFeatured("Sintel").addKeySystem(c.WIDEVINE).addFeature(d.DASH).addFeature(d.HIGH_DEFINITION).addFeature(d.MP4).addFeature(d.MULTIKEY).addFeature(d.SUBTITLES).addFeature(d.ULTRA_HIGH_DEFINITION).addFeature(d.WEBM).addFeature(d.WEBVTT).addFeature(d.OFFLINE).addLicenseServer("com.widevine.alpha","https://cwip-shaka-proxy.appspot.com/no_auth"),new de("Sintel 4k (multicodec, VTT in MP4)","https://storage.googleapis.com/shaka-asset-icons/sintel.png","https://storage.googleapis.com/shaka-demo-assets/sintel-mp4-wvtt/dash.mpd",u.SHAKA).addFeature(d.DASH).addFeature(d.HIGH_DEFINITION).addFeature(d.MP4).addFeature(d.SUBTITLES).addFeature(d.ULTRA_HIGH_DEFINITION).addFeature(d.WEBVTT).addFeature(d.OFFLINE),new de("Sintel w/ 44 subtitle languages","https://storage.googleapis.com/shaka-asset-icons/sintel.png","https://storage.googleapis.com/shaka-demo-assets/sintel-many-subs/dash.mpd",u.SHAKA).addFeature(d.DASH).addFeature(d.MP4).addFeature(d.SUBTITLES).addFeature(d.SURROUND).addFeature(d.WEBVTT).addFeature(d.OFFLINE),new de("Heliocentrism (multicodec, multiperiod)","https://storage.googleapis.com/shaka-asset-icons/heliocentricism.png","https://storage.googleapis.com/shaka-demo-assets/heliocentrism/heliocentrism.mpd",u.SHAKA).addFeature(d.DASH).addFeature(d.MP4).addFeature(d.MULTIPERIOD).addFeature(d.WEBM).addFeature(d.OFFLINE),new de("Heliocentrism (multicodec, multiperiod, xlink)","https://storage.googleapis.com/shaka-asset-icons/heliocentricism.png","https://storage.googleapis.com/shaka-demo-assets/heliocentrism-xlink/heliocentrism.mpd",u.SHAKA).addFeature(d.DASH).addFeature(d.MP4).addFeature(d.MULTIPERIOD).addFeature(d.WEBM).addFeature(d.XLINK).addFeature(d.OFFLINE),new de('"Dig the Uke" by Stefan Kartenberg (audio only, multicodec)',"https://storage.googleapis.com/shaka-asset-icons/audio_only.png","https://storage.googleapis.com/shaka-demo-assets/dig-the-uke-clear/dash.mpd",u.SHAKA).addDescription("An audio-only presentation performed by Stefan Kartenberg.").markAsFeatured("Dig the Uke").addFeature(d.DASH).addFeature(d.MP4).addFeature(d.AUDIO_ONLY).addFeature(d.WEBM).addFeature(d.OFFLINE),new de('"Dig the Uke" by Stefan Kartenberg (audio only, multicodec, Widevine)',"https://storage.googleapis.com/shaka-asset-icons/audio_only.png","https://storage.googleapis.com/shaka-demo-assets/dig-the-uke/dash.mpd",u.SHAKA).addKeySystem(c.WIDEVINE).addFeature(d.DASH).addFeature(d.MP4).addFeature(d.AUDIO_ONLY).addFeature(d.WEBM).addFeature(d.OFFLINE).addLicenseServer("com.widevine.alpha","https://cwip-shaka-proxy.appspot.com/no_auth"),new de("Tears of Steel (multicodec, TTML)","https://storage.googleapis.com/shaka-asset-icons/tears_of_steel.png","https://storage.googleapis.com/shaka-demo-assets/tos-ttml/dash.mpd",u.SHAKA).addFeature(d.DASH).addFeature(d.HIGH_DEFINITION).addFeature(d.MP4).addFeature(d.SUBTITLES).addFeature(d.TTML).addFeature(d.WEBM).addFeature(d.OFFLINE),new de("Tears of Steel (multicodec, surround + stereo)","https://storage.googleapis.com/shaka-asset-icons/tears_of_steel.png","https://storage.googleapis.com/shaka-demo-assets/tos-surround/dash.mpd",u.SHAKA).addFeature(d.DASH).addFeature(d.MP4).addFeature(d.SURROUND).addFeature(d.WEBM).addFeature(d.OFFLINE),new de("Shaka Player History (multicodec, live, DASH)","https://storage.googleapis.com/shaka-asset-icons/shaka.png","https://storage.googleapis.com/shaka-live-assets/player-source.mpd",u.SHAKA).addFeature(d.DASH).addFeature(d.HIGH_DEFINITION).addFeature(d.LIVE).addFeature(d.MP4).addFeature(d.WEBM),new de("Shaka Player History (live, HLS)","https://storage.googleapis.com/shaka-asset-icons/shaka.png","https://storage.googleapis.com/shaka-live-assets/player-source.m3u8",u.SHAKA).addDescription("A self-indulgent HLS livestream.").markAsFeatured("Shaka Player History").addFeature(d.HIGH_DEFINITION).addFeature(d.HLS).addFeature(d.LIVE).addFeature(d.MP4),new de("Multi-DRM","https://storage.googleapis.com/shaka-asset-icons/tears_of_steel.png","https://media.axprod.net/TestVectors/v7-MultiDRM-SingleKey/Manifest.mpd",u.AXINOM).addKeySystem(c.PLAYREADY).addKeySystem(c.WIDEVINE).addFeature(d.DASH).addFeature(d.HIGH_DEFINITION).addFeature(d.MP4).addFeature(d.MULTIPLE_LANGUAGES).addFeature(d.SUBTITLES).addFeature(d.TTML).addFeature(d.ULTRA_HIGH_DEFINITION).addFeature(d.WEBVTT).addLicenseServer("com.widevine.alpha","https://drm-widevine-licensing.axtest.net/AcquireLicense").addLicenseServer("com.microsoft.playready","https://drm-playready-licensing.axtest.net/AcquireLicense").addLicenseRequestHeader("X-AxDRM-Message","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ2ZXJzaW9uIjoxLCJjb21fa2V5X2lkIjoiYjMzNjRlYjUtNTFmNi00YWUzLThjOTgtMzNjZWQ1ZTMxYzc4IiwibWVzc2FnZSI6eyJ0eXBlIjoiZW50aXRsZW1lbnRfbWVzc2FnZSIsImtleXMiOlt7ImlkIjoiOWViNDA1MGQtZTQ0Yi00ODAyLTkzMmUtMjdkNzUwODNlMjY2IiwiZW5jcnlwdGVkX2tleSI6ImxLM09qSExZVzI0Y3Iya3RSNzRmbnc9PSJ9XX19.4lWwW46k-oWcah8oN18LPj5OLS5ZU-_AQv7fe0JhNjA"),new de("Multi-DRM, multi-key","https://storage.googleapis.com/shaka-asset-icons/tears_of_steel.png","https://media.axprod.net/TestVectors/v7-MultiDRM-MultiKey/Manifest.mpd",u.AXINOM).addKeySystem(c.PLAYREADY).addKeySystem(c.WIDEVINE).addFeature(d.DASH).addFeature(d.HIGH_DEFINITION).addFeature(d.MP4).addFeature(d.MULTIPLE_LANGUAGES).addFeature(d.MULTIKEY).addFeature(d.SUBTITLES).addFeature(d.TTML).addFeature(d.ULTRA_HIGH_DEFINITION).addFeature(d.WEBVTT).addLicenseServer("com.widevine.alpha","https://drm-widevine-licensing.axtest.net/AcquireLicense").addLicenseServer("com.microsoft.playready","https://drm-playready-licensing.axtest.net/AcquireLicense").addLicenseRequestHeader("X-AxDRM-Message","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ2ZXJzaW9uIjoxLCJjb21fa2V5X2lkIjoiYjMzNjRlYjUtNTFmNi00YWUzLThjOTgtMzNjZWQ1ZTMxYzc4IiwibWVzc2FnZSI6eyJ0eXBlIjoiZW50aXRsZW1lbnRfbWVzc2FnZSIsImtleXMiOlt7ImlkIjoiODAzOTliZjUtOGEyMS00MDE0LTgwNTMtZTI3ZTc0OGU5OGMwIiwiZW5jcnlwdGVkX2tleSI6ImxpTkpxVmFZa05oK01LY3hKRms3SWc9PSJ9LHsiaWQiOiI5MDk1M2UwOS02Y2IyLTQ5YTMtYTI2MC03YTVmZWZlYWQ0OTkiLCJlbmNyeXB0ZWRfa2V5Ijoia1l0SEh2cnJmQ01lVmRKNkxrYmtuZz09In0seyJpZCI6IjBlNGRhOTJiLWQwZTgtNGE2Ni04YzNmLWMyNWE5N2ViNjUzMiIsImVuY3J5cHRlZF9rZXkiOiI3dzdOWkhITE1nSjRtUUtFSzVMVE1RPT0ifSx7ImlkIjoiNTg1ZjIzM2YtMzA3Mi00NmYxLTlmYTQtNmRjMjJjNjZhMDE0IiwiZW5jcnlwdGVkX2tleSI6IkFjNFVVbVl0Qko1blBROU4xNXJjM2c9PSJ9LHsiaWQiOiI0MjIyYmQ3OC1iYzQ1LTQxYmYtYjYzZS02ZjgxNGRjMzkxZGYiLCJlbmNyeXB0ZWRfa2V5IjoiTzZGTzBmcVNXb3BwN2JqYy9ENGxNQT09In1dfX0.uF6YlKAREOmbniAeYiH070HSJhV0YS7zSKjlCtiDR5Y"),new de("Multi-DRM, multi-key, multi-Period","https://storage.googleapis.com/shaka-asset-icons/tears_of_steel.png","https://media.axprod.net/TestVectors/v7-MultiDRM-MultiKey-MultiPeriod/Manifest.mpd",u.AXINOM).addKeySystem(c.PLAYREADY).addKeySystem(c.WIDEVINE).addFeature(d.DASH).addFeature(d.HIGH_DEFINITION).addFeature(d.MP4).addFeature(d.MULTIPLE_LANGUAGES).addFeature(d.SUBTITLES).addFeature(d.MULTIKEY).addFeature(d.MULTIPERIOD).addFeature(d.TTML).addFeature(d.ULTRA_HIGH_DEFINITION).addFeature(d.WEBVTT).addLicenseServer("com.widevine.alpha","https://drm-widevine-licensing.axtest.net/AcquireLicense").addLicenseServer("com.microsoft.playready","https://drm-playready-licensing.axtest.net/AcquireLicense").addLicenseRequestHeader("X-AxDRM-Message","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ2ZXJzaW9uIjoxLCJjb21fa2V5X2lkIjoiYjMzNjRlYjUtNTFmNi00YWUzLThjOTgtMzNjZWQ1ZTMxYzc4IiwibWVzc2FnZSI6eyJ0eXBlIjoiZW50aXRsZW1lbnRfbWVzc2FnZSIsImtleXMiOlt7ImlkIjoiMDg3Mjc4NmUtZjllNy00NjVmLWEzYTItNGU1YjBlZjhmYTQ1IiwiZW5jcnlwdGVkX2tleSI6IlB3NitlRVlOY3ZqWWJmc2gzWDNmbWc9PSJ9LHsiaWQiOiJjMTRmMDcwOS1mMmI5LTQ0MjctOTE2Yi02MWI1MjU4NjUwNmEiLCJlbmNyeXB0ZWRfa2V5IjoiLzErZk5paDM4bXFSdjR5Y1l6bnQvdz09In0seyJpZCI6IjhiMDI5ZTUxLWQ1NmEtNDRiZC05MTBmLWQ0YjVmZDkwZmJhMiIsImVuY3J5cHRlZF9rZXkiOiJrcTBKdVpFanBGTjhzYVRtdDU2ME9nPT0ifSx7ImlkIjoiMmQ2ZTkzODctNjBjYS00MTQ1LWFlYzItYzQwODM3YjRiMDI2IiwiZW5jcnlwdGVkX2tleSI6IlRjUlFlQld4RW9IT0tIcmFkNFNlVlE9PSJ9LHsiaWQiOiJkZTAyZjA3Zi1hMDk4LTRlZTAtYjU1Ni05MDdjMGQxN2ZiYmMiLCJlbmNyeXB0ZWRfa2V5IjoicG9lbmNTN0dnbWVHRmVvSjZQRUFUUT09In0seyJpZCI6IjkxNGU2OWY0LTBhYjMtNDUzNC05ZTlmLTk4NTM2MTVlMjZmNiIsImVuY3J5cHRlZF9rZXkiOiJlaUkvTXNsbHJRNHdDbFJUL0xObUNBPT0ifSx7ImlkIjoiZGE0NDQ1YzItZGI1ZS00OGVmLWIwOTYtM2VmMzQ3YjE2YzdmIiwiZW5jcnlwdGVkX2tleSI6IjJ3K3pkdnFycERWM3hSMGJKeTR1Z3c9PSJ9LHsiaWQiOiIyOWYwNWU4Zi1hMWFlLTQ2ZTQtODBlOS0yMmRjZDQ0Y2Q3YTEiLCJlbmNyeXB0ZWRfa2V5IjoiL3hsU0hweHdxdTNnby9nbHBtU2dhUT09In0seyJpZCI6IjY5ZmU3MDc3LWRhZGQtNGI1NS05NmNkLWMzZWRiMzk5MTg1MyIsImVuY3J5cHRlZF9rZXkiOiJ6dTZpdXpOMnBzaTBaU3hRaUFUa1JRPT0ifV19fQ.BXr93Et1krYMVs-CUnf7F3ywJWFRtxYdkR7Qn4w3-to"),new de("Clear, single-Period","https://storage.googleapis.com/shaka-asset-icons/tears_of_steel.png","https://media.axprod.net/TestVectors/v7-Clear/Manifest.mpd",u.AXINOM).addFeature(d.DASH).addFeature(d.HIGH_DEFINITION).addFeature(d.MP4).addFeature(d.MULTIPLE_LANGUAGES).addFeature(d.TTML).addFeature(d.SUBTITLES).addFeature(d.ULTRA_HIGH_DEFINITION).addFeature(d.WEBVTT).addFeature(d.OFFLINE),new de("Clear, multi-Period","https://storage.googleapis.com/shaka-asset-icons/tears_of_steel.png","https://media.axprod.net/TestVectors/v7-Clear/Manifest_MultiPeriod.mpd",u.AXINOM).addFeature(d.DASH).addFeature(d.HIGH_DEFINITION).addFeature(d.MP4).addFeature(d.MULTIPLE_LANGUAGES).addFeature(d.MULTIPERIOD).addFeature(d.TTML).addFeature(d.SUBTITLES).addFeature(d.ULTRA_HIGH_DEFINITION).addFeature(d.WEBVTT).addFeature(d.OFFLINE),new de("Clear, Live DASH","https://storage.googleapis.com/shaka-asset-icons/axinom_test.png","https://akamai-axtest.akamaized.net/routes/lapd-v1-acceptance/www_c4/Manifest.mpd",u.AXINOM).addFeature(d.LIVE).addFeature(d.MP4).addFeature(d.DASH).addFeature(d.MULTIPERIOD).addFeature(d.HIGH_DEFINITION).addFeature(d.WEBVTT),new de("Clear, Live HLS","https://storage.googleapis.com/shaka-asset-icons/axinom_test.png","https://akamai-axtest.akamaized.net/routes/lapd-v1-acceptance/www_c4/Manifest.m3u8",u.AXINOM).addFeature(d.HLS).addFeature(d.LIVE).addFeature(d.MP4).addFeature(d.HIGH_DEFINITION),new de("Tears of Steel","https://storage.googleapis.com/shaka-asset-icons/tears_of_steel.png","https://demo.unified-streaming.com/video/tears-of-steel/tears-of-steel.ism/.mpd",u.UNIFIED_STREAMING).addFeature(d.DASH).addFeature(d.HIGH_DEFINITION).addFeature(d.MP4).addFeature(d.OFFLINE),new de("Tears of Steel (Widevine)","https://storage.googleapis.com/shaka-asset-icons/tears_of_steel.png","https://demo.unified-streaming.com/video/tears-of-steel/tears-of-steel-dash-widevine.ism/.mpd",u.UNIFIED_STREAMING).addKeySystem(c.WIDEVINE).addFeature(d.DASH).addFeature(d.HIGH_DEFINITION).addFeature(d.MP4).addFeature(d.SUBTITLES).addFeature(d.TTML).addLicenseServer("com.widevine.alpha","https://cwip-shaka-proxy.appspot.com/no_auth"),new de("Tears of Steel (PlayReady)","https://storage.googleapis.com/shaka-asset-icons/tears_of_steel.png","https://demo.unified-streaming.com/video/tears-of-steel/tears-of-steel-dash-playready.ism/.mpd",u.UNIFIED_STREAMING).addKeySystem(c.PLAYREADY).addFeature(d.DASH).addFeature(d.HIGH_DEFINITION).addFeature(d.MP4).addFeature(d.SUBTITLES).addFeature(d.TTML).addLicenseServer("com.microsoft.playready","https://test.playready.microsoft.com/service/rightsmanager.asmx?PlayRight=1&UseSimpleNonPersistentLicense=1"),new de("Tears of Steel (subtitles)","https://storage.googleapis.com/shaka-asset-icons/tears_of_steel.png","https://demo.unified-streaming.com/video/tears-of-steel/tears-of-steel-en.ism/.mpd",u.UNIFIED_STREAMING).addFeature(d.DASH).addFeature(d.HIGH_DEFINITION).addFeature(d.MP4).addFeature(d.SUBTITLES).addFeature(d.TTML).addFeature(d.OFFLINE),new de("Big Buck Bunny (DASH-IF)","https://storage.googleapis.com/shaka-asset-icons/big_buck_bunny.png","https://dash.akamaized.net/dash264/TestCases/1c/qualcomm/2/MultiRate.mpd",u.DASH_IF).addFeature(d.MP4).addFeature(d.DASH).addFeature(d.HIGH_DEFINITION).addFeature(d.OFFLINE),new de("Live sim (2s segments)","https://storage.googleapis.com/shaka-asset-icons/dash_if_test_pattern.png","https://livesim.dashif.org/livesim/utc_head/testpic_2s/Manifest.mpd",u.DASH_IF).addFeature(d.LIVE).addFeature(d.MP4).addFeature(d.DASH),new de("Live sim SegmentTimeline w $Time$ (6s segments)","https://storage.googleapis.com/shaka-asset-icons/dash_if_test_pattern.png","https://livesim.dashif.org/livesim/segtimeline_1/utc_head/testpic_6s/Manifest.mpd",u.DASH_IF).addFeature(d.DASH).addFeature(d.LIVE).addFeature(d.MP4),new de("Live sim SegmentTimeline w $Number$ (6s segments)","https://storage.googleapis.com/shaka-asset-icons/dash_if_test_pattern.png","https://livesim.dashif.org/livesim/segtimelinenr_1/utc_head/testpic_6s/Manifest.mpd",u.DASH_IF).addFeature(d.DASH).addFeature(d.LIVE).addFeature(d.MP4),new de("Live sim SegmentTimeline StartOver [-20s, +20s] (2s segments)","https://storage.googleapis.com/shaka-asset-icons/dash_if_test_pattern.png","https://livesim.dashif.org/livesim/segtimeline_1/startrel_-20/stoprel_20/timeoffset_0/testpic_2s/Manifest.mpd",u.DASH_IF).addFeature(d.DASH).addFeature(d.MP4),new de("Live sim StartOver SegTmpl Duration [-20s, +20s] (2s segments)","https://storage.googleapis.com/shaka-asset-icons/dash_if_test_pattern.png","https://livesim.dashif.org/livesim/startrel_-20/stoprel_20/timeoffset_0/testpic_2s/Manifest.mpd",u.DASH_IF).addFeature(d.DASH).addFeature(d.MP4),new de("Live sim SegTmpl Duration (multi-period 60s)","https://storage.googleapis.com/shaka-asset-icons/dash_if_test_pattern.png","https://livesim.dashif.org/livesim/utc_head/periods_60/testpic_2s/Manifest.mpd",u.DASH_IF).addFeature(d.DASH).addFeature(d.LIVE).addFeature(d.MP4).addFeature(d.MULTIPERIOD),new de("Live sim TTML Image Subtitles embedded (VoD)","https://storage.googleapis.com/shaka-asset-icons/dash_if_test_pattern.png","https://livesim.dashif.org/dash/vod/testpic_2s/img_subs.mpd",u.DASH_IF).addFeature(d.DASH).addFeature(d.SUBTITLES).addFeature(d.MP4).addFeature(d.TTML),new de("Big Buck Bunny (Live)","https://storage.googleapis.com/shaka-asset-icons/big_buck_bunny.png","https://wowzaec2demo.streamlock.net/live/bigbuckbunny/manifest_mpm4sav_mvtime.mpd",u.WOWZA).addFeature(d.DASH).addFeature(d.LIVE).addFeature(d.MP4),new de("Art of Motion (DASH)","https://storage.googleapis.com/shaka-asset-icons/art_of_motion.png","https://bitdash-a.akamaihd.net/content/MI201109210084_1/mpds/f08e80da-bf1d-4e3d-8899-f0f6155f6efa.mpd",u.BITCODIN).addFeature(d.DASH).addFeature(d.HIGH_DEFINITION).addFeature(d.MP4).addFeature(d.OFFLINE),new de("Art of Motion (HLS, TS)","https://storage.googleapis.com/shaka-asset-icons/art_of_motion.png","https://bitdash-a.akamaihd.net/content/MI201109210084_1/m3u8s/f08e80da-bf1d-4e3d-8899-f0f6155f6efa.m3u8",u.BITCODIN).markAsDisabled().addFeature(d.HIGH_DEFINITION).addFeature(d.HLS).addFeature(d.MP2TS).addFeature(d.OFFLINE),new de("Sintel (HLS, TS, 4k)","https://storage.googleapis.com/shaka-asset-icons/sintel.png","https://bitdash-a.akamaihd.net/content/sintel/hls/playlist.m3u8",u.BITCODIN).markAsDisabled().addFeature(d.HIGH_DEFINITION).addFeature(d.HLS).addFeature(d.MP2TS).addFeature(d.OFFLINE),new de("Big Buck Bunny (Nimble)","https://storage.googleapis.com/shaka-asset-icons/big_buck_bunny.png","https://video.wmspanel.com/local/raw/BigBuckBunny_320x180.mp4/manifest.mpd",u.NIMBLE_STREAMER).markAsDisabled().addFeature(d.DASH).addFeature(d.MP4).addFeature(d.HIGH_DEFINITION),new de("Azure Trailer","https://storage.googleapis.com/shaka-asset-icons/azure.png","https://amssamples.streaming.mediaservices.windows.net/91492735-c523-432b-ba01-faba6c2206a2/AzureMediaServicesPromo.ism/manifest(format=mpd-time-csf)",u.AZURE_MEDIA_SERVICES).addFeature(d.DASH).addFeature(d.MP4).addFeature(d.HIGH_DEFINITION).addFeature(d.OFFLINE),new de("Big Buck Bunny (Azure)","https://storage.googleapis.com/shaka-asset-icons/big_buck_bunny.png","https://amssamples.streaming.mediaservices.windows.net/622b189f-ec39-43f2-93a2-201ac4e31ce1/BigBuckBunny.ism/manifest(format=mpd-time-csf)",u.AZURE_MEDIA_SERVICES).addKeySystem(c.PLAYREADY).addKeySystem(c.WIDEVINE).addFeature(d.DASH).addFeature(d.HIGH_DEFINITION).addFeature(d.MP4).addFeature(d.OFFLINE).addLicenseServer("com.widevine.alpha","https://amssamples.keydelivery.mediaservices.windows.net/Widevine/?KID=1ab45440-532c-4399-94dc-5c5ad9584bac").addLicenseServer("com.microsoft.playready","https://amssamples.keydelivery.mediaservices.windows.net/PlayReady/"),new de("Tears of Steel (external text)","https://storage.googleapis.com/shaka-asset-icons/tears_of_steel.png","https://ams-samplescdn.streaming.mediaservices.windows.net/11196e3d-2f40-4835-9a4d-fc52751b0323/TearsOfSteel_WAMEH264SmoothStreaming720p.ism/manifest(format=mpd-time-csf)",u.AZURE_MEDIA_SERVICES).addFeature(d.DASH).addFeature(d.MP4).addFeature(d.SUBTITLES).addFeature(d.WEBVTT).addFeature(d.OFFLINE).addExtraText({uri:"https://ams-samplescdn.streaming.mediaservices.windows.net/11196e3d-2f40-4835-9a4d-fc52751b0323/TOS-en.vtt",language:"en",kind:"subtitle",mime:"text/vtt"}).addExtraText({uri:"https://ams-samplescdn.streaming.mediaservices.windows.net/11196e3d-2f40-4835-9a4d-fc52751b0323/TOS-es.vtt",language:"es",kind:"subtitle",mime:"text/vtt"}).addExtraText({uri:"https://ams-samplescdn.streaming.mediaservices.windows.net/11196e3d-2f40-4835-9a4d-fc52751b0323/TOS-fr.vtt",language:"fr",kind:"subtitle",mime:"text/vtt"}),new de("live profile","https://storage.googleapis.com/shaka-asset-icons/sintel.png","https://download.tsi.telecom-paristech.fr/gpac/DASH_CONFORMANCE/TelecomParisTech/mp4-live/mp4-live-mpd-AV-BS.mpd",u.GPAC).markAsDisabled().addFeature(d.DASH).addFeature(d.MP4),new de("live profile with five periods","https://storage.googleapis.com/shaka-asset-icons/gpac_test_pattern.png","https://download.tsi.telecom-paristech.fr/gpac/DASH_CONFORMANCE/TelecomParisTech/mp4-live-periods/mp4-live-periods-mpd.mpd",u.GPAC).addFeature(d.DASH).addFeature(d.MP4).addFeature(d.MULTIPERIOD).addFeature(d.HIGH_DEFINITION).addFeature(d.OFFLINE),new de("main profile, single file","https://storage.googleapis.com/shaka-asset-icons/gpac_test_pattern.png","https://download.tsi.telecom-paristech.fr/gpac/DASH_CONFORMANCE/TelecomParisTech/mp4-main-single/mp4-main-single-mpd-AV-NBS.mpd",u.GPAC).addFeature(d.DASH).addFeature(d.MP4).addFeature(d.HIGH_DEFINITION).addFeature(d.OFFLINE),new de("main profile, multiple files","https://storage.googleapis.com/shaka-asset-icons/gpac_test_pattern.png","https://download.tsi.telecom-paristech.fr/gpac/DASH_CONFORMANCE/TelecomParisTech/mp4-main-multi/mp4-main-multi-mpd-AV-BS.mpd",u.GPAC).markAsDisabled().addFeature(d.DASH).addFeature(d.MP4),new de("onDemand profile","https://storage.googleapis.com/shaka-asset-icons/gpac_test_pattern.png","https://download.tsi.telecom-paristech.fr/gpac/DASH_CONFORMANCE/TelecomParisTech/mp4-onDemand/mp4-onDemand-mpd-AV.mpd",u.GPAC).addFeature(d.DASH).addFeature(d.MP4).addFeature(d.HIGH_DEFINITION).addFeature(d.OFFLINE),new de("main profile, open GOP","https://storage.googleapis.com/shaka-asset-icons/gpac_test_pattern.png","https://download.tsi.telecom-paristech.fr/gpac/DASH_CONFORMANCE/TelecomParisTech/mp4-main-ogop/mp4-main-ogop-mpd-AV-BS.mpd",u.GPAC).markAsDisabled().addFeature(d.DASH).addFeature(d.MP4),new de("full profile, gradual decoding refresh","https://storage.googleapis.com/shaka-asset-icons/gpac_test_pattern.png","https://download.tsi.telecom-paristech.fr/gpac/DASH_CONFORMANCE/TelecomParisTech/mp4-full-gdr/mp4-full-gdr-mpd-AV-BS.mpd",u.GPAC).markAsDisabled().addFeature(d.DASH).addFeature(d.MP4),new de("Multi DRM - 8 Byte IV","https://storage.googleapis.com/shaka-asset-icons/azure.png","https://content.uplynk.com/847859273a4b4a81959d8fea181672a4.mpd?pr.version=2&pr.playenabler=B621D91F-EDCC-4035-8D4B-DC71760D43E9&pr.securitylevel=150",u.UPLYNK).addKeySystem(c.PLAYREADY).addKeySystem(c.WIDEVINE).addFeature(d.DASH).addFeature(d.MP4).addFeature(d.MULTIKEY).addFeature(d.AESCTR_8_BYTE_IV).addFeature(d.HIGH_DEFINITION).addLicenseServer("com.microsoft.playready","https://content.uplynk.com/pr").addLicenseServer("com.widevine.alpha","https://content.uplynk.com/wv").setRequestFilter(fe.UplynkRequestFilter).setResponseFilter(fe.UplynkResponseFilter),new de("Multi DRM - MultiPeriod - 8 Byte IV","https://storage.googleapis.com/shaka-asset-icons/sintel.png","https://content.uplynk.com/054225d59be2454fabdca3e96912d847.mpd?ad=cleardash&pr.version=2&pr.playenabler=B621D91F-EDCC-4035-8D4B-DC71760D43E9&pr.securitylevel=150",u.UPLYNK).addKeySystem(c.PLAYREADY).addKeySystem(c.WIDEVINE).addFeature(d.DASH).addFeature(d.MP4).addFeature(d.SUBTITLES).addFeature(d.MULTIKEY).addFeature(d.MULTIPERIOD).addFeature(d.WEBVTT).addFeature(d.AESCTR_8_BYTE_IV).addFeature(d.HIGH_DEFINITION).addLicenseServer("com.microsoft.playready","https://content.uplynk.com/pr").addLicenseServer("com.widevine.alpha","https://content.uplynk.com/wv").setRequestFilter(fe.UplynkRequestFilter).setResponseFilter(fe.UplynkResponseFilter),new de("Widevine - 16 Byte IV","https://storage.googleapis.com/shaka-asset-icons/big_buck_bunny.png","https://content.uplynk.com/224ac8717e714b68831997ab6cea4015.mpd",u.UPLYNK).markAsDisabled().addKeySystem(c.WIDEVINE).addFeature(d.DASH).addFeature(d.MP4).addFeature(d.MULTIKEY).addFeature(d.AESCTR_16_BYTE_IV).addFeature(d.HIGH_DEFINITION).addLicenseServer("com.widevine.alpha","https://content.uplynk.com/wv").setRequestFilter(fe.UplynkRequestFilter).setResponseFilter(fe.UplynkResponseFilter),new de("Widevine - 16 Byte IV - (mix of encrypted and unencrypted periods)","https://storage.googleapis.com/shaka-asset-icons/sintel.png","https://content.uplynk.com/1eb40d8e64234f5c9879db7045c3d48c.mpd?ad=cleardash&rays=cdefg",u.UPLYNK).markAsDisabled().addKeySystem(c.WIDEVINE).addFeature(d.DASH).addFeature(d.MP4).addFeature(d.MULTIPLE_LANGUAGES).addFeature(d.MULTIPERIOD).addFeature(d.MULTIKEY).addFeature(d.HIGH_DEFINITION).addFeature(d.AESCTR_16_BYTE_IV).addFeature(d.ENCRYPTED_WITH_CLEAR).addLicenseServer("com.widevine.alpha","https://content.uplynk.com/wv").setRequestFilter(fe.UplynkRequestFilter).setResponseFilter(fe.UplynkResponseFilter)];var pe=fe,me=n(3),ve=n(14);function ge(){return(ge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var ye="undefined"!=typeof window&&"undefined"!=typeof document,_e=ye?navigator.userAgent:"",be=/MSIE |Trident\//.test(_e),we=/UCBrowser\//.test(_e),Ee=ye&&/iPhone|iPad|iPod/.test(navigator.platform)&&!window.MSStream,Se={a11y:!0,allowHTML:!0,animateFill:!0,animation:"shift-away",appendTo:function(){return document.body},aria:"describedby",arrow:!1,arrowType:"sharp",boundary:"scrollParent",content:"",delay:0,distance:10,duration:[325,275],flip:!0,flipBehavior:"flip",flipOnUpdate:!1,followCursor:!1,hideOnClick:!0,ignoreAttributes:!1,inertia:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,lazy:!0,maxWidth:350,multiple:!1,offset:0,onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},placement:"top",popperOptions:{},role:"tooltip",showOnInit:!1,size:"regular",sticky:!1,target:"",theme:"dark",touch:!0,touchHold:!1,trigger:"mouseenter focus",triggerTarget:null,updateDuration:0,wait:null,zIndex:9999},Te=["arrow","arrowType","boundary","distance","flip","flipBehavior","flipOnUpdate","offset","placement","popperOptions"],ke=ye?Element.prototype:{},Ce=ke.matches||ke.matchesSelector||ke.webkitMatchesSelector||ke.mozMatchesSelector||ke.msMatchesSelector;function Ie(e){return[].slice.call(e)}function Ae(e,t){return xe(e,function(e){return Ce.call(e,t)})}function xe(e,t){for(;e;){if(t(e))return e;e=e.parentElement}return null}var Le={passive:!0},Re=4,Pe="x-placement",De="x-out-of-boundaries",Oe="tippy-iOS",Me="tippy-active",Ne="tippy-popper",Ue="tippy-tooltip",Fe="tippy-content",Be="tippy-backdrop",Ve="tippy-arrow",He="tippy-roundarrow",Ge=".".concat(Ne),je=".".concat(Ue),ze=".".concat(Fe),We=".".concat(Be),qe=".".concat(Ve),Ye=".".concat(He),Ke=!1;function Xe(){Ke||(Ke=!0,Ee&&document.body.classList.add(Oe),window.performance&&document.addEventListener("mousemove",Ze))}var $e=0;function Ze(){var e=performance.now();e-$e<20&&(Ke=!1,document.removeEventListener("mousemove",Ze),Ee||document.body.classList.remove(Oe)),$e=e}function Qe(){var e=document.activeElement;e&&e.blur&&e._tippy&&e.blur()}var Je=Object.keys(Se);function et(e,t){return{}.hasOwnProperty.call(e,t)}function tt(e,t,n){if(Array.isArray(e)){var i=e[t];return null==i?n:i}return e}function nt(e,t){return 0===t?e:function(i){clearTimeout(n),n=setTimeout(function(){e(i)},t)};var n}function it(e,t){return e&&e.modifiers&&e.modifiers[t]}function rt(e,t){return e.indexOf(t)>-1}function at(e){return e instanceof Element}function st(e){return!(!e||!et(e,"isVirtual"))||at(e)}function ot(e,t){return"function"==typeof e?e.apply(null,t):e}function lt(e,t){e.filter(function(e){return"flip"===e.name})[0].enabled=t}function ut(){return document.createElement("div")}function ct(e,t){e.forEach(function(e){e&&(e.style.transitionDuration="".concat(t,"ms"))})}function dt(e,t){e.forEach(function(e){e&&e.setAttribute("data-state",t)})}function ht(e,t){var n=ge({},t,{content:ot(t.content,[e])},t.ignoreAttributes?{}:function(e){return Je.reduce(function(t,n){var i=(e.getAttribute("data-tippy-".concat(n))||"").trim();if(!i)return t;if("content"===n)t[n]=i;else try{t[n]=JSON.parse(i)}catch(e){t[n]=i}return t},{})}(e));return(n.arrow||we)&&(n.animateFill=!1),n}function ft(e,t){Object.keys(e).forEach(function(e){if(!et(t,e))throw new Error("[tippy]: `".concat(e,"` is not a valid option"))})}function pt(e,t){e.innerHTML=at(t)?t.innerHTML:t}function mt(e,t){if(at(t.content))pt(e,""),e.appendChild(t.content);else if("function"!=typeof t.content){e[t.allowHTML?"innerHTML":"textContent"]=t.content}}function vt(e){return{tooltip:e.querySelector(je),backdrop:e.querySelector(We),content:e.querySelector(ze),arrow:e.querySelector(qe)||e.querySelector(Ye)}}function gt(e){e.setAttribute("data-inertia","")}function yt(e){var t=ut();return"round"===e?(t.className=He,pt(t,'<svg viewBox="0 0 18 7" xmlns="http://www.w3.org/2000/svg"><path d="M0 7s2.021-.015 5.253-4.218C6.584 1.051 7.797.007 9 0c1.203-.007 2.416 1.035 3.761 2.782C16.012 7.005 18 7 18 7H0z"/></svg>')):t.className=Ve,t}function _t(){var e=ut();return e.className=Be,e.setAttribute("data-state","hidden"),e}function bt(e,t){e.setAttribute("tabindex","-1"),t.setAttribute("data-interactive","")}function wt(e,t,n){var i=we&&void 0!==document.body.style.webkitTransition?"webkitTransitionEnd":"transitionend";e[t+"EventListener"](i,n)}function Et(e){var t=e.getAttribute(Pe);return t?t.split("-")[0]:""}function St(e,t,n){n.split(" ").forEach(function(n){e.classList[t](n+"-theme")})}var Tt=1,kt=[];function Ct(e,t){var n,i,r,a,s,o=ht(e,t);if(!o.multiple&&e._tippy)return null;var l,u,c,d,h,f=!1,p=!1,m=!1,v=!1,g=[],y=nt(M,o.interactiveDebounce),_=Tt++,b=function(e,t){var n=ut();n.className=Ne,n.id="tippy-".concat(e),n.style.zIndex=""+t.zIndex,n.style.position="absolute",n.style.top="0",n.style.left="0",t.role&&n.setAttribute("role",t.role);var i=ut();i.className=Ue,i.style.maxWidth=t.maxWidth+("number"==typeof t.maxWidth?"px":""),i.setAttribute("data-size",t.size),i.setAttribute("data-animation",t.animation),i.setAttribute("data-state","hidden"),St(i,"add",t.theme);var r=ut();return r.className=Fe,r.setAttribute("data-state","hidden"),t.interactive&&bt(n,i),t.arrow&&i.appendChild(yt(t.arrowType)),t.animateFill&&(i.appendChild(_t()),i.setAttribute("data-animatefill","")),t.inertia&&gt(i),mt(r,t),i.appendChild(r),n.appendChild(i),n}(_,o),w=vt(b),E={id:_,reference:e,popper:b,popperChildren:w,popperInstance:null,props:o,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},clearDelayTimeouts:q,set:Y,setContent:function(e){Y({content:e})},show:K,hide:X,enable:function(){E.state.isEnabled=!0},disable:function(){E.state.isEnabled=!1},destroy:function(t){if(E.state.isDestroyed)return;p=!0,E.state.isMounted&&X(0);P(),delete e._tippy;var n=E.props.target;n&&t&&at(e)&&Ie(e.querySelectorAll(n)).forEach(function(e){e._tippy&&e._tippy.destroy()});E.popperInstance&&E.popperInstance.destroy();p=!1,E.state.isDestroyed=!0}};return e._tippy=E,b._tippy=E,R(),o.lazy||G(),o.showOnInit&&j(),!o.a11y||o.target||(!at(h=k())||Ce.call(h,"a[href],area[href],button,details,input,textarea,select,iframe,[tabindex]")&&!h.hasAttribute("disabled"))||k().setAttribute("tabindex","0"),b.addEventListener("mouseenter",function(e){E.props.interactive&&E.state.isVisible&&"mouseenter"===n&&j(e,!0)}),b.addEventListener("mouseleave",function(){E.props.interactive&&"mouseenter"===n&&document.addEventListener("mousemove",y)}),E;function S(){document.removeEventListener("mousemove",D)}function T(){document.body.removeEventListener("mouseleave",z),document.removeEventListener("mousemove",y),kt=kt.filter(function(e){return e!==y})}function k(){return E.props.triggerTarget||e}function C(){document.addEventListener("click",W,!0)}function I(){return[E.popperChildren.tooltip,E.popperChildren.backdrop,E.popperChildren.content]}function A(){var e=E.props.followCursor;return e&&"focus"!==n||Ke&&"initial"===e}function x(e,t){var n=E.popperChildren.tooltip;function i(e){e.target===n&&(wt(n,"remove",i),t())}if(0===e)return t();wt(n,"remove",c),wt(n,"add",i),c=i}function L(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];k().addEventListener(e,t,n),g.push({eventType:e,handler:t,options:n})}function R(){E.props.touchHold&&!E.props.target&&(L("touchstart",O,Le),L("touchend",N,Le)),E.props.trigger.trim().split(" ").forEach(function(e){if("manual"!==e)if(E.props.target)switch(e){case"mouseenter":L("mouseover",F),L("mouseout",B);break;case"focus":L("focusin",F),L("focusout",B);break;case"click":L(e,F)}else switch(L(e,O),e){case"mouseenter":L("mouseleave",N);break;case"focus":L(be?"focusout":"blur",U)}})}function P(){g.forEach(function(e){var t=e.eventType,n=e.handler,i=e.options;k().removeEventListener(t,n,i)}),g=[]}function D(t){var n=i=t,r=n.clientX,a=n.clientY;if(d){var s=xe(t.target,function(t){return t===e}),o=e.getBoundingClientRect(),l=E.props.followCursor,u="horizontal"===l,c="vertical"===l,h=rt(["top","bottom"],Et(b)),f=b.getAttribute(Pe),p=!!f&&!!f.split("-")[1],m=h?b.offsetWidth:b.offsetHeight,v=m/2,g=h?0:p?m:v,y=h?p?m:v:0;!s&&E.props.interactive||(E.popperInstance.reference=ge({},E.popperInstance.reference,{clientWidth:0,clientHeight:0,getBoundingClientRect:function(){return{width:h?m:0,height:h?0:m,top:(u?o.top:a)-g,bottom:(u?o.bottom:a)+g,left:(c?o.left:r)-y,right:(c?o.right:r)+y}}}),E.popperInstance.update()),"initial"===l&&E.state.isVisible&&S()}}function O(e){E.state.isEnabled&&!V(e)&&(E.state.isVisible||(n=e.type,e instanceof MouseEvent&&(i=e,kt.forEach(function(t){return t(e)}))),"click"===e.type&&!1!==E.props.hideOnClick&&E.state.isVisible?z():j(e))}function M(t){var n=Ae(t.target,Ge)===b,i=xe(t.target,function(t){return t===e});n||i||function(e,t,n,i){if(!e)return!0;var r=n.clientX,a=n.clientY,s=i.interactiveBorder,o=i.distance,l=t.top-a>("top"===e?s+o:s),u=a-t.bottom>("bottom"===e?s+o:s),c=t.left-r>("left"===e?s+o:s),d=r-t.right>("right"===e?s+o:s);return l||u||c||d}(Et(b),b.getBoundingClientRect(),t,E.props)&&(T(),z())}function N(e){if(!V(e))return E.props.interactive?(document.body.addEventListener("mouseleave",z),document.addEventListener("mousemove",y),void kt.push(y)):void z()}function U(e){e.target===k()&&(E.props.interactive&&e.relatedTarget&&b.contains(e.relatedTarget)||z())}function F(e){Ae(e.target,E.props.target)&&j(e)}function B(e){Ae(e.target,E.props.target)&&z()}function V(e){var t="ontouchstart"in window,n=rt(e.type,"touch"),i=E.props.touchHold;return t&&Ke&&i&&!n||Ke&&!i&&n}function H(){!v&&u&&(v=!0,function(e){e.offsetHeight}(b),u())}function G(){var t=E.props.popperOptions,n=E.popperChildren,i=n.tooltip,r=n.arrow,a=it(t,"preventOverflow");function s(e){E.props.flip&&!E.props.flipOnUpdate&&(e.flipped&&(E.popperInstance.options.placement=e.placement),lt(E.popperInstance.modifiers,!1)),i.setAttribute(Pe,e.placement),!1!==e.attributes[De]?i.setAttribute(De,""):i.removeAttribute(De),l&&l!==e.placement&&m&&(i.style.transition="none",requestAnimationFrame(function(){i.style.transition=""})),l=e.placement,m=E.state.isVisible;var t=Et(b),n=i.style;n.top=n.bottom=n.left=n.right="",n[t]=-(E.props.distance-10)+"px";var r=a&&void 0!==a.padding?a.padding:Re,s="number"==typeof r,o=ge({top:s?r:r.top,bottom:s?r:r.bottom,left:s?r:r.left,right:s?r:r.right},!s&&r);o[t]=s?r+E.props.distance:(r[t]||0)+E.props.distance,E.popperInstance.modifiers.filter(function(e){return"preventOverflow"===e.name})[0].padding=o,d=o}var o=ge({eventsEnabled:!1,placement:E.props.placement},t,{modifiers:ge({},t?t.modifiers:{},{preventOverflow:ge({boundariesElement:E.props.boundary,padding:Re},a),arrow:ge({element:r,enabled:!!r},it(t,"arrow")),flip:ge({enabled:E.props.flip,padding:E.props.distance+Re,behavior:E.props.flipBehavior},it(t,"flip")),offset:ge({offset:E.props.offset},it(t,"offset"))}),onCreate:function(e){s(e),H(),t&&t.onCreate&&t.onCreate(e)},onUpdate:function(e){s(e),H(),t&&t.onUpdate&&t.onUpdate(e)}});E.popperInstance=new ve.default(e,b,o)}function j(e,n){if(q(),!E.state.isVisible){if(E.props.target)return function(e){if(e){var n=Ae(e.target,E.props.target);n&&!n._tippy&&Ct(n,ge({},E.props,{content:ot(t.content,[n]),appendTo:t.appendTo,target:"",showOnInit:!0}))}}(e);if(f=!0,e&&!n&&E.props.onTrigger(E,e),E.props.wait)return E.props.wait(E,e);A()&&!E.state.isMounted&&(E.popperInstance||G(),document.addEventListener("mousemove",D)),C();var i=tt(E.props.delay,0,Se.delay);i?r=setTimeout(function(){K()},i):K()}}function z(){if(q(),!E.state.isVisible)return S();f=!1;var e=tt(E.props.delay,1,Se.delay);e?a=setTimeout(function(){E.state.isVisible&&X()},e):s=requestAnimationFrame(function(){X()})}function W(e){if(!E.props.interactive||!b.contains(e.target)){if(k().contains(e.target)){if(Ke)return;if(E.state.isVisible&&rt(E.props.trigger,"click"))return}!0===E.props.hideOnClick&&(q(),X())}}function q(){clearTimeout(r),clearTimeout(a),cancelAnimationFrame(s)}function Y(t){ft(t=t||{},Se),P();var n=E.props,r=ht(e,ge({},E.props,t,{ignoreAttributes:!0}));r.ignoreAttributes=et(t,"ignoreAttributes")?t.ignoreAttributes||!1:n.ignoreAttributes,E.props=r,R(),T(),y=nt(M,r.interactiveDebounce),function(e,t,n){var i=vt(e),r=i.tooltip,a=i.content,s=i.backdrop,o=i.arrow;e.style.zIndex=""+n.zIndex,r.setAttribute("data-size",n.size),r.setAttribute("data-animation",n.animation),r.style.maxWidth=n.maxWidth+("number"==typeof n.maxWidth?"px":""),n.role?e.setAttribute("role",n.role):e.removeAttribute("role"),t.content!==n.content&&mt(a,n),!t.animateFill&&n.animateFill?(r.appendChild(_t()),r.setAttribute("data-animatefill","")):t.animateFill&&!n.animateFill&&(r.removeChild(s),r.removeAttribute("data-animatefill")),!t.arrow&&n.arrow?r.appendChild(yt(n.arrowType)):t.arrow&&!n.arrow&&r.removeChild(o),t.arrow&&n.arrow&&t.arrowType!==n.arrowType&&r.replaceChild(yt(n.arrowType),o),!t.interactive&&n.interactive?bt(e,r):t.interactive&&!n.interactive&&function(e,t){e.removeAttribute("tabindex"),t.removeAttribute("data-interactive")}(e,r),!t.inertia&&n.inertia?gt(r):t.inertia&&!n.inertia&&function(e){e.removeAttribute("data-inertia")}(r),t.theme!==n.theme&&(St(r,"remove",t.theme),St(r,"add",n.theme))}(b,n,r),E.popperChildren=vt(b),E.popperInstance&&(Te.some(function(e){return et(t,e)&&t[e]!==n[e]})?(E.popperInstance.destroy(),G(),E.state.isVisible&&E.popperInstance.enableEventListeners(),E.props.followCursor&&i&&D(i)):E.popperInstance.update())}function K(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt(E.props.duration,0,Se.duration[1]);if(!E.state.isDestroyed&&E.state.isEnabled&&(!Ke||E.props.touch)&&!k().hasAttribute("disabled")&&!1!==E.props.onShow(E)){C(),b.style.visibility="visible",E.state.isVisible=!0,E.props.interactive&&k().classList.add(Me);var n=I();ct(n.concat(b),0),u=function(){if(E.state.isVisible){var e=A();e&&i?D(i):e||E.popperInstance.update(),E.popperChildren.backdrop&&(E.popperChildren.content.style.transitionDelay=Math.round(t/12)+"ms"),E.props.sticky&&(ct([b],be?0:E.props.updateDuration),function e(){E.popperInstance.scheduleUpdate(),E.state.isMounted?requestAnimationFrame(e):ct([b],0)}()),ct([b],E.props.updateDuration),ct(n,t),dt(n,"visible"),function(e,t){x(e,t)}(t,function(){E.props.aria&&k().setAttribute("aria-".concat(E.props.aria),b.id),E.props.onShown(E),E.state.isShown=!0})}},function(){v=!1;var t=A();E.popperInstance?(lt(E.popperInstance.modifiers,E.props.flip),t||(E.popperInstance.reference=e,E.popperInstance.enableEventListeners()),E.popperInstance.scheduleUpdate()):(G(),t||E.popperInstance.enableEventListeners());var n=E.props.appendTo,i="parent"===n?e.parentNode:ot(n,[e]);i.contains(b)||(i.appendChild(b),E.props.onMount(E),E.state.isMounted=!0)}()}}function X(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt(E.props.duration,1,Se.duration[1]);if(!E.state.isDestroyed&&(E.state.isEnabled||p)&&(!1!==E.props.onHide(E)||p)){document.removeEventListener("click",W,!0),b.style.visibility="hidden",E.state.isVisible=!1,E.state.isShown=!1,m=!1,E.props.interactive&&k().classList.remove(Me);var t=I();ct(t,e),dt(t,"hidden"),function(e,t){x(e,function(){!E.state.isVisible&&b.parentNode&&b.parentNode.contains(b)&&t()})}(e,function(){f||S(),E.props.aria&&k().removeAttribute("aria-".concat(E.props.aria)),E.popperInstance.disableEventListeners(),E.popperInstance.options.placement=E.props.placement,b.parentNode.removeChild(b),E.props.onHidden(E),E.state.isMounted=!1})}}}var It=!1;function At(e,t){ft(t||{},Se),It||(document.addEventListener("touchstart",Xe,Le),window.addEventListener("blur",Qe),It=!0);var n,i=ge({},Se,t);n=e,"[object Object]"!=={}.toString.call(n)||n.addEventListener||function(e){var t={isVirtual:!0,attributes:e.attributes||{},contains:function(){},setAttribute:function(t,n){e.attributes[t]=n},getAttribute:function(t){return e.attributes[t]},removeAttribute:function(t){delete e.attributes[t]},hasAttribute:function(t){return t in e.attributes},addEventListener:function(){},removeEventListener:function(){},classList:{classNames:{},add:function(t){e.classList.classNames[t]=!0},remove:function(t){delete e.classList.classNames[t]},contains:function(t){return t in e.classList.classNames}}};for(var n in t)e[n]=t[n]}(e);var r=function(e){if(st(e))return[e];if(e instanceof NodeList)return Ie(e);if(Array.isArray(e))return e;try{return Ie(document.querySelectorAll(e))}catch(e){return[]}}(e).reduce(function(e,t){var n=t&&Ct(t,i);return n&&e.push(n),e},[]);return st(e)?r[0]:r}At.version="4.3.4",At.defaults=Se,At.setDefaults=function(e){Object.keys(e).forEach(function(t){Se[t]=e[t]})},At.hideAll=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.exclude,n=e.duration;Ie(document.querySelectorAll(Ge)).forEach(function(e){var i,r=e._tippy;if(r){var a=!1;t&&(a=(i=t)._tippy&&!Ce.call(i,Ge)?r.reference===t:e===t.popper),a||r.hide(n)}})},At.group=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.delay,i=void 0===n?e[0].props.delay:n,r=t.duration,a=void 0===r?0:r,s=!1;function o(e){s=e,d()}function l(t){t._originalProps.onShow(t),e.forEach(function(e){e.set({duration:a}),e.state.isVisible&&e.hide()}),o(!0)}function u(e){e._originalProps.onHide(e),o(!1)}function c(e){e._originalProps.onShown(e),e.set({duration:e._originalProps.duration})}function d(){e.forEach(function(e){e.set({onShow:l,onShown:c,onHide:u,delay:s?[0,Array.isArray(i)?i[1]:i]:i,duration:s?a:e._originalProps.duration})})}e.forEach(function(e){e._originalProps?e.set(e._originalProps):e._originalProps=ge({},e.props)}),d()},ye&&setTimeout(function(){Ie(document.querySelectorAll("[data-tippy]")).forEach(function(e){var t=e.getAttribute("data-tippy");t&&At(e,{content:t})})}),function(e){if(ye){var t=document.createElement("style");t.type="text/css",t.textContent=e,t.setAttribute("data-tippy-stylesheet","");var n=document.head,i=n.firstChild;i?n.insertBefore(t,i):n.appendChild(t)}}('.tippy-iOS{cursor:pointer!important;-webkit-tap-highlight-color:transparent}.tippy-popper{transition-timing-function:cubic-bezier(.165,.84,.44,1);max-width:calc(100% - 8px);pointer-events:none;outline:0}.tippy-popper[x-placement^=top] .tippy-backdrop{border-radius:40% 40% 0 0}.tippy-popper[x-placement^=top] .tippy-roundarrow{bottom:-7px;bottom:-6.5px;-webkit-transform-origin:50% 0;transform-origin:50% 0;margin:0 3px}.tippy-popper[x-placement^=top] .tippy-roundarrow svg{position:absolute;left:0;-webkit-transform:rotate(180deg);transform:rotate(180deg)}.tippy-popper[x-placement^=top] .tippy-arrow{border-top:8px solid #333;border-right:8px solid transparent;border-left:8px solid transparent;bottom:-7px;margin:0 3px;-webkit-transform-origin:50% 0;transform-origin:50% 0}.tippy-popper[x-placement^=top] .tippy-backdrop{-webkit-transform-origin:0 25%;transform-origin:0 25%}.tippy-popper[x-placement^=top] .tippy-backdrop[data-state=visible]{-webkit-transform:scale(1) translate(-50%,-55%);transform:scale(1) translate(-50%,-55%)}.tippy-popper[x-placement^=top] .tippy-backdrop[data-state=hidden]{-webkit-transform:scale(.2) translate(-50%,-45%);transform:scale(.2) translate(-50%,-45%);opacity:0}.tippy-popper[x-placement^=top] [data-animation=shift-toward][data-state=visible]{-webkit-transform:translateY(-10px);transform:translateY(-10px)}.tippy-popper[x-placement^=top] [data-animation=shift-toward][data-state=hidden]{opacity:0;-webkit-transform:translateY(-20px);transform:translateY(-20px)}.tippy-popper[x-placement^=top] [data-animation=perspective]{-webkit-transform-origin:bottom;transform-origin:bottom}.tippy-popper[x-placement^=top] [data-animation=perspective][data-state=visible]{-webkit-transform:perspective(700px) translateY(-10px) rotateX(0);transform:perspective(700px) translateY(-10px) rotateX(0)}.tippy-popper[x-placement^=top] [data-animation=perspective][data-state=hidden]{opacity:0;-webkit-transform:perspective(700px) translateY(0) rotateX(60deg);transform:perspective(700px) translateY(0) rotateX(60deg)}.tippy-popper[x-placement^=top] [data-animation=fade][data-state=visible]{-webkit-transform:translateY(-10px);transform:translateY(-10px)}.tippy-popper[x-placement^=top] [data-animation=fade][data-state=hidden]{opacity:0;-webkit-transform:translateY(-10px);transform:translateY(-10px)}.tippy-popper[x-placement^=top] [data-animation=shift-away][data-state=visible]{-webkit-transform:translateY(-10px);transform:translateY(-10px)}.tippy-popper[x-placement^=top] [data-animation=shift-away][data-state=hidden]{opacity:0;-webkit-transform:translateY(0);transform:translateY(0)}.tippy-popper[x-placement^=top] [data-animation=scale]{-webkit-transform-origin:bottom;transform-origin:bottom}.tippy-popper[x-placement^=top] [data-animation=scale][data-state=visible]{-webkit-transform:translateY(-10px) scale(1);transform:translateY(-10px) scale(1)}.tippy-popper[x-placement^=top] [data-animation=scale][data-state=hidden]{opacity:0;-webkit-transform:translateY(-10px) scale(.5);transform:translateY(-10px) scale(.5)}.tippy-popper[x-placement^=bottom] .tippy-backdrop{border-radius:0 0 30% 30%}.tippy-popper[x-placement^=bottom] .tippy-roundarrow{top:-7px;-webkit-transform-origin:50% 100%;transform-origin:50% 100%;margin:0 3px}.tippy-popper[x-placement^=bottom] .tippy-roundarrow svg{position:absolute;left:0;-webkit-transform:rotate(0);transform:rotate(0)}.tippy-popper[x-placement^=bottom] .tippy-arrow{border-bottom:8px solid #333;border-right:8px solid transparent;border-left:8px solid transparent;top:-7px;margin:0 3px;-webkit-transform-origin:50% 100%;transform-origin:50% 100%}.tippy-popper[x-placement^=bottom] .tippy-backdrop{-webkit-transform-origin:0 -50%;transform-origin:0 -50%}.tippy-popper[x-placement^=bottom] .tippy-backdrop[data-state=visible]{-webkit-transform:scale(1) translate(-50%,-45%);transform:scale(1) translate(-50%,-45%)}.tippy-popper[x-placement^=bottom] .tippy-backdrop[data-state=hidden]{-webkit-transform:scale(.2) translate(-50%);transform:scale(.2) translate(-50%);opacity:0}.tippy-popper[x-placement^=bottom] [data-animation=shift-toward][data-state=visible]{-webkit-transform:translateY(10px);transform:translateY(10px)}.tippy-popper[x-placement^=bottom] [data-animation=shift-toward][data-state=hidden]{opacity:0;-webkit-transform:translateY(20px);transform:translateY(20px)}.tippy-popper[x-placement^=bottom] [data-animation=perspective]{-webkit-transform-origin:top;transform-origin:top}.tippy-popper[x-placement^=bottom] [data-animation=perspective][data-state=visible]{-webkit-transform:perspective(700px) translateY(10px) rotateX(0);transform:perspective(700px) translateY(10px) rotateX(0)}.tippy-popper[x-placement^=bottom] [data-animation=perspective][data-state=hidden]{opacity:0;-webkit-transform:perspective(700px) translateY(0) rotateX(-60deg);transform:perspective(700px) translateY(0) rotateX(-60deg)}.tippy-popper[x-placement^=bottom] [data-animation=fade][data-state=visible]{-webkit-transform:translateY(10px);transform:translateY(10px)}.tippy-popper[x-placement^=bottom] [data-animation=fade][data-state=hidden]{opacity:0;-webkit-transform:translateY(10px);transform:translateY(10px)}.tippy-popper[x-placement^=bottom] [data-animation=shift-away][data-state=visible]{-webkit-transform:translateY(10px);transform:translateY(10px)}.tippy-popper[x-placement^=bottom] [data-animation=shift-away][data-state=hidden]{opacity:0;-webkit-transform:translateY(0);transform:translateY(0)}.tippy-popper[x-placement^=bottom] [data-animation=scale]{-webkit-transform-origin:top;transform-origin:top}.tippy-popper[x-placement^=bottom] [data-animation=scale][data-state=visible]{-webkit-transform:translateY(10px) scale(1);transform:translateY(10px) scale(1)}.tippy-popper[x-placement^=bottom] [data-animation=scale][data-state=hidden]{opacity:0;-webkit-transform:translateY(10px) scale(.5);transform:translateY(10px) scale(.5)}.tippy-popper[x-placement^=left] .tippy-backdrop{border-radius:50% 0 0 50%}.tippy-popper[x-placement^=left] .tippy-roundarrow{right:-12px;-webkit-transform-origin:33.33333333% 50%;transform-origin:33.33333333% 50%;margin:3px 0}.tippy-popper[x-placement^=left] .tippy-roundarrow svg{position:absolute;left:0;-webkit-transform:rotate(90deg);transform:rotate(90deg)}.tippy-popper[x-placement^=left] .tippy-arrow{border-left:8px solid #333;border-top:8px solid transparent;border-bottom:8px solid transparent;right:-7px;margin:3px 0;-webkit-transform-origin:0 50%;transform-origin:0 50%}.tippy-popper[x-placement^=left] .tippy-backdrop{-webkit-transform-origin:50% 0;transform-origin:50% 0}.tippy-popper[x-placement^=left] .tippy-backdrop[data-state=visible]{-webkit-transform:scale(1) translate(-50%,-50%);transform:scale(1) translate(-50%,-50%)}.tippy-popper[x-placement^=left] .tippy-backdrop[data-state=hidden]{-webkit-transform:scale(.2) translate(-75%,-50%);transform:scale(.2) translate(-75%,-50%);opacity:0}.tippy-popper[x-placement^=left] [data-animation=shift-toward][data-state=visible]{-webkit-transform:translateX(-10px);transform:translateX(-10px)}.tippy-popper[x-placement^=left] [data-animation=shift-toward][data-state=hidden]{opacity:0;-webkit-transform:translateX(-20px);transform:translateX(-20px)}.tippy-popper[x-placement^=left] [data-animation=perspective]{-webkit-transform-origin:right;transform-origin:right}.tippy-popper[x-placement^=left] [data-animation=perspective][data-state=visible]{-webkit-transform:perspective(700px) translateX(-10px) rotateY(0);transform:perspective(700px) translateX(-10px) rotateY(0)}.tippy-popper[x-placement^=left] [data-animation=perspective][data-state=hidden]{opacity:0;-webkit-transform:perspective(700px) translateX(0) rotateY(-60deg);transform:perspective(700px) translateX(0) rotateY(-60deg)}.tippy-popper[x-placement^=left] [data-animation=fade][data-state=visible]{-webkit-transform:translateX(-10px);transform:translateX(-10px)}.tippy-popper[x-placement^=left] [data-animation=fade][data-state=hidden]{opacity:0;-webkit-transform:translateX(-10px);transform:translateX(-10px)}.tippy-popper[x-placement^=left] [data-animation=shift-away][data-state=visible]{-webkit-transform:translateX(-10px);transform:translateX(-10px)}.tippy-popper[x-placement^=left] [data-animation=shift-away][data-state=hidden]{opacity:0;-webkit-transform:translateX(0);transform:translateX(0)}.tippy-popper[x-placement^=left] [data-animation=scale]{-webkit-transform-origin:right;transform-origin:right}.tippy-popper[x-placement^=left] [data-animation=scale][data-state=visible]{-webkit-transform:translateX(-10px) scale(1);transform:translateX(-10px) scale(1)}.tippy-popper[x-placement^=left] [data-animation=scale][data-state=hidden]{opacity:0;-webkit-transform:translateX(-10px) scale(.5);transform:translateX(-10px) scale(.5)}.tippy-popper[x-placement^=right] .tippy-backdrop{border-radius:0 50% 50% 0}.tippy-popper[x-placement^=right] .tippy-roundarrow{left:-12px;-webkit-transform-origin:66.66666666% 50%;transform-origin:66.66666666% 50%;margin:3px 0}.tippy-popper[x-placement^=right] .tippy-roundarrow svg{position:absolute;left:0;-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.tippy-popper[x-placement^=right] .tippy-arrow{border-right:8px solid #333;border-top:8px solid transparent;border-bottom:8px solid transparent;left:-7px;margin:3px 0;-webkit-transform-origin:100% 50%;transform-origin:100% 50%}.tippy-popper[x-placement^=right] .tippy-backdrop{-webkit-transform-origin:-50% 0;transform-origin:-50% 0}.tippy-popper[x-placement^=right] .tippy-backdrop[data-state=visible]{-webkit-transform:scale(1) translate(-50%,-50%);transform:scale(1) translate(-50%,-50%)}.tippy-popper[x-placement^=right] .tippy-backdrop[data-state=hidden]{-webkit-transform:scale(.2) translate(-25%,-50%);transform:scale(.2) translate(-25%,-50%);opacity:0}.tippy-popper[x-placement^=right] [data-animation=shift-toward][data-state=visible]{-webkit-transform:translateX(10px);transform:translateX(10px)}.tippy-popper[x-placement^=right] [data-animation=shift-toward][data-state=hidden]{opacity:0;-webkit-transform:translateX(20px);transform:translateX(20px)}.tippy-popper[x-placement^=right] [data-animation=perspective]{-webkit-transform-origin:left;transform-origin:left}.tippy-popper[x-placement^=right] [data-animation=perspective][data-state=visible]{-webkit-transform:perspective(700px) translateX(10px) rotateY(0);transform:perspective(700px) translateX(10px) rotateY(0)}.tippy-popper[x-placement^=right] [data-animation=perspective][data-state=hidden]{opacity:0;-webkit-transform:perspective(700px) translateX(0) rotateY(60deg);transform:perspective(700px) translateX(0) rotateY(60deg)}.tippy-popper[x-placement^=right] [data-animation=fade][data-state=visible]{-webkit-transform:translateX(10px);transform:translateX(10px)}.tippy-popper[x-placement^=right] [data-animation=fade][data-state=hidden]{opacity:0;-webkit-transform:translateX(10px);transform:translateX(10px)}.tippy-popper[x-placement^=right] [data-animation=shift-away][data-state=visible]{-webkit-transform:translateX(10px);transform:translateX(10px)}.tippy-popper[x-placement^=right] [data-animation=shift-away][data-state=hidden]{opacity:0;-webkit-transform:translateX(0);transform:translateX(0)}.tippy-popper[x-placement^=right] [data-animation=scale]{-webkit-transform-origin:left;transform-origin:left}.tippy-popper[x-placement^=right] [data-animation=scale][data-state=visible]{-webkit-transform:translateX(10px) scale(1);transform:translateX(10px) scale(1)}.tippy-popper[x-placement^=right] [data-animation=scale][data-state=hidden]{opacity:0;-webkit-transform:translateX(10px) scale(.5);transform:translateX(10px) scale(.5)}.tippy-tooltip{position:relative;color:#fff;border-radius:.25rem;font-size:.875rem;padding:.3125rem .5625rem;line-height:1.4;text-align:center;background-color:#333}.tippy-tooltip[data-size=small]{padding:.1875rem .375rem;font-size:.75rem}.tippy-tooltip[data-size=large]{padding:.375rem .75rem;font-size:1rem}.tippy-tooltip[data-animatefill]{overflow:hidden;background-color:transparent}.tippy-tooltip[data-interactive],.tippy-tooltip[data-interactive] .tippy-roundarrow path{pointer-events:auto}.tippy-tooltip[data-inertia][data-state=visible]{transition-timing-function:cubic-bezier(.54,1.5,.38,1.11)}.tippy-tooltip[data-inertia][data-state=hidden]{transition-timing-function:ease}.tippy-arrow,.tippy-roundarrow{position:absolute;width:0;height:0}.tippy-roundarrow{width:18px;height:7px;fill:#333;pointer-events:none}.tippy-backdrop{position:absolute;background-color:#333;border-radius:50%;width:calc(110% + 2rem);left:50%;top:50%;z-index:-1;transition:all cubic-bezier(.46,.1,.52,.98);-webkit-backface-visibility:hidden;backface-visibility:hidden}.tippy-backdrop:after{content:"";float:left;padding-top:100%}.tippy-backdrop+.tippy-content{transition-property:opacity;will-change:opacity}.tippy-backdrop+.tippy-content[data-state=visible]{opacity:1}.tippy-backdrop+.tippy-content[data-state=hidden]{opacity:0}');var xt=At;function Lt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Rt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"make",value:function(e,t){xt(e,{content:t,placement:"bottom",arrow:!0,animation:"scale",size:"large"})}}],(n=null)&&Lt(t.prototype,n),i&&Lt(t,i),e}(),Pt={ARIA_LABEL:"aria-label",SEEK_BAR_BASE_COLOR:"rgba(255, 255, 255, 0.3)",SEEK_BAR_PLAYED_COLOR:"rgb(255, 255, 255)",SEEK_BAR_BUFFERED_COLOR:"rgba(255, 255, 255, 0.54)",VOLUME_BAR_VOLUME_LEVEL_COLOR:"rgb(255, 255, 255)",VOLUME_BAR_BASE_COLOR:"rgba(255, 255, 255, 0.54)",MIN_SEEK_WINDOW_TO_SHOW_SEEKBAR:5,KEYCODE_TAB:9,KEYCODE_SHIFT:16,KEYCODE_ESCAPE:27},Dt=Pt,Ot={MaterialDesignIcons:{FULLSCREEN:"fullscreen",EXIT_FULLSCREEN:"fullscreen_exit",CLOSED_CAPTIONS:"closed_caption",CHECKMARK:"done",LANGUAGE:"language",PIP:"picture_in_picture_alt",EXIT_PIP:"branding_watermark",BACK:"arrow_back",RESOLUTION:"settings",MUTE:"volume_up",UNMUTE:"volume_off",CAST:"cast",EXIT_CAST:"cast_connected",OPEN_OVERFLOW:"more_vert",REWIND:"fast_rewind",FAST_FORWARD:"fast_forward",PLAY:"play_arrow",PAUSE:"pause"},Opacity:{TRANSPARENT:0,OPAQUE:1}},Mt=Ot,Nt={addTo:function(e){e.insert("ar",new Map([["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_PICTURE_IN_PICTURE",'   "  "'],["EXIT_FULL_SCREEN","   "],["EXIT_PICTURE_IN_PICTURE",'   "  "'],["FAST_FORWARD"," "],["FULL_SCREEN"," "],["LANGUAGE",""],["LIVE",""],["MORE_SETTINGS"," "],["MUTE"," "],["NOT_APPLICABLE"," "],["OFF",""],["ON",""],["PAUSE"," "],["PICTURE_IN_PICTURE","  "],["PLAY",""],["RESOLUTION",""],["REWIND",""],["SEEK","  "],["SKIP_TO_LIVE",""],["UNDETERMINED_LANGUAGE"," "],["UNMUTE","  "],["UNRECOGNIZED_LANGUAGE"," "],["VOLUME",""]])),e.insert("de",new Map([["AUTO_QUALITY","Automatisch"],["BACK","Zurck"],["CAPTIONS","Untertitel"],["CAST","Streamen"],["ENTER_PICTURE_IN_PICTURE","Bild-im-Bild-Modus aktivieren"],["EXIT_FULL_SCREEN","Vollbildmodus beenden"],["EXIT_PICTURE_IN_PICTURE","Bild-im-Bild-Modus beenden"],["FAST_FORWARD","Vorspulen"],["FULL_SCREEN","Vollbild"],["LANGUAGE","Sprache"],["LIVE","Live"],["MORE_SETTINGS","Weitere Einstellungen"],["MULTIPLE_LANGUAGES","mehrere Sprachen"],["MUTE","Stummschalten"],["NOT_APPLICABLE","Nicht zutreffend"],["OFF","Aus"],["ON","An"],["PAUSE","Pausieren"],["PICTURE_IN_PICTURE","Bild-in-Bild"],["PLAY","Wiedergeben"],["RESOLUTION","Auflsung"],["REWIND","Zurckspulen"],["SEEK","Schieberegler fr Suche"],["SKIP_TO_LIVE","Live"],["UNDETERMINED_LANGUAGE","Unbestimmt"],["UNMUTE","Stummschaltung aufheben"],["UNRECOGNIZED_LANGUAGE","Unerkannt"],["VOLUME","Lautstrke"]])),e.insert("en",new Map([["AUTO_QUALITY","Auto"],["BACK","Back"],["CAPTIONS","Captions"],["CAST","Cast..."],["ENTER_PICTURE_IN_PICTURE","Enter Picture-in-Picture"],["EXIT_FULL_SCREEN","Exit full screen"],["EXIT_PICTURE_IN_PICTURE","Exit Picture-in-Picture"],["FAST_FORWARD","Fast-forward"],["FULL_SCREEN","Full screen"],["LANGUAGE","Language"],["LIVE","Live"],["MORE_SETTINGS","More settings"],["MULTIPLE_LANGUAGES","Multiple languages"],["MUTE","Mute"],["NOT_APPLICABLE","Not applicable"],["OFF","Off"],["ON","On"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-Picture"],["PLAY","Play"],["RESOLUTION","Resolution"],["REWIND","Rewind"],["SEEK","Seek"],["SKIP_TO_LIVE","Skip ahead to live"],["UNDETERMINED_LANGUAGE","Undetermined"],["UNMUTE","Unmute"],["UNRECOGNIZED_LANGUAGE","Unrecognized"],["VOLUME","Volume"]])),e.insert("en-GB",new Map([["AUTO_QUALITY","Auto"],["BACK","Back"],["CAPTIONS","Captions"],["CAST","Cast..."],["ENTER_PICTURE_IN_PICTURE","Enter Picture-in-Picture"],["EXIT_FULL_SCREEN","Exit full screen"],["EXIT_PICTURE_IN_PICTURE","Exit Picture-in-Picture"],["FAST_FORWARD","Fast-forward"],["FULL_SCREEN","Full screen"],["LANGUAGE","Language"],["LIVE","Live"],["MORE_SETTINGS","More settings"],["MULTIPLE_LANGUAGES","Multiple languages"],["MUTE","Mute"],["NOT_APPLICABLE","Not applicable"],["OFF","Off"],["ON","On"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-Picture"],["PLAY","Play"],["RESOLUTION","Resolution"],["REWIND","Rewind"],["SEEK","Seek"],["SKIP_TO_LIVE","Skip ahead to live"],["UNDETERMINED_LANGUAGE","Undetermined"],["UNMUTE","Unmute"],["UNRECOGNIZED_LANGUAGE","Unrecognized"],["VOLUME","Volume"]])),e.insert("es",new Map([["AUTO_QUALITY","Automtica"],["BACK","Atrs"],["CAPTIONS","Subttulos"],["CAST","Reparto..."],["ENTER_PICTURE_IN_PICTURE","abrir el modo imagen en imagen"],["EXIT_FULL_SCREEN","Salir del modo de pantalla completa"],["EXIT_PICTURE_IN_PICTURE","salir del modo imagen en imagen"],["FAST_FORWARD","Avance rpido"],["FULL_SCREEN","Pantalla completa"],["LANGUAGE","Idioma"],["LIVE","En directo"],["MORE_SETTINGS","Ms ajustes"],["MULTIPLE_LANGUAGES","varios idiomas"],["MUTE","Silenciar"],["NOT_APPLICABLE","No aplicable"],["OFF","No"],["ON","activado"],["PAUSE","Pausa"],["PICTURE_IN_PICTURE","Imagen en imagen"],["PLAY","Reproducir"],["RESOLUTION","Resolucin"],["REWIND","Retroceder"],["SEEK","Barra deslizante de bsqueda"],["SKIP_TO_LIVE","En directo"],["UNDETERMINED_LANGUAGE","Desconocido"],["UNMUTE","Activar sonido"],["UNRECOGNIZED_LANGUAGE","Desconocido"],["VOLUME","volumen"]])),e.insert("es-419",new Map([["AUTO_QUALITY","Auto"],["BACK","Atrs"],["CAPTIONS","Subttulos"],["CAST","Transmitir"],["ENTER_PICTURE_IN_PICTURE","ingresar al modo de pantalla en pantalla"],["EXIT_FULL_SCREEN","Salir de pantalla completa"],["EXIT_PICTURE_IN_PICTURE","salir del modo de pantalla en pantalla"],["FAST_FORWARD","Avance rpido"],["FULL_SCREEN","Pantalla completa"],["LANGUAGE","Idioma"],["LIVE","En vivo"],["MORE_SETTINGS","Ms opciones de configuracin"],["MUTE","Silenciar"],["NOT_APPLICABLE","No aplicable"],["OFF","Desactivado"],["ON","activado"],["PAUSE","Detener"],["PICTURE_IN_PICTURE","Pantalla en pantalla"],["PLAY","Jugar"],["RESOLUTION","Resolucin"],["REWIND","Retroceder"],["SEEK","Barra deslizante de bsqueda"],["SKIP_TO_LIVE","En vivo"],["UNDETERMINED_LANGUAGE","Desconocido"],["UNMUTE","Activar sonido"],["UNRECOGNIZED_LANGUAGE","Desconocido"],["VOLUME","volumen"]])),e.insert("fr",new Map([["AUTO_QUALITY","Auto"],["BACK","Retour"],["CAPTIONS","Sous-titres"],["CAST","Caster sur"],["ENTER_PICTURE_IN_PICTURE","utiliser le mode PIP"],["EXIT_FULL_SCREEN","Quitter le mode plein cran"],["EXIT_PICTURE_IN_PICTURE","quitter le mode PIP"],["FAST_FORWARD","Avance rapide"],["FULL_SCREEN","Plein cran"],["LANGUAGE","Langue"],["LIVE","En direct"],["MORE_SETTINGS","Autres paramtres"],["MULTIPLE_LANGUAGES","plusieurs langues"],["MUTE","Dsactiver le son"],["NOT_APPLICABLE","Non applicable"],["OFF","Dsactive"],["ON","activ"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-picture"],["PLAY","Lire"],["RESOLUTION","Rsolution"],["REWIND","Retour arrire"],["SEEK","Barre de recherche"],["SKIP_TO_LIVE","Aller au direct"],["UNDETERMINED_LANGUAGE","Inconnue"],["UNMUTE","Activer le son"],["UNRECOGNIZED_LANGUAGE","Inconnue"],["VOLUME","volume"]])),e.insert("it",new Map([["AUTO_QUALITY","Auto"],["BACK","Indietro"],["CAPTIONS","Sottotitoli"],["CAST","Trasmetti"],["ENTER_PICTURE_IN_PICTURE","attiva picture in picture"],["EXIT_FULL_SCREEN","Esci dalla modalit a schermo intero"],["EXIT_PICTURE_IN_PICTURE","esci da picture in picture"],["FAST_FORWARD","Avanti veloce"],["FULL_SCREEN","Schermo intero"],["LANGUAGE","Lingua"],["LIVE","Dal vivo"],["MORE_SETTINGS","Altre impostazioni"],["MUTE","Disattiva audio"],["NOT_APPLICABLE","Non applicable"],["OFF","Disattivato"],["ON","on"],["PAUSE","Metti in pausa"],["PICTURE_IN_PICTURE","Picture in picture"],["PLAY","Riproduci"],["RESOLUTION","Risoluzione"],["REWIND","Riavvolgi"],["SEEK","Dispositivo di scorrimento"],["SKIP_TO_LIVE","Dal vivo"],["UNDETERMINED_LANGUAGE","Sconosciuto"],["UNMUTE","Riattiva audio"],["UNRECOGNIZED_LANGUAGE","Sconosciuto"],["VOLUME","volume"]])),e.insert("ja",new Map([["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_PICTURE_IN_PICTURE","  "],["EXIT_FULL_SCREEN",""],["EXIT_PICTURE_IN_PICTURE","  "],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["MORE_SETTINGS",""],["MULTIPLE_LANGUAGES",""],["MUTE",""],["NOT_APPLICABLE","--"],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE","  "],["PLAY",""],["RESOLUTION",""],["REWIND",""],["SEEK"," "],["SKIP_TO_LIVE",""],["UNDETERMINED_LANGUAGE",""],["UNMUTE",""],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]])),e.insert("ko",new Map([["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_PICTURE_IN_PICTURE","PIP  "],["EXIT_FULL_SCREEN"," "],["EXIT_PICTURE_IN_PICTURE","PIP  "],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["MORE_SETTINGS"," "],["MULTIPLE_LANGUAGES"," "],["MUTE",""],["NOT_APPLICABLE","  "],["OFF"," "],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE","PIP "],["PLAY",""],["RESOLUTION",""],["REWIND",""],["SEEK"," "],["SKIP_TO_LIVE",""],["UNDETERMINED_LANGUAGE","  "],["UNMUTE"," "],["UNRECOGNIZED_LANGUAGE","  "],["VOLUME",""]])),e.insert("nl",new Map([["AUTO_QUALITY","Automatisch"],["BACK","Terug"],["CAPTIONS","Ondertiteling"],["CAST","Casten..."],["ENTER_PICTURE_IN_PICTURE","scherm-in-scherm openen"],["EXIT_FULL_SCREEN","Volledig scherm afsluiten"],["EXIT_PICTURE_IN_PICTURE","scherm-in-scherm afsluiten"],["FAST_FORWARD","Vooruitspoelen"],["FULL_SCREEN","Volledig scherm"],["LANGUAGE","Taal"],["LIVE","Live"],["MORE_SETTINGS","Meer instellingen"],["MUTE","Dempen"],["NOT_APPLICABLE","Niet van toepassing"],["OFF","Uit"],["ON","aan"],["PAUSE","Onderbreken"],["PICTURE_IN_PICTURE","Scherm-in-scherm"],["PLAY","Afspelen"],["RESOLUTION","Resolutie"],["REWIND","Terugspoelen"],["SEEK","Zoekschuifbalk"],["SKIP_TO_LIVE","Live"],["UNDETERMINED_LANGUAGE","Onbekend"],["UNMUTE","Dempen opheffen"],["UNRECOGNIZED_LANGUAGE","Onbekend"],["VOLUME","volume"]])),e.insert("pl",new Map([["AUTO_QUALITY","Automatyczna"],["BACK","Wstecz"],["CAPTIONS","Napisy"],["CAST","Przelij..."],["ENTER_PICTURE_IN_PICTURE","wcz tryb obrazu w obrazie"],["EXIT_FULL_SCREEN","Zamknij peny ekran"],["EXIT_PICTURE_IN_PICTURE","wycz tryb obrazu w obrazie"],["FAST_FORWARD","Przewi do przodu"],["FULL_SCREEN","Peny ekran"],["LANGUAGE","Jzyk"],["LIVE","Na ywo"],["MORE_SETTINGS","Wicej ustawie"],["MUTE","Wycisz"],["NOT_APPLICABLE","Nie dotyczy"],["OFF","Wyczone"],["ON","w."],["PAUSE","Wstrzymaj"],["PICTURE_IN_PICTURE","Obraz w obrazie"],["PLAY","Odtwarzaj"],["RESOLUTION","Rozdzielczo"],["REWIND","Przewi do tyu"],["SEEK","Suwak przewijania"],["SKIP_TO_LIVE","Na ywo"],["UNDETERMINED_LANGUAGE","Nieznane"],["UNMUTE","Wycz wyciszenie"],["UNRECOGNIZED_LANGUAGE","Nieznane"],["VOLUME","gono"]])),e.insert("pt",new Map([["AUTO_QUALITY","Automtico"],["BACK","Voltar"],["CAPTIONS","Legendas ocultas"],["CAST","Elenco..."],["ENTER_PICTURE_IN_PICTURE","entrar no modo picture-in-picture"],["EXIT_FULL_SCREEN","Sair da tela inteira"],["EXIT_PICTURE_IN_PICTURE","sair de picture-in-picture"],["FAST_FORWARD","Avanar"],["FULL_SCREEN","Tela inteira"],["LANGUAGE","Idioma"],["LIVE","Ao vivo"],["MORE_SETTINGS","Mais configuraes"],["MULTIPLE_LANGUAGES","vrios idiomas"],["MUTE","Desativar som"],["NOT_APPLICABLE","No aplicvel"],["OFF","Desativado"],["ON","ativado"],["PAUSE","Pausar"],["PICTURE_IN_PICTURE","Picture-in-picture"],["PLAY","Reproduzir"],["RESOLUTION","Resoluo"],["REWIND","Retroceder"],["SEEK","Boto deslizante de busca"],["SKIP_TO_LIVE","Ao vivo"],["UNDETERMINED_LANGUAGE","Desconhecido"],["UNMUTE","Ativar som"],["UNRECOGNIZED_LANGUAGE","Desconhecido"],["VOLUME","volume"]])),e.insert("ru",new Map([["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST",""],["ENTER_PICTURE_IN_PICTURE",'  "  "'],["EXIT_FULL_SCREEN","   "],["EXIT_PICTURE_IN_PICTURE",'   "  "'],["FAST_FORWARD"," "],["FULL_SCREEN","  "],["LANGUAGE",""],["LIVE"," "],["MORE_SETTINGS"," "],["MULTIPLE_LANGUAGES","  "],["MUTE"," "],["NOT_APPLICABLE",""],["OFF","."],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE","  "],["PLAY",""],["RESOLUTION",""],["REWIND"," "],["SEEK"," "],["SKIP_TO_LIVE","  "],["UNDETERMINED_LANGUAGE",""],["UNMUTE"," "],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]])),e.insert("th",new Map([["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_PICTURE_IN_PICTURE",""],["EXIT_FULL_SCREEN",""],["EXIT_PICTURE_IN_PICTURE",""],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["MORE_SETTINGS",""],["MUTE",""],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE",""],["PLAY",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_TO_LIVE",""],["UNDETERMINED_LANGUAGE",""],["UNMUTE",""],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]])),e.insert("tr",new Map([["AUTO_QUALITY","Otomatik"],["BACK","Geri"],["CAPTIONS","Altyazlar"],["CAST","Yaynla..."],["ENTER_PICTURE_IN_PICTURE","pencere iinde pencere moduna gir"],["EXIT_FULL_SCREEN","Tam ekrandan k"],["EXIT_PICTURE_IN_PICTURE","pencere iinde pencere modundan kn"],["FAST_FORWARD","leri sar"],["FULL_SCREEN","Tam ekran"],["LANGUAGE","Dil"],["LIVE","Canl"],["MORE_SETTINGS","Dier ayarlar"],["MUTE","Sesi kapat"],["NOT_APPLICABLE","Kullanlmyor"],["OFF","Kapal"],["ON","ak"],["PAUSE","Duraklat"],["PICTURE_IN_PICTURE","Pencere iinde Pencere"],["PLAY","Oynat"],["RESOLUTION","znrlk"],["REWIND","Geri sar"],["SEEK","Arama kaydrma ubuu"],["SKIP_TO_LIVE","Canl"],["UNDETERMINED_LANGUAGE","Bilinmiyor"],["UNMUTE","Sesi a"],["UNRECOGNIZED_LANGUAGE","Bilinmiyor"],["VOLUME","ses dzeyi"]])),e.insert("zh",new Map([["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST",""],["ENTER_PICTURE_IN_PICTURE",""],["EXIT_FULL_SCREEN",""],["EXIT_PICTURE_IN_PICTURE",""],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["MORE_SETTINGS",""],["MUTE",""],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE",""],["PLAY",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_TO_LIVE",""],["UNDETERMINED_LANGUAGE",""],["UNMUTE",""],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]])),e.insert("zh-TW",new Map([["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST",""],["ENTER_PICTURE_IN_PICTURE",""],["EXIT_FULL_SCREEN",""],["EXIT_PICTURE_IN_PICTURE",""],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["MORE_SETTINGS",""],["MUTE",""],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE",""],["PLAY",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_TO_LIVE",""],["UNDETERMINED_LANGUAGE",""],["UNMUTE",""],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]]))},Ids:{ENTER_PICTURE_IN_PICTURE:"ENTER_PICTURE_IN_PICTURE",MULTIPLE_LANGUAGES:"MULTIPLE_LANGUAGES",BACK:"BACK",VOLUME:"VOLUME",EXIT_FULL_SCREEN:"EXIT_FULL_SCREEN",NOT_APPLICABLE:"NOT_APPLICABLE",SEEK:"SEEK",LANGUAGE:"LANGUAGE",SKIP_TO_LIVE:"SKIP_TO_LIVE",FULL_SCREEN:"FULL_SCREEN",CAST:"CAST",LIVE:"LIVE",UNRECOGNIZED_LANGUAGE:"UNRECOGNIZED_LANGUAGE",RESOLUTION:"RESOLUTION",PICTURE_IN_PICTURE:"PICTURE_IN_PICTURE",PLAY:"PLAY",PAUSE:"PAUSE",OFF:"OFF",MUTE:"MUTE",UNDETERMINED_LANGUAGE:"UNDETERMINED_LANGUAGE",CAPTIONS:"CAPTIONS",AUTO_QUALITY:"AUTO_QUALITY",ON:"ON",MORE_SETTINGS:"MORE_SETTINGS",EXIT_PICTURE_IN_PICTURE:"EXIT_PICTURE_IN_PICTURE",UNMUTE:"UNMUTE",FAST_FORWARD:"FAST_FORWARD",REWIND:"REWIND"}},Ut=Nt;
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var Bt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"map",value:function(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;n.push(t(l))}}catch(e){r=!0,a=e}finally{try{i||null==o.return||o.return()}finally{if(r)throw a}}return n}},{key:"every",value:function(e,t){var n=!0,i=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){if(!t(a.value))return!1}}catch(e){i=!0,r=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}return!0}},{key:"some",value:function(e,t){var n=!0,i=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){if(t(a.value))return!0}}catch(e){i=!0,r=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}return!1}},{key:"filter",value:function(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;t(l)&&n.push(l)}}catch(e){r=!0,a=e}finally{try{i||null==o.return||o.return()}finally{if(r)throw a}}return n}}],(n=null)&&Ft(t.prototype,n),i&&Ft(t,i),e}();function Vt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var Ht=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"createFallbackPromiseChain",value:function(e,t){return e.reduce(function(e,n){return e.catch(function(){return t(n)})},Promise.reject())}},{key:"collapseArrays",value:function(e,t){return e.concat(t)}},{key:"noop",value:function(){}},{key:"isNotNull",value:function(e){return null!=e}}],(n=null)&&Vt(t.prototype,n),i&&Vt(t,i),e}();function Gt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var jt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"resolveUris",value:function(e,t){if(0==t.length)return e;var n=t.map(function(e){return new $(e)});return e.map(function(e){return new $(e)}).map(function(e){return n.map(function(t){return e.resolve(t)})}).reduce(Ht.collapseArrays,[]).map(function(e){return e.toString()})}},{key:"createDrmInfo",value:function(e,t){return{keySystem:e,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:t||[],keyIds:[]}}}],(n=null)&&Gt(t.prototype,n),i&&Gt(t,i),e}();function zt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}jt.ContentType={VIDEO:"video",AUDIO:"audio",TEXT:"text",APPLICATION:"application"},jt.TextStreamKind={SUBTITLE:"subtitle",CLOSED_CAPTION:"caption"},jt.GAP_OVERLAP_TOLERANCE_SECONDS=1/15;
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var Wt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"areLocaleCompatible",value:function(t,n){return(t=e.normalize(t))==(n=e.normalize(n))}},{key:"areLanguageCompatible",value:function(t,n){t=e.normalize(t),n=e.normalize(n);var i=e.disassembleLocale_(t),r=e.disassembleLocale_(n);return i[0]==r[0]}},{key:"isParentOf",value:function(t,n){t=e.normalize(t),n=e.normalize(n);var i=e.disassembleLocale_(t),r=e.disassembleLocale_(n);return i[0]==r[0]&&1==i.length&&2==r.length}},{key:"isSiblingOf",value:function(t,n){t=e.normalize(t),n=e.normalize(n);var i=e.disassembleLocale_(t),r=e.disassembleLocale_(n);return 2==i.length&&2==r.length&&i[0]==r[0]}},{key:"normalize",value:function(t){var n=t.split("-"),i=n[0]||"",r=n[1]||"";return i=i.toLowerCase(),i=e.isoMap_.get(i)||i,(r=r.toUpperCase())?i+"-"+r:i}},{key:"areSiblings",value:function(t,n){var i=e.getBase(t),r=e.getBase(n);return t!=i&&n!=r&&i==r}},{key:"getBase",value:function(t){var n,i=t.indexOf("-");return n=(n=i>=0?t.substring(0,i):t).toLowerCase(),n=e.isoMap_.get(n)||n}},{key:"getLocaleForText",value:function(t){var n=jt.ContentType;window.asserts.assert(t.type==n.TEXT,"Can only get language from text streams");var i=t.language||"und";return e.normalize(i)}},{key:"getLocaleForVariant",value:function(t){return t.language?e.normalize(t.language):t.audio&&t.audio.language?e.normalize(t.audio.language):t.video&&t.video.language?e.normalize(t.video.language):"und"}},{key:"findClosestLocale",value:function(t,n){var i=e.normalize(t),r=new Set,a=!0,s=!1,o=void 0;try{for(var l,u=n[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value;r.add(e.normalize(c))}}catch(e){s=!0,o=e}finally{try{a||null==u.return||u.return()}finally{if(s)throw o}}var d=!0,h=!1,f=void 0;try{for(var p,m=r[Symbol.iterator]();!(d=(p=m.next()).done);d=!0){var v=p.value;if(v==i)return v}}catch(e){h=!0,f=e}finally{try{d||null==m.return||m.return()}finally{if(h)throw f}}var g=!0,y=!1,_=void 0;try{for(var b,w=r[Symbol.iterator]();!(g=(b=w.next()).done);g=!0){var E=b.value;if(e.isParentOf(E,i))return E}}catch(e){y=!0,_=e}finally{try{g||null==w.return||w.return()}finally{if(y)throw _}}var S=!0,T=!1,k=void 0;try{for(var C,I=r[Symbol.iterator]();!(S=(C=I.next()).done);S=!0){var A=C.value;if(e.isSiblingOf(A,i))return A}}catch(e){T=!0,k=e}finally{try{S||null==I.return||I.return()}finally{if(T)throw k}}var x=!0,L=!1,R=void 0;try{for(var P,D=r[Symbol.iterator]();!(x=(P=D.next()).done);x=!0){var O=P.value;if(e.isParentOf(i,O))return O}}catch(e){L=!0,R=e}finally{try{x||null==D.return||D.return()}finally{if(L)throw R}}return null}},{key:"disassembleLocale_",value:function(e){var t=e.split("-");return window.asserts.assert(t.length<=2,["Locales should not have more than 2 components. ",e," has too many components."].join()),t}}],(n=null)&&zt(t.prototype,n),i&&zt(t,i),e}();function qt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Wt.isoMap_=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]),
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka=window.shaka||{};window.shaka;window.goog=window.goog||{};window.goog;var Yt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fallbackLocale_=Wt.normalize(t),this.currentMap_=new Map,this.currentLocales_=new Set,this.localizations_=new Map,this.events_=new A}var t,n,i;return t=e,i=[{key:"findMissingKeys_",value:function(e,t,n){var i=!0,r=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;e.get(l)||n.add(l)}}catch(e){r=!0,a=e}finally{try{i||null==o.return||o.return()}finally{if(r)throw a}}}}],(n=[{key:"addEventListener",value:function(e,t,n){this.events_.addEventListener(e,t,n)}},{key:"removeEventListener",value:function(e,t,n){this.events_.removeEventListener(e,t,n||void 0)}},{key:"dispatchEvent",value:function(e){return this.events_.dispatchEvent(e)}},{key:"changeLocale",value:function(t){var n=this,i=e;this.currentLocales_.clear();var r=!0,a=!1,s=void 0;try{for(var o,l=t[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var u=o.value;this.currentLocales_.add(Wt.normalize(u))}}catch(e){a=!0,s=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw s}}this.updateCurrentMap_(),this.events_.dispatchEvent(new E(i.LOCALE_CHANGED));var c=Bt.filter(this.currentLocales_,function(e){return!n.localizations_.has(e)});if(c.length){var d={locales:c};this.events_.dispatchEvent(new E(i.UNKNOWN_LOCALES,d))}}},{key:"insert",value:function(t,n,i){var r=e,a=e.ConflictResolution;t=Wt.normalize(t),void 0===i&&(i=a.USE_NEW);var s=this.localizations_.get(t)||new Map;return n.forEach(function(e,t){s.has(t)&&i!=a.USE_NEW||s.set(t,e)}),this.localizations_.set(t,s),this.updateCurrentMap_(),this.events_.dispatchEvent(new E(r.LOCALE_UPDATED)),this}},{key:"resolveDictionary",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=e.keys()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var s=r.value;e.set(s,this.resolve(s))}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}}},{key:"resolve",value:function(t){var n=e,i=this.currentMap_.get(t);if(i)return i;var r={locales:Array.from(this.currentLocales_),missing:t};return this.events_.dispatchEvent(new E(n.UNKNOWN_LOCALIZATION,r)),""}},{key:"updateCurrentMap_",value:function(){var t=this,n=this.localizations_,i=this.fallbackLocale_,r=this.currentLocales_,a=new Set,s=!0,o=!1,l=void 0;try{for(var u,c=function(){var e=u.value;a.add(e),a.add(Wt.getBase(e));var t=Bt.filter(n.keys(),function(t){return Wt.areSiblings(t,e)});t.sort();var i=!0,r=!1,s=void 0;try{for(var o,l=t[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var c=o.value;a.add(c)}}catch(e){r=!0,s=e}finally{try{i||null==l.return||l.return()}finally{if(r)throw s}}var d=Bt.filter(n.keys(),function(t){return Wt.getBase(t)==e});d.sort();var h=!0,f=!1,p=void 0;try{for(var m,v=d[Symbol.iterator]();!(h=(m=v.next()).done);h=!0){var g=m.value;a.add(g)}}catch(e){f=!0,p=e}finally{try{h||null==v.return||v.return()}finally{if(f)throw p}}},d=r[Symbol.iterator]();!(s=(u=d.next()).done);s=!0)c()}catch(e){o=!0,l=e}finally{try{s||null==d.return||d.return()}finally{if(o)throw l}}a.add(i);var h=[],f=!0,p=!1,m=void 0;try{for(var v,g=a[Symbol.iterator]();!(f=(v=g.next()).done);f=!0){var y=v.value,_=n.get(y);_&&h.push(_)}}catch(e){p=!0,m=e}finally{try{f||null==g.return||g.return()}finally{if(p)throw m}}h.reverse(),this.currentMap_.clear();for(var b=0,w=h;b<w.length;b++){w[b].forEach(function(e,n){t.currentMap_.set(n,e)})}var S=this.currentMap_.keys(),T=new Set,k=!0,C=!1,I=void 0;try{for(var A,x=this.currentLocales_[Symbol.iterator]();!(k=(A=x.next()).done);k=!0){var L=A.value,R=this.localizations_.get(L)||new Map;e.findMissingKeys_(R,S,T)}}catch(e){C=!0,I=e}finally{try{k||null==x.return||x.return()}finally{if(C)throw I}}if(T.size>0){var P={locales:Array.from(r),missing:Array.from(T)};this.events_.dispatchEvent(new E(e.MISSING_LOCALIZATIONS,P))}}}])&&qt(t.prototype,n),i&&qt(t,i),e}();function Kt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Yt.ConflictResolution={USE_OLD:0,USE_NEW:1},Yt.UNKNOWN_LOCALES="unknown-locales",Yt.UNKNOWN_LOCALIZATION="unknown-localization",Yt.MISSING_LOCALIZATIONS="missing-localizations",Yt.LOCALE_CHANGED="locale-changed",Yt.LOCALE_UPDATED="locale-updated",Yt.UnknownLocalesEvent,Yt.UnknownLocalizationEvent,Yt.MissingLocalizationsEvent;
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Xt=window.shaka,$t=(window.goog,function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"createHTMLElement",value:function(e){return document.createElement(e)}},{key:"createVideoElement",value:function(){var e=document.createElement("video");return e.muted=!0,e.width=600,e.height=400,e}},{key:"asHTMLElement",value:function(e){return e}},{key:"asHTMLMediaElement",value:function(e){return e}},{key:"getElementByClassName",value:function(e,t){var n=t.getElementsByClassName(e);return window.asserts.assert(1==n.length,"Should only be one element with class name "+e),Xt.util.Dom.asHTMLElement(n[0])}},{key:"removeAllChildren",value:function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}}],(n=null)&&Kt(t.prototype,n),i&&Kt(t,i),e}());function Zt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Qt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"getFirstDescendantWithClassName",value:function(t,n){return e.getDescendantIfExists(t,n)}},{key:"getDescendantIfExists",value:function(e,t){var n=e.getElementsByClassName(t);return n.length?n[0]:null}},{key:"focusOnTheChosenItem",value:function(t){if(t){var n=e.getDescendantIfExists(t,"shaka-chosen-item");n&&n.parentElement.focus()}}},{key:"checkmarkIcon",value:function(){var e=$t.createHTMLElement("i");return e.classList.add("material-icons"),e.classList.add("shaka-chosen-item"),e.textContent=Mt.MaterialDesignIcons.CHECKMARK,e.setAttribute("aria-hidden","true"),e}},{key:"setDisplay",value:function(e,t){e&&(t?(e.classList.add("shaka-displayed"),e.classList.remove("shaka-hidden")):(e.classList.add("shaka-hidden"),e.classList.remove("shaka-displayed")))}}],(n=null)&&Zt(t.prototype,n),i&&Zt(t,i),e}();
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;function Jt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function en(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function tn(e,t,n){return t&&en(e.prototype,t),n&&en(e,n),e}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */window.shaka,window.goog;var nn=function(){function e(){Jt(this,e),this.bindingMap_=new k}return tn(e,[{key:"release",value:function(){this.removeAll(),this.bindingMap_=null}},{key:"listen",value:function(t,n,i,r){if(this.bindingMap_){var a=new e.Binding_(t,n,i,r);this.bindingMap_.push(n,a)}}},{key:"listenOnce",value:function(e,t,n,i){var r=this;this.listen(e,t,function i(a){r.unlisten(e,t,i),n(a)},i)}},{key:"unlisten",value:function(e,t,n){if(this.bindingMap_){var i=this.bindingMap_.get(t)||[],r=!0,a=!1,s=void 0;try{for(var o,l=i[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var u=o.value;u.target==e&&(n!=u.listener&&n||(u.unlisten(),this.bindingMap_.remove(t,u)))}}catch(e){a=!0,s=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw s}}}}},{key:"removeAll",value:function(){if(this.bindingMap_){var e=this.bindingMap_.getAll(),t=!0,n=!1,i=void 0;try{for(var r,a=e[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){r.value.unlisten()}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}this.bindingMap_.clear()}}}]),e}();nn.ListenerType={},nn.Binding_=function(){function e(t,n,i,r){Jt(this,e),this.target=t,this.type=n,this.listener=i,this.options=nn.Binding_.convertOptions_(t,r),this.target.addEventListener(n,i,this.options)}return tn(e,[{key:"unlisten",value:function(){window.asserts.assert(this.target,"Missing target"),this.target.removeEventListener(this.type,this.listener,this.options),this.target=null,this.listener=null,this.options=!1}}],[{key:"convertOptions_",value:function(e,t){if(null==t)return!1;if("boolean"==typeof t)return t;var n=new Set(["passive","capture"]),i=Object.keys(t).filter(function(e){return!n.has(e)});return window.asserts.assert(0==i.length,"Unsupported flag(s) to addEventListener: "+i.join(",")),nn.Binding_.doesSupportObject_(e)?t:t.capture||!1}},{key:"doesSupportObject_",value:function(e){var t=nn.Binding_.supportsObject_;if(null==t){t=!1;try{var n={},i={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",i),Object.defineProperty(n,"capture",i);var r=function(){};e.addEventListener("test",r,n),e.removeEventListener("test",r,n)}catch(e){t=!1}nn.Binding_.supportsObject_=t}return t||!1}}]),e}(),nn.Binding_.supportsObject_=void 0;var rn=nn;function an(e){return(an="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka;var on=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"serialize",value:function(t){return JSON.stringify(t,function(t,n){if("function"!=typeof n){if(n instanceof Event||n instanceof E){var i={};for(var r in n){var a=n[r];a&&"object"==an(a)?"detail"==r&&(i[r]=a):r in Event||(i[r]=a)}return i}return n instanceof TimeRanges?e.unpackTimeRanges_(n):n instanceof Uint8Array?e.unpackUint8Array_(n):"number"==typeof n?isNaN(n)?"NaN":isFinite(n)?n:n<0?"-Infinity":"Infinity":n}})}},{key:"deserialize",value:function(t){return JSON.parse(t,function(t,n){return"NaN"==n?NaN:"-Infinity"==n?-1/0:"Infinity"==n?1/0:n&&"object"==an(n)&&"TimeRanges"==n.__type__?e.simulateTimeRanges_(n):n&&"object"==an(n)&&"Uint8Array"==n.__type__?e.makeUint8Array_(n):n})}},{key:"unpackTimeRanges_",value:function(e){for(var t={__type__:"TimeRanges",length:e.length,start:[],end:[]},n=0;n<e.length;++n)t.start.push(e.start(n)),t.end.push(e.end(n));return t}},{key:"simulateTimeRanges_",value:function(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}},{key:"unpackUint8Array_",value:function(e){return{__type__:"Uint8Array",entries:Array.from(e)}}},{key:"makeUint8Array_",value:function(e){return new Uint8Array(e.entries)}}],(n=null)&&sn(t.prototype,n),i&&sn(t,i),e}();function ln(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(i,r)}function un(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}on.VideoEvents=["ended","play","playing","pause","pausing","ratechange","seeked","seeking","timeupdate","volumechange"],on.VideoAttributes=["buffered","currentTime","duration","ended","loop","muted","paused","playbackRate","seeking","videoHeight","videoWidth","volume"],on.VideoInitStateAttributes=["loop","playbackRate"],on.VideoVoidMethods=["pause","play"],on.PlayerEvents=["abrstatuschanged","adaptation","buffering","emsg","error","loading","streaming","texttrackvisibility","timelineregionadded","timelineregionenter","timelineregionexit","trackschanged","unloading","variantchanged","textchanged"],on.PlayerGetterMethods={getAssetUri:2,getAudioLanguages:2,getAudioLanguagesAndRoles:2,getBufferedInfo:2,getConfiguration:2,getExpiration:2,getPlaybackRate:2,getTextLanguages:2,getTextLanguagesAndRoles:2,getTextTracks:2,getStats:5,getVariantTracks:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,usingEmbeddedTextTrack:2,getLoadMode:10},on.PlayerGetterMethodsThatRequireLive={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},on.PlayerInitState=[["getConfiguration","configure"]],on.PlayerInitAfterLoadState=[["isTextTrackVisible","setTextTrackVisibility"]],on.PlayerVoidMethods=["addTextTrack","cancelTrickPlay","configure","resetConfiguration","retryStreaming","selectAudioLanguage","selectEmbeddedTextTrack","selectTextLanguage","selectTextTrack","selectVariantTrack","setTextTrackVisibility","trickPlay"],on.PlayerPromiseMethods=["attach","detach","load","unload"],on.InitStateType,on.SHAKA_MESSAGE_NAMESPACE="urn:x-cast:com.google.shaka.v2",on.GENERIC_MESSAGE_NAMESPACE="urn:x-cast:com.google.cast.media";
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var cn=window.shaka,dn=function(){function e(t,n,i,r,a,s){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.receiverAppId_=t,this.statusChangeTimer_=new j(n),this.onFirstCastStateUpdate_=i,this.hasJoinedExistingSession_=!1,this.onRemoteEvent_=r,this.onResumeLocal_=a,this.onInitStateRequired_=s,this.apiReady_=!1,this.isCasting_=!1,this.receiverName_="",this.appData_=null,this.onConnectionStatusChangedBound_=function(){return o.onConnectionStatusChanged_()},this.onMessageReceivedBound_=function(e,t){return o.onMessageReceived_(e,t)},this.cachedProperties_={video:{},player:{}},this.nextAsyncCallId_=0,this.asyncCallPromises_={},this.castPromise_=null,e.instances_.add(this)}var t,n,i;return t=e,(n=[{key:"destroy",value:function(){return e.instances_.delete(this),this.rejectAllPromises_(),e.session_&&this.removeListeners_(),this.statusChangeTimer_&&(this.statusChangeTimer_.stop(),this.statusChangeTimer_=null),this.onRemoteEvent_=null,this.onResumeLocal_=null,this.apiReady_=!1,this.isCasting_=!1,this.appData_=null,this.cachedProperties_=null,this.asyncCallPromises_=null,this.castPromise_=null,this.onConnectionStatusChangedBound_=null,this.onMessageReceivedBound_=null,Promise.resolve()}},{key:"apiReady",value:function(){return this.apiReady_}},{key:"hasReceivers",value:function(){return e.hasReceivers_}},{key:"isCasting",value:function(){return this.isCasting_}},{key:"receiverName",value:function(){return this.receiverName_}},{key:"hasRemoteProperties",value:function(){return 0!=Object.keys(this.cachedProperties_.video).length}},{key:"init",value:function(){var t=this;if(window.chrome&&chrome.cast&&chrome.cast.isAvailable){this.apiReady_=!0,this.statusChangeTimer_.tickNow();var n=new chrome.cast.SessionRequest(this.receiverAppId_),i=new chrome.cast.ApiConfig(n,function(e){return t.onExistingSessionJoined_(e)},function(e){return t.onReceiverStatusChanged_(e)},"origin_scoped");chrome.cast.initialize(i,function(){cn.log.debug("CastSender: init")},function(e){cn.log.error("CastSender: init error",e)}),e.hasReceivers_&&this.statusChangeTimer_.tickAfter(e.STATUS_DELAY);var r=e.session_;r&&r.status!=chrome.cast.SessionStatus.STOPPED?(cn.log.debug("CastSender: re-using existing connection"),this.onExistingSessionJoined_(r)):e.session_=null}}},{key:"setAppData",value:function(e){this.appData_=e,this.isCasting_&&this.sendMessage_({type:"appData",appData:this.appData_})}},{key:"cast",value:function(){var t,n=(t=regeneratorRuntime.mark(function t(n){var i=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.apiReady_){t.next=2;break}throw new Error(Error.Severity.RECOVERABLE,Error.Category.CAST,Error.Code.CAST_API_UNAVAILABLE);case 2:if(e.hasReceivers_){t.next=4;break}throw new Error(Error.Severity.RECOVERABLE,Error.Category.CAST,Error.Code.NO_CAST_RECEIVERS);case 4:if(!this.isCasting_){t.next=6;break}throw new Error(Error.Severity.RECOVERABLE,Error.Category.CAST,Error.Code.ALREADY_CASTING);case 6:return this.castPromise_=new L,chrome.cast.requestSession(function(e){return i.onSessionInitiated_(n,e)},function(e){return i.onConnectionError_(e)}),t.next=10,this.castPromise_;case 10:case"end":return t.stop()}},t,this)}),function(){var e=this,n=arguments;return new Promise(function(i,r){var a=t.apply(e,n);function s(e){ln(a,i,r,s,o,"next",e)}function o(e){ln(a,i,r,s,o,"throw",e)}s(void 0)})});return function(e){return n.apply(this,arguments)}}()},{key:"showDisconnectDialog",value:function(){var e=this;if(this.isCasting_){var t=this.onInitStateRequired_();chrome.cast.requestSession(function(n){return e.onSessionInitiated_(t,n)},function(t){return e.onConnectionError_(t)})}}},{key:"forceDisconnect",value:function(){this.isCasting_&&(this.rejectAllPromises_(),e.session_&&(this.removeListeners_(),e.session_.stop(function(){},function(){}),e.session_=null))}},{key:"get",value:function(e,t){var n=this;window.asserts.assert("video"==e||"player"==e,"Unexpected target name");var i=i;if("video"==e){if(i.VideoVoidMethods.includes(t))return function(){for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return n.remoteCall_.apply(n,[e,t].concat(r))}}else if("player"==e){if(i.PlayerGetterMethodsThatRequireLive[t]){var r=this.get("player","isLive")();if(window.asserts.assert(r,t+" should be called on a live stream!"),!r)return function(){}}if(i.PlayerVoidMethods.includes(t))return function(){for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return n.remoteCall_.apply(n,[e,t].concat(r))};if(i.PlayerPromiseMethods.includes(t))return function(){for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return n.remoteAsyncCall_.apply(n,[e,t].concat(r))};if(i.PlayerGetterMethods[t])return function(){return n.propertyGetter_(e,t)}}return this.propertyGetter_(e,t)}},{key:"set",value:function(e,t,n){window.asserts.assert("video"==e||"player"==e,"Unexpected target name"),this.cachedProperties_[e][t]=n,this.sendMessage_({type:"set",targetName:e,property:t,value:n})}},{key:"onSessionInitiated_",value:function(e,t){cn.log.debug("CastSender: onSessionInitiated"),this.onSessionCreated_(t),this.sendMessage_({type:"init",initState:e,appData:this.appData_}),this.castPromise_.resolve()}},{key:"onConnectionError_",value:function(e){var t=Error.Code.UNEXPECTED_CAST_ERROR;switch(e.code){case"cancel":t=Error.Code.CAST_CANCELED_BY_USER;break;case"timeout":t=Error.Code.CAST_CONNECTION_TIMED_OUT;break;case"receiver_unavailable":t=Error.Code.CAST_RECEIVER_APP_UNAVAILABLE}this.castPromise_.reject(new Error(Error.Severity.CRITICAL,Error.Category.CAST,t,e))}},{key:"propertyGetter_",value:function(e,t){return window.asserts.assert("video"==e||"player"==e,"Unexpected target name"),this.cachedProperties_[e][t]}},{key:"remoteCall_",value:function(e,t){window.asserts.assert("video"==e||"player"==e,"Unexpected target name");for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];this.sendMessage_({type:"call",targetName:e,methodName:t,args:i})}},{key:"remoteAsyncCall_",value:function(e,t){window.asserts.assert("video"==e||"player"==e,"Unexpected target name");var n=new L,i=this.nextAsyncCallId_.toString();this.nextAsyncCallId_++,this.asyncCallPromises_[i]=n;for(var r=arguments.length,a=new Array(r>2?r-2:0),s=2;s<r;s++)a[s-2]=arguments[s];return this.sendMessage_({type:"asyncCall",targetName:e,methodName:t,args:a,id:i}),n}},{key:"onExistingSessionJoined_",value:function(e){cn.log.debug("CastSender: onExistingSessionJoined");var t=this.onInitStateRequired_();this.castPromise_=new L,this.hasJoinedExistingSession_=!0,this.onSessionInitiated_(t,e)}},{key:"onReceiverStatusChanged_",value:function(t){cn.log.debug("CastSender: receiver status",t),e.hasReceivers_="available"==t,this.statusChangeTimer_.tickNow()}},{key:"onSessionCreated_",value:function(t){e.session_=t,t.addUpdateListener(this.onConnectionStatusChangedBound_),t.addMessageListener(CastUtils.SHAKA_MESSAGE_NAMESPACE,this.onMessageReceivedBound_),this.onConnectionStatusChanged_()}},{key:"removeListeners_",value:function(){var t=e.session_;t.removeUpdateListener(this.onConnectionStatusChangedBound_),t.removeMessageListener(CastUtils.SHAKA_MESSAGE_NAMESPACE,this.onMessageReceivedBound_)}},{key:"onConnectionStatusChanged_",value:function(){var t=!!e.session_&&"connected"==e.session_.status;if(cn.log.debug("CastSender: connection status",t),this.isCasting_&&!t){for(var n in this.onResumeLocal_(),this.cachedProperties_)this.cachedProperties_[n]={};this.rejectAllPromises_()}this.isCasting_=t,this.receiverName_=t?e.session_.receiver.friendlyName:"",this.statusChangeTimer_.tickNow()}},{key:"rejectAllPromises_",value:function(){for(var e in this.asyncCallPromises_){var t=this.asyncCallPromises_[e];delete this.asyncCallPromises_[e],t.reject(new Error(Error.Severity.RECOVERABLE,Error.Category.PLAYER,Error.Code.LOAD_INTERRUPTED))}}},{key:"onMessageReceived_",value:function(e,t){var n=CastUtils.deserialize(t);switch(cn.log.v2("CastSender: message",n),n.type){case"event":var i=n.targetName,r=n.event,a=new E(r.type,r);this.onRemoteEvent_(i,a);break;case"update":var s=n.update;for(var o in s){var l=this.cachedProperties_[o]||{};for(var u in s[o])l[u]=s[o][u]}this.hasJoinedExistingSession_&&(this.onFirstCastStateUpdate_(),this.hasJoinedExistingSession_=!1);break;case"asyncComplete":var c=n.id,d=n.error,h=this.asyncCallPromises_[c];if(delete this.asyncCallPromises_[c],window.asserts.assert(h,"Unexpected async id"),!h)break;if(d){var f=new Error(d.severity,d.category,d.code);for(var p in d)f[p]=d[p];h.reject(f)}else h.resolve()}}},{key:"sendMessage_",value:function(t){var n=CastUtils.serialize(t);e.session_.sendMessage(CastUtils.SHAKA_MESSAGE_NAMESPACE,n,function(){},cn.log.error)}}])&&un(t.prototype,n),i&&un(t,i),e}();function hn(e){return(hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fn(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(i,r)}function pn(e){return function(){var t=this,n=arguments;return new Promise(function(i,r){var a=e.apply(t,n);function s(e){fn(a,i,r,s,o,"next",e)}function o(e){fn(a,i,r,s,o,"throw",e)}s(void 0)})}}function mn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function vn(e,t){return!t||"object"!==hn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gn(e){return(gn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yn(e,t){return(yn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dn.STATUS_DELAY=.02,dn.hasReceivers_=!1,dn.session_=null,dn.instances_=new Set,dn.onSdkLoaded_=function(e){if(e){var t=!0,n=!1,i=void 0;try{for(var r,a=dn.instances_[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){r.value.init()}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}}},window.__onGCastApiAvailable=dn.onSdkLoaded_;var _n=window.shaka,bn=(window.goog,function(e){function t(e,n,i){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=vn(this,gn(t).call(this))).localVideo_=e,r.localPlayer_=n,r.videoProxy_=null,r.playerProxy_=null,r.videoEventTarget_=null,r.playerEventTarget_=null,r.eventManager_=null,r.receiverAppId_=i,r.receiverAppId_&&(r.sender_=new dn(i,function(){return r.onCastStatusChanged_()},function(){return r.onFirstCastStateUpdate_()},function(e,t){return r.onRemoteEvent_(e,t)},function(){return r.onResumeLocal_()},function(){return r.getInitState_()})),r.init_(),r}var n,i,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yn(e,t)}(t,A),n=t,(i=[{key:"destroy",value:function(e){e&&this.sender_&&this.sender_.forceDisconnect(),this.eventManager_&&(this.eventManager_.release(),this.eventManager_=null);var t=[];return this.localPlayer_&&(t.push(this.localPlayer_.destroy()),this.localPlayer_=null),this.sender_&&(t.push(this.sender_.destroy()),this.sender_=null),this.localVideo_=null,this.videoProxy_=null,this.playerProxy_=null,Promise.all(t)}},{key:"getVideo",value:function(){return this.videoProxy_}},{key:"getPlayer",value:function(){return this.playerProxy_}},{key:"canCast",value:function(){return!!this.sender_&&(this.sender_.apiReady()&&this.sender_.hasReceivers())}},{key:"isCasting",value:function(){return!!this.sender_&&this.sender_.isCasting()}},{key:"receiverName",value:function(){return this.sender_?this.sender_.receiverName():""}},{key:"cast",value:function(){var e=pn(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender_){e.next=2;break}throw new Error(Error.Severity.RECOVERABLE,Error.Category.CAST,Error.Code.CAST_RECEIVER_APP_ID_MISSING);case 2:return t=this.getInitState_(),e.next=5,this.sender_.cast(t);case 5:if(this.localPlayer_){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.localPlayer_.unload();case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"setAppData",value:function(e){this.sender_&&this.sender_.setAppData(e)}},{key:"suggestDisconnect",value:function(){this.sender_&&this.sender_.showDisconnectDialog()}},{key:"forceDisconnect",value:function(){this.sender_&&this.sender_.forceDisconnect()}},{key:"changeReceiverId",value:function(){var e=pn(regeneratorRuntime.mark(function e(t){var n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t!=this.receiverAppId_){e.next=2;break}return e.abrupt("return");case 2:if(this.receiverAppId_=t,!this.sender_){e.next=8;break}return this.sender_.forceDisconnect(),e.next=7,this.sender_.destroy();case 7:this.sender_=null;case 8:this.sender_=new dn(t,function(){return n.onCastStatusChanged_()},function(){return n.onFirstCastStateUpdate_()},function(e,t){return n.onRemoteEvent_(e,t)},function(){return n.onResumeLocal_()},function(){return n.getInitState_()}),this.sender_.init();case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"init_",value:function(){var e=this;this.sender_&&this.sender_.init(),this.eventManager_=new rn;var t=!0,n=!1,i=void 0;try{for(var r,a=on.VideoEvents[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var s=r.value;this.eventManager_.listen(this.localVideo_,s,function(t){return e.videoProxyLocalEvent_(t)})}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}var o=!0,l=!1,u=void 0;try{for(var c,d=on.PlayerEvents[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){var h=c.value;this.eventManager_.listen(this.localPlayer_,h,function(t){return e.playerProxyLocalEvent_(t)})}}catch(e){l=!0,u=e}finally{try{o||null==d.return||d.return()}finally{if(l)throw u}}this.videoProxy_={};var f=function(t){Object.defineProperty(e.videoProxy_,t,{configurable:!1,enumerable:!0,get:function(){return e.videoProxyGet_(t)},set:function(n){return e.videoProxySet_(t,n)}})};for(var p in this.localVideo_)f(p);this.playerProxy_={},this.iterateOverPlayerMethods_(function(t,n){window.asserts.assert(e.playerProxy_,"Must have player proxy!"),Object.defineProperty(e.playerProxy_,t,{configurable:!1,enumerable:!0,get:function(){return e.playerProxyGet_(t)}})}),this.videoEventTarget_=new A,this.videoEventTarget_.dispatchTarget=this.videoProxy_,this.playerEventTarget_=new A,this.playerEventTarget_.dispatchTarget=this.playerProxy_}},{key:"iterateOverPlayerMethods_",value:function(e){window.asserts.assert(this.localPlayer_,"Must have player!");var t=this.localPlayer_,n=new Set;for(var i in t)n.has(i)||(n.add(i),e(i,t[i]));for(var r=Object.getPrototypeOf(t),a=Object.getPrototypeOf({});r&&r!=a;){var s=!0,o=!1,l=void 0;try{for(var u,c=Object.getOwnPropertyNames(r)[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){var d=u.value;if(!d.endsWith("_")&&"constructor"!=d){var h=t[d];"function"==typeof h&&(n.has(d)||(n.add(d),e(d,h)))}}}catch(e){o=!0,l=e}finally{try{s||null==c.return||c.return()}finally{if(o)throw l}}r=Object.getPrototypeOf(r)}}},{key:"getInitState_",value:function(){var e={video:{},player:{},playerAfterLoad:{},manifest:this.localPlayer_.getAssetUri(),startTime:null};this.localVideo_.pause();var t=!0,n=!1,i=void 0;try{for(var r,a=on.VideoInitStateAttributes[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var s=r.value;e.video[s]=this.localVideo_[s]}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}this.localVideo_.ended||(e.startTime=this.localVideo_.currentTime);var o=!0,l=!1,u=void 0;try{for(var c,d=on.PlayerInitState[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){var h=c.value,f=h[0],p=h[1],m=this.localPlayer_[f]();e.player[p]=m}}catch(e){l=!0,u=e}finally{try{o||null==d.return||d.return()}finally{if(l)throw u}}var v=!0,g=!1,y=void 0;try{for(var _,b=on.PlayerInitAfterLoadState[Symbol.iterator]();!(v=(_=b.next()).done);v=!0){var w=_.value,E=w[0],S=w[1],T=this.localPlayer_[E]();e.playerAfterLoad[S]=T}}catch(e){g=!0,y=e}finally{try{v||null==b.return||b.return()}finally{if(g)throw y}}return e}},{key:"onCastStatusChanged_",value:function(){var e=new E("caststatuschanged");this.dispatchEvent(e)}},{key:"onFirstCastStateUpdate_",value:function(){var e=this.videoProxy_.paused?"pause":"play",t=new E(e);this.videoEventTarget_.dispatchEvent(t)}},{key:"onResumeLocal_",value:function(){var e=this;window.asserts.assert(this.sender_,"Cast sender should not be null!");var t=!0,n=!1,i=void 0;try{for(var r,a=on.PlayerInitState[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var s=r.value,o=s[0],l=s[1],u=this.sender_.get("player",o)();this.localPlayer_[l](u)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}var c=this.sender_.get("player","getAssetUri")(),d=this.sender_.get("video","ended"),h=Promise.resolve(),f=this.localVideo_.autoplay,p=null;d||(p=this.sender_.get("video","currentTime")),c&&(this.localVideo_.autoplay=!1,h=this.localPlayer_.load(c,p));var m={},v=!0,g=!1,y=void 0;try{for(var _,b=on.VideoInitStateAttributes[Symbol.iterator]();!(v=(_=b.next()).done);v=!0){var w=_.value;m[w]=this.sender_.get("video",w)}}catch(e){g=!0,y=e}finally{try{v||null==b.return||b.return()}finally{if(g)throw y}}h.then(function(){if(e.localVideo_){var t=!0,n=!1,i=void 0;try{for(var r,a=on.VideoInitStateAttributes[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var s=r.value;e.localVideo_[s]=m[s]}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}var o=!0,l=!1,u=void 0;try{for(var d,h=on.PlayerInitAfterLoadState[Symbol.iterator]();!(o=(d=h.next()).done);o=!0){var p=d.value,v=p[0],g=p[1],y=e.sender_.get("player",v)();e.localPlayer_[g](y)}}catch(e){l=!0,u=e}finally{try{o||null==h.return||h.return()}finally{if(l)throw u}}e.localVideo_.autoplay=f,c&&e.localVideo_.play()}},function(t){window.asserts.assert(t instanceof Error,"Wrong error type!");var n=new E("error",{detail:t});e.localPlayer_.dispatchEvent(n)})}},{key:"videoProxyGet_",value:function(e){var t=this;if("addEventListener"==e)return function(e,n,i){return t.videoEventTarget_.addEventListener(e,n,i)};if("removeEventListener"==e)return function(e,n,i){return t.videoEventTarget_.removeEventListener(e,n,i)};if(this.sender_&&this.sender_.isCasting()&&!this.sender_.hasRemoteProperties()){var n=this.localVideo_[e];if("function"!=typeof n)return n}if(!this.sender_||!this.sender_.isCasting()){var i=this.localVideo_[e];return"function"==typeof i&&(i=i.bind(this.localVideo_)),i}return this.sender_.get("video",e)}},{key:"videoProxySet_",value:function(e,t){this.sender_&&this.sender_.isCasting()?this.sender_.set("video",e,t):this.localVideo_[e]=t}},{key:"videoProxyLocalEvent_",value:function(e){if(!this.sender_||!this.sender_.isCasting()){var t=new E(e.type,e);this.videoEventTarget_.dispatchEvent(t)}}},{key:"playerProxyGet_",value:function(e){var t=this;if("addEventListener"==e)return function(e,n,i){return t.playerEventTarget_.addEventListener(e,n,i)};if("removeEventListener"==e)return function(e,n,i){return t.playerEventTarget_.removeEventListener(e,n,i)};if("getMediaElement"==e)return function(){return t.videoProxy_};if("getSharedConfiguration"==e)return _n.log.warning("Can't share configuration across a network. Returning copy."),this.sender_?this.sender_.get("player","getConfiguration"):this.localPlayer_.getConfiguration();if("getNetworkingEngine"==e)return this.sender_.isCasting()&&_n.log.warning("NOTE: getNetworkingEngine() is always local!"),function(){return t.localPlayer_.getNetworkingEngine()};if(this.sender_&&this.sender_.isCasting()){if("getManifest"==e||"drmInfo"==e)return function(){return _n.log.alwaysWarn(e+"() does not work while casting!"),null};if("getManifestUri"==e)return _n.Deprecate.deprecateFeature(2,6,"getManifestUri",'Please use "getAssetUri" instead.'),this.playerProxyGet_("getAssetUri");if("attach"==e||"detach"==e)return function(){return _n.log.alwaysWarn(e+"() does not work while casting!"),Promise.resolve()}}if(this.sender_&&this.sender_.isCasting()&&!this.sender_.hasRemoteProperties()&&on.PlayerGetterMethods[e]){var n=this.localPlayer_[e];return window.asserts.assert("function"==typeof n,"only methods on Player"),n.bind(this.localPlayer_)}if(!this.sender_||!this.sender_.isCasting()){var i=this.localPlayer_[e];return window.asserts.assert("function"==typeof i,"only methods on Player"),i.bind(this.localPlayer_)}return this.sender_.get("player",e)}},{key:"playerProxyLocalEvent_",value:function(e){this.sender_&&this.sender_.isCasting()||this.playerEventTarget_.dispatchEvent(e)}},{key:"onRemoteEvent_",value:function(e,t){window.asserts.assert(this.sender_&&this.sender_.isCasting(),"Should only receive remote events while casting"),this.sender_.isCasting()&&("video"==e?this.videoEventTarget_.dispatchEvent(t):"player"==e&&this.playerEventTarget_.dispatchEvent(t))}}])&&mn(n.prototype,i),r&&mn(n,r),t}());function wn(e){return(wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function En(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(i,r)}function Sn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Tn(e,t){return!t||"object"!==wn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function kn(e){return(kn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Cn(e,t){return(Cn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */window.shaka=window.shaka||{};var In=window.shaka;window.goog=window.goog||{};window.goog;var An=function(e){function t(e,n,i,r){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=Tn(this,kn(t).call(this))).enabled_=!0,a.overrideCssShowControls_=!1,a.config_=r,a.castProxy_=new bn(i,e,a.config_.castReceiverAppId),a.castAllowed_=!0,a.video_=a.castProxy_.getVideo(),a.localVideo_=i,a.player_=a.castProxy_.getPlayer(),a.localPlayer_=e,a.videoContainer_=n,a.isSeeking_=!1,a.seekTimer_=new j(function(){window.asserts.assert(null!=a.seekBar_,"Seekbar should not be null!"),a.video_.currentTime=parseFloat(a.seekBar_.value)}),a.mouseStillTimer_=new j(function(){a.onMouseStill_()}),a.hideSettingsMenusTimer_=new j(function(){var e,t=!0,n=!1,i=void 0;try{for(var r,s=a.settingsMenus_[Symbol.iterator]();!(t=(r=s.next()).done);t=!0){var o=r.value;e=o,Qt.setDisplay(e,!1)}}catch(e){n=!0,i=e}finally{try{t||null==s.return||s.return()}finally{if(n)throw i}}}),a.timeAndSeekRangeTimer_=new j(function(){a.updateTimeAndSeekRange_()}),a.lastTouchEventTime_=null,a.elements_=[],a.localization_=t.createLocalization_(),a.eventManager_=new rn,a.configure(a.config_),a.updateLocalizedStrings_(),a.pressedKeys_=new Set,a.onCastStatusChange_(),a.timeAndSeekRangeTimer_.tickEvery(.125),a}var n,i,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cn(e,t)}(t,A),n=t,i=[{key:"destroy",value:function(){var e,t=(e=regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.eventManager_&&(this.eventManager_.release(),this.eventManager_=null),this.seekTimer_&&(this.seekTimer_.stop(),this.seekTimer_=null),this.mouseStillTimer_&&(this.mouseStillTimer_.stop(),this.mouseStillTimer_=null),this.hideSettingsMenusTimer_&&(this.hideSettingsMenusTimer_.stop(),this.hideSettingsMenusTimer_=null),this.timeAndSeekRangeTimer_&&(this.timeAndSeekRangeTimer_.stop(),this.timeAndSeekRangeTimer_=null),!this.castProxy_){e.next=9;break}return e.next=8,this.castProxy_.destroy();case 8:this.castProxy_=null;case 9:if(!this.localPlayer_){e.next=13;break}return e.next=12,this.localPlayer_.destroy();case 12:this.localPlayer_=null;case 13:return this.player_=null,this.localVideo_=null,this.video_=null,this.localization_=null,this.pressedKeys_.clear(),e.next=20,Promise.all(this.elements_.map(function(e){return e.destroy()}));case 20:this.elements_=[];case 21:case"end":return e.stop()}},e,this)}),function(){var t=this,n=arguments;return new Promise(function(i,r){var a=e.apply(t,n);function s(e){En(a,i,r,s,o,"next",e)}function o(e){En(a,i,r,s,o,"throw",e)}s(void 0)})});return function(){return t.apply(this,arguments)}}()},{key:"allowCast",value:function(e){this.castAllowed_=e,this.onCastStatusChange_()}},{key:"loadComplete",value:function(){this.onPlayStateChange_()}},{key:"configure",value:function(e){this.config_=e,this.castProxy_.changeReceiverId(e.castReceiverAppId),this.controlsContainer_?($t.removeAllChildren(this.controlsContainer_),this.videoContainer_.removeChild(this.spinnerContainer_)):this.addControlsContainer_(),this.createDOM_(),this.addEventListeners_()}},{key:"setEnabledShakaControls",value:function(e){this.enabled_=e,e?(Qt.setDisplay(this.controlsContainer_,!0),Qt.setDisplay(this.spinnerContainer_,this.player_.isBuffering()),this.video_.tabIndex=-1,this.video_.controls=!1):(Qt.setDisplay(this.controlsContainer_,!1),Qt.setDisplay(this.spinnerContainer_,!1)),this.onPlayStateChange_()}},{key:"setEnabledNativeControls",value:function(e){this.video_.controls=e,this.video_.tabIndex=e?0:-1,e&&this.setEnabledShakaControls(!1)}},{key:"getCastProxy",value:function(){return this.castProxy_}},{key:"getLocalization",value:function(){return this.localization_}},{key:"getVideoContainer",value:function(){return this.videoContainer_}},{key:"getVideo",value:function(){return this.video_}},{key:"getLocalVideo",value:function(){return this.localVideo_}},{key:"getPlayer",value:function(){return this.player_}},{key:"getLocalPlayer",value:function(){return this.localPlayer_}},{key:"getControlsContainer",value:function(){return this.controlsContainer_}},{key:"getConfig",value:function(){return this.config_}},{key:"isSeeking",value:function(){return this.isSeeking_}},{key:"isCastAllowed",value:function(){return this.castAllowed_}},{key:"getDisplayTime",value:function(){return this.isSeeking_?Number(this.seekBar_.value):Number(this.video_.currentTime)}},{key:"setLastTouchEventTime",value:function(e){this.lastTouchEventTime_=e}},{key:"overrideCssShowControls",value:function(){this.overrideCssShowControls_=!0}},{key:"anySettingsMenusAreOpen",value:function(){return this.settingsMenus_.some(function(e){return e.classList.contains("shaka-displayed")})}},{key:"hideSettingsMenus",value:function(){this.hideSettingsMenusTimer_.tickNow()}},{key:"updateLocalizedStrings_",value:function(){var e=Ut.Ids;this.seekBar_&&this.seekBar_.setAttribute(Dt.ARIA_LABEL,this.localization_.resolve(e.SEEK));var t=this.video_.paused&&!this.isSeeking_?e.PLAY:e.PAUSE;this.playButton_.setAttribute(Dt.ARIA_LABEL,this.localization_.resolve(t))}},{key:"createDOM_",value:function(){if(this.seekBarContainer_=null,this.seekBar_=null,this.videoContainer_.classList.add("shaka-video-container"),this.video_.classList.add("shaka-video"),this.addPlayButton_(),this.addBufferingSpinner_(),this.addControlsButtonPanel_(),this.config_.addSeekBar&&this.addSeekBar_(),this.settingsMenus_=Array.from(this.videoContainer_.getElementsByClassName("shaka-settings-menu")),!this.seekBar_){var e=!0,t=!1,n=void 0;try{for(var i,r=this.settingsMenus_[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){i.value.classList.add("shaka-low-position")}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}}},{key:"addControlsContainer_",value:function(){var e=this;this.controlsContainer_=$t.createHTMLElement("div"),this.controlsContainer_.classList.add("shaka-controls-container"),this.videoContainer_.appendChild(this.controlsContainer_),this.eventManager_.listen(this.controlsContainer_,"touchstart",function(t){e.onContainerTouch_(t)},{passive:!1}),this.eventManager_.listen(this.controlsContainer_,"click",function(){e.onContainerClick_()})}},{key:"addPlayButton_",value:function(){this.playButtonContainer_=$t.createHTMLElement("div"),this.playButtonContainer_.classList.add("shaka-play-button-container"),this.controlsContainer_.appendChild(this.playButtonContainer_),this.playButton_=$t.createHTMLElement("button"),this.playButton_.classList.add("shaka-play-button"),this.playButtonContainer_.appendChild(this.playButton_),this.onPlayStateChange_()}},{key:"addBufferingSpinner_",value:function(){this.spinnerContainer_=$t.createHTMLElement("div"),this.spinnerContainer_.classList.add("shaka-spinner-container"),this.videoContainer_.appendChild(this.spinnerContainer_);var e=$t.createHTMLElement("div");e.classList.add("shaka-spinner"),this.spinnerContainer_.appendChild(e);var t="http://www.w3.org/2000/svg",n=document.createElementNS(t,"svg");n.setAttribute("class","shaka-spinner-svg"),n.setAttribute("viewBox","0 0 30 30"),e.appendChild(n);var i=document.createElementNS(t,"circle");i.setAttribute("class","shaka-spinner-path"),i.setAttribute("cx","15"),i.setAttribute("cy","15"),i.setAttribute("r","14.5"),i.setAttribute("fill","none"),i.setAttribute("stroke-width","1"),i.setAttribute("stroke-miterlimit","10"),n.appendChild(i)}},{key:"addControlsButtonPanel_",value:function(){this.bottomControls_=$t.createHTMLElement("div"),this.bottomControls_.classList.add("shaka-bottom-controls"),this.controlsContainer_.appendChild(this.bottomControls_),this.controlsButtonPanel_=$t.createHTMLElement("div"),this.controlsButtonPanel_.classList.add("shaka-controls-button-panel"),this.controlsButtonPanel_.classList.add("shaka-no-propagation"),this.controlsButtonPanel_.classList.add("shaka-show-controls-on-mouse-over"),this.bottomControls_.appendChild(this.controlsButtonPanel_);for(var e=0;e<this.config_.controlPanelElements.length;e++){var t=this.config_.controlPanelElements[e];if(xn.elementNamesToFactories_.get(t)){var n=xn.elementNamesToFactories_.get(t);this.elements_.push(n.create(this.controlsButtonPanel_,this))}else In.log.alwaysWarn("Unrecognized control panel element requested:",t)}}},{key:"addEventListeners_",value:function(){var e=this;this.eventManager_.listen(this.player_,"buffering",function(){e.onBufferingStateChange_()}),this.onBufferingStateChange_(),this.eventManager_.listen(window,"keydown",function(t){return e.onKeyDown_(t)}),this.eventManager_.listen(this.video_,"play",function(){e.onPlayStateChange_()}),this.eventManager_.listen(this.video_,"pause",function(){e.onPlayStateChange_()}),this.eventManager_.listen(this.video_,"ended",function(){e.onPlayStateChange_()}),this.seekBar_&&(this.eventManager_.listen(this.seekBar_,"mousedown",function(){e.onSeekStart_()}),this.eventManager_.listen(this.seekBar_,"touchstart",function(){e.onSeekStart_()},{passive:!0}),this.eventManager_.listen(this.seekBar_,"input",function(){e.onSeekInput_()}),this.eventManager_.listen(this.seekBar_,"touchend",function(){e.onSeekEnd_()}),this.eventManager_.listen(this.seekBar_,"mouseup",function(){e.onSeekEnd_()}));var t=this.videoContainer_.getElementsByClassName("shaka-no-propagation"),n=!0,i=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;this.eventManager_.listen(o,"click",function(e){e.stopPropagation()})}}catch(e){i=!0,r=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}var l=this.videoContainer_.getElementsByClassName("shaka-show-controls-on-mouse-over"),u=!0,c=!1,d=void 0;try{for(var h,f=l[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var p=h.value;this.eventManager_.listen(p,"mouseover",function(){e.overrideCssShowControls_=!0}),this.eventManager_.listen(p,"mouseleave",function(){e.overrideCssShowControls_=!1})}}catch(e){c=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw d}}this.eventManager_.listen(this.videoContainer_,"mousemove",function(t){e.onMouseMove_(t)}),this.eventManager_.listen(this.videoContainer_,"touchmove",function(t){e.onMouseMove_(t)},{passive:!0}),this.eventManager_.listen(this.videoContainer_,"touchend",function(t){e.onMouseMove_(t)},{passive:!0}),this.eventManager_.listen(this.videoContainer_,"mouseleave",function(){e.onMouseLeave_()}),this.eventManager_.listen(this.controlsButtonPanel_,"click",function(){e.hideSettingsMenus()}),this.eventManager_.listen(this.castProxy_,"caststatuschanged",function(){e.onCastStatusChange_()}),this.eventManager_.listen(this.videoContainer_,"keyup",function(t){e.onKeyUp_(t)}),this.eventManager_.listen(this.localization_,Yt.LOCALE_UPDATED,function(t){return e.updateLocalizedStrings_()}),this.eventManager_.listen(this.localization_,Yt.LOCALE_CHANGED,function(t){return e.updateLocalizedStrings_()})}},{key:"addSeekBar_",value:function(){this.seekBarContainer_=$t.createHTMLElement("div"),this.seekBarContainer_.classList.add("shaka-seek-bar-container"),this.seekBar_=document.createElement("input"),this.seekBar_.classList.add("shaka-seek-bar"),this.seekBar_.type="range",this.seekBar_.setAttribute("step","any"),this.seekBar_.setAttribute("min","0"),this.seekBar_.setAttribute("max","1"),this.seekBar_.value="0",this.seekBar_.classList.add("shaka-no-propagation"),this.seekBar_.classList.add("shaka-show-controls-on-mouse-over"),this.seekBarContainer_.appendChild(this.seekBar_),this.bottomControls_.appendChild(this.seekBarContainer_)}},{key:"onMouseMove_",value:function(e){"mousemove"==e.type&&this.controlsContainer_.classList.remove("shaka-keyboard-navigation"),"touchstart"==e.type||"touchmove"==e.type||"touchend"==e.type||"keyup"==e.type?this.lastTouchEventTime_=Date.now():this.lastTouchEventTime_+1e3<Date.now()&&(this.lastTouchEventTime_=null),this.lastTouchEventTime_&&"mousemove"==e.type||(this.videoContainer_.style.cursor="",this.hideSettingsMenusTimer_.stop(),this.setControlsOpacity_(Mt.Opacity.OPAQUE),this.updateTimeAndSeekRange_(),this.mouseStillTimer_.stop(),"touchend"!=e.type&&"keyup"!=e.type&&this.lastTouchEventTime_||this.mouseStillTimer_.tickAfter(3))}},{key:"onMouseLeave_",value:function(){this.lastTouchEventTime_||this.mouseStillTimer_.tickNow()}},{key:"onMouseStill_",value:function(){this.videoContainer_.style.cursor="none",this.video_.paused&&!this.isSeeking_||this.overrideCssShowControls_?this.setControlsOpacity_(Mt.Opacity.OPAQUE):this.setControlsOpacity_(Mt.Opacity.TRANSPARENT)}},{key:"onContainerTouch_",value:function(e){this.video_.duration&&(this.isOpaque_()?this.lastTouchEventTime_=Date.now():(this.onMouseMove_(e),e.preventDefault()))}},{key:"onContainerClick_",value:function(){this.enabled_&&(this.anySettingsMenusAreOpen()?this.hideSettingsMenusTimer_.tickNow():this.onPlayPauseClick_())}},{key:"onPlayPauseClick_",value:function(){this.enabled_&&this.video_.duration&&(this.player_.cancelTrickPlay(),this.video_.paused?this.video_.play():this.video_.pause())}},{key:"onCastStatusChange_",value:function(){var e=this.castProxy_.isCasting();this.dispatchEvent(new E("caststatuschanged",{newStatus:e})),e?this.controlsContainer_.setAttribute("casting","true"):this.controlsContainer_.removeAttribute("casting")}},{key:"onPlayStateChange_",value:function(){this.video_.ended&&!this.video_.paused&&this.video_.pause(),this.enabled_&&this.video_.paused&&!this.isSeeking_?(this.playButton_.setAttribute("icon","play"),this.playButton_.setAttribute(Dt.ARIA_LABEL,this.localization_.resolve(Ut.Ids.PLAY))):(this.playButton_.setAttribute("icon","pause"),this.playButton_.setAttribute(Dt.ARIA_LABEL,this.localization_.resolve(Ut.Ids.PAUSE)))}},{key:"onSeekStart_",value:function(){this.enabled_&&(this.isSeeking_=!0,this.video_.pause())}},{key:"onSeekInput_",value:function(){this.enabled_&&this.video_.duration&&(this.updateTimeAndSeekRange_(),this.seekTimer_.tickAfter(.125))}},{key:"onSeekEnd_",value:function(){this.enabled_&&(this.seekTimer_.tickNow(),this.isSeeking_=!1,this.video_.play())}},{key:"onKeyUp_",value:function(e){var t=e.key,n=document.activeElement,i=!(!n||!n.classList)&&n.classList.contains("shaka-volume-bar"),r=n&&n.classList&&n.classList.contains("shaka-seek-bar");switch(this.controlsContainer_.contains(n)&&this.onMouseMove_(e),this.pressedKeys_.delete(e.keyCode),t){case"ArrowLeft":i||this.seek_(this.video_.currentTime-5,e);break;case"ArrowRight":i||this.seek_(this.video_.currentTime+5,e);break;case"Home":this.seek_(this.player_.seekRange().start,e);break;case"End":this.seek_(this.player_.seekRange().end,e);break;case" ":r&&this.onPlayPauseClick_()}}},{key:"onBufferingStateChange_",value:function(){this.enabled_&&Qt.setDisplay(this.spinnerContainer_,this.player_.isBuffering())}},{key:"isOpaque_",value:function(){return!!this.enabled_&&(!(!this.castProxy_||!this.castProxy_.isCasting())||null!=this.controlsContainer_.getAttribute("shown"))}},{key:"seek_",value:function(e,t){this.video_.currentTime=e,this.updateTimeAndSeekRange_()}},{key:"updateTimeAndSeekRange_",value:function(){if(this.isOpaque_()){var e=this.isSeeking_?Number(this.seekBar_.value):Number(this.video_.currentTime),t=this.video_.buffered.length,n=t?this.video_.buffered.start(0):0,i=t?this.video_.buffered.end(t-1):0,r=this.player_.seekRange(),a=r.end-r.start;if(this.seekBar_&&(this.seekBar_.min=r.start,this.seekBar_.max=r.end),this.player_.isLive()){var s=Math.floor(r.end-e);e=Math.max(0,s),!this.isSeeking_&&this.seekBar_&&(this.seekBar_.value=r.end-e)}else!this.isSeeking_&&this.seekBar_&&(this.seekBar_.value=e);if(this.seekBar_){var o=this.player_.seekRange();if(o.end-o.start<Dt.MIN_SEEK_WINDOW_TO_SHOW_SEEKBAR){Qt.setDisplay(this.seekBarContainer_,!1);var l=!0,u=!1,c=void 0;try{for(var d,h=this.settingsMenus_[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){d.value.classList.add("shaka-low-position")}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}}else{Qt.setDisplay(this.seekBarContainer_,!0);var f=!0,p=!1,m=void 0;try{for(var v,g=this.settingsMenus_[Symbol.iterator]();!(f=(v=g.next()).done);f=!0){v.value.classList.remove("shaka-low-position")}}catch(e){p=!0,m=e}finally{try{f||null==g.return||g.return()}finally{if(p)throw m}}var y=["to right"];if(0==t)y.push("#000 0%");else{var _=Math.max(n,o.start),b=Math.min(i,o.end),w=(_-o.start)/a||0,S=(b-o.start)/a||0,T=(e-o.start)/a||0;y.push(Dt.SEEK_BAR_BASE_COLOR+" "+100*w+"%"),y.push(Dt.SEEK_BAR_PLAYED_COLOR+" "+100*w+"%"),y.push(Dt.SEEK_BAR_PLAYED_COLOR+" "+100*T+"%"),y.push(Dt.SEEK_BAR_BUFFERED_COLOR+" "+100*T+"%"),y.push(Dt.SEEK_BAR_BUFFERED_COLOR+" "+100*S+"%"),y.push(Dt.SEEK_BAR_BASE_COLOR+" "+100*S+"%")}this.seekBarContainer_.style.background="linear-gradient("+y.join(",")+")"}}this.dispatchEvent(new E("timeandseekrangeupdated"))}}},{key:"onKeyDown_",value:function(e){var t=this;this.pressedKeys_.add(e.keyCode);var n=this.anySettingsMenusAreOpen();e.keyCode==Dt.KEYCODE_TAB&&(this.controlsContainer_.classList.add("shaka-keyboard-navigation"),this.eventManager_.listen(window,"mousedown",function(){return t.onMouseDown_()})),e.keyCode==Dt.KEYCODE_ESCAPE&&this.hideSettingsMenusTimer_.tickNow(),n&&this.pressedKeys_.has(Dt.KEYCODE_TAB)&&this.keepFocusInMenu_(e)}},{key:"keepFocusInMenu_",value:function(e){var t=this.settingsMenus_.filter(function(e){return e.classList.contains("shaka-displayed")})[0];if(t.childNodes.length){for(var n=t.firstElementChild;n&&n.classList.contains("shaka-hidden");)n=n.nextElementSibling;for(var i=t.lastElementChild;i&&i.classList.contains("shaka-hidden");)i=i.previousElementSibling;var r=document.activeElement;this.pressedKeys_.has(Dt.KEYCODE_SHIFT)?r==n&&(e.preventDefault(),i.focus()):r==i&&(e.preventDefault(),n.focus())}}},{key:"onMouseDown_",value:function(){var e=this;this.eventManager_.unlisten(window,"mousedown"),this.eventManager_.listen(window,"keydown",function(t){return e.onKeyDown_(t)})}},{key:"setControlsOpacity_",value:function(e){e==Mt.Opacity.OPAQUE?this.controlsContainer_.setAttribute("shown","true"):(this.controlsContainer_.removeAttribute("shown"),this.hideSettingsMenusTimer_.tickAfter(2))}}],r=[{key:"registerElement",value:function(e,t){xn.elementNamesToFactories_.set(e,t)}},{key:"createLocalization_",value:function(){var e=new Yt("en");return Ut.addTo(e),e.changeLocale(navigator.languages||[]),e}}],i&&Sn(n.prototype,i),r&&Sn(n,r),t}(),xn={};function Ln(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Pn(e,t,n){return t&&Rn(e.prototype,t),n&&Rn(e,n),e}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xn.elementNamesToFactories_=new Map;var Dn=function(){function e(t,n){Ln(this,e),this.parent=t,this.button_=document.createElement("button"),this.button_.classList.add("material-icons"),this.button_.classList.add("close-button"),this.button_.textContent="close",this.parent.appendChild(this.button_),this.button_.addEventListener("click",function(){document.fullscreenElement&&document.exitFullscreen(),document.pictureInPictureElement&&document.exitPictureInPicture(),fo.unload()})}return Pn(e,[{key:"destroy",value:function(){return Promise.resolve()}}]),e}();function On(e){return(On="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Dn.Factory=function(){function e(){Ln(this,e)}return Pn(e,[{key:"create",value:function(e,t){return new Dn(e,t)}}]),e}();
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Nn=window.shaka,Un=(window.goog,function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"mergeConfigObjects",value:function(t,n,i,r,a){window.asserts.assert(t,"Destination config must not be null!");var s=a in r,o=!0;for(var l in n){var u=a+"."+l,c=s?r[a]:i[l];if(s||l in i)if(void 0===n[l])void 0===c||s?delete t[l]:t[l]=ObjectUtils.cloneObject(c);else if(c.constructor==Object&&n[l]&&n[l].constructor==Object){t[l]||(t[l]=ObjectUtils.cloneObject(c));var d=e.mergeConfigObjects(t[l],n[l],c,r,u);o=o&&d}else On(n[l])!=On(c)||null==n[l]||n[l].constructor!=c.constructor?(Nn.log.error("Invalid config, wrong type for "+u),o=!1):"function"==typeof i[l]&&i[l].length!=n[l].length?(Nn.log.warning("Invalid config, wrong number of arguments for "+u),t[l]=n[l]):t[l]=n[l];else Nn.log.error("Invalid config, unrecognized key "+u),o=!1}return o}},{key:"convertToConfigObject",value:function(e,t){for(var n={},i=n,r=0,a=0;;){var s=e.indexOf(".",r);if(s<0)break;if(0==s||"\\"!=e[s-1]){var o=e.substring(a,s).replace(/\\\./g,".");i[o]={},i=i[o],a=s+1}r=s+1}return i[e.substring(a).replace(/\\\./g,".")]=t,n}}],(n=null)&&Mn(t.prototype,n),i&&Mn(t,i),e}());function Fn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Bn=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),window.asserts.assert(t>0,"expected halfLife to be positive"),this.alpha_=Math.exp(Math.log(.5)/t),this.estimate_=0,this.totalWeight_=0}var t,n,i;return t=e,(n=[{key:"sample",value:function(e,t){var n=Math.pow(this.alpha_,e),i=t*(1-n)+n*this.estimate_;isNaN(i)||(this.estimate_=i,this.totalWeight_+=e)}},{key:"getEstimate",value:function(){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}}])&&Fn(t.prototype,n),i&&Fn(t,i),e}();function Vn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka;var Hn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fast_=new Bn(2),this.slow_=new Bn(5),this.bytesSampled_=0,this.minTotalBytes_=128e3,this.minBytes_=16e3}var t,n,i;return t=e,(n=[{key:"sample",value:function(e,t){if(!(t<this.minBytes_)){var n=8e3*t/e,i=e/1e3;this.bytesSampled_+=t,this.fast_.sample(i,n),this.slow_.sample(i,n)}}},{key:"getBandwidthEstimate",value:function(e){return this.bytesSampled_<this.minTotalBytes_?e:Math.min(this.fast_.getEstimate(),this.slow_.getEstimate())}},{key:"hasGoodEstimate",value:function(){return this.bytesSampled_>=this.minTotalBytes_}}])&&Vn(t.prototype,n),i&&Vn(t,i),e}();function Gn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var jn=window.shaka,zn=(window.goog,function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.destroyed_=!1,this.waitOnDestroy_=new L,this.onDestroy_=t}var t,n,i;return t=e,i=[{key:"destroyedError",value:function(e){return new jn.util.Error(jn.util.Error.Severity.CRITICAL,jn.util.Error.Category.PLAYER,jn.util.Error.Code.OBJECT_DESTROYED,e)}}],(n=[{key:"destroyed",value:function(){return this.destroyed_}},{key:"destroy",value:function(){var e=this;return this.destroyed_?this.waitOnDestroy_:(this.destroyed_=!0,this.onDestroy_().then(function(){e.waitOnDestroy_.resolve()},function(){e.waitOnDestroy_.resolve()}))}},{key:"ensureNotDestroyed",value:function(e){if(this.destroyed_)throw e&&e.code==jn.util.Error.Code.OBJECT_DESTROYED?e:jn.util.Destroyer.destroyedError(e)}}])&&Gn(t.prototype,n),i&&Gn(t,i),e}());function Wn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var qn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"asMap",value:function(e){for(var t=new Map,n=0,i=Object.keys(e);n<i.length;n++){var r=i[n];t.set(r,e[r])}return t}},{key:"asObject",value:function(e){var t={};return e.forEach(function(e,n){t[n]=e}),t}}],(n=null)&&Wn(t.prototype,n),i&&Wn(t,i),e}();function Yn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var Kn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"getFullType",value:function(e,t){var n=e;return t&&(n+='; codecs="'+t+'"'),n}},{key:"getExtendedType",value:function(t){var n=[t.mimeType];return e.EXTENDED_MIME_PARAMETERS_.forEach(function(e,i){var r=t[i];r&&n.push(e+'="'+r+'"')}),n.join(";")}},{key:"splitCodecs",value:function(e){return e.split(",")}},{key:"getCodecBase",value:function(t){return e.getCodecParts_(t)[0]}},{key:"getCodecParts_",value:function(e){var t=e.split("."),n=t[0];return t.pop(),[n,t.join(".")]}}],(n=null)&&Yn(t.prototype,n),i&&Yn(t,i),e}();Kn.EXTENDED_MIME_PARAMETERS_=(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels"),Kn.CLOSED_CAPTION_MIMETYPE="application/cea-608";var Xn=Kn;function $n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var Zn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"supportsMediaSource",value:function(){return!!window.MediaSource&&!!MediaSource.isTypeSupported}},{key:"supportsMediaType",value:function(t){return""!=e.anyMediaElement_().canPlayType(t)}},{key:"isEdge",value:function(){return e.userAgentContains_("Edge/")}},{key:"isIE",value:function(){return e.userAgentContains_("Trident/")}},{key:"isTizen",value:function(){return e.userAgentContains_("Tizen")}},{key:"isTizen3",value:function(){return e.userAgentContains_("Tizen 3")}},{key:"isWebOS",value:function(){return e.userAgentContains_("Web0S")}},{key:"isChromecast",value:function(){return e.userAgentContains_("CrKey")}},{key:"isChrome",value:function(){return e.userAgentContains_("Chrome")&&!e.isEdge()}},{key:"isApple",value:function(){return!!navigator.vendor&&navigator.vendor.includes("Apple")}},{key:"isMobile",value:function(){return/(?:iPhone|iPad|iPod|Android)/.test(navigator.userAgent)}},{key:"userAgentContains_",value:function(e){return(navigator.userAgent||"").includes(e)}},{key:"anyMediaElement_",value:function(){return e.cachedMediaElement_?e.cachedMediaElement_:(e.cacheExpirationTimer_||(e.cacheExpirationTimer_=new j(function(){e.cachedMediaElement_=null})),e.cachedMediaElement_=document.querySelector("video")||document.querySelector("audio"),e.cachedMediaElement_||(e.cachedMediaElement_=document.createElement("video")),e.cacheExpirationTimer_.tickAfter(1),e.cachedMediaElement_)}}],(n=null)&&$n(t.prototype,n),i&&$n(t,i),e}();Zn.cacheExpirationTimer_=null,Zn.cachedMediaElement_=null;var Qn=Zn;function Jn(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ei(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ti=window.shaka,ni=(window.goog,function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"fromUTF8",value:function(t){if(!t)return"";var n=new Uint8Array(t);239==n[0]&&187==n[1]&&191==n[2]&&(n=n.subarray(3));var i=e.fromCharCode(n),r=escape(i);try{return decodeURIComponent(r)}catch(e){throw new ti.util.Error(ti.util.Error.Severity.CRITICAL,ti.util.Error.Category.TEXT,ti.util.Error.Code.BAD_ENCODING)}}},{key:"fromUTF16",value:function(e,t,n){if(!e)return"";if(!n&&e.byteLength%2!=0)throw ti.log.error("Data has an incorrect length, must be even."),new ti.util.Error(ti.util.Error.Severity.CRITICAL,ti.util.Error.Category.TEXT,ti.util.Error.Code.BAD_ENCODING);var i;if(e instanceof ArrayBuffer)i=e;else{var r=new Uint8Array(e.byteLength);r.set(new Uint8Array(e)),i=r.buffer}for(var a=Math.floor(e.byteLength/2),s=new Uint16Array(a),o=new DataView(i),l=0;l<a;l++)s[l]=o.getUint16(2*l,t);return ti.util.StringUtils.fromCharCode(s)}},{key:"fromBytesAutoDetect",value:function(e){var t=ti.util.StringUtils,n=new Uint8Array(e);if(239==n[0]&&187==n[1]&&191==n[2])return t.fromUTF8(n);if(254==n[0]&&255==n[1])return t.fromUTF16(n.subarray(2),!1);if(255==n[0]&&254==n[1])return t.fromUTF16(n.subarray(2),!0);var i=function(e){return n.byteLength<=e||n[e]>=32&&n[e]<=126};if(ti.log.debug("Unable to find byte-order-mark, making an educated guess."),0==n[0]&&0==n[2])return t.fromUTF16(e,!1);if(0==n[1]&&0==n[3])return t.fromUTF16(e,!0);if(i(0)&&i(1)&&i(2)&&i(3))return t.fromUTF8(e);throw new ti.util.Error(ti.util.Error.Severity.CRITICAL,ti.util.Error.Category.TEXT,ti.util.Error.Code.UNABLE_TO_DETECT_ENCODING)}},{key:"toUTF8",value:function(e){for(var t=encodeURIComponent(e),n=unescape(t),i=new Uint8Array(n.length),r=0;r<n.length;++r)i[r]=n.charCodeAt(r);return i.buffer}},{key:"toUTF16",value:function(e,t){for(var n=new Uint8Array(2*e.length),i=new DataView(n.buffer),r=0;r<e.length;++r){var a=e.charCodeAt(r);i.setUint16(2*r,a,t)}return n.buffer}},{key:"fromCharCode",value:function(t){if(!e.fromCharCodeImpl_)for(var n=function(t){if(function(e){try{var t=new Uint8Array(e),n=String.fromCharCode.apply(String,Jn(t));return window.asserts.assert(n,"Should get value"),!0}catch(e){return!1}}(t))return e.fromCharCodeImpl_=function(e){for(var n="",i=0;i<e.length;i+=t){var r=e.subarray(i,i+t);n+=String.fromCharCode.apply(String,Jn(r))}return n},"break"},i=65536;i>0;i/=2){if("break"===n(i))break}return window.asserts.assert(e.fromCharCodeImpl_,"Unable to create a fromCharCode method"),e.fromCharCodeImpl_(t)}}],(n=null)&&ei(t.prototype,n),i&&ei(t,i),e}());function ii(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}ni.fromCharCodeImpl_=null;
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var ri=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"toStandardBase64",value:function(e){var t=ni.fromCharCode(e);return btoa(t)}},{key:"toBase64",value:function(t,n){n=null==n||n;var i=e.toStandardBase64(t).replace(/\+/g,"-").replace(/\//g,"_");return n?i:i.replace(/[=]*$/,"")}},{key:"fromBase64",value:function(e){for(var t=window.atob(e.replace(/-/g,"+").replace(/_/g,"/")),n=new Uint8Array(t.length),i=0;i<t.length;++i)n[i]=t.charCodeAt(i);return n}},{key:"fromHex",value:function(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length;n+=2)t[n/2]=window.parseInt(e.substr(n,2),16);return t}},{key:"toHex",value:function(e){for(var t="",n=0;n<e.length;++n){var i=e[n].toString(16);1==i.length&&(i="0"+i),t+=i}return t}},{key:"equal",value:function(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;if(e.length!=t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!=t[n])return!1;return!0}},{key:"concat",value:function(){for(var e=0,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(var r=0;r<n.length;++r)e+=n[r].length;for(var a=new Uint8Array(e),s=0,o=0;o<n.length;++o)a.set(n[o],s),s+=n[o].length;return a}},{key:"toDataView",value:function(e){return e instanceof ArrayBuffer?new DataView(e):new DataView(e.buffer,e.byteOffset,e.byteLength)}}],(n=null)&&ii(t.prototype,n),i&&ii(t,i),e}();function ai(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(i,r)}function si(e){return function(){var t=this,n=arguments;return new Promise(function(i,r){var a=e.apply(t,n);function s(e){ai(a,i,r,s,o,"next",e)}function o(e){ai(a,i,r,s,o,"throw",e)}s(void 0)})}}function oi(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var li=new M,ui=window.shaka,ci=(window.goog,function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.playerInterface_=t,this.supportedTypes_=new Set,this.mediaKeys_=null,this.video_=null,this.initialized_=!1,this.currentDrmInfo_=null,this.eventManager_=new rn,this.activeSessions_=new Map,this.offlineSessionIds_=[],this.allSessionsLoaded_=new L,this.config_=null,this.onError_=function(e){n.allSessionsLoaded_.reject(e),t.onError(e)},this.keyStatusByKeyId_=new Map,this.announcedKeyStatusByKeyId_=new Map,this.keyStatusTimer_=new j(function(){return n.processKeyStatusChanges_()}),this.usePersistentLicenses_=!1,this.mediaKeyMessageEvents_=[],this.initialRequestsSent_=!1,this.expirationTimer_=new j(function(){n.pollExpiration_()}).tickEvery(1);this.allSessionsLoaded_.catch(function(){}),this.destroyer_=new zn(function(){return n.destroyNow_()})}var t,n,i;return t=e,n=[{key:"destroy",value:function(){return this.destroyer_.destroy()}},{key:"destroyNow_",value:function(){var t=si(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.eventManager_.release(),this.eventManager_=null,this.allSessionsLoaded_.reject(),this.expirationTimer_.stop(),this.expirationTimer_=null,this.keyStatusTimer_.stop(),this.keyStatusTimer_=null,n=Array.from(this.activeSessions_.keys()),this.activeSessions_.clear(),t.next=11,Promise.all(n.map(function(t){return Promise.resolve().then(si(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return ui.log.v1("Closing session",t.sessionId),n.prev=1,n.next=4,e.closeSession_(t);case 4:n.next=8;break;case 6:n.prev=6,n.t0=n.catch(1);case 8:case"end":return n.stop()}},n,null,[[1,6]])})))}));case 11:if(!this.video_){t.next=21;break}return window.asserts.assert(!this.video_.src,"video src must be removed first!"),t.prev=13,t.next=16,this.video_.setMediaKeys(null);case 16:t.next=20;break;case 18:t.prev=18,t.t0=t.catch(13);case 20:this.video_=null;case 21:this.currentDrmInfo_=null,this.supportedTypes_.clear(),this.mediaKeys_=null,this.offlineSessionIds_=[],this.config_=null,this.onError_=function(){},this.playerInterface_=null;case 28:case"end":return t.stop()}},t,this,[[13,18]])}));return function(){return t.apply(this,arguments)}}()},{key:"configure",value:function(e){this.config_=e}},{key:"initForStorage",value:function(e,t){return this.offlineSessionIds_=[],this.usePersistentLicenses_=t,this.init_(e)}},{key:"initForPlayback",value:function(e,t){return this.offlineSessionIds_=t,this.usePersistentLicenses_=t.length>0,this.init_(e)}},{key:"initForRemoval",value:function(e,t,n,i,r){var a=new Map;return a.set(e,{audioCapabilities:i,videoCapabilities:r,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:e,drmInfos:[{keySystem:e,licenseServerUri:t,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:n,initData:null,keyIds:null}]}),this.queryMediaKeys_(a)}},{key:"init_",value:function(t){window.asserts.assert(this.config_,"DrmEngine configure() must be called before init()!");var n=t.some(function(e){return e.drmInfos.length>0});if(!n){var i=qn.asMap(this.config_.servers);e.replaceDrmInfo_(t,i)}var r=this.configureClearKey_();if(r){var a=!0,s=!1,o=void 0;try{for(var l,u=t[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){l.value.drmInfos=[r]}}catch(e){s=!0,o=e}finally{try{a||null==u.return||u.return()}finally{if(s)throw o}}}var c=!0,d=!1,h=void 0;try{for(var f,p=t[Symbol.iterator]();!(c=(f=p.next()).done);c=!0){var m=f.value,v=!0,g=!1,y=void 0;try{for(var _,b=m.drmInfos[Symbol.iterator]();!(v=(_=b.next()).done);v=!0){var w=_.value;e.fillInDrmInfoDefaults_(w,qn.asMap(this.config_.servers),qn.asMap(this.config_.advanced||{}))}}catch(e){g=!0,y=e}finally{try{v||null==b.return||b.return()}finally{if(g)throw y}}}}catch(e){d=!0,h=e}finally{try{c||null==p.return||p.return()}finally{if(d)throw h}}var E=this.prepareMediaKeyConfigsForVariants_(t);if(!E.size)return this.initialized_=!0,Promise.resolve();var S=this.queryMediaKeys_(E);return n?S:S.catch(function(){})}},{key:"attach",value:function(){var e=si(regeneratorRuntime.mark(function e(t){var n,i,r,a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.mediaKeys_){e.next=3;break}return this.eventManager_.listenOnce(t,"encrypted",function(e){a.onError_(new M(li.severity.CRITICAL,li.category.DRM,li.code.ENCRYPTED_CONTENT_WITHOUT_DRM_INFO))}),e.abrupt("return");case 3:return this.video_=t,this.eventManager_.listenOnce(this.video_,"play",function(){return a.onPlay_()}),n=(n=this.video_.setMediaKeys(this.mediaKeys_)).catch(function(e){return Promise.reject(new M(li.severity.CRITICAL,li.category.DRM,li.code.FAILED_TO_ATTACH_TO_VIDEO,e.message))}),i=this.setServerCertificate(),e.next=10,Promise.all([n,i]);case 10:this.destroyer_.ensureNotDestroyed(),this.createOrLoad(),this.currentDrmInfo_.initData.length||this.offlineSessionIds_.length||(r=function(e){return a.newInitData(e.initDataType,new Uint8Array(e.initData))},this.eventManager_.listen(this.video_,"encrypted",r));case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"setServerCertificate",value:function(){var e=si(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.asserts.assert(this.initialized_,"Must call init() before setServerCertificate"),!(this.mediaKeys_&&this.currentDrmInfo_&&this.currentDrmInfo_.serverCertificate&&this.currentDrmInfo_.serverCertificate.length)){e.next=12;break}return e.prev=2,e.next=5,this.mediaKeys_.setServerCertificate(this.currentDrmInfo_.serverCertificate);case 5:e.sent||ui.log.warning("Server certificates are not supported by the key system.  The server certificate has been ignored."),e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(2),new M(li.severity.CRITICAL,li.category.DRM,li.code.INVALID_SERVER_CERTIFICATE,e.t0.message);case 12:case"end":return e.stop()}},e,this,[[2,9]])}));return function(){return e.apply(this,arguments)}}()},{key:"removeSession",value:function(){var e=si(regeneratorRuntime.mark(function e(t){var n,i,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.asserts.assert(this.mediaKeys_,"Must call init() before removeSession"),e.next=3,this.loadOfflineSession_(t);case 3:if(n=e.sent){e.next=7;break}return ui.log.v2("Ignoring attempt to remove missing session",t),e.abrupt("return");case 7:return i=[],(r=this.activeSessions_.get(n))&&(r.updatePromise=new L,i.push(r.updatePromise)),ui.log.v2("Attempting to remove session",t),i.push(n.remove()),e.next=14,Promise.all(i);case 14:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"createOrLoad",value:function(){var e=(this.currentDrmInfo_?this.currentDrmInfo_.initData:[])||[],t=!0,n=!1,i=void 0;try{for(var r,a=e[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var s=r.value;this.createTemporarySession_(s.initDataType,s.initData)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}var o=!0,l=!1,u=void 0;try{for(var c,d=this.offlineSessionIds_[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){var h=c.value;this.loadOfflineSession_(h)}}catch(e){l=!0,u=e}finally{try{o||null==d.return||d.return()}finally{if(l)throw u}}return e.length||this.offlineSessionIds_.length||this.allSessionsLoaded_.resolve(),this.allSessionsLoaded_}},{key:"newInitData",value:function(e,t){var n=this.activeSessions_.values(),i=!0,r=!1,a=void 0;try{for(var s,o=n[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;if(ri.equal(t,l.initData))return void ui.log.debug("Ignoring duplicate init data.")}}catch(e){r=!0,a=e}finally{try{i||null==o.return||o.return()}finally{if(r)throw a}}this.createTemporarySession_(e,t)}},{key:"initialized",value:function(){return this.initialized_}},{key:"keySystem",value:function(){return this.currentDrmInfo_?this.currentDrmInfo_.keySystem:""}},{key:"willSupport",value:function(e){return!!Qn.isEdge()||this.supportedTypes_.has(e)}},{key:"getSessionIds",value:function(){var e=this.activeSessions_.keys(),t=Bt.map(e,function(e){return e.sessionId});return Array.from(t)}},{key:"getExpiration",value:function(){var e=1/0,t=this.activeSessions_.keys(),n=!0,i=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;isNaN(o.expiration)||(e=Math.min(e,o.expiration))}}catch(e){i=!0,r=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}return e}},{key:"getDrmInfo",value:function(){return this.currentDrmInfo_}},{key:"getKeyStatuses",value:function(){return qn.asObject(this.announcedKeyStatusByKeyId_)}},{key:"prepareMediaKeyConfigsForVariants_",value:function(t){var n=new Set,i=!0,r=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value,u=!0,c=!1,d=void 0;try{for(var h,f=l.drmInfos[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var p=h.value;n.add(p)}}catch(e){c=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw d}}}}catch(e){r=!0,a=e}finally{try{i||null==o.return||o.return()}finally{if(r)throw a}}var m=!0,v=!1,g=void 0;try{for(var y,_=n[Symbol.iterator]();!(m=(y=_.next()).done);m=!0){var b=y.value;e.fillInDrmInfoDefaults_(b,qn.asMap(this.config_.servers),qn.asMap(this.config_.advanced||{}))}}catch(e){v=!0,g=e}finally{try{m||null==_.return||_.return()}finally{if(v)throw g}}var w=this.usePersistentLicenses_?"required":"optional",E=this.usePersistentLicenses_?["persistent-license"]:["temporary"],S=new Map,T=!0,k=!1,C=void 0;try{for(var I,A=n[Symbol.iterator]();!(T=(I=A.next()).done);T=!0){var x=I.value,L={audioCapabilities:[],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:w,sessionTypes:E,label:x.keySystem,drmInfos:[]};S.set(x.keySystem,L)}}catch(e){k=!0,C=e}finally{try{T||null==A.return||A.return()}finally{if(k)throw C}}var R=!0,P=!1,D=void 0;try{for(var O,M=t[Symbol.iterator]();!(R=(O=M.next()).done);R=!0){var N=O.value,U=N.audio,F=N.video,B=U?Xn.getFullType(U.mimeType,U.codecs):"",V=F?Xn.getFullType(F.mimeType,F.codecs):"",H=!0,G=!1,j=void 0;try{for(var z,W=N.drmInfos[Symbol.iterator]();!(H=(z=W.next()).done);H=!0){var q=z.value,Y=S.get(q.keySystem);if(window.asserts.assert(Y,"Any missing configs should have be filled in before."),Y.drmInfos.push(q),q.distinctiveIdentifierRequired&&(Y.distinctiveIdentifier="required"),q.persistentStateRequired&&(Y.persistentState="required"),U){var K={robustness:q.audioRobustness||"",contentType:B};Y.audioCapabilities.push(K)}if(F){var X={robustness:q.videoRobustness||"",contentType:V};Y.videoCapabilities.push(X)}}}catch(e){G=!0,j=e}finally{try{H||null==W.return||W.return()}finally{if(G)throw j}}}}catch(e){P=!0,D=e}finally{try{R||null==M.return||M.return()}finally{if(P)throw D}}return S}},{key:"queryMediaKeys_",value:function(){var t=si(regeneratorRuntime.mark(function t(n){var i,r,a,s,o,l,u,c,d,h,f,p,m,v,g,y,_,b,w,E,S,T,k,C,I,A,x,L,R,P,D,O,N;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(1!=n.size||!n.has("")){t.next=2;break}throw new M(li.severity.CRITICAL,li.category.DRM,li.code.NO_RECOGNIZED_KEY_SYSTEMS);case 2:for(i=!0,r=!1,a=void 0,t.prev=5,s=n.values()[Symbol.iterator]();!(i=(o=s.next()).done);i=!0)0==(l=o.value).audioCapabilities.length&&delete l.audioCapabilities,0==l.videoCapabilities.length&&delete l.videoCapabilities;t.next=13;break;case 9:t.prev=9,t.t0=t.catch(5),r=!0,a=t.t0;case 13:t.prev=13,t.prev=14,i||null==s.return||s.return();case 16:if(t.prev=16,!r){t.next=19;break}throw a;case 19:return t.finish(16);case 20:return t.finish(13);case 21:c=0,d=[!0,!1];case 22:if(!(c<d.length)){t.next=67;break}h=d[c],f=!0,p=!1,m=void 0,t.prev=27,v=n.keys()[Symbol.iterator]();case 29:if(f=(g=v.next()).done){t.next=48;break}if(y=g.value,_=n.get(y),_.drmInfos.some(function(e){return!!e.licenseServerUri})==h){t.next=35;break}return t.abrupt("continue",45);case 35:return t.prev=35,t.next=38,navigator.requestMediaKeySystemAccess(y,[_]);case 38:return u=t.sent,t.abrupt("break",48);case 42:t.prev=42,t.t1=t.catch(35);case 44:this.destroyer_.ensureNotDestroyed();case 45:f=!0,t.next=29;break;case 48:t.next=54;break;case 50:t.prev=50,t.t2=t.catch(27),p=!0,m=t.t2;case 54:t.prev=54,t.prev=55,f||null==v.return||v.return();case 57:if(t.prev=57,!p){t.next=60;break}throw m;case 60:return t.finish(57);case 61:return t.finish(54);case 62:if(!u){t.next=64;break}return t.abrupt("break",67);case 64:c++,t.next=22;break;case 67:if(u){t.next=69;break}throw new M(li.severity.CRITICAL,li.category.DRM,li.code.REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE);case 69:for(this.destroyer_.ensureNotDestroyed(),t.prev=70,this.supportedTypes_.clear(),b=u.getConfiguration(),w=b.audioCapabilities||[],E=b.videoCapabilities||[],S=!0,T=!1,k=void 0,t.prev=78,C=w[Symbol.iterator]();!(S=(I=C.next()).done);S=!0)A=I.value,this.supportedTypes_.add(A.contentType);t.next=86;break;case 82:t.prev=82,t.t3=t.catch(78),T=!0,k=t.t3;case 86:t.prev=86,t.prev=87,S||null==C.return||C.return();case 89:if(t.prev=89,!T){t.next=92;break}throw k;case 92:return t.finish(89);case 93:return t.finish(86);case 94:for(x=!0,L=!1,R=void 0,t.prev=97,P=E[Symbol.iterator]();!(x=(D=P.next()).done);x=!0)O=D.value,this.supportedTypes_.add(O.contentType);t.next=105;break;case 101:t.prev=101,t.t4=t.catch(97),L=!0,R=t.t4;case 105:t.prev=105,t.prev=106,x||null==P.return||P.return();case 108:if(t.prev=108,!L){t.next=111;break}throw R;case 111:return t.finish(108);case 112:return t.finish(105);case 113:if(window.asserts.assert(this.supportedTypes_.size,"We should get at least one supported MIME type"),this.currentDrmInfo_=e.createDrmInfoFor_(u.keySystem,n.get(u.keySystem)),this.currentDrmInfo_.licenseServerUri){t.next=117;break}throw new M(li.severity.CRITICAL,li.category.DRM,li.code.NO_LICENSE_SERVER_GIVEN,this.currentDrmInfo_.keySystem);case 117:return t.next=119,u.createMediaKeys();case 119:N=t.sent,this.destroyer_.ensureNotDestroyed(),ui.log.info("Created MediaKeys object for key system",this.currentDrmInfo_.keySystem),this.mediaKeys_=N,this.initialized_=!0,t.next=134;break;case 126:if(t.prev=126,t.t5=t.catch(70),this.destroyer_.ensureNotDestroyed(t.t5),this.currentDrmInfo_=null,this.supportedTypes_.clear(),!(t.t5 instanceof M)){t.next=133;break}throw t.t5;case 133:throw new M(li.severity.CRITICAL,li.category.DRM,li.code.FAILED_TO_CREATE_CDM,t.t5.message);case 134:case"end":return t.stop()}},t,this,[[5,9,13,21],[14,,16,20],[27,50,54,62],[35,42],[55,,57,61],[70,126],[78,82,86,94],[87,,89,93],[97,101,105,113],[106,,108,112]])}));return function(e){return t.apply(this,arguments)}}()},{key:"configureClearKey_",value:function(){var e=qn.asMap(this.config_.clearKeys);if(0==e.size)return null;var t=[],n=[];e.forEach(function(e,i){var r=ri.fromHex(i),a=ri.fromHex(e),s={kty:"oct",kid:ri.toBase64(r,!1),k:ri.toBase64(a,!1)};t.push(s),n.push(s.kid)});var i={keys:t},r=JSON.stringify(i),a=JSON.stringify({kids:n}),s=[{initData:new Uint8Array(ni.toUTF8(a)),initDataType:"keyids"}];return{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+window.btoa(r),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:s,keyIds:[]}}},{key:"loadOfflineSession_",value:function(){var e=si(regeneratorRuntime.mark(function e(t){var n,i,r,a,s=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,ui.log.v1("Attempting to load an offline session",t),n=this.mediaKeys_.createSession("persistent-license"),e.next=10;break;case 5:return e.prev=5,e.t0=e.catch(0),i=new M(li.severity.CRITICAL,li.category.DRM,li.code.FAILED_TO_CREATE_SESSION,e.t0.message),this.onError_(i),e.abrupt("return",Promise.reject(i));case 10:return this.eventManager_.listen(n,"message",function(e){return s.onSessionMessage_(e)}),this.eventManager_.listen(n,"keystatuseschange",function(e){return s.onKeyStatusesChange_(e)}),r={initData:null,loaded:!1,oldExpiration:1/0,updatePromise:null},this.activeSessions_.set(n,r),e.prev=14,e.next=17,n.load(t);case 17:if(a=e.sent,this.destroyer_.ensureNotDestroyed(),ui.log.v2("Loaded offline session",t,a),a){e.next=24;break}return this.activeSessions_.delete(n),this.onError_(new M(li.severity.CRITICAL,li.category.DRM,li.code.OFFLINE_SESSION_REMOVED)),e.abrupt("return",Promise.resolve());case 24:return r.loaded=!0,this.areAllSessionsLoaded_()&&this.allSessionsLoaded_.resolve(),e.abrupt("return",n);case 29:e.prev=29,e.t1=e.catch(14),this.destroyer_.ensureNotDestroyed(e.t1),this.activeSessions_.delete(n),this.onError_(new M(li.severity.CRITICAL,li.category.DRM,li.code.FAILED_TO_CREATE_SESSION,e.t1.message));case 34:return e.abrupt("return",Promise.resolve());case 35:case"end":return e.stop()}},e,this,[[0,5],[14,29]])}));return function(t){return e.apply(this,arguments)}}()},{key:"createTemporarySession_",value:function(e,t){var n,i=this;try{this.usePersistentLicenses_?(ui.log.v1("Creating new persistent session"),n=this.mediaKeys_.createSession("persistent-license")):(ui.log.v1("Creating new temporary session"),n=this.mediaKeys_.createSession())}catch(e){return void this.onError_(new M(li.severity.CRITICAL,li.category.DRM,li.code.FAILED_TO_CREATE_SESSION,e.message))}this.eventManager_.listen(n,"message",function(e){return i.onSessionMessage_(e)}),this.eventManager_.listen(n,"keystatuseschange",function(e){return i.onKeyStatusesChange_(e)});var r={initData:t,loaded:!1,oldExpiration:1/0,updatePromise:null};this.activeSessions_.set(n,r),n.generateRequest(e,t.buffer).catch(function(e){var t;i.destroyer_.destroyed()||(i.activeSessions_.delete(n),e.errorCode&&e.errorCode.systemCode&&((t=e.errorCode.systemCode)<0&&(t+=Math.pow(2,32)),t="0x"+t.toString(16)),i.onError_(new M(li.severity.CRITICAL,li.category.DRM,li.code.FAILED_TO_GENERATE_LICENSE_REQUEST,e.message,e,t)))})}},{key:"onSessionMessage_",value:function(e){this.delayLicenseRequest_()?this.mediaKeyMessageEvents_.push(e):this.sendLicenseRequest_(e)}},{key:"delayLicenseRequest_",value:function(){return this.config_.delayLicenseRequestUntilPlayed&&this.video_.paused&&!this.initialRequestsSent_}},{key:"sendLicenseRequest_",value:function(){var t=si(regeneratorRuntime.mark(function t(n){var i,r,a,s,o,l,u,c,d,h,f,p=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.target,ui.log.v2("Sending license request for session",i.sessionId),r=this.activeSessions_.get(i),a=this.currentDrmInfo_.licenseServerUri,s=this.config_.advanced[this.currentDrmInfo_.keySystem],"individualization-request"==n.messageType&&s&&s.individualizationServer&&(a=s.individualizationServer),o=oe.RequestType.LICENSE,(l=oe.makeRequest([a],this.config_.retryParameters)).body=n.message,l.method="POST",l.licenseRequestType=n.messageType,"com.microsoft.playready"!=this.currentDrmInfo_.keySystem&&"com.chromecast.playready"!=this.currentDrmInfo_.keySystem||this.unpackPlayReadyRequest_(l),this.currentDrmInfo_.keySystem.startsWith("com.apple.fps")&&this.formatFairPlayRequest_(l),t.prev=13,c=this.playerInterface_.netEngine.request(o,l),t.next=17,c.promise;case 17:u=t.sent,t.next=27;break;case 20:return t.prev=20,t.t0=t.catch(13),window.asserts.assert(t.t0 instanceof M,"Wrong NetworkingEngine error type!"),d=new M(li.severity.CRITICAL,li.category.DRM,li.code.LICENSE_REQUEST_FAILED,t.t0),this.onError_(d),r&&r.updatePromise&&r.updatePromise.reject(d),t.abrupt("return");case 27:if(!this.destroyer_.destroyed()){t.next=29;break}return t.abrupt("return");case 29:return this.currentDrmInfo_.keySystem.startsWith("com.apple.fps")&&this.parseFairPlayResponse_(u),t.prev=30,t.next=33,i.update(u.data);case 33:t.next=41;break;case 35:return t.prev=35,t.t1=t.catch(30),h=new M(li.severity.CRITICAL,li.category.DRM,li.code.LICENSE_RESPONSE_REJECTED,t.t1.message),this.onError_(h),r&&r.updatePromise&&r.updatePromise.reject(h),t.abrupt("return");case 41:f=new E("drmsessionupdate"),this.playerInterface_.onEvent(f),r&&(r.updatePromise&&r.updatePromise.resolve(),new j(function(){r.loaded=!0,p.areAllSessionsLoaded_()&&p.allSessionsLoaded_.resolve()}).tickAfter(e.SESSION_LOAD_TIMEOUT_));case 44:case"end":return t.stop()}},t,this,[[13,20],[30,35]])}));return function(e){return t.apply(this,arguments)}}()},{key:"unpackPlayReadyRequest_",value:function(e){var t=ni.fromUTF16(e.body,!0,!0);if(!t.includes("PlayReadyKeyMessage"))return ui.log.debug("PlayReady request is already unwrapped."),void(e.headers["Content-Type"]="text/xml; charset=utf-8");ui.log.debug("Unwrapping PlayReady request.");var n=(new DOMParser).parseFromString(t,"application/xml"),i=n.getElementsByTagName("HttpHeader"),r=!0,a=!1,s=void 0;try{for(var o,l=i[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var u=o.value,c=u.querySelector("name"),d=u.querySelector("value");window.asserts.assert(c&&d,"Malformed PlayReady headers!"),e.headers[c.textContent]=d.textContent}}catch(e){a=!0,s=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw s}}var h=n.querySelector("Challenge");window.asserts.assert(h,"Malformed PlayReady challenge!"),window.asserts.assert("base64encoded"==h.getAttribute("encoding"),"Unexpected PlayReady challenge encoding!"),e.body=ri.fromBase64(h.textContent).buffer}},{key:"formatFairPlayRequest_",value:function(e){var t=new Uint8Array(e.body),n="spc="+ri.toStandardBase64(t);e.headers["Content-Type"]="application/x-www-form-urlencoded",e.body=ni.toUTF8(encodeURIComponent(n))}},{key:"parseFairPlayResponse_",value:function(e){var t;try{t=ni.fromUTF8(e.data)}catch(e){return}"<ckc>"===(t=t.trim()).substr(0,5)&&"</ckc>"===t.substr(-6)&&(t=t.slice(5,-6));try{t=JSON.parse(t).ckc}catch(e){}e.data=ri.fromBase64(t).buffer}},{key:"onKeyStatusesChange_",value:function(t){var n=this,i=t.target;ui.log.v2("Key status changed for session",i.sessionId);var r=this.activeSessions_.get(i),a=i.keyStatuses,s=!1;a.forEach(function(e,t){if("string"==typeof t){var i=t;t=e,e=i}if("com.microsoft.playready"==n.currentDrmInfo_.keySystem&&16==t.byteLength&&!Qn.isTizen()){var a=ri.toDataView(t),o=a.getUint32(0,!0),l=a.getUint16(4,!0),u=a.getUint16(6,!0);a.setUint32(0,o,!1),a.setUint16(4,l,!1),a.setUint16(6,u,!1)}"com.microsoft.playready"==n.currentDrmInfo_.keySystem&&"status-pending"==e&&(e="usable"),"status-pending"!=e&&(r.loaded=!0),r||window.asserts.assert("usable"!=e,"Usable keys found in closed session"),"expired"==e&&(s=!0);var c=ri.toHex(new Uint8Array(t));n.keyStatusByKeyId_.set(c,e)});var o=i.expiration-Date.now();(o<0||s&&o<1e3)&&r&&!r.updatePromise&&(ui.log.debug("Session has expired",i.sessionId),this.activeSessions_.delete(i),i.close().catch(function(){})),this.areAllSessionsLoaded_()&&(this.allSessionsLoaded_.resolve(),this.keyStatusTimer_.tickAfter(e.KEY_STATUS_BATCH_TIME))}},{key:"processKeyStatusChanges_",value:function(){var e=this.keyStatusByKeyId_,t=this.announcedKeyStatusByKeyId_;t.clear(),e.forEach(function(e,n){return t.set(n,e)});var n=Array.from(t.values());n.length&&n.every(function(e){return"expired"==e})&&this.onError_(new M(li.severity.CRITICAL,li.category.DRM,li.code.EXPIRED)),this.playerInterface_.onKeyStatus(qn.asObject(t))}},{key:"onPlay_",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.mediaKeyMessageEvents_[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var a=i.value;this.sendLicenseRequest_(a)}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}this.initialRequestsSent_=!0,this.mediaKeyMessageEvents_=[]}},{key:"supportsVariant",value:function(e){var t=e.audio,n=e.video;if(t&&t.encrypted){var i=Xn.getFullType(t.mimeType,t.codecs);if(!this.willSupport(i))return!1}if(n&&n.encrypted){var r=Xn.getFullType(n.mimeType,n.codecs);if(!this.willSupport(r))return!1}var a=this.keySystem();return 0==e.drmInfos.length||e.drmInfos.some(function(e){return e.keySystem==a})}},{key:"pollExpiration_",value:function(){var e=this;this.activeSessions_.forEach(function(t,n){var i=t.oldExpiration,r=n.expiration;isNaN(r)&&(r=1/0),r!=i&&(e.playerInterface_.onExpirationUpdated(n.sessionId,r),t.oldExpiration=r)})}},{key:"areAllSessionsLoaded_",value:function(){var e=this.activeSessions_.values();return Bt.every(e,function(e){return e.loaded})}}],i=[{key:"isBrowserSupported",value:function(){return!!(window.MediaKeys&&window.navigator&&window.navigator.requestMediaKeySystemAccess&&window.MediaKeySystemAccess&&window.MediaKeySystemAccess.prototype.getConfiguration)}},{key:"probeSupport",value:function(){var t=si(regeneratorRuntime.mark(function t(){var n,i,r,a,s,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return window.asserts.assert(e.isBrowserSupported(),"Must have basic EME support"),n=["org.w3.clearkey","com.widevine.alpha","com.microsoft.playready","com.apple.fps.3_0","com.apple.fps.2_0","com.apple.fps.1_0","com.apple.fps","com.adobe.primetime"],r=[{videoCapabilities:i=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],persistentState:"required",sessionTypes:["persistent-license"]},{videoCapabilities:i}],a=new Map,s=function(){var e=si(regeneratorRuntime.mark(function e(t){var n,i,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.requestMediaKeySystemAccess(t,r);case 3:return n=e.sent,i=n.getConfiguration().sessionTypes,s=!!i&&i.includes("persistent-license"),Qn.isTizen3()&&(s=!1),a.set(t,{persistentState:s}),e.next=10,n.createMediaKeys();case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),a.set(t,null);case 15:case"end":return e.stop()}},e,null,[[0,12]])}));return function(t){return e.apply(this,arguments)}}(),o=n.map(function(e){return s(e)}),t.next=11,Promise.all(o);case 11:return t.abrupt("return",qn.asObject(a));case 12:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()},{key:"areDrmCompatible",value:function(t,n){return!t.length||!n.length||e.getCommonDrmInfos(t,n).length>0}},{key:"getCommonDrmInfos",value:function(e,t){if(!e.length)return t;if(!t.length)return e;var n=[],i=!0,r=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value,u=!0,c=!1,d=void 0;try{for(var h,f=t[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var p=h.value;if(l.keySystem==p.keySystem){var m=[];m=(m=m.concat(l.initData||[])).concat(p.initData||[]);var v=[];v=(v=v.concat(l.keyIds)).concat(p.keyIds);var g={keySystem:l.keySystem,licenseServerUri:l.licenseServerUri||p.licenseServerUri,distinctiveIdentifierRequired:l.distinctiveIdentifierRequired||p.distinctiveIdentifierRequired,persistentStateRequired:l.persistentStateRequired||p.persistentStateRequired,videoRobustness:l.videoRobustness||p.videoRobustness,audioRobustness:l.audioRobustness||p.audioRobustness,serverCertificate:l.serverCertificate||p.serverCertificate,initData:m,keyIds:v};n.push(g);break}}}catch(e){c=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw d}}}}catch(e){r=!0,a=e}finally{try{i||null==o.return||o.return()}finally{if(r)throw a}}return n}},{key:"replaceDrmInfo_",value:function(e,t){var n=[];t.forEach(function(e,t){n.push({keySystem:t,licenseServerUri:e,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:[],keyIds:[]})});var i=!0,r=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){s.value.drmInfos=n}}catch(e){r=!0,a=e}finally{try{i||null==o.return||o.return()}finally{if(r)throw a}}}},{key:"createDrmInfoFor_",value:function(t,n){var i=[],r=[],a=[],s=[];e.processDrmInfos_(n.drmInfos,i,r,a,s),r.length>1&&ui.log.warning("Multiple unique server certificates found! Only the first will be used."),i.length>1&&ui.log.warning("Multiple unique license server URIs found! Only the first will be used.");var o=n.audioCapabilities?n.audioCapabilities[0].robustness:"",l=n.videoCapabilities?n.videoCapabilities[0].robustness:"",u=n.distinctiveIdentifier;return{keySystem:t,licenseServerUri:i[0],distinctiveIdentifierRequired:"required"==u,persistentStateRequired:"required"==n.persistentState,audioRobustness:o,videoRobustness:l,serverCertificate:r[0],initData:a,keyIds:s}}},{key:"processDrmInfos_",value:function(e,t,n,i,r){var a=!0,s=!1,o=void 0;try{for(var l,u=function(){var e=l.value;(t.includes(e.licenseServerUri)||t.push(e.licenseServerUri),e.serverCertificate)&&(n.some(function(t){return ri.equal(t,e.serverCertificate)})||n.push(e.serverCertificate));if(e.initData){var a=!0,s=!1,o=void 0;try{for(var u,c=function(){var e=u.value;i.some(function(t){return i=e,!(!(n=t).keyId||n.keyId!=i.keyId)||n.initDataType==i.initDataType&&ri.equal(n.initData,i.initData);var n,i})||i.push(e)},d=e.initData[Symbol.iterator]();!(a=(u=d.next()).done);a=!0)c()}catch(e){s=!0,o=e}finally{try{a||null==d.return||d.return()}finally{if(s)throw o}}}if(e.keyIds){var h=!0,f=!1,p=void 0;try{for(var m,v=e.keyIds[Symbol.iterator]();!(h=(m=v.next()).done);h=!0){var g=m.value;r.includes(g)||r.push(g)}}catch(e){f=!0,p=e}finally{try{h||null==v.return||v.return()}finally{if(f)throw p}}}},c=e[Symbol.iterator]();!(a=(l=c.next()).done);a=!0)u()}catch(e){s=!0,o=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw o}}}},{key:"fillInDrmInfoDefaults_",value:function(e,t,n){if(e.keySystem&&("org.w3.clearkey"!=e.keySystem||!e.licenseServerUri)){if(t.size){var i=t.get(e.keySystem)||"";e.licenseServerUri=i}e.keyIds||(e.keyIds=[]);var r=n.get(e.keySystem);r&&(e.distinctiveIdentifierRequired||(e.distinctiveIdentifierRequired=r.distinctiveIdentifierRequired),e.persistentStateRequired||(e.persistentStateRequired=r.persistentStateRequired),e.videoRobustness||(e.videoRobustness=r.videoRobustness),e.audioRobustness||(e.audioRobustness=r.audioRobustness),e.serverCertificate||(e.serverCertificate=r.serverCertificate)),window.cast&&window.cast.__platform__&&"com.microsoft.playready"==e.keySystem&&(e.keySystem="com.chromecast.playready")}}},{key:"closeSession_",value:function(){var t=si(regeneratorRuntime.mark(function t(n){var i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=new Promise(function(t){new j(t).tickAfter(e.CLOSE_TIMEOUT_)}),t.next=3,Promise.race([n.close().then(function(){return!0}),i.then(function(){return!1})]);case 3:t.sent||ui.log.warning("Timeout waiting for session close");case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}],n&&oi(t.prototype,n),i&&oi(t,i),e}());ci.SessionMetaData={},ci.PlayerInterface={},ci.CLOSE_TIMEOUT_=1,ci.SESSION_LOAD_TIMEOUT_=5,ci.KEY_STATUS_BATCH_TIME=.5;var di=ci,hi=n(4),fi=n.n(hi);function pi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mi(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function vi(e,t,n){return t&&mi(e.prototype,t),n&&mi(e,n),e}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */window.shaka;var gi=function(){function e(){pi(this,e),this.muxCaptionParser_=new fi.a.mp4.CaptionParser,this.videoTrackIds_=[],this.timescales_={}}return vi(e,[{key:"init",value:function(e){var t=fi.a.mp4.probe,n=new Uint8Array(e);this.videoTrackIds_=t.videoTrackIds(n),this.timescales_=t.timescale(n),this.muxCaptionParser_.init()}},{key:"parseFrom",value:function(e,t){var n=new Uint8Array(e),i=this.muxCaptionParser_.parse(n,this.videoTrackIds_,this.timescales_);i&&i.captions&&t(i.captions),this.muxCaptionParser_.clearParsedCaptions()}},{key:"reset",value:function(){this.muxCaptionParser_.resetCaptionStream()}}],[{key:"isSupported",value:function(){return!!window.muxjs}}]),e}(),yi=function(){function e(){pi(this,e)}return vi(e,[{key:"init",value:function(e){}},{key:"parseFrom",value:function(e,t){}},{key:"reset",value:function(){}}]),e}();function _i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var bi=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"bufferStart",value:function(e){return e?1==e.length&&e.end(0)-e.start(0)<1e-6?null:1==e.length&&e.start(0)<0?0:e.length?e.start(0):null:null}},{key:"bufferEnd",value:function(e){return e?1==e.length&&e.end(0)-e.start(0)<1e-6?null:e.length?e.end(e.length-1):null:null}},{key:"isBuffered",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return!(!e||!e.length)&&(!(1==e.length&&e.end(0)-e.start(0)<1e-6)&&(!(t>e.end(e.length-1))&&t+n>=e.start(0)))}},{key:"bufferedAheadOf",value:function(e,t){if(!e||!e.length)return 0;if(1==e.length&&e.end(0)-e.start(0)<1e-6)return 0;for(var n=0,i=e.length-1;i>=0&&e.end(i)>t;--i)n+=e.end(i)-Math.max(e.start(i),t);return n}},{key:"getGapIndex",value:function(e,t){if(!e||!e.length)return null;if(1==e.length&&e.end(0)-e.start(0)<1e-6)return null;for(var n=Qn.isEdge()||Qn.isIE()||Qn.isTizen()||Qn.isChromecast()?.5:.1,i=0;i<e.length;i++)if(e.start(i)>t&&(0==i||e.end(i-1)-t<=n))return i;return null}},{key:"getBufferedInfo",value:function(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}}],(n=null)&&_i(t.prototype,n),i&&_i(t,i),e}();function wi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ei=window.shaka,Si=function e(t,n,i){wi(this,e),this.startTime=t,this.direction=e.direction.HORIZONTAL_LEFT_TO_RIGHT,this.endTime=n,this.payload=i,this.region=new Ei.text.CueRegion,this.position=null,this.positionAlign=e.positionAlign.AUTO,this.size=100,this.textAlign=e.textAlign.CENTER,this.writingMode=e.writingMode.HORIZONTAL_TOP_TO_BOTTOM,this.lineInterpretation=e.lineInterpretation.LINE_NUMBER,this.line=null,this.lineHeight="",this.lineAlign=e.lineAlign.START,this.displayAlign=e.displayAlign.AFTER,this.color="",this.backgroundColor="",this.backgroundImage=null,this.fontSize="",this.fontWeight=e.fontWeight.NORMAL,this.fontStyle=e.fontStyle.NORMAL,this.fontFamily="",this.textDecoration=[],this.wrapLine=!0,this.id=""};Si.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:"auto"},Si.textAlign={LEFT:"left",RIGHT:"right",CENTER:"center",START:"start",END:"end"},Si.displayAlign={BEFORE:"before",CENTER:"center",AFTER:"after"},Si.direction={HORIZONTAL_LEFT_TO_RIGHT:"ltr",HORIZONTAL_RIGHT_TO_LEFT:"rtl"},Si.writingMode={HORIZONTAL_TOP_TO_BOTTOM:"horizontal-tb",VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"},Si.lineInterpretation={LINE_NUMBER:0,PERCENTAGE:1},Si.lineAlign={CENTER:"center",START:"start",END:"end"},Si.fontWeight={NORMAL:400,BOLD:700},Si.fontStyle={NORMAL:"normal",ITALIC:"italic",OBLIQUE:"oblique"},Si.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"};var Ti=function e(){wi(this,e),this.id="",this.viewportAnchorX=0,this.viewportAnchorY=0,this.regionAnchorX=0,this.regionAnchorY=0,this.width=100,this.height=100,this.heightUnits=e.units.PERCENTAGE,this.widthUnits=e.units.PERCENTAGE,this.viewportAnchorUnits=e.units.PERCENTAGE,this.scroll=e.scrollMode.NONE};function ki(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(i,r)}function Ci(e){return function(){var t=this,n=arguments;return new Promise(function(i,r){var a=e.apply(t,n);function s(e){ki(a,i,r,s,o,"next",e)}function o(e){ki(a,i,r,s,o,"throw",e)}s(void 0)})}}function Ii(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Ti.units={PX:0,PERCENTAGE:1,LINES:2},Ti.scrollMode={NONE:"",UP:"up"};
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var Ai=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parser_=null,this.displayer_=t,this.timestampOffset_=0,this.appendWindowStart_=0,this.appendWindowEnd_=1/0,this.bufferStart_=null,this.bufferEnd_=null,this.selectedClosedCaptionId_="",this.closedCaptionsMap_=new Map}var t,n,i;return t=e,n=[{key:"destroy",value:function(){return this.parser_=null,this.displayer_=null,this.closedCaptionsMap_.clear(),Promise.resolve()}},{key:"setDisplayer",value:function(e){this.displayer_=e}},{key:"initParser",value:function(t){if(t!=Xn.CLOSED_CAPTION_MIMETYPE){var n=e.parserMap_[t];window.asserts.assert(n,"Text type negotiation should have happened already"),this.parser_=new n}}},{key:"getStartTime",value:function(e){window.asserts.assert(this.parser_,"The parser should already be initialized");try{return this.parser_.parseMedia(new Uint8Array(e),{periodStart:0,segmentStart:null,segmentEnd:0})[0].startTime}catch(e){throw new M(M.Severity.CRITICAL,M.Category.TEXT,M.Code.UNABLE_TO_EXTRACT_CUE_START_TIME,e)}}},{key:"appendBuffer",value:function(){var e=Ci(regeneratorRuntime.mark(function e(t,n,i){var r,a,s,o=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.asserts.assert(this.parser_,"The parser should already be initialized"),e.next=3,Promise.resolve();case 3:if(this.parser_&&this.displayer_){e.next=5;break}return e.abrupt("return");case 5:if(null!=n&&null!=i){e.next=8;break}return this.parser_.parseInit(new Uint8Array(t)),e.abrupt("return");case 8:r={periodStart:this.timestampOffset_,segmentStart:n,segmentEnd:i},a=this.parser_.parseMedia(new Uint8Array(t),r),s=a.filter(function(e){return e.startTime>=o.appendWindowStart_&&e.startTime<o.appendWindowEnd_}),this.displayer_.append(s),null==this.bufferStart_?this.bufferStart_=Math.max(n,this.appendWindowStart_):(window.asserts.assert(null!=this.bufferEnd_,"There should already be a buffered range end."),window.asserts.assert(n-this.bufferEnd_<=1,"There should not be a gap in text references >1s")),this.bufferEnd_=Math.min(i,this.appendWindowEnd_);case 14:case"end":return e.stop()}},e,this)}));return function(t,n,i){return e.apply(this,arguments)}}()},{key:"remove",value:function(){var e=Ci(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve();case 2:this.displayer_&&this.displayer_.remove(t,n)&&(null==this.bufferStart_?window.asserts.assert(null==this.bufferEnd_,"end must be null if startTime is null"):(window.asserts.assert(null!=this.bufferEnd_,"end must be non-null if startTime is non-null"),n<=this.bufferStart_||t>=this.bufferEnd_||(t<=this.bufferStart_&&n>=this.bufferEnd_?this.bufferStart_=this.bufferEnd_=null:t<=this.bufferStart_&&n<this.bufferEnd_?this.bufferStart_=n:t>this.bufferStart_&&n>=this.bufferEnd_?this.bufferEnd_=t:window.asserts.assert(!1,"removal from the middle is not supported by TextEngine"))));case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"setTimestampOffset",value:function(e){this.timestampOffset_=e}},{key:"setAppendWindow",value:function(e,t){this.appendWindowStart_=e,this.appendWindowEnd_=t}},{key:"bufferStart",value:function(){return this.bufferStart_}},{key:"bufferEnd",value:function(){return this.bufferEnd_}},{key:"isBuffered",value:function(e){return null!=this.bufferStart_&&null!=this.bufferEnd_&&(e>=this.bufferStart_&&e<this.bufferEnd_)}},{key:"bufferedAheadOf",value:function(e){return null==this.bufferEnd_||this.bufferEnd_<e?0:(window.asserts.assert(null!=this.bufferStart_,"start should not be null if end is not null"),this.bufferEnd_-Math.max(e,this.bufferStart_))}},{key:"appendCues",value:function(e){this.displayer_.append(e)}},{key:"setSelectedClosedCaptionId",value:function(e,t){this.selectedClosedCaptionId_=e;var n=this.closedCaptionsMap_.get(e);if(n){var i=!0,r=!1,a=void 0;try{for(var s,o=n.keys()[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value,u=n.get(l);u&&(u=u.filter(function(e){return e.endTime<=t}),this.displayer_.append(u))}}catch(e){r=!0,a=e}finally{try{i||null==o.return||o.return()}finally{if(r)throw a}}}}},{key:"storeAndAppendClosedCaptions",value:function(e,t,n,i){var r=t+" "+n,a=new Map,s=!0,o=!1,l=void 0;try{for(var u,c=e[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){var d=u.value,h=d.stream;if(a.has(h)||a.set(h,new Map),a.get(h).has(r)||a.get(h).set(r,[]),d.startTime+=i,d.endTime+=i,d.startTime>=this.appendWindowStart_&&d.startTime<this.appendWindowEnd_){var f=new Si(d.startTime,d.endTime,d.text);a.get(h).get(r).push(f),h==this.selectedClosedCaptionId_&&this.displayer_.append([f])}}}catch(e){o=!0,l=e}finally{try{s||null==c.return||c.return()}finally{if(o)throw l}}var p=!0,m=!1,v=void 0;try{for(var g,y=a.keys()[Symbol.iterator]();!(p=(g=y.next()).done);p=!0){var _=g.value;this.closedCaptionsMap_.has(_)||this.closedCaptionsMap_.set(_,new Map);var b=!0,w=!1,E=void 0;try{for(var S,T=a.get(_).keys()[Symbol.iterator]();!(b=(S=T.next()).done);b=!0){var k=S.value,C=a.get(_).get(k);this.closedCaptionsMap_.get(_).set(k,C)}}catch(e){w=!0,E=e}finally{try{b||null==T.return||T.return()}finally{if(w)throw E}}}}catch(e){m=!0,v=e}finally{try{p||null==y.return||y.return()}finally{if(m)throw v}}null==this.bufferStart_?this.bufferStart_=Math.max(t,this.appendWindowStart_):this.bufferStart_=Math.min(this.bufferStart_,Math.max(t,this.appendWindowStart_)),this.bufferEnd_=Math.max(this.bufferEnd_,Math.min(n,this.appendWindowEnd_))}},{key:"getNumberOfClosedCaptionChannels",value:function(){return this.closedCaptionsMap_.size}},{key:"getNumberOfClosedCaptionsInChannel",value:function(e){var t=this.closedCaptionsMap_.get(e);return t?t.size:0}}],i=[{key:"registerParser",value:function(t,n){e.parserMap_[t]=n}},{key:"unregisterParser",value:function(t){delete e.parserMap_[t]}},{key:"isTypeSupported",value:function(t){return!!e.parserMap_[t]||!(!window.muxjs||t!=Xn.CLOSED_CAPTION_MIMETYPE)}}],n&&Ii(t.prototype,n),i&&Ii(t,i),e}();Ai.parserMap_={};var xi=Ai;function Li(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ri(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Pi=window.shaka,Di=(window.goog,function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.muxTransmuxer_=new fi.a.mp4.Transmuxer({keepOriginalTimestamps:!0}),this.transmuxPromise_=null,this.transmuxedData_=[],this.captions_=[],this.isTransmuxing_=!1,this.muxTransmuxer_.on("data",function(e){return t.onTransmuxed_(e)}),this.muxTransmuxer_.on("done",function(){return t.onTransmuxDone_()})}var t,n,i;return t=e,i=[{key:"isSupported",value:function(e,t){if(!window.muxjs||!Pi.media.Transmuxer.isTsContainer(e))return!1;var n=Pi.media.Transmuxer.convertTsCodecs;if(t)return MediaSource.isTypeSupported(n(t,e));var i=jt.ContentType;return MediaSource.isTypeSupported(n(i.AUDIO,e))||MediaSource.isTypeSupported(n(i.VIDEO,e))}},{key:"isTsContainer",value:function(e){return"mp2t"==e.split(";")[0].split("/")[1]}},{key:"convertTsCodecs",value:function(e,t){var n=jt.ContentType,i=t.replace("mp2t","mp4");e==n.AUDIO&&(i=i.replace("video","audio"));var r=/avc1\.(66|77|100)\.(\d+)/.exec(i);if(r){var a="avc1.",s=r[1];"66"==s?a+="4200":"77"==s?a+="4d00":(window.asserts.assert("100"==s,"Legacy avc1 parsing code out of sync with regex!"),a+="6400");var o=Number(r[2]);window.asserts.assert(o<256,"Invalid legacy avc1 level number!"),a+=(o>>4).toString(16),a+=(15&o).toString(16),i=i.replace(r[0],a)}return i}}],(n=[{key:"destroy",value:function(){return this.muxTransmuxer_.dispose(),this.muxTransmuxer_=null,Promise.resolve()}},{key:"transmux",value:function(e){window.asserts.assert(!this.isTransmuxing_,"No transmuxing should be in progress."),this.isTransmuxing_=!0,this.transmuxPromise_=new L,this.transmuxedData_=[],this.captions_=[];var t=new Uint8Array(e);return this.muxTransmuxer_.push(t),this.muxTransmuxer_.flush(),this.isTransmuxing_&&this.transmuxPromise_.reject(new M(M.Severity.CRITICAL,M.Category.MEDIA,M.Code.TRANSMUXING_FAILED)),this.transmuxPromise_}},{key:"onTransmuxed_",value:function(e){this.captions_=e.captions;var t=new Uint8Array(e.data.byteLength+e.initSegment.byteLength);t.set(e.initSegment,0),t.set(e.data,e.initSegment.byteLength),this.transmuxedData_.push(t)}},{key:"onTransmuxDone_",value:function(){var e={data:ri.concat.apply(ri,Li(this.transmuxedData_)),captions:this.captions_};this.transmuxPromise_.resolve(e),this.isTransmuxing_=!1}}])&&Ri(t.prototype,n),i&&Ri(t,i),e}());function Oi(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(i,r)}function Mi(e){return function(){var t=this,n=arguments;return new Promise(function(i,r){var a=e.apply(t,n);function s(e){Oi(a,i,r,s,o,"next",e)}function o(e){Oi(a,i,r,s,o,"throw",e)}s(void 0)})}}function Ni(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ui=window.shaka,Fi=window.goog,Bi=function(){function e(t,n,i){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.video_=t,this.textDisplayer_=i,this.sourceBuffers_={},this.textEngine_=null,this.queues_={},this.eventManager_=new rn,this.transmuxers_={},this.captionParser_=n,this.mediaSourceOpen_=new L,this.mediaSource_=this.createMediaSource(this.mediaSourceOpen_),this.destroyer_=new zn(function(){return r.doDestroy_()})}var t,n,i;return t=e,n=[{key:"createMediaSource",value:function(t){var n=new MediaSource;return this.eventManager_.listenOnce(n,"sourceopen",t.resolve),this.video_.src=e.createObjectURL(n),n}},{key:"destroy",value:function(){return this.destroyer_.destroy()}},{key:"doDestroy_",value:function(){var e=Mi(regeneratorRuntime.mark(function e(){var t,n,i,r,a,s,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n in t=[],this.queues_)for(i=this.queues_[n],r=i[0],this.queues_[n]=i.slice(0,1),r&&t.push(r.p.catch(Ht.noop)),a=1;a<i.length;++a)i[a].p.reject(zn.destroyedError());for(s in this.textEngine_&&t.push(this.textEngine_.destroy()),this.textDisplayer_&&t.push(this.textDisplayer_.destroy()),this.transmuxers_)t.push(this.transmuxers_[s].destroy());return e.next=7,Promise.all(t);case 7:if(this.eventManager_&&(this.eventManager_.release(),this.eventManager_=null),this.video_&&(this.video_.removeAttribute("src"),this.video_.load(),this.video_=null),this.mediaSource_=null,this.textEngine_=null,this.textDisplayer_=null,this.sourceBuffers_={},this.transmuxers_={},this.captionParser_=null,Fi.DEBUG)for(o in this.queues_)window.asserts.assert(0==this.queues_[o].length,o+" queue should be empty after destroy!");this.queues_={};case 17:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"open",value:function(){return this.mediaSourceOpen_}},{key:"init",value:function(){var t=Mi(regeneratorRuntime.mark(function t(n,i){var r,a,s,o,l,u,c,d=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=jt.ContentType,t.next=3,this.mediaSourceOpen_;case 3:for(a=!0,s=!1,o=void 0,t.prev=6,l=function(){var t=c.value,a=n.get(t);window.asserts.assert(e.isStreamSupported(a),"Type negotiation should happen before MediaSourceEngine.init!");var s=Xn.getFullType(a.mimeType,a.codecs);if(t==r.TEXT)d.reinitText(s);else{!i&&MediaSource.isTypeSupported(s)||!Di.isSupported(s,t)||(d.transmuxers_[t]=new Di,s=Di.convertTsCodecs(t,s));var o=d.mediaSource_.addSourceBuffer(s);d.eventManager_.listen(o,"error",function(){return d.onError_(t)}),d.eventManager_.listen(o,"updateend",function(){return d.onUpdateEnd_(t)}),d.sourceBuffers_[t]=o,d.queues_[t]=[]}},u=n.keys()[Symbol.iterator]();!(a=(c=u.next()).done);a=!0)l();t.next=15;break;case 11:t.prev=11,t.t0=t.catch(6),s=!0,o=t.t0;case 15:t.prev=15,t.prev=16,a||null==u.return||u.return();case 18:if(t.prev=18,!s){t.next=21;break}throw o;case 21:return t.finish(18);case 22:return t.finish(15);case 23:case"end":return t.stop()}},t,this,[[6,11,15,23],[16,,18,22]])}));return function(e,n){return t.apply(this,arguments)}}()},{key:"reinitText",value:function(e){this.textEngine_||(this.textEngine_=new xi(this.textDisplayer_)),this.textEngine_.initParser(e)}},{key:"ended",value:function(){return!this.mediaSource_||"ended"==this.mediaSource_.readyState}},{key:"bufferStart",value:function(e){return e==jt.ContentType.TEXT?this.textEngine_.bufferStart():bi.bufferStart(this.getBuffered_(e))}},{key:"bufferEnd",value:function(e){return e==jt.ContentType.TEXT?this.textEngine_.bufferEnd():bi.bufferEnd(this.getBuffered_(e))}},{key:"isBuffered",value:function(e,t,n){if(e==jt.ContentType.TEXT)return this.textEngine_.isBuffered(t);var i=this.getBuffered_(e);return bi.isBuffered(i,t,n)}},{key:"bufferedAheadOf",value:function(e,t){if(e==jt.ContentType.TEXT)return this.textEngine_.bufferedAheadOf(t);var n=this.getBuffered_(e);return bi.bufferedAheadOf(n,t)}},{key:"getBufferedInfo",value:function(e){var t=jt.ContentType,n=bi.getBufferedInfo;if(e.total=n(this.video_.buffered),e.audio=n(this.getBuffered_(t.AUDIO)),e.video=n(this.getBuffered_(t.VIDEO)),e.text=[],this.textEngine_){var i=this.textEngine_.bufferStart(),r=this.textEngine_.bufferEnd();null!=i&&null!=r&&e.text.push({start:i,end:r})}}},{key:"getBuffered_",value:function(e){try{return this.sourceBuffers_[e].buffered}catch(t){return e in this.sourceBuffers_&&Ui.log.error("failed to get buffered range for "+e,t),null}}},{key:"appendBuffer",value:function(){var e=Mi(regeneratorRuntime.mark(function e(t,n,i,r,a){var s,o,l,u=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s=jt.ContentType,t!=s.TEXT){e.next=6;break}return e.next=4,this.textEngine_.appendBuffer(n,i,r);case 4:e.next=25;break;case 6:if(!this.transmuxers_[t]){e.next=16;break}return e.next=9,this.transmuxers_[t].transmux(n);case 9:return o=e.sent,this.textEngine_||this.reinitText("text/vtt"),o.captions&&(l=this.sourceBuffers_[s.VIDEO].timestampOffset,this.textEngine_.storeAndAppendClosedCaptions(o.captions,i,r,l)),e.next=14,this.enqueueOperation_(t,function(){return u.append_(t,o.data.buffer)});case 14:e.next=25;break;case 16:if(!a||!window.muxjs){e.next=23;break}return this.textEngine_||this.reinitText("text/vtt"),null==i&&null==r?this.captionParser_.init(n):this.captionParser_.parseFrom(n,function(e){if(e.length){var t=u.sourceBuffers_[s.VIDEO].timestampOffset;u.textEngine_.storeAndAppendClosedCaptions(e,i,r,t)}}),e.next=21,this.enqueueOperation_(t,function(){return u.append_(t,n)});case 21:e.next=25;break;case 23:return e.next=25,this.enqueueOperation_(t,function(){return u.append_(t,n)});case 25:case"end":return e.stop()}},e,this)}));return function(t,n,i,r,a){return e.apply(this,arguments)}}()},{key:"setSelectedClosedCaptionId",value:function(e){var t=jt.ContentType.VIDEO,n=this.bufferEnd(t)||0;this.textEngine_.setSelectedClosedCaptionId(e,n)}},{key:"remove",value:function(){var e=Mi(regeneratorRuntime.mark(function e(t,n,i){var r,a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.asserts.assert(i<Number.MAX_VALUE,"remove() with MAX_VALUE or Infinity is not IE-compatible!"),r=jt.ContentType,t!=r.TEXT){e.next=7;break}return e.next=5,this.textEngine_.remove(n,i);case 5:e.next=9;break;case 7:return e.next=9,this.enqueueOperation_(t,function(){return a.remove_(t,n,i)});case 9:case"end":return e.stop()}},e,this)}));return function(t,n,i){return e.apply(this,arguments)}}()},{key:"clear",value:function(){var e=Mi(regeneratorRuntime.mark(function e(t){var n,i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=jt.ContentType,t!=n.TEXT){e.next=9;break}if(this.textEngine_){e.next=4;break}return e.abrupt("return");case 4:return this.captionParser_.reset(),e.next=7,this.textEngine_.remove(0,1/0);case 7:e.next=11;break;case 9:return e.next=11,this.enqueueOperation_(t,function(){return i.remove_(t,0,i.mediaSource_.duration)});case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"flush",value:function(){var e=Mi(regeneratorRuntime.mark(function e(t){var n,i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=jt.ContentType,t!=n.TEXT){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.enqueueOperation_(t,function(){return i.flush_(t)});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"setStreamProperties",value:function(){var e=Mi(regeneratorRuntime.mark(function e(t,n,i,r){var a,s=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=jt.ContentType,t!=a.TEXT){e.next=5;break}return this.textEngine_.setTimestampOffset(n),this.textEngine_.setAppendWindow(i,r),e.abrupt("return");case 5:return e.next=7,Promise.all([this.enqueueOperation_(t,function(){return s.abort_(t)}),this.enqueueOperation_(t,function(){return s.setTimestampOffset_(t,n)}),this.enqueueOperation_(t,function(){return s.setAppendWindow_(t,i,r)})]);case 7:case"end":return e.stop()}},e,this)}));return function(t,n,i,r){return e.apply(this,arguments)}}()},{key:"endOfStream",value:function(){var e=Mi(regeneratorRuntime.mark(function e(t){var n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.enqueueBlockingOperation_(function(){t?n.mediaSource_.endOfStream(t):n.mediaSource_.endOfStream()});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"setDuration",value:function(){var e=Mi(regeneratorRuntime.mark(function e(t){var n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.asserts.assert(isNaN(this.mediaSource_.duration)||this.mediaSource_.duration<=t,"duration cannot decrease: "+this.mediaSource_.duration+" -> "+t),e.next=3,this.enqueueBlockingOperation_(function(){n.mediaSource_.duration=t});case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getDuration",value:function(){return this.mediaSource_.duration}},{key:"append_",value:function(e,t){this.sourceBuffers_[e].appendBuffer(t)}},{key:"remove_",value:function(e,t,n){n<=t?this.onUpdateEnd_(e):this.sourceBuffers_[e].remove(t,n)}},{key:"abort_",value:function(e){var t=this.sourceBuffers_[e].appendWindowStart,n=this.sourceBuffers_[e].appendWindowEnd;this.sourceBuffers_[e].abort(),this.sourceBuffers_[e].appendWindowStart=t,this.sourceBuffers_[e].appendWindowEnd=n,this.onUpdateEnd_(e)}},{key:"flush_",value:function(e){window.asserts.assert(0==this.video_.buffered.length,"MediaSourceEngine.flush_ should only be used after clearing all data!"),this.video_.currentTime-=.001,this.onUpdateEnd_(e)}},{key:"setTimestampOffset_",value:function(e,t){t<0&&(t+=.001),this.sourceBuffers_[e].timestampOffset=t,this.onUpdateEnd_(e)}},{key:"setAppendWindow_",value:function(e,t,n){this.sourceBuffers_[e].appendWindowStart=0,this.sourceBuffers_[e].appendWindowEnd=n,this.sourceBuffers_[e].appendWindowStart=t,this.onUpdateEnd_(e)}},{key:"onError_",value:function(e){var t=this.queues_[e][0];window.asserts.assert(t,"Spurious error event!"),window.asserts.assert(!this.sourceBuffers_[e].updating,"SourceBuffer should not be updating on error!");var n=this.video_.error?this.video_.error.code:0;t.p.reject(new M(M.Severity.CRITICAL,M.Category.MEDIA,M.Code.MEDIA_SOURCE_OPERATION_FAILED,n))}},{key:"onUpdateEnd_",value:function(e){var t=this.queues_[e][0];window.asserts.assert(t,"Spurious updateend event!"),t&&(window.asserts.assert(!this.sourceBuffers_[e].updating,"SourceBuffer should not be updating on updateend!"),t.p.resolve(),this.popFromQueue_(e))}},{key:"enqueueOperation_",value:function(e,t){this.destroyer_.ensureNotDestroyed();var n={start:t,p:new L};if(this.queues_[e].push(n),1==this.queues_[e].length)try{n.start()}catch(t){"QuotaExceededError"==t.name?n.p.reject(new M(M.Severity.CRITICAL,M.Category.MEDIA,M.Code.QUOTA_EXCEEDED_ERROR,e)):n.p.reject(new M(M.Severity.CRITICAL,M.Category.MEDIA,M.Code.MEDIA_SOURCE_OPERATION_THREW,t)),this.popFromQueue_(e)}return n.p}},{key:"enqueueBlockingOperation_",value:function(){var e=Mi(regeneratorRuntime.mark(function e(t){var n,i,r,a,s,o,l=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(r in this.destroyer_.ensureNotDestroyed(),n=[],i=function(e){var t=new L,i={start:function(){return t.resolve()},p:t};l.queues_[e].push(i),n.push(t),1==l.queues_[e].length&&i.start()},this.sourceBuffers_)i(r);return e.prev=4,e.next=7,Promise.all(n);case 7:if(Fi.DEBUG)for(r in this.sourceBuffers_)window.asserts.assert(0==this.sourceBuffers_[r].updating,"SourceBuffers should not be updating after a blocking op!");try{t()}catch(e){a=Promise.reject(new M(M.Severity.CRITICAL,M.Category.MEDIA,M.Code.MEDIA_SOURCE_OPERATION_THREW,e))}for(s in this.sourceBuffers_)this.popFromQueue_(s);return e.abrupt("return",a);case 13:if(e.prev=13,e.t0=e.catch(4),window.asserts.assert(this.destroyer_.destroyed(),"Should be destroyed by now"),Fi.DEBUG)for(o in this.sourceBuffers_)this.queues_[o].length&&(window.asserts.assert(1==this.queues_[o].length,"Should be at most one item in queue!"),window.asserts.assert(n.includes(this.queues_[o][0].p),"The item in queue should be one of our waiters!"),this.queues_[o].shift());throw e.t0;case 18:case"end":return e.stop()}},e,this,[[4,13]])}));return function(t){return e.apply(this,arguments)}}()},{key:"popFromQueue_",value:function(e){this.queues_[e].shift();var t=this.queues_[e][0];if(t)try{t.start()}catch(n){t.p.reject(new M(M.Severity.CRITICAL,M.Category.MEDIA,M.Code.MEDIA_SOURCE_OPERATION_THREW,n)),this.popFromQueue_(e)}}},{key:"getTextDisplayer",value:function(){return window.asserts.assert(this.textDisplayer_,"TextDisplayer should only be null when this is destroyed"),this.textDisplayer_}},{key:"setTextDisplayer",value:function(e){var t=this.textDisplayer_;this.textDisplayer_=e,t&&(e.setTextVisibility(t.isTextVisible()),t.destroy()),this.textEngine_&&this.textEngine_.setDisplayer(e)}}],i=[{key:"isStreamSupported",value:function(e){var t=Xn.getFullType(e.mimeType,e.codecs),n=Xn.getExtendedType(e);return xi.isTypeSupported(t)||MediaSource.isTypeSupported(n)||Di.isSupported(t,e.type)}},{key:"probeSupport",value:function(){for(var e={},t=0,n=['video/mp4; codecs="avc1.42E01E"','video/mp4; codecs="avc3.42E01E"','video/mp4; codecs="hev1.1.6.L93.90"','video/mp4; codecs="hvc1.1.6.L93.90"','video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084"','video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084"','video/mp4; codecs="vp9"','video/mp4; codecs="vp09.00.10.08"','audio/mp4; codecs="mp4a.40.2"','audio/mp4; codecs="ac-3"','audio/mp4; codecs="ec-3"','audio/mp4; codecs="opus"','audio/mp4; codecs="flac"','video/webm; codecs="vp8"','video/webm; codecs="vp9"','video/webm; codecs="vp09.00.10.08"','audio/webm; codecs="vorbis"','audio/webm; codecs="opus"','video/mp2t; codecs="avc1.42E01E"','video/mp2t; codecs="avc3.42E01E"','video/mp2t; codecs="hvc1.1.6.L93.90"','video/mp2t; codecs="mp4a.40.2"','video/mp2t; codecs="ac-3"','video/mp2t; codecs="ec-3"',"text/vtt",'application/mp4; codecs="wvtt"',"application/ttml+xml",'application/mp4; codecs="stpp"'];t<n.length;t++){var i=n[t];Qn.supportsMediaSource()?xi.isTypeSupported(i)?e[i]=!0:e[i]=MediaSource.isTypeSupported(i)||Di.isSupported(i):e[i]=Qn.supportsMediaType(i);var r=i.split(";")[0];e[r]=e[r]||e[i]}return e}}],n&&Ni(t.prototype,n),i&&Ni(t,i),e}();Bi.createObjectURL=window.URL.createObjectURL,Bi.Operation;var Vi=Bi;function Hi(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Gi(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ji=window.shaka,zi=(window.goog,function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"meetsRestrictions",value:function(e,t,n){var i=function(e,t,n){return e>=t&&e<=n},r=e.video;if(r&&r.width&&r.height){if(!i(r.width,t.minWidth,Math.min(t.maxWidth,n.width)))return!1;if(!i(r.height,t.minHeight,Math.min(t.maxHeight,n.height)))return!1;if(!i(r.width*r.height,t.minPixels,t.maxPixels))return!1}return!!i(e.bandwidth,t.minBandwidth,t.maxBandwidth)}},{key:"applyRestrictions",value:function(t,n,i){var r=!1,a=!0,s=!1,o=void 0;try{for(var l,u=t[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value,d=c.allowedByApplication;c.allowedByApplication=e.meetsRestrictions(c,n,i),d!=c.allowedByApplication&&(r=!0)}}catch(e){s=!0,o=e}finally{try{a||null==u.return||u.return()}finally{if(s)throw o}}return r}},{key:"filterNewPeriod",value:function(t,n,i,r){n&&window.asserts.assert(e.isAudio(n),"Audio streams must have the audio type."),i&&window.asserts.assert(e.isVideo(i),"Video streams must have the video type."),r.variants=r.variants.filter(function(r){if(t&&t.initialized()&&!t.supportsVariant(r))return ji.log.debug("Dropping variant - not compatible with key system",r),!1;var a=r.audio,s=r.video;return a&&!Vi.isStreamSupported(a)?(ji.log.debug("Dropping variant - audio not compatible with platform",e.getStreamSummaryString_(a)),!1):s&&!Vi.isStreamSupported(s)?(ji.log.debug("Dropping variant - video not compatible with platform",e.getStreamSummaryString_(s)),!1):a&&n&&!e.areStreamsCompatible_(a,n)?(ji.log.debug("Droping variant - not compatible with active audio","active audio",e.getStreamSummaryString_(n),"variant.audio",e.getStreamSummaryString_(a)),!1):!(s&&i&&!e.areStreamsCompatible_(s,i))||(ji.log.debug("Droping variant - not compatible with active video","active video",e.getStreamSummaryString_(i),"variant.video",e.getStreamSummaryString_(s)),!1)}),r.textStreams=r.textStreams.filter(function(e){var t=Xn.getFullType(e.mimeType,e.codecs),n=xi.isTypeSupported(t);return n||ji.log.debug("Dropping text stream. Is not supported by the platform.",e),n})}},{key:"areStreamsCompatible_",value:function(e,t){return e.mimeType==t.mimeType&&e.codecs.split(".")[0]==t.codecs.split(".")[0]}},{key:"variantToTrack",value:function(e){var t=e.audio,n=e.video,i=t?t.codecs:null,r=n?n.codecs:null,a=[];r&&a.push(r),i&&a.push(i);var s=[];n&&s.push(n.mimeType),t&&s.push(t.mimeType);var o=s[0]||null,l=[];t&&l.push(t.kind),n&&l.push(n.kind);var u=l[0]||null,c=new Set;if(t){var d=!0,h=!1,f=void 0;try{for(var p,m=t.roles[Symbol.iterator]();!(d=(p=m.next()).done);d=!0){var v=p.value;c.add(v)}}catch(e){h=!0,f=e}finally{try{d||null==m.return||m.return()}finally{if(h)throw f}}}if(n){var g=!0,y=!1,_=void 0;try{for(var b,w=n.roles[Symbol.iterator]();!(g=(b=w.next()).done);g=!0){var E=b.value;c.add(E)}}catch(e){y=!0,_=e}finally{try{g||null==w.return||w.return()}finally{if(y)throw _}}}var S={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:u,width:null,height:null,frameRate:null,mimeType:o,codecs:a.join(", "),audioCodec:i,videoCodec:r,primary:e.primary,roles:Array.from(c),audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null};return n&&(S.videoId=n.id,S.originalVideoId=n.originalId,S.width=n.width||null,S.height=n.height||null,S.frameRate=n.frameRate||null,S.videoBandwidth=n.bandwidth||null),t&&(S.audioId=t.id,S.originalAudioId=t.originalId,S.channelsCount=t.channelsCount,S.audioBandwidth=t.bandwidth||null,S.label=t.label,S.audioRoles=t.roles),S}},{key:"textStreamToTrack",value:function(e){var t=jt.ContentType;return{id:e.id,active:!1,type:t.TEXT,bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,mimeType:e.mimeType,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId}}},{key:"html5TrackId",value:function(t){return t.__shaka_id||(t.__shaka_id=e.nextTrackId_++),t.__shaka_id}},{key:"html5TextTrackToTrack",value:function(t){var n=Xn.CLOSED_CAPTION_MIMETYPE,i=e.html5TrackToGenericShakaTrack_(t);return i.active="disabled"!=t.mode,i.type="text",i.originalTextId=t.id,"captions"==t.kind&&(i.mimeType=n),i}},{key:"html5AudioTrackToTrack",value:function(t){var n=e.html5TrackToGenericShakaTrack_(t);return n.active=t.enabled,n.type="variant",n.originalAudioId=t.id,"main"==t.kind?(n.primary=!0,n.roles=["main"],n.audioRoles=["main"]):n.audioRoles=[],n}},{key:"html5TrackToGenericShakaTrack_",value:function(t){return{id:e.html5TrackId(t),active:!1,type:"",bandwidth:0,language:Wt.normalize(t.language),label:t.label,kind:t.kind,width:null,height:null,frameRate:null,mimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null}}},{key:"isPlayable",value:function(e){return e.allowedByApplication&&e.allowedByKeySystem}},{key:"getPlayableVariants",value:function(t){return t.filter(function(t){return e.isPlayable(t)})}},{key:"filterVariantsByAudioChannelCount",value:function(e,t){var n=e.filter(function(e){return e.audio&&e.audio.channelsCount}),i=new Map,r=!0,a=!1,s=void 0;try{for(var o,l=n[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var u=o.value,c=u.audio.channelsCount;window.asserts.assert(null!=c,"Must have count after filtering!"),i.has(c)||i.set(c,[]),i.get(c).push(u)}}catch(e){a=!0,s=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw s}}var d=Array.from(i.keys());if(0==d.length)return e;var h=d.filter(function(e){return e<=t});return h.length?i.get(Math.max.apply(Math,Hi(h))):i.get(Math.min.apply(Math,Hi(d)))}},{key:"filterStreamsByLanguageAndRole",value:function(t,n,i){var r=t,a=t.filter(function(e){return e.primary});a.length&&(r=a);var s=r.length?r[0].language:"";if(r=r.filter(function(e){return e.language==s}),n){var o=Wt.findClosestLocale(Wt.normalize(n),t.map(function(e){return e.language}));o&&(r=t.filter(function(e){return Wt.normalize(e.language)==o}))}if(i){var l=e.filterTextStreamsByRole_(r,i);if(l.length)return l;ji.log.warning("No exact match for the text role could be found.")}else{var u=r.filter(function(e){return 0==e.roles.length});if(u.length)return u}var c=r.map(function(e){return e.roles}).reduce(Ht.collapseArrays,[]);return c.length?e.filterTextStreamsByRole_(r,c[0]):r}},{key:"filterTextStreamsByRole_",value:function(e,t){return e.filter(function(e){return e.roles.includes(t)})}},{key:"getVariantByStreams",value:function(t,n,i){t&&window.asserts.assert(e.isAudio(t),"Audio streams must have the audio type."),n&&window.asserts.assert(e.isVideo(n),"Video streams must have the video type.");for(var r=0;r<i.length;r++)if(i[r].audio==t&&i[r].video==n)return i[r];return null}},{key:"isAudio",value:function(e){var t=jt.ContentType;return e.type==t.AUDIO}},{key:"isVideo",value:function(e){var t=jt.ContentType;return e.type==t.VIDEO}},{key:"getVariantStreams",value:function(e){var t=[];return e.audio&&t.push(e.audio),e.video&&t.push(e.video),t}},{key:"getStreamSummaryString_",value:function(t){return e.isAudio(t)?"type=audio codecs="+t.codecs+" bandwidth="+t.bandwidth+" channelsCount="+t.channelsCount:e.isVideo(t)?"type=video codecs="+t.codecs+" bandwidth="+t.bandwidth+" frameRate="+t.frameRate+" width="+t.width+" height="+t.height:"unexpected stream type"}}],(n=null)&&Gi(t.prototype,n),i&&Gi(t,i),e}());zi.nextTrackId_=0;var Wi=zi;function qi(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Yi=window.shaka,Ki=(window.goog,function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.switch_=null,this.enabled_=!1,this.bandwidthEstimator_=new Hn,this.variants_=[],this.startupComplete_=!1,this.lastTimeChosenMs_=null,this.config_=null}var t,n,i;return t=e,i=[{key:"filterAndSortVariants_",value:function(e,t){return e&&(t=t.filter(function(t){return window.asserts.assert(e,"Restrictions should exist!"),Wi.meetsRestrictions(t,e,{width:1/0,height:1/0})})),t.sort(function(e,t){return e.bandwidth-t.bandwidth})}}],(n=[{key:"stop",value:function(){this.switch_=null,this.enabled_=!1,this.variants_=[],this.lastTimeChosenMs_=null}},{key:"init",value:function(e){this.switch_=e}},{key:"chooseVariant",value:function(){var t=e.filterAndSortVariants_(this.config_.restrictions,this.variants_),n=this.bandwidthEstimator_.getBandwidthEstimate(this.config_.defaultBandwidthEstimate);this.variants_.length&&!t.length&&(Yi.log.warning("No variants met the ABR restrictions. Choosing a variant by lowest bandwidth."),t=[(t=e.filterAndSortVariants_(null,this.variants_))[0]]);for(var i=t[0]||null,r=0;r<t.length;++r){var a=t[r],s=t[r+1]||{bandwidth:1/0},o=a.bandwidth/this.config_.bandwidthDowngradeTarget,l=s.bandwidth/this.config_.bandwidthUpgradeTarget;Yi.log.v2("Bandwidth ranges:",(a.bandwidth/1e6).toFixed(3),(o/1e6).toFixed(3),(l/1e6).toFixed(3)),n>=o&&n<=l&&(i=a)}return this.lastTimeChosenMs_=Date.now(),i}},{key:"enable",value:function(){this.enabled_=!0}},{key:"disable",value:function(){this.enabled_=!1}},{key:"segmentDownloaded",value:function(e,t){Yi.log.v2("Segment downloaded:","deltaTimeMs="+e,"numBytes="+t,"lastTimeChosenMs="+this.lastTimeChosenMs_,"enabled="+this.enabled_),window.asserts.assert(e>=0,"expected a non-negative duration"),this.bandwidthEstimator_.sample(e,t),null!=this.lastTimeChosenMs_&&this.enabled_&&this.suggestStreams_()}},{key:"getBandwidthEstimate",value:function(){return this.bandwidthEstimator_.getBandwidthEstimate(this.config_.defaultBandwidthEstimate)}},{key:"setVariants",value:function(e){this.variants_=e}},{key:"configure",value:function(e){this.config_=e}},{key:"suggestStreams_",value:function(){if(Yi.log.v2("Suggesting Streams..."),window.asserts.assert(null!=this.lastTimeChosenMs_,"lastTimeChosenMs_ should not be null"),this.startupComplete_){if(Date.now()-this.lastTimeChosenMs_<1e3*this.config_.switchInterval)return void Yi.log.v2("Still within switch interval...")}else{if(!this.bandwidthEstimator_.hasGoodEstimate())return void Yi.log.v2("Still waiting for a good estimate...");this.startupComplete_=!0}var e=this.chooseVariant(),t=this.bandwidthEstimator_.getBandwidthEstimate(this.config_.defaultBandwidthEstimate),n=Math.round(t/1e3);Yi.log.debug("Calling switch_(), bandwidth="+n+" kbps"),this.switch_(e)}}])&&qi(t.prototype,n),i&&qi(t,i),e}());function Xi(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var $i=window.shaka,Zi=(window.goog,function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"createDefault",value:function(){var t=1e6,n=1/0;navigator.connection&&(t=1e6*navigator.connection.downlink,navigator.connection.saveData&&(n=360));var i={retryParameters:oe.defaultRetryParameters(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1},r={retryParameters:oe.defaultRetryParameters(),availabilityWindowOverride:NaN,dash:{customScheme:function(e){return e&&null},clockSyncUri:"",ignoreDrmInfo:!1,xlinkFailGracefully:!1,defaultPresentationDelay:10,ignoreMinBufferTime:!1,autoCorrectDrift:!0}},a={retryParameters:oe.defaultRetryParameters(),failureCallback:function(e){$i.log.error("Unhandled streaming error",e)},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,smallGapLimit:.5,jumpLargeGaps:!1,durationBackoff:1,forceTransmuxTS:!1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1};Qn.isWebOS()&&(a.stallEnabled=!1);var s={trackSelectionCallback:function(e){return e},progressCallback:function(e,t){$i.log.v2("Offline operation on",e.originalManifestUri,"progress at",t)},usePersistentLicense:!0},o={drm:i,manifest:r,streaming:a,offline:s,abrFactory:Ki,abr:{enabled:!0,defaultBandwidthEstimate:t,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:n,minPixels:0,maxPixels:1/0,minBandwidth:0,maxBandwidth:1/0}},preferredAudioLanguage:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayFactory:function(){return null}};return s.trackSelectionCallback=function(t){return e.defaultTrackSelect(t,o.preferredAudioLanguage)},o}},{key:"mergeConfigObjects",value:function(t,n,i){var r={".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",serverCertificate:new Uint8Array(0),individualizationServer:""}};return Un.mergeConfigObjects(t,n,i||e.createDefault(),r,"")}},{key:"defaultTrackSelect",value:function(e,t){var n=jt.ContentType,i=e.filter(function(e){return"variant"==e.type}),r=[],a=Wt.findClosestLocale(t,i.map(function(e){return e.language}));(a&&(r=i.filter(function(e){return Wt.normalize(e.language)==a})),0==r.length&&(r=i.filter(function(e){return e.primary})),0==r.length)&&(new Set(i.map(function(e){return e.language})).size>1&&$i.log.warning("Could not choose a good audio track based on language preferences or primary tracks.  An arbitrary language will be stored!"),r=i);var s=r.filter(function(e){return e.height&&e.height<=480});s.length&&(s.sort(function(e,t){return t.height-e.height}),r=s.filter(function(e){return e.height==s[0].height}));var o=[];if(r.length){var l=Math.floor(r.length/2);r.sort(function(e,t){return e.bandwidth-t.bandwidth}),o.push(r[l])}var u=!0,c=!1,d=void 0;try{for(var h,f=e[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var p=h.value;p.type==n.TEXT&&o.push(p)}}catch(e){c=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw d}}return o}}],(n=null)&&Xi(t.prototype,n),i&&Xi(t,i),e}());function Qi(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(i,r)}function Ji(e){return function(){var t=this,n=arguments;return new Promise(function(i,r){var a=e.apply(t,n);function s(e){Qi(a,i,r,s,o,"next",e)}function o(e){Qi(a,i,r,s,o,"throw",e)}s(void 0)})}}function er(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var tr=new M,nr=window.shaka,ir=(window.goog,function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,n=null,i=[{key:"registerParserByExtension",value:function(t,n){e.parsersByExtension[t]=n}},{key:"registerParserByMime",value:function(t,n){e.parsersByMime[t]=n}},{key:"probeSupport",value:function(){var t={};if(Qn.supportsMediaSource()){for(var n in e.parsersByMime)t[n]=!0;for(var i in e.parsersByExtension)t[i]=!0}for(var r={mpd:"application/dash+xml",m3u8:"application/x-mpegurl",ism:"application/vnd.ms-sstr+xml"},a=0,s=["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"];a<s.length;a++){var o=s[a];Qn.supportsMediaSource()?t[o]=!!e.parsersByMime[o]:t[o]=Qn.supportsMediaType(o)}for(var l in r)if(Qn.supportsMediaSource())t[l]=!!e.parsersByExtension[l];else{var u=r[l];t[l]=Qn.supportsMediaType(u)}return t}},{key:"create",value:function(){var t=Ji(regeneratorRuntime.mark(function t(n,i,r,a){var s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.getFactory_(n,i,r,a);case 3:return s=t.sent,t.abrupt("return",new s);case 7:throw t.prev=7,t.t0=t.catch(0),window.asserts.assert(t.t0 instanceof M,"Incorrect error type"),t.t0.severity=tr.severity.CRITICAL,t.t0;case 12:case"end":return t.stop()}},t,null,[[0,7]])}));return function(e,n,i,r){return t.apply(this,arguments)}}()},{key:"getFactory_",value:function(){var t=Ji(regeneratorRuntime.mark(function t(n,i,r,a){var s,o,l,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=5;break}if(!(s=e.parsersByMime[a.toLowerCase()])){t.next=4;break}return t.abrupt("return",s);case 4:nr.log.warning("Could not determine manifest type using MIME type ",a);case 5:if(!(o=e.getExtension(n))){t.next=13;break}if(!(l=e.parsersByExtension[o])){t.next=10;break}return t.abrupt("return",l);case 10:nr.log.warning("Could not determine manifest type for extension ",o),t.next=14;break;case 13:nr.log.warning("Could not find extension for ",n);case 14:if(a){t.next=23;break}return t.next=17,e.getMimeType(n,i,r);case 17:if(!(a=t.sent)){t.next=23;break}if(!(u=e.parsersByMime[a])){t.next=22;break}return t.abrupt("return",u);case 22:nr.log.warning("Could not determine manifest type using MIME type",a);case 23:throw new tr(tr.severity.CRITICAL,tr.category.MANIFEST,tr.code.UNABLE_TO_GUESS_MANIFEST_TYPE,n);case 24:case"end":return t.stop()}},t)}));return function(e,n,i,r){return t.apply(this,arguments)}}()},{key:"getMimeType",value:function(){var e=Ji(regeneratorRuntime.mark(function e(t,n,i){var r,a,s,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=oe.RequestType.MANIFEST,(a=oe.makeRequest([t],i)).method="HEAD",e.next=5,n.request(r,a).promise;case 5:return s=e.sent,o=s.headers["content-type"],e.abrupt("return",o?o.toLowerCase():"");case 8:case"end":return e.stop()}},e)}));return function(t,n,i){return e.apply(this,arguments)}}()},{key:"getExtension",value:function(e){var t=new $(e).getPath().split("/").pop().split(".");return 1==t.length?"":t.pop().toLowerCase()}},{key:"isSupported",value:function(t,n){return!!Qn.supportsMediaSource()&&(n in e.parsersByMime||e.getExtension(t)in e.parsersByExtension)}}],n&&er(t.prototype,n),i&&er(t,i),e}());ir.parsersByMime={},ir.parsersByExtension={};var rr=ir;function ar(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka;var sr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.estimatedTotal_=0,this.estimatedDownloaded_=0,this.actualDownloaded_=0,this.pending_=new Map,this.nextId_=0}var t,n,i;return t=e,(n=[{key:"open",value:function(e){this.estimatedTotal_+=e;var t=this.nextId_;return this.nextId_++,this.pending_.set(t,e),t}},{key:"close",value:function(e,t){if(this.pending_.has(e)){var n=this.pending_.get(e);this.pending_.delete(e),this.estimatedDownloaded_+=n,this.actualDownloaded_+=t}}},{key:"getEstimatedProgress",value:function(){return 0==this.estimatedTotal_?0:this.estimatedDownloaded_/this.estimatedTotal_}},{key:"getTotalDownloaded",value:function(){return this.actualDownloaded_}}])&&ar(t.prototype,n),i&&ar(t,i),e}();function or(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(i,r)}function lr(e){return function(){var t=this,n=arguments;return new Promise(function(i,r){var a=e.apply(t,n);function s(e){or(a,i,r,s,o,"next",e)}function o(e){or(a,i,r,s,o,"throw",e)}s(void 0)})}}function ur(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var cr=window.shaka,dr=(window.goog,function(){function e(t,n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.networkingEngine_=t,this.groups_=new Map,this.destroyer_=new zn(function(){var e=Array.from(i.groups_.values());return Promise.all(e.map(function(e){return e.catch(function(){})}))}),this.onProgress_=n,this.estimator_=new sr}var t,n,i;return t=e,(n=[{key:"destroy",value:function(){return this.destroyer_.destroy()}},{key:"queue",value:function(e,t,n,i){var r=this;this.destroyer_.ensureNotDestroyed();var a=this.estimator_.open(n),s=this.groups_.get(e)||Promise.resolve();this.groups_.set(e,s.then(lr(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.fetchSegment_(t);case 2:if(n=e.sent,!r.destroyer_.destroyed()){e.next=5;break}throw new cr.util.Error(cr.util.Error.Severity.CRITICAL,cr.util.Error.Category.STORAGE,cr.util.Error.Code.OPERATION_ABORTED);case 5:return r.estimator_.close(a,n.byteLength),r.onProgress_(r.estimator_.getEstimatedProgress(),r.estimator_.getTotalDownloaded()),e.abrupt("return",i(n));case 8:case"end":return e.stop()}},e)}))))}},{key:"waitToFinish",value:function(){var e=lr(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(this.groups_.values());case 2:return e.abrupt("return",this.estimator_.getTotalDownloaded());case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"fetchSegment_",value:function(){var e=lr(regeneratorRuntime.mark(function e(t){var n,i,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=oe.RequestType.SEGMENT,i=this.networkingEngine_.request(n,t),e.next=4,i.promise;case 4:return r=e.sent,window.asserts.assert(r.data,"Response data should be non-null!"),e.abrupt("return",r.data);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}])&&ur(t.prototype,n),i&&ur(t,i),e}());function hr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var fr=function(){function e(t,n,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type_=t,this.mechanism_=n,this.cell_=i,this.key_=r,this.asString_=["offline:",t,"/",n,"/",i,"/",r].join("")}var t,n,i;return t=e,i=[{key:"parse",value:function(t){var n=/^offline:([a-z]+)\/([^\/]+)\/([^\/]+)\/([0-9]+)$/.exec(t);if(null==n)return null;var i=n[1];if("manifest"!=i&&"segment"!=i)return null;var r=n[2];if(!r)return null;var a=n[3];if(!a)return null;var s=Number(n[4]);return null==i?null:new e(i,r,a,s)}},{key:"manifest",value:function(t,n,i){return new e("manifest",t,n,i)}},{key:"segment",value:function(t,n,i){return new e("segment",t,n,i)}}],(n=[{key:"isManifest",value:function(){return"manifest"==this.type_}},{key:"isSegment",value:function(){return"segment"==this.type_}},{key:"mechanism",value:function(){return this.mechanism_}},{key:"cell",value:function(){return this.cell_}},{key:"key",value:function(){return this.key_}},{key:"toString",value:function(){return this.asString_}}])&&hr(t.prototype,n),i&&hr(t,i),e}();function pr(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(i,r)}function mr(e){return function(){var t=this,n=arguments;return new Promise(function(i,r){var a=e.apply(t,n);function s(e){pr(a,i,r,s,o,"next",e)}function o(e){pr(a,i,r,s,o,"throw",e)}s(void 0)})}}function vr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var gr=window.shaka,yr=(window.goog,function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,n=[{key:"delete",value:function(){var e=mr(regeneratorRuntime.mark(function e(t,n,i){var r,a,s,o,l,u,c,d,h,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=r,a=[],s=!0,o=!1,l=void 0,e.prev=5,u=r.createBuckets_(i)[Symbol.iterator]();case 7:if(s=(c=u.next()).done){e.next=17;break}return d=c.value,h=this.doDelete_(t,n,d),e.next=12,h;case 12:f=e.sent,a=a.concat(f);case 14:s=!0,e.next=7;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(5),o=!0,l=e.t0;case 23:e.prev=23,e.prev=24,s||null==u.return||u.return();case 26:if(e.prev=26,!o){e.next=29;break}throw l;case 29:return e.finish(26);case 30:return e.finish(23);case 31:return e.abrupt("return",a);case 32:case"end":return e.stop()}},e,this,[[5,19,23,31],[24,,26,30]])}));return function(t,n,i){return e.apply(this,arguments)}}()},{key:"doDelete_",value:function(){var e=mr(regeneratorRuntime.mark(function e(t,n,i){var r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new gr.media.DrmEngine({netEngine:n,onError:function(){},onKeyStatus:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),e.prev=1,r.configure(t),e.next=5,r.initForRemoval(i.info.keySystem,i.info.licenseUri,i.info.serverCertificate,i.info.audioCapabilities,i.info.videoCapabilities);case 5:e.next=13;break;case 7:return e.prev=7,e.t0=e.catch(1),gr.log.warning("Error initializing EME",e.t0),e.next=12,r.destroy();case 12:return e.abrupt("return",[]);case 13:return e.prev=13,e.next=16,r.setServerCertificate();case 16:e.next=24;break;case 18:return e.prev=18,e.t1=e.catch(13),gr.log.warning("Error setting server certificate",e.t1),e.next=23,r.destroy();case 23:return e.abrupt("return",[]);case 24:return a=[],e.next=27,Promise.all(i.sessionIds.map(function(){var e=mr(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.removeSession(t);case 3:a.push(t),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),gr.log.warning("Error deleting offline session",e.t0);case 9:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t){return e.apply(this,arguments)}}()));case 27:return e.next=29,r.destroy();case 29:return e.abrupt("return",a);case 30:case"end":return e.stop()}},e,null,[[1,7],[13,18]])}));return function(t,n,i){return e.apply(this,arguments)}}()}],i=[{key:"createBuckets_",value:function(e){var t=t,n=[],i=!0,r=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){for(var l=s.value,u=!1,c=0,d=n;c<d.length;c++){var h=d[c];if(t.isCompatible_(h.info,l)){h.sessionIds.push(l.sessionId),u=!0;break}}u||n.push({info:l,sessionIds:[l.sessionId]})}}catch(e){r=!0,a=e}finally{try{i||null==o.return||o.return()}finally{if(r)throw a}}return n}},{key:"isCompatible_",value:function(e,t){var n=function(e,t){return e.robustness==t.robustness&&e.contentType==t.contentType};return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&m.hasSameElements(e.audioCapabilities,t.audioCapabilities,n)&&m.hasSameElements(e.videoCapabilities,t.videoCapabilities,n)}}],n&&vr(t.prototype,n),i&&vr(t,i),e}());yr.Bucket_={};var _r=yr;function br(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(i,r)}function wr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Er=window.shaka,Sr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mechanisms_=new Map}var t,n,i;return t=e,n=[{key:"destroy",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var r,a=this.mechanisms_.values()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var s=r.value;e.push(s.destroy())}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return this.mechanisms_.clear(),Promise.all(e)}},{key:"init",value:function(){var t=this;e.getRegistry_().forEach(function(e,n){var i=e();i?t.mechanisms_.set(n,i):Er.log.info("Skipping "+n+" as it is not supported on this platform")});var n=[],i=!0,r=!1,a=void 0;try{for(var s,o=this.mechanisms_.values()[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;n.push(l.init())}}catch(e){r=!0,a=e}finally{try{i||null==o.return||o.return()}finally{if(r)throw a}}return Promise.all(n)}},{key:"getActive",value:function(){var e=null;if(this.mechanisms_.forEach(function(t,n){t.getCells().forEach(function(t,i){t.hasFixedKeySpace()||e||(e={path:{mechanism:n,cell:i},cell:t})})}),e)return e;throw new Er.util.Error(Er.util.Error.Severity.CRITICAL,Er.util.Error.Category.STORAGE,Er.util.Error.Code.MISSING_STORAGE_CELL,"Could not find a cell that supports add-operations")}},{key:"forEachCell",value:function(e){this.mechanisms_.forEach(function(t,n){t.getCells().forEach(function(t,i){e({mechanism:n,cell:i},t)})})}},{key:"getCell",value:function(e,t){var n=this.mechanisms_.get(e);if(!n)throw new Er.util.Error(Er.util.Error.Severity.CRITICAL,Er.util.Error.Category.STORAGE,Er.util.Error.Code.MISSING_STORAGE_CELL,"Could not find mechanism with name "+e);var i=n.getCells().get(t);if(!i)throw new Er.util.Error(Er.util.Error.Severity.CRITICAL,Er.util.Error.Category.STORAGE,Er.util.Error.Code.MISSING_STORAGE_CELL,"Could not find cell with name "+t);return i}},{key:"forEachEmeSessionCell",value:function(e){this.mechanisms_.forEach(function(t,n){e(t.getEmeSessionCell())})}},{key:"getEmeSessionCell",value:function(){var e=Array.from(this.mechanisms_.keys());if(!e.length)throw new Er.util.Error(Er.util.Error.Severity.CRITICAL,Er.util.Error.Category.STORAGE,Er.util.Error.Code.STORAGE_NOT_SUPPORTED,"No supported storage mechanisms found");return this.mechanisms_.get(e[0]).getEmeSessionCell()}},{key:"resolvePath",value:function(e){var t=this.mechanisms_.get(e.mechanism);return t?t.getCells().get(e.cell):null}},{key:"erase",value:function(){var t,n=(t=regeneratorRuntime.mark(function t(){var n,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=Array.from(this.mechanisms_.values()),(i=n.length>0)||e.getRegistry_().forEach(function(e,t){var i=e();i&&n.push(i)}),t.next=5,Promise.all(n.map(function(e){return e.erase()}));case 5:if(i){t.next=8;break}return t.next=8,Promise.all(n.map(function(e){return e.destroy()}));case 8:case"end":return t.stop()}},t,this)}),function(){var e=this,n=arguments;return new Promise(function(i,r){var a=t.apply(e,n);function s(e){br(a,i,r,s,o,"next",e)}function o(e){br(a,i,r,s,o,"throw",e)}s(void 0)})});return function(){return n.apply(this,arguments)}}()}],i=[{key:"register",value:function(t,n){e.registry_.set(t,n)}},{key:"unregister",value:function(t){e.registry_.delete(t)}},{key:"support",value:function(){var t=e.getRegistry_(),n=!0,i=!1,r=void 0;try{for(var a,s=t.values()[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=(0,a.value)();if(o)return o.destroy(),!0}}catch(e){i=!0,r=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}return!1}},{key:"overrideSupport",value:function(t){e.override_=t}},{key:"clearOverride",value:function(){e.override_=null}},{key:"getRegistry_",value:function(){var t=e.override_,n=e.registry_;return window.COMPILED?n:t||n}}],n&&wr(t.prototype,n),i&&wr(t,i),e}();Sr.override_=null,Sr.registry_=new Map;var Tr=Sr;function kr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Cr=window.shaka,Ir=window.goog,Ar=function(){function e(t,n){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.presentationStartTime_=t,this.presentationDelay_=n,this.duration_=1/0,this.segmentAvailabilityDuration_=1/0,this.maxSegmentDuration_=1,this.minSegmentStartTime_=null,this.maxSegmentEndTime_=null,this.clockOffset_=0,this.static_=!0,this.userSeekStart_=0,this.autoCorrectDrift_=i}var t,n,i;return t=e,(n=[{key:"getDuration",value:function(){return this.duration_}},{key:"getMaxSegmentDuration",value:function(){return this.maxSegmentDuration_}},{key:"setDuration",value:function(e){window.asserts.assert(e>0,"duration must be > 0"),this.duration_=e}},{key:"getPresentationStartTime",value:function(){return this.presentationStartTime_}},{key:"setClockOffset",value:function(e){this.clockOffset_=e}},{key:"setStatic",value:function(e){this.static_=e}},{key:"setSegmentAvailabilityDuration",value:function(e){window.asserts.assert(e>=0,"segmentAvailabilityDuration must be >= 0"),this.segmentAvailabilityDuration_=e}},{key:"setDelay",value:function(e){window.asserts.assert(e>=0,"delay must be >= 0"),this.presentationDelay_=e}},{key:"getDelay",value:function(){return this.presentationDelay_}},{key:"notifySegments",value:function(e,t){if(0!=e.length){var n=e[0].startTime+t,i=e[e.length-1].endTime+t;if(this.notifyMinSegmentStartTime(n),this.maxSegmentDuration_=e.reduce(function(e,t){return Math.max(e,t.endTime-t.startTime)},this.maxSegmentDuration_),this.maxSegmentEndTime_=Math.max(this.maxSegmentEndTime_,i),null!=this.presentationStartTime_&&this.autoCorrectDrift_){var r=(Date.now()+this.clockOffset_)/1e3;this.presentationStartTime_=r-this.maxSegmentEndTime_-this.maxSegmentDuration_}Cr.log.v1("notifySegments:","maxSegmentDuration="+this.maxSegmentDuration_)}}},{key:"notifyMinSegmentStartTime",value:function(e){null==this.minSegmentStartTime_?this.minSegmentStartTime_=e:this.minSegmentStartTime_=Math.min(this.minSegmentStartTime_,e)}},{key:"notifyMaxSegmentDuration",value:function(e){this.maxSegmentDuration_=Math.max(this.maxSegmentDuration_,e),Cr.log.v1("notifyNewSegmentDuration:","maxSegmentDuration="+this.maxSegmentDuration_)}},{key:"offset",value:function(e){null!=this.minSegmentStartTime_&&(this.minSegmentStartTime_+=e),null!=this.maxSegmentEndTime_&&(this.maxSegmentEndTime_+=e)}},{key:"isLive",value:function(){return this.duration_==1/0&&!this.static_}},{key:"isInProgress",value:function(){return this.duration_!=1/0&&!this.static_}},{key:"getSegmentAvailabilityStart",value:function(){if(window.asserts.assert(this.segmentAvailabilityDuration_>=0,"The availability duration should be positive"),this.segmentAvailabilityDuration_==1/0)return this.userSeekStart_;var e=this.getSegmentAvailabilityEnd()-this.segmentAvailabilityDuration_;return Math.max(this.userSeekStart_,e)}},{key:"setUserSeekStart",value:function(e){this.userSeekStart_=e}},{key:"getSegmentAvailabilityEnd",value:function(){return this.isLive()||this.isInProgress()?Math.min(this.getLiveEdge_(),this.duration_):this.duration_}},{key:"getSafeSeekRangeStart",value:function(e){var t=Math.max(this.minSegmentStartTime_,this.userSeekStart_);if(this.segmentAvailabilityDuration_==1/0)return t;var n=this.getSegmentAvailabilityEnd()-this.segmentAvailabilityDuration_,i=Math.min(n+e,this.getSeekRangeEnd());return Math.max(t,i)}},{key:"getSeekRangeStart",value:function(){return this.getSafeSeekRangeStart(0)}},{key:"getSeekRangeEnd",value:function(){var e=this.isLive()||this.isInProgress()?this.presentationDelay_:0;return Math.max(0,this.getSegmentAvailabilityEnd()-e)}},{key:"usingPresentationStartTime",value:function(){return null!=this.presentationStartTime_&&null==this.maxSegmentEndTime_}},{key:"getLiveEdge_",value:function(){window.asserts.assert(null!=this.presentationStartTime_,"Cannot compute timeline live edge without start time");var e=(Date.now()+this.clockOffset_)/1e3;return Math.max(0,e-this.maxSegmentDuration_-this.presentationStartTime_)}},{key:"assertIsValid",value:function(){Ir.DEBUG&&(this.isLive()?window.asserts.assert(null!=this.presentationStartTime_,"Detected as live stream, but does not match our model of live!"):this.isInProgress()?window.asserts.assert(null!=this.presentationStartTime_&&this.segmentAvailabilityDuration_==1/0,"Detected as IPR stream, but does not match our model of IPR!"):window.asserts.assert(this.segmentAvailabilityDuration_==1/0&&this.duration_!=1/0&&this.static_,"Detected as VOD stream, but does not match our model of VOD!"))}}])&&kr(t.prototype,n),i&&kr(t,i),e}();function xr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Rr(e,t,n){return t&&Lr(e.prototype,t),n&&Lr(e,n),e}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */window.shaka,window.goog;var Pr=function(){function e(t,n,i){xr(this,e),this.getUris=t,this.startByte=n,this.endByte=i}return Rr(e,[{key:"createUris",value:function(){return this.getUris()}},{key:"getStartByte",value:function(){return this.startByte}},{key:"getEndByte",value:function(){return this.endByte}},{key:"getSize",value:function(){return this.endByte?this.endByte-this.startByte:null}}]),e}(),Dr=function(){function e(t,n,i,r,a,s){xr(this,e),window.asserts.assert(n<i,"startTime must be less than endTime"),window.asserts.assert(a<s||null==s,"startByte must be < endByte"),this.position=t,this.startTime=n,this.endTime=i,this.getUris=r,this.startByte=a,this.endByte=s}return Rr(e,[{key:"getPosition",value:function(){return this.position}},{key:"getStartTime",value:function(){return this.startTime}},{key:"getEndTime",value:function(){return this.endTime}},{key:"createUris",value:function(){return this.getUris()}},{key:"getStartByte",value:function(){return this.startByte}},{key:"getEndByte",value:function(){return this.endByte}},{key:"getSize",value:function(){return this.endByte?this.endByte-this.startByte:null}}]),e}();function Or(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Mr=window.shaka,Nr=window.goog,Ur=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Nr.DEBUG&&e.assertCorrectReferences_(t),this.references_=t}var t,n,i;return t=e,(n=[{key:"destroy",value:function(){return this.references_=null,Promise.resolve()}},{key:"find",value:function(e){for(var t=this.references_.length-1;t>=0;--t){var n=this.references_[t];if(e>=n.startTime&&e<n.endTime)return n.position}return this.references_.length&&e<this.references_[0].startTime?this.references_[0].position:null}},{key:"get",value:function(e){if(0==this.references_.length)return null;var t=e-this.references_[0].position;return t<0||t>=this.references_.length?null:this.references_[t]}},{key:"offset",value:function(e){for(var t=0;t<this.references_.length;++t)this.references_[t].startTime+=e,this.references_[t].endTime+=e}},{key:"merge",value:function(t){Nr.DEBUG&&e.assertCorrectReferences_(t);for(var n=[],i=0,r=0;i<this.references_.length&&r<t.length;){var a=this.references_[i],s=t[r];if(a.startTime<s.startTime)n.push(a),i++;else if(a.startTime>s.startTime)0==i?n.push(s):Mr.log.warning("Refusing to rewrite original references on update!"),r++;else{if(Math.abs(a.endTime-s.endTime)>.1){window.asserts.assert(s.endTime>a.endTime&&i==this.references_.length-1&&r==t.length-1,"This should be an update of the last segment in a period");var o=new Dr(a.position,s.startTime,s.endTime,s.getUris,s.startByte,s.endByte);n.push(o)}else n.push(a);i++,r++}}for(;i<this.references_.length;)n.push(this.references_[i++]);if(n.length)for(var l=n[n.length-1].position+1;r<t.length;){var u=t[r++],c=new Dr(l++,u.startTime,u.endTime,u.getUris,u.startByte,u.endByte);n.push(c)}else n=t;Nr.DEBUG&&e.assertCorrectReferences_(n),this.references_=n}},{key:"replace",value:function(t){Nr.DEBUG&&e.assertCorrectReferences_(t),this.references_=t}},{key:"evict",value:function(e){for(var t=0;t<this.references_.length;++t)if(this.references_[t].endTime>e)return void this.references_.splice(0,t);this.references_=[]}},{key:"fit",value:function(e){for(window.asserts.assert(null!=e,"Period duration must be known for static content!"),window.asserts.assert(e!=1/0,"Period duration must be finite for static content!");this.references_.length;){if(!(this.references_[this.references_.length-1].startTime>=e))break;this.references_.pop()}for(;this.references_.length;){if(!(this.references_[0].endTime<=0))break;this.references_.shift()}if(0!=this.references_.length){var t=this.references_[this.references_.length-1];this.references_[this.references_.length-1]=new Dr(t.position,t.startTime,e,t.getUris,t.startByte,t.endByte)}}}])&&Or(t.prototype,n),i&&Or(t,i),e}();function Fr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Nr.DEBUG&&(Ur.assertCorrectReferences_=function(e){window.asserts.assert(e.every(function(t,n){if(0==n)return!0;var i=e[n-1];return t.position==i.position+1&&(i.startTime<t.startTime||!(i.startTime>t.startTime)&&i.endTime<=t.endTime)}),"SegmentReferences are incorrect")});
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var Br=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mechanism_=t,this.cell_=n}var t,n,i;return t=e,(n=[{key:"fromManifestDB",value:function(e){var t=this,n=new Ar(null,0);n.setDuration(e.duration);var i=e.periods.map(function(e){return t.fromPeriodDB(e,n)}),r=e.drmInfo?[e.drmInfo]:[];if(e.drmInfo){var a=!0,s=!1,o=void 0;try{for(var l,u=i[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value,d=!0,h=!1,f=void 0;try{for(var p,m=c.variants[Symbol.iterator]();!(d=(p=m.next()).done);d=!0){p.value.drmInfos=r}}catch(e){h=!0,f=e}finally{try{d||null==m.return||m.return()}finally{if(h)throw f}}}}catch(e){s=!0,o=e}finally{try{a||null==u.return||u.return()}finally{if(s)throw o}}}return{presentationTimeline:n,minBufferTime:2,offlineSessionIds:e.sessionIds,periods:i}}},{key:"fromPeriodDB",value:function(e,t){var n=this,i=e.streams.filter(function(e){return n.isAudio_(e)}),r=e.streams.filter(function(e){return n.isVideo_(e)}),a=this.createVariants(i,r),s=e.streams.filter(function(e){return n.isText_(e)}).map(function(e){return n.fromStreamDB_(e)}),o=!0,l=!1,u=void 0;try{for(var c,d=e.streams[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){var h=c.value.segments.map(function(e,t){return n.fromSegmentDB_(t,e)});t.notifySegments(h,e.startTime)}}catch(e){l=!0,u=e}finally{try{o||null==d.return||d.return()}finally{if(l)throw u}}return{startTime:e.startTime,variants:Array.from(a.values()),textStreams:s}}},{key:"createVariants",value:function(e,t){var n=new Set,i=!0,r=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value,u=!0,c=!1,d=void 0;try{for(var h,f=l.variantIds[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var p=h.value;n.add(p)}}catch(e){c=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw d}}}}catch(e){r=!0,a=e}finally{try{i||null==o.return||o.return()}finally{if(r)throw a}}var m=!0,v=!1,g=void 0;try{for(var y,_=t[Symbol.iterator]();!(m=(y=_.next()).done);m=!0){var b=y.value,w=!0,E=!1,S=void 0;try{for(var T,k=b.variantIds[Symbol.iterator]();!(w=(T=k.next()).done);w=!0){var C=T.value;n.add(C)}}catch(e){E=!0,S=e}finally{try{w||null==k.return||k.return()}finally{if(E)throw S}}}}catch(e){v=!0,g=e}finally{try{m||null==_.return||_.return()}finally{if(v)throw g}}var I=new Map,A=!0,x=!1,L=void 0;try{for(var R,P=n[Symbol.iterator]();!(A=(R=P.next()).done);A=!0){var D=R.value;I.set(D,this.createEmptyVariant_(D))}}catch(e){x=!0,L=e}finally{try{A||null==P.return||P.return()}finally{if(x)throw L}}var O=!0,M=!1,N=void 0;try{for(var U,F=e[Symbol.iterator]();!(O=(U=F.next()).done);O=!0){var B=U.value,V=this.fromStreamDB_(B),H=!0,G=!1,j=void 0;try{for(var z,W=B.variantIds[Symbol.iterator]();!(H=(z=W.next()).done);H=!0){var q=z.value,Y=I.get(q);window.asserts.assert(!Y.audio,"A variant should only have one audio stream"),Y.language=V.language,Y.primary=Y.primary||V.primary,Y.audio=V}}catch(e){G=!0,j=e}finally{try{H||null==W.return||W.return()}finally{if(G)throw j}}}}catch(e){M=!0,N=e}finally{try{O||null==F.return||F.return()}finally{if(M)throw N}}var K=!0,X=!1,$=void 0;try{for(var Z,Q=t[Symbol.iterator]();!(K=(Z=Q.next()).done);K=!0){var J=Z.value,ee=this.fromStreamDB_(J),te=!0,ne=!1,ie=void 0;try{for(var re,ae=J.variantIds[Symbol.iterator]();!(te=(re=ae.next()).done);te=!0){var se=re.value,oe=I.get(se);window.asserts.assert(!oe.video,"A variant should only have one video stream"),oe.primary=oe.primary||ee.primary,oe.video=ee}}catch(e){ne=!0,ie=e}finally{try{te||null==ae.return||ae.return()}finally{if(ne)throw ie}}}}catch(e){X=!0,$=e}finally{try{K||null==Q.return||Q.return()}finally{if(X)throw $}}return I}},{key:"fromStreamDB_",value:function(e){var t=this,n=e.segments.map(function(e,n){return t.fromSegmentDB_(n,e)}),i=new Ur(n),r={id:e.id,originalId:e.originalId,createSegmentIndex:function(){return Promise.resolve()},findSegmentPosition:function(e){return i.find(e)},getSegmentReference:function(e){return i.get(e)},initSegmentReference:null,presentationTimeOffset:e.presentationTimeOffset,mimeType:e.mimeType,codecs:e.codecs,width:e.width||void 0,height:e.height||void 0,frameRate:e.frameRate||void 0,kind:e.kind,encrypted:e.encrypted,keyId:e.keyId,language:e.language,label:e.label||null,type:e.contentType,primary:e.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,closedCaptions:null};return null!=e.initSegmentKey&&(r.initSegmentReference=this.fromInitSegmentDB_(e.initSegmentKey)),r}},{key:"fromSegmentDB_",value:function(e,t){var n=fr.segment(this.mechanism_,this.cell_,t.dataKey);return new Dr(e,t.startTime,t.endTime,function(){return[n.toString()]},0,null)}},{key:"fromInitSegmentDB_",value:function(e){var t=fr.segment(this.mechanism_,this.cell_,e);return new Pr(function(){return[t.toString()]},0,null)}},{key:"isAudio_",value:function(e){var t=jt.ContentType;return e.contentType==t.AUDIO}},{key:"isVideo_",value:function(e){var t=jt.ContentType;return e.contentType==t.VIDEO}},{key:"isText_",value:function(e){var t=jt.ContentType;return e.contentType==t.TEXT}},{key:"createEmptyVariant_",value:function(e){return{id:e,language:"",primary:!1,audio:null,video:null,bandwidth:0,drmInfos:[],allowedByApplication:!0,allowedByKeySystem:!0}}}])&&Fr(t.prototype,n),i&&Fr(t,i),e}();function Vr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var Hr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"fromManifest",value:function(t,n,i,r){window.asserts.assert(n.periods.length,"Cannot create stored content from manifest with no periods.");var a=null==n.expiration?1/0:n.expiration,s=n.presentationTimeline.getDuration(),o=n.periods[0];return{offlineUri:null,originalManifestUri:t,duration:s,size:i,expiration:a,tracks:e.getTracks_(o),appMetadata:r}}},{key:"fromManifestDB",value:function(t,n){window.asserts.assert(n.periods.length,"Cannot create stored content from manifestDB with no periods.");var i=new Br(t.mechanism(),t.cell()),r=n.periods[0],a=new Ar(null,0),s=i.fromPeriodDB(r,a),o=n.appMetadata||{},l=e.getTracks_(s);return{offlineUri:t.toString(),originalManifestUri:n.originalManifestUri,duration:n.duration,size:n.size,expiration:n.expiration,tracks:l,appMetadata:o}}},{key:"getTracks_",value:function(e){var t=Wi,n=[],i=t.getPlayableVariants(e.variants),r=!0,a=!1,s=void 0;try{for(var o,l=i[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var u=o.value;n.push(t.variantToTrack(u))}}catch(e){a=!0,s=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw s}}var c=e.textStreams,d=!0,h=!1,f=void 0;try{for(var p,m=c[Symbol.iterator]();!(d=(p=m.next()).done);d=!0){var v=p.value;n.push(t.textStreamToTrack(v))}}catch(e){h=!0,f=e}finally{try{d||null==m.return||m.return()}finally{if(h)throw f}}return n}}],(n=null)&&Vr(t.prototype,n),i&&Vr(t,i),e}();function Gr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var jr=window.shaka,zr=(window.goog,function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.estimateByStreamId_={}}var t,n,i;return t=e,(n=[{key:"addVariant",value:function(t){var n=t.audio,i=t.video;if(n&&!i){var r=n.bandwidth||t.bandwidth;this.setBitrate_(n.id,r)}if(!n&&i){var a=i.bandwidth||t.bandwidth;this.setBitrate_(i.id,a)}if(n&&i){var s=n.bandwidth||e.DEFAULT_AUDIO_BITRATE_,o=i.bandwidth||t.bandwidth-s;o<=0&&(jr.log.warning("Audio bit rate consumes variants bandwidth. Setting video bandwidth to match variant's bandwidth."),o=t.bandwidth),this.setBitrate_(n.id,s),this.setBitrate_(i.id,o)}}},{key:"setBitrate_",value:function(e,t){this.estimateByStreamId_[e]=t}},{key:"addText",value:function(t){this.estimateByStreamId_[t.id]=e.DEFAULT_TEXT_BITRATE_}},{key:"getSegmentEstimate",value:function(e,t){var n=t.endTime-t.startTime;return this.getEstimate_(e)*n}},{key:"getInitSegmentEstimate",value:function(e){return.5*this.getEstimate_(e)}},{key:"getEstimate_",value:function(e){var t=this.estimateByStreamId_[e];return null==t&&(t=0,jr.log.error("Asking for bitrate of stream not given to the estimator")),0==t&&jr.log.warning("Using bitrate of 0, this stream won't affect progress"),t}}])&&Gr(t.prototype,n),i&&Gr(t,i),e}());zr.DEFAULT_AUDIO_BITRATE_=393216,zr.DEFAULT_TEXT_BITRATE_=52;var Wr=zr;function qr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Kr(e,t,n){return t&&Yr(e.prototype,t),n&&Yr(e,n),e}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */window.shaka,window.goog;var Xr=function(){function e(){qr(this,e)}return Kr(e,null,[{key:"filterByRestrictions",value:function(e,t,n){var i=!0,r=!1,a=void 0;try{for(var s,o=e.periods[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;l.variants=l.variants.filter(function(e){return Wi.meetsRestrictions(e,t,n)})}}catch(e){r=!0,a=e}finally{try{i||null==o.return||o.return()}finally{if(r)throw a}}}},{key:"filterByMediaSourceSupport",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=e.periods[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var s=r.value;s.variants=s.variants.filter(function(e){var t=!0;return e.audio&&(t=t&&Vi.isStreamSupported(e.audio)),e.video&&(t=t&&Vi.isStreamSupported(e.video)),t})}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}}},{key:"filterByDrmSupport",value:function(e,t){var n=!0,i=!1,r=void 0;try{for(var a,s=e.periods[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;o.variants=o.variants.filter(function(e){return t.supportsVariant(e)})}}catch(e){i=!0,r=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}}},{key:"filterByCommonCodecs",value:function(t){window.asserts.assert(t.periods.length>0,"There should be at least be one period");var n=new e.VariantCodecSummarySet,i=!0,r=!0,a=!1,s=void 0;try{for(var o,l=t.periods[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var u=o.value,c=e.VariantCodecSummarySet.fromVariants(u.variants);i?(n.includeAll(c),i=!1):n.onlyKeep(c)}}catch(e){a=!0,s=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw s}}var d=!0,h=!1,f=void 0;try{for(var p,m=t.periods[Symbol.iterator]();!(d=(p=m.next()).done);d=!0){var v=p.value;v.variants=v.variants.filter(function(t){var i=new e.VariantCodecSummary(t);return n.contains(i)})}}catch(e){h=!0,f=e}finally{try{d||null==m.return||m.return()}finally{if(h)throw f}}}},{key:"rollingFilter",value:function(t,n){var i=null,r=!0,a=!1,s=void 0;try{for(var o,l=t.periods[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var u=o.value;i&&(u.variants=u.variants.filter(function(t){var n=new e.VariantCodecSummary(t);return i.contains(n)})),n(u),i=e.VariantCodecSummarySet.fromVariants(u.variants)}}catch(e){a=!0,s=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw s}}}}]),e}();Xr.VariantCodecSummary=function(){function e(t){qr(this,e);var n=t.audio,i=t.video;this.audioMime_=n?n.mimeType:null,this.audioCodec_=n?n.codecs.split(".")[0]:null,this.videoMime_=i?i.mimeType:null,this.videoCodec_=i?i.codecs.split(".")[0]:null}return Kr(e,[{key:"equals",value:function(e){return this.audioMime_==e.audioMime_&&this.audioCodec_==e.audioCodec_&&this.videoMime_==e.videoMime_&&this.videoCodec_==e.videoCodec_}}]),e}(),Xr.VariantCodecSummarySet=function(){function e(){qr(this,e),this.all_=[]}return Kr(e,[{key:"add",value:function(e){this.contains(e)||this.all_.push(e)}},{key:"includeAll",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=e.all_[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var s=r.value;this.add(s)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}}},{key:"onlyKeep",value:function(e){this.all_=this.all_.filter(function(t){return e.contains(t)})}},{key:"contains",value:function(e){return this.all_.some(function(t){return e.equals(t)})}}],[{key:"fromVariants",value:function(e){var t=new Xr.VariantCodecSummarySet,n=!0,i=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;t.add(new Xr.VariantCodecSummary(o))}}catch(e){i=!0,r=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}return t}}]),e}();var $r=Xr;function Zr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var Qr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"createSegmentRequest",value:function(e,t,n,i){var r=oe.makeRequest(e,i);return 0==t&&null==n||(r.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),r}}],(n=null)&&Zr(t.prototype,n),i&&Zr(t,i),e}();function Jr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var ea=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"getAllVariantsFrom",value:function(e){var t=[],n=!0,i=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value,l=!0,u=!1,c=void 0;try{for(var d,h=o.variants[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var f=d.value;t.push(f)}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}}}catch(e){i=!0,r=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}return t}},{key:"findPeriodForTime",value:function(e,t){var n=null,i=!0,r=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;t>=l.startTime&&(n=l)}}catch(e){r=!0,a=e}finally{try{i||null==o.return||o.return()}finally{if(r)throw a}}return n}}],(n=null)&&Jr(t.prototype,n),i&&Jr(t,i),e}();function ta(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function na(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka;var ia=function(){function e(){ta(this,e),this.history_=new Map}var t,n,i;return t=e,(n=[{key:"clear",value:function(){this.history_.clear()}},{key:"useVariant",value:function(e,t){this.getFrameFor_(e).variant=t}},{key:"useText",value:function(e,t){this.getFrameFor_(e).text=t}},{key:"getVariant",value:function(e){return this.getFrameFor_(e).variant}},{key:"getText",value:function(e){return this.getFrameFor_(e).text}},{key:"getFrameFor_",value:function(t){if(!this.history_.has(t)){var n=new e.Frame;this.history_.set(t,n)}return this.history_.get(t)}}])&&na(t.prototype,n),i&&na(t,i),e}();ia.Frame=function(){return function e(){ta(this,e),this.variant=null,this.text=null}}();var ra=ia;function aa(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var sa=window.shaka,oa=(window.goog,function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.root_=t,this.variants_=new Set([t]),n=n||[];var i=!0,r=!1,a=void 0;try{for(var s,o=n[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;this.add(l)}}catch(e){r=!0,a=e}finally{try{i||null==o.return||o.return()}finally{if(r)throw a}}}var t,n,i;return t=e,i=[{key:"areAdaptable",value:function(t,n){return!!t.audio==!!n.audio&&(!!t.video==!!n.video&&(t.language==n.language&&(window.asserts.assert(!!t.audio==!!n.audio,"Both should either have audio or not have audio."),!(t.audio&&n.audio&&!e.areAudiosCompatible_(t.audio,n.audio))&&(window.asserts.assert(!!t.video==!!n.video,"Both should either have video or not have video."),!(t.video&&n.video&&!e.areVideosCompatible_(t.video,n.video))))))}},{key:"areAudiosCompatible_",value:function(t,n){return t.channelsCount==n.channelsCount&&(!!e.canTransitionBetween_(t,n)&&!!e.areRolesEqual_(t.roles,n.roles))}},{key:"areVideosCompatible_",value:function(t,n){return!!e.canTransitionBetween_(t,n)&&!!e.areRolesEqual_(t.roles,n.roles)}},{key:"canTransitionBetween_",value:function(e,t){if(e.mimeType!=t.mimeType)return!1;var n=Xn.splitCodecs(e.codecs).map(function(e){return Xn.getCodecBase(e)}),i=Xn.splitCodecs(t.codecs).map(function(e){return Xn.getCodecBase(e)});if(n.length!=i.length)return!1;n.sort(),i.sort();for(var r=0;r<n.length;r++)if(n[r]!=i[r])return!1;return!0}},{key:"areRolesEqual_",value:function(e,t){var n=new Set(e),i=new Set(t);if(n.delete("main"),i.delete("main"),n.size!=i.size)return!1;var r=!0,a=!1,s=void 0;try{for(var o,l=n[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var u=o.value;if(!i.has(u))return!1}}catch(e){a=!0,s=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw s}}return!0}}],(n=[{key:"add",value:function(e){return this.canInclude(e)?(this.variants_.add(e),!0):(sa.log.warning("Rejecting variant - not compatible with root."),!1)}},{key:"canInclude",value:function(t){return e.areAdaptable(this.root_,t)}},{key:"values",value:function(){return this.variants_.values()}}])&&aa(t.prototype,n),i&&aa(t,i),e}());function la(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ua(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ca(e,t,n){return t&&ua(e.prototype,t),n&&ua(e,n),e}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var da=window.shaka,ha=function(){function e(t){la(this,e),this.example_=t;var n=t.audio&&t.audio.channelsCount?t.audio.channelsCount:0;this.fallback_=new fa(t.language,"",n)}return ca(e,[{key:"create",value:function(e){var t=this,n=e.filter(function(e){return oa.areAdaptable(t.example_,e)});return n.length?new oa(n[0],n):this.fallback_.create(e)}}]),e}(),fa=function(){function e(t,n,i){la(this,e),this.language_=t,this.role_=n,this.channelCount_=i}return ca(e,[{key:"create",value:function(t){var n=e,i=[],r=n.filterByLanguage_(t,this.language_),a=t.filter(function(e){return e.primary});if(i=r.length?r:a.length?a:t,this.role_){var s=n.filterVariantsByRole_(i,this.role_);s.length?i=s:da.log.warning("No exact match for variant role could be found.")}if(this.channelCount_){var o=Wi.filterVariantsByAudioChannelCount(i,this.channelCount_);o.length?i=o:da.log.warning("No exact match for the channel count could be found.")}var l=new oa(i[0]),u=!0,c=!1,d=void 0;try{for(var h,f=i[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var p=h.value;l.canInclude(p)&&l.add(p)}}catch(e){c=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw d}}return l}}],[{key:"filterByLanguage_",value:function(e,t){var n=Wt.normalize(t),i=Wt.findClosestLocale(n,e.map(function(e){return Wt.getLocaleForVariant(e)}));return i?e.filter(function(e){return i==Wt.getLocaleForVariant(e)}):[]}},{key:"filterVariantsByRole_",value:function(e,t){return e.filter(function(e){var n=e.audio,i=e.video;return n&&n.roles.indexOf(t)>=0||i&&i.roles.indexOf(t)>=0})}}]),e}();function pa(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka;var ma=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=e.State;this.previousState_=i.SATISFIED,this.thresholds_=(new Map).set(i.SATISFIED,n).set(i.STARVING,t)}var t,n,i;return t=e,(n=[{key:"update",value:function(t,n){var i=e.State,r=this.thresholds_.get(this.previousState_),a=this.previousState_,s=n||t>=r?i.SATISFIED:i.STARVING;return this.previousState_=s,a!=s}},{key:"setState",value:function(e){this.previousState_=e}},{key:"getState",value:function(){return this.previousState_}}])&&pa(t.prototype,n),i&&pa(t,i),e}();ma.State={STARVING:0,SATISFIED:1};var va=ma;function ga(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var ya=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.manifest_=t,this.currentPeriod_=null,this.onChangedPeriods_=function(e){}}var t,n,i;return t=e,(n=[{key:"release",value:function(){this.manifest_=null,this.currentPeriod_=null,this.onChangedPeriods_=function(e){}}},{key:"poll",value:function(e,t){var n=this.currentPeriod_,i=this.findCurrentPeriod_(e);n!=i&&this.onChangedPeriods_(i),this.currentPeriod_=i}},{key:"setListeners",value:function(e){this.onChangedPeriods_=e}},{key:"findCurrentPeriod_",value:function(e){var t=this.manifest_.periods;return ea.findPeriodForTime(t,e)||t[0]}}])&&ga(t.prototype,n),i&&ga(t,i),e}();function _a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var ba=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.harness_=t,this.isBuffering_=!1,this.rate_=this.harness_.getRate(),this.pollRate_=.25,this.timer_=new j(function(){n.harness_.movePlayhead(n.rate_*n.pollRate_)})}var t,n,i;return t=e,(n=[{key:"release",value:function(){this.timer_&&(this.timer_.stop(),this.timer_=null),this.harness_=null}},{key:"setBuffering",value:function(e){this.isBuffering_=e,this.apply_()}},{key:"set",value:function(e){window.asserts.assert(0!=e,"Should never set rate of 0 explicitly!"),this.rate_=e,this.apply_()}},{key:"getActiveRate",value:function(){return this.calculateCurrentRate_()}},{key:"apply_",value:function(){this.timer_.stop();var e=this.calculateCurrentRate_();if(e>=0)try{return void this.applyRate_(e)}catch(e){}this.timer_.tickEvery(this.pollRate_),this.applyRate_(0)}},{key:"calculateCurrentRate_",value:function(){return this.isBuffering_?0:this.rate_}},{key:"applyRate_",value:function(e){var t=this.harness_.getRate();return t!=e&&this.harness_.setRate(e),t!=e}}])&&_a(t.prototype,n),i&&_a(t,i),e}();ba.Harness;var wa=ba;function Ea(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sa(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ta(e,t,n){return t&&Sa(e.prototype,t),n&&Sa(e,n),e}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ka=window.shaka,Ca=(window.goog,function(){function e(t,n,i){Ea(this,e),this.video_=t,this.onSeek_=n,this.startTime_=i,this.eventManager_=new rn,this.mover_=new Ia(t,10),t.readyState>0?this.setStartTime_(i):this.delaySetStartTime_(i)}return Ta(e,[{key:"release",value:function(){this.eventManager_&&(this.eventManager_.release(),this.eventManager_=null),null!=this.mover_&&(this.mover_.release(),this.mover_=null),this.onSeek_=function(){},this.video_=null}},{key:"getTime",value:function(){return this.video_.readyState>0?this.video_.currentTime:this.startTime_}},{key:"setTime",value:function(e){this.video_.readyState>0?this.mover_.moveTo(e):this.delaySetStartTime_(e)}},{key:"delaySetStartTime_",value:function(e){var t=this;this.startTime_=e,this.eventManager_.unlisten(this.video_,"loadedmetadata"),this.eventManager_.listenOnce(this.video_,"loadedmetadata",function(){t.setStartTime_(e)})}},{key:"setStartTime_",value:function(e){var t=this;Math.abs(this.video_.currentTime-e)<.001?this.startListeningToSeeks_():(this.eventManager_.listenOnce(this.video_,"seeking",function(){t.startListeningToSeeks_()}),this.mover_.moveTo(0==this.video_.currentTime?e:this.video_.currentTime))}},{key:"startListeningToSeeks_",value:function(){var e=this;window.asserts.assert(this.video_.readyState>0,"The media element should be ready before we listen for seeking."),this.eventManager_.listen(this.video_,"seeking",function(){return e.onSeek_()})}}]),e}()),Ia=function(){function e(t,n){var i=this;Ea(this,e),this.mediaElement_=t,this.maxAttempts_=n,this.remainingAttempts_=0,this.originTime_=0,this.targetTime_=0,this.timer_=new j(function(){return i.onTick_()})}return Ta(e,[{key:"release",value:function(){this.timer_&&(this.timer_.stop(),this.timer_=null),this.mediaElement_=null}},{key:"moveTo",value:function(e){this.originTime_=this.mediaElement_.currentTime,this.targetTime_=e,this.remainingAttempts_=this.maxAttempts_,this.mediaElement_.currentTime=e,this.timer_.tickEvery(.1)}},{key:"onTick_",value:function(){if(this.remainingAttempts_<=0)return ka.log.warning(["Failed to move playhead from",this.originTime_,"to",this.targetTime_].join(" ")),void this.timer_.stop();this.mediaElement_.currentTime==this.originTime_?(this.mediaElement_.currentTime=this.targetTime_,this.remainingAttempts_--):this.timer_.stop()}}]),e}();function Aa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xa(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function La(e,t,n){return t&&xa(e.prototype,t),n&&xa(e,n),e}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ra=window.shaka,Pa=(window.goog,function(){function e(t,n){Aa(this,e),this.implementation_=t,this.wasMakingProgress_=t.shouldBeMakingProgress(),this.value_=t.getPresentationSeconds(),this.lastUpdateSeconds_=t.getWallSeconds(),this.stallThresholdSeconds_=n,this.onStall_=function(){}}return La(e,[{key:"release",value:function(){this.implementation_=null,this.onStall_=function(){}}},{key:"onStall",value:function(e){this.onStall_=e}},{key:"poll",value:function(){var e=this.implementation_,t=e.shouldBeMakingProgress(),n=e.getPresentationSeconds(),i=e.getWallSeconds();(this.value_!=n||this.wasMakingProgress_!=t)&&(this.lastUpdateSeconds_=i,this.value_=n,this.wasMakingProgress_=t);var r=i-this.lastUpdateSeconds_;r>=this.stallThresholdSeconds_&&t&&this.onStall_(this.value_,r)}}]),e}()),Da=function(){function e(t){Aa(this,e),this.mediaElement_=t}return La(e,[{key:"shouldBeMakingProgress",value:function(){return!this.mediaElement_.paused&&(0!=this.mediaElement_.playbackRate&&(null!=this.mediaElement_.buffered&&Ra.media.StallDetector.MediaElementImplementation.hasContentFor_(this.mediaElement_.buffered,this.mediaElement_.currentTime)))}},{key:"getPresentationSeconds",value:function(){return this.mediaElement_.currentTime}},{key:"getWallSeconds",value:function(){return Date.now()/1e3}}],[{key:"hasContentFor_",value:function(e,t){for(var n=0;n<e.length;n++){var i=e.start(n),r=e.end(n);if(!(t<i)&&!(t>r-.5))return!0}return!1}}]),e}();function Oa(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ma=window.shaka,Na=function(){function e(t,n,i,r,a){var s=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.video_=t,this.timeline_=n,this.config_=i,this.onEvent_=a,this.eventManager_=new rn,this.seekingEventReceived_=!1,this.prevReadyState_=t.readyState,this.didFireLargeGap_=!1,this.stallDetector_=r,this.hadSegmentAppended_=!1,this.eventManager_.listen(t,"waiting",function(){return s.onPollGapJump_()}),this.gapJumpTimer_=new j(function(){s.onPollGapJump_()}).tickEvery(.25)}var t,n,i;return t=e,(n=[{key:"release",value:function(){this.eventManager_&&(this.eventManager_.release(),this.eventManager_=null),null!=this.gapJumpTimer_&&(this.gapJumpTimer_.stop(),this.gapJumpTimer_=null),this.stallDetector_&&(this.stallDetector_.release(),this.stallDetector_=null),this.onEvent_=null,this.timeline_=null,this.video_=null}},{key:"onSegmentAppended",value:function(){this.hadSegmentAppended_=!0,this.onPollGapJump_()}},{key:"onSeeking",value:function(){this.seekingEventReceived_=!0,this.hadSegmentAppended_=!1,this.didFireLargeGap_=!1}},{key:"onPollGapJump_",value:function(){if(0!=this.video_.readyState){if(this.video_.seeking){if(!this.seekingEventReceived_)return}else this.seekingEventReceived_=!1;if(!this.video_.paused){this.video_.readyState!=this.prevReadyState_&&(this.didFireLargeGap_=!1,this.prevReadyState_=this.video_.readyState);var t=this.config_.smallGapLimit,n=this.video_.currentTime,i=this.video_.buffered,r=bi.getGapIndex(i,n);if(null!=r){if(0!=r||this.hadSegmentAppended_){var a=i.start(r);if(!(a>=this.timeline_.getSeekRangeEnd())){var s=a-n,o=s<=t,l=!1;if(!(s<e.BROWSER_GAP_TOLERANCE)){if(!o&&!this.didFireLargeGap_){this.didFireLargeGap_=!0;var u=new E("largegap",{currentTime:n,gapSize:s});u.cancelable=!0,this.onEvent_(u),this.config_.jumpLargeGaps&&!u.defaultPrevented?l=!0:Ma.log.info("Ignoring large gap at",n,"size",s)}(o||l)&&(0==r?Ma.log.info("Jumping forward",s,"seconds because of gap before start time of",a):Ma.log.info("Jumping forward",s,"seconds because of gap starting at",i.end(r-1),"and ending at",a),this.video_.currentTime=a)}}}}else this.stallDetector_&&this.stallDetector_.poll()}}}}])&&Oa(t.prototype,n),i&&Oa(t,i),e}();Na.BROWSER_GAP_TOLERANCE=.001;var Ua=Na;function Fa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ba(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Va(e,t,n){return t&&Ba(e.prototype,t),n&&Ba(e,n),e}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ha=window.shaka,Ga=(window.goog,function(){function e(t,n,i,r,a,s){var o=this;Fa(this,e),this.minSeekRange_=3,this.mediaElement_=t,this.timeline_=n.presentationTimeline,this.minBufferTime_=n.minBufferTime||0,this.config_=i,this.onSeek_=a,this.lastCorrectiveSeek_=null,this.gapController_=new Ua(t,n.presentationTimeline,i,this.createStallDetector_(t,i),s),this.videoWrapper_=new Ca(t,function(){return o.onSeeking_()},this.getStartTime_(r)),this.checkWindowTimer_=new j(function(){o.onPollWindow_()}).tickEvery(.25)}return Va(e,[{key:"release",value:function(){this.videoWrapper_&&(this.videoWrapper_.release(),this.videoWrapper_=null),this.gapController_&&(this.gapController_.release(),this.gapController_=null),this.checkWindowTimer_&&(this.checkWindowTimer_.stop(),this.checkWindowTimer_=null),this.config_=null,this.timeline_=null,this.videoWrapper_=null,this.mediaElement_=null,this.onSeek_=function(){}}},{key:"setStartTime",value:function(e){this.videoWrapper_.setTime(e)}},{key:"getTime",value:function(){var e=this.videoWrapper_.getTime();return this.mediaElement_.readyState>0&&!this.mediaElement_.paused?this.clampTime_(e):e}},{key:"getStartTime_",value:function(e){return null==e?e=this.timeline_.getDuration()<1/0?this.timeline_.getSeekRangeStart():this.timeline_.getSeekRangeEnd():e<0&&(e=this.timeline_.getSeekRangeEnd()+e),this.clampSeekToDuration_(this.clampTime_(e))}},{key:"notifyOfBufferingChange",value:function(){this.gapController_.onSegmentAppended()}},{key:"onPollWindow_",value:function(){if(0!=this.mediaElement_.readyState&&!this.mediaElement_.paused){var e=this.mediaElement_.currentTime,t=this.timeline_.getSeekRangeStart(),n=this.timeline_.getSeekRangeEnd();if(n-t<this.minSeekRange_&&(t=n-this.minSeekRange_),e<t){var i=this.reposition_(e);Ha.log.info("Jumping forward "+(i-e)+" seconds to catch up with the seek range."),this.mediaElement_.currentTime=i}}}},{key:"onSeeking_",value:function(){this.gapController_.onSeeking();var e=this.videoWrapper_.getTime(),t=this.reposition_(e),n=Ua.BROWSER_GAP_TOLERANCE;if(Math.abs(t-e)>n){var i=(new Date).getTime()/1e3;if(!this.lastCorrectiveSeek_||this.lastCorrectiveSeek_<i-1)return this.lastCorrectiveSeek_=i,void this.videoWrapper_.setTime(t)}Ha.log.v1("Seek to "+e),this.onSeek_()}},{key:"clampSeekToDuration_",value:function(e){var t=this.timeline_.getDuration();return e>=t?(window.asserts.assert(this.config_.durationBackoff>=0,"Duration backoff must be non-negative!"),t-this.config_.durationBackoff):e}},{key:"reposition_",value:function(e){var t=this;window.asserts.assert(this.config_,"Cannot reposition playhead when it has beeen destroyed");var n=function(e){return bi.isBuffered(t.mediaElement_.buffered,e)},i=Math.max(this.minBufferTime_,this.config_.rebufferingGoal),r=this.config_.safeSeekOffset,a=this.timeline_.getSeekRangeStart(),s=this.timeline_.getSeekRangeEnd(),o=this.timeline_.getDuration();s-a<this.minSeekRange_&&(a=s-this.minSeekRange_);var l=this.timeline_.getSafeSeekRangeStart(i),u=this.timeline_.getSafeSeekRangeStart(r),c=this.timeline_.getSafeSeekRangeStart(i+r);return e>=o?(Ha.log.v1("Playhead past duration."),this.clampSeekToDuration_(e)):e>s?(Ha.log.v1("Playhead past end."),s):e<a?n(u)?(Ha.log.v1("Playhead before start & start is buffered"),u):(Ha.log.v1("Playhead before start & start is unbuffered"),c):e>=l||n(e)?(Ha.log.v1("Playhead in safe region or in buffered region."),e):(Ha.log.v1("Playhead outside safe region & in unbuffered region."),c)}},{key:"clampTime_",value:function(e){var t=this.timeline_.getSeekRangeStart();if(e<t)return t;var n=this.timeline_.getSeekRangeEnd();return e>n?n:e}},{key:"createStallDetector_",value:function(e,t){if(!t.stallEnabled)return null;var n=t.stallThreshold,i=t.stallSkip,r=new Pa(new Da(e),n);return r.onStall(function(t,n){Ha.log.debug(["Stall detected at",t,"for",n,"seconds. Seeking forward",i,"seconds."].join(" ")),e.currentTime+=i}),r}}]),e}());function ja(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function za(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Wa(e,t,n){return t&&za(e.prototype,t),n&&za(e,n),e}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */window.shaka,window.goog;var qa=function(){function e(t){var n=this;ja(this,e),this.mediaElement_=t,this.observers_=new Set,this.pollingLoop_=new j(function(){n.pollAllObservers_(!1)}).tickEvery(.25)}return Wa(e,[{key:"release",value:function(){this.pollingLoop_.stop();var e=!0,t=!1,n=void 0;try{for(var i,r=this.observers_[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){i.value.release()}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}this.observers_.clear()}},{key:"manage",value:function(e){this.observers_.add(e)}},{key:"notifyOfSeek",value:function(){this.pollAllObservers_(!0)}},{key:"pollAllObservers_",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=this.observers_[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){r.value.poll(this.mediaElement_.currentTime,e)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}}}]),e}();function Ya(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka;var Ka=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.timeline_=t,this.oldPosition_=new Map,this.onEnter_=function(e,t){},this.onExit_=function(e,t){},this.onSkip_=function(e,t){};var i=e.RelativePosition_,r=i.BEFORE_THE_REGION,a=i.IN_THE_REGION,s=i.AFTER_THE_REGION;this.rules_=[{weWere:null,weAre:a,invoke:function(e,t){return n.onEnter_(e,t)}},{weWere:r,weAre:a,invoke:function(e,t){return n.onEnter_(e,t)}},{weWere:s,weAre:a,invoke:function(e,t){return n.onEnter_(e,t)}},{weWere:a,weAre:r,invoke:function(e,t){return n.onExit_(e,t)}},{weWere:a,weAre:s,invoke:function(e,t){return n.onExit_(e,t)}},{weWere:r,weAre:s,invoke:function(e,t){return n.onSkip_(e,t)}},{weWere:s,weAre:r,invoke:function(e,t){return n.onSkip_(e,t)}}]}var t,n,i;return t=e,i=[{key:"determinePositionRelativeTo_",value:function(t,n){var i=e.RelativePosition_;return n<t.startTime?i.BEFORE_THE_REGION:n>t.endTime?i.AFTER_THE_REGION:i.IN_THE_REGION}}],(n=[{key:"release",value:function(){this.timeline_=null,this.oldPosition_.clear(),this.onEnter_=function(e,t){},this.onExit_=function(e,t){},this.onSkip_=function(e,t){}}},{key:"poll",value:function(t,n){var i=!0,r=!1,a=void 0;try{for(var s,o=this.timeline_.regions()[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value,u=this.oldPosition_.get(l),c=e.determinePositionRelativeTo_(l,t);this.oldPosition_.set(l,c);var d=!0,h=!1,f=void 0;try{for(var p,m=this.rules_[Symbol.iterator]();!(d=(p=m.next()).done);d=!0){var v=p.value;v.weWere==u&&v.weAre==c&&v.invoke(l,n)}}catch(e){h=!0,f=e}finally{try{d||null==m.return||m.return()}finally{if(h)throw f}}}}catch(e){r=!0,a=e}finally{try{i||null==o.return||o.return()}finally{if(r)throw a}}}},{key:"setListeners",value:function(e,t,n){this.onEnter_=e,this.onExit_=t,this.onSkip_=n}}])&&Ya(t.prototype,n),i&&Ya(t,i),e}();function Xa(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Ka.RelativePosition_={BEFORE_THE_REGION:1,IN_THE_REGION:2,AFTER_THE_REGION:3},Ka.EventListener={},Ka.Rule_={};
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka;var $a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.onAddRegion_=function(e){},this.regions_=new Set}var t,n,i;return t=e,(n=[{key:"release",value:function(){this.onAddRegion_=function(e){},this.regions_.clear()}},{key:"setListeners",value:function(e){this.onAddRegion_=e}},{key:"addRegion",value:function(e){null==this.findSimilarRegion_(e)&&(this.regions_.add(e),this.onAddRegion_(e))}},{key:"findSimilarRegion_",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=this.regions_[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var s=r.value;if(s.schemeIdUri==e.schemeIdUri&&s.startTime==e.startTime&&s.endTime==e.endTime)return s}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return null}},{key:"regions",value:function(){return this.regions_}}])&&Xa(t.prototype,n),i&&Xa(t,i),e}();function Za(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Qa=window.shaka,Ja=(window.goog,function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataView_=t,this.littleEndian_=n===e.Endianness.LITTLE_ENDIAN,this.position_=0}var t,n,i;return t=e,(n=[{key:"hasMoreData",value:function(){return this.position_<this.dataView_.byteLength}},{key:"getPosition",value:function(){return this.position_}},{key:"getLength",value:function(){return this.dataView_.byteLength}},{key:"readUint8",value:function(){try{var e=this.dataView_.getUint8(this.position_);return this.position_+=1,e}catch(e){throw this.outOfBounds_()}}},{key:"readUint16",value:function(){try{var e=this.dataView_.getUint16(this.position_,this.littleEndian_);return this.position_+=2,e}catch(e){throw this.outOfBounds_()}}},{key:"readUint32",value:function(){try{var e=this.dataView_.getUint32(this.position_,this.littleEndian_);return this.position_+=4,e}catch(e){throw this.outOfBounds_()}}},{key:"readInt32",value:function(){try{var e=this.dataView_.getInt32(this.position_,this.littleEndian_);return this.position_+=4,e}catch(e){throw this.outOfBounds_()}}},{key:"readUint64",value:function(){var e,t;try{this.littleEndian_?(e=this.dataView_.getUint32(this.position_,!0),t=this.dataView_.getUint32(this.position_+4,!0)):(t=this.dataView_.getUint32(this.position_,!1),e=this.dataView_.getUint32(this.position_+4,!1))}catch(e){throw this.outOfBounds_()}if(t>2097151)throw new Qa.util.Error(Qa.util.Error.Severity.CRITICAL,Qa.util.Error.Category.MEDIA,Qa.util.Error.Code.JS_INTEGER_OVERFLOW);return this.position_+=8,t*Math.pow(2,32)+e}},{key:"readBytes",value:function(e){if(window.asserts.assert(e>=0,"Bad call to DataViewReader.readBytes"),this.position_+e>this.dataView_.byteLength)throw this.outOfBounds_();var t=new Uint8Array(this.dataView_.buffer,this.dataView_.byteOffset+this.position_,e);return this.position_+=e,new Uint8Array(t)}},{key:"skip",value:function(e){if(window.asserts.assert(e>=0,"Bad call to DataViewReader.skip"),this.position_+e>this.dataView_.byteLength)throw this.outOfBounds_();this.position_+=e}},{key:"rewind",value:function(e){if(window.asserts.assert(e>=0,"Bad call to DataViewReader.rewind"),this.position_<e)throw this.outOfBounds_();this.position_-=e}},{key:"seek",value:function(e){if(window.asserts.assert(e>=0,"Bad call to DataViewReader.seek"),e<0||e>this.dataView_.byteLength)throw this.outOfBounds_();this.position_=e}},{key:"readTerminatedString",value:function(){for(var e=this.position_;this.hasMoreData();){if(0==this.dataView_.getUint8(this.position_))break;this.position_+=1}var t=new Uint8Array(this.dataView_.buffer,this.dataView_.byteOffset+e,this.position_-e);return this.position_+=1,ni.fromUTF8(t)}},{key:"outOfBounds_",value:function(){return new M(M.Severity.CRITICAL,M.Category.MEDIA,M.Code.BUFFER_READ_OUT_OF_BOUNDS)}}])&&Za(t.prototype,n),i&&Za(t,i),e}());Ja.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:1};var es=Ja;function ts(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ns=window.shaka,is=(window.goog,function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.headers_=[],this.boxDefinitions_=[],this.done_=!1}var t,n,i;return t=e,i=[{key:"children",value:function(e){for(;e.reader.hasMoreData()&&!e.parser.done_;)e.parser.parseNext(e.start,e.reader,e.partialOkay)}},{key:"sampleDescription",value:function(e){for(var t=e.reader.readUint32();t>0&&!e.parser.done_;t-=1)e.parser.parseNext(e.start,e.reader,e.partialOkay)}},{key:"allData",value:function(e){return function(t){var n=t.reader.getLength()-t.reader.getPosition();e(t.reader.readBytes(n))}}},{key:"typeFromString_",value:function(e){window.asserts.assert(4==e.length,"Mp4 box names must be 4 characters long");for(var t=0,n=0;n<e.length;n++)t=t<<8|e.charCodeAt(n);return t}},{key:"typeToString",value:function(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}}],(n=[{key:"box",value:function(t,n){var i=e.typeFromString_(t);return this.headers_[i]=e.BoxType_.BASIC_BOX,this.boxDefinitions_[i]=n,this}},{key:"fullBox",value:function(t,n){var i=e.typeFromString_(t);return this.headers_[i]=e.BoxType_.FULL_BOX,this.boxDefinitions_[i]=n,this}},{key:"stop",value:function(){this.done_=!0}},{key:"parse",value:function(e,t){var n=new Uint8Array(e),i=new es(new DataView(n.buffer,n.byteOffset,n.byteLength),es.Endianness.BIG_ENDIAN);for(this.done_=!1;i.hasMoreData()&&!this.done_;)this.parseNext(0,i,t)}},{key:"parseNext",value:function(t,n,i){var r=n.getPosition(),a=n.readUint32(),s=n.readUint32(),o=e.typeToString(s);switch(ns.log.v2("Parsing MP4 box",o),a){case 0:a=n.getLength()-r;break;case 1:a=n.readUint64()}var l=this.boxDefinitions_[s];if(l){var u=null,c=null;if(this.headers_[s]===e.BoxType_.FULL_BOX){var d=n.readUint32();u=d>>>24,c=16777215&d}var h=r+a;i&&h>n.getLength()&&(h=n.getLength());var f=h-n.getPosition(),p=f>0?n.readBytes(f):new Uint8Array(0);l({parser:this,partialOkay:i||!1,version:u,flags:c,reader:new es(new DataView(p.buffer,p.byteOffset,p.byteLength),es.Endianness.BIG_ENDIAN),size:a,start:r+t})}else{var m=Math.min(r+a-n.getPosition(),n.getLength()-n.getPosition());n.skip(m)}}}])&&ts(t.prototype,n),i&&ts(t,i),e}());is.CallbackType={},is.BoxType_={BASIC_BOX:0,FULL_BOX:1};var rs=is;function as(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(i,r)}function ss(e){return function(){var t=this,n=arguments;return new Promise(function(i,r){var a=e.apply(t,n);function s(e){as(a,i,r,s,o,"next",e)}function o(e){as(a,i,r,s,o,"throw",e)}s(void 0)})}}function os(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ls=new M,us=window.shaka,cs=(window.goog,function(){function e(t,n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.playerInterface_=n,this.manifest_=t,this.config_=null,this.bufferingGoalScale_=1,this.setupPeriodPromise_=Promise.resolve(),this.canSwitchPeriod_=[],this.canSwitchStream_=new Map,this.mediaStates_=new Map,this.startupComplete_=!1,this.failureCallbackBackoff_=null,this.fatalError_=!1,this.unloadingTextStream_=!1,this.textStreamSequenceId_=0,this.destroyer_=new zn(function(){return i.doDestroy_()})}var t,n,i;return t=e,n=[{key:"destroy",value:function(){return this.destroyer_.destroy()}},{key:"doDestroy_",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.mediaStates_.values()[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var a=i.value;this.cancelUpdate_(a)}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}return this.mediaStates_.clear(),this.canSwitchStream_.clear(),this.playerInterface_=null,this.manifest_=null,this.setupPeriodPromise_=null,this.canSwitchPeriod_=null,this.config_=null,Promise.resolve()}},{key:"configure",value:function(e){this.config_=e;var t={maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0};this.failureCallbackBackoff_=new q(t,!0)}},{key:"start",value:function(){var e=ss(regeneratorRuntime.mark(function e(){var t,n,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.asserts.assert(this.config_,"StreamingEngine configure() must be called before init()!"),t=this.playerInterface_.getPresentationTime(),n=this.findPeriodForTime_(t),(i=this.playerInterface_.onChooseStreams(this.manifest_.periods[n])).variant||i.text){e.next=7;break}throw us.log.error("init: no Streams chosen"),new M(ls.severity.CRITICAL,ls.category.STREAMING,ls.code.INVALID_STREAMS_CHOSEN);case 7:return e.next=9,this.initStreams_(i.variant?i.variant.audio:null,i.variant?i.variant.video:null,i.text,t);case 9:this.destroyer_.ensureNotDestroyed(),us.log.debug("init: completed initial Stream setup"),this.playerInterface_&&this.playerInterface_.onInitialStreamsSetup&&(us.log.v1("init: calling onInitialStreamsSetup()..."),this.playerInterface_.onInitialStreamsSetup());case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getBufferingPeriod",value:function(){var e=jt.ContentType,t=this.mediaStates_.get(e.VIDEO);if(t)return this.manifest_.periods[t.needPeriodIndex];var n=this.mediaStates_.get(e.AUDIO);return n?this.manifest_.periods[n.needPeriodIndex]:null}},{key:"getBufferingAudio",value:function(){var e=jt.ContentType;return this.getStream_(e.AUDIO)}},{key:"getBufferingVideo",value:function(){var e=jt.ContentType;return this.getStream_(e.VIDEO)}},{key:"getBufferingText",value:function(){var e=jt.ContentType;return this.getStream_(e.TEXT)}},{key:"getStream_",value:function(e){var t=this.mediaStates_.get(e);return t?t.restoreStreamAfterTrickPlay||t.stream:null}},{key:"loadNewTextStream",value:function(){var e=ss(regeneratorRuntime.mark(function e(t){var n,i,r,a,s,o,l,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=jt.ContentType,e.next=3,this.playerInterface_.mediaSourceEngine.clear(n.TEXT);case 3:return this.textStreamSequenceId_++,this.unloadingTextStream_=!1,i=this.textStreamSequenceId_,r=this.playerInterface_.mediaSourceEngine,a=new Map,s=new Set,a.set(n.TEXT,t),s.add(t),e.next=13,r.init(a,!1);case 13:return this.destroyer_.ensureNotDestroyed(),e.next=16,this.setupStreams_(s);case 16:this.destroyer_.ensureNotDestroyed(),this.textStreamSequenceId_!=i||this.mediaStates_.has(n.TEXT)||this.unloadingTextStream_||(o=this.playerInterface_.getPresentationTime(),l=this.findPeriodForTime_(o),u=this.createMediaState_(t,l,0),this.mediaStates_.set(n.TEXT,u),this.scheduleUpdate_(u,0));case 18:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"unloadTextStream",value:function(){var e=jt.ContentType;this.unloadingTextStream_=!0;var t=this.mediaStates_.get(e.TEXT);t&&(this.cancelUpdate_(t),this.mediaStates_.delete(e.TEXT))}},{key:"setTrickPlay",value:function(e){var t=jt.ContentType,n=this.mediaStates_.get(t.VIDEO);if(n){var i=n.stream;if(i)if(us.log.debug("setTrickPlay",e),e){var r=i.trickModeVideo;if(!r)return;if(n.restoreStreamAfterTrickPlay)return;us.log.debug("Engaging trick mode stream",r),this.switchInternal_(r,!1,0,!1),n.restoreStreamAfterTrickPlay=i}else{var a=n.restoreStreamAfterTrickPlay;if(!a)return;us.log.debug("Restoring non-trick-mode stream",a),n.restoreStreamAfterTrickPlay=null,this.switchInternal_(a,!0,0,!1)}}}},{key:"switchVariant",value:function(e,t,n){e.video&&this.switchInternal_(e.video,t,n,!1),e.audio&&this.switchInternal_(e.audio,t,n,!1)}},{key:"switchTextStream",value:function(e){var t=jt.ContentType;window.asserts.assert(e&&e.type==t.TEXT,"Wrong stream type passed to switchTextStream!"),this.switchInternal_(e,!0,0,!1)}},{key:"reloadTextStream",value:function(){var e=jt.ContentType,t=this.mediaStates_.get(e.TEXT);t&&this.switchInternal_(t.stream,!0,0,!0)}},{key:"switchInternal_",value:function(t,n,i,r){var a=this,s=jt.ContentType,o=t.type,l=this.mediaStates_.get(o);if(l||t.type!=s.TEXT||!this.config_.ignoreTextStreamFailures){if(window.asserts.assert(l,"switch: expected mediaState to exist"),l){var u=this.findPeriodContainingStream_(t),c=Array.from(this.mediaStates_.values()).every(function(e){return e.needPeriodIndex==l.needPeriodIndex});if(n&&u!=l.needPeriodIndex&&c){us.log.debug("switch: switching to stream in another Period; clearing buffer and changing Periods");var d=!0,h=!1,f=void 0;try{for(var p,m=this.mediaStates_.values()[Symbol.iterator]();!(d=(p=m.next()).done);d=!0){var v=p.value;this.forceClearBuffer_(v)}}catch(e){h=!0,f=e}finally{try{d||null==m.return||m.return()}finally{if(h)throw f}}}else{l.restoreStreamAfterTrickPlay&&(us.log.debug("switch during trick play mode",t),t.trickModeVideo?(l.restoreStreamAfterTrickPlay=t,t=t.trickModeVideo,us.log.debug("switch found trick play stream",t)):(l.restoreStreamAfterTrickPlay=null,us.log.debug("switch found no special trick play stream")));var g=this.canSwitchPeriod_[u];if(window.asserts.assert(g&&g.resolved,"switch: expected Period "+u+" to be ready"),g&&g.resolved&&(g=this.canSwitchStream_.get(t.id),window.asserts.assert(g&&g.resolved,"switch: expected Stream "+t.id+" to be ready"),g&&g.resolved))if(l.stream!=t||r){if(t.type==s.TEXT){var y=Xn.getFullType(t.mimeType,t.codecs);this.playerInterface_.mediaSourceEngine.reinitText(y)}l.stream=t,l.needInitSegment=!0;var _=e.logPrefix_(l);us.log.debug("switch: switching to Stream "+_),this.shouldAbortCurrentRequest_(l,u)&&(us.log.info("Aborting current segment request to switch."),l.operation.abort()),n&&(l.clearingBuffer?l.waitingToFlushBuffer=!0:l.performingUpdate?(l.waitingToClearBuffer=!0,l.clearBufferSafeMargin=i,l.waitingToFlushBuffer=!0):(this.cancelUpdate_(l),this.clearBuffer_(l,!0,i).catch(function(e){a.playerInterface_&&a.playerInterface_.onError(e)})))}else{var b=e.logPrefix_(l);us.log.debug("switch: Stream "+b+" already active")}}}}else this.loadNewTextStream(t)}},{key:"shouldAbortCurrentRequest_",value:function(e,t){if(!e.operation)return!1;var n=this.playerInterface_.getPresentationTime(),i=this.playerInterface_.mediaSourceEngine.bufferEnd(e.type),r=this.getSegmentReferenceNeeded_(e,n,i,t),a=r?r.getSize():null;if(null==a)return!1;var s=e.stream.initSegmentReference;return s&&(a+=s.getSize()||0),8*a/this.playerInterface_.getBandwidthEstimate()<i-n-Math.max(this.manifest_.minBufferTime||0,this.config_.rebufferingGoal)||e.operation.getBytesRemaining()>a}},{key:"seeked",value:function(){var e=this,t=this.playerInterface_.getPresentationTime(),n=this.config_.smallGapLimit,i=function(i){return e.playerInterface_.mediaSourceEngine.isBuffered(i,t,n)},r=!1,a=this.findPeriodForTime_(t);if(Bt.every(this.mediaStates_.values(),function(e){return e.needPeriodIndex==a})){var s=!0,o=!1,l=void 0;try{for(var u,c=this.mediaStates_.keys()[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){var d=u.value;i(d)||(this.forceClearBuffer_(this.mediaStates_.get(d)),r=!0)}}catch(e){o=!0,l=e}finally{try{s||null==c.return||c.return()}finally{if(o)throw l}}}else{if(!Bt.every(this.mediaStates_.keys(),i)){us.log.debug("(all): seeked: unbuffered seek: clearing all buffers");var h=!0,f=!1,p=void 0;try{for(var m,v=this.mediaStates_.values()[Symbol.iterator]();!(h=(m=v.next()).done);h=!0){var g=m.value;this.forceClearBuffer_(g)}}catch(e){f=!0,p=e}finally{try{h||null==v.return||v.return()}finally{if(f)throw p}}r=!0}}r||us.log.debug("(all): seeked: buffered seek: presentationTime="+t)}},{key:"forceClearBuffer_",value:function(t){var n=this,i=e.logPrefix_(t);if(t.clearingBuffer)us.log.debug(i,"clear: already clearing the buffer");else if(t.waitingToClearBuffer)us.log.debug(i,"clear: already waiting");else{if(t.performingUpdate)return us.log.debug(i,"clear: currently updating"),t.waitingToClearBuffer=!0,void(t.clearBufferSafeMargin=0);var r=t.type;if(null==this.playerInterface_.mediaSourceEngine.bufferStart(r))return us.log.debug(i,"clear: nothing buffered"),void(null==t.updateTimer&&this.scheduleUpdate_(t,0));us.log.debug(i,"clear: handling right now"),this.cancelUpdate_(t),this.clearBuffer_(t,!1,0).catch(function(e){n.playerInterface_&&n.playerInterface_.onError(e)})}}},{key:"initStreams_",value:function(){var e=ss(regeneratorRuntime.mark(function e(t,n,i,r){var a,s,o,l,u,c,d,h,f,p,m,v,g,y,_;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.asserts.assert(this.config_,"StreamingEngine configure() must be called before init()!"),a=this.playerInterface_.getPresentationTime(),s=this.findPeriodForTime_(a),o=jt.ContentType,l=new Map,u=new Set,t&&(l.set(o.AUDIO,t),u.add(t)),n&&(l.set(o.VIDEO,n),u.add(n)),i&&(l.set(o.TEXT,i),u.add(i)),c=this.playerInterface_.mediaSourceEngine,d=this.config_.forceTransmuxTS,e.next=13,c.init(l,d);case 13:return this.destroyer_.ensureNotDestroyed(),this.setDuration_(),e.next=17,this.setupStreams_(u);case 17:for(this.destroyer_.ensureNotDestroyed(),h=!0,f=!1,p=void 0,e.prev=21,m=l.keys()[Symbol.iterator]();!(h=(v=m.next()).done);h=!0)g=v.value,y=l.get(g),this.mediaStates_.has(g)||(_=this.createMediaState_(y,s,r),this.mediaStates_.set(g,_),this.scheduleUpdate_(_,0));e.next=29;break;case 25:e.prev=25,e.t0=e.catch(21),f=!0,p=e.t0;case 29:e.prev=29,e.prev=30,h||null==m.return||m.return();case 32:if(e.prev=32,!f){e.next=35;break}throw p;case 35:return e.finish(32);case 36:return e.finish(29);case 37:case"end":return e.stop()}},e,this,[[21,25,29,37],[30,,32,36]])}));return function(t,n,i,r){return e.apply(this,arguments)}}()},{key:"createMediaState_",value:function(e,t,n){return{stream:e,type:e.type,lastStream:null,lastSegmentReference:null,restoreStreamAfterTrickPlay:null,needInitSegment:!0,needPeriodIndex:t,endOfStream:!1,performingUpdate:!1,updateTimer:null,waitingToClearBuffer:!1,clearBufferSafeMargin:0,waitingToFlushBuffer:!1,clearingBuffer:!1,recovering:!1,hasError:!1,resumeAt:n||0,operation:null}}},{key:"setupPeriod_",value:function(e){var t=this,n=this.canSwitchPeriod_[e];if(n)return us.log.debug("(all) Period "+e+" is being or has been set up"),window.asserts.assert(n.promise,"promise must not be null"),n.promise;us.log.debug("(all) setting up Period "+e),n={promise:new L,resolved:!1},this.canSwitchPeriod_[e]=n;var i=new Set,r=!0,a=!1,s=void 0;try{for(var o,l=this.manifest_.periods[e].variants[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var u=o.value;u.video&&i.add(u.video),u.video&&u.video.trickModeVideo&&i.add(u.video.trickModeVideo),u.audio&&i.add(u.audio)}}catch(e){a=!0,s=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw s}}var c=!0,d=!1,h=void 0;try{for(var f,p=this.manifest_.periods[e].textStreams[Symbol.iterator]();!(c=(f=p.next()).done);c=!0){var m=f.value;i.add(m)}}catch(e){d=!0,h=e}finally{try{c||null==p.return||p.return()}finally{if(d)throw h}}var v=function(){var n=ss(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.setupPeriodPromise_;case 3:return t.destroyer_.ensureNotDestroyed(),n.next=6,t.setupStreams_(i);case 6:t.destroyer_.ensureNotDestroyed(),t.canSwitchPeriod_[e].promise.resolve(),t.canSwitchPeriod_[e].resolved=!0,us.log.v1("(all) setup Period "+e),n.next=21;break;case 12:n.prev=12,n.t0=n.catch(0),t.destroyer_.ensureNotDestroyed(n.t0),t.canSwitchPeriod_[e].promise.catch(function(){}),t.canSwitchPeriod_[e].promise.reject(),delete t.canSwitchPeriod_[e],us.log.warning("(all) failed to setup Period "+e),window.asserts.assert(n.t0 instanceof M,"Bad error type"),t.playerInterface_.onError(n.t0);case 21:case"end":return n.stop()}},n,null,[[0,12]])}));return function(){return n.apply(this,arguments)}}();return this.setupPeriodPromise_=v(),n.promise}},{key:"setupStreams_",value:function(){var e=ss(regeneratorRuntime.mark(function e(t){var n,i,r,a,s,o,l,u,c,d,h,f,p,m,v,g,y,_,b,w,E;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n=[],i=!0,r=!1,a=void 0,e.prev=4,s=t[Symbol.iterator]();!(i=(o=s.next()).done);i=!0)l=o.value,(u=this.canSwitchStream_.get(l.id))?(us.log.debug("(all) Stream "+l.id+" is being or has been set up"),n.push(u.promise)):(us.log.v1("(all) setting up Stream "+l.id),this.canSwitchStream_.set(l.id,{promise:new L,resolved:!1}),n.push(l.createSegmentIndex()));e.next=12;break;case 8:e.prev=8,e.t0=e.catch(4),r=!0,a=e.t0;case 12:e.prev=12,e.prev=13,i||null==s.return||s.return();case 15:if(e.prev=15,!r){e.next=18;break}throw a;case 18:return e.finish(15);case 19:return e.finish(12);case 20:return e.prev=20,e.next=23,Promise.all(n);case 23:this.destroyer_.ensureNotDestroyed(),e.next=49;break;case 26:for(e.prev=26,e.t1=e.catch(20),this.destroyer_.ensureNotDestroyed(e.t1),c=!0,d=!1,h=void 0,e.prev=32,f=t[Symbol.iterator]();!(c=(p=f.next()).done);c=!0)m=p.value,this.canSwitchStream_.get(m.id).promise.catch(function(){}),this.canSwitchStream_.get(m.id).promise.reject(),this.canSwitchStream_.delete(m.id);e.next=40;break;case 36:e.prev=36,e.t2=e.catch(32),d=!0,h=e.t2;case 40:e.prev=40,e.prev=41,c||null==f.return||f.return();case 43:if(e.prev=43,!d){e.next=46;break}throw h;case 46:return e.finish(43);case 47:return e.finish(40);case 48:throw e.t1;case 49:for(v=!0,g=!1,y=void 0,e.prev=52,_=t[Symbol.iterator]();!(v=(b=_.next()).done);v=!0)w=b.value,(E=this.canSwitchStream_.get(w.id)).resolved||(E.promise.resolve(),E.resolved=!0,us.log.v1("(all) setup Stream "+w.id));e.next=60;break;case 56:e.prev=56,e.t3=e.catch(52),g=!0,y=e.t3;case 60:e.prev=60,e.prev=61,v||null==_.return||_.return();case 63:if(e.prev=63,!g){e.next=66;break}throw y;case 66:return e.finish(63);case 67:return e.finish(60);case 68:case"end":return e.stop()}},e,this,[[4,8,12,20],[13,,15,19],[20,26],[32,36,40,48],[41,,43,47],[52,56,60,68],[61,,63,67]])}));return function(t){return e.apply(this,arguments)}}()},{key:"setDuration_",value:function(){var e=this.manifest_.presentationTimeline.getDuration();e<1/0?this.playerInterface_.mediaSourceEngine.setDuration(e):this.playerInterface_.mediaSourceEngine.setDuration(Math.pow(2,32))}},{key:"onUpdate_",value:function(){var t=ss(regeneratorRuntime.mark(function t(n){var i,r,a,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.destroyer_.ensureNotDestroyed(),i=e.logPrefix_(n),window.asserts.assert(!n.performingUpdate&&null!=n.updateTimer,i+" unexpected call to onUpdate_()"),!n.performingUpdate&&null!=n.updateTimer){t.next=5;break}return t.abrupt("return");case 5:if(window.asserts.assert(!n.clearingBuffer,i+" onUpdate_() should not be called when clearing the buffer"),!n.clearingBuffer){t.next=8;break}return t.abrupt("return");case 8:if(n.updateTimer=null,!n.waitingToClearBuffer){t.next=14;break}return us.log.debug(i,"skipping update and clearing the buffer"),t.next=13,this.clearBuffer_(n,n.waitingToFlushBuffer,n.clearBufferSafeMargin);case 13:return t.abrupt("return");case 14:t.prev=14,null!=(r=this.update_(n))&&(this.scheduleUpdate_(n,r),n.hasError=!1),t.next=23;break;case 19:return t.prev=19,t.t0=t.catch(14),this.handleStreamingError_(t.t0),t.abrupt("return");case 23:if(a=Array.from(this.mediaStates_.values()),this.handlePeriodTransition_(n),!this.startupComplete_||!a.every(function(e){return e.endOfStream})){t.next=32;break}return us.log.v1(i,"calling endOfStream()..."),t.next=29,this.playerInterface_.mediaSourceEngine.endOfStream();case 29:this.destroyer_.ensureNotDestroyed(),(s=this.playerInterface_.mediaSourceEngine.getDuration())<this.manifest_.presentationTimeline.getDuration()&&this.manifest_.presentationTimeline.setDuration(s);case 32:case"end":return t.stop()}},t,this,[[14,19]])}));return function(e){return t.apply(this,arguments)}}()},{key:"update_",value:function(t){window.asserts.assert(this.manifest_,"manifest_ should not be null"),window.asserts.assert(this.config_,"config_ should not be null");var n=jt.ContentType,i=function(e){return e.type==n.TEXT&&e.stream.mimeType==Xn.CLOSED_CAPTION_MIMETYPE};if(i(t))return this.playerInterface_.mediaSourceEngine.setSelectedClosedCaptionId(t.stream.originalId||""),null;var r=e.logPrefix_(t),a=this.playerInterface_.getPresentationTime(),s=this.getTimeNeeded_(t,a);us.log.v2(r,"timeNeeded="+s);var o=this.findPeriodContainingStream_(t.stream),l=this.findPeriodForTime_(s),u=this.playerInterface_.mediaSourceEngine.bufferedAheadOf(t.type,a);us.log.v2(r,"update_:","presentationTime="+a,"bufferedAhead="+u);var c=Math.max(this.manifest_.minBufferTime||0,this.config_.rebufferingGoal,this.config_.bufferingGoal)*this.bufferingGoalScale_;if(s>=this.manifest_.presentationTimeline.getDuration()){if(us.log.debug(r,"buffered to end of presentation"),t.endOfStream=!0,t.type==n.VIDEO){var d=this.mediaStates_.get(n.TEXT);d&&d.stream.mimeType==Xn.CLOSED_CAPTION_MIMETYPE&&(d.endOfStream=!0)}return null}if(t.endOfStream=!1,t.needPeriodIndex=l,l!=o)return us.log.debug(r,"need Period "+l,"presentationTime="+a,"timeNeeded="+s,"currentPeriodIndex="+o),null;if(u>=c)return us.log.v2(r,"buffering goal met"),.5;var h=this.playerInterface_.mediaSourceEngine.bufferEnd(t.type),f=this.getSegmentReferenceNeeded_(t,a,h,o);if(!f)return 1;for(var p=1/0,m=0,v=Array.from(this.mediaStates_.values());m<v.length;m++){var g=v[m];if(i(g))return null;var y=this.getTimeNeeded_(g,a);p=Math.min(p,y)}return s>=p+this.manifest_.presentationTimeline.getMaxSegmentDuration()*e.MAX_RUN_AHEAD_SEGMENTS_?1:(t.resumeAt=0,this.fetchAndAppend_(t,a,o,f).catch(function(){}),null)}},{key:"getTimeNeeded_",value:function(e,t){if(!e.lastStream||!e.lastSegmentReference)return Math.max(t,e.resumeAt);var n=this.findPeriodContainingStream_(e.lastStream);return this.manifest_.periods[n].startTime+e.lastSegmentReference.endTime}},{key:"getSegmentReferenceNeeded_",value:function(t,n,i,r){var a,s=e.logPrefix_(t);if(t.lastSegmentReference&&t.stream==t.lastStream){var o=t.lastSegmentReference.position+1;return us.log.v2(s,"next position known:","position="+o),this.getSegmentReferenceIfAvailable_(t,r,o)}if(t.lastSegmentReference){window.asserts.assert(t.lastStream,"lastStream should not be null"),us.log.v1(s,"next position unknown: another Stream buffered");var l=this.findPeriodContainingStream_(t.lastStream),u=this.manifest_.periods[l];a=this.lookupSegmentPosition_(t,u.startTime+t.lastSegmentReference.endTime,r)}else window.asserts.assert(!t.lastStream,"lastStream should be null"),us.log.v1(s,"next position unknown: nothing buffered"),a=this.lookupSegmentPosition_(t,i||n,r);if(null==a)return null;var c=null;if(null==i){var d=Math.max(0,a-1);c=this.getSegmentReferenceIfAvailable_(t,r,d)}return c||this.getSegmentReferenceIfAvailable_(t,r,a)}},{key:"lookupSegmentPosition_",value:function(t,n,i){var r=e.logPrefix_(t),a=this.manifest_.periods[i];us.log.debug(r,"looking up segment:","presentationTime="+n,"currentPeriod.startTime="+a.startTime);var s=Math.max(0,n-a.startTime),o=t.stream.findSegmentPosition(s);return null==o&&us.log.warning(r,"cannot find segment:","currentPeriod.startTime="+a.startTime,"lookupTime="+s),o}},{key:"getSegmentReferenceIfAvailable_",value:function(t,n,i){var r=e.logPrefix_(t),a=this.manifest_.periods[n],s=t.stream.getSegmentReference(i);if(!s)return us.log.v1(r,"segment does not exist:","currentPeriod.startTime="+a.startTime,"position="+i),null;var o=this.manifest_.presentationTimeline,l=o.getSegmentAvailabilityStart(),u=o.getSegmentAvailabilityEnd();return a.startTime+s.endTime<l||a.startTime+s.startTime>u?(us.log.v2(r,"segment is not available:","currentPeriod.startTime="+a.startTime,"reference.startTime="+s.startTime,"reference.endTime="+s.endTime,"availabilityStart="+l,"availabilityEnd="+u),null):s}},{key:"fetchAndAppend_",value:function(){var e=ss(regeneratorRuntime.mark(function e(t,n,i,r){var a,s,o,l,u,c,d,h,f,p,m,v;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=jt.ContentType,o=(s=s).logPrefix_(t),l=this.manifest_.periods[i],us.log.v1(o,"fetchAndAppend_:","presentationTime="+n,"currentPeriod.startTime="+l.startTime,"reference.position="+r.position,"reference.startTime="+r.startTime,"reference.endTime="+r.endTime),u=t.stream,c=this.manifest_.presentationTimeline.getDuration(),d=this.manifest_.periods[i+1],h=Math.max(0,l.startTime-s.APPEND_WINDOW_START_FUDGE_),f=d?d.startTime+s.APPEND_WINDOW_END_FUDGE_:c,window.asserts.assert(r.startTime<=f,o+" segment should start before append window end"),p=this.initSourceBuffer_(t,i,h,f),t.performingUpdate=!0,t.needInitSegment=!1,us.log.v2(o,"fetching segment"),m=this.fetch_(t,r),e.prev=16,e.next=19,Promise.all([p,m]);case 19:if(v=e.sent,this.destroyer_.ensureNotDestroyed(),!this.fatalError_){e.next=23;break}return e.abrupt("return");case 23:return e.next=25,this.append_(t,n,l,u,r,v[1]);case 25:if(this.destroyer_.ensureNotDestroyed(),!this.fatalError_){e.next=28;break}return e.abrupt("return");case 28:t.performingUpdate=!1,t.recovering=!1,t.waitingToClearBuffer||this.playerInterface_.onSegmentAppended(),this.scheduleUpdate_(t,0),this.handleStartup_(t,u),us.log.v1(o,"finished fetch and append"),e.next=44;break;case 36:if(e.prev=36,e.t0=e.catch(16),this.destroyer_.ensureNotDestroyed(e.t0),!this.fatalError_){e.next=41;break}return e.abrupt("return");case 41:window.asserts.assert(e.t0 instanceof M,"Should only receive a Shaka error"),t.performingUpdate=!1,t.type==a.TEXT&&this.config_.ignoreTextStreamFailures?(e.t0.code==ls.code.BAD_HTTP_STATUS?us.log.warning(o,"Text stream failed to download. Proceeding without it."):us.log.warning(o,"Text stream failed to parse. Proceeding without it."),this.mediaStates_.delete(a.TEXT)):e.t0.code==ls.code.OPERATION_ABORTED?(t.performingUpdate=!1,t.updateTimer=null,this.scheduleUpdate_(t,0)):e.t0.code==ls.code.QUOTA_EXCEEDED_ERROR?this.handleQuotaExceeded_(t,e.t0):(us.log.error(o,"failed fetch and append: code="+e.t0.code),t.hasError=!0,e.t0.severity=ls.severity.CRITICAL,this.handleStreamingError_(e.t0));case 44:case"end":return e.stop()}},e,this,[[16,36]])}));return function(t,n,i,r){return e.apply(this,arguments)}}()},{key:"retry",value:function(){if(this.destroyer_.destroyed())return us.log.error("Unable to retry after StreamingEngine is destroyed!"),!1;if(this.fatalError_)return us.log.error("Unable to retry after StreamingEngine encountered a fatal error!"),!1;var t=!0,n=!1,i=void 0;try{for(var r,a=this.mediaStates_.values()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var s=r.value,o=e.logPrefix_(s);s.hasError&&(us.log.info(o,"Retrying after failure..."),s.hasError=!1,this.scheduleUpdate_(s,.1))}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return!0}},{key:"handleQuotaExceeded_",value:function(t,n){var i=e.logPrefix_(t);if(Array.from(this.mediaStates_.values()).some(function(e){return e!=t&&e.recovering}))us.log.debug(i,"MediaSource threw QuotaExceededError:","waiting for another stream to recover...");else{var r=Math.round(100*this.bufferingGoalScale_);if(r>20)this.bufferingGoalScale_-=.2;else{if(!(r>4))return us.log.error(i,"MediaSource threw QuotaExceededError too many times"),t.hasError=!0,this.fatalError_=!0,void this.playerInterface_.onError(n);this.bufferingGoalScale_-=.04}var a=Math.round(100*this.bufferingGoalScale_);us.log.warning(i,"MediaSource threw QuotaExceededError:","reducing buffering goals by "+(100-a)+"%"),t.recovering=!0}this.scheduleUpdate_(t,4)}},{key:"initSourceBuffer_",value:function(){var t=ss(regeneratorRuntime.mark(function t(n,i,r,a){var s,o,l,u,c,d,h=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n.needInitSegment){t.next=2;break}return t.abrupt("return");case 2:if(s=e.logPrefix_(n),o=this.manifest_.periods[i],l=o.startTime-n.stream.presentationTimeOffset,us.log.v1(s,"setting timestamp offset to "+l),us.log.v1(s,"setting append window start to "+r),us.log.v1(s,"setting append window end to "+a),u=this.playerInterface_.mediaSourceEngine.setStreamProperties(n.type,l,r,a),n.stream.initSegmentReference){t.next=13;break}return t.next=12,u;case 12:return t.abrupt("return");case 13:return us.log.v1(s,"fetching init segment"),window.asserts.assert(n.stream.initSegmentReference,"Should have init segment"),c=this.fetch_(n,n.stream.initSegmentReference),d=function(){var e=ss(regeneratorRuntime.mark(function e(){var t,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c;case 3:return t=e.sent,h.destroyer_.ensureNotDestroyed(),us.log.v1(s,"appending init segment"),i=n.stream.closedCaptions&&n.stream.closedCaptions.size>0,e.next=9,h.playerInterface_.mediaSourceEngine.appendBuffer(n.type,t,null,null,i);case 9:e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(0),n.needInitSegment=!0,e.t0;case 15:case"end":return e.stop()}},e,null,[[0,11]])}));return function(){return e.apply(this,arguments)}}(),t.next=19,Promise.all([u,d()]);case 19:case"end":return t.stop()}},t,this)}));return function(e,n,i,r){return t.apply(this,arguments)}}()},{key:"append_",value:function(){var t=ss(regeneratorRuntime.mark(function t(n,i,r,a,s,o){var l,u,c,d,h=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return l=e.logPrefix_(n),u=a.closedCaptions&&a.closedCaptions.size>0,null!=a.emsgSchemeIdUris&&a.emsgSchemeIdUris.length>0&&(new rs).fullBox("emsg",function(e){return h.parseEMSG_(r,s,a.emsgSchemeIdUris,e)}).parse(o),t.next=5,this.evict_(n,i);case 5:return this.destroyer_.ensureNotDestroyed(),us.log.v1(l,"appending media segment"),c=s.startTime+r.startTime,d=s.endTime+r.startTime,t.next=11,this.playerInterface_.mediaSourceEngine.appendBuffer(n.type,o,c,d,u);case 11:this.destroyer_.ensureNotDestroyed(),us.log.v2(l,"appended media segment"),n.lastStream=a,n.lastSegmentReference=s;case 15:case"end":return t.stop()}},t,this)}));return function(e,n,i,r,a,s){return t.apply(this,arguments)}}()},{key:"parseEMSG_",value:function(e,t,n,i){var r=i.reader.readTerminatedString(),a=i.reader.readTerminatedString(),s=i.reader.readUint32(),o=i.reader.readUint32(),l=i.reader.readUint32(),u=i.reader.readUint32(),c=i.reader.readBytes(i.reader.getLength()-i.reader.getPosition()),d=e.startTime+t.startTime+o/s;if(n.includes(r))if("urn:mpeg:dash:event:2012"==r)this.playerInterface_.onManifestUpdate();else{var h=new E("emsg",{detail:{startTime:d,endTime:d+l/s,schemeIdUri:r,value:a,timescale:s,presentationTimeDelta:o,eventDuration:l,id:u,messageData:c}});this.playerInterface_.onEvent(h)}}},{key:"evict_",value:function(){var t=ss(regeneratorRuntime.mark(function t(n,i){var r,a,s,o,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.logPrefix_(n),us.log.v2(r,"checking buffer length"),a=Math.max(this.config_.bufferBehind,this.manifest_.presentationTimeline.getMaxSegmentDuration()),null!=(s=this.playerInterface_.mediaSourceEngine.bufferStart(n.type))){t.next=7;break}return us.log.v2(r,"buffer behind okay because nothing buffered:","presentationTime="+i,"bufferBehind="+a),t.abrupt("return");case 7:if(!((l=(o=i-s)-a)<=0)){t.next=12;break}return us.log.v2(r,"buffer behind okay:","presentationTime="+i,"bufferedBehind="+o,"bufferBehind="+a,"underflow="+-l),t.abrupt("return");case 12:return us.log.v1(r,"buffer behind too large:","presentationTime="+i,"bufferedBehind="+o,"bufferBehind="+a,"overflow="+l),t.next=15,this.playerInterface_.mediaSourceEngine.remove(n.type,s,s+l);case 15:this.destroyer_.ensureNotDestroyed(),us.log.v1(r,"evicted "+l+" seconds");case 17:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"handleStartup_",value:function(t,n){var i=this,r=jt.ContentType;if(!this.startupComplete_){var a=e.logPrefix_(t),s=Array.from(this.mediaStates_.values());if(1==s.length&&s[0].type==r.TEXT||(this.startupComplete_=s.every(function(e){return e.type==r.TEXT||!e.waitingToClearBuffer&&!e.clearingBuffer&&e.lastSegmentReference})),this.startupComplete_){us.log.debug(a,"startup complete");var o=this.findPeriodContainingStream_(n);if(window.asserts.assert(s.every(function(e){return e.needPeriodIndex==o||e.needPeriodIndex==o+1}),a+" expected all MediaStates to need same Period"),!this.canSwitchPeriod_[o])(function(){var e=ss(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.setupPeriod_(o);case 3:i.destroyer_.ensureNotDestroyed(),us.log.v1(a,"calling onCanSwitch()..."),i.playerInterface_.onCanSwitch(),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}},e,null,[[0,8]])}));return function(){return e.apply(this,arguments)}})()();for(var l=0;l<this.manifest_.periods.length;++l)this.setupPeriod_(l).catch(Ht.noop);this.playerInterface_.onStartupComplete&&(us.log.v1(a,"calling onStartupComplete()..."),this.playerInterface_.onStartupComplete())}}}},{key:"handlePeriodTransition_",value:function(){var t=ss(regeneratorRuntime.mark(function t(n){var i,r,a,s,o,l,u,c,d,h,f,p,m,v,g,y,_,b,w,E,S,T=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.logPrefix_(n),r=jt.ContentType,a=this.findPeriodContainingStream_(n.stream),n.needPeriodIndex!=a){t.next=5;break}return t.abrupt("return");case 5:if(s=n.needPeriodIndex,o=Array.from(this.mediaStates_.values()),window.asserts.assert(o.every(function(t){return t.needPeriodIndex==s||t.hasError||!e.isIdle_(t)}),"All MediaStates should need the same Period or be performingupdates."),o.every(function(e){return e.needPeriodIndex==s})){t.next=12;break}return us.log.debug(i,"not all MediaStates need Period "+s),t.abrupt("return");case 12:if(o.every(e.isIdle_)){t.next=16;break}return us.log.debug(i,"all MediaStates need Period "+s+", but not all MediaStates are idle"),t.abrupt("return");case 16:return us.log.debug(i,"all need Period "+s),t.prev=17,t.next=20,this.setupPeriod_(s);case 20:if(this.destroyer_.ensureNotDestroyed(),o.every(function(t){var n=e.isIdle_(t),i=T.findPeriodContainingStream_(t.stream);return n&&t.needPeriodIndex==s&&i!=s})){t.next=25;break}return us.log.debug(i,"ignoring transition to Period",s,"since another is happening"),t.abrupt("return");case 25:l=this.manifest_.periods[s],us.log.v1(i,"calling onChooseStreams()..."),u=this.playerInterface_.onChooseStreams(l),c=new Map,u.variant&&u.variant.video&&c.set(r.VIDEO,u.variant.video),u.variant&&u.variant.audio&&c.set(r.AUDIO,u.variant.audio),u.text&&c.set(r.TEXT,u.text),d=!0,h=!1,f=void 0,t.prev=35,p=this.mediaStates_.keys()[Symbol.iterator]();case 37:if(d=(m=p.next()).done){t.next=47;break}if(v=m.value,!c.has(v)&&v!=r.TEXT){t.next=41;break}return t.abrupt("continue",44);case 41:return us.log.error(i,"invalid Streams chosen: missing "+v+" Stream"),this.playerInterface_.onError(new M(ls.severity.CRITICAL,ls.category.STREAMING,ls.code.INVALID_STREAMS_CHOSEN)),t.abrupt("return");case 44:d=!0,t.next=37;break;case 47:t.next=53;break;case 49:t.prev=49,t.t0=t.catch(35),h=!0,f=t.t0;case 53:t.prev=53,t.prev=54,d||null==p.return||p.return();case 56:if(t.prev=56,!h){t.next=59;break}throw f;case 59:return t.finish(56);case 60:return t.finish(53);case 61:g=0,y=Array.from(c.keys());case 62:if(!(g<y.length)){t.next=76;break}if(_=y[g],!this.mediaStates_.has(_)){t.next=66;break}return t.abrupt("continue",73);case 66:if(_!=r.TEXT){t.next=70;break}return this.initStreams_(null,null,c.get(r.TEXT),l.startTime),c.delete(_),t.abrupt("continue",73);case 70:return us.log.error(i,"invalid Streams chosen: unusable "+_+" Stream"),this.playerInterface_.onError(new M(ls.severity.CRITICAL,ls.category.STREAMING,ls.code.INVALID_STREAMS_CHOSEN)),t.abrupt("return");case 73:g++,t.next=62;break;case 76:for(b=0,w=Array.from(this.mediaStates_.keys());b<w.length;b++)E=w[b],(S=c.get(E))?(this.switchInternal_(S,!1,0,!1),this.scheduleUpdate_(this.mediaStates_.get(E),0)):(window.asserts.assert(E==r.TEXT,"Invalid streams chosen"),this.mediaStates_.delete(E));us.log.v1(i,"calling onCanSwitch()..."),this.playerInterface_.onCanSwitch(),t.next=83;break;case 81:t.prev=81,t.t1=t.catch(17);case 83:case"end":return t.stop()}},t,this,[[17,81],[35,49,53,61],[54,,56,60]])}));return function(e){return t.apply(this,arguments)}}()},{key:"findPeriodForTime_",value:function(e){var t=e+jt.GAP_OVERLAP_TOLERANCE_SECONDS,n=ea.findPeriodForTime(this.manifest_.periods,t);return n?this.manifest_.periods.indexOf(n):0}},{key:"findPeriodContainingStream_",value:function(e){window.asserts.assert(this.manifest_,"Must have a manifest to find a stream.");for(var t=this.manifest_.periods,n=0;n<t.length;n++){var i=t[n],r=new Set,a=!0,s=!1,o=void 0;try{for(var l,u=i.variants[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value;c.audio&&r.add(c.audio),c.video&&r.add(c.video),c.video&&c.video.trickModeVideo&&r.add(c.video.trickModeVideo)}}catch(e){s=!0,o=e}finally{try{a||null==u.return||u.return()}finally{if(s)throw o}}var d=!0,h=!1,f=void 0;try{for(var p,m=i.textStreams[Symbol.iterator]();!(d=(p=m.next()).done);d=!0){var v=p.value;r.add(v)}}catch(e){h=!0,f=e}finally{try{d||null==m.return||m.return()}finally{if(h)throw f}}if(r.has(e))return n}return-1}},{key:"fetch_",value:function(){var e=ss(regeneratorRuntime.mark(function e(t,n){var i,r,a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=oe.RequestType.SEGMENT,r=Qr.createSegmentRequest(n.getUris(),n.startByte,n.endByte,this.config_.retryParameters),us.log.v2("fetching: reference=",n),a=this.playerInterface_.netEngine.request(i,r),t.operation=a,e.next=7,a.promise;case 7:return s=e.sent,t.operation=null,e.abrupt("return",s.data);case 10:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"clearBuffer_",value:function(){var t=ss(regeneratorRuntime.mark(function t(n,i,r){var a,s,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.logPrefix_(n),window.asserts.assert(!n.performingUpdate&&null==n.updateTimer,a+" unexpected call to clearBuffer_()"),n.waitingToClearBuffer=!1,n.waitingToFlushBuffer=!1,n.clearBufferSafeMargin=0,n.clearingBuffer=!0,us.log.debug(a,"clearing buffer"),!r){t.next=14;break}return s=this.playerInterface_.getPresentationTime(),o=this.playerInterface_.mediaSourceEngine.getDuration(),t.next=12,this.playerInterface_.mediaSourceEngine.remove(n.type,s+r,o);case 12:t.next=20;break;case 14:return t.next=16,this.playerInterface_.mediaSourceEngine.clear(n.type);case 16:if(this.destroyer_.ensureNotDestroyed(),!i){t.next=20;break}return t.next=20,this.playerInterface_.mediaSourceEngine.flush(n.type);case 20:this.destroyer_.ensureNotDestroyed(),us.log.debug(a,"cleared buffer"),n.lastStream=null,n.lastSegmentReference=null,n.clearingBuffer=!1,n.endOfStream=!1,this.scheduleUpdate_(n,0);case 27:case"end":return t.stop()}},t,this)}));return function(e,n,i){return t.apply(this,arguments)}}()},{key:"scheduleUpdate_",value:function(t,n){var i=this,r=e.logPrefix_(t);us.log.v2(r,"updating in "+n+" seconds"),window.asserts.assert(null==t.updateTimer,r+" did not expect update to be scheduled"),t.updateTimer=new H(ss(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.onUpdate_(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),i.playerInterface_&&i.playerInterface_.onError(e.t0);case 8:case"end":return e.stop()}},e,null,[[0,5]])}))).tickAfter(n)}},{key:"cancelUpdate_",value:function(e){null!=e.updateTimer&&(e.updateTimer.stop(),e.updateTimer=null)}},{key:"handleStreamingError_",value:function(){var e=ss(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.failureCallbackBackoff_.attempt();case 2:this.destroyer_.ensureNotDestroyed(),this.playerInterface_.onError(t),t.handled||this.config_.failureCallback(t);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}],i=[{key:"isIdle_",value:function(e){return!e.performingUpdate&&null==e.updateTimer&&!e.waitingToClearBuffer&&!e.clearingBuffer}},{key:"logPrefix_",value:function(e){return"("+e.type+":"+e.stream.id+")"}}],n&&os(t.prototype,n),i&&os(t,i),e}());cs.ChosenStreams,cs.PlayerInterface,cs.MediaState_,cs.APPEND_WINDOW_START_FUDGE_=.1,cs.APPEND_WINDOW_END_FUDGE_=.01,cs.MAX_RUN_AHEAD_SEGMENTS_=1;var ds=cs;
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */window.shaka,window.shaka;function hs(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(i,r)}function fs(e){return function(){var t=this,n=arguments;return new Promise(function(i,r){var a=e.apply(t,n);function s(e){hs(a,i,r,s,o,"next",e)}function o(e){hs(a,i,r,s,o,"throw",e)}s(void 0)})}}function ps(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ms=new M,vs=(window.shaka,window.goog,function(){function e(t,n,i){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.implementation_=i,this.currentlyAt_=t,this.currentlyWith_=n,this.waitForWork_=null,this.requests_=[],this.currentRoute_=null,this.currentStep_=null,this.mainLoopPromise_=Promise.resolve().then(function(){return r.mainLoop_()}),this.destroyer_=new zn(function(){return r.doDestroy_()})}var t,n,i;return t=e,(n=[{key:"destroy",value:function(){return this.destroyer_.destroy()}},{key:"doDestroy_",value:function(){var e=fs(regeneratorRuntime.mark(function e(){var t,n,i,r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.currentStep_&&this.currentStep_.abort(),this.unblockMainLoop_(),e.next=4,this.mainLoopPromise_;case 4:for(this.currentRoute_&&this.currentRoute_.listeners.onCancel(),t=!0,n=!1,i=void 0,e.prev=8,r=this.requests_[Symbol.iterator]();!(t=(a=r.next()).done);t=!0)a.value.listeners.onCancel();e.next=16;break;case 12:e.prev=12,e.t0=e.catch(8),n=!0,i=e.t0;case 16:e.prev=16,e.prev=17,t||null==r.return||r.return();case 19:if(e.prev=19,!n){e.next=22;break}throw i;case 22:return e.finish(19);case 23:return e.finish(16);case 24:this.currentRoute_=null,this.requests_=[],this.implementation_=null;case 27:case"end":return e.stop()}},e,this,[[8,12,16,24],[17,,19,23]])}));return function(){return e.apply(this,arguments)}}()},{key:"startNewRoute",value:function(e){var t={onStart:function(){},onEnd:function(){},onCancel:function(){},onError:function(e){},onSkip:function(){},onEnter:function(){}};return this.requests_.push({create:e,listeners:t}),this.currentStep_&&this.currentStep_.abort(),this.unblockMainLoop_(),t}},{key:"mainLoop_",value:function(){var e=fs(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.destroyer_.destroyed()){e.next=5;break}return e.next=3,this.doOneThing_();case 3:e.next=0;break;case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"doOneThing_",value:function(){return this.tryNewRoute_()?Promise.resolve():this.currentRoute_?this.takeNextStep_():(window.asserts.assert(null==this.waitForWork_,"We should not have a promise yet."),this.implementation_.onIdle(this.currentlyAt_),this.waitForWork_=new L,this.waitForWork_)}},{key:"tryNewRoute_",value:function(){if(window.asserts.assert(null==this.currentStep_,"We should never have a current step between taking steps."),0==this.requests_.length)return!1;if(this.currentRoute_&&!this.currentRoute_.interruptible)return!1;this.currentRoute_&&(this.currentRoute_.listeners.onCancel(),this.currentRoute_=null);var e=this.requests_.shift(),t=e.create(this.currentlyWith_);return t?(e.listeners.onStart(),this.currentRoute_={node:t.node,payload:t.payload,interruptible:t.interruptible,listeners:e.listeners}):e.listeners.onSkip(),!0}},{key:"takeNextStep_",value:function(){var e=fs(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.asserts.assert(this.currentRoute_,"We need a current route to take the next step."),this.currentlyAt_=this.implementation_.getNext(this.currentlyAt_,this.currentlyWith_,this.currentRoute_.node,this.currentRoute_.payload),this.currentRoute_.listeners.onEnter(this.currentlyAt_),e.prev=3,this.currentStep_=this.implementation_.enterNode(this.currentlyAt_,this.currentlyWith_,this.currentRoute_.payload),e.next=7,this.currentStep_.promise;case 7:this.currentStep_=null,this.currentlyAt_==this.currentRoute_.node&&(this.currentRoute_.listeners.onEnd(),this.currentRoute_=null),e.next=19;break;case 11:return e.prev=11,e.t0=e.catch(3),e.t0.code==ms.code.OPERATION_ABORTED?(window.asserts.assert(this.currentRoute_.interruptible,"Do not put abortable steps in non-interruptible routes!"),this.currentRoute_.listeners.onCancel()):this.currentRoute_.listeners.onError(e.t0),this.currentRoute_=null,this.currentStep_=null,e.next=18,this.implementation_.handleError(this.currentlyWith_,e.t0);case 18:this.currentlyAt_=e.sent;case 19:case"end":return e.stop()}},e,this,[[3,11]])}));return function(){return e.apply(this,arguments)}}()},{key:"unblockMainLoop_",value:function(){this.waitForWork_&&(this.waitForWork_.resolve(),this.waitForWork_=null)}}])&&ps(t.prototype,n),i&&ps(t,i),e}());function gs(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}vs.Implementation,vs.Listeners,vs.Route,vs.ActiveRoute_,vs.Request_;
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ys=window.shaka,_s=(window.goog,function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.textTrack_=null;for(var n=0;n<t.textTracks.length;++n){var i=t.textTracks[n];i.mode="disabled",i.label==ys.text.SimpleTextDisplayer.TextTrackLabel_&&(this.textTrack_=i)}this.textTrack_||(this.textTrack_=t.addTextTrack("subtitles",ys.text.SimpleTextDisplayer.TextTrackLabel_)),this.textTrack_.mode="hidden"}var t,n,i;return t=e,i=[{key:"convertToTextTrackCue_",value:function(e){if(e.startTime>=e.endTime)return ys.log.warning("Invalid cue times: "+e.startTime+" - "+e.endTime),null;var t=ys.text.Cue,n=new VTTCue(e.startTime,e.endTime,e.payload);n.lineAlign=e.lineAlign,n.positionAlign=e.positionAlign,n.size=e.size;try{n.align=e.textAlign}catch(e){}return"center"==e.textAlign&&"center"!=n.align&&(n.align="middle"),e.writingMode==t.writingMode.VERTICAL_LEFT_TO_RIGHT?n.vertical="lr":e.writingMode==t.writingMode.VERTICAL_RIGHT_TO_LEFT&&(n.vertical="rl"),e.lineInterpretation==t.lineInterpretation.PERCENTAGE&&(n.snapToLines=!1),null!=e.line&&(n.line=e.line),null!=e.position&&(n.position=e.position),n}},{key:"removeWhere_",value:function(e,t){var n=e.mode,i="showing"==n?"showing":"hidden";e.mode=i,window.asserts.assert(e.cues,'Cues should be accessible when mode is set to "'+i+'".');for(var r=e.cues,a=r.length-1;a>=0;a--){var s=r[a];s&&t(s)&&e.removeCue(s)}e.mode=n}}],(n=[{key:"remove",value:function(e,t){if(!this.textTrack_)return!1;return ys.text.SimpleTextDisplayer.removeWhere_(this.textTrack_,function(n){return n.startTime<t&&n.endTime>e}),!0}},{key:"append",value:function(e){for(var t=ys.text.SimpleTextDisplayer.convertToTextTrackCue_,n=[],i=0;i<e.length;i++){var r=t(e[i]);r&&n.push(r)}var a=n.slice().sort(function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime!=t.endTime?e.endTime-t.startTime:n.indexOf(t)-n.indexOf(e)}),s=!0,o=!1,l=void 0;try{for(var u,c=a[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){var d=u.value;this.textTrack_.addCue(d)}}catch(e){o=!0,l=e}finally{try{s||null==c.return||c.return()}finally{if(o)throw l}}}},{key:"destroy",value:function(){if(this.textTrack_){ys.text.SimpleTextDisplayer.removeWhere_(this.textTrack_,function(e){return!0})}return this.textTrack_=null,Promise.resolve()}},{key:"isTextVisible",value:function(){return"showing"==this.textTrack_.mode}},{key:"setTextVisibility",value:function(e){this.textTrack_.mode=e?"showing":"hidden"}}])&&gs(t.prototype,n),i&&gs(t,i),e}());_s.TextTrackLabel_="Shaka Player TextTrack";var bs=_s;function ws(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var Es=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.open_=null,this.closed_=[]}var t,n,i;return t=e,(n=[{key:"update",value:function(e){null==this.open_?this.start_(e):this.update_(e)}},{key:"getTimeSpentIn",value:function(e){var t=0;this.open_&&this.open_.state==e&&(t+=this.open_.duration);var n=!0,i=!1,r=void 0;try{for(var a,s=this.closed_[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;t+=o.state==e?o.duration:0}}catch(e){i=!0,r=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}return t}},{key:"getCopy",value:function(){var e=function(e){return{timestamp:e.timestamp,state:e.state,duration:e.duration}},t=[],n=!0,i=!1,r=void 0;try{for(var a,s=this.closed_[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;t.push(e(o))}}catch(e){i=!0,r=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}return this.open_&&t.push(e(this.open_)),t}},{key:"start_",value:function(e){window.asserts.assert(null==this.open_,"There must be no open entry in order when we start"),this.open_={timestamp:this.getNowInSeconds_(),state:e,duration:0}}},{key:"update_",value:function(e){window.asserts.assert(this.open_,"There must be an open entry in order to update it");var t=this.getNowInSeconds_();this.open_.duration=t-this.open_.timestamp,this.open_.state!=e&&(this.closed_.push(this.open_),this.open_={timestamp:t,state:e,duration:0})}},{key:"getNowInSeconds_",value:function(){return Date.now()/1e3}}])&&ws(t.prototype,n),i&&ws(t,i),e}();function Ss(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var Ts=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.currentVariant_=null,this.currentText_=null,this.history_=[]}var t,n,i;return t=e,(n=[{key:"updateCurrentVariant",value:function(e,t){this.currentVariant_!=e&&(this.currentVariant_=e,this.history_.push({timestamp:this.getNowInSeconds_(),id:e.id,type:"variant",fromAdaptation:t,bandwidth:e.bandwidth}))}},{key:"updateCurrentText",value:function(e,t){this.currentText_!=e&&(this.currentText_=e,this.history_.push({timestamp:this.getNowInSeconds_(),id:e.id,type:"text",fromAdaptation:t,bandwidth:null}))}},{key:"getCopy",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var r,a=this.history_[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var s=r.value;e.push(this.clone_(s))}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return e}},{key:"getNowInSeconds_",value:function(){return Date.now()/1e3}},{key:"clone_",value:function(e){return{timestamp:e.timestamp,id:e.id,type:e.type,fromAdaptation:e.fromAdaptation,bandwidth:e.bandwidth}}}])&&Ss(t.prototype,n),i&&Ss(t,i),e}();function ks(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka,window.goog;var Cs=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.width_=NaN,this.height_=NaN,this.totalDroppedFrames_=NaN,this.totalDecodedFrames_=NaN,this.loadLatencySeconds_=NaN,this.variantBandwidth_=NaN,this.bandwidthEstimate_=NaN,this.stateHistory_=new Es,this.switchHistory_=new Ts}var t,n,i;return t=e,i=[{key:"getEmptyBlob",value:function(){return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,estimatedBandwidth:NaN,loadLatency:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,switchHistory:[],stateHistory:[]}}}],(n=[{key:"setDroppedFrames",value:function(e,t){this.totalDroppedFrames_=e,this.totalDecodedFrames_=t}},{key:"setResolution",value:function(e,t){this.width_=e,this.height_=t}},{key:"setLoadLatency",value:function(e){this.loadLatencySeconds_=e}},{key:"setVariantBandwidth",value:function(e){this.variantBandwidth_=e}},{key:"setBandwidthEstimate",value:function(e){this.bandwidthEstimate_=e}},{key:"getStateHistory",value:function(){return this.stateHistory_}},{key:"getSwitchHistory",value:function(){return this.switchHistory_}},{key:"getBlob",value:function(){return{width:this.width_,height:this.height_,streamBandwidth:this.variantBandwidth_,decodedFrames:this.totalDecodedFrames_,droppedFrames:this.totalDroppedFrames_,estimatedBandwidth:this.bandwidthEstimate_,loadLatency:this.loadLatencySeconds_,playTime:this.stateHistory_.getTimeSpentIn("playing"),pauseTime:this.stateHistory_.getTimeSpentIn("paused"),bufferingTime:this.stateHistory_.getTimeSpentIn("buffering"),stateHistory:this.stateHistory_.getCopy(),switchHistory:this.switchHistory_.getCopy()}}}])&&ks(t.prototype,n),i&&ks(t,i),e}();function Is(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka;var As=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.libraryVersion_=t,this.onPending_=n,this.onExpired_=i}var t,n,i;return t=e,(n=[{key:"enforce",value:function(e,t,n){(e.compareTo(this.libraryVersion_)>0?this.onPending_:this.onExpired_)(this.libraryVersion_,e,t,n)}}])&&Is(t.prototype,n),i&&Is(t,i),e}();function xs(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
window.shaka;var Ls=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.major_=t,this.minor_=n}var t,n,i;return t=e,i=[{key:"parse",value:function(t){var n=t.substring(1).split(".",2);return new e(Number(n[0]),Number(n[1]))}}],(n=[{key:"major",value:function(){return this.major_}},{key:"minor",value:function(){return this.minor_}},{key:"compareTo",value:function(e){var t=this.major_-e.major_,n=this.minor_-e.minor_;return t||n}},{key:"toString",value:function(){return"v"+this.major_+"."+this.minor_}}])&&xs(t.prototype,n),i&&xs(t,i),e}();function Rs(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ps=window.shaka,Ds=(window.goog,function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"init",value:function(t){window.asserts.assert(null==e.enforcer_,"Deprecate.init should only be called once."),e.enforcer_=new As(Ls.parse(t),e.onPending_,e.onExpired_)}},{key:"deprecateFeature",value:function(t,n,i,r){var a=e.enforcer_;window.asserts.assert(a,"Missing deprecation enforcer. Was |init| called?");var s=new e.Version(t,n);a.enforce(s,i,r)}},{key:"onPending_",value:function(e,t,n,i){Ps.log.alwaysWarn([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",i].join(" "))}},{key:"onExpired_",value:function(e,t,n,i){var r=[n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",i].join("");Ps.log.alwaysError(r),window.asserts.assert(!1,r)}}],(n=null)&&Rs(t.prototype,n),i&&Rs(t,i),e}());function Os(e){return(Os="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ms(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(i,r)}function Ns(e){return function(){var t=this,n=arguments;return new Promise(function(i,r){var a=e.apply(t,n);function s(e){Ms(a,i,r,s,o,"next",e)}function o(e){Ms(a,i,r,s,o,"throw",e)}s(void 0)})}}function Us(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Fs(e){return(Fs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vs(e,t){return(Vs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ds.enforcer_=null;var Hs=new M;window.shaka=window.shaka||{};var Gs=window.shaka;window.goog=window.goog||{};var js=window.goog,zs=function(e){function t(e,n){var i,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Fs(t).call(this),(i=!a||"object"!==Os(a)&&"function"!=typeof a?Bs(r):a).loadMode_=t.LoadMode.NOT_LOADED,i.video_=null,i.isTextVisible_=!1,i.eventManager_=new rn,i.networkingEngine_=null,i.drmEngine_=null,i.mediaSourceEngine_=null,i.playhead_=null,i.playheadObservers_=null,i.playRateController_=null,i.bufferPoller_=null,i.bufferObserver_=null,i.regionTimeline_=null,i.streamingEngine_=null,i.parser_=null,i.manifest_=null,i.assetUri_=null,i.abrManager_=null,i.abrManagerFactory_=null,i.nextExternalStreamId_=1e9,i.loadingTextStreams_=new Set,i.switchingPeriods_=!0,i.deferredVariant_=null,i.deferredVariantClearBuffer_=!1,i.deferredVariantClearBufferSafeMargin_=0,i.deferredTextStream_=null,i.activeStreams_=new ra,i.config_=i.defaultConfig_(),i.lastTextFactory_,i.maxHwRes_={width:1/0,height:1/0},i.stats_=null,i.currentAdaptationSetCriteria_=new fa(i.config_.preferredAudioLanguage,i.config_.preferredVariantRole,i.config_.preferredAudioChannelCount),i.currentTextLanguage_=i.config_.preferredTextLanguage,i.currentTextRole_=i.config_.preferredTextRole,n&&n(Bs(i)),i.networkingEngine_=i.createNetworkingEngine(),i.eventManager_.listen(window,"online",function(){i.retryStreaming()}),i.detachNode_={name:"detach"},i.attachNode_={name:"attach"},i.unloadNode_={name:"unload"},i.parserNode_={name:"manifest-parser"},i.manifestNode_={name:"manifest"},i.mediaSourceNode_={name:"media-source"},i.drmNode_={name:"drm-engine"},i.loadNode_={name:"load"},i.srcEqualsDrmNode_={name:"src-equals-drm-engine"},i.srcEqualsNode_={name:"src-equals"};var s=new Map;s.set(i.attachNode_,function(e,t){return B.notAbortable(i.onAttach_(e,t))}),s.set(i.detachNode_,function(e,t){return B.notAbortable(i.onDetach_(e,t))}),s.set(i.unloadNode_,function(e,t){return B.notAbortable(i.onUnload_(e,t))}),s.set(i.mediaSourceNode_,function(e,t){var n=i.onInitializeMediaSourceEngine_(e,t);return B.notAbortable(n)}),s.set(i.parserNode_,function(e,t){var n=i.onInitializeParser_(e,t);return B.notAbortable(n)}),s.set(i.manifestNode_,function(e,t){return i.onParseManifest_(e,t)}),s.set(i.drmNode_,function(e,t){var n=i.onInitializeDrm_(e,t);return B.notAbortable(n)}),s.set(i.loadNode_,function(e,t){return B.notAbortable(i.onLoad_(e,t))}),s.set(i.srcEqualsDrmNode_,function(e,t){var n=i.onInitializeSrcEqualsDrm_(e,t);return B.notAbortable(n)}),s.set(i.srcEqualsNode_,function(e,t){return i.onSrcEquals_(e,t)});var o={getNext:function(e,t,n,r){return i.getNextStep_(e,t,n,r)},enterNode:function(e,t,n){return i.dispatchEvent(new E("onstatechange",{state:e.name})),s.get(e)(t,n)},handleError:function(){var e=Ns(regeneratorRuntime.mark(function e(n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Gs.log.warning("The walker saw an error:"),r instanceof M?Gs.log.warning("Error Code:",r.code):(Gs.log.warning("Error Message:",r.message),Gs.log.warning("Error Stack:",r.stack)),e.next=4,i.onUnload_(n,t.createEmptyPayload_());case 4:return e.abrupt("return",n.mediaElement?i.attachNode_:i.detachNode_);case 5:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),onIdle:function(e){i.dispatchEvent(new E("onstateidle",{state:e.name}))}};return i.walker_=new vs(i.detachNode_,t.createEmptyPayload_(),o),e&&i.attach(e,!0),i}var n,i,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vs(e,t)}(t,A),n=t,i=[{key:"destroy",value:function(){var e=Ns(regeneratorRuntime.mark(function e(){var n,i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.loadMode_!=t.LoadMode.DESTROYED){e.next=2;break}return e.abrupt("return");case 2:return this.loadMode_=t.LoadMode.DESTROYED,n=this.walker_.startNewRoute(function(e){return{node:i.detachNode_,payload:t.createEmptyPayload_(),interruptible:!1}}),e.next=6,new Promise(function(e){n.onStart=function(){Gs.log.info("Preparing to destroy walker...")},n.onEnd=function(){e()},n.onCancel=function(){window.asserts.assert(!1,"Our final detach call should never be cancelled."),e()},n.onError=function(){window.asserts.assert(!1,"Our final detach call should never see an error"),e()},n.onSkip=function(){window.asserts.assert(!1,"Our final detach call should never be skipped"),e()}});case 6:return e.next=8,this.walker_.destroy();case 8:if(this.eventManager_&&(this.eventManager_.release(),this.eventManager_=null),this.abrManagerFactory_=null,this.abrManager_=null,this.config_=null,!this.networkingEngine_){e.next=16;break}return e.next=15,this.networkingEngine_.destroy();case 15:this.networkingEngine_=null;case 16:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"attach",value:function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.loadMode_==t.LoadMode.DESTROYED)return Promise.reject(this.createAbortLoadError_());var i=t.createEmptyPayload_();i.mediaElement=e,Qn.supportsMediaSource()||(n=!1);var r=n?this.mediaSourceNode_:this.attachNode_,a=this.walker_.startNewRoute(function(e){return{node:r,payload:i,interruptible:!1}});return a.onStart=function(){return Gs.log.info("Starting attach...")},this.wrapWalkerListenersWithPromise_(a)}},{key:"detach",value:function(){var e=this;if(this.loadMode_==t.LoadMode.DESTROYED)return Promise.reject(this.createAbortLoadError_());var n=this.walker_.startNewRoute(function(n){return{node:e.detachNode_,payload:t.createEmptyPayload_(),interruptible:!1}});return n.onStart=function(){return Gs.log.info("Starting detach...")},this.wrapWalkerListenersWithPromise_(n)}},{key:"unload",value:function(){var e=this,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.loadMode_==t.LoadMode.DESTROYED)return Promise.reject(this.createAbortLoadError_());Qn.supportsMediaSource()||(n=!1);var i=t.createEmptyPayload_(),r=this.walker_.startNewRoute(function(t){var r=null;return r=t.mediaElement&&n?e.mediaSourceNode_:t.mediaElement?e.attachNode_:e.detachNode_,window.asserts.assert(r,"We should have picked a destination."),i.mediaElement=t.mediaElement,{node:r,payload:i,interruptible:!1}});return r.onStart=function(){return Gs.log.info("Starting unload...")},this.wrapWalkerListenersWithPromise_(r)}},{key:"load",value:function(e,n,i){var r=this;if(this.loadMode_==t.LoadMode.DESTROYED)return Promise.reject(this.createAbortLoadError_());this.dispatchEvent(new E("loading"));var a=t.createEmptyPayload_();if(a.uri=e,a.startTimeOfLoad=Date.now()/1e3,i&&"string"!=typeof i){Ds.deprecateFeature(2,6,"Loading with a manifest parser factory","Please register a manifest parser and for the mime-type.");var s=i;a.factory=function(){return new s}}i&&"string"==typeof i&&(a.mimeType=i),void 0!==n&&(a.startTime=n);var o=this.shouldUseSrcEquals_(a)?this.srcEqualsNode_:this.loadNode_,l=this.walker_.startNewRoute(function(e){return null==e.mediaElement?null:(a.mediaElement=e.mediaElement,{node:o,payload:a,interruptible:!0})});return l.onStart=function(){return Gs.log.info("Starting load of "+e+"...")},new Promise(function(e,t){l.onSkip=function(){return t(new M(Hs.severity.CRITICAL,Hs.category.PLAYER,Hs.code.NO_VIDEO_ELEMENT))},l.onEnd=function(){return e()},l.onCancel=function(){return t(r.createAbortLoadError_())},l.onError=function(e){return t(e)}})}},{key:"shouldUseSrcEquals_",value:function(e){if(e.factory)return!1;if(!Qn.supportsMediaSource())return!0;var t=e.mimeType,n=e.uri||"";t||(t={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",ts:"video/mp2t",m3u8:"application/x-mpegurl",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac"}[rr.getExtension(n)]);if(t){var i=Qn.supportsMediaType(t);if(!i)return!1;var r=rr.isSupported(n,t);return!r||(window.asserts.assert(i&&r,"Both native and MSE playback should be possible!"),Qn.isApple())}return!1}},{key:"onAttach_",value:function(e,t){var n=this;if(window.asserts.assert(null==e.mediaElement||e.mediaElement==t.mediaElement,"The routing logic failed. MediaElement requirement failed."),null==e.mediaElement){e.mediaElement=t.mediaElement;this.eventManager_.listen(e.mediaElement,"error",function(e){return n.onVideoError_(e)})}return this.video_=e.mediaElement,Promise.resolve()}},{key:"onDetach_",value:function(e,t){return e.mediaElement&&(this.eventManager_.unlisten(e.mediaElement,"error"),e.mediaElement=null),this.video_=null,Promise.resolve()}},{key:"onUnload_",value:function(){var e=Ns(regeneratorRuntime.mark(function e(n,i){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.loadMode_!=t.LoadMode.DESTROYED&&(this.loadMode_=t.LoadMode.NOT_LOADED),this.dispatchEvent(new E("unloading")),n.factory=null,n.mimeType=null,n.startTime=null,n.uri=null,n.mediaElement&&(this.eventManager_.unlisten(n.mediaElement,"loadeddata"),this.eventManager_.unlisten(n.mediaElement,"playing"),this.eventManager_.unlisten(n.mediaElement,"pause"),this.eventManager_.unlisten(n.mediaElement,"ended"),this.eventManager_.unlisten(n.mediaElement,"ratechange")),this.playheadObservers_&&(this.playheadObservers_.release(),this.playheadObservers_=null),this.bufferPoller_&&(this.bufferPoller_.stop(),this.bufferPoller_=null),!this.parser_){e.next=13;break}return e.next=12,this.parser_.stop();case 12:this.parser_=null;case 13:if(!this.abrManager_){e.next=16;break}return e.next=16,this.abrManager_.stop();case 16:if(!this.streamingEngine_){e.next=20;break}return e.next=19,this.streamingEngine_.destroy();case 19:this.streamingEngine_=null;case 20:if(this.playhead_&&(this.playhead_.release(),this.playhead_=null),!this.mediaSourceEngine_){e.next=25;break}return e.next=24,this.mediaSourceEngine_.destroy();case 24:this.mediaSourceEngine_=null;case 25:if(n.mediaElement&&n.mediaElement.src&&(n.mediaElement.removeAttribute("src"),n.mediaElement.load()),!this.drmEngine_){e.next=30;break}return e.next=29,this.drmEngine_.destroy();case 29:this.drmEngine_=null;case 30:this.activeStreams_.clear(),this.assetUri_=null,this.bufferObserver_=null,this.loadingTextStreams_.clear(),this.manifest_=null,this.stats_=null,this.lastTextFactory_=null,this.switchingPeriods_=!0,this.updateBufferState_();case 39:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"onInitializeMediaSourceEngine_",value:function(){var e=Ns(regeneratorRuntime.mark(function e(t,n){var i,r,a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.asserts.assert(Qn.supportsMediaSource(),"We should not be initializing media source on a platform that does not support media source."),window.asserts.assert(t.mediaElement,"We should have a media element when initializing media source."),window.asserts.assert(t.mediaElement==n.mediaElement,"|has| and |wants| should have the same media element when initializing media source."),window.asserts.assert(null==this.mediaSourceEngine_,"We should not have a media source engine yet."),i=gi.isSupported()?new gi:new yi,r=this.config_.textDisplayFactory,a=new r,this.lastTextFactory_=r,s=this.createMediaSourceEngine(t.mediaElement,i,a),e.next=11,s.open();case 11:this.mediaSourceEngine_=s;case 12:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"onInitializeParser_",value:function(){var e=Ns(regeneratorRuntime.mark(function e(t,n){var i,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.asserts.assert(t.mediaElement,"We should have a media element when initializing the parser."),window.asserts.assert(t.mediaElement==n.mediaElement,"|has| and |wants| should have the same media element when initializing the parser."),window.asserts.assert(this.networkingEngine_,"Need networking engine when initializing the parser."),window.asserts.assert(this.config_,"Need player config when initializing the parser."),t.factory=n.factory,t.mimeType=n.mimeType,t.uri=n.uri,window.asserts.assert(t.uri,"We should have an asset uri when initializing the parsing."),i=t.uri,r=this.networkingEngine_,this.assetUri_=i,!t.factory){e.next=15;break}this.parser_=t.factory(),e.next=18;break;case 15:return e.next=17,rr.create(i,r,this.config_.manifest.retryParameters,t.mimeType);case 17:this.parser_=e.sent;case 18:this.parser_.configure(this.config_.manifest);case 19:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"onParseManifest_",value:function(e,n){var i=this;window.asserts.assert(e.factory==n.factory,"|has| and |wants| should have the same factory when parsing."),window.asserts.assert(e.mimeType==n.mimeType,"|has| and |wants| should have the same mime type when parsing."),window.asserts.assert(e.uri==n.uri,"|has| and |wants| should have the same uri when parsing."),window.asserts.assert(e.uri,"|has| should have a valid uri when parsing."),window.asserts.assert(e.uri==this.assetUri_,"|has.uri| should match the cached asset uri."),window.asserts.assert(this.networkingEngine_,"Need networking engine to parse manifest."),window.asserts.assert(this.config_,"Need player config to parse manifest."),window.asserts.assert(this.parser_,"|this.parser_| should have been set in an earlier step.");var r=e.uri,a=this.networkingEngine_;this.regionTimeline_=new $a,this.regionTimeline_.setListeners(function(e){i.onRegionEvent_("timelineregionadded",e)});var s={networkingEngine:a,filterNewPeriod:function(e){return i.filterNewPeriod_(e)},filterAllPeriods:function(e){return i.filterAllPeriods_(e)},onTimelineRegionAdded:function(e){return i.regionTimeline_.addRegion(e)},onEvent:function(e){return i.dispatchEvent(e)},onError:function(e){return i.onError_(e)}};return new B(Ns(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.parser_.start(r,s);case 2:if(i.manifest_=e.sent,i.dispatchEvent(new E("manifestparsed")),0!=i.manifest_.periods.length){e.next=6;break}throw new M(Hs.severity.CRITICAL,Hs.category.MANIFEST,Hs.code.NO_PERIODS);case 6:t.filterForAVVariants_(i.manifest_.periods);case 7:case"end":return e.stop()}},e)}))(),function(){return Gs.log.info("Aborting parser step..."),i.parser_.stop()})}},{key:"onInitializeDrm_",value:function(){var e=Ns(regeneratorRuntime.mark(function e(t,n){var i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.asserts.assert(t.factory==n.factory,"The load graph should have ensured the factories matched."),window.asserts.assert(t.mimeType==n.mimeType,"The load graph should have ensured the mime types matched."),window.asserts.assert(t.uri==n.uri,"The load graph should have ensured the uris matched"),window.asserts.assert(this.networkingEngine_,"|onInitializeDrm_| should never be called after |destroy|"),window.asserts.assert(this.config_,"|onInitializeDrm_| should never be called after |destroy|"),window.asserts.assert(this.manifest_,"|this.manifest_| should have been set in an earlier step."),this.drmEngine_=this.createDrmEngine({netEngine:this.networkingEngine_,onError:function(e){i.onError_(e)},onKeyStatus:function(e){i.onKeyStatus_(e)},onExpirationUpdated:function(e,t){i.onExpirationUpdated_(e,t)},onEvent:function(e){i.dispatchEvent(e)}}),this.drmEngine_.configure(this.config_.drm),e.next=10,this.drmEngine_.initForPlayback(ea.getAllVariantsFrom(this.manifest_.periods),this.manifest_.offlineSessionIds);case 10:this.filterAllPeriods_(this.manifest_.periods);case 11:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"onLoad_",value:function(){var e=Ns(regeneratorRuntime.mark(function e(n,i){var r,a,s,o,l,u,c,d,h,f,p,m,v,g,y,_,b=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.asserts.assert(n.factory==i.factory,"|has| and |wants| should have the same factory when loading."),window.asserts.assert(n.mimeType==i.mimeType,"|has| and |wants| should have the same mime type when loading."),window.asserts.assert(n.uri==i.uri,"|has| and |wants| should have the same uri when loading."),window.asserts.assert(n.mediaElement,"We should have a media element when loading."),window.asserts.assert(i.startTimeOfLoad,"|wants| should tell us when the load was originally requested"),n.startTime=i.startTime,r=n.mediaElement,a=n.uri,this.assetUri_=a,this.stats_=new Cs,s=function(){return b.updateStateHistory_()},o=function(){return b.onRateChange_()},this.eventManager_.listen(r,"playing",s),this.eventManager_.listen(r,"pause",s),this.eventManager_.listen(r,"ended",s),this.eventManager_.listen(r,"ratechange",o),l=this.config_.abrFactory,this.abrManager_&&this.abrManagerFactory_==l||(this.abrManagerFactory_=l,this.abrManager_=new l,this.abrManager_.configure(this.config_.abr)),this.createTextStreamsForClosedCaptions_(this.manifest_.periods),this.currentAdaptationSetCriteria_=new fa(this.config_.preferredAudioLanguage,this.config_.preferredVariantRole,this.config_.preferredAudioChannelCount),this.currentTextLanguage_=this.config_.preferredTextLanguage,t.applyPlayRange_(this.manifest_.presentationTimeline,this.config_.playRangeStart,this.config_.playRangeEnd),e.next=24,this.drmEngine_.attach(r);case 24:return this.abrManager_.init(function(e,t,n){return b.switch_(e,t,n)}),this.playhead_=this.createPlayhead(n.startTime),this.playheadObservers_=this.createPlayheadObserversForMSE_(),this.playRateController_=new wa({getRate:function(){return n.mediaElement.playbackRate},setRate:function(e){n.mediaElement.playbackRate=e},movePlayhead:function(e){n.mediaElement.currentTime+=e}}),u=Math.max(this.manifest_.minBufferTime,this.config_.streaming.rebufferingGoal),this.startBufferManagement_(u),this.streamingEngine_=this.createStreamingEngine(),this.streamingEngine_.configure(this.config_.streaming),this.chooseCodecsAndFilterManifest_(),this.loadMode_=t.LoadMode.MEDIA_SOURCE,this.dispatchEvent(new E("streaming")),e.next=37,this.streamingEngine_.start();case 37:for(this.config_.streaming.startAtSegmentBoundary&&(c=this.playhead_.getTime(),d=this.adjustStartTime_(c),this.playhead_.setStartTime(d)),h=!0,f=!1,p=void 0,e.prev=41,m=this.manifest_.periods[Symbol.iterator]();!(h=(v=m.next()).done);h=!0)g=v.value,this.filterNewPeriod_(g);e.next=49;break;case 45:e.prev=45,e.t0=e.catch(41),f=!0,p=e.t0;case 49:e.prev=49,e.prev=50,h||null==m.return||m.return();case 52:if(e.prev=52,!f){e.next=55;break}throw p;case 55:return e.finish(52);case 56:return e.finish(49);case 57:this.onTracksChanged_(),this.onAdaptation_(),y=this.getPresentationPeriod_(),_=y.variants.some(function(e){return e.primary}),this.config_.preferredAudioLanguage||_||Gs.log.warning("No preferred audio language set.  We will choose an arbitrary language initially"),this.chooseVariant_(y.variants),this.eventManager_.listenOnce(r,"loadeddata",function(){var e=Date.now()/1e3-i.startTimeOfLoad;b.stats_.setLoadLatency(e)});case 64:case"end":return e.stop()}},e,this,[[41,45,49,57],[50,,52,56]])}));return function(t,n){return e.apply(this,arguments)}}()},{key:"onInitializeSrcEqualsDrm_",value:function(){var e=Ns(regeneratorRuntime.mark(function e(t,n){var i,r,a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=jt.ContentType,window.asserts.assert(this.networkingEngine_,"|onInitializeSrcEqualsDrm_| should never be called after |destroy|"),window.asserts.assert(this.config_,"|onInitializeSrcEqualsDrm_| should never be called after |destroy|"),this.drmEngine_=this.createDrmEngine({netEngine:this.networkingEngine_,onError:function(e){a.onError_(e)},onKeyStatus:function(e){a.onKeyStatus_(e)},onExpirationUpdated:function(e,t){a.onExpirationUpdated_(e,t)},onEvent:function(e){a.dispatchEvent(e)}}),this.drmEngine_.configure(this.config_.drm),r={id:0,language:"und",primary:!1,audio:null,video:{id:0,originalId:null,createSegmentIndex:function(){return Promise.resolve()},findSegmentPosition:function(e){return null},getSegmentReference:function(e){return null},initSegmentReference:null,presentationTimeOffset:0,mimeType:"video/mp4",codecs:"",encrypted:!0,keyId:null,language:"und",label:null,type:i.VIDEO,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,closedCaptions:null},bandwidth:100,drmInfos:[],allowedByApplication:!0,allowedByKeySystem:!0},e.next=8,this.drmEngine_.initForPlayback([r],[]);case 8:return e.next=10,this.drmEngine_.attach(t.mediaElement);case 10:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"onSrcEquals_",value:function(e,n){var i=this;window.asserts.assert(e.mediaElement,"We should have a media element when loading."),window.asserts.assert(n.uri,"|has| should have a valid uri when loading."),window.asserts.assert(n.startTimeOfLoad,"|wants| should tell us when the load was originally requested"),window.asserts.assert(this.video_==e.mediaElement,"The video element should match our media element"),e.uri=n.uri,e.startTime=n.startTime,this.assetUri_=e.uri,this.stats_=new Cs,this.playhead_=new SrcEqualsPlayhead(e.mediaElement),null!=e.startTime&&this.playhead_.setStartTime(e.startTime),this.playRateController_=new wa({getRate:function(){return e.mediaElement.playbackRate},setRate:function(t){e.mediaElement.playbackRate=t},movePlayhead:function(t){e.mediaElement.currentTime+=t}});var r=this.config_.streaming.rebufferingGoal;this.startBufferManagement_(r);var a=function(){return i.updateStateHistory_()};if(this.eventManager_.listen(e.mediaElement,"playing",a),this.eventManager_.listen(e.mediaElement,"pause",a),this.eventManager_.listen(e.mediaElement,"ended",a),this.eventManager_.listenOnce(e.mediaElement,"loadeddata",function(){var e=Date.now()/1e3-n.startTimeOfLoad;i.stats_.setLoadLatency(e)}),this.video_.audioTracks&&(this.eventManager_.listen(this.video_.audioTracks,"addtrack",function(){return i.onTracksChanged_()}),this.eventManager_.listen(this.video_.audioTracks,"removetrack",function(){return i.onTracksChanged_()})),this.video_.textTracks){var s=this.video_.textTracks;this.eventManager_.listen(s,"addtrack",function(){return i.onTracksChanged_()}),this.eventManager_.listen(s,"removetrack",function(){return i.onTracksChanged_()})}e.mediaElement.src=e.uri,this.loadMode_=t.LoadMode.SRC_EQUALS,this.dispatchEvent(new E("streaming"));var o=new PublicPromise;return this.video_.readyState>=HTMLMediaElement.HAVE_CURRENT_DATA?o.resolve():this.video_.error?o.reject(this.videoErrorToShakaError_()):(this.eventManager_.listenOnce(this.video_,"loadeddata",function(){o.resolve()}),this.eventManager_.listenOnce(this.video_,"error",function(){o.reject(i.videoErrorToShakaError_())})),new B(o,function(){var e=new M(Hs.severity.CRITICAL,Hs.category.PLAYER,Hs.code.OPERATION_ABORTED);return o.reject(e),Promise.resolve()})}},{key:"chooseCodecsAndFilterManifest_",value:function(){var e=this.manifest_.periods.reduce(function(e,t){return e.concat(t.variants)},[]);function t(e){var t="";e.video&&(t=Xn.getCodecBase(e.video.codecs));var n="";return e.audio&&(n=Xn.getCodecBase(e.audio.codecs)),t+"-"+n}e=Wi.filterVariantsByAudioChannelCount(e,this.config_.preferredAudioChannelCount);var n=new k,i=!0,r=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value,u=t(l);n.push(u,l)}}catch(e){r=!0,a=e}finally{try{i||null==o.return||o.return()}finally{if(r)throw a}}var c=null,d=1/0;n.forEach(function(e,t){var n=0,i=0,r=!0,a=!1,s=void 0;try{for(var o,l=t[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){n+=o.value.bandwidth||0,++i}}catch(e){a=!0,s=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw s}}var u=n/i;Gs.log.debug("codecs",e,"avg bandwidth",u),u<d&&(c=e,d=u)}),window.asserts.assert(null!=c,"Should have chosen codecs!"),window.asserts.assert(!isNaN(d),"Bandwidth should be a number!");var h=!0,f=!1,p=void 0;try{for(var m,v=this.manifest_.periods[Symbol.iterator]();!(h=(m=v.next()).done);h=!0){var g=m.value;g.variants=g.variants.filter(function(e){return t(e)==c||(Gs.log.debug("Dropping Variant (better codec available)",e),!1)})}}catch(e){f=!0,p=e}finally{try{h||null==v.return||v.return()}finally{if(f)throw p}}}},{key:"createDrmEngine",value:function(e){return new di(e)}},{key:"createNetworkingEngine",value:function(){var e=this;return new oe(function(t,n){e.abrManager_&&e.abrManager_.segmentDownloaded(t,n)})}},{key:"createPlayhead",value:function(e){var t=this;return window.asserts.assert(this.manifest_,"Must have manifest"),window.asserts.assert(this.video_,"Must have video"),new Ga(this.video_,this.manifest_,this.config_.streaming,e,function(){return t.onSeek_()},function(e){return t.dispatchEvent(e)})}},{key:"createPlayheadObserversForMSE_",value:function(){var e=this;window.asserts.assert(this.manifest_,"Must have manifest"),window.asserts.assert(this.regionTimeline_,"Must have region timeline"),window.asserts.assert(this.video_,"Must have video element");var t=new ya(this.manifest_);t.setListeners(function(t){return e.onChangePeriod_()});var n=new Ka(this.regionTimeline_);n.setListeners(function(t,n){e.onRegionEvent_("timelineregionenter",t)},function(t,n){e.onRegionEvent_("timelineregionexit",t)},function(t,n){n||(e.onRegionEvent_("timelineregionenter",t),e.onRegionEvent_("timelineregionexit",t))});var i=new qa(this.video_);return i.manage(t),i.manage(n),i}},{key:"startBufferManagement_",value:function(e){var n=this;window.asserts.assert(!this.bufferObserver_,"No buffering observer should exist before initialization."),window.asserts.assert(!this.bufferPoller_,"No buffer timer should exist before initialization.");var i=e,r=Math.min(t.TYPICAL_BUFFERING_THRESHOLD_,e/2);this.bufferObserver_=new va(i,r),this.bufferObserver_.setState(va.State.STARVING),this.updateBufferState_(),this.bufferPoller_=new j(function(){n.pollBufferState_()}).tickEvery(.25)}},{key:"pollBufferState_",value:function(){var e;switch(window.asserts.assert(this.video_,"Need a media element to update the buffering observer"),window.asserts.assert(this.bufferObserver_,"Need a buffering observer to update"),this.loadMode_){case t.LoadMode.SRC_EQUALS:e=this.isBufferedToEndSrc_();break;case t.LoadMode.MEDIA_SOURCE:e=this.isBufferedToEndMS_();break;default:e=!1}var n=bi.bufferedAheadOf(this.video_.buffered,this.video_.currentTime);this.bufferObserver_.update(n,e)&&this.updateBufferState_()}},{key:"createMediaSourceEngine",value:function(e,t,n){return new Vi(e,t,n)}},{key:"createStreamingEngine",value:function(){var e=this;window.asserts.assert(this.playhead_&&this.abrManager_&&this.mediaSourceEngine_&&this.manifest_,"Must not be destroyed");var t={getPresentationTime:function(){return e.playhead_.getTime()},getBandwidthEstimate:function(){return e.abrManager_.getBandwidthEstimate()},mediaSourceEngine:this.mediaSourceEngine_,netEngine:this.networkingEngine_,onChooseStreams:function(t){return e.onChooseStreams_(t)},onCanSwitch:function(){return e.canSwitch_()},onError:function(t){return e.onError_(t)},onEvent:function(t){return e.dispatchEvent(t)},onManifestUpdate:function(){return e.onManifestUpdate_()},onSegmentAppended:function(){return e.onSegmentAppended_()}};return new ds(this.manifest_,t)}},{key:"configure",value:function(e,t){window.asserts.assert(this.config_,"Config must not be null!"),window.asserts.assert("object"==Os(e)||2==arguments.length,"String configs should have values!"),2==arguments.length&&"string"==typeof e&&(e=Un.convertToConfigObject(e,t)),window.asserts.assert("object"==Os(e),"Should be an object!");var n=Zi.mergeConfigObjects(this.config_,e,this.defaultConfig_());return this.applyConfig_(),n}},{key:"applyConfig_",value:function(){if(this.parser_&&this.parser_.configure(this.config_.manifest),this.drmEngine_&&this.drmEngine_.configure(this.config_.drm),this.streamingEngine_){this.streamingEngine_.configure(this.config_.streaming);try{var e=!0,t=!1,n=void 0;try{for(var i,r=this.manifest_.periods[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var a=i.value;this.filterNewPeriod_(a)}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}catch(e){this.onError_(e)}var s=this.streamingEngine_.getBufferingAudio(),o=this.streamingEngine_.getBufferingVideo(),l=this.getPresentationPeriod_(),u=Wi.getVariantByStreams(s,o,l.variants);this.abrManager_&&u&&u.allowedByApplication&&u.allowedByKeySystem?this.chooseVariant_(l.variants):(Gs.log.debug("Choosing new streams after changing configuration"),this.chooseStreamsAndSwitch_(l))}if(this.mediaSourceEngine_){var c=this.config_.textDisplayFactory;if(this.lastTextFactory_!=c){var d=new c;this.mediaSourceEngine_.setTextDisplayer(d),this.lastTextFactory_=c,this.streamingEngine_&&this.streamingEngine_.reloadTextStream()}}this.abrManager_&&(this.abrManager_.configure(this.config_.abr),this.config_.abr.enabled&&!this.switchingPeriods_?this.abrManager_.enable():this.abrManager_.disable(),this.onAbrStatusChanged_())}},{key:"getConfiguration",value:function(){window.asserts.assert(this.config_,"Config must not be null!");var e=this.defaultConfig_();return Zi.mergeConfigObjects(e,this.config_,this.defaultConfig_()),e}},{key:"getSharedConfiguration",value:function(){return window.asserts.assert(this.config_,"Cannot call getSharedConfiguration after call destroy!"),this.config_}},{key:"resetConfiguration",value:function(){for(var e in window.asserts.assert(this.config_,"Cannot be destroyed"),this.config_)delete this.config_[e];Zi.mergeConfigObjects(this.config_,this.defaultConfig_(),this.defaultConfig_()),this.applyConfig_()}},{key:"getLoadMode",value:function(){return this.loadMode_}},{key:"getMediaElement",value:function(){return this.video_}},{key:"getNetworkingEngine",value:function(){return this.networkingEngine_}},{key:"getAssetUri",value:function(){return this.assetUri_}},{key:"getManifestUri",value:function(){return Ds.deprecateFeature(2,6,"getManifestUri",'Please use "getAssetUri" instead.'),this.getAssetUri()}},{key:"isLive",value:function(){return this.manifest_?this.manifest_.presentationTimeline.isLive():!(!this.video_||!this.video_.src)&&this.video_.duration==1/0}},{key:"isInProgress",value:function(){return!!this.manifest_&&this.manifest_.presentationTimeline.isInProgress()}},{key:"isAudioOnly",value:function(){if(this.manifest_){if(!this.manifest_.periods.length)return!1;var e=this.manifest_.periods[0].variants;return!!e.length&&!e[0].video}return!(!this.video_||!this.video_.src)&&(this.video_.videoTracks?0==this.video_.videoTracks.length:0==this.video_.videoHeight)}},{key:"seekRange",value:function(){if(this.manifest_){var e=this.manifest_.presentationTimeline;return{start:e.getSeekRangeStart(),end:e.getSeekRangeEnd()}}if(this.video_&&this.video_.src){var t=this.video_.seekable;if(t.length)return{start:t.start(0),end:t.end(t.length-1)}}return{start:0,end:0}}},{key:"keySystem",value:function(){return this.drmEngine_?this.drmEngine_.keySystem():""}},{key:"drmInfo",value:function(){return this.drmEngine_?this.drmEngine_.getDrmInfo():null}},{key:"getExpiration",value:function(){return this.drmEngine_?this.drmEngine_.getExpiration():1/0}},{key:"isBuffering",value:function(){var e=va.State;return!!this.bufferObserver_&&this.bufferObserver_.getState()==e.STARVING}},{key:"getPlaybackRate",value:function(){return this.playRateController_?this.playRateController_.getActiveRate():0}},{key:"trickPlay",value:function(e){window.asserts.assert(0!=e,"Should never set a trick play rate of 0!"),0!=e?(this.video_.paused&&this.video_.play(),this.playRateController_.set(e),this.loadMode_==t.LoadMode.MEDIA_SOURCE&&this.streamingEngine_.setTrickPlay(Math.abs(e)>1)):Gs.log.alwaysWarn("A trick play rate of 0 is unsupported!")}},{key:"cancelTrickPlay",value:function(){this.loadMode_==t.LoadMode.SRC_EQUALS&&this.playRateController_.set(1),this.loadMode_==t.LoadMode.MEDIA_SOURCE&&(this.playRateController_.set(1),this.streamingEngine_.setTrickPlay(!1))}},{key:"getVariantTracks",value:function(){if(this.manifest_&&this.playhead_){var e=this.getPresentationVariant_(),t=[],n=!0,i=!1,r=void 0;try{for(var a,s=this.getSelectableVariants_()[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value,l=Wi.variantToTrack(o);l.active=o==e,t.push(l)}}catch(e){i=!0,r=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}return t}return this.video_&&this.video_.audioTracks?Array.from(this.video_.audioTracks).map(function(e){return Wi.html5AudioTrackToTrack(e)}):[]}},{key:"getTextTracks",value:function(){if(this.manifest_&&this.playhead_){var e=this.getPresentationText_(),t=[],n=!0,i=!1,r=void 0;try{for(var a,s=this.getSelectableText_()[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value,l=Wi.textStreamToTrack(o);l.active=o==e,t.push(l)}}catch(e){i=!0,r=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}return t}return this.video_&&this.video_.src&&this.video_.textTracks?Array.from(this.video_.textTracks).map(function(e){return Wi.html5TextTrackToTrack(e)}):[]}},{key:"selectTextTrack",value:function(e){if(this.manifest_&&this.streamingEngine_){var t=this.getPresentationPeriod_(),n=t.textStreams.find(function(t){return t.id==e.id});if(!n)return void Gs.log.error("No stream with id",e.id);this.addTextStreamToSwitchHistory_(t,n,!1),this.switchTextStream_(n),this.currentTextLanguage_=n.language}else if(this.video_&&this.video_.src&&this.video_.textTracks){for(var i=0,r=Array.from(this.video_.textTracks);i<r.length;i++){var a=r[i];Wi.html5TrackId(a)==e.id?a.mode=this.isTextVisible_?"showing":"hidden":a.mode="disabled"}this.onTextChanged_()}}},{key:"selectEmbeddedTextTrack",value:function(){Ds.deprecateFeature(2,6,"selectEmbeddedTextTrack",["If closed captions are signaled in the manifest, a text stream will","be created to represent them. Please use SelectTextTrack."].join(" "));var e=this.getTextTracks().filter(function(e){return e.mimeType==Xn.CLOSED_CAPTION_MIMETYPE});e.length>0?this.selectTextTrack(e[0]):Gs.log.warning("Unable to find the text track embedded in the video.")}},{key:"usingEmbeddedTextTrack",value:function(){Ds.deprecateFeature(2,6,"usingEmbeddedTextTrack",["If closed captions are signaled in the manifest, a text stream will","be created to represent them. There should be no reason to know if","the player is playing embedded text."].join(" "));var e=this.getTextTracks().filter(function(e){return e.active})[0];return!!e&&e.mimeType==Xn.CLOSED_CAPTION_MIMETYPE}},{key:"selectVariantTrack",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(this.manifest_&&this.streamingEngine_){var i=this.getPresentationPeriod_();this.config_.abr.enabled&&Gs.log.alwaysWarn("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var r=i.variants.find(function(t){return t.id==e.id});if(!r)return void Gs.log.error("No variant with id",e.id);if(!Wi.isPlayable(r))return void Gs.log.error("Unable to switch to restricted track",e.id);this.addVariantToSwitchHistory_(i,r,!1),this.switchVariant_(r,t,n),this.currentAdaptationSetCriteria_=new ha(r),this.chooseVariant_(i.variants)}else if(this.video_&&this.video_.audioTracks){for(var a=0,s=Array.from(this.video_.audioTracks);a<s.length;a++){var o=s[a];Wi.html5TrackId(o)==e.id&&(o.enabled=!0)}this.onVariantChanged_()}}},{key:"getAudioLanguagesAndRoles",value:function(){return t.getLanguageAndRolesFrom_(this.getVariantTracks())}},{key:"getTextLanguagesAndRoles",value:function(){return t.getLanguageAndRolesFrom_(this.getTextTracks())}},{key:"getAudioLanguages",value:function(){return Array.from(t.getLanguagesFrom_(this.getVariantTracks()))}},{key:"getTextLanguages",value:function(){return Array.from(t.getLanguagesFrom_(this.getTextTracks()))}},{key:"selectAudioLanguage",value:function(e,t){if(this.manifest_&&this.playhead_){var n=this.getPresentationPeriod_();this.currentAdaptationSetCriteria_=new fa(e,t||"",0),this.chooseStreamsAndSwitch_(n)}else if(this.video_&&this.video_.audioTracks){for(var i=0,r=Array.from(this.video_.audioTracks);i<r.length;i++){var a=r[i];a.language==e&&(a.enabled=!0)}this.onVariantChanged_()}}},{key:"selectTextLanguage",value:function(e,t){if(this.manifest_&&this.playhead_){var n=this.getPresentationPeriod_();this.currentTextLanguage_=e,this.currentTextRole_=t||"",this.chooseStreamsAndSwitch_(n)}else{var i=this.getTextTracks().filter(function(t){return t.language==e})[0];i&&this.selectTextTrack(i)}}},{key:"isTextTrackVisible",value:function(){var e=this.isTextVisible_;if(this.manifest_){var t=this.mediaSourceEngine_.getTextDisplayer().isTextVisible();return window.asserts.assert(t==e,"text visibility has fallen out of sync"),t}return this.video_&&this.video_.src&&this.video_.textTracks?Array.from(this.video_.textTracks).some(function(e){return"showing"==e.mode}):e}},{key:"setTextTrackVisibility",value:function(){var e=Ns(regeneratorRuntime.mark(function e(n){var i,r,a,s,o,l,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isTextVisible_!=(i=n)){e.next=4;break}return e.abrupt("return");case 4:if(this.isTextVisible_=i,this.loadMode_!=t.LoadMode.MEDIA_SOURCE){e.next=19;break}if(this.mediaSourceEngine_.getTextDisplayer().setTextVisibility(n),this.config_.streaming.alwaysStreamText){e.next=17;break}if(!n){e.next=16;break}if(r=this.getPresentationPeriod_(),!((a=Wi.filterStreamsByLanguageAndRole(r.textStreams,this.currentTextLanguage_,this.currentTextRole_)).length>0)){e.next=14;break}return e.next=14,this.streamingEngine_.loadNewTextStream(a[0]);case 14:e.next=17;break;case 16:this.streamingEngine_.unloadTextStream();case 17:e.next=20;break;case 19:if(this.video_&&this.video_.src&&this.video_.textTracks)for(s=Array.from(this.video_.textTracks),o=0,l=s;o<l.length;o++)"disabled"!=(u=l[o]).mode&&(u.mode=n?"showing":"hidden");case 20:this.onTextTrackVisibility_();case 21:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getPlayheadTimeAsDate",value:function(){if(!this.isLive())return Gs.log.warning("getPlayheadTimeAsDate is for live streams!"),null;if(this.manifest_){var e=this.manifest_.presentationTimeline.getPresentationStartTime(),t=this.video_.currentTime;return new Date(1e3*(e+t))}if(this.video_&&this.video_.getStartDate){var n=this.video_.getStartDate();return isNaN(n.getTime())?(Gs.log.warning("EXT-X-PROGRAM-DATETIME required to get playhead time as Date!"),null):new Date(n.getTime()+1e3*this.video_.currentTime)}return Gs.log.warning("No way to get playhead time as Date!"),null}},{key:"getPresentationStartTimeAsDate",value:function(){if(!this.isLive())return Gs.log.warning("getPresentationStartTimeAsDate is for live streams!"),null;if(this.manifest_){var e=this.manifest_.presentationTimeline.getPresentationStartTime();return new Date(1e3*e)}if(this.video_&&this.video_.getStartDate){var t=this.video_.getStartDate();return isNaN(t.getTime())?(Gs.log.warning("EXT-X-PROGRAM-DATETIME required to get presentation start time as Date!"),null):t}return Gs.log.warning("No way to get presentation start time as Date!"),null}},{key:"getBufferedInfo",value:function(){var e={total:[],audio:[],video:[],text:[]};if(this.loadMode_==t.LoadMode.SRC_EQUALS){var n=n;e.total=n.getBufferedInfo(this.video_.buffered)}return this.loadMode_==t.LoadMode.MEDIA_SOURCE&&this.mediaSourceEngine_.getBufferedInfo(e),e}},{key:"getStats",value:function(){if(!(this.loadMode_==t.LoadMode.MEDIA_SOURCE||this.loadMode_==t.LoadMode.SRC_EQUALS))return Cs.getEmptyBlob();this.updateStateHistory_(),window.asserts.assert(this.video_,"If we have stats, we should have video_");var e=this.video_;if(e.getVideoPlaybackQuality){var n=e.getVideoPlaybackQuality();this.stats_.setDroppedFrames(Number(n.droppedVideoFrames),Number(n.totalVideoFrames))}if(this.loadMode_==t.LoadMode.MEDIA_SOURCE){var i=this.getPresentationVariant_();i&&this.stats_.setVariantBandwidth(i.bandwidth),i&&i.video&&this.stats_.setResolution(i.video.width||NaN,i.video.height||NaN);var r=this.abrManager_.getBandwidthEstimate();this.stats_.setBandwidthEstimate(r)}return this.stats_.getBlob()}},{key:"addTextTrack",value:function(){var e=Ns(regeneratorRuntime.mark(function e(n,i,r,a,s,o){var l,u,c,d,h,f,p,m,v;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.loadMode_!=t.LoadMode.SRC_EQUALS){e.next=3;break}throw Gs.log.error("Cannot add text when loaded with src="),new M("State error!");case 3:if(this.loadMode_==t.LoadMode.MEDIA_SOURCE){e.next=6;break}throw Gs.log.error("Must call load() and wait for it to resolve before adding text tracks."),new M("State error!");case 6:if(l=this.getPresentationPeriod_(),u=jt.ContentType,c=this.manifest_.periods.indexOf(l),h=(d=c+1)>=this.manifest_.periods.length?this.manifest_.presentationTimeline.getDuration():this.manifest_.periods[d].startTime,(f=h-l.startTime)!=1/0){e.next=14;break}throw new M(Hs.severity.RECOVERABLE,Hs.category.MANIFEST,Hs.code.CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM);case 14:return p=new Dr(1,0,f,function(){return[n]},0,null),m={id:this.nextExternalStreamId_++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},findSegmentPosition:function(e){return 1},getSegmentReference:function(e){return 1==e?p:null},initSegmentReference:null,presentationTimeOffset:0,mimeType:a,codecs:s||"",kind:r,encrypted:!1,keyId:null,language:i,label:o||null,type:u.TEXT,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,closedCaptions:null},this.loadingTextStreams_.add(m),l.textStreams.push(m),e.next=20,this.streamingEngine_.loadNewTextStream(m);case 20:return window.asserts.assert(l,"The period should still be non-null here."),(v=this.streamingEngine_.getBufferingText())&&this.activeStreams_.useText(l,v),this.loadingTextStreams_.delete(m),Gs.log.debug("Choosing new streams after adding a text stream"),this.chooseStreamsAndSwitch_(l),this.onTracksChanged_(),e.abrupt("return",Wi.textStreamToTrack(m));case 28:case"end":return e.stop()}},e,this)}));return function(t,n,i,r,a,s){return e.apply(this,arguments)}}()},{key:"setMaxHardwareResolution",value:function(e,t){this.maxHwRes_.width=e,this.maxHwRes_.height=t}},{key:"retryStreaming",value:function(){return this.loadMode_==t.LoadMode.MEDIA_SOURCE&&this.streamingEngine_.retry()}},{key:"getManifest",value:function(){return this.manifest_}},{key:"getManifestParserFactory",value:function(){return this.parser_?this.parser_.constructor:null}},{key:"addVariantToSwitchHistory_",value:function(e,t,n){this.activeStreams_.useVariant(e,t),this.stats_.getSwitchHistory().updateCurrentVariant(t,n)}},{key:"addTextStreamToSwitchHistory_",value:function(e,t,n){this.activeStreams_.useText(e,t),this.stats_.getSwitchHistory().updateCurrentText(t,n)}},{key:"defaultConfig_",value:function(){var e=this,t=Zi.createDefault();t.streaming.failureCallback=function(t){e.defaultStreamingFailureCallback_(t)};var n=this;return t.textDisplayFactory=function(){return new bs(n.video_)},t}},{key:"defaultStreamingFailureCallback_",value:function(e){var t=[Hs.code.BAD_HTTP_STATUS,Hs.code.HTTP_ERROR,Hs.code.TIMEOUT];this.isLive()&&t.includes(e.code)&&(e.severity=Hs.severity.RECOVERABLE,Gs.log.warning("Live streaming error.  Retrying automatically..."),this.retryStreaming())}},{key:"createTextStreamsForClosedCaptions_",value:function(e){var t=jt.ContentType,n=jt.TextStreamKind,i=!0,r=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value,u=new Map,c=!0,d=!1,h=void 0;try{for(var f,p=l.variants[Symbol.iterator]();!(c=(f=p.next()).done);c=!0){var m=f.value;if(m.video&&m.video.closedCaptions){var v=m.video,g=!0,y=!1,_=void 0;try{for(var b,w=v.closedCaptions.keys()[Symbol.iterator]();!(g=(b=w.next()).done);g=!0){var E=b.value;if(!u.has(E)){var S={id:this.nextExternalStreamId_++,originalId:E,createSegmentIndex:function(){return Promise.resolve()},findSegmentPosition:function(e){return null},getSegmentReference:function(e){return null},initSegmentReference:null,presentationTimeOffset:0,mimeType:Xn.CLOSED_CAPTION_MIMETYPE,codecs:"",kind:n.CLOSED_CAPTION,encrypted:!1,keyId:null,language:v.closedCaptions.get(E),label:null,type:t.TEXT,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:v.roles,channelsCount:null,closedCaptions:null};u.set(E,S)}}}catch(e){y=!0,_=e}finally{try{g||null==w.return||w.return()}finally{if(y)throw _}}}}}catch(e){d=!0,h=e}finally{try{c||null==p.return||p.return()}finally{if(d)throw h}}var T=!0,k=!1,C=void 0;try{for(var I,A=u.values()[Symbol.iterator]();!(T=(I=A.next()).done);T=!0){var x=I.value;l.textStreams.push(x)}}catch(e){k=!0,C=e}finally{try{T||null==A.return||A.return()}finally{if(k)throw C}}}}catch(e){r=!0,a=e}finally{try{i||null==o.return||o.return()}finally{if(r)throw a}}}},{key:"filterAllPeriods_",value:function(e){window.asserts.assert(this.video_,"Must not be destroyed");var t=this.streamingEngine_?this.streamingEngine_.getBufferingAudio():null,n=this.streamingEngine_?this.streamingEngine_.getBufferingVideo():null,i=!0,r=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;Wi.filterNewPeriod(this.drmEngine_,t,n,l)}}catch(e){r=!0,a=e}finally{try{i||null==o.return||o.return()}finally{if(r)throw a}}var u=m.count(e,function(e){return e.variants.some(Wi.isPlayable)});if(0==u)throw new M(Hs.severity.CRITICAL,Hs.category.MANIFEST,Hs.code.CONTENT_UNSUPPORTED_BY_BROWSER);if(u<e.length)throw new M(Hs.severity.CRITICAL,Hs.category.MANIFEST,Hs.code.UNPLAYABLE_PERIOD);var c=!0,d=!1,h=void 0;try{for(var f,p=e[Symbol.iterator]();!(c=(f=p.next()).done);c=!0){var v=f.value;Wi.applyRestrictions(v.variants,this.config_.restrictions,this.maxHwRes_)&&this.streamingEngine_&&this.getPresentationPeriod_()==v&&this.onTracksChanged_(),this.checkRestrictedVariants_(v.variants)}}catch(e){d=!0,h=e}finally{try{c||null==p.return||p.return()}finally{if(d)throw h}}}},{key:"filterNewPeriod_",value:function(e){window.asserts.assert(this.video_,"Must not be destroyed");var t=this.streamingEngine_?this.streamingEngine_.getBufferingAudio():null,n=this.streamingEngine_?this.streamingEngine_.getBufferingVideo():null;Wi.filterNewPeriod(this.drmEngine_,t,n,e);var i=e.variants;if(!i.some(Wi.isPlayable))throw new M(Hs.severity.CRITICAL,Hs.category.MANIFEST,Hs.code.UNPLAYABLE_PERIOD);this.checkRestrictedVariants_(e.variants),Wi.applyRestrictions(i,this.config_.restrictions,this.maxHwRes_)&&this.streamingEngine_&&this.getPresentationPeriod_()==e&&this.onTracksChanged_();var r=this.drmEngine_?this.drmEngine_.getDrmInfo():null;if(r){var a=!0,s=!1,o=void 0;try{for(var l,u=i[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value,d=!0,h=!1,f=void 0;try{for(var p,m=c.drmInfos[Symbol.iterator]();!(d=(p=m.next()).done);d=!0){var v=p.value;if(v.keySystem==r.keySystem){var g=!0,y=!1,_=void 0;try{for(var b,w=(v.initData||[])[Symbol.iterator]();!(g=(b=w.next()).done);g=!0){var E=b.value;this.drmEngine_.newInitData(E.initDataType,E.initData)}}catch(e){y=!0,_=e}finally{try{g||null==w.return||w.return()}finally{if(y)throw _}}}}}catch(e){h=!0,f=e}finally{try{d||null==m.return||m.return()}finally{if(h)throw f}}}}catch(e){s=!0,o=e}finally{try{a||null==u.return||u.return()}finally{if(s)throw o}}}}},{key:"switchVariant_",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.switchingPeriods_?(this.deferredVariant_=e,this.deferredVariantClearBuffer_=t,this.deferredVariantClearBufferSafeMargin_=n):(this.streamingEngine_.switchVariant(e,t,n),this.onVariantChanged_())}},{key:"switchTextStream_",value:function(e){this.switchingPeriods_?this.deferredTextStream_=e:(this.streamingEngine_.switchTextStream(e),this.onTextChanged_())}},{key:"assertCorrectActiveStreams_",value:function(){if(this.streamingEngine_&&this.manifest_&&js.DEBUG){var e=this.streamingEngine_.getBufferingPeriod(),t=this.getPresentationPeriod_();if(null!=e&&e==t){var n=this.streamingEngine_.getBufferingAudio(),i=this.streamingEngine_.getBufferingVideo(),r=this.streamingEngine_.getBufferingText(),a=this.deferredVariant_?this.deferredVariant_.audio:n,s=this.deferredVariant_?this.deferredVariant_.video:i,o=this.deferredTextStream_||r,l=this.activeStreams_.getVariant(t),u=this.activeStreams_.getText(t);window.asserts.assert(l.audio==a,"Inconsistent active audio stream"),window.asserts.assert(l.video==s,"Inconsistent active video stream"),window.asserts.assert(null==o||u==o,"Inconsistent active text stream")}}}},{key:"adjustStartTime_",value:function(e){var t=this.streamingEngine_.getBufferingAudio(),n=this.streamingEngine_.getBufferingVideo(),i=this.getPresentationPeriod_();function r(e,t){if(!e)return null;var n=e.findSegmentPosition(t-i.startTime);if(null==n)return null;var r=e.getSegmentReference(n);if(!r)return null;var a=r.startTime+i.startTime;return window.asserts.assert(a<=t,"Segment should start before time"),a}var a=r(t,e),s=r(n,e);return null!=s&&null!=a?Math.max(s,a):null!=s?s:null!=a?a:e}},{key:"updateBufferState_",value:function(){var e=this.isBuffering();this.stats_&&this.bufferObserver_&&this.playhead_&&(this.playRateController_.setBuffering(e),this.updateStateHistory_());var t=new E("buffering",{buffering:e});this.dispatchEvent(t)}},{key:"onChangePeriod_",value:function(){this.onTracksChanged_()}},{key:"onRateChange_",value:function(){var e=this.video_.playbackRate;0!=e&&this.playRateController_.set(e)}},{key:"updateStateHistory_",value:function(){if(this.stats_&&this.bufferObserver_){var e=va.State,t=this.stats_.getStateHistory();this.bufferObserver_.getState()==e.STARVING?t.update("buffering"):this.video_.paused?t.update("paused"):this.video_.ended?t.update("ended"):t.update("playing")}}},{key:"onSeek_",value:function(){this.playheadObservers_&&this.playheadObservers_.notifyOfSeek(),this.streamingEngine_&&this.streamingEngine_.seeked()}},{key:"chooseVariant_",value:function(e){window.asserts.assert(this.config_,"Must not be destroyed");try{this.checkRestrictedVariants_(e)}catch(e){return this.onError_(e),null}window.asserts.assert(e.length,"Should have thrown for no Variants.");var t=e.filter(function(e){return Wi.isPlayable(e)}),n=this.currentAdaptationSetCriteria_.create(t);return this.abrManager_.setVariants(Array.from(n.values())),this.abrManager_.chooseVariant()}},{key:"chooseTextStream_",value:function(e){return Wi.filterStreamsByLanguageAndRole(e,this.currentTextLanguage_,this.currentTextRole_)[0]||null}},{key:"chooseStreamsAndSwitch_",value:function(e){window.asserts.assert(this.config_,"Must not be destroyed");var t=this.chooseVariant_(e.variants);t&&(this.addVariantToSwitchHistory_(e,t,!0),this.switchVariant_(t,!0));var n=this.chooseTextStream_(e.textStreams);n&&this.shouldStreamText_()&&(this.addTextStreamToSwitchHistory_(e,n,!0),this.switchTextStream_(n)),this.onAdaptation_()}},{key:"onChooseStreams_",value:function(e){Gs.log.debug("onChooseStreams_",e),window.asserts.assert(this.config_,"Must not be destroyed");try{Gs.log.v2("onChooseStreams_, choosing variant from ",e.variants),Gs.log.v2("onChooseStreams_, choosing text from ",e.textStreams);var t=this.chooseStreams_(e);return Gs.log.v2("onChooseStreams_, chose variant ",t.variant),Gs.log.v2("onChooseStreams_, chose text ",t.text),t}catch(e){return this.onError_(e),{variant:null,text:null}}}},{key:"chooseStreams_",value:function(e){this.switchingPeriods_=!0,this.abrManager_.disable(),this.onAbrStatusChanged_(),Gs.log.debug("Choosing new streams after period changed");var t=this.chooseVariant_(e.variants),n=this.chooseTextStream_(e.textStreams);this.deferredVariant_&&(e.variants.includes(this.deferredVariant_)&&(t=this.deferredVariant_),this.deferredVariant_=null),this.deferredTextStream_&&(e.textStreams.includes(this.deferredTextStream_)&&(n=this.deferredTextStream_),this.deferredTextStream_=null),t&&this.addVariantToSwitchHistory_(e,t,!0),n&&this.addTextStreamToSwitchHistory_(e,n,!0);var i=!this.streamingEngine_.getBufferingPeriod(),r=t?t.audio:null;return i&&n&&(r&&this.shouldShowText_(r,n)&&(this.isTextVisible_=!0),this.isTextVisible_&&(this.mediaSourceEngine_.getTextDisplayer().setTextVisibility(!0),window.asserts.assert(this.shouldStreamText_(),"Should be streaming text")),this.onTextTrackVisibility_()),this.shouldStreamText_()?{variant:t,text:n}:{variant:t,text:null}}},{key:"shouldShowText_",value:function(e,t){var n=Wt.normalize(this.config_.preferredTextLanguage),i=Wt.normalize(e.language),r=Wt.normalize(t.language);return Wt.areLanguageCompatible(r,n)&&!Wt.areLanguageCompatible(i,r)}},{key:"canSwitch_",value:function(){Gs.log.debug("canSwitch_"),window.asserts.assert(this.config_,"Must not be destroyed"),this.switchingPeriods_=!1,this.config_.abr.enabled&&(this.abrManager_.enable(),this.onAbrStatusChanged_()),this.deferredVariant_&&(this.streamingEngine_.switchVariant(this.deferredVariant_,this.deferredVariantClearBuffer_,this.deferredVariantClearBufferSafeMargin_),this.onVariantChanged_(),this.deferredVariant_=null),this.deferredTextStream_&&(this.streamingEngine_.switchTextStream(this.deferredTextStream_),this.onTextChanged_(),this.deferredTextStream_=null)}},{key:"onManifestUpdate_",value:function(){this.parser_&&this.parser_.update&&this.parser_.update()}},{key:"onSegmentAppended_",value:function(){this.playhead_&&this.playhead_.notifyOfBufferingChange()}},{key:"switch_",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Gs.log.debug("switch_"),window.asserts.assert(this.config_.abr.enabled,"AbrManager should not call switch while disabled!"),window.asserts.assert(!this.switchingPeriods_,"AbrManager should not call switch while transitioning between Periods!"),window.asserts.assert(this.manifest_,"We need a manifest to switch variants.");var i=this.findPeriodWithVariant_(e);window.asserts.assert(i,"A period should contain the variant."),this.addVariantToSwitchHistory_(i,e,!0),this.streamingEngine_&&(this.streamingEngine_.switchVariant(e,t,n),this.onAdaptation_())}},{key:"onAdaptation_",value:function(){this.delayDispatchEvent_(new E("adaptation"))}},{key:"onTracksChanged_",value:function(){this.delayDispatchEvent_(new E("trackschanged"))}},{key:"onVariantChanged_",value:function(){this.delayDispatchEvent_(new E("variantchanged"))}},{key:"onTextChanged_",value:function(){this.delayDispatchEvent_(new E("textchanged"))}},{key:"onTextTrackVisibility_",value:function(){this.delayDispatchEvent_(new E("texttrackvisibility"))}},{key:"onAbrStatusChanged_",value:function(){this.delayDispatchEvent_(new E("abrstatuschanged",{newStatus:this.config_.abr.enabled}))}},{key:"onError_",value:function(e){if(window.asserts.assert(e instanceof M,"Wrong error type!"),this.loadMode_!=t.LoadMode.DESTROYED){var n=new E("error",{detail:e});this.dispatchEvent(n),n.defaultPrevented&&(e.handled=!0)}}},{key:"onRegionEvent_",value:function(e,t){var n={schemeIdUri:t.schemeIdUri,value:t.value,startTime:t.startTime,endTime:t.endTime,id:t.id,eventElement:t.eventElement};this.dispatchEvent(new E(e,{detail:n}))}},{key:"videoErrorToShakaError_",value:function(){if(window.asserts.assert(this.video_.error,"Video error expected, but missing!"),!this.video_.error)return null;var e=this.video_.error.code;if(1==e)return null;var t=this.video_.error.msExtendedCode;t&&(t<0&&(t+=Math.pow(2,32)),t=t.toString(16));var n=this.video_.error.message;return new M(Hs.severity.CRITICAL,Hs.category.MEDIA,Hs.code.VIDEO_ERROR,e,t,n)}},{key:"onVideoError_",value:function(e){var t=this.videoErrorToShakaError_();t&&this.onError_(t)}},{key:"onKeyStatus_",value:function(e){if(this.streamingEngine_){var n=t.restrictedStatuses_,i=this.getPresentationPeriod_(),r=!1,a=Object.keys(e);0==a.length&&Gs.log.warning("Got a key status event without any key statuses, so we don't know the real key statuses. If we don't have all the keys, you'll need to set restrictions so we don't select those tracks.");var s=1==a.length&&"00"==a[0];if(s&&Gs.log.warning("Got a synthetic key status event, so we don't know the real key statuses. If we don't have all the keys, you'll need to set restrictions so we don't select those tracks."),a.length){var o=!0,l=!1,u=void 0;try{for(var c,d=i.variants[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){var h=c.value,f=Wi.getVariantStreams(h),p=!0,m=!1,v=void 0;try{for(var g,y=f[Symbol.iterator]();!(p=(g=y.next()).done);p=!0){var _=g.value,b=h.allowedByKeySystem;if(_.keyId){var w=e[s?"00":_.keyId];h.allowedByKeySystem=!!w&&!n.includes(w)}b!=h.allowedByKeySystem&&(r=!0)}}catch(e){m=!0,v=e}finally{try{p||null==y.return||y.return()}finally{if(m)throw v}}}}catch(e){l=!0,u=e}finally{try{o||null==d.return||d.return()}finally{if(l)throw u}}}var E=this.streamingEngine_.getBufferingAudio(),S=this.streamingEngine_.getBufferingVideo(),T=Wi.getVariantByStreams(E,S,i.variants);T&&!T.allowedByKeySystem&&(Gs.log.debug("Choosing new streams after key status changed"),this.chooseStreamsAndSwitch_(i)),r&&(this.onTracksChanged_(),this.chooseVariant_(i.variants))}}},{key:"onExpirationUpdated_",value:function(e,t){this.parser_&&this.parser_.onExpirationUpdated&&this.parser_.onExpirationUpdated(e,t);var n=new E("expirationupdated");this.dispatchEvent(n)}},{key:"shouldStreamText_",value:function(){return this.config_.streaming.alwaysStreamText||this.isTextTrackVisible()}},{key:"checkRestrictedVariants_",value:function(e){var n=t.restrictedStatuses_,i=this.drmEngine_?this.drmEngine_.getKeyStatuses():{},r=Object.keys(i),a=r.length&&"00"==r[0],s=!1,o=!1,l=[],u=[],c=!0,d=!1,h=void 0;try{for(var f,p=e[Symbol.iterator]();!(c=(f=p.next()).done);c=!0){var m=f.value,v=[];m.audio&&v.push(m.audio),m.video&&v.push(m.video);for(var g=0,y=v;g<y.length;g++){var _=y[g];if(_.keyId){var b=i[a?"00":_.keyId];b?n.includes(b)&&(u.includes(b)||u.push(b)):l.includes(_.keyId)||l.push(_.keyId)}}m.allowedByApplication?m.allowedByKeySystem&&(s=!0):o=!0}}catch(e){d=!0,h=e}finally{try{c||null==p.return||p.return()}finally{if(d)throw h}}if(!s){var w={hasAppRestrictions:o,missingKeys:l,restrictedKeyStatuses:u};throw new M(Hs.severity.CRITICAL,Hs.category.MANIFEST,Hs.code.RESTRICTIONS_CANNOT_BE_MET,w)}}},{key:"delayDispatchEvent_",value:function(){var e=Ns(regeneratorRuntime.mark(function e(n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve();case 2:this.loadMode_!=t.LoadMode.DESTROYED&&this.dispatchEvent(n);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getSelectableVariants_",value:function(){var e=this.getPresentationPeriod_();return null==e?[]:(this.assertCorrectActiveStreams_(),e.variants.filter(function(e){return Wi.isPlayable(e)}))}},{key:"getSelectableText_",value:function(){var e=this,t=this.getPresentationPeriod_();return null==t?[]:(this.assertCorrectActiveStreams_(),t.textStreams.filter(function(t){return!e.loadingTextStreams_.has(t)}))}},{key:"getPresentationPeriod_",value:function(){window.asserts.assert(this.manifest_&&this.playhead_,"Only ask for the presentation period when loaded with media source.");var e=this.playhead_.getTime(),t=null,n=!0,i=!1,r=void 0;try{for(var a,s=this.manifest_.periods[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;o.startTime<=e&&(t=o)}}catch(e){i=!0,r=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}return window.asserts.assert(t,"Should have found a period."),t}},{key:"getPresentationVariant_",value:function(){var e=this.getPresentationPeriod_();return this.activeStreams_.getVariant(e)}},{key:"getPresentationText_",value:function(){var e=this.getPresentationPeriod_();if(null==e)return null;if(!this.activeStreams_.getText(e)){var t=Wi.filterStreamsByLanguageAndRole(e.textStreams,this.currentTextLanguage_,this.currentTextRole_);t.length&&this.activeStreams_.useText(e,t[0])}return this.activeStreams_.getText(e)}},{key:"isBufferedToEndMS_",value:function(){if(window.asserts.assert(this.video_,"We need a video element to get buffering information"),window.asserts.assert(this.mediaSourceEngine_,"We need a media source engine to get buffering information"),window.asserts.assert(this.manifest_,"We need a manifest to get buffering information"),this.video_.ended)return!0;if(this.mediaSourceEngine_.ended())return!0;if(this.manifest_.presentationTimeline.isLive()){var e=this.manifest_.presentationTimeline.getSegmentAvailabilityEnd();if(bi.bufferEnd(this.video_.buffered)>=e)return!0}return!1}},{key:"isBufferedToEndSrc_",value:function(){if(window.asserts.assert(this.video_,"We need a video element to get buffering information"),this.video_.ended)return!0;return bi.bufferEnd(this.video_.buffered)>=this.video_.duration-.1}},{key:"findPeriodWithVariant_",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=this.manifest_.periods[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var s=r.value;if(s.variants.includes(e))return s}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return null}},{key:"createAbortLoadError_",value:function(){return new M(Hs.severity.CRITICAL,Hs.category.PLAYER,Hs.code.LOAD_INTERRUPTED)}},{key:"getNextStep_",value:function(e,t,n,i){var r=null;return e==this.detachNode_&&(r=n==this.detachNode_?this.detachNode_:this.attachNode_),e==this.attachNode_&&(r=this.getNextAfterAttach_(n,t,i)),e==this.mediaSourceNode_&&(r=this.getNextAfterMediaSource_(n,t,i)),e==this.parserNode_&&(r=this.getNextMatchingAllDependencies_(this.loadNode_,this.manifestNode_,this.unloadNode_,n,t,i)),e==this.manifestNode_&&(r=this.getNextMatchingAllDependencies_(this.loadNode_,this.drmNode_,this.unloadNode_,n,t,i)),e==this.drmNode_&&(r=this.getNextMatchingAllDependencies_(this.loadNode_,this.loadNode_,this.unloadNode_,n,t,i)),e==this.srcEqualsDrmNode_&&(r=n==this.srcEqualsNode_&&t.mediaElement==i.mediaElement?this.srcEqualsNode_:this.unloadNode_),e!=this.loadNode_&&e!=this.srcEqualsNode_||(r=this.unloadNode_),e==this.unloadNode_&&(r=this.getNextAfterUnload_(n,t,i)),window.asserts.assert(r,"Missing next step!"),r}},{key:"getNextAfterAttach_",value:function(e,t,n){return e==this.detachNode_?this.detachNode_:t.mediaElement!=n.mediaElement?this.detachNode_:e==this.attachNode_?this.attachNode_:e==this.mediaSourceNode_||e==this.loadNode_?this.mediaSourceNode_:e==this.srcEqualsNode_?this.srcEqualsDrmNode_:null}},{key:"getNextAfterMediaSource_",value:function(e,t,n){return e==this.loadNode_&&t.mediaElement==n.mediaElement?this.parserNode_:this.unloadNode_}},{key:"getNextAfterUnload_",value:function(e,t,n){return n.mediaElement&&t.mediaElement==n.mediaElement?this.attachNode_:this.detachNode_}},{key:"getNextMatchingAllDependencies_",value:function(e,t,n,i,r,a){return i==e&&r.mediaElement==a.mediaElement&&r.uri==a.uri&&r.mimeType==a.mimeType&&r.factory==a.factory?t:n}},{key:"wrapWalkerListenersWithPromise_",value:function(e){var t=this;return new Promise(function(n,i){e.onCancel=function(){return i(t.createAbortLoadError_())},e.onEnd=function(){return n()},e.onError=function(e){return i(e)},e.onSkip=function(){return i(t.createAbortLoadError_())}})}}],r=[{key:"registerSupportPlugin",value:function(e,n){t.supportPlugins_[e]=n}},{key:"isBrowserSupported",value:function(){return!!(window.Promise&&window.Uint8Array&&Array.prototype.forEach)&&(!!di.isBrowserSupported()&&(!!Qn.supportsMediaSource()||Qn.supportsMediaType("application/x-mpegurl")))}},{key:"probeSupport",value:function(){var e=Ns(regeneratorRuntime.mark(function e(){var n,i,r,a,s,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.asserts.assert(t.isBrowserSupported(),"Must have basic support"),e.next=3,di.probeSupport();case 3:for(o in n=e.sent,i=rr.probeSupport(),r=Vi.probeSupport(),a={manifest:i,media:r,drm:n},s=t.supportPlugins_)a[o]=s[o]();return e.abrupt("return",a);case 10:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"filterForAVVariants_",value:function(e){var t=function(e){return e.video&&e.audio||e.video&&e.video.codecs.includes(",")};if(e.some(function(e){return e.variants.some(t)})){Gs.log.debug("Found variant with audio and video content, so filtering out audio-only content in all periods.");var n=!0,i=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;o.variants=o.variants.filter(t)}}catch(e){i=!0,r=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}}}},{key:"applyPlayRange_",value:function(e,t,n){t>0&&(e.isLive()?Gs.log.warning("|playRangeStart| has been configured for live content. Ignoring the setting."):e.setUserSeekStart(t)),n<e.getDuration()&&(e.isLive()?Gs.log.warning("|playRangeEnd| has been configured for live content. Ignoring the setting."):e.setDuration(n))}},{key:"getLanguagesFrom_",value:function(e){var t=new Set,n=!0,i=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;o.language?t.add(Wt.normalize(o.language)):t.add("und")}}catch(e){i=!0,r=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}return t}},{key:"getLanguageAndRolesFrom_",value:function(e){var t=new Map,n=!0,i=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value,l="und",u=[];o.language&&(l=Wt.normalize(o.language)),(u="variant"==o.type?o.audioRoles:o.roles)&&u.length||(u=[""]),t.has(l)||t.set(l,new Set);var c=!0,d=!1,h=void 0;try{for(var f,p=u[Symbol.iterator]();!(c=(f=p.next()).done);c=!0){var m=f.value;t.get(l).add(m)}}catch(e){d=!0,h=e}finally{try{c||null==p.return||p.return()}finally{if(d)throw h}}}}catch(e){i=!0,r=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}var v=[];return t.forEach(function(e,t){var n=!0,i=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;v.push({language:t,role:o})}}catch(e){i=!0,r=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}}),v}},{key:"createEmptyPayload_",value:function(){return{factory:null,mediaElement:null,mimeType:null,startTime:null,startTimeOfLoad:null,uri:null}}}],i&&Us(n.prototype,i),r&&Us(n,r),t}();function Ws(e){return(Ws="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qs(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(i,r)}function Ys(e){return function(){var t=this,n=arguments;return new Promise(function(i,r){var a=e.apply(t,n);function s(e){qs(a,i,r,s,o,"next",e)}function o(e){qs(a,i,r,s,o,"throw",e)}s(void 0)})}}function Ks(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}zs.LoadMode={DESTROYED:0,NOT_LOADED:1,MEDIA_SOURCE:2,SRC_EQUALS:3},zs.TYPICAL_BUFFERING_THRESHOLD_=.5,zs.version="v2.5.2-master-uncompiled",Ds.init(zs.version),zs.restrictedStatuses_=["output-restricted","internal-error"],zs.supportPlugins_={};
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Xs=window.shaka,$s=(window.goog,function(){function e(t){var n=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&t.constructor!=zs)throw new M(M.Severity.CRITICAL,M.Category.STORAGE,M.Code.LOCAL_PLAYER_INSTANCE_REQUIRED);this.config_=null,this.networkingEngine_=null,t?(this.config_=t.getSharedConfiguration(),this.networkingEngine_=t.getNetworkingEngine(),window.asserts.assert(this.networkingEngine_,"Storage should not be initialized with a player that had |destroy| called on it.")):(this.config_=Zi.createDefault(),this.networkingEngine_=new oe),this.storeInProgress_=!1,this.segmentsFromStore_=[],this.openOperations_=[];var i=!t;this.destroyer_=new zn(Ys(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(){},e.next=3,Promise.all(n.openOperations_.map(function(e){return e.then(t,t)}));case 3:if(!i){e.next=6;break}return e.next=6,n.networkingEngine_.destroy();case 6:n.config_=null,n.networkingEngine_=null;case 8:case"end":return e.stop()}},e)})))}var t,n,i;return t=e,n=[{key:"destroy",value:function(){return this.destroyer_.destroy()}},{key:"configure",value:function(t,n){return window.asserts.assert("object"==Ws(t)||2==arguments.length,"String configs should have values!"),2==arguments.length&&"string"==typeof t&&(t=Un.convertToConfigObject(t,n)),window.asserts.assert("object"==Ws(t),"Should be an object!"),e.verifyConfig_(t),window.asserts.assert(this.config_,"Cannot reconfigure stroage after calling destroy."),Zi.mergeConfigObjects(this.config_,t)}},{key:"getConfiguration",value:function(){window.asserts.assert(this.config_,"Config must not be null!");var e=Zi.createDefault();return Zi.mergeConfigObjects(e,this.config_,Zi.createDefault()),e}},{key:"getNetworkingEngine",value:function(){return this.networkingEngine_}},{key:"store",value:function(e,t,n){var i=this,r=function(){var t=Ys(regeneratorRuntime.mark(function t(){var r,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n||"string"==typeof n){t.next=4;break}return Xs.Deprecate.deprecateFeature(2,6,"Storing with a manifest parser factory","Please register a manifest parser and for the mime-type."),r=n,t.abrupt("return",new r);case 4:return window.asserts.assert(i.networkingEngine_,"Should not call |store| after |destroy|"),t.next=7,rr.create(e,i.networkingEngine_,i.config_.manifest.retryParameters,n);case 7:return a=t.sent,t.abrupt("return",a);case 9:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}();return this.startOperation_(this.store_(e,t||{},r))}},{key:"getStoreInProgress",value:function(){return this.storeInProgress_}},{key:"store_",value:function(){var e=Ys(regeneratorRuntime.mark(function e(t,n,i){var r,a,s,o,l,u,c,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.requireSupport_(),!this.storeInProgress_){e.next=3;break}throw new M(M.Severity.CRITICAL,M.Category.STORAGE,M.Code.STORE_ALREADY_IN_PROGRESS);case 3:return this.storeInProgress_=!0,e.next=6,this.parseManifest(t,i);case 6:if(r=e.sent,this.ensureNotDestroyed_(),!r.presentationTimeline.isLive()&&!r.presentationTimeline.isInProgress()){e.next=11;break}throw new M(M.Severity.CRITICAL,M.Category.STORAGE,M.Code.CANNOT_STORE_LIVE_OFFLINE,t);case 11:return a=null,s=new Tr,o=null,l=null,e.prev=15,e.next=18,this.createDrmEngine(r,function(e){l=l||e});case 18:if(a=e.sent,this.ensureNotDestroyed_(),!l){e.next=22;break}throw l;case 22:return this.filterManifest_(r,a),e.next=25,s.init();case 25:return this.ensureNotDestroyed_(),e.next=28,s.getActive();case 28:return o=e.sent,this.ensureNotDestroyed_(),window.asserts.assert(a,"drmEngine should be non-null here."),e.next=33,this.downloadManifest_(o.cell,a,r,t,n);case 33:if(u=e.sent,this.ensureNotDestroyed_(),!l){e.next=37;break}throw l;case 37:return e.next=39,o.cell.addManifests([u]);case 39:return c=e.sent,this.ensureNotDestroyed_(),d=fr.manifest(o.path.mechanism,o.path.cell,c[0]),e.abrupt("return",Hr.fromManifestDB(d,u));case 45:if(e.prev=45,e.t0=e.catch(15),!o){e.next=50;break}return e.next=50,o.cell.removeSegments(this.segmentsFromStore_,function(){});case 50:throw l||e.t0;case 51:return e.prev=51,this.storeInProgress_=!1,this.segmentsFromStore_=[],e.next=56,s.destroy();case 56:if(!a){e.next=59;break}return e.next=59,a.destroy();case 59:return e.finish(51);case 60:case"end":return e.stop()}},e,this,[[15,45,51,60]])}));return function(t,n,i){return e.apply(this,arguments)}}()},{key:"filterManifest_",value:function(t,n){var i=this,r={width:1/0,height:1/0};$r.filterByRestrictions(t,this.config_.restrictions,r),$r.filterByMediaSourceSupport(t),$r.filterByDrmSupport(t,n),$r.filterByCommonCodecs(t),$r.rollingFilter(t,function(e){var t=Wi,n=[],r=!0,a=!1,s=void 0;try{for(var o,l=e.variants[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var u=o.value;window.asserts.assert(t.isPlayable(u),'We should have already filtered by "is playable"'),n.push(t.variantToTrack(u))}}catch(e){a=!0,s=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw s}}var c=!0,d=!1,h=void 0;try{for(var f,p=e.textStreams[Symbol.iterator]();!(c=(f=p.next()).done);c=!0){var m=f.value;n.push(t.textStreamToTrack(m))}}catch(e){d=!0,h=e}finally{try{c||null==p.return||p.return()}finally{if(d)throw h}}var v=i.config_.offline.trackSelectionCallback(n),g=new Set,y=new Set,_=!0,b=!1,w=void 0;try{for(var E,S=v[Symbol.iterator]();!(_=(E=S.next()).done);_=!0){var T=E.value;"variant"==T.type&&g.add(T.id),"text"==T.type&&y.add(T.id)}}catch(e){b=!0,w=e}finally{try{_||null==S.return||S.return()}finally{if(b)throw w}}e.variants=e.variants.filter(function(e){return g.has(e.id)}),e.textStreams=e.textStreams.filter(function(e){return y.has(e.id)})}),e.validateManifest_(t)}},{key:"downloadManifest_",value:function(){var e=Ys(regeneratorRuntime.mark(function e(t,n,i,r,a){var s,o,l,u=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.asserts.assert(this.networkingEngine_,"Cannot call |downloadManifest_| after calling |destroy|."),s=Hr.fromManifest(r,i,0,a),o=new dr(this.networkingEngine_,function(e,t){s.size=t,u.config_.offline.progressCallback(s,e)}),e.prev=3,l=this.createOfflineManifest_(o,t,n,i,r,a),e.next=7,o.waitToFinish();case 7:return l.size=e.sent,e.abrupt("return",l);case 9:return e.prev=9,e.next=12,o.destroy();case 12:return e.finish(9);case 13:case"end":return e.stop()}},e,this,[[3,,9,13]])}));return function(t,n,i,r,a){return e.apply(this,arguments)}}()},{key:"remove",value:function(e){return this.startOperation_(this.remove_(e))}},{key:"remove_",value:function(){var e=Ys(regeneratorRuntime.mark(function e(t){var n,i,r,a,s,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.requireSupport_(),null!=(n=fr.parse(t))&&n.isManifest()){e.next=4;break}throw new M(M.Severity.CRITICAL,M.Category.STORAGE,M.Code.MALFORMED_OFFLINE_URI,t);case 4:return i=n,r=new Tr,e.prev=6,e.next=9,r.init();case 9:return e.next=11,r.getCell(i.mechanism(),i.cell());case 11:return a=e.sent,e.next=14,a.getManifests([i.key()]);case 14:return s=e.sent,o=s[0],e.next=18,Promise.all([this.removeFromDRM_(i,o,r),this.removeFromStorage_(a,i,o)]);case 18:return e.prev=18,e.next=21,r.destroy();case 21:return e.finish(18);case 22:case"end":return e.stop()}},e,this,[[6,,18,22]])}));return function(t){return e.apply(this,arguments)}}()},{key:"removeFromDRM_",value:function(){var t=Ys(regeneratorRuntime.mark(function t(n,i,r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return window.asserts.assert(this.networkingEngine_,"Cannot be destroyed"),t.next=3,e.deleteLicenseFor_(this.networkingEngine_,this.config_.drm,r,i);case 3:case"end":return t.stop()}},t,this)}));return function(e,n,i){return t.apply(this,arguments)}}()},{key:"removeFromStorage_",value:function(t,n,i){var r=this,a=e.getAllSegmentIds_(i),s=a.length+1,o=0,l=Hr.fromManifestDB(n,i),u=function(e){o+=1,r.config_.offline.progressCallback(l,o/s)};return Promise.all([t.removeSegments(a,u),t.removeManifests([n.key()],u)])}},{key:"removeEmeSessions",value:function(){return this.startOperation_(this.removeEmeSessions_())}},{key:"removeEmeSessions_",value:function(){var e=Ys(regeneratorRuntime.mark(function e(){var t,n,i,r,a,s,o,l,u,c,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.requireSupport_(),window.asserts.assert(this.networkingEngine_,"Cannot be destroyed"),t=this.networkingEngine_,n=this.config_.drm,i=new Tr,r=new _r,a=!1,e.prev=7,e.next=10,i.init();case 10:s=[],i.forEachEmeSessionCell(function(e){return s.push(e)}),o=0,l=s;case 13:if(!(o<l.length)){e.next=27;break}return u=l[o],e.next=17,u.getAll();case 17:return c=e.sent,e.next=20,r.delete(n,t,c);case 20:return d=e.sent,e.next=23,u.remove(d);case 23:d.length!=c.length&&(a=!0);case 24:o++,e.next=13;break;case 27:return e.prev=27,e.next=30,i.destroy();case 30:return e.finish(27);case 31:return e.abrupt("return",!a);case 32:case"end":return e.stop()}},e,this,[[7,,27,31]])}));return function(){return e.apply(this,arguments)}}()},{key:"list",value:function(){return this.startOperation_(this.list_())}},{key:"list_",value:function(){var e=Ys(regeneratorRuntime.mark(function e(){var t,n,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.requireSupport_(),t=[],n=new Tr,e.prev=3,e.next=6,n.init();case 6:return i=Promise.resolve(),n.forEachCell(function(e,n){i=i.then(Ys(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,n.getAllManifests();case 2:i.sent.forEach(function(n,i){var r=fr.manifest(e.mechanism,e.cell,i),a=Hr.fromManifestDB(r,n);t.push(a)});case 4:case"end":return i.stop()}},i)})))}),e.next=10,i;case 10:return e.prev=10,e.next=13,n.destroy();case 13:return e.finish(10);case 14:return e.abrupt("return",t);case 15:case"end":return e.stop()}},e,this,[[3,,10,14]])}));return function(){return e.apply(this,arguments)}}()},{key:"parseManifest",value:function(){var t=Ys(regeneratorRuntime.mark(function t(n,i){var r,a,s,o,l,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=null,a=this.networkingEngine_,window.asserts.assert(a,"Should be initialized!"),s={networkingEngine:a,filterAllPeriods:function(){},filterNewPeriod:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(e){r=e}},t.next=6,i();case 6:return(o=t.sent).configure(this.config_.manifest),this.ensureNotDestroyed_(),t.prev=9,t.next=12,o.start(n,s);case 12:return l=t.sent,this.ensureNotDestroyed_(),u=e.getStreamSet_(l),t.next=17,Promise.all(Array.from(u).map(function(e){return e.createSegmentIndex()}));case 17:if(this.ensureNotDestroyed_(),!r){t.next=20;break}throw r;case 20:return t.abrupt("return",l);case 21:return t.prev=21,t.next=24,o.stop();case 24:return t.finish(21);case 25:case"end":return t.stop()}},t,this,[[9,,21,25]])}));return function(e,n){return t.apply(this,arguments)}}()},{key:"createDrmEngine",value:function(){var e=Ys(regeneratorRuntime.mark(function e(t,n){var i,r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.asserts.assert(this.networkingEngine_,"Cannot call |createDrmEngine| after |destroy|"),i=new di({netEngine:this.networkingEngine_,onError:n,onKeyStatus:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),r=ea.getAllVariantsFrom(t.periods),a=this.config_,i.configure(a.drm),e.next=7,i.initForStorage(r,a.offline.usePersistentLicense);case 7:return e.next=9,i.setServerCertificate();case 9:return e.next=11,i.createOrLoad();case 11:return e.abrupt("return",i);case 12:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"createOfflineManifest_",value:function(e,t,n,i,r,a){var s=this,o=new Wr,l=i.periods.map(function(r){return s.createPeriod_(e,t,o,n,i,r)}),u=n.getDrmInfo(),c=n.getSessionIds();if(u&&this.config_.offline.usePersistentLicense){if(!c.length)throw new M(M.Severity.CRITICAL,M.Category.STORAGE,M.Code.NO_INIT_DATA_FOR_OFFLINE,r);u.initData=[]}return{originalManifestUri:r,duration:i.presentationTimeline.getDuration(),size:0,expiration:n.getExpiration(),periods:l,sessionIds:this.config_.offline.usePersistentLicense?c:[],drmInfo:u,appMetadata:a}}},{key:"createPeriod_",value:function(t,n,i,r,a,s){var o=!0,l=!1,u=void 0;try{for(var c,d=a.periods[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){var h=c.value,f=!0,p=!1,m=void 0;try{for(var v,g=h.variants[Symbol.iterator]();!(f=(v=g.next()).done);f=!0){var y=v.value;i.addVariant(y)}}catch(e){p=!0,m=e}finally{try{f||null==g.return||g.return()}finally{if(p)throw m}}var _=!0,b=!1,w=void 0;try{for(var E,S=h.textStreams[Symbol.iterator]();!(_=(E=S.next()).done);_=!0){var T=E.value;i.addText(T)}}catch(e){b=!0,w=e}finally{try{_||null==S.return||S.return()}finally{if(b)throw w}}}}catch(e){l=!0,u=e}finally{try{o||null==d.return||d.return()}finally{if(l)throw u}}var k=e.getStreamSet_(a),C=new Map,I=!0,A=!1,x=void 0;try{for(var L,R=k[Symbol.iterator]();!(I=(L=R.next()).done);I=!0){var P=L.value,D=this.createStream_(t,n,i,a,s,P);C.set(P.id,D)}}catch(e){A=!0,x=e}finally{try{I||null==R.return||R.return()}finally{if(A)throw x}}var O=!0,M=!1,N=void 0;try{for(var U,F=s.variants[Symbol.iterator]();!(O=(U=F.next()).done);O=!0){var B=U.value;B.audio&&C.get(B.audio.id).variantIds.push(B.id),B.video&&C.get(B.video.id).variantIds.push(B.id)}}catch(e){M=!0,N=e}finally{try{O||null==F.return||F.return()}finally{if(M)throw N}}return{startTime:s.startTime,streams:Array.from(C.values())}}},{key:"createStream_",value:function(t,n,i,r,a,s){var o=this,l={id:s.id,originalId:s.originalId,primary:s.primary,presentationTimeOffset:s.presentationTimeOffset||0,contentType:s.type,mimeType:s.mimeType,codecs:s.codecs,frameRate:s.frameRate,kind:s.kind,language:s.language,label:s.label,width:s.width||null,height:s.height||null,initSegmentKey:null,encrypted:s.encrypted,keyId:s.keyId,segments:[],variantIds:[]},u=r.presentationTimeline.getSegmentAvailabilityStart(),c=s.id;e.forEachSegment_(s,u,function(e){var r=Qr.createSegmentRequest(e.getUris(),e.startByte,e.endByte,o.config_.streaming.retryParameters);t.queue(c,r,i.getSegmentEstimate(s.id,e),function(){var t=Ys(regeneratorRuntime.mark(function t(i){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.addSegments([{data:i}]);case 2:r=t.sent,o.segmentsFromStore_.push(r[0]),l.segments.push({startTime:e.startTime,endTime:e.endTime,dataKey:r[0]});case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())});var d=s.initSegmentReference;if(d){var h=Qr.createSegmentRequest(d.getUris(),d.startByte,d.endByte,this.config_.streaming.retryParameters);t.queue(c,h,i.getInitSegmentEstimate(s.id),function(){var e=Ys(regeneratorRuntime.mark(function e(t){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.addSegments([{data:t}]);case 2:i=e.sent,o.segmentsFromStore_.push(i[0]),l.initSegmentKey=i[0];case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}return l}},{key:"ensureNotDestroyed_",value:function(){if(this.destroyer_.destroyed())throw new M(M.Severity.CRITICAL,M.Category.STORAGE,M.Code.OPERATION_ABORTED)}},{key:"requireSupport_",value:function(){if(!e.support())throw new M(M.Severity.CRITICAL,M.Category.STORAGE,M.Code.STORAGE_NOT_SUPPORTED)}},{key:"startOperation_",value:function(){var e=Ys(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.openOperations_.push(t),e.prev=1,e.next=4,t;case 4:return e.abrupt("return",e.sent);case 5:return e.prev=5,m.remove(this.openOperations_,t),e.finish(5);case 8:case"end":return e.stop()}},e,this,[[1,,5,8]])}));return function(t){return e.apply(this,arguments)}}()}],i=[{key:"support",value:function(){return!!Qn.supportsMediaSource()&&Tr.support()}},{key:"getCapabilities_",value:function(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var s,o=e.periods[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value,u=!0,c=!1,d=void 0;try{for(var h,f=l.streams[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var p=h.value;t&&"video"==p.contentType?n.push({contentType:Xn.getFullType(p.mimeType,p.codecs),robustness:e.drmInfo.videoRobustness}):t||"audio"!=p.contentType||n.push({contentType:Xn.getFullType(p.mimeType,p.codecs),robustness:e.drmInfo.audioRobustness})}}catch(e){c=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw d}}}}catch(e){r=!0,a=e}finally{try{i||null==o.return||o.return()}finally{if(r)throw a}}return n}},{key:"forEachSegment_",value:function(e,t,n){for(var i=e.findSegmentPosition(t),r=null==i?null:e.getSegmentReference(i);r;)n(r),r=e.getSegmentReference(++i)}},{key:"getAllSegmentIds_",value:function(e){var t=[],n=!0,i=!1,r=void 0;try{for(var a,s=e.periods[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value,l=!0,u=!1,c=void 0;try{for(var d,h=o.streams[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var f=d.value;null!=f.initSegmentKey&&t.push(f.initSegmentKey);var p=!0,m=!1,v=void 0;try{for(var g,y=f.segments[Symbol.iterator]();!(p=(g=y.next()).done);p=!0){var _=g.value;t.push(_.dataKey)}}catch(e){m=!0,v=e}finally{try{p||null==y.return||y.return()}finally{if(m)throw v}}}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}}}catch(e){i=!0,r=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}return t}},{key:"deleteAll",value:function(){var e=Ys(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Tr,e.prev=1,e.next=4,t.erase();case 4:return e.prev=4,e.next=7,t.destroy();case 7:return e.finish(4);case 8:case"end":return e.stop()}},e,null,[[1,,4,8]])}));return function(){return e.apply(this,arguments)}}()},{key:"deleteLicenseFor_",value:function(){var t=Ys(regeneratorRuntime.mark(function t(n,i,r,a){var s,o,l,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a.drmInfo){t.next=2;break}return t.abrupt("return");case 2:return s=r.getEmeSessionCell(),o=a.sessionIds.map(function(t){return{sessionId:t,keySystem:a.drmInfo.keySystem,licenseUri:a.drmInfo.licenseServerUri,serverCertificate:a.drmInfo.serverCertificate,audioCapabilities:e.getCapabilities_(a,!1),videoCapabilities:e.getCapabilities_(a,!0)}}),l=new _r,t.next=7,l.delete(i,n,o);case 7:return u=t.sent,t.next=10,s.remove(u);case 10:return t.next=12,s.add(o.filter(function(e){return-1==u.indexOf(e.sessionId)}));case 12:case"end":return t.stop()}},t)}));return function(e,n,i,r){return t.apply(this,arguments)}}()},{key:"getStreamSet_",value:function(e){var t=new Set,n=!0,i=!1,r=void 0;try{for(var a,s=e.periods[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value,l=!0,u=!1,c=void 0;try{for(var d,h=o.textStreams[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var f=d.value;t.add(f)}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}var p=!0,m=!1,v=void 0;try{for(var g,y=o.variants[Symbol.iterator]();!(p=(g=y.next()).done);p=!0){var _=g.value;_.audio&&t.add(_.audio),_.video&&t.add(_.video)}}catch(e){m=!0,v=e}finally{try{p||null==y.return||y.return()}finally{if(m)throw v}}}}catch(e){i=!0,r=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}return t}},{key:"verifyConfig_",value:function(e){var t=!1;null!=e.trackSelectionCallback&&(t=!0,e.offline=e.offline||{},e.offline.trackSelectionCallback=e.trackSelectionCallback,delete e.trackSelectionCallback),null!=e.progressCallback&&(t=!0,e.offline=e.offline||{},e.offline.progressCallback=e.progressCallback,delete e.progressCallback),null!=e.usePersistentLicense&&(t=!0,e.offline=e.offline||{},e.offline.usePersistentLicense=e.usePersistentLicense,delete e.usePersistentLicense),t&&Xs.Deprecate.deprecateFeature(2,6,"Storage.configure with OfflineConfig","Please configure storage with a player configuration.")}},{key:"validateManifest_",value:function(t){if(0==t.periods.length)throw new M(M.Severity.CRITICAL,M.Category.MANIFEST,M.Code.NO_PERIODS);var n=!0,i=!1,r=void 0;try{for(var a,s=t.periods[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;e.validatePeriod_(o)}}catch(e){i=!0,r=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}}},{key:"validatePeriod_",value:function(e){var t=new Set(e.variants.map(function(e){return e.video})),n=new Set(e.variants.map(function(e){return e.audio})),i=e.textStreams;t.size>1&&Xs.log.warning("Multiple video tracks selected to be stored");var r=!0,a=!1,s=void 0;try{for(var o,l=n[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var u=o.value,c=!0,d=!1,h=void 0;try{for(var f,p=n[Symbol.iterator]();!(c=(f=p.next()).done);c=!0){var m=f.value;u!=m&&u.language==m.language&&Xs.log.warning("Similar audio tracks were selected to be stored",u.id,m.id)}}catch(e){d=!0,h=e}finally{try{c||null==p.return||p.return()}finally{if(d)throw h}}}}catch(e){a=!0,s=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw s}}var v=!0,g=!1,y=void 0;try{for(var _,b=i[Symbol.iterator]();!(v=(_=b.next()).done);v=!0){var w=_.value,E=!0,S=!1,T=void 0;try{for(var k,C=i[Symbol.iterator]();!(E=(k=C.next()).done);E=!0){var I=k.value;w!=I&&w.language==I.language&&Xs.log.warning("Similar text tracks were selected to be stored",w.id,I.id)}}catch(e){S=!0,T=e}finally{try{E||null==C.return||C.return()}finally{if(S)throw T}}}}catch(e){g=!0,y=e}finally{try{v||null==b.return||b.return()}finally{if(g)throw y}}}}],n&&Ks(t.prototype,n),i&&Ks(t,i),e}());zs.registerSupportPlugin("offline",$s.support);var Zs=$s;function Qs(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Js=function(){function e(t,n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isTextVisible_=!1,this.cues_=[],this.video_=t,this.videoContainer_=n,this.textContainer_=$t.createHTMLElement("div"),this.textContainer_.classList.add("shaka-text-container"),this.videoContainer_.appendChild(this.textContainer_);this.captionsTimer_=new j(function(){i.updateCaptions_()}).tickEvery(.25),this.currentCuesMap_=new Map}var t,n,i;return t=e,(n=[{key:"append",value:function(e){this.cues_=this.cues_.concat(e)}},{key:"destroy",value:function(){this.videoContainer_.removeChild(this.textContainer_),this.textContainer_=null,this.isTextVisible_=!1,this.cues_=[],this.captionsTimer_&&this.captionsTimer_.stop(),this.currentCuesMap_.clear()}},{key:"remove",value:function(e,t){if(!this.textContainer_)return!1;var n=new Set,i=!0,r=!1,a=void 0;try{for(var s,o=this.cues_[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;l.startTime>e&&l.endTime<t&&n.add(l)}}catch(e){r=!0,a=e}finally{try{i||null==o.return||o.return()}finally{if(r)throw a}}var u=!0,c=!1,d=void 0;try{for(var h,f=n[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var p=h.value,m=this.currentCuesMap_.get(p);m&&(this.textContainer_.removeChild(m),this.currentCuesMap_.delete(p))}}catch(e){c=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw d}}return this.cues_=this.cues_.filter(function(e){return!n.has(e)}),!0}},{key:"isTextVisible",value:function(){return this.isTextVisible_}},{key:"setTextVisibility",value:function(e){this.isTextVisible_=e}},{key:"updateCaptions_",value:function(){var e=this,t=this.video_.currentTime,n=function(n){return e.isTextVisible_&&n.startTime<=t&&n.endTime>=t},i=!0,r=!1,a=void 0;try{for(var s,o=this.currentCuesMap_.keys()[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;if(!n(l)){var u=this.currentCuesMap_.get(l);this.textContainer_.removeChild(u),this.currentCuesMap_.delete(l)}}}catch(e){r=!0,a=e}finally{try{i||null==o.return||o.return()}finally{if(r)throw a}}var c=this.cues_.filter(function(t){return n(t)&&!e.currentCuesMap_.has(t)}).sort(function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime-t.endTime}),d=!0,h=!1,f=void 0;try{for(var p,m=c[Symbol.iterator]();!(d=(p=m.next()).done);d=!0){var v=p.value,g=$t.createHTMLElement("span");this.setCaptionStyles_(g,v),this.currentCuesMap_.set(v,g),this.textContainer_.appendChild(g)}}catch(e){h=!0,f=e}finally{try{d||null==m.return||m.return()}finally{if(h)throw f}}}},{key:"setCaptionStyles_",value:function(e,t){var n=shaka.text.Cue,i=e.style,r=this.textContainer_.style;if(i.whiteSpace="pre",e.textContent=t.payload,i.backgroundColor=t.backgroundColor,i.color=t.color,i.direction=t.direction,t.backgroundImage&&(i.backgroundImage="url('"+t.backgroundImage+"')",i.backgroundRepeat="no-repeat",i.backgroundSize="contain",i.backgroundPosition="center"),t.backgroundImage&&t.region){var a=shaka.text.CueRegion.units.PERCENTAGE,s=t.region.heightUnits==a?"%":"px",o=t.region.widthUnits==a?"%":"px";i.height=t.region.height+s,i.width=t.region.width+o}t.displayAlign==n.displayAlign.BEFORE?r.alignItems="flex-start":t.displayAlign==n.displayAlign.CENTER?r.alignItems="flex-top":r.alignItems="flex-end",i.fontFamily=t.fontFamily,i.fontWeight=t.fontWeight.toString(),i.fontSize=t.fontSize,i.fontStyle=t.fontStyle,t.line&&t.lineInterpretation==n.lineInterpretation.PERCENTAGE&&(t.writingMode==n.writingMode.HORIZONTAL_TOP_TO_BOTTOM?t.lineAlign==n.lineAlign.START?r.top=t.line+"%":t.lineAlign==n.lineAlign.END&&(r.bottom=t.line+"%"):t.writingMode==n.writingMode.VERTICAL_LEFT_TO_RIGHT?t.lineAlign==n.lineAlign.START?r.left=t.line+"%":t.lineAlign==n.lineAlign.END&&(r.right=t.line+"%"):t.lineAlign==n.lineAlign.START?r.right=t.line+"%":t.lineAlign==n.lineAlign.END&&(r.left=t.line+"%")),i.lineHeight=t.lineHeight,t.position&&(t.writingMode==n.writingMode.HORIZONTAL_TOP_TO_BOTTOM?r.paddingLeft=t.position:r.paddingTop=t.position),t.positionAlign==n.positionAlign.LEFT?r.cssFloat="left":t.positionAlign==n.positionAlign.RIGHT?r.cssFloat="right":r.margin="auto",i.textAlign=t.textAlign,i.textDecoration=t.textDecoration.join(" "),i.writingMode=t.writingMode,t.writingMode==n.writingMode.HORIZONTAL_TOP_TO_BOTTOM?r.width=t.size+"%":r.height=t.size+"%"}}])&&Qs(t.prototype,n),i&&Qs(t,i),e}(),eo=n(20);function to(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function no(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function io(e,t,n){return t&&no(e.prototype,t),n&&no(e,n),e}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ro=function(){function e(){to(this,e)}return io(e,null,[{key:"upgradeDom",value:function(){}}]),e}();function ao(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(i,r)}function so(e){return function(){var t=this,n=arguments;return new Promise(function(i,r){var a=e.apply(t,n);function s(e){ao(a,i,r,s,o,"next",e)}function o(e){ao(a,i,r,s,o,"throw",e)}s(void 0)})}}function oo(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Element.prototype.MaterialLayout,
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
console.log("shakaAssets",pe);var lo=new M;console.log({errorUtils:lo});var uo=window.shaka,co=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.video_=null,this.container_=null,this.player_=null,this.selectedAsset=null,this.desiredConfig_,this.defaultConfig_,this.fullyLoaded_=!1,this.controls_=null,this.initialStoredList_,this.nativeControlsEnabled_=!1,this.support_,this.uiLocale_=""}var t,n,i;return t=e,(n=[{key:"initCommon_",value:function(){var e=this;window.addEventListener("error",function(t){t.message.includes("cvox.Api")||e.onError_(t.error)}),document.getElementById("error-display-close-button").addEventListener("click",function(t){return e.closeError_()}),this.setUpVersionString_()}},{key:"initFailed",value:function(){this.initCommon_();var e=Error.Severity.CRITICAL;this.handleError_(e,"Your browser is not supported!","https://github.com/google/shaka-player#platform-and-browser-support-matrix"),ro.upgradeDom();var t=[],n=!0,i=!1,r=void 0;try{for(var a,s=document.getElementsByClassName("should-disable-on-fail")[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;t.push(o)}}catch(e){i=!0,r=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}t.push(document.getElementsByClassName("mdl-layout__drawer-button"));for(var l=0,u=t;l<u.length;l++){var c=u[l];c.tabIndex=-1,c.classList.add("disabled-by-fail")}}},{key:"init",value:function(){var t=so(regeneratorRuntime.mark(function t(){var n,i=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.initCommon_(),t.next=3,zs.probeSupport();case 3:return this.support_=t.sent,this.video_=document.getElementById("video"),this.video_.poster=e.mainPoster_,this.container_=document.getElementsByClassName("video-container")[0],this.setupPlayer_(),this.readHash_(),window.addEventListener("hashchange",function(){return i.hashChanged_()}),t.next=12,this.setupStorage_();case 12:this.dispatchEventWithName_("shaka-main-loaded"),ro.upgradeDom(),n=this.getLastAssetFromHash_(),this.fullyLoaded_=!0,this.remakeHash(),n&&!this.selectedAsset&&this.loadAsset(n);case 18:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"setupPlayer_",value:function(){var e=this,t=this.video_.ui;this.player_=t.getControls().getPlayer(),An.registerElement("close",new Dn.Factory);var n=t.getConfiguration();n.controlPanelElements.push("close"),t.configure(n),this.player_.configure("manifest.dash.clockSyncUri","https://shaka-player-demo.appspot.com/time.txt"),this.defaultConfig_=this.player_.getConfiguration(),this.desiredConfig_=this.player_.getConfiguration();var i=navigator.languages||["en-us"];this.configure("preferredAudioLanguage",i[0]),this.configure("preferredTextLanguage",i[0]),this.uiLocale_=i[0];var r=function(t){return e.onErrorEvent_(t)};this.player_.addEventListener("error",r),this.controls_=t.getControls(),this.controls_.addEventListener("error",r),this.controls_.addEventListener("caststatuschanged",function(t){e.onCastStatusChange_(t.newStatus)});var a=this.controls_.getLocalization(),s=Yt.UNKNOWN_LOCALES;a.addEventListener(s,function(t){var n=!0,i=!1,r=void 0;try{for(var a,s=t.locales[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;e.loadUILocale_(o)}}catch(e){i=!0,r=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}}),this.loadUILocale_(this.uiLocale_);var o=document.getElementById("drawer-close-button");o.addEventListener("click",function(){document.getElementById("main-layout").MaterialLayout.toggleDrawer(),e.dispatchEventWithName_("shaka-main-drawer-state-change"),e.hideNode_(o)});var l=document.querySelector(".mdl-layout__drawer-button");window.asserts.assert(l,"There should be a drawer button."),l.addEventListener("click",function(){e.dispatchEventWithName_("shaka-main-drawer-state-change"),e.showNode_(o)});var u=document.querySelector(".mdl-layout__obfuscator");window.asserts.assert(u,"There should be an obfuscator."),u.addEventListener("click",function(){e.dispatchEventWithName_("shaka-main-drawer-state-change"),e.hideNode_(o)}),this.hideNode_(o)}},{key:"getIsDrawerOpen",value:function(){var e=document.querySelector(".mdl-layout__drawer");return window.asserts.assert(e,"There should be a drawer."),e.classList.contains("is-visible")}},{key:"getIdentifierFromAsset_",value:function(e){return e.name+(e.source==pe.Source.CUSTOM?" [CUSTOM]":"")}},{key:"makeStorageInstance_",value:function(){var e=this;if(!Zs.support())return null;var t=new Zs;return t.configure("offline.progressCallback",function(t,n){var i=function(t){var n=!0,i=!1,r=void 0;try{for(var a,s=pe.testAssets[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;if(e.getIdentifierFromAsset_(o)==t)return o}}catch(e){i=!0,r=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}if(shakaDemoCustom){var l=!0,u=!1,c=void 0;try{for(var d,h=shakaDemoCustom.assets()[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var f=d.value;if(e.getIdentifierFromAsset_(f)==t)return f}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}}return null}(t.appMetadata.identifier);i&&(i.storedProgress=n,e.dispatchEventWithName_("shaka-main-offline-progress"))}),t}},{key:"setupOfflineSupport",value:function(e){var t=this;if(this.initialStoredList_){var n=!0,i=!1,r=void 0;try{for(var a,s=this.initialStoredList_[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value,l=o.appMetadata.identifier;this.getIdentifierFromAsset_(e)==l&&(e.storedContent=o)}}catch(e){i=!0,r=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}e.storeCallback=so(regeneratorRuntime.mark(function n(){var i,r,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.makeStorageInstance_()){n.next=3;break}return n.abrupt("return");case 3:return n.prev=3,n.next=6,t.drmConfiguration_(e,i);case 6:return r={identifier:t.getIdentifierFromAsset_(e),downloaded:new Date},e.storedProgress=0,t.dispatchEventWithName_("shaka-main-offline-progress"),n.next=11,i.store(e.manifestUri,r);case 11:a=n.sent,e.storedContent=a,n.next=19;break;case 15:n.prev=15,n.t0=n.catch(3),t.onError_(n.t0),e.storedContent=null;case 19:i.destroy(),e.storedProgress=1,t.dispatchEventWithName_("shaka-main-offline-progress");case 22:case"end":return n.stop()}},n,null,[[3,15]])})),e.unstoreCallback=so(regeneratorRuntime.mark(function n(){var i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e==t.selectedAsset&&t.unload(),!e.storedContent||!e.storedContent.offlineUri){n.next=19;break}if(i=t.makeStorageInstance_()){n.next=5;break}return n.abrupt("return");case 5:return n.prev=5,e.storedProgress=0,t.dispatchEventWithName_("shaka-main-offline-progress"),n.next=10,i.remove(e.storedContent.offlineUri);case 10:e.storedContent=null,n.next=16;break;case 13:n.prev=13,n.t0=n.catch(5),t.onError_(n.t0);case 16:i.destroy(),e.storedProgress=1,t.dispatchEventWithName_("shaka-main-offline-progress");case 19:case"end":return n.stop()}},n,null,[[5,13]])}))}}},{key:"setupStorage_",value:function(){var e=so(regeneratorRuntime.mark(function e(){var t,n,i,r,a,s,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.makeStorageInstance_()){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,t.list();case 6:this.initialStoredList_=e.sent,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(3),console.error(e.t0),this.initialStoredList_=null;case 13:return e.prev=13,t.destroy(),e.finish(13);case 16:n=!0,i=!1,r=void 0,e.prev=19,a=pe.testAssets[Symbol.iterator]();case 21:if(n=(s=a.next()).done){e.next=29;break}if(o=s.value,!this.getAssetUnsupportedReason(o,!0)){e.next=25;break}return e.abrupt("continue",26);case 25:this.setupOfflineSupport(o);case 26:n=!0,e.next=21;break;case 29:e.next=35;break;case 31:e.prev=31,e.t1=e.catch(19),i=!0,r=e.t1;case 35:e.prev=35,e.prev=36,n||null==a.return||a.return();case 38:if(e.prev=38,!i){e.next=41;break}throw r;case 41:return e.finish(38);case 42:return e.finish(35);case 43:case"end":return e.stop()}},e,this,[[3,9,13,16],[19,31,35,43],[36,,38,42]])}));return function(){return e.apply(this,arguments)}}()},{key:"hashChanged_",value:function(){this.readHash_(),this.dispatchEventWithName_("shaka-main-config-change")}},{key:"getAssetUnsupportedReason",value:function(e,t){var n=this;if(e.source==pe.Source.CUSTOM)return null;if(e.disabled)return"This asset is disabled.";if(t&&!e.features.includes(pe.Feature.OFFLINE))return"This asset cannot be downloaded.";if(t&&!Zs.support())return"Your browser does not support offline storage.";if(!e.drm.includes(pe.KeySystem.CLEAR)){if(!e.drm.some(function(e){return n.support_.drm[e]}))return"Your browser does not support the required key systems.";if(t)if(!e.drm.some(function(e){return n.support_.drm[e]&&n.support_.drm[e].persistentState}))return"Your browser does not support offline licenses for the required key systems."}if(e.features.includes(pe.Feature.DASH)&&!this.support_.manifest.mpd)return"Your browser does not support MPEG-DASH manifests.";if(e.features.includes(pe.Feature.HLS)&&!this.support_.manifest.m3u8)return"Your browser does not support HLS manifests.";var i=[];return e.features.includes(pe.Feature.WEBM)&&i.push("video/webm"),e.features.includes(pe.Feature.MP4)&&i.push("video/mp4"),e.features.includes(pe.Feature.MP2TS)&&i.push("video/mp2t"),i.some(function(e){return n.support_.media[e]})?null:"Your browser does not support the required video format."}},{key:"setNativeControlsEnabled",value:function(e){this.nativeControlsEnabled_=e,this.remakeHash()}},{key:"getNativeControlsEnabled",value:function(){return this.nativeControlsEnabled_}},{key:"loadUILocale_",value:function(){var e=so(regeneratorRuntime.mark(function e(t){var n,i,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:for(r in n=eo,i=new Map,n)i.set(r,n[r]);this.controls_.getLocalization().insert(t,i);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"setUILocale",value:function(e){this.uiLocale_=e;var t=[e].concat(navigator.languages);this.controls_.getLocalization().changeLocale(t)}},{key:"getUILocale",value:function(){return this.uiLocale_}},{key:"getLastAssetFromHash_",value:function(){var t=this.getParams_(),n=t.asset;if(n){var i=!0,r=!1,a=void 0;try{for(var s,o=pe.testAssets[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;if(l.manifestUri==n)return l}}catch(e){r=!0,a=e}finally{try{i||null==o.return||o.return()}finally{if(r)throw a}}var u=!0,c=!1,d=void 0;try{for(var h,f=shakaDemoCustom.assets()[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var p=h.value;if(p.manifestUri==n)return p}}catch(e){c=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw d}}var m=new de("loaded asset","",n,pe.Source.UNKNOWN);if("license"in t){var v=e.commonDrmSystems;"drmSystem"in t&&(v=[t.drmSystem]);var g=!0,y=!1,_=void 0;try{for(var b,w=v[Symbol.iterator]();!(g=(b=w.next()).done);g=!0){var E=b.value;m.addLicenseServer(E,t.license)}}catch(e){y=!0,_=e}finally{try{g||null==w.return||w.return()}finally{if(y)throw _}}}return"certificate"in t&&m.addCertificateUri(t.certificate),m}return null}},{key:"readHash_",value:function(){var e=this,t=this.getParams_();if(this.player_){var n=this.player_.getConfiguration();me.a.runThroughHashParams(function(n,i){if(n in t){var r=e.getCurrentConfigValue(i),a=t[n];"boolean"==typeof r?a="true"==a:"number"==typeof r&&(a=parseFloat(a)),e.configure(i,a)}},n)}if("lang"in t){var i=t.lang;this.configure("preferredAudioLanguage",i),this.configure("preferredTextLanguage",i),this.setUILocale(i)}"uilang"in t&&this.setUILocale(t.uilang),"noadaptation"in t&&this.configure("abr.enabled",!1),"jumpLargeGaps"in t&&this.configure("streaming.jumpLargeGaps",!0);var r="uncompiled";"build"in t?r=t.build:"compiled"in t&&(r="compiled");for(var a=function(){var t=o[s];console.log(t.split("_").join("-")+"-link");var n=document.getElementById(t.split("_").join("-")+"-link");r==t?(n.setAttribute("disabled",""),n.removeAttribute("href"),n.title="currently selected"):(n.removeAttribute("disabled"),n.addEventListener("click",function(){var n=location.hash.substr(1).split(";").filter(function(e){return"compiled"!=e&&"build"!=e.split("=")[0]});return n.push("build="+t),e.setNewHashSilent_(n.join(";")),location.reload(),!1}))},s=0,o=["compiled","debug_compiled","uncompiled"];s<o.length;s++)a();if(this.nativeControlsEnabled_="nativecontrols"in t,!me.a.browserSupportsUncompiledMode()){var l=document.getElementById("uncompiled-link");l.setAttribute("disabled",""),l.removeAttribute("href"),l.title="requires a newer browser"}uo.log&&("vv"in t?uo.log.setLevel(uo.log.Level.V2):"v"in t?uo.log.setLevel(uo.log.Level.V1):"debug"in t?uo.log.setLevel(uo.log.Level.DEBUG):"info"in t&&uo.log.setLevel(uo.log.Level.INFO))}},{key:"getParams_",value:function(){var e=location.search.substr(1);e=e?e.split(";"):[];var t=location.hash.substr(1);t=t?t.split(";"):[];for(var n=e.concat(t),i={},r=0;r<n.length;++r){var a=n[r].split("=");i[a[0]]=a.slice(1).join("=")}return i}},{key:"getValueFromGivenConfig_",value:function(e,t){for(var n=t,i=e;i;){var r=i.split(/\.(.+)/);if(3!=r.length)return n[r[0]];i=r[1],n=n[r[0]]}}},{key:"getCurrentConfigValue",value:function(e){var t=this.desiredConfig_;return this.getValueFromGivenConfig_(e,t)}},{key:"resetConfiguration",value:function(e){this.configure(e,void 0)}},{key:"configure",value:function(e,t){2==arguments.length&&"string"==typeof e&&(e=Un.convertToConfigObject(e,t));var n=e;Zi.mergeConfigObjects(this.desiredConfig_,n,this.defaultConfig_),this.player_.configure(e,t)}},{key:"getConfiguration",value:function(){return this.desiredConfig_}},{key:"requestCertificate_",value:function(){var e=so(regeneratorRuntime.mark(function e(t,n){var i,r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=uo.net.NetworkingEngine.RequestType.APP,r={uris:[t]},e.next=4,n.request(i,r).promise;case 4:return a=e.sent,e.abrupt("return",a.data);case 6:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"unload",value:function(){this.selectedAsset=null;var t=document.getElementById("video-bar");this.hideNode_(t),this.video_.poster=e.mainPoster_,this.player_.unload(),this.dispatchEventWithName_("shaka-main-selected-asset-changed"),this.remakeHash()}},{key:"drmConfiguration_",value:function(){var e=so(regeneratorRuntime.mark(function e(t,n){var i,r,a,s,o,l,u,c,d,h,f,p,m,v,g,y,_;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n?n.getNetworkingEngine():this.player_.getNetworkingEngine(),window.asserts.assert(i,"There should be a net engine."),t.applyFilters(i),r=t.getConfiguration(),n?n.configure(r):(this.player_.configure(this.desiredConfig_),this.player_.configure(r)),a=n?n.getConfiguration():this.player_.getConfiguration(),!t.certificateUri){e.next=32;break}return e.next=9,this.requestCertificate_(t.certificateUri,i);case 9:for(s=e.sent,o=new Uint8Array(s),l=!0,u=!1,c=void 0,e.prev=14,d=t.licenseServers.keys()[Symbol.iterator]();!(l=(h=d.next()).done);l=!0)f=h.value,a.drm.advanced[f]=a.drm.advanced[f]||{},a.drm.advanced[f].serverCertificate=o;e.next=22;break;case 18:e.prev=18,e.t0=e.catch(14),u=!0,c=e.t0;case 22:e.prev=22,e.prev=23,l||null==d.return||d.return();case 25:if(e.prev=25,!u){e.next=28;break}throw c;case 28:return e.finish(25);case 29:return e.finish(22);case 30:e.next=51;break;case 32:for(p=!0,m=!1,v=void 0,e.prev=35,g=t.licenseServers.keys()[Symbol.iterator]();!(p=(y=g.next()).done);p=!0)_=y.value,a.drm.advanced[_]&&delete a.drm.advanced[_].serverCertificate;e.next=43;break;case 39:e.prev=39,e.t1=e.catch(35),m=!0,v=e.t1;case 43:e.prev=43,e.prev=44,p||null==g.return||g.return();case 46:if(e.prev=46,!m){e.next=49;break}throw v;case 49:return e.finish(46);case 50:return e.finish(43);case 51:n?n.configure(a):this.player_.configure("drm.advanced",a.drm.advanced),this.remakeHash();case 53:case"end":return e.stop()}},e,this,[[14,18,22,30],[23,,25,29],[35,39,43,51],[44,,46,50]])}));return function(t,n){return e.apply(this,arguments)}}()},{key:"showPlayer_",value:function(){var t=document.getElementById("video-bar");this.showNode_(t),this.closeError_(),this.video_.poster=e.mainPoster_,t.scrollIntoView({behavior:"smooth",block:"start"})}},{key:"loadAsset",value:function(){var t=so(regeneratorRuntime.mark(function t(n){var i,r,a,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.selectedAsset=n,this.showPlayer_(),this.dispatchEventWithName_("shaka-main-selected-asset-changed"),t.next=6,this.drmConfiguration_(n);case 6:return this.controls_.getCastProxy().setAppData({asset:n}),this.nativeControlsEnabled_?(this.controls_.setEnabledShakaControls(!1),this.controls_.setEnabledNativeControls(!0)):(this.controls_.setEnabledShakaControls(!0),this.controls_.setEnabledNativeControls(!1)),i=this,r=function(){return i.nativeControlsEnabled_?new bs(i.video_):new Js(i.video_,i.container_)},this.player_.configure("textDisplayFactory",r),a=(n.storedContent?n.storedContent.offlineUri:null)||n.manifestUri,t.next=14,this.player_.load(a);case 14:this.player_.isAudioOnly()&&(this.video_.poster=e.audioOnlyPoster_),t.next=21;break;case 17:t.prev=17,t.t0=t.catch(0),(s=t.t0).code==lo.code.LOAD_INTERRUPTED?console.debug("load() interrupted"):this.onError_(s);case 21:this.remakeHash();case 22:case"end":return t.stop()}},t,this,[[0,17]])}));return function(e){return t.apply(this,arguments)}}()},{key:"remakeHash",value:function(){var t=this;if(this.fullyLoaded_){var n=[];if(this.player_){var i=this.player_.getConfiguration();me.a.runThroughHashParams(function(e,i){var r=t.getCurrentConfigValue(i),a=t.defaultConfig_,s=t.getValueFromGivenConfig_(i,a),o=isNaN(r)&&isNaN(s);r==s||o||n.push(e+"="+r)},i)}if(this.getCurrentConfigValue("abr.enabled")||n.push("noadaptation"),this.getCurrentConfigValue("streaming.jumpLargeGaps")&&n.push("jumpLargeGaps"),n.push("uilang="+this.getUILocale()),this.selectedAsset){var r=pe.testAssets.includes(this.selectedAsset);if(n.push("asset="+this.selectedAsset.manifestUri),!r&&this.selectedAsset.licenseServers.size){var a=this.selectedAsset.licenseServers.values().next().value;n.push("license="+a);var s=!0,o=!1,l=void 0;try{for(var u,c=this.selectedAsset.licenseServers.keys()[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){var d=u.value;if(!e.commonDrmSystems.includes(d)){n.push("drmSystem="+d);break}}}catch(e){o=!0,l=e}finally{try{s||null==c.return||c.return()}finally{if(o)throw l}}}!r&&this.selectedAsset.certificateUri&&n.push("certificate="+this.selectedAsset.certificateUri)}var h=document.getElementById("nav-button-container"),f=!0,p=!1,m=void 0;try{for(var v,g=h.childNodes[Symbol.iterator]();!(f=(v=g.next()).done);f=!0){var y=v.value;if(y.nodeType==Node.ELEMENT_NODE&&y.classList.contains("mdl-button--accent")){n.push("panel="+y.textContent);break}}}catch(e){p=!0,m=e}finally{try{f||null==g.return||g.return()}finally{if(p)throw m}}for(var _=0,b=["compiled","debug_compiled","uncompiled"];_<b.length;_++){var w=b[_];document.getElementById(w.split("_").join("-")+"-link").hasAttribute("disabled")&&n.push("build="+w)}if(this.nativeControlsEnabled_&&n.push("nativecontrols"),uo.log&&uo.log.currentLevel!=uo.log.MAX_LOG_LEVEL)switch(uo.log.currentLevel){case uo.log.Level.INFO:n.push("info");break;case uo.log.Level.DEBUG:n.push("debug");break;case uo.log.Level.V2:n.push("vv");break;case uo.log.Level.V1:n.push("v")}this.setNewHashSilent_(n.join(";"))}}},{key:"setNewHashSilent_",value:function(e){var t=document.location.pathname+"#"+e;history.replaceState(null,"",t)}},{key:"getHamburgerMenu",value:function(){return document.getElementById("hamburger-menu-contents")}},{key:"hideNode_",value:function(e){e.classList.add("hidden")}},{key:"showNode_",value:function(e){e.classList.remove("hidden")}},{key:"addNavButton",value:function(e){var t=this,n=document.getElementById("nav-button-container"),i=document.getElementById("contents"),r=document.getElementById("nav-button-"+e),a=this.getParams_(),s=a.panel==encodeURI(r.textContent);s||a.panel||(s=null!=r.getAttribute("defaultselected"));var o=document.createElement("div");this.hideNode_(o),i.appendChild(o);var l=function(){var e=!0,a=!1,s=void 0;try{for(var l,u=n.childNodes[Symbol.iterator]();!(e=(l=u.next()).done);e=!0){var c=l.value;c.nodeType==Node.ELEMENT_NODE&&c.classList.remove("mdl-button--accent")}}catch(e){a=!0,s=e}finally{try{e||null==u.return||u.return()}finally{if(a)throw s}}var d=!0,h=!1,f=void 0;try{for(var p,m=i.childNodes[Symbol.iterator]();!(d=(p=m.next()).done);d=!0){var v=p.value;v.nodeType==Node.ELEMENT_NODE&&t.hideNode_(v)}}catch(e){h=!0,f=e}finally{try{d||null==m.return||m.return()}finally{if(h)throw f}}r.classList.add("mdl-button--accent"),t.showNode_(o),t.remakeHash(),t.dispatchEventWithName_("shaka-main-page-changed"),o.scrollIntoView({behavior:"smooth",block:"start"})};return r.addEventListener("click",l),s&&Promise.resolve().then(l),o}},{key:"dispatchEventWithName_",value:function(e){var t=document.createEvent("CustomEvent");t.initCustomEvent(e,!1,!1,null),document.dispatchEvent(t)}},{key:"setUpVersionString_",value:function(){for(var e=zs.version.split("-"),t=[],n=function(){var n=r[i];e.includes(n)&&(t.push(n),e=e.filter(function(e){return e!=n}))},i=0,r=["debug","uncompiled"];i<r.length;i++)n();var a=document.getElementById("version-string");a.textContent=e.join("-"),t.length>0&&(a.textContent+=" ("+t.join(", ")+")")}},{key:"closeError_",value:function(){document.getElementById("error-display").classList.add("hidden");var e=document.getElementById("error-display-link");e.href="",e.textContent="",e.severity=null}},{key:"onErrorEvent_",value:function(e){this.onError_(e.detail)}},{key:"onError_",value:function(e){var t=e.severity;null!=t&&null!=e.severity||(t=lo.severity.CRITICAL);var n=e.message||"Error code "+e.code,i="";e.code&&(i="../docs/api/Error.html#value:"+e.code),console.error(e),this.handleError_(t,n,i)}},{key:"handleError_",value:function(e,t,n){var i=document.getElementById("error-display-link");(null==i.severity||e>i.severity)&&(i.href=n,void 0===i.textContent?i.innerText=t:i.textContent=t,i.severity=e,i.href?i.classList.remove("input-disabled"):i.classList.add("input-disabled"),document.getElementById("error-display").classList.remove("hidden"))}},{key:"onCastStatusChange_",value:function(e){e&&!this.selectedAsset&&(this.selectedAsset=de.makeBlankAsset(),this.showPlayer_())}}])&&oo(t.prototype,n),i&&oo(t,i),e}();co.commonDrmSystems=["com.widevine.alpha","com.microsoft.playready","com.apple.fps.1_0","com.adobe.primetime","org.w3.clearkey"];var ho=new co,fo=ho;function po(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}co.mainPoster_="https://shaka-player-demo.appspot.com/assets/poster.jpg",co.audioOnlyPoster_="https://shaka-player-demo.appspot.com/assets/audioOnly.gif",co.initWrapper=function(){var e=so(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),ho.onError_(e.t0),console.error(e.t0);case 9:case"end":return e.stop()}},e,null,[[0,5]])}));return function(t){return e.apply(this,arguments)}}(),document.addEventListener("shaka-ui-loaded",function(){co.initWrapper(function(){return ho.init()})}),document.addEventListener("shaka-ui-load-failed",function(e){co.initWrapper(function(){return ho.initFailed()})});
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var mo=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"registerDialog",value:function(e){}}],(n=null)&&po(t.prototype,n),i&&po(t,i),e}();function vo(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(i,r)}function go(e){return function(){var t=this,n=arguments;return new Promise(function(i,r){var a=e.apply(t,n);function s(e){vo(a,i,r,s,o,"next",e)}function o(e){vo(a,i,r,s,o,"throw",e)}s(void 0)})}}function yo(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}window.shaka=window.shaka||{};window.shaka;var _o=function(){function e(t,n,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.card_=document.createElement("div"),this.asset_=n,this.actions_=document.createElement("div"),this.featureIconsContainer_=document.createElement("div"),this.progressBar_=document.createElement("progress"),this.remakeButtonsFn_=r,this.card_.classList.add("mdl-card-wide"),this.card_.classList.add("mdl-card"),this.card_.classList.add("mdl-shadow--2dp"),this.card_.classList.add("asset-card");var a=document.createElement("div");a.classList.add("mdl-card__title"),this.card_.appendChild(a);var s=document.createElement("h2");if(s.classList.add("mdl-card__title-text"),s.textContent=n.shortName||n.name,a.appendChild(s),n.iconUri){var o=document.createElement("picture"),l=document.createElement("source");l.srcset=n.iconUri.replace(/.png$/,".webp"),l.type="image/webp";var u=document.createElement("source");u.srcset=n.iconUri,u.type="image/png";var c=document.createElement("img");c.src=n.iconUri,c.alt="",o.appendChild(l),o.appendChild(u),o.appendChild(c),this.card_.appendChild(o)}if(n.description&&i){var d=document.createElement("div");d.classList.add("mdl-card__supporting-text"),d.textContent=n.description,this.card_.appendChild(d)}this.card_.appendChild(this.featureIconsContainer_),this.addFeatureIcons_(n),this.actions_.classList.add("mdl-card__actions"),this.actions_.classList.add("mdl-card--border"),this.card_.appendChild(this.actions_);var h=document.createElement("div");this.progressBar_.classList.add("hidden"),this.progressBar_.setAttribute("max",1),this.progressBar_.setAttribute("value",n.storedProgress),h.appendChild(this.progressBar_),this.card_.appendChild(h),t.appendChild(this.card_),this.remakeButtons()}var t,n,i;return t=e,(n=[{key:"addFeatureIcon_",value:function(e,t){var n=document.createElement("div");n.classList.add("feature-icon"),n.setAttribute("icon",e),this.featureIconsContainer_.appendChild(n),Rt.make(n,t)}},{key:"addFeatureIcons_",value:function(e){var t=pe.Feature,n=pe.KeySystem,i=(new Map).set(t.SUBTITLES,"subtitles").set(t.CAPTIONS,"closed_caption").set(t.LIVE,"live").set(t.TRICK_MODE,"trick_mode").set(t.HIGH_DEFINITION,"high_definition").set(t.ULTRA_HIGH_DEFINITION,"ultra_high_definition").set(t.SURROUND,"surround_sound").set(t.MULTIPLE_LANGUAGES,"multiple_languages").set(t.AUDIO_ONLY,"audio_only"),r=!0,a=!1,s=void 0;try{for(var o,l=e.features[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var u=o.value,c=i.get(u);c&&this.addFeatureIcon_(c,u)}}catch(e){a=!0,s=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw s}}var d=!0,h=!1,f=void 0;try{for(var p,m=e.drm[Symbol.iterator]();!(d=(p=m.next()).done);d=!0){switch(p.value){case n.WIDEVINE:this.addFeatureIcon_("widevine","Widevine DRM");break;case n.CLEAR_KEY:this.addFeatureIcon_("clear_key","Clear Key DRM");break;case n.PLAYREADY:this.addFeatureIcon_("playready","PlayReady DRM")}}}catch(e){h=!0,f=e}finally{try{d||null==m.return||m.return()}finally{if(h)throw f}}}},{key:"markAsUnsupported",value:function(e){this.card_.classList.add("asset-card-unsupported"),this.makeUnsupportedButton_("Not Available",e)}},{key:"makeUnsupportedButton_",value:function(e,t){var n=this.addButton(e,function(){});if(n.setAttribute("disabled",""),t){var i=document.createElement("div");n.parentElement&&n.parentElement.removeChild(n),i.classList.add("tooltip-attach-point"),i.appendChild(n),this.actions_.appendChild(i),Rt.make(i,t)}return n}},{key:"selectByAsset",value:function(e){this.card_.classList.remove("selected"),this.asset_==e&&this.card_.classList.add("selected")}},{key:"remakeButtons",value:function(){$t.removeAllChildren(this.actions_),this.remakeButtonsFn_(this)}},{key:"addStoreButton",value:function(){var e=this,t=function(e,t,n){t.classList.add("asset-card-corner-button");var i=document.createElement("i");i.textContent=n,i.classList.add("material-icons"),e.appendChild(i)},n=fo.getAssetUnsupportedReason(this.asset_,!0);if(!n&&this.asset_.storeCallback)if(this.asset_.isStored()){var i=this.addButton("",function(){e.makeDeleteDialog_(i)});t(i,i,"offline_pin")}else{var r=this.addButton("",go(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r.disabled=!0,t.next=3,e.asset_.storeCallback();case 3:e.remakeButtons();case 4:case"end":return t.stop()}},t)})));t(r,r,"get_app")}else{var a=this.makeUnsupportedButton_("",n);t(a,a.parentElement||a,"get_app")}}},{key:"makeDeleteDialog_",value:function(e){var t=this,n=this.card_.parentElement;if(n){var i=document.createElement("dialog");i.classList.add("mdl-dialog"),n.appendChild(i),i.showModal||mo.registerDialog(i);var r=document.createElement("h2");r.classList.add("mdl-typography--title"),r.textContent="Delete the offline copy?",i.appendChild(r);var a=document.createElement("div");i.appendChild(a);var s=function(e,t){var n=document.createElement("button");n.textContent=e,n.classList.add("mdl-button"),n.classList.add("mdl-button--colored"),n.classList.add("mdl-js-button"),n.classList.add("mdl-js-ripple-effect"),n.addEventListener("click",function(){t()}),a.appendChild(n),n.blur()};s("Yes",go(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i.close(),e.disabled=!0,n.next=4,t.asset_.unstoreCallback();case 4:t.remakeButtons();case 5:case"end":return n.stop()}},n)}))),s("No",function(){i.close()}),i.showModal()}}},{key:"updateProgress",value:function(){if(this.asset_.storedProgress<1){this.progressBar_.classList.remove("hidden");var e=!0,t=!1,n=void 0;try{for(var i,r=this.actions_.childNodes[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){i.value.disabled=!0}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}else{this.progressBar_.classList.add("hidden");var a=!0,s=!1,o=void 0;try{for(var l,u=this.actions_.childNodes[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){l.value.disabled=!1}}catch(e){s=!0,o=e}finally{try{a||null==u.return||u.return()}finally{if(s)throw o}}}this.progressBar_.setAttribute("value",this.asset_.storedProgress)}},{key:"addButton",value:function(e,t){var n=document.createElement("button");return n.classList.add("mdl-button"),n.classList.add("mdl-button--colored"),n.classList.add("mdl-js-button"),n.classList.add("mdl-js-ripple-effect"),n.textContent=e,n.addEventListener("click",function(){n.hasAttribute("disabled")||t()}),this.actions_.appendChild(n),n}}])&&yo(t.prototype,n),i&&yo(t,i),e}();function bo(e){return(bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wo(e,t){return!t||"object"!==bo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Eo(e){return(Eo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function So(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&To(e,t)}function To(e,t){return(To=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ko(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Co(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Io=function(){function e(t,n,i,r,a){var s=this;if(ko(this,e),this.container_=document.createElement(i),t.latestElementContainer.appendChild(this.container_),this.input_=document.createElement(n),this.input_.onchange=function(){a(s.input_)},this.input_.id=e.generateNewId_("input"),this.container_.appendChild(this.input_),t.latestTooltip){var o=document.createElement("span");o.textContent=t.latestTooltip,o.classList.add("hidden"),o.id=e.generateNewId_("extra-info"),this.container_.appendChild(o),this.input_.setAttribute("aria-describedby",o.id)}this.extra_=null,r&&(this.extra_=document.createElement(r),this.container_.appendChild(this.extra_))}var t,n,i;return t=e,i=[{key:"generateNewId_",value:function(t){var n=e.lastId_;return e.lastId_+=1,t+"-labeled-"+n}}],(n=[{key:"input",value:function(){return this.input_}},{key:"container",value:function(){return this.container_}},{key:"extra",value:function(){return this.extra_}}])&&Co(t.prototype,n),i&&Co(t,i),e}();Io.lastId_=0;var Ao=function(e){function t(e,n,i,r){var a;ko(this,t),(a=wo(this,Eo(t).call(this,e,"select","div","label",i))).container_.classList.add("mdl-textfield"),a.container_.classList.add("mdl-js-textfield"),a.container_.classList.add("mdl-textfield--floating-label"),a.input_.classList.add("mdl-textfield__input"),a.extra_.classList.add("mdl-textfield__label"),a.extra_.setAttribute("for",a.input_.id);for(var s=0,o=Object.keys(r);s<o.length;s++){var l=o[s],u=document.createElement("option");u.textContent=r[l],u.value=l,a.input_.appendChild(u)}return a}return So(t,Io),t}(),xo=function(e){function t(e,n,i){var r;return ko(this,t),(r=wo(this,Eo(t).call(this,e,"input","label","span",i))).input_.type="checkbox",r.container_.classList.add("mdl-switch"),r.container_.classList.add("mdl-js-switch"),r.container_.classList.add("mdl-js-ripple-effect"),r.container_.setAttribute("for",r.input_.id),r.input_.classList.add("mdl-switch__input"),r.extra_.classList.add("mdl-switch__label"),r}return So(t,Io),t}(),Lo=function(e){function t(e,n,i){var r;return ko(this,t),(r=wo(this,Eo(t).call(this,e,"input","div","label",i))).container_.classList.add("mdl-textfield"),r.container_.classList.add("mdl-js-textfield"),r.container_.classList.add("mdl-textfield--floating-label"),r.input_.classList.add("mdl-textfield__input"),r.extra_.classList.add("mdl-textfield__label"),r.extra_.setAttribute("for",r.input_.id),r}return So(t,Io),t}(),Ro=function(e){function t(e,n,i,r){var a;ko(this,t),a=wo(this,Eo(t).call(this,e,n,i));try{var o=new s.a(a.input_);o.list=r.slice(),o.minChars=0,a.input_.addEventListener("focus",function(){o.evaluate()})}catch(e){console.log({Awesomplete:s.a})}return a}return So(t,Lo),t}(),Po=function(e){function t(e,n,i,r,a,s){var o;ko(this,t),o=wo(this,Eo(t).call(this,e,n,i));var l=document.createElement("span");return l.classList.add("mdl-textfield__error"),o.container_.appendChild(l),l.textContent="Must be a positive",o.input_.pattern="(Infinity|",a?o.input_.pattern+="[0-9]*":(o.input_.pattern+="[0-9]*[1-9][0-9]*",l.textContent+=", nonzero"),r?(o.input_.pattern+="(.[0-9]+)?",l.textContent+=" number."):l.textContent+=" integer.",o.input_.pattern+=")",s&&(o.input_.pattern+="?"),o}return So(t,Lo),t}();function Do(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Oo=function(){function e(t,n,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.style_=i,this.header_,this.table_=document.createElement("div"),this.latestRow_,this.latestElementContainer,this.latestTooltip,this.numRows_=0,n&&this.createHeader_(t,n),this.table_.classList.add(i),i==e.Style.ACCORDION&&this.table_.classList.add("hidden"),t.appendChild(this.table_),r&&this.addDocLink_(this.table_,r)}var t,n,i;return t=e,(n=[{key:"getIsOpen",value:function(){return this.style_==e.Style.ACCORDION&&this.table_.classList.contains("show")}},{key:"open",value:function(){var t=this;!this.style_!=e.Style.ACCORDION&&(this.table_.classList.remove("hidden"),setTimeout(function(){t.table_.classList.add("show")},20),this.header_.classList.add("mdl-button--colored"))}},{key:"close",value:function(){var t=this;this.style_==e.Style.ACCORDION&&(this.table_.classList.remove("show"),this.table_.addEventListener("transitionend",function(e){t.table_.classList.add("hidden")},{once:!0}),this.header_.classList.remove("mdl-button--colored"))}},{key:"createHeader_",value:function(t,n){var i=this;this.style_==e.Style.ACCORDION?(this.header_=document.createElement("button"),this.header_.classList.add("mdl-button--raised"),this.header_.classList.add("mdl-button"),this.header_.classList.add("mdl-js-button"),this.header_.classList.add("mdl-js-ripple-effect"),this.header_.addEventListener("click",function(){i.getIsOpen()?i.close():i.open()})):this.header_=document.createElement("h3"),this.header_.textContent=n,t.appendChild(this.header_)}},{key:"addDocLink_",value:function(e,t){var n=document.createElement("a");n.href=t,n.target="_blank",n.classList.add("mdl-button"),n.classList.add("mdl-js-button"),n.classList.add("mdl-js-ripple-effect"),n.classList.add("mdl-button--colored");var i=document.createElement("i");i.classList.add("material-icons"),i.textContent="help",n.appendChild(i),e.appendChild(n)}},{key:"addRow",value:function(e,t,n){this.latestRow_=document.createElement("div"),n&&this.latestRow_.classList.add(n),this.table_.appendChild(this.latestRow_);var i="input-container-row-"+this.numRows_;if(this.numRows_+=1,e){var r=document.createElement("label");r.setAttribute("for",i),r.classList.add("input-container-label");var a=document.createElement("b");a.textContent=e,r.appendChild(a),this.latestRow_.appendChild(r)}this.latestElementContainer=document.createElement("div"),this.latestRow_.appendChild(this.latestElementContainer),this.latestElementContainer.classList.add("input-container-row"),this.latestElementContainer.id=i,this.latestTooltip=t,t&&(Rt.make(this.latestRow_,t),this.latestRow_.setAttribute("tabindex",-1),this.latestRow_.classList.add("borderless"))}}])&&Do(t.prototype,n),i&&Do(t,i),e}();function Mo(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function No(e,t,n){return t&&Mo(e.prototype,t),n&&Mo(e,n),e}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Oo.Style={VERTICAL:"input-container-style-vertical",ACCORDION:"input-container-style-accordion",FLEX:"input-container-style-flex"};window.shaka;var Uo=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.assetCards_=[],this.messageDiv_=document.createElement("div"),this.assetCardDiv_=document.createElement("div"),t.appendChild(this.messageDiv_),this.makeMessage_(),t.appendChild(this.assetCardDiv_),document.addEventListener("shaka-main-selected-asset-changed",function(){n.updateSelected_()}),document.addEventListener("shaka-main-offline-progress",function(){n.updateOfflineProgress_()}),document.addEventListener("shaka-main-page-changed",function(){n.assetCardDiv_.childNodes.length||t.classList.contains("hidden")||n.remakeAssetCards_()})}return No(e,null,[{key:"init",value:function(){var t=fo.addNavButton("front");new e(t)}}]),No(e,[{key:"makeMessage_",value:function(){var e=this,t="shakaPlayerHideFrontMessage";if(!window.localStorage.getItem(t)){var n=function(t,n){var i=document.createElement("h2");i.classList.add("mdl-typography--"+t),i.textContent=n,e.messageDiv_.appendChild(i)};n("body-2","This is a demo of Google's Shaka Player, a JavaScript library for adaptive video streaming."),n("body-1","Choose a video to playback; more assets are available via the search tab.");var i=document.createElement("button");i.classList.add("mdl-button"),i.classList.add("mdl-button--colored"),i.classList.add("mdl-js-button"),i.classList.add("mdl-js-ripple-effect"),i.textContent="Dismiss",i.addEventListener("click",function(){$t.removeAllChildren(e.messageDiv_),window.localStorage.setItem(t,"true")}),this.messageDiv_.appendChild(i)}}},{key:"remakeAssetCards_",value:function(){var e=this;$t.removeAllChildren(this.assetCardDiv_);var t=pe.testAssets.filter(function(e){return e.isFeatured&&!e.disabled});console.log(t),this.assetCards_=t.map(function(t){return e.createAssetCardFor_(t,e.assetCardDiv_)}),this.updateSelected_()}},{key:"createAssetCardFor_",value:function(e,t){var n=this;return new _o(t,e,!0,function(t){var i=fo.getAssetUnsupportedReason(e,!1);i?t.markAsUnsupported(i):(t.addButton("Play",function(){fo.loadAsset(e),n.updateSelected_()}),t.addStoreButton())})}},{key:"updateOfflineProgress_",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.assetCards_[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){i.value.updateProgress()}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}},{key:"updateSelected_",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.assetCards_[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){i.value.selectByAsset(fo.selectedAsset)}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}}]),e}();function Fo(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Bo(e,t,n){return t&&Fo(e.prototype,t),n&&Fo(e,n),e}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */document.addEventListener("shaka-main-loaded",Uo.init);window.shaka;var Vo=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.desiredFeatures_=[],this.desiredSource_,this.desiredDRM_,this.makeSearchDiv_(t),this.assetCards_=[],this.resultsDiv_=document.createElement("div"),t.appendChild(this.resultsDiv_),document.addEventListener("shaka-main-selected-asset-changed",function(){n.updateSelected_()}),document.addEventListener("shaka-main-offline-progress",function(){n.updateOfflineProgress_()}),document.addEventListener("shaka-main-page-changed",function(){n.resultsDiv_.childNodes.length||t.classList.contains("hidden")||n.remakeResultsDiv_()})}return Bo(e,null,[{key:"init",value:function(){var t=fo.addNavButton("search");new e(t)}}]),Bo(e,[{key:"createAssetCardFor_",value:function(e){var t=this,n=this.resultsDiv_;return new _o(n,e,!1,function(n){var i=fo.getAssetUnsupportedReason(e,!1);i?n.markAsUnsupported(i):(n.addButton("Play",function(){fo.loadAsset(e),t.updateSelected_()}),n.addStoreButton())})}},{key:"updateOfflineProgress_",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.assetCards_[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){i.value.updateProgress()}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}},{key:"updateSelected_",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.assetCards_[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){i.value.selectByAsset(fo.selectedAsset)}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}},{key:"remakeResultsDiv_",value:function(){var e=this;$t.removeAllChildren(this.resultsDiv_);var t=this.searchResults_();this.assetCards_=t.map(function(t){return e.createAssetCardFor_(t)}),this.updateSelected_()}},{key:"addDesiredTerm_",value:function(t,n,i){switch(n){case e.TermType.DRM:this.desiredDRM_=t;break;case e.TermType.SOURCE:this.desiredSource_=t;break;case e.TermType.FEATURE:var r=!0,a=!1,s=void 0;try{for(var o,l=i[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var u=o.value,c=this.desiredFeatures_.indexOf(u);-1!=c&&this.desiredFeatures_.splice(c,1)}}catch(e){a=!0,s=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw s}}this.desiredFeatures_.push(t)}}},{key:"removeDesiredTerm_",value:function(t,n){var i;switch(n){case e.TermType.DRM:this.desiredDRM_=null;break;case e.TermType.SOURCE:this.desiredSource_=null;break;case e.TermType.FEATURE:-1!=(i=this.desiredFeatures_.indexOf(t))&&this.desiredFeatures_.splice(i,1)}}},{key:"makeBooleanInput_",value:function(e,t,n){var i=this;e.addRow(t,null,"significant-right-padding");new xo(e,t,function(e){e.checked?i.addDesiredTerm_(t,n,[t]):i.removeDesiredTerm_(t,n),i.remakeResultsDiv_(),componentHandler.upgradeDom()})}},{key:"makeSelectInput_",value:function(e,t,n,i){var r=this;e.addRow(null,null);var a={},s=!0,o=!1,l=void 0;try{for(var u,c=n[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){var d=u.value;if("DRM"==i){for(var h in pe.KeySystem)if(pe.KeySystem[h]==d){a[d]=h.split("_").map(function(e){return e[0]+e.substr(1).toLowerCase()}).join(" ");break}}else a[d]=d}}catch(e){o=!0,l=e}finally{try{s||null==c.return||c.return()}finally{if(o)throw l}}a.Unspecified="Unspecified";var f="Unspecified",p=new Ao(e,t,function(e){"Unspecified"!=e.value?r.addDesiredTerm_(e.value,i,n):r.removeDesiredTerm_(f,i),f=e.value,r.remakeResultsDiv_(),componentHandler.upgradeDom()},a);p.extra().textContent=t,p.input().value="Unspecified"}},{key:"makeSearchDiv_",value:function(t){var n=pe.Feature,i=e.TermType.FEATURE,r=e.TermType.DRM,a=e.TermType.SOURCE,s=new Oo(t,null,Oo.Style.FLEX,null);this.makeSelectInput_(s,"Manifest",[n.DASH,n.HLS],i),this.makeSelectInput_(s,"Container",[n.MP4,n.MP2TS,n.WEBM],i),this.makeSelectInput_(s,"DRM",Object.values(pe.KeySystem),r),this.makeSelectInput_(s,"Source",Object.values(pe.Source).filter(function(e){return"Custom"!=e}),a);var o=Oo.Style.FLEX,l=new Oo(t,null,o,null);this.makeBooleanInput_(l,n.LIVE,i),this.makeBooleanInput_(l,n.HIGH_DEFINITION,i),this.makeBooleanInput_(l,n.XLINK,i),this.makeBooleanInput_(l,n.SUBTITLES,i),this.makeBooleanInput_(l,n.TRICK_MODE,i),this.makeBooleanInput_(l,n.SURROUND,i),this.makeBooleanInput_(l,n.OFFLINE,i),this.makeBooleanInput_(l,n.STORED,i)}},{key:"searchResults_",value:function(){var e=this;return pe.testAssets.filter(function(t){if(t.disabled)return!1;if(e.desiredDRM_&&!t.drm.includes(e.desiredDRM_))return!1;if(e.desiredSource_&&t.source!=e.desiredSource_)return!1;var n=!0,i=!1,r=void 0;try{for(var a,s=e.desiredFeatures_[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;if(o==pe.Feature.STORED){if(!t.isStored())return!1}else if(!t.features.includes(o))return!1}}catch(e){i=!0,r=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}return!0})}}]),e}();function Ho(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(i,r)}function Go(e){return function(){var t=this,n=arguments;return new Promise(function(i,r){var a=e.apply(t,n);function s(e){Ho(a,i,r,s,o,"next",e)}function o(e){Ho(a,i,r,s,o,"throw",e)}s(void 0)})}}function jo(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function zo(e,t,n){return t&&jo(e.prototype,t),n&&jo(e,n),e}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vo.SearchTerm={},Vo.TermType={FEATURE:"Feature",DRM:"DRM",SOURCE:"Source"},document.addEventListener("shaka-main-loaded",Vo.init);window.shaka;var Wo=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dialog_=document.createElement("dialog"),this.dialog_.classList.add("mdl-dialog"),t.appendChild(this.dialog_),this.dialog_.showModal||dialogPolyfill.registerDialog(this.dialog_),this.assets_=this.loadAssetInfos_(),this.assetCards_=[],this.savedList_=document.createElement("div"),t.appendChild(this.savedList_);var i=document.createElement("div");i.classList.add("add-button-container"),t.appendChild(i);var r=this.makeButton_("add",!0,function(){n.showAssetDialog_(de.makeBlankAsset())});i.appendChild(r),document.addEventListener("shaka-main-selected-asset-changed",function(){n.updateSelected_()}),document.addEventListener("shaka-main-offline-progress",function(){n.updateOfflineProgress_()}),document.addEventListener("shaka-main-page-changed",function(){n.savedList_.childNodes.length||t.classList.contains("hidden")||n.remakeSavedList_()})}return zo(e,null,[{key:"init",value:function(){var t=fo.addNavButton("custom");new e(t)}}]),zo(e,[{key:"assets",value:function(){return Array.from(this.assets_)}},{key:"updateOfflineProgress_",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.assetCards_[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){i.value.updateProgress()}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}},{key:"showAssetDialog_",value:function(e){var t=this;$t.removeAllChildren(this.dialog_);var n=document.createElement("div");this.dialog_.appendChild(n);var i=document.createElement("div");this.dialog_.appendChild(i);var r,a,s=[],o=function(){var t=r.value,n=a.value;if(t){e.licenseServers.clear();var i=!0,s=!1,o=void 0;try{for(var l,u=ShakaDemoMain.commonDrmSystems[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value;e.licenseServers.set(c,t)}}catch(e){s=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(s)throw o}}n&&e.licenseServers.set(n,t)}else e.licenseServers.clear()},l=ShakaDemoInputContainer.Style.VERTICAL,u=new ShakaDemoInputContainer(n,null,l,null),c=function(e,t,n){u.addRow(null,null);var i=new Lo(u,e,n);i.extra().textContent=e,t(i.input(),i.container())};c("Manifest URL",function(t,n){t.value=e.manifestUri,s.push(t);var i=document.createElement("span");i.classList.add("mdl-textfield__error"),i.textContent="Must have a manifest URL.",n.appendChild(i),t.required=!0,t.pattern="^(?!([\r\n\t\f\v ]+)$).*$"},function(t){e.manifestUri=t.value});c("Custom License Server URL",function(t,n){r=t;var i=e.licenseServers.keys().next();i&&i.value&&(t.value=e.licenseServers.get(i.value))},function(e){o()});c("Custom License Certificate URL",function(t,n){e.certificateUri&&(t.value=e.certificateUri)},function(t){e.certificateUri=t.value});c("Custom DRM System",function(t,n){a=t;var i=e.licenseServers.keys(),r=!0,s=!1,o=void 0;try{for(var l,u=i[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){var c=l.value;if(!ShakaDemoMain.commonDrmSystems.includes(c)){t.value=c;break}}}catch(e){s=!0,o=e}finally{try{r||null==u.return||u.return()}finally{if(s)throw o}}},function(e){o()});c("Name",function(n,i){n.value=e.name,s.push(n);var r=document.createElement("span");r.classList.add("mdl-textfield__error"),r.textContent="Must be a unique name.",i.appendChild(r),n.required=!0,n.pattern="^(?!( *";var a=!0,o=!1,l=void 0;try{for(var u,c=t.assets_[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d=u.value;d!=e&&(n.pattern+="|"+function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(d.name))}}catch(e){o=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw l}}n.pattern+=")$).*$"},function(t){e.name=t.value});c("Icon URL",function(t,n){if(e.iconUri){t.value=e.iconUri;var r=document.createElement("img");r.src=t.value,r.alt="",i.appendChild(r)}},function(t){if($t.removeAllChildren(i),e.iconUri=t.value,t.value){var n=document.createElement("img");n.src=t.value,n.alt="",i.appendChild(n)}});var d=document.createElement("tr");n.appendChild(d),d.appendChild(this.makeButton_("Save",!1,function(){for(var n=0,i=s;n<i.length;n++){if(!i[n].validity.valid)return}fo.setupOfflineSupport(e),t.assets_.add(e),t.saveAssetInfos_(t.assets_),t.remakeSavedList_(),t.dialog_.close()})),d.appendChild(this.makeButton_("Cancel",!1,function(){t.dialog_.close()})),componentHandler.upgradeDom(),this.dialog_.showModal()}},{key:"loadAssetInfos_",value:function(){var t=window.localStorage.getItem(e.saveId_);if(t){var n=JSON.parse(t);return new Set(n.map(function(e){var t=de.fromJSON(e);return fo.setupOfflineSupport(t),t}))}return new Set}},{key:"saveAssetInfos_",value:function(t){var n=e.saveId_,i=Array.from(t);window.localStorage.setItem(n,JSON.stringify(i))}},{key:"makeButton_",value:function(e,t,n){var i=document.createElement("button");if(t){i.classList.add("mdl-button--fab"),i.classList.add("mdl-button--colored");var r=document.createElement("i");r.classList.add("material-icons"),r.textContent=e,i.appendChild(r)}else i.textContent=e,i.classList.add("mdl-button--raised");return i.addEventListener("click",n),i.classList.add("mdl-button"),i.classList.add("mdl-js-button"),i.classList.add("mdl-js-ripple-effect"),i}},{key:"createAssetCardFor_",value:function(e){var t=this,n=this.savedList_;return new AssetCard(n,e,!1,function(n){n.addButton("Play",function(){fo.loadAsset(e),t.updateSelected_()}),n.addButton("Edit",Go(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.unstoreCallback){n.next=3;break}return n.next=3,e.unstoreCallback();case 3:t.showAssetDialog_(e);case 4:case"end":return n.stop()}},n)}))),n.addButton("Delete",Go(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.assets_.delete(e),!e.unstoreCallback){n.next=4;break}return n.next=4,e.unstoreCallback();case 4:t.saveAssetInfos_(t.assets_),t.remakeSavedList_();case 6:case"end":return n.stop()}},n)}))),n.addStoreButton()})}},{key:"updateSelected_",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.assetCards_[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){i.value.selectByAsset(fo.selectedAsset)}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}},{key:"remakeSavedList_",value:function(){var e=this;if($t.removeAllChildren(this.savedList_),0==this.assets_.size){var t=function(t,n){var i=document.createElement("h2");i.classList.add("mdl-typography--"+t),i.textContent=n,e.savedList_.appendChild(i)};t("title","Try Shaka Player with your own content!"),t("body-2","Press the button below to add a custom asset."),t("body-1","Custom assets will remain even after reloading the page.")}else this.assetCards_=Array.from(this.assets_).map(function(t){return e.createAssetCardFor_(t)}),this.updateSelected_()}}]),e}();function qo(e){return(qo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yo(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ko(e,t,n){return t&&Yo(e.prototype,t),n&&Yo(e,n),e}
/**
 * @license
 * Copyright 2019 Anish M Prasad
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wo.saveId_="shakaPlayerDemoSavedAssets",document.addEventListener("shaka-main-loaded",Wo.init);var Xo=window.shaka,$o=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container_=t,this.sections_=[],this.latestInput_=null,this.addedFields_=new Set,this.reload_(),document.addEventListener("shaka-main-config-change",function(){n.reloadAndSaveState_()}),document.addEventListener("shaka-main-drawer-state-change",function(){n.setContentAvailability_(fo.getIsDrawerOpen())}),this.setContentAvailability_(fo.getIsDrawerOpen())}return Ko(e,null,[{key:"init",value:function(){var t=fo.getHamburgerMenu();new e(t)}}]),Ko(e,[{key:"setContentAvailability_",value:function(e){e?this.container_.classList.remove("hidden"):this.container_.classList.add("hidden")}},{key:"reload_",value:function(){$t.removeAllChildren(this.container_),this.sections_=[],this.addMetaSection_(),this.addLanguageSection_(),this.addAbrSection_(),this.addOfflineSection_(),this.addDrmSection_(),this.addStreamingSection_(),this.addManifestSection_(),this.addRetrictionsSection_("",""),this.checkSectionCompleteness_(),this.checkSectionValidity_()}},{key:"reloadAndSaveState_",value:function(){var e=this.sections_.map(function(e){return e.getIsOpen()});this.reload_();for(var t=0;t<e.length;t++){var n=e[t],i=this.sections_[t];n&&i.open()}ro.upgradeDom()}},{key:"addDrmSection_",value:function(){var e=this,t=this.resolveExternLink_(".DrmConfiguration");this.addSection_("DRM",t).addBoolInput_("Delay License Request Until Played","drm.delayLicenseRequestUntilPlayed");var n=fo.getConfiguration().drm.advanced||{},i=["SW_SECURE_CRYPTO","SW_SECURE_DECODE","HW_SECURE_CRYPTO","HW_SECURE_DECODE","HW_SECURE_ALL"],r=function(t,r){e.addDatalistInput_(t,i,function(e){for(var t in n)n[t][r]=e.value;fo.configure("drm.advanced",n),fo.remakeHash()});var a=Object.keys(n)[0];if(a){var s=n[a][r];e.latestInput_.input().value=s}};r("Video Robustness","videoRobustness"),r("Audio Robustness","audioRobustness"),this.addRetrySection_("drm","DRM")}},{key:"addManifestSection_",value:function(){var e=this.resolveExternLink_(".ManifestConfiguration");this.addSection_("Manifest",e).addBoolInput_("Ignore DASH DRM Info","manifest.dash.ignoreDrmInfo").addBoolInput_("Auto-Correct DASH Drift","manifest.dash.autoCorrectDrift").addBoolInput_("Xlink Should Fail Gracefully","manifest.dash.xlinkFailGracefully").addNumberInput_("Availability Window Override","manifest.availabilityWindowOverride",!0,!1,!0).addTextInput_("Clock Sync URI","manifest.dash.clockSyncUri").addBoolInput_("Ignore DRM Info","manifest.dash.ignoreDrmInfo").addNumberInput_("Default Presentation Delay","manifest.dash.defaultPresentationDelay").addBoolInput_("Ignore Min Buffer Time","manifest.dash.ignoreMinBufferTime"),this.addRetrySection_("manifest","Manifest")}},{key:"addAbrSection_",value:function(){var e=this.resolveExternLink_(".AbrConfiguration");this.addSection_("Adaptation",e).addBoolInput_("Enabled","abr.enabled").addNumberInput_("Default Bandwidth Estimate","abr.defaultBandwidthEstimate").addNumberInput_("Bandwidth Downgrade Target","abr.bandwidthDowngradeTarget",!0).addNumberInput_("Bandwidth Upgrade Target","abr.bandwidthUpgradeTarget",!0).addNumberInput_("Switch Interval","abr.switchInterval",!0),this.addRetrictionsSection_("abr","Adaptation")}},{key:"addRetrictionsSection_",value:function(e,t){var n=(e?e+".":"")+"restrictions.",i=(t?t+" ":"")+"Restrictions",r=this.resolveExternLink_(".Restrictions");this.addSection_(i,r).addNumberInput_("Min Width",n+"minWidth").addNumberInput_("Max Width",n+"maxWidth").addNumberInput_("Min Height",n+"minHeight").addNumberInput_("Max Height",n+"maxHeight").addNumberInput_("Min Pixels",n+"minPixels").addNumberInput_("Max Pixels",n+"maxPixels").addNumberInput_("Min Bandwidth",n+"minBandwidth").addNumberInput_("Max Bandwidth",n+"maxBandwidth")}},{key:"addRetrySection_",value:function(e,t){var n=e+".retryParameters.",i=this.resolveExternLink_(".RetryParameters");this.addSection_(t+" Retry Parameters",i).addNumberInput_("Max Attempts",n+"maxAttempts").addNumberInput_("Base Delay",n+"baseDelay",!0).addNumberInput_("Backoff Factor",n+"backoffFactor",!0).addNumberInput_("Fuzz Factor",n+"fuzzFactor",!0).addNumberInput_("Timeout",n+"timeout",!0)}},{key:"addOfflineSection_",value:function(){var e=this.resolveExternLink_(".OfflineConfiguration");this.addSection_("Offline",e).addBoolInput_("Use Persistent Licenses","offline.usePersistentLicense")}},{key:"addStreamingSection_",value:function(){var e=this.resolveExternLink_(".StreamingConfiguration");if(this.addSection_("Streaming",e).addNumberInput_("Maximum Small Gap Size","streaming.smallGapLimit",!0).addNumberInput_("Buffering Goal","streaming.bufferingGoal",!0).addNumberInput_("Duration Backoff","streaming.durationBackoff",!0).addNumberInput_("Rebuffering Goal","streaming.rebufferingGoal",!0).addNumberInput_("Buffer Behind","streaming.bufferBehind",!0).addNumberInput_("Safe Seek Offset","streaming.safeSeekOffset",!0).addNumberInput_("Stall Threshold","streaming.stallThreshold",!0).addNumberInput_("Safe Skip Distance","streaming.stallSkip",!0),fo.getNativeControlsEnabled()){this.addCustomBoolInput_("Always Stream Text",function(e){},"Text must always be streamed while native controls are enabled, for captions to work."),this.latestInput_.input().disabled=!0,this.latestInput_.input().checked=!0}else this.addBoolInput_("Always Stream Text","streaming.alwaysStreamText");this.addBoolInput_("Jump Large Gaps","streaming.jumpLargeGaps").addBoolInput_("Force Transmux TS","streaming.forceTransmuxTS").addBoolInput_("Start At Segment Boundary","streaming.startAtSegmentBoundary").addBoolInput_("Ignore Text Stream Failures","streaming.ignoreTextStreamFailures").addBoolInput_("Stall Detector Enabled","streaming.stallEnabled"),this.addRetrySection_("streaming","Streaming")}},{key:"addLanguageSection_",value:function(){var e=this.resolveExternLink_(".PlayerConfiguration");this.addSection_("Language",e).addTextInput_("Preferred Audio Language","preferredAudioLanguage").addTextInput_("Preferred Text Language","preferredTextLanguage");this.addCustomTextInput_("Preferred UI Locale",function(e){fo.setUILocale(e.value)}),this.latestInput_.input().value=fo.getUILocale(),this.addNumberInput_("Preferred Audio Channel Count","preferredAudioChannelCount")}},{key:"addMetaSection_",value:function(){var e=this;if(this.addSection_("",null),this.addCustomBoolInput_("Shaka Controls",function(t){fo.setNativeControlsEnabled(!t.checked),t.checked&&(fo.configure("streaming.alwaysStreamText",!0),fo.remakeHash()),e.reloadAndSaveState_()}),fo.getNativeControlsEnabled()||(this.latestInput_.input().checked=!0),Xo.log){var t=Xo.log.Level,n=Xo.log.setLevel;this.addSelectInput_("Log Level",{info:"Info",debug:"Debug",v:"Verbose",vv:"Very Verbose"},function(e){switch(e.value){case"info":n(t.INFO);break;case"debug":n(t.DEBUG);break;case"vv":n(t.V2);break;case"v":n(t.V1)}fo.remakeHash()});var i=this.latestInput_.input();switch(Xo.log.currentLevel){case t.DEBUG:i.value="debug";break;case t.V2:i.value="vv";break;case t.V1:i.value="v";break;default:i.value="info"}}}},{key:"resolveExternLink_",value:function(e){return"../docs/api/shaka.extern.html#"+e}},{key:"addSection_",value:function(e,t){var n=e?Oo.Style.ACCORDION:Oo.Style.VERTICAL;return this.sections_.push(new Oo(this.container_,e,n,t)),this}},{key:"addBoolInput_",value:function(e,t,n){return this.addCustomBoolInput_(e,function(e){fo.configure(t,e.checked),fo.remakeHash()},n),fo.getCurrentConfigValue(t)&&(this.latestInput_.input().checked=!0),this.addedFields_.add(t),this}},{key:"addCustomBoolInput_",value:function(e,t,n){return this.createRow_(e,n),this.latestInput_=new xo(this.getLatestSection_(),e,t),this}},{key:"addTextInput_",value:function(e,t,n){return this.addCustomTextInput_(e,function(e){fo.configure(t,e.value),fo.remakeHash()},n),this.latestInput_.input().value=fo.getCurrentConfigValue(t),this.addedFields_.add(t),this}},{key:"addCustomTextInput_",value:function(e,t,n){return this.createRow_(e,n),this.latestInput_=new Lo(this.getLatestSection_(),e,t),this}},{key:"addNumberInput_",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5?arguments[5]:void 0;return this.createRow_(e,a),this.latestInput_=new Po(this.getLatestSection_(),e,function(e){if(fo.resetConfiguration(t),fo.remakeHash(),"Infinity"==e.value)return fo.configure(t,1/0),void fo.remakeHash();if(""!=e.value||!r){var a=Number(e.value);if((0!=a||i)&&!isNaN(a)){if(Math.floor(a)!=a&&!n)return;fo.configure(t,a),fo.remakeHash()}}},n,i,r),this.latestInput_.input().value=fo.getCurrentConfigValue(t),isNaN(Number(this.latestInput_.input().value))&&r&&(this.latestInput_.input().value=""),this.addedFields_.add(t),this}},{key:"addDatalistInput_",value:function(e,t,n,i){return this.createRow_(e,i),this.latestInput_=new Ro(this.getLatestSection_(),e,n,t),this}},{key:"addSelectInput_",value:function(e,t,n,i){return this.createRow_(e,i),this.latestInput_=new Ao(this.getLatestSection_(),e,n,t),this}},{key:"createRow_",value:function(e,t){this.getLatestSection_().addRow(e,t||null)}},{key:"checkSectionCompleteness_",value:function(){var e=this,t=new Set(["number","string","boolean"]);!function n(i,r){for(var a in i){var s=r?r+"."+a:a,o=i[a];t.has(qo(o))?e.addedFields_.has(s)||console.warn("WARNING: Does not have config field for "+s):n(o,s)}}(fo.getConfiguration(),"")}},{key:"checkSectionValidity_",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.addedFields_[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var a=i.value;null==fo.getCurrentConfigValue(a)&&console.warn("WARNING: Invalid config field "+a)}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}},{key:"getLatestSection_",value:function(){return window.asserts.assert(this.sections_.length>0,"Must have at least one section."),this.sections_[this.sections_.length-1]}}]),e}();function Zo(e){return r.a.createElement("div",{id:"main-layout",className:"mdl-layout mdl-js-layout mdl-layout--fixed-header"},r.a.createElement("header",{className:"app-header mdl-layout__header"},r.a.createElement("header",{className:"mdl-layout__header-row",id:"nav-button-container"},r.a.createElement("img",{alt:"Shaka Player Logo",src:"shaka_logo_trans.png",className:"logo"}),r.a.createElement("button",{id:"nav-button-front",className:"mdl-button mdl-js-button mdl-js-ripple-effect should-disable-on-fail",defaultselected:!0},"HOME"),r.a.createElement("button",{id:"nav-button-search",className:"mdl-button mdl-js-button mdl-js-ripple-effect should-disable-on-fail"},"SEARCH"),r.a.createElement("button",{id:"nav-button-custom",className:"mdl-button mdl-js-button mdl-js-ripple-effect should-disable-on-fail"},"CUSTOM CONTENT"),r.a.createElement("div",{className:"mdl-layout-spacer"}),r.a.createElement("div",{id:"version-block"},r.a.createElement("span",{id:"version-string"})))),r.a.createElement("div",{className:"mdl-layout__drawer hamburger-menu"},r.a.createElement("div",{id:"hamburger-menu-title",className:"mdl-layout-title"},"Demo",r.a.createElement("div",{className:"mdl-layout-spacer"}),r.a.createElement("button",{id:"drawer-close-button",className:"mdl-button mdl-js-button mdl-button--icon should-disable-on-fail"},r.a.createElement("i",{className:"material-icons"},"close"))),r.a.createElement("nav",{className:"mdl-navigation",id:"hamburger-menu-contents"})),r.a.createElement("div",{id:"error-display",className:"hidden"},r.a.createElement("div",{id:"error-display-close-button"},"x"),r.a.createElement("a",{id:"error-display-link",href:"#"})),r.a.createElement("main",{className:"mdl-layout__content",id:"main-div"},r.a.createElement("div",{id:"video-bar",className:"hidden"},r.a.createElement("div",{"data-shaka-player-container":!0,"data-shaka-player-cast-receiver-id":"7B25EC44",className:"video-container"},r.a.createElement("video",{"data-shaka-player":!0,autoplay:!0,playsinline:!0,id:"video"}))),r.a.createElement("div",{id:"contents"}),r.a.createElement("footer",{className:"mdl-mega-footer"},r.a.createElement("div",{className:"mdl-mega-footer__middle-section"},r.a.createElement("div",{className:"mdl-mega-footer__drop-down-section"},r.a.createElement("h1",{className:"mdl-mega-footer__heading"},"PROJECT LINKS"),r.a.createElement("ul",{className:"mdl-mega-footer__link-list"},r.a.createElement("li",null,r.a.createElement("a",{rel:"noopener",target:"_blank",href:"../docs/api/index.html"},"Documentation")),r.a.createElement("li",null,r.a.createElement("a",{rel:"noopener",target:"_blank",href:"https://www.apache.org/licenses/LICENSE-2.0"},"Apache License")),r.a.createElement("li",null,r.a.createElement("a",{rel:"noopener",target:"_blank",href:"https://github.com/google/shaka-player"},"Source on GitHub")),r.a.createElement("li",null,r.a.createElement("a",{rel:"noopener",target:"_blank",href:"https://www.npmjs.com/package/shaka-player"},"Package on NPM")),r.a.createElement("li",null,r.a.createElement("a",{rel:"noopener",target:"_blank",href:"../support.html"},"Browser Support Test")))),r.a.createElement("div",{className:"mdl-mega-footer__drop-down-section"},r.a.createElement("h1",{className:"mdl-mega-footer__heading"},"CDN"),r.a.createElement("ul",{className:"mdl-mega-footer__link-list"},r.a.createElement("li",null,r.a.createElement("a",{rel:"noopener",target:"_blank",href:"https://developers.google.com/speed/libraries/#shaka-player"},"Google Hosted Libraries")),r.a.createElement("li",null,r.a.createElement("a",{rel:"noopener",target:"_blank",href:"https://www.jsdelivr.com/package/npm/shaka-player"},"jsDelivr")),r.a.createElement("li",null,r.a.createElement("a",{rel:"noopener",target:"_blank",href:"https://cdnjs.com/libraries/shaka-player"},"CDNJS")))),r.a.createElement("div",{className:"mdl-mega-footer__drop-down-section"},r.a.createElement("h1",{className:"mdl-mega-footer__heading"},"DEMO MODE"),r.a.createElement("ul",{className:"mdl-mega-footer__link-list",id:"compiled-links"},r.a.createElement("li",null,r.a.createElement("a",{href:"#build=compiled",id:"compiled-link"},"Compiled (Release)")),r.a.createElement("li",null,r.a.createElement("a",{href:"#build=debug_compiled",id:"debug-compiled-link"},"Compiled (Debug)")),r.a.createElement("li",null,r.a.createElement("a",{href:"#build=uncompiled",id:"uncompiled-link"},"Uncompiled"))))))))}document.addEventListener("shaka-main-loaded",$o.init),n.d(t,"default",function(){return Zo})}])});